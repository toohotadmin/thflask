/* Built on 2025-02-27 12:46:43 */
define("lib/i18n",[],function(){return{version:"1.0.0",load:function(e,t,i,n){n.isBuild?i():xv.i18n.getCatalog(e,function(e){i(e)})}}}),define("lib/test",[],function(){var e={};return e.start_assert=function(t){e.assert_label=t,e.total_assertions=0,e.passed_assertions=0},e.end_assert=function(){console[e.passed_assertions===e.total_assertions?"log":"error"](e.assert_label,e.passed_assertions+"/"+e.total_assertions+" assertions passed")},e.assert=function(t,i){e.total_assertions++,i?e.passed_assertions++:console.error(t)},e}),define("lib/tools",["static/utils","lib/i18n!front","static/log","./test"],function(e,t,i,n){var s={pendingPrepare:[]};s.encloseTextWithTag=function(e,t){return"string"!=typeof e||0!==e.length&&"<"===e[0]?e:"<"+t+">"+e+"</"+t+">"},s.parseUrl=function(e,t,i){var n={body:null,query:null,hash:null},s=e.split("#");if(2===s.length){if("hash"===t)return s[1];n.hash=s[1]}if("hash"===t)return null;if(e=s[0],s=e.split("?"),s.length>=2&&(n.query=s[1]),n.body=s[0],void 0!==i&&i){var o=n.query;if(n.query={},o)for(var a=o.split("&"),r=0;r<a.length;r++){var l=a[r];if(l.length){var d=l.split("="),u=d.shift();if(n.query[u]=d.join("="),r===a.length-1&&s.length>2)for(var c=2;c<s.length;c++)n.query[u]+="?"+s[c]}}}else if(s.length>2)for(var c=2;c<s.length;c++)n.query+="?"+s[c];return void 0!==t&&t&&"undefined"!=typeof n[t]?n[t]:n},s.addUrlParam=function(e,t,i){var n=s.parseUrl(e,!1,!0);t=t.toString(),void 0===i||!1===i?"undefined"!=typeof n.query[t]&&delete n.query[t]:n.query[t]=i.toString();var o="";for(var a in n.query)o+=(""===o?"?":"&")+a+"="+n.query[a];return n.body+o},s.getUrlHash=function(e){return"string"!=typeof e?window.location.hash.substring(1):-1===e.indexOf("#")?"":e.split("#").pop()},s.setUrlHash=function(e,t){e="string"==typeof e?e:"",t=t||!1,e.length>0&&"#"!==e.substring(0,1)&&(e="#"+e),e!==window.location.hash&&(0===e.length?this.removeUrlHash(t):window.history?t?window.history.replaceState(null,undefined,e):window.history.pushState(null,undefined,e):window.location.hash=e)},s.removeUrlHash=function(e){var t=window.location.pathname+window.location.search;window.history?e?window.history.replaceState(null,undefined,t):window.history.pushState(null,undefined,t):window.location.href=t},s.isEmpty=function(e){var t=typeof e;if("undefined"===t||null===e||0===e||!1===e)return!0;if("string"===t&&0===$.trim(e).length)return!0;if("object"===t){if("number"==typeof e.length)return 0===e.length;if("function"==typeof Object&&"function"==typeof Object.keys)return 0===Object.keys(e).length;var i=0;for(var n in e)e.hasOwnProperty(n)&&i++;return 0===i}return!1},s.pad=function(e,t,i,n){void 0!==n&&"left"===n||(n="right");for(var s=""+e;s.length<t;)"left"===n?s=i+s:s+=i;return s},s.ucfirst=function(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()},s.ucwords=function(e){return e.toLowerCase().replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},s.cleanStr=function(e,t){if(e&&"string"==typeof e)return e=e.replace(/[[\]{}()*+?.,\\^$|#\s]/g,""),t?s.translit(e):e},s.translit=function(e){if(e&&"string"==typeof e)return e.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/æ/g,"ae").replace(/ç/g,"c").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/ñ/g,"n").replace(/[òóôõö]/g,"o").replace(/œ/g,"oe").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y")};var o={};s.preloadPicture=function(e,t){var i=e;if(t&&(i+=t+".jpg"),"undefined"==typeof o[i]){(new Image).src=i,o[i]=!0}},s.stripStartScript=function(e){if(e=$.trim(e),"<script "!==e.substring(0,8))return e;var t=e.indexOf(">");if(-1===t)return e;var i=e.indexOf("<\/script>");return-1===i?e:t!==i-1?e:e.substring(i+9)},s.replaceThumbcast=function(e){for(var t=e.split(/(<script>|<\/script>)/g),i=0;i<t.length;i++)"<script>"===t[i]||"<\/script>"===t[i]?t[i]="":"document.write(xv.thumbs.replaceThumbUrl("===t[i].substring(0,41)?t[i]=window.xv.thumbs.replaceThumbUrl(t[i].substring(42,t[i].lastIndexOf("))")-1)):"xv.thumbs.casting.displayRandomThumb("===t[i].substring(0,37)?t[i]=window.xv.thumbs.casting.displayRandomThumb(t[i].substring(38,t[i].lastIndexOf(")")-1),!0):"document.write(xv.thumbs.replaceActGalThumbUrl("===t[i].substring(0,47)?t[i]=window.xv.thumbs.replaceActGalThumbUrl(t[i].substring(48,t[i].lastIndexOf("))")-1)):"xv.thumbs.prepareVideo("===t[i].substring(0,23)&&(t[i]="");return t.join("")},s.executePendingPrepare=function(e){if(e.each(function(){window.xv.thumbs.prepareVideo(this)}),window.xv.pending_prepare_video_list)for(var t in window.xv.pending_prepare_video_list)"function"==typeof window.xv.pending_prepare_video_list[t]&&window.xv.pending_prepare_video_list[t](e)},s.addPendingPrepareList=function(e){window.xv.pending_prepare_video_list||(window.xv.pending_prepare_video_list=[]),window.xv.pending_prepare_video_list.push(e)},s.scrollTo=function(e,t,i){var n=$(e);n&&n.length&&(void 0===t&&(t=0),void 0===i&&(i=400),$("html,body").animate({scrollTop:n.offset().top-10-t},i))};var a=!1,r=[];return s.executeRecaptcha=function(t,i,n){if("object"==typeof grecaptcha)return void grecaptcha.ready(function(){grecaptcha.execute(t,{action:i}).then(n)});if(r.push({sAction:i,fnCallback:n}),!a){a=!0;var s=function(){grecaptcha.ready(function(){for(var e=0;e<r.length;e++){var i=r[e];grecaptcha.execute(t,{action:i.sAction}).then(i.fnCallback)}})},o="https://www.google.com/recaptcha/api.js?render="+t;e.loadScript(o,null,{load:s})}},s.formatNumberUnits=function(e,i){i=void 0===i||i!=parseInt(i)?1:parseInt(i);var n=!1,s=0;e>=1e9?(n="billions",s=9):e>=1e6?(n="millions",s=6):e>=1e3&&(n="thousands",s=3);var o=Math.round(e/Math.pow(10,s-i));return o/=Math.pow(10,i),o=o.toLocaleString(),n?t.__("units.number_"+n,{"%number%":o}):o},s.formatFileSize=function(e,i){i=void 0===i||i!=parseInt(i)?1:parseInt(i);var n={terabytes:1099511627776,gigabytes:1073741824,megabytes:1048576,kilobytes:1024},s="bytes";for(var o in n)if("number"==typeof n[o]&&e>=n[o]){s=o,e/=n[o];break}return e=Math.round(e*Math.pow(10,i))/Math.pow(10,i),e=e.toLocaleString(),t.__("units.file_size_"+s,{"%size%":e})},s.bitwise_enum=function(e,t){e===undefined&&(e=[]),this.oBits=e,this.iVal=void 0===t?this.getMaxValue():t},s.bitwise_enum.prototype={setWithValue:function(e){return e>this.getMaxValue()?void i.error("bitwise_enum.setWithValue: byte value is too high. Tried to set "+e+" but max is "+this.getMaxValue()):(this.iVal=e,this)},setWithItems:function(e){this.iVal=0;for(var t=0;t<e.length;t++)this.toggleElementByValue(e[t]);return this},toggleElement:function(e,t){if(e!==undefined){if(e>this.getHighestValue())return void i.error("bitwise_enum.toggleElement: bit value is too high");t===undefined&&(t=!this.isElementOn(e));var n=1<<Math.log2(e);return t?this.iVal|=n:this.iVal&=~n,this}},isElementOn:function(e){var t=1<<Math.log2(e);return 0!=(this.iVal&t)},isMultipleElementsOn:function(e){return(this.iVal&e)===e},isAnyElementOn:function(e){return 0!=(this.iVal&e)},toggleElementByValue:function(e,t){var i=this;return this.oBits.map(function(n,s){n===e&&i.toggleElement(Math.pow(2,s),t)}),this},isValueOn:function(e){var t=this.oBits.findIndex(function(t){return e===t});return t<0?undefined:this.isElementOn(Math.pow(2,t))},getEnabledElements:function(){var e=this;return this.oBits.reduce(function(t,i,n){return e.isElementOn(Math.pow(2,n))&&t.push(i),t},[])},getValue:function(){return this.iVal},getMaxValue:function(){return Math.pow(2,this.oBits.length)-1},getHighestValue:function(){return Math.pow(2,this.oBits.length-1)}},s.isBaseJSObject=function(e){return e&&"object"==typeof e&&e.constructor&&0===Object.keys(Object.getPrototypeOf(e)).length},s.initParams=function(e,t,i){var n=this;i=i||{},t=t||{};var o={};Object.keys(i).forEach(function(a){return o[a]=!0,s.isBaseJSObject(i[a])&&!Array.isArray(i[a])?(e[a]={},void n.initParams(e[a],t[a],i[a])):Array.isArray(i[a])?(e[a]=JSON.parse(JSON.stringify(i[a])),void(t[a]!==undefined&&(e[a]=JSON.parse(JSON.stringify(t[a]))))):(e[a]=i[a],void(t[a]!==undefined&&(e[a]=t[a])))}),Object.keys(t).filter(function(e){return!o[e]}).forEach(function(i){return s.isBaseJSObject(t[i])&&!Array.isArray(t[i])?(e[i]={},void n.initParams(e[i],t[i],{})):Array.isArray(t[i])?void(e[i]=JSON.parse(JSON.stringify(t[i]))):void(e[i]=t[i])})},s.createRange=function(e){return Array.apply(null,Array(Math.max(0,e))).map(function(e,t){return t})},s.arrayToMap=function(e,t){if(!e||!e.length||null===e[0])return{};var i=!1;if("object"==typeof e[0]&&null!==e[0]){if(void 0===t){var n=["id","sId","iId"];if(t=null,n.forEach(function(i){e[0][i]!==undefined&&null!==e[0][i]&&(t=i)}),null===t)return{}}"function"==typeof e[0][t]&&(i=!0)}else t=null;return t?i?e.reduce(function(e,i){return e[i[t]()]=i,e},{}):e.reduce(function(e,i){return e[i[t]]=i,e},{}):e.reduce(function(e,t){return e[t]=!0,e},{})},s.formatDurationMethods={"short":"short",medium:"medium","long":"long",diff:"ago"},s.formatDuration=function(e,i){if(i||(i=this.formatDurationMethods.medium),e<5&&i===this.formatDurationMethods.diff)return t.__("misc.just_now");if(e>=86400&&e<172800&&i===this.formatDurationMethods.diff)return t.__("misc.yesterday");var n,s={sec:60,min:3600,hour:86400,day:604800,week:2592e3,month:31536e3,year:-1},o=1;for(var a in s){if(e<s[a]||-1==s[a]){e=Math.floor(e/o),n=1===e?t.__("misc.one_"+a+"_"+i):t.__("misc.nb_"+a+"s_"+i,{"%nb%":e.toString()});break}o=s[a]}return n},s.DURATIONS={SECONDS:1,MINUTES:60,HOURS:3600,DAYS:86400,WEEKS:604800,MONTHS:2592e3,YEARS:31104e3},s.DURATION_TIMES=Object.keys(s.DURATIONS).reduce(function(e,t){return e[t]=t,e},{}),s.getNbTimesInDuration=function(e,t){return"undefined"==typeof s.DURATIONS[t]?(i.error("tools.getNbTimesInDuration: unknown time unit",t),0):Math.floor(e/s.DURATIONS[t])},s}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function i(e){return _(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(m,e)}function r(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return b[e]})}function l(t,i){function s(e){if("string"==typeof e&&(e=e.split(y,2)),!_(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(n(e[0])+"\\s*"),r=new RegExp("\\s*"+n(e[1])),l=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var o,r,l,f=[],h=[],p=[],g=!1,m=!1;s(i||e.tags);for(var b,S,k,T,E,P,I=new c(t);!I.eos();){if(b=I.pos,k=I.scanUntil(o))for(var F=0,x=k.length;F<x;++F)T=k.charAt(F),a(T)?p.push(h.length):m=!0,h.push(["text",T,b,b+1]),b+=1,"\n"===T&&function(){if(g&&!m)for(;p.length;)delete h[p.pop()];else p=[];g=!1,m=!1}();if(!I.scan(o))break;if(g=!0,S=I.scan(w)||"name",I.scan(v),"="===S?(k=I.scanUntil(D),I.scan(D),I.scanUntil(r)):"{"===S?(k=I.scanUntil(l),I.scan(C),I.scanUntil(r),S="&"):k=I.scanUntil(r),!I.scan(r))throw new Error("Unclosed tag at "+I.pos);if(E=[S,k,b,I.pos],h.push(E),"#"===S||"^"===S)f.push(E);else if("/"===S){if(!(P=f.pop()))throw new Error('Unopened section "'+k+'" at '+b);if(P[1]!==k)throw new Error('Unclosed section "'+P[1]+'" at '+b)}else"name"===S||"{"===S||"&"===S?m=!0:"="===S&&s(k)}if(P=f.pop())throw new Error('Unclosed section "'+P[1]+'" at '+I.pos);return u(d(h))}function d(e){for(var t,i,n=[],s=0,o=e.length;s<o;++s)(t=e[s])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}function u(e){for(var t,i,n=[],s=n,o=[],a=0,r=e.length;a<r;++a)switch(t=e[a],t[0]){case"#":case"^":s.push(t),o.push(t),s=t[4]=[];break;case"/":i=o.pop(),i[5]=t[2],s=o.length>0?o[o.length-1][4]:n;break;default:s.push(t)}return n}function c(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,_=Array.isArray||function(e){return"[object Array]"===p.call(e)},g=RegExp.prototype.test,m=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,y=/\s+/,D=/\s*=/,C=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},c.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var i,n=this.cache;if(n.hasOwnProperty(e))i=n[e];else{for(var o,a,r=this,l=!1;r;){if(e.indexOf(".")>0)for(i=r.view,o=e.split("."),a=0;null!=i&&a<o.length;)a===o.length-1&&(l=s(i,o[a])),i=i[o[a++]];else i=r.view[e],l=s(r.view,e);if(l)break;r=r.parent}n[e]=i}return t(i)&&(i=i.call(this.view)),i},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=l(e,t)),n},h.prototype.render=function(e,t,i){var n=this.parse(e),s=t instanceof f?t:new f(t);return this.renderTokens(n,s,i,e)},h.prototype.renderTokens=function(e,t,i,n){for(var s,o,a,r="",l=0,d=e.length;l<d;++l)a=undefined,s=e[l],o=s[0],"#"===o?a=this.renderSection(s,t,i,n):"^"===o?a=this.renderInverted(s,t,i,n):">"===o?a=this.renderPartial(s,t,i,n):"&"===o?a=this.unescapedValue(s,t):"name"===o?a=this.escapedValue(s,t):"text"===o&&(a=this.rawValue(s)),a!==undefined&&(r+=a);return r},h.prototype.renderSection=function(e,i,n,s){function o(e){return a.render(e,i,n)}var a=this,r="",l=i.lookup(e[1]);if(l){if(_(l))for(var d=0,u=l.length;d<u;++d)r+=this.renderTokens(e[4],i.push(l[d]),n,s);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)r+=this.renderTokens(e[4],i.push(l),n,s);else if(t(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,s.slice(e[3],e[5]),o),null!=l&&(r+=l)}else r+=this.renderTokens(e[4],i,n,s);return r}},h.prototype.renderInverted=function(e,t,i,n){var s=t.lookup(e[1]);if(!s||_(s)&&0===s.length)return this.renderTokens(e[4],t,i,n)},h.prototype.renderPartial=function(e,i,n){if(n){var s=t(n)?n(e[1]):n[e[1]];return null!=s?this.renderTokens(this.parse(s),i,n,s):void 0}},h.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},h.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);if(null!=n)return e.escape(n)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.2",e.tags=["{{","}}"];var S=new h;return e.clearCache=function(){return S.clearCache()},e.parse=function(e,t){return S.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(e,t,n)},e.to_html=function(i,n,s,o){var a=e.render(i,n,s);if(!t(o))return a;o(a)},e.escape=r,e.Scanner=c,e.Context=f,e.Writer=h,e}),define("text",["module"],function(e){"use strict";function t(e,t){return e===undefined||""===e?t:e}function i(e,i,n,s){if(i===s)return!0;if(e===n){if("http"===e)return t(i,"80")===t(s,"80");if("https"===e)return t(i,"443")===t(s,"443")}return!1}var n,s,o,a,r,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],d=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,f=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,p=c&&(location.port||undefined),_={},g=e.config&&e.config()||{};return n={version:"2.0.16",strip:function(e){if(e){e=e.replace(d,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=l[t];try{e=new ActiveXObject(i)}catch(n){}if(e){l=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),i=e.substring(o+1)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,s,o){var a,r,l,d=n.xdRegExp.exec(e);return!d||(a=d[2],r=d[3],r=r.split(":"),l=r[1],r=r[0],(!a||a===t)&&(!r||r.toLowerCase()===s.toLowerCase())&&(!l&&!r||i(a,l,t,o)))},finishLoad:function(e,t,i,s){i=t?n.strip(i):i,g.isBuild&&(_[e]=i),s(i)},load:function(e,t,i,s){if(s&&s.isBuild&&!s.inlineText)return void i();g.isBuild=s&&s.isBuild;var o=n.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),r=t.toUrl(a),l=g.useXhr||n.useXhr;if(0===r.indexOf("empty:"))return void i();!c||l(r,f,h,p)?n.get(r,function(t){n.finishLoad(e,o.strip,t,i)},function(e){i.error&&i.error(e)}):t([a],function(e){n.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)},function(e){i.error&&i.error(e)})},write:function(e,t,i,s){if(_.hasOwnProperty(t)){var o=n.jsEscape(_[t]);i.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,i,s,o){var a=n.parseName(t),r=a.ext?"."+a.ext:"",l=a.moduleName+r,d=i.toUrl(a.moduleName+r)+".js";n.load(l,i,function(t){var i=function(e){return s(d,e)};i.asModule=function(e,t){return s.asModule(e,d,t)},n.write(e,l,i,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(s=require.nodeRequire("fs"),n.get=function(e,t,i){try{var n=s.readFileSync(e,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),t(n)}catch(o){i&&i(o)}}):"xhr"===g.env||!g.env&&n.createXhr()?n.get=function(e,t,i,s){var o,a=n.createXhr();if(a.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),s[o]);g.onXhr&&g.onXhr(a,e),a.onreadystatechange=function(n){var s,o;4===a.readyState&&(s=a.status||0,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=a,i&&i(o)):t(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,e))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var i,n,s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),"utf-8")),r="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(o),i.append(n);r=String(i.toString())}finally{a.close()}t(r)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in o,n.get=function(e,t){var i,n,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{i=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(s,1,0,!1),n=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),n.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),t(l.value)}catch(d){throw new Error((s&&s.path||"")+": "+d)}}),n}),define("text!lib/helpers/loader/before.mustache",[],function(){return'<span class="x-loader-inline before{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{{ loader }}}{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}</span>'}),define("text!lib/helpers/loader/after.mustache",[],function(){return'<span class="x-loader-inline after{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}{{{ loader }}}</span>'}),define("lib/helpers/inline_loader",["lib/tools","mustache","text!./loader/before.mustache","text!./loader/after.mustache"],function(e,t,i,n){var s="",o=-1,a=function(e){return"before"===e||"button_before"===e?i:n},r=function(e){return void 0!==e?e:"_x_loader_"+ ++o},l=function(e,i,n,s,o){"string"!=typeof e&&(e="after"),this.html=t.render(a(e),{id:r(n),text:i,is_button:0===e.indexOf("button_"),loader:o?l.getIcf():l.getImg(),safe:!!s}),this.node=!1};return l.setup=function(t){e.preloadPicture(t),s='<img class="x-loader-inline-img" src="'+t+'" />'},l.get=function(e,t,i){return new l(e,t,i)},l.getSafe=function(e,t,i){return new l(e,t,i,!0)},l.getSafeIcf=function(e,t,i){return new l(e,t,i,!0,!0)},l.getImg=function(){return 0===s.length&&console.error("Loader image not setup"),s},l.getIcf=function(){return"<span class='icon-f icf-spinner icf-anim-pulse'></span>"},l.prototype={getHtml:function(){return this.html},getNode:function(){return this.node||(this.node=$(this.html)),this.node},appendTo:function(e){return this.getNode().appendTo(e),this},prependTo:function(e){return this.getNode().prependTo(e),this},insertAfter:function(e){return this.getNode().insertAfter(e),this},insertBefore:function(e){return this.getNode().insertBefore(e),this},detach:function(){return this.getNode().detach(),this},remove:function(){this.node&&this.node.remove()}},l}),define("text!lib/helpers/popup/template.mustache",[],function(){return'<div class="x-popup {{ position }} {{ cls }}">\n\t<div class="x-popup-arrow"></div>\n\t<div class="x-popup-content"></div>\n\t{{{ closebtn }}}\n</div>\n'}),define("text!lib/helpers/popup/template_close.mustache",[],function(){return'<div class="x-popup-close">{{{ closebtn_content }}}</div>'}),define("lib/helpers/popup",["mustache","text!./popup/template.mustache","text!./popup/template_close.mustache"],function(e,t,i){var n=[],s={relative_to:null,relative_to_default:!1,position:{v:"below",h:"right"},offset:{below:0,above:0,left:0,right:0},max_height:0,max_width:0,trigger:"click",trigger_open:!1,trigger_close:!1,trigger_close_openevents:["all"],trigger_prevent_default:!0,autoclose:!0,open_close_cooldown:0,close_after_cooldown:!1,close_method:"hide",closebtn:!1,closebtn_content:'<span class="icon-f icf-close-thin"><span>x</span></span>',template:t,template_close:i,popup_class:null,pos_on_scroll:!1,close_on_resize:!0,autoclose_on_same_level:!1,mouseout_autoclose_openevents:["mouseover_btn_timer"],popup_opened_btn_class:"popup-opened-btn",popup_opened_class:"popup-opened",autoscroll_to_best_position:!1},o=function(e,t,i){if(this.options=$.extend({},s,i||{}),this.setPosition(this.options.position,!0),this.bRelativeToPosSet=!1,this.button=$(),this.content=t,this.opened=!1,this.autoclose_timer=!1,null===this.options.relative_to?this.setDefaultRelativeTo():this.options.relative_to=$(this.options.relative_to),this.setButton(e),this.options.autoclose_on_same_level&&("string"==typeof this.levels[this.options.autoclose_on_same_level]?(this.autoclose_level=this.levels[this.options.autoclose_on_same_level],this.uniqid=(new Date).getTime()+Math.floor(1e4*Math.random()+1).toString(16)):this.options.autoclose_on_same_level=!1),this.options.close_on_resize){this.options.iResizeLastWidth=$(window).outerWidth();var o=this;$(window).on("resize",function(){var e=$(window).outerWidth();if(o.options.iResizeLastWidth===e)return!1;o.options.iResizeLastWidth=e,o.close()})}n.push(this)};o.prototype={onOpen:null,onClose:null,levels:{any_level:"ALL",header_menu:"HEADER_MENU",profile_submit:"PROFILE_SUBMIT",profile_related_submit:"PROFILE_SUBLVL_SUBMIT",profile_listing_dropdowns:"PROF_LIST_DROPDOWN",simple_dropdown_niv2:"SIMPLE_DROPDOWN",thumb_block_menu:"TB_MENU"},setButton:function(e){return e=$(e),this.button&&this.button.length&&this.button.is(e)?this:(this.button&&this.button.length&&this.button.removeClass(this.options.popup_opened_btn_class),this.button=e,this.button&&this.button.length&&this.button.toggleClass(this.options.popup_opened_btn_class,this.opened),!0===this.options.relative_to_default&&this.setDefaultRelativeTo(),this.initButton(),this)},initButton:function(){if(this.button&&this.button.length){var e=this;this.options.trigger&&this.button.off(this.options.trigger,this.callbackButtonTrigger).on(this.options.trigger,e,this.callbackButtonTrigger),this.options.trigger_open&&this.button.off(this.options.trigger_open,this.callbackButtonTriggerOpen).on(this.options.trigger_open,e,this.callbackButtonTriggerOpen),this.options.trigger_close&&this.button.off(this.options.trigger_close,this.callbackButtonTriggerClose).on(this.options.trigger_close,e,this.callbackButtonTriggerClose),this.mouseover_open_timeout=!1,this.button.off("mouseover",this.callbackButtonMouseOver).on("mouseover",e,this.callbackButtonMouseOver),this.mouseout_close_timeout=!1,xv.conf&&xv.conf.dyn&&xv.conf.dyn.is_desktop?this.button.off("mouseout",this.callbackButtonMouseOut).on("mouseout",e,this.callbackButtonMouseOut):(e.button_hovered=!1,e.add_mouseout_close_func()),this.position()}},setDefaultRelativeTo:function(){this.options.relative_to_default=!0,this.options.relative_to=null;var e=this;this.button&&this.button.length&&this.button.parents().each(function(){if("fixed"===$(this).css("position"))return e.options.relative_to=$(this),!1}),null===this.options.relative_to&&(this.options.relative_to=$(document.body))},setContent:function(e){return this.popup.find(".x-popup-content").empty().append($(e)),this.position(),this},appendContent:function(e){this.popup&&this.popup.find(".x-popup-content").append(e)},setPosition:function(e,t){return"object"==typeof e?!e.v||!e.h||"below"!==e.v&&"above"!==e.v||"right"!==e.h&&"left"!==e.h?(t&&(this.options.position=s.position),!1):(this.options.position=e,!0):(e=e.split(" "),2!==e.length||"below"!==e[0]&&"above"!==e[0]||"right"!==e[1]&&"left"!==e[1]?(t&&(this.options.position=s.position),!1):(this.options.position={v:e[0],h:e[1]},!0))},position:function(){if(!this.popup||!this.button||!this.button.length)return!1;var e=this.options.relative_to.offset(),t=this.button.offset(),i=this.options.relative_to.is($(document.body))||this.options.relative_to.is($(window))?0:this.options.relative_to.scrollTop(),n=t.top-e.top+i,s=t.left-e.left,o=!1,a=!1,r=this.popup.children(".x-popup-arrow");switch(this.options.position.v){case"below":n+=this.button.outerHeight(),r.length&&(n+=parseInt(r.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.below&&(n+=this.options.offset.below);break;case"above":o=this.options.relative_to.innerHeight()-n,r.length&&(o+=parseInt(r.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.above&&(o+=this.options.offset.above)}switch(this.options.position.h){case"right":a=this.options.relative_to.innerWidth()-s-this.button.outerWidth(),"number"==typeof this.options.offset.right&&(a+=this.options.offset.right);break;case"left":"number"==typeof this.options.offset.left&&(s+=this.options.offset.left)}"function"==typeof this.options.max_width&&this.popup.find(".x-popup-content").css("max-width",this.options.max_width()+"px"),this.popup.css("max-width","none"),!1!==a?(this.popup.css("right",a+"px"),r.css("right","")):(this.popup.css("left",s+"px"),r.css("left","")),!1!==o?this.popup.css("bottom",o+"px"):this.popup.css("top",n+"px");var l=this.popup.position();if(!1!==a){if(l.left>=2)return!0;var d=this.popup.outerWidth(),u=$("body").outerWidth(!0)-4;if(d>u&&(d=u,this.popup.css("max-width",d+"px")),l=this.popup.position(),l.left>=2)return!0;var c=parseInt(r.css("right").replace("px",""));return this.popup.css("right",a+l.left-2+"px"),r.css("right",c-l.left+2+"px"),!0}var d=this.popup.outerWidth(),u=$("body").outerWidth(!0)-2;if(l.left+d<=u)return!0;d>u-2&&(d=u-2,this.popup.css("max-width",d+"px"));var c=parseInt(r.css("left").replace("px","")),f=l.left+d-u;return this.popup.css("left",s-f+"px"),r.css("left",c+f+"px"),!0},autoscrollIfNeeded:function(){if(!this.popup)return!1;var e=this.options.relative_to.offset(),t=this.popup.offset(),i=this.options.relative_to.is($(document.body))||this.options.relative_to.is($(window))?0:this.options.relative_to.scrollTop(),n=t.top-e.top+i,s=n+this.popup.outerHeight(),o=$(window).scrollTop(),a=o+$(window).outerHeight();if(!(n>=o&&s<=a)){var r;n<o?(r=o-n,$("html, body").animate({scrollTop:$(window).scrollTop()-r},250)):(r=s-a,n-r<o&&(r=n-o),$("html, body").animate({scrollTop:$(window).scrollTop()+r},250))}},handleOpenCloseCooldown:function(){var e=this,t=function(){e.can_close=!0,e.options.close_after_cooldown&&e.to_close&&(e.to_close=!1,e.close())};this.can_close=!0,this.options.open_close_cooldown&&(this.can_close=!1,this.to_close=!1,setTimeout(t,this.options.open_close_cooldown))},_getCloseBtn:function(){return this.options.closebtn?e.render(this.options.template_close,{closebtn_content:this.options.closebtn_content}):""},getPopup:function(){return this.popup?this.popup:null},_getPopup:function(){var t=this;if(this.popup){var i=this.popup.children(".x-popup-close"),n=i.length;return n&&!this.options.closebtn?i.off("click").remove():!n&&this.options.closebtn&&this.popup.append($(this._getCloseBtn()).on("click",function(e){t.close(e)})),this.popup}this.opened=!0,this.popup=$(e.render(this.options.template,{position:this.options.position.v+" "+this.options.position.h,cls:("string"==typeof this.options.popup_class?this.options.popup_class:"")+("string"==typeof this.options.popup_opened_class?" "+this.options.popup_opened_class:""),closebtn:this._getCloseBtn()}));var s;s="function"==typeof this.content?$(this.content()):$(this.content);var o=this.popup.find(".x-popup-content").append(s);return this.options.max_height>0&&o.css("max-height",this.options.max_height+"px"),this.options.max_width>0&&o.css("max-width",this.options.max_width+"px"),this.options.relative_to.append(this.popup),this.position(),this.options.autoscroll_to_best_position&&this.autoscrollIfNeeded(),this.popup.on("click",function(e){e.stopPropagation()}),this.popup.on("mouseover",function(){t.popup_hovered=!0,this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1)}),this.popup.on("mouseout",function(){t.popup_hovered=!1,t.add_mouseout_close_func()}),this.options.autoclose&&"number"!=typeof this.options.autoclose?"function"!=typeof this.close_on_body_click&&(this.close_on_body_click=function(e){t.opened&&0===$(e.target).closest(t.button).length&&t.close()},$("body").on("click",this.close_on_body_click)):"function"==typeof this.close_on_body_click&&($("body").off("click",this.close_on_body_click),this.close_on_body_click=!1),this.options.closebtn&&this.popup.children(".x-popup-close").on("click",function(e){t.close(e)}),this.onOpen&&this.onOpen(),this.popup},add_mouseover_open_func:function(){if(this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1),!this.mouseover_open_timeout&&this.options.mouseover_open){var e=this;this.mouseover_open_timeout=setTimeout(function(){e.mouseover_open_timeout=!1,e.isOpened()||(e.opened_with="mouseover_btn_timer",e.open())},this.options.mouseover_open)}},add_mouseout_close_func:function(){this.mouseover_open_timeout&&(clearTimeout(this.mouseover_open_timeout),this.mouseover_open_timeout=!1),this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1);var e="number"==typeof this.options.autoclose?this.options.autoclose:!!this.options.mouseout_autoclose&&this.options.mouseout_autoclose;if(e){var t=this;this.mouseout_close_timeout=setTimeout(function(){t.mouseout_close_timeout=!1,
t.popup_hovered||t.button_hovered||"number"!=typeof t.options.autoclose&&-1===t.options.mouseout_autoclose_openevents.indexOf(t.opened_with)||t.close()},e)}},open:function(e){var t=this;e?"string"==typeof e?this.opened_with=e:(this.options.trigger_prevent_default&&(e.preventDefault(),e.stopPropagation()),this.opened_with=e.type):this.opened_with="no_event",this.close_same_level_popups();var i=this.options.relative_to.css("position");if("relative"!==i&&"absolute"!==i&&"fixed"!==i&&(this.options.relative_to.css("position","relative"),this.bRelativeToPosSet=!0),this._getPopup(),!1!==this.autoclose_timer&&(clearTimeout(this.autoclose_timer),this.autoclose_timer=!1),this.handleOpenCloseCooldown(),this.options.autoclose&&("number"!=typeof this.options.autoclose?"function"!=typeof this.close_on_body_click&&(this.close_on_body_click=function(e){t.opened&&0===$(e.target).closest(t.button).length&&t.close()},$("body").on("click",this.close_on_body_click)):("function"==typeof this.close_on_body_click&&($("body").off("click",this.close_on_body_click),this.close_on_body_click=!1),this.autoclose_timer=setTimeout(function(){t.button_hovered||t.popup_hovered||(t.close(),t.autoclose_timer=!1)},this.options.autoclose))),this.close_same_level_popups(),this.button&&this.button.length&&(this.button.addClass(this.options.popup_opened_btn_class),setTimeout(function(){t.opened&&t.button.addClass(t.options.popup_opened_btn_class)},10)),this.opened)return void this.position();this.opened=!0,this.popup.stop().addClass(this.options.popup_opened_class).fadeIn(),this.position(),this.options.autoscroll_to_best_position&&this.autoscrollIfNeeded(),this.onOpen&&this.onOpen()},forceClose:function(e,t){this.can_close=!0,this.to_close=!1,this.close(e,t)},close:function(e,t){if(e&&"object"==typeof e&&(e.preventDefault(),e.stopPropagation(),this.opened_with=e.type),!this.can_close)return void(this.to_close=!0);var i=!!this.bRelativeToPosSet;if(this.bRelativeToPosSet&&(this.options.relative_to.css("position",""),this.bRelativeToPosSet=!1),!this.opened)return void(t&&this.popup.remove());if(this.opened=!1,this.opened_with=!1,this.popup.stop(),t||"hide"!==this.options.close_method)if(i)this.popup.remove();else{var n=this;this.popup.fadeOut(function(){n.popup.remove()})}else i?this.popup.hide():this.popup.removeClass(this.options.popup_opened_class).fadeOut();this.button&&this.button.length&&this.button.removeClass(this.options.popup_opened_btn_class),this.onClose&&this.onClose()},delete_pop:function(){this.close(null,!0)},close_same_level_popups:function(){var e=this.autoclose_level?this.autoclose_level:this.levels.any_level;for(var t in n)n[t].autoclose_level!==e&&n[t].autoclose_level!==this.levels.any_level||n[t].uniqid===this.uniqid||n[t].close()},toggle:function(e){if(this.opened)return void this.close(e);this.open(e)},isOpened:function(){return this.opened},setPopupClass:function(e){var t="string"==typeof e?e:null;this.isOpened()&&this.popup&&("string"==typeof this.options.popup_class&&this.popup.removeClass(this.options.popup_class),null!==t&&this.popup.addClass(t)),this.options.popup_class=t},callbackButtonTrigger:function(e){e.data.toggle(e)},callbackButtonTriggerOpen:function(e){e.data.open(e)},callbackButtonTriggerClose:function(e){-1!==e.data.options.trigger_close_openevents.indexOf(e.data.opened_with)&&e.data.close(e)},callbackButtonMouseOver:function(e){e.data.button_hovered=!0,e.data.add_mouseover_open_func()},callbackButtonMouseOut:function(e){e.data.button_hovered=!1,e.data.add_mouseout_close_func()}},$(window).resize(function(){for(var e in n)n[e].isOpened()&&n[e].position()});var a,r=function(){for(var e in n)n[e].isOpened()&&n[e].options.pos_on_scroll&&n[e].position()};return $(window).on("scroll",function(){a&&window.clearTimeout(a),a=window.setTimeout(r,500)}),o}),define("text!lib/helpers/overlay/template.html",[],function(){return'<div class="x-overlay">\n\t<div class="x-body">\n\t\t<div class="x-content"></div>\n\t\t<div class="x-close{{^closable}} hidden{{/closable}}" title="{{{ close_title }}}">{{{ icon }}}</div>\n\t</div>\n</div>'}),define("lib/helpers/overlay/overlay_state",[],function(){return{layers:0}}),define("lib/helpers/overlay",["mustache","text!./overlay/template.html","lib/i18n!front","./overlay/overlay_state"],function(e,t,i,n){var s=function(n,s,o){this.open=!1,this.closable=!!s,this.esc_close=!1,this.esc_close_handler=null,this.click_close_handler=null,this.bPreventScrollToTop=!0,this.setCloseAction(o);var a="&times;";xv&&xv.conf&&xv.conf.sitename&&("default"===xv.conf.sitename||"xnxx"===xv.conf.sitename)&&(a='<span class="icon-f icf-close-thin"></span>'),this.parent=$(n),"static"!==this.parent.css("position")&&this.parent.css("position","relative"),this.node=$(e.render(t,{closable:s,close_title:i.__("misc.close"),icon:a})),this.body=this.node.children(".x-body");var r=this;this.close_node=this.body.children(".x-close").on("click",function(){"close"===r.close_action?r.close():r.hide()}),this.container=this.body.children(".x-content")};return s.get=function(e,t,i){return new s(e,t,i)},s.prototype={onShow:null,onHide:null,onClose:null,getNode:function(){return this.node},getContainer:function(){return this.container},addClass:function(e){return this.node.addClass(e),this},setClosable:function(e,t,i){if(this.closable=!!e,this.esc_close=e&&t,this.popbody_click_dontclose=e&&!!i,this.closable?this.close_node.removeClass("hidden"):this.close_node.addClass("hidden"),this.esc_close){if(!this.esc_close_handler){var n=this;this.esc_close_handler=$("body").on("keyup",function(e){n.open&&27===e.which&&("close"===n.close_action?n.close():n.hide())}),this.click_close_handler=$("body").on("click",function(e){n.open&&0===$(e.target).closest(n.popbody_click_dontclose?n.body:n.container).length&&("close"===n.close_action?n.close():n.hide())})}}else this.esc_close_handler&&($("body").off("keyup",this.esc_close_handler),this.esc_close_handler=null,$("body").off("click",this.click_close_handler),this.click_close_handler=null);return this},setCloseAction:function(e){this.close_action="hide"===e?"hide":"close"},setText:function(e){return this.container.text(e),this},setContent:function(e){return this.container.html(e),this},empty:function(){return this.container.empty(),this},append:function(e){return this.container.append(e),this},prepend:function(e){return this.container.prepend(e),this},addOverlayLayer:function(){if(this.bPreventScrollToTop)return $("body").addClass("x-overlay-floating-opened"),n.layers++,this},removeOverlayLayer:function(){if(this.bPreventScrollToTop)return n.layers--,n.layers<=0&&(n.layers=0,$("body").removeClass("x-overlay-floating-opened")),this},show:function(){if(!this.open)return this.node.appendTo(this.parent),this.addOverlayLayer(),this.open=!0,this.onShow&&this.onShow(),this},hide:function(){if(this.open)return this.node.detach(),this.removeOverlayLayer(),this.open=!1,this.onHide&&this.onHide(),this},close:function(){this.open&&(this.node.remove(),this.removeOverlayLayer(),this.open=!1,this.onClose&&this.onClose())},autoclose:function(e){if(this.open){var t=this;window.setTimeout(function(){t.close()},e)}},isOpen:function(){return!!this.open},setEscapeClosable:function(e){if(!1===e)this.esc_close_handler&&($("body").off("keyup",this.esc_close_handler),this.esc_close_handler=null);else if(!this.esc_close_handler){var t=this;this.esc_close_handler=$("body").on("keyup",function(e){t.open&&27===e.which&&("close"===t.close_action?t.close():t.hide())})}}},s}),define("lib/helpers/overlay/box",["lib/tools","static/dom","../overlay"],function(e,t,i){var n=function(e,t,n,s){i.apply(this,arguments),this.ori_padding=!1,this.node.addClass("x-overlay-box"),this.verticallyCentered=!!s,this.bCanReposition=!0};return n.prototype=new i,n.get=function(e,t,i,s){return new n(e,t,i,s)},n.prototype.show=function(e){if(!this.open)return this.node.appendTo(this.parent),this.addOverlayLayer(),this.open=!0,this.onShow&&this.onShow(),this.position(e)},n.prototype.position=function(i){if(!this.bCanReposition)return this;var n=this.node.height(),s=this.body.outerHeight(),o=this.verticallyCentered?Math.max(Math.min((n-s)/2,($(window).height()-s)/2),5):10;if(!1===i)return this.body.css("margin-top",o+"px"),this;if(n<s+o&&(this.ori_padding=this.parent.css("padding-bottom"),this.parent.css("padding-bottom",s+o-n+"px")),"auto"===i){var a=0;return!this.bPreventScrollToTop&&n>=s+o&&(a=$(window).scrollTop()),this.body.css("margin-top",a+o+"px"),this}if((i=void 0!==i&&$(i))&&i.length>0){var r=i.position().top,l=Math.max(o,Math.min(r,n-s-o));this.body.css("margin-top",l+"px")}else if(this.body.css("margin-top",Math.max(o,Math.round(Math.min(Math.min(.01*$(window).height(),150),(n-s)/2)))+"px"),this.closable&&!t.isElementInView(this.body,!0)){(function(e){var t=e.add(e.parents()),i=!1;return t.each(function(){if("fixed"===$(this).css("position"))return i=!0,!1}),i})(this.body)||e.scrollTo(this.body,10)}return this},n.prototype.setCanReposition=function(e){this.bCanReposition=!!e},n.prototype.setOverlayClosable=function(e){if(!1===e)this.overlay_close_handler&&(this.node.off("click",this.overlay_close_handler),this.node.off("mousedown",this.overlay_mdown_handler),this.node.off("mousemove",this.overlay_mmove_handler),this.overlay_close_handler=null,this.overlay_mdown_handler=null,this.overlay_mmove_handler=null);else if(!this.overlay_close_handler){var t=this;this.bMouseMoved=!1,this.overlay_close_handler=function(e){$(e.target).hasClass("x-overlay-box")&&!t.bMouseMoved&&("close"===t.close_action?t.close():t.hide())},this.overlay_mdown_handler=function(){t.bMouseMoved=!1},this.overlay_mmove_handler=function(){t.bMouseMoved=!0},this.node.on("click",this.overlay_close_handler),this.node.on("mousedown",this.overlay_mdown_handler),this.node.on("mousemove",this.overlay_mmove_handler)}},n.prototype.setOverlayReposition=function(e){var t=this;this.overlay_reposition_handler=function(i){$(i.target).hasClass("x-overlay-box")&&(t.open=!1,t.show(e))},this.node.on("click",this.overlay_reposition_handler)},n.prototype.setScrollAndResizeReposition=function(e,t,i){t="boolean"!=typeof t||t,i="boolean"!=typeof i||i,"undefined"!=typeof this.eScrollAndResizeReposition&&(t&&$(window).off("scroll",this.eScrollAndResizeReposition),i&&$(window).off("resize",this.eScrollAndResizeReposition));var n=this;this.eScrollAndResizeReposition=function(){"undefined"!=typeof n.tScrollAndResizeReposition&&clearTimeout(n.tScrollAndResizeReposition),n.tScrollAndResizeReposition=setTimeout(function(){n.position(e),n.setScrollAndResizeReposition(e)},250)},t&&$(window).on("scroll",this.eScrollAndResizeReposition),i&&$(window).on("resize",this.eScrollAndResizeReposition)},n.prototype.hide=function(){return!1!==this.ori_padding&&this.parent.css("padding-bottom",this.ori_padding),i.prototype.hide.apply(this)},n.prototype.close=function(){return!1!==this.ori_padding&&this.parent.css("padding-bottom",this.ori_padding),i.prototype.close.apply(this)},n}),define("text!lib/helpers/overlay/contextual_popup/alert.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ sMessage }}}\n\t</div>\n\t{{^bNoBtn}}\n\t\t<div class="contextual-popup-actions">\n\t\t\t<button class="contextual-popup-content-close btn btn-danger" data-send-form="1">{{{ ok }}}</button>\n\t\t</div>\n\t{{/bNoBtn}}\n\t{{#sBottomMessage}}\n\t\t<div class="contextual-popup-bottom-message">\n\t\t\t{{{ sBottomMessage }}}\n\t\t</div>\n\t{{/sBottomMessage}}\n</div>'}),define("text!lib/helpers/overlay/contextual_popup/confirm.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ sMessage }}}\n\t</div>\n\t<div class="contextual-popup-actions">\n\t\t<button class="contextual-popup-content-close btn btn-default">{{{ cancel }}}</button>\n\t\t<button class="ok-close btn btn-danger" data-send-form="1">{{{ ok }}}</button>\n\t</div>\n\t{{#sBottomMessage}}\n\t\t<div class="contextual-popup-bottom-message">\n\t\t\t{{{ sBottomMessage }}}\n\t\t</div>\n\t{{/sBottomMessage}}\n</div>'}),define("text!lib/helpers/overlay/contextual_popup/loading.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ sMessage }}}\n\t</div>\n</div>'}),define("lib/helpers/overlay/contextual_popup",["mustache","./box","../inline_loader","lib/i18n!front","text!./contextual_popup/alert.mustache","text!./contextual_popup/confirm.mustache","text!./contextual_popup/loading.mustache"],function(e,t,i,n,s,o,a){var r=function(){};return r.prototype={get_popup:function(i,n,s,o,a,r){r&&"object"==typeof r||(r={}),i="boolean"!=typeof i||i;var l=t.get($("body"),i,"close",!0).setContent($(e.render(s,o)));return r.iAutoCloseDelay&&(l.onShow=function(){setTimeout(function(){r.bAutoCloseFade?l.getContainer().parents(".x-overlay").fadeOut("slow",function(){l.close()}):l.close()},r.iAutoCloseDelay)}),n="contextual-popup"+("string"==typeof n?" "+n:"")+("string"==typeof r.sPopClass?" "+r.sPopClass:""),n.length&&l.addClass(n),r.iAutoOpenDelay?l.cp_open_timer=setTimeout(function(){l.show("auto")},r.iAutoOpenDelay):l.show("auto"),i?(l.setOverlayClosable(i),l.setEscapeClosable(i)):l.setOverlayReposition("auto"),r.iAutoOpenDelay&&(l.normal_close=l.close,l.close=function(){l.cp_open_timer&&clearTimeout(l.cp_open_timer),l.normal_close()}),"function"==typeof a&&(l.onClose=a),l.getNode().find(".contextual-popup-content-close").on("click",function(){if($(this).data("send-form")){var e=l.getNode().find("form");e.length>0&&"function"==typeof l.onClose&&(l.onClose(e.serializeArray()),l.onClose=!1)}l.close()}),l},alert:function(e,t,i,o){o&&"object"==typeof o||(o={});var a={sMessage:e,ok:n.__("misc.OK")};return o.sBottomMessage&&(a.sBottomMessage=o.sBottomMessage),o.text_ok&&(a.ok=o.text_ok),o.no_ok_btn&&(a.bNoBtn=!0),this.get_popup(i,"contextual-popup-alert",s,a,t,{sPopClass:"string"==typeof o.sPopClass&&o.sPopClass,iAutoOpenDelay:"number"==typeof o.delay&&o.delay,iAutoCloseDelay:"number"==typeof o.autoclose_delay&&o.autoclose_delay,bAutoCloseFade:"boolean"==typeof o.autoclose_fade&&o.autoclose_fade})},confirm:function(e,t,i,s,a){a&&"object"==typeof a||(a={});var r={sMessage:e,ok:n.__("misc.OK"),cancel:n.__("misc.cancel")};a.sBottomMessage&&(r.sBottomMessage=a.sBottomMessage),a.text_ok&&(r.ok=a.text_ok),a.text_cancel&&(r.cancel=a.text_cancel);var l=this.get_popup(s,"contextual-popup-confirm",o,r,i,{sPopClass:"string"==typeof a.sPopClass&&a.sPopClass,iAutoOpenDelay:"number"==typeof a.delay&&a.delay,iAutoCloseDelay:"number"==typeof a.autoclose_delay&&a.autoclose_delay,bAutoCloseFade:"boolean"==typeof a.autoclose_fade&&a.autoclose_fade});return l.getNode().find(".ok-close").on("click",function(){if("function"==typeof t){if($(this).data("send-form")){var e=l.getNode().find("form");if(e.length>0)return t(e.serializeArray()),l.onClose=null,void l.close()}t()}l.onClose=null,l.close()}),l},loading:function(e,t,s){t&&"object"==typeof t||(t={});var o={sMessage:i.getSafe("after",e||n.__("loading.loading")).getHtml()};return this.get_popup(!1,"contextual-popup-loading",a,o,s,{sPopClass:"string"==typeof t.sPopClass&&t.sPopClass,iAutoOpenDelay:"number"==typeof t.delay&&t.delay,iAutoCloseDelay:"number"==typeof t.autoclose_delay&&t.autoclose_delay,bAutoCloseFade:"boolean"==typeof t.autoclose_fade&&t.autoclose_fade})}},new r}),define("skins/common/basic_feature",["config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t,i){var n=function(e){this.sKey=e,this.bLoadingPopupNotif=!0,this.bErrorPopupNotif=!0};return n.S_F_VIDEO_VIEWS="vv",n.S_F_VIDEO_VIEWS_ICON="vvi",n.S_F_COOKIES_FUNCTIONALITY="cf",n.S_F_COOKIES_PLAYER_PREFERENCES="pp",n.S_F_SUGGESTS="s",n.S_F_WATCH_LATER="w",n.S_F_CHANGE_CAT_ALERT="cca",n.S_F_CHAT_NOTIF="cn",n.S_F_PREMIUM_FEED_CHANNELS="fc",n.S_F_REGULAR_UI="ui",n.S_F_AUTO_TITLE_TRANSLATE="at",n.S_F_VIDEO_PREVIEW="pv",n.IS_ENABLED=function(t){return"object"!=typeof e.dyn.disfeats||-1===e.dyn.disfeats.indexOf(t)},n.prototype={isEnabled:function(){return n.IS_ENABLED(this.sKey)},enable:function(e,t){this.toggle(e,!0,t)},disable:function(e,t){this.toggle(e,!1,t)},toggle:function(n,s,o){this.bLoadingPopupNotif&&(this.oLoadingPopup=i.loading(t.__("form.saving_settings"),{delay:500}));var a=this.isEnabled(),r=this;if("boolean"==typeof s&&s===a)return"function"==typeof n&&n(s),void(this.bLoadingPopupNotif&&this.oLoadingPopup&&this.oLoadingPopup.close());var l={featureid:this.sKey};if(o&&"object"==typeof o||(o={}),o.oPostData&&"object"==typeof o.oPostData)for(var d in o.oPostData)l[d]=o.oPostData[d];s=!a,$.post({url:"/account/feature-"+(s?"enabled":"disabled"),data:l,complete:function(){r.bLoadingPopupNotif&&r.oLoadingPopup&&r.oLoadingPopup.close()},success:function(o){if(!o.result)return void(r.bErrorPopupNotif&&i.alert(t.__("form.error_modification_not_saved")));e.dyn.disfeats||(e.dyn.disfeats=[]),r.isEnabled()?e.dyn.disfeats.push(r.sKey):e.dyn.disfeats.splice(e.dyn.disfeats.indexOf(r.sKey),1),"function"==typeof n&&n(s)},error:function(){r.bErrorPopupNotif&&i.alert(t.__("form.error_modification_not_saved"))},dataType:"json"})},activateLoadingPopup:function(e){"boolean"!=typeof e&&(e=!0),this.bLoadingPopupNotif=e},activateErrorPopup:function(e){"boolean"!=typeof e&&(e=!0),this.bErrorPopupNotif=e}},n}),define("skins/common/main_cats/builder",["config/main","skins/common/basic_feature"],function(e,t){var i=function(){this.oFeature=new t(t.S_F_CHANGE_CAT_ALERT),this.oFeature.activateLoadingPopup(),this.oFeature.activateErrorPopup()};return i.prototype={getMainCats:function(){return e.dyn.main_cats},getUserMainCatId:function(){return e.dyn.user_main_cat},getUserMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_user_cat)return e[t];return!1},getUserOldMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_old_user_cat)return e[t];return!1},getPageMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_page_cat)return e[t];return!1},getSwitchMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_switch_cat)return e[t];return!1},main_cat_change_alert_enabled:function(){return this.oFeature.isEnabled()},main_cat_change_alert_toggle_feature:function(e,t){t="boolean"==typeof t?t:!this.main_cat_change_alert_enabled(),this.oFeature.toggle(function(t){!1===t&&(xv.messages.xmmDelById("x-message-main-cat-alert-back"),xv.messages.xmmDelById("x-message-main-cat-alert-stop")),"undefined"!=typeof xv.main_cats&&"undefined"!=typeof xv.main_cats.switcher&&"function"==typeof xv.main_cats.switcher.updateOverlayAlert&&xv.main_cats.switcher.updateOverlayAlert(),"function"==typeof e&&e()},t)},goBackToUserMainCat:function(){var e=this.getUserOldMainCat();if(!e)return!1;window.location.href=e.url},stopAlertsFromXMessages:function(){this.main_cat_change_alert_toggle_feature(null,!1)}},new i}),define("text!skins/common/main_cats/switcher.mustache",[],function(){return'<ul>\n\t{{#main_cats}}\n\t\t<li{{#is_user_cat}} class="current"{{/is_user_cat}}>\n\t\t\t<a href="{{ url }}" class="btn cat">\n\t\t\t\t<span>{{{ picto }}}</span> {{{ name }}}\n\t\t\t</a>\n\t\t</li>\n\t{{/main_cats}}\n\t{{^no_disabled_alert}}\n\t<li class="alert-toggle {{{ disabled_alert_class }}}">\n\t\t<button class="btn" type="button"><span class="icon-f icf-square unchecked"></span><span class="icon-f icf-check-square checked"></span> <span class="text">{{{ disabled_alert_text }}}</span></button>\n\t</li>\n\t{{/no_disabled_alert}}\n</ul>'}),define("text!skins/common/main_cats/switcher_feature_toggle.mustache",[],function(){return'<span class="alert-toggle {{{ disabled_alert_class }}}">\n\t<span class="icon-f icf-square unchecked"></span><span class="icon-f icf-check-square checked"></span> <span class="text">{{{ disabled_alert_text }}}</span>\n</span>'}),define("skins/common/main_cats/switcher",["mustache","config/main","lib/helpers/popup","lib/i18n!front","static/cookies","./builder","text!skins/common/main_cats/switcher.mustache","text!skins/common/main_cats/switcher_feature_toggle.mustache"],function(e,t,i,n,s,o,a,r){var l=function(){this.aMainCats=[];var t=o.getMainCats();for(var i in t)t.hasOwnProperty(i)&&this.aMainCats.push(t[i]);this.sCurrentUserCat=o.getUserMainCatId(),this.contents=[],this.bJustSwitched=!!s.get("main_cat_tmp_switch"),this.bJustSwitched&&s.setLocal("main_cat_tmp_switch",!1,100,"/");var a=this;xv.messages&&"function"==typeof xv.messages.addMessageFromChat&&xv.messages.addXMessageSetting(e.render(r,{disabled_alert_class:this.isFeatureEnabled()?"":"disabled-feat",disabled_alert_text:n.__("main_cats."+(this.isFeatureEnabled()?"disable_cat_chang_alert":"cat_chang_alert_disabled"))}),function(e){!0!==a.bXMessageAdded&&(a.bXMessageAdded=!0,a.addContentToUpdate($(e.currentTarget))),a.toggleFeature()})};return l.prototype={getSettingsCat:function(){return o.getSwitchMainCat(!0)},initBtnSwitchers:function(e,n){n=n||{};var s=this;$(e).each(function(){"undefined"==typeof n.popup_class&&(n.popup_class="main-cat-switcher-popup"),"undefined"==typeof n.mouseout_autoclose&&(n.mouseout_autoclose=3e3),"undefined"==typeof n.mouseout_autoclose_openevents&&(n.mouseout_autoclose_openevents=["click","mouseover_btn_timer"]);var e=new i($(this),s.getPopupContent(),n);e.iAllMenuId=xv.menus.addClose(function(){e.close()}),e.onOpen=function(){xv.menus.closeAll(e.iAllMenuId),s.sCurrentUserCat!==t.dyn.user_main_cat&&e.setContent(s.getPopupContent())},$(this).addClass("init-ok")})},goBackToUserMainCat:function(){o.goBackToUserMainCat()},stopAlertsFromXMessages:function(){o.stopAlertsFromXMessages()},addContentToUpdate:function(e){this.contents.push(e)},updateOverlayAlert:function(){for(var e in this.contents){var t=this.contents[e];if(!(!t.length>0)){var i=t.find(".alert-toggle"),s=i.find(".text");this.isFeatureEnabled()?(i.removeClass("disabled-feat"),s.html(n.__("main_cats.disable_cat_chang_alert"))):(i.addClass("disabled-feat"),s.html(n.__("main_cats.cat_chang_alert_disabled")))}}},getPopupContent:function(){var i={main_cats:this.aMainCats};!t.dyn.premium||t.dyn.login_info&&t.dyn.login_info.has_member_area?(i.disabled_alert_class=this.isFeatureEnabled()?"":"disabled-feat",i.disabled_alert_text=n.__("main_cats."+(this.isFeatureEnabled()?"disable_cat_chang_alert":"cat_chang_alert_disabled"))):i.no_disabled_alert=!0,$content=$(e.render(a,i));var o=this;return this.addContentToUpdate($content),$content.find(".cat.btn").on("click",function(e){e.preventDefault(),s.setLocal("main_cat_tmp_switch",$.now(),3e5,"/"),window.location.href=$(this).prop("href")}),$content.find(".alert-toggle .btn").on("click",function(e){e.preventDefault(),o.toggleFeature()}),$content},hasJustSwitched:function(){return this.bJustSwitched},isFeatureEnabled:function(){return o.main_cat_change_alert_enabled()},toggleFeature:function(e,t){if(!0!==this.bToggling){var i=this;this.bToggling=!0,"boolean"!=typeof t&&(t=null),o.main_cat_change_alert_toggle_feature(function(){i.updateOverlayAlert(),i.bToggling=!1,"function"==typeof e&&e()},t)}}},xv.main_cats={switcher:new l},xv.main_cats.switcher}),define("skins/common/player/quickies/sendLostViewDurations",["static/log"],function(e){var t={bSaveViewDurationInLocalStorage:!0,sViewDurationStorageKey:"view_duration",iExpirationTime:6048e5},i=function(){if(this.oOptions=t,this.updateCache(),this.oOptions.bSaveViewDurationInLocalStorage)try{if("object"==typeof window.localStorage){var e=window.localStorage,i="__storage_test__";e.setItem(i,i),e.removeItem(i)}else this.oOptions.bSaveViewDurationInLocalStorage=!1}catch(n){this.oOptions.bSaveViewDurationInLocalStorage=!1}};return i.prototype={updateCache:function(){try{this.oCache=JSON.parse(localStorage.getItem(this.oOptions.sViewDurationStorageKey))||{}}catch(t){e.error("An error occurred while updating view duration in local storage:",t)}},saveCache:function(){try{localStorage.setItem(this.oOptions.sViewDurationStorageKey,JSON.stringify(this.oCache))}catch(t){e.error("An error occurred while saving view duration from local storage:",t)}},save:function(e,t,i,n){if(this.oOptions.bSaveViewDurationInLocalStorage){this.updateCache();var s=Date.now(),o={s:s.toString(),d:t,x:i,c:n};this.oCache[e]=o,this.saveCache()}},"delete":function(e,t){if(this.oOptions.bSaveViewDurationInLocalStorage)return t||this.updateCache(),!("object"!=typeof this.oCache||null===this.oCache||!this.oCache.hasOwnProperty(e))&&(delete this.oCache[e],t||this.saveCache(),!0)},verif:function(){if(this.oOptions.bSaveViewDurationInLocalStorage&&(this.deleteOld(),this.updateCache(),"object"==typeof this.oCache&&null!==this.oCache)){var e=Date.now(),t=!1;for(var i in this.oCache)if(this.oCache.hasOwnProperty(i)){var n=parseInt(this.oCache[i].s,10),s=this.oCache[i].x;(s||e-n>36e5)&&(this.send(i,this.oCache[i]),this["delete"](i,!0)&&(t=!0))}t&&this.saveCache()}},deleteOld:function(){if(this.updateCache(),"object"==typeof this.oCache&&null!==this.oCache){var e=this.oOptions.iExpirationTime,t=Date.now(),i=!1;for(var n in this.oCache)if(this.oCache.hasOwnProperty(n)){var s=this.oCache[n].s;t-s>e&&this["delete"](n,!0)&&(i=!0)}i&&this.saveCache()}},send:function(t,i){$.get("/quickies-api/view/"+t+"/"+i.c+"/"+i.d),e.info("Send quickies view duration done")}},new i}),define("skins/common/design/stop_anim_on_resize",[],function(){var e=function(){this.stop_anim_timeout=null;var e=this;$(window).on("resize",function(){e.launch()})};return e.prototype={launch:function(){var e=this;this.stop_anim_timeout?(clearTimeout(this.stop_anim_timeout),this.stop_anim_timeout=null):$("body").addClass("resize-stop-anim"),this.stop_anim_timeout=setTimeout(function(){e.stop_anim_timeout=null,$("body").removeClass("resize-stop-anim")},500)}},new e}),define("skins/common/design/vh_tweak",[],function(){try{var e="object"==typeof window.visualViewport&&"number"==typeof window.visualViewport.height,t=function(){var t=.01*(e?window.visualViewport.height:window.innerHeight);document.documentElement.style.setProperty("--vh",t.toString(10)+"px")};t(),$(window).on("resize",t)}catch(i){}}),function(e){"function"==typeof define&&define.amd?define("lib/pathchange",["jquery"],e):e(jQuery)}(function(e){e.fn.pathchange=function(e){return e?this.bind("pathchange",e):this.trigger("pathchange")};var t=e.pathchange={options:{useHistory:!0,useHashchange:!0,pollingInterval:250,interceptLinks:!0,disableHashLinks:!0},init:function(i){var n;e.extend(t.options,i),t.options.useHistory&&t.detectHistorySupport()&&e(window).bind("popstate",function(t){e(window).trigger("pathchange")}),t.options.useHashchange&&(e(window).bind("hashchange",function(t){e(window).trigger("pathchange")}),t.detectHashchangeSupport()||(n=window.location.hash,setInterval(function(){n!==window.location.hash&&(e(window).trigger("hashchange"),n=window.location.hash)},t.options.pollingInterval))),t.options.interceptLinks&&e("body").delegate('a[href^="/"]',"click",function(i){t.changeTo(e(this).attr("href")),i.preventDefault()}),t.options.disableHashLinks&&e("body").delegate('a[href="#"]',"click",function(e){e.preventDefault()})},changeTo:function(i){t.options.useHistory&&t.detectHistorySupport()?(window.history.pushState(null,null,i),e(window).trigger("pathchange")):(i.indexOf("#")<0&&(i+="#"),window.location.href=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+i)},detectHistorySupport:function(){return!(!window.history||!history.pushState)},detectHashchangeSupport:function(){var e="onhashchange"in window;return!e&&window.setAttribute&&(window.setAttribute("onhashchange","return;"),e="function"==typeof window.onhashchange),e}};return t}),define("lib/history",["./tools","./pathchange"],function(e){var t=function(){this.sNoHashValue="##NOHASH##",this.sPagePrefix="page-",this.oHashCallbacks={},this.oNotHashCallbacks={},this.sSavedHash=!1,this.iSavedPage=null,this.aPageInternalNav=[],$.pathchange&&($.pathchange.init({interceptLinks:!1}),$(window).on("pathchange",this,this.onPathChange))};return t.prototype={getNoHashValue:function(){return this.sNoHashValue},registerHash:function(e,t){return"function"==typeof t&&(e||(e=this.getNoHashValue()),"undefined"==typeof this.oHashCallbacks[e]&&(this.oHashCallbacks[e]=[]),this.oHashCallbacks[e].push(t),!0)},registerAllHashesExcept:function(e,t){return"function"==typeof t&&(e||(e=this.getNoHashValue()),"undefined"==typeof this.oNotHashCallbacks[e]&&(this.oNotHashCallbacks[e]=[]),this.oNotHashCallbacks[e].push(t),!0)},unregisterHash:function(e){return"string"==typeof e&&"undefined"!=typeof this.oHashCallbacks[e]&&(this.oHashCallbacks[e]=undefined,!0)},unregisterAllHashesExcept:function(e){return"string"==typeof e&&"undefined"!=typeof this.oNotHashCallbacks[e]&&(this.oNotHashCallbacks[e]=undefined,!0)},setUrlHash:function(t,i,n,s){if(this.sSavedHash!==t||this.iSavedPage!==i){this.sSavedHash="string"!=typeof t?null:t,this.iSavedPage="number"!=typeof i?null:i;var o=null!==this.sSavedHash?this.sSavedHash:"";null!==this.iSavedPage&&(o+=(o.length>0?",":"")+(this.sPagePrefix+this.iSavedPage)),n&&this.aPageInternalNav.pop(),this.aPageInternalNav.push(o),e.setUrlHash(o,n),s&&this.onPathChange({data:this},!0)}},backHash:function(){this.aPageInternalNav.length&&(this.aPageInternalNav.pop(),window.history.back())},getHash:function(t){"string"==typeof t&&t.length||(t=e.getUrlHash());var i=t.indexOf(","+this.sPagePrefix);if(-1===i){if(-1===t.indexOf(this.sPagePrefix,0))return t;i=0}return t.substring(0,i)},getPaginHash:function(t){"string"==typeof t&&t.length||(t=e.getUrlHash());var i=t.indexOf(this.sPagePrefix);if(-1===i)return null;var n=parseInt(t.substring(i+this.sPagePrefix.length));return"number"==typeof n?n:null},onPathChange:function(e,t){var i,n,s=e.data,o=s.getHash(),a=s.getPaginHash();if(o||(o=s.getNoHashValue()),o!==s.sSavedHash||a!==s.iSavedPage||t){if(s.aPageInternalNav.push(o),"undefined"!=typeof s.oHashCallbacks[o]&&s.oHashCallbacks[o].length)for(n in s.oHashCallbacks[o])"function"==typeof(i=s.oHashCallbacks[o][n])&&i(o,a);for(var r in s.oNotHashCallbacks)if(r!==o)for(n in s.oNotHashCallbacks[r])"function"==typeof(i=s.oNotHashCallbacks[r][n])&&i(o,a);s.sSavedHash=o,s.iSavedPage=a}},getHashListener:function(){if(window.xv_listen_hash)return window.xv_listen_hash;var t=function(){};t.prototype={onArriveHash:function(e,t){this.oOnArrive[e]=t},onLeaveHash:function(e,t){this.oOnLeave[e]=t}},window.xv_listen_hash=new t,window.xv_listen_hash.oOnArrive={},window.xv_listen_hash.oOnLeave={};var i=window.xv_listen_hash;return window.addEventListener("hashchange",function(t){var n=i.oOnLeave[e.getUrlHash(t.oldURL)],s=i.oOnArrive[e.getUrlHash(t.newURL)];"function"==typeof n&&n(t),"function"==typeof s&&s(t)}),window.xv_listen_hash}},new t}),define("skins/common/form/cookie_preferences",["static/log","config/main","lib/history"],function(e,t,i){var n=function(){this.init()};return n.HASH={sOPEN:"cookie-preferences"},n.prototype={init:function(){if(this.bIsInit)return void e.info("CookiePreferences --- init --- RETURN (already initiated)");e.info("CookiePreferences --- init"),this.bIsInit=!0;var t=this;i.registerHash(n.HASH.sOPEN,function(){t.openManagementPopup()}),i.registerAllHashesExcept(n.HASH.sOPEN,function(){t.closeManagementPopup()}),$('a[href="#cookie-preferences"]').on("click",function(s){e.debug("CookiePreferences --- link click => openManagementPopup"),s.preventDefault(),t.openManagementPopup(),i.setUrlHash(n.HASH.sOPEN)}),i.getHash()===n.HASH.sOPEN&&t.openManagementPopup()},openManagementPopup:function(){if(!xv.disclaimer)return void e.error("no disclaimer to open cookie management popup");e.debug("CookiePreferences --- openManagementPopup"),this.setHashBackOnCloseCallback(),this.updateSavedHashOnClose();var i=$("<div></div>");$("body").append(i),e.debug("CookiePreferences --- openManagementPopup => updateOnly"),
xv.disclaimer.display(t.dyn.is_premium?t.domains.premium:t.domains.slave,xv.disclaimer.COOKIE_MANAGE_TYPE.UPDATE_ONLY,!1,!0,i[0])},closeManagementPopup:function(){e.info("CookiePreferences --- closeManagementPopup"),xv.disclaimer&&xv.disclaimer.close_pop()},updateSavedHashOnClose:function(){var t=i.getHash();this.sSavedHash=t===n.HASH.sOPEN?"":t,e.info("CookiePreferences --- updateSavedHashOnClose",{sSavedHash:this.sSavedHash})},setHashBackOnCloseCallback:function(){if("undefined"==typeof this.onClose){var e=this;this.onClose=function(){e.setSavedHash()},document.addEventListener(xv.disclaimer.EVENT.CLOSE_POP,this.onClose)}},setSavedHash:function(){e.info("CookiePreferences --- setSavedHash",{sSavedHash:this.sSavedHash}),"undefined"!=typeof this.sSavedHash&&i.getHash()===n.HASH.sOPEN&&i.setUrlHash(this.sSavedHash)}},new n}),define("skins/common/design/old_ie",["lib/i18n!front","static/cookies"],function(e,t){var i=function(){!1!==this.shouldShowAlert()&&(this.alertResizeTimer=!1,this.showAlert())};return i.prototype={shouldShowAlert:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent,t=e.indexOf("MSIE ");if(t<0)return!1;var i=parseInt(e.substring(t+5,e.indexOf(".",t)));return!(i>9)&&(!this.isAlertIgnored()&&(this.sBrowser="Internet Explorer "+i,!0))},showAlert:function(){if("string"==typeof this.sBrowser){this.$alert=$('<div id="browser-too-old"><p>'+e.__("browser.out_of_date_alert",{"%strong%":"<strong>","%strong_end%":"</strong>","%browser%":this.sBrowser})+'</p><p><a href="//browser-update.org/'+xv.conf.dyn.locale+'/update-browser.html" class="btn btn-primary" target="_blank">'+e.__("browser.update")+'</a> <button type="button" class="btn btn-default ignore">'+e.__("misc.ignore")+"</button></p></div>");var t=this;this.$alert.find(".ignore").on("click",function(){t.ignoreAlert()}),$("body").prepend(this.$alert),setTimeout(function(){t.alertResize(),$(window).on("resize",function(){t.alertResize()})},50),setTimeout(function(){t.alertResize()},1e4)}},alertResize:function(){!1!==this.alertResizeTimer&&clearTimeout(this.alertResizeTimer),this.$alert.css({width:"auto","margin-left":0,"margin-right":0});var e=this;this.alertResizeTimer=setTimeout(function(){e.alertResizeTimer=!1;var t=e.$alert.outerWidth(),i=$("html").outerWidth();e.$alert.css({width:i-20,"margin-left":-(i-t)/2+10,"margin-right":-(i-t)/2+10})},200)},isAlertIgnored:function(){return!!t.get("hexavid_ignore_browser_update")},ignoreAlert:function(){this.$alert.remove(),t.setLocal("hexavid_ignore_browser_update","1",864e5,"/")}},new i}),define("skins/common/tracker/user_videos_list_tracker",["static/log","config/main","static/tracker"],function(e,t,i){var n=function(e){this.sTrackerName=e,this.bIDB=xv.indexedDb&&xv.indexedDb.getDbIsSupported(),this.bIDB&&this.init_indexedDb()};return n.prototype={sTrackerName:null,bIDB:null,sDbStoreName:null,init_indexedDb:function(){this.sDbStoreName=this.get_tracker_name()+".ids";var t=this,i=function(){e.debug('user_videos_list_tracker.js - fnStackInitStoreVideosList "'+t.sDbStoreName+'"');var i=[{index:"i",unique:!0},{index:"t",unique:!1}];xv.indexedDb.getStoreExist({store_name:t.sDbStoreName,store_index:i,callback_store_no_exist:function(){e.debug('user_videos_list_tracker.js - fnStackInitStoreVideosList "'+t.sDbStoreName+'"',"callback_store_no_exist");var n=function(){xv.indexedDb.storeCreate({store_name:t.sDbStoreName,store_index:i,callback_store_created:function(){var e=xv.storage.get(t.sDbStoreName);null!==e&&e.length>0&&xv.indexedDb.storeCreateFromLocalStorage(t.sDbStoreName,e)}})};xv.indexedDb.manageTempStackAdd(n)},callback_store_exist:function(){if(e.debug('user_videos_list_tracker.js - fnStackInitStoreVideosList "'+t.sDbStoreName+'"',"callback_store_exist"),xv.indexedDb.getRemoveLocalStorage()){var i=xv.storage.get(t.sDbStoreName);if(null!==i){var n=0;for(var s in i)n=i[s].t>n?i[s].t:n;1970===new Date(n).getFullYear()&&new Date(1e3*n).getFullYear()===(new Date).getFullYear()&&(n*=1e3),(new Date).getTime()-6048e5>n&&xv.storage.remove(t.sDbStoreName)}}}})};xv.indexedDb.manageTempStackAdd(i)},get_tracker_name:function(){return this.sTrackerName},get_tracker:function(){return this.tracker||(this.tracker=new i(this.get_tracker_name(),this.bIDB?null:5e3,this.bIDB)),this.tracker},canTrack:function(){return this.get_tracker().canTrack()},isTracking:function(){return this.get_tracker().isTracking()},stopTracking:function(){this.get_tracker().stopTracking()},startTracking:function(){this.get_tracker().startTracking()},addVideo:function(t){if(this.bIDB){var i=this;xv.indexedDb.manageTempStackAdd(function(){e.debug('user_videos_list_tracker.js - addVideo "'+t+'" / stack call'),i.get_tracker().addId(parseInt(t))})}else this.get_tracker().addId(parseInt(t))},removeVideo:function(t,i,n){"string"==typeof i&&i.length||(i=this.get_tracker().getStoreName()),e.debug('user_videos_list_tracker.js - removeVideo "'+t+'" from "'+i+'"'),this.get_tracker().removeId(parseInt(t),i,n)},hasVideo:function(e){return this.get_tracker().hasId(parseInt(e))},clear:function(){return this.get_tracker().clear()},getIds:function(e){var i=[],n=this,s=function(e){for(var t=0;t<e.length;t++){var n=parseInt(e[t]);-1===i.indexOf(n)&&(i[t]=n)}return i};return this.bIDB?e?s(this.get_tracker().getIdsList(e)):new Promise(function(e,o){xv.indexedDb.manageTempStackAdd(function(){!t.dyn.login_info.is_logged&&xv.indexedDb.getStoreExist({store_name:n.get_tracker().getNamespace()+".ids"})?n.get_tracker().getIdsList().then(function(t){e(s(t))}):e(i)})}):s(this.get_tracker().getIdsList())}},n}),define("skins/common/tracker/videos_i_like",["./user_videos_list_tracker"],function(e){return new e("aVideosILike")}),define("skins/common/tracker/video_subs",["static/tracker"],function(e){var t,i=function(){return t||(t=new e("test_video_subs",5e3)),t},n=function(){};return n.prototype={canTrack:function(){return i().canTrack()},isTracking:function(){return i().isTracking()},stopTracking:function(){i().stopTracking()},startTracking:function(){i().startTracking()},subscribe:function(e){i().addId(e)},unsubscribe:function(e){i().removeId(e)},hasSubscribed:function(e){return i().hasId(e)},clear:function(){return i().clear()},getIds:function(){return i().getIdsList()}},new n}),define("text!skins/common/download_app/popup.mustache",[],function(){return'<div id="popup-opening-message">\n\t<span id="popup-opening-close" class="icon-f icf-close-thin" title="{{{ close }}}"></span>\n\t<div id="popup-opening-content">\n\t\t<div id="popup-opening-desc">\n\t\t\t<p class="popup-opening-title">\n\t\t\t\t<strong>{{{ title }}}</strong>\n\t\t\t</p>\n\t\t\t<p class="popup-opening-link">{{{ link }}}</p>\n\t\t\t<p class="popup-opening-infos">{{{ infos }}}</p>\n\t\t</div>\n\t\t<span class="icon-f icf-device-mobile"></span>\n\t</div>\n</div>'}),define("skins/common/download_app",["config/main","mustache","lib/i18n!front","text!skins/common/download_app/popup.mustache"],function(e,t,i,n){var s=function(){};return s.prototype={_init:function(){this.bIsInit=!1,this.bIsDisplay=!1,this.sSiteName=null,this.sPopupId=null,this.sPopupStorageValue="hide_app_popup",this.oPopupStorage=null,this.$popup=null,this.checkStorage()},checkStorage:function(){this.oPopupStorage=xv.storage.get(this.sPopupStorageValue),(null===this.oPopupStorage||(new Date).getTime()>this.oPopupStorage.t)&&(this.oPopupStorage={i:null,t:null}),1===this.oPopupStorage.i||this.isPopupDisplay()||this.displayPopup();var e=this;window.setTimeout(function(){1===e.oPopupStorage.i&&e.isPopupDisplay()&&e.removePopup(),e.checkStorage()},5e3)},setPopupDisplay:function(e){this.bIsDisplay=e},isPopupDisplay:function(){return this.bIsDisplay},displayPopup:function(){this.isPopupDisplay()||(this.setPopupDisplay(!0),this.sSiteName="XVIDEOS","xnxx"===e.sitename&&(this.sSiteName="XNXX"),document.querySelector("body").insertAdjacentHTML("beforeend",t.render(n,{close:i.__("misc.close"),title:i.__("messages.download_site_app_title",{"%sitename%":this.sSiteName,"%br%":"<br />"}),link:i.__("messages.download_site_app_link",{"%link%":'<a href="'+e.dyn.appandroidpop+'">',"%link_end%":"</a>"}),infos:i.__("messages.download_site_app_infos")})),this.sPopupId="popup-opening-message",this.$popup=document.querySelector("#"+this.sPopupId),this.addEvents())},addEvents:function(){window.addEventListener("scroll",this.removePopup.bind(this)),this.$btnClose=document.querySelector("#popup-opening-close").addEventListener("click",this.removePopup.bind(this));for(var e=document.querySelector("body").childNodes,t=0;t<e.length;t++)1===e[t].nodeType&&"DIV"===e[t].tagName&&e[t].getAttribute("id")!==this.sPopupId&&e[t].addEventListener("click",this.removePopup.bind(this))},removePopup:function(){if(this.isPopupDisplay()){this.$popup.parentNode.removeChild(this.$popup);var e=(new Date).getTime()+2592e6;1!==this.oPopupStorage.i&&(xv.storage.remove(this.sPopupStorageValue),xv.storage.set(this.sPopupStorageValue,{i:1,t:e})),this.setPopupDisplay(!1)}}},new s}),define("lib/helpers/events/scroll",[],function(){var e=[],t=[],i=!1,n=null,s=null;return $(window).on("scroll",function(){if(!i)for(var o in e)e[o]();!0!==i&&(n=setTimeout(function(){i=!0},100)),clearTimeout(s),s=setTimeout(function(){clearTimeout(n),i=!1;for(var e in t)t[e]()},200)}),{addScrollStartListener:function(t){e.push(t)},addScrollEndListener:function(e){t.push(e)},isScrolling:function(){return i}}}),define("lib/helpers/events/tab",[],function(){function e(e){e=e||window.event;var o;if(o=e.type in r?r[e.type]:this[s]?"hidden":"visible",t!==o)if(t=o,"hidden"===o)for(var a in n)n[a]();else for(var a in i)i[a]()}var t,i=[],n=[],s="hidden",o="visible",a="hidden",r={focus:o,focusin:o,pageshow:o,blur:a,focusout:a,pagehide:a};return s in document?document.addEventListener("visibilitychange",e):(s="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(s="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(s="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,$(window).on("blur",e),$(window).on("focus",e),{addHiddenListener:function(e){n.push(e)},addVisibleListener:function(e){i.push(e)}}}),define("lib/helpers/events",["lib/helpers/events/scroll"],function(e){var t=0,i=function(){this.thlistener,this.thlisteners=[],this.tvlistener,this.tvlisteners=[],this.sslisteners=[],this.selisteners=[]};return i.prototype={TAB_HIDDEN:"tab.hidden",TAB_VISIBLE:"tab.visible",SCROLL_START:"scroll.start",SCROLL_END:"scroll.end",addListener:function(e,i){switch(e){case this.TAB_HIDDEN:if(this.thlisteners[t]=i,!this.thlistener){this.thlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(e){e.addHiddenListener(function(){for(var e in n.thlisteners)n.thlisteners[e]()})})}return++t-1;case this.TAB_VISIBLE:if(this.tvlisteners[t]=i,!this.tvlistener){this.tvlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(e){e.addVisibleListener(function(){for(var e in n.tvlisteners)n.tvlisteners[e]()})})}return++t-1;case this.SCROLL_START:return this.sslisteners[t]=i,++t-1;case this.SCROLL_END:return this.selisteners[t]=i,++t-1}return!1},isScrolling:function(){return e.isScrolling()}},new i}),define("text!skins/common/email_verification/email_verification_modal.mustache",[],function(){return'<h1 class="email-verification__title">{{{ action_require_valid_account }}}</h1>\n<p class="email-verification__message">{{{ please_confirm_email }}}</p>\n<div class="email-verification__divider"><span>{{{ confirm_email_email_not_received }}}</span></div>\n<div class="email-verification__cta">\n    <a class="email-verification__cta__item" href="/account/email/validate">\n        <span class="icon-f icf-send-o"></span>\n        {{{ resend_the_link }}}\n    </a>\n    <a class="email-verification__cta__item" href="/account/email">\n\t    <span class="icon-f icf-envelop"></span>\n        {{{ change_my_email }}}\n    </a>\n    <a class="email-verification__cta__item" href="/account/support">\n        <span class="icon-f icf-question-circle-o"></span>\n        {{{ get_help }}}\n    </a>\n    <a class="email-verification__cta__item" href="/account/email">\n        <span class="icon-f icf-heartbeat-rectangle-o"></span>\n        {{{ check_sending_status }}}\n    </a>\n</div>'}),define("skins/common/email_verification/email_verification_modal",["config/main","static/cookies","static/utils","lib/i18n!front","lib/helpers/overlay/box","mustache","text!./email_verification_modal.mustache"],function(e,t,i,n,s,o,a){var r=function(e){s.call(this,"body",!0,"hide",!0),this.setContent(o.render(a,{action_require_valid_account:n.__("action_require_valid_account"),please_confirm_email:n.__("please_confirm_email",{"%email%":i.escape(e)}),confirm_email_email_not_received:n.__("confirm_email_email_not_received"),resend_the_link:n.__("resend_the_link"),change_my_email:n.__("change_my_email"),get_help:n.__("get_help"),check_sending_status:n.__("check_sending_status")})),this.addClass("email-verification"),this.setOverlayClosable(!0),this.setEscapeClosable(!0)};return r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r}),define("skins/common/profile/sub_actions",["static/log","config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/tracker/video_subs"],function(e,t,i,n,s){var o=function(){this._init()},a={user_id:null,user_name:null,is_follower:null,is_owner:null,is_rejected:null,csrf:null,rejected_csrf:null,nb_subs:null,nb_subs_formatted:null,append_to:null};return o.prototype={_init:function(){this.oUsers={},this.oUsersIdByName={},this.oTmpUsersByName={},this.oTmpCallBacksByName={}},simplePost:function(t,i,n,s){$.ajax({type:"POST",url:t,data:i||{},dataType:"json",success:function(e){if(!e.result)return 900===e.code&&require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e.data.action_need_verified_email).show()}),void("function"==typeof s&&s(e));"function"==typeof n&&(e.wgLogs&&delete e.wgLogs,n(e))},error:function(i){e.error("%c  sA --- simplePost ERROR --- "+t,"color:red;",JSON.parse(JSON.stringify(i))),"function"==typeof s&&s(i&&i.responseJSON?i.responseJSON:i)}})},loadSubInfoOneUser:function(e,i,n){if("xnxx"===t.sitename&&!t.dyn.login_info.is_logged)return void("function"==typeof n&&n());var s=this.getLoadedUserByName(e);if(s&&s.oInfo.user_id){if("function"==typeof i){var o=JSON.parse(JSON.stringify(s.oInfo));o.result=!0,i(o)}}else{if(!t.dyn.login_info.is_logged){var a=this.getUserIdByName(e);if(!a)return void("function"==typeof n&&n());var s=this.getOrCreateUser(a),o=JSON.parse(JSON.stringify(s.oInfo));return o.result=!0,void("function"==typeof i&&i(o))}var r=this,l="/profiles/"+e+"/followers/check",o={};this.simplePost(l,o,function(t){t.user_name=e,r.setUserInfo(t),"function"==typeof i&&i(t)},n)}},loadSubInfoOneUserOneVid:function(e,i,n,s){if("xnxx"===t.sitename&&!t.dyn.login_info.is_logged)return void("function"==typeof s&&s());var o=this,a="/profiles/"+e+"/followers/checkvideo/"+i,r={};this.simplePost(a,r,function(t){t.user_name=e,t=o.setUserInfo(t),o.setUserInfoUnlogged(t.user_id),"function"==typeof n&&(t=JSON.parse(JSON.stringify(t)),n(t))},s)},loadSubInfoListUsers:function(e,i,n,s){if("xnxx"===t.sitename&&!t.dyn.login_info.is_logged)return void("function"==typeof s&&s());if(!t.dyn.login_info.is_logged){var o=[];for(var a in i){var r=this.getOrCreateUser(i[a]);o.push(JSON.parse(JSON.stringify(r.oInfo)))}var l={result:!0,users:o};return void("function"==typeof n&&n(l))}var d=this,u="/profiles/"+e+"/followers/checks",l={users:i};this.simplePost(u,l,function(e){if(e.users)for(var t in e.users){var i=JSON.parse(JSON.stringify(e.users[t]));i.user_id=t,e.users[t]=d.standardizeUserInfo(i),d.setUserInfo(i)}"function"==typeof n&&n(e)},s)},getOrCreateUser:function(e){if("undefined"==typeof this.oUsers[e]){var t=JSON.parse(JSON.stringify(a));t.user_id=e,this.oUsers[e]={oInfo:this.standardizeUserInfo(t),aCallbacks:[]}}return this.setUserInfoUnlogged(e),this.oUsers[e]},getOrCreateUserByName:function(e){var t=this.getLoadedUserByName(e,!0);return t||("undefined"==typeof this.oTmpUsersByName[e]&&(this.oTmpUsersByName[e]={oInfo:JSON.parse(JSON.stringify(a)),aCallbacks:[]}),this.oTmpUsersByName[e])},isUserFullSet:function(e){return void 0!==e&&"undefined"!=typeof e.oInfo&&null!==e.oInfo.user_id&&null!==e.oInfo.is_follower},getLoadedUser:function(e,t){return!("undefined"==typeof this.oUsers[e]||!t&&!this.isUserFullSet(this.oUsers[e]))&&this.oUsers[e]},getLoadedUserByName:function(e,t){return"undefined"!=typeof this.oUsersIdByName[e]&&this.getLoadedUser(this.oUsersIdByName[e],t)},getUserIdByName:function(e){return"undefined"!=typeof this.oUsersIdByName[e]&&this.oUsersIdByName[e]},getUserNameById:function(e){for(var t in this.oUsersIdByName)if(this.oUsersIdByName[t]===e)return t;return!1},setUserIdByName:function(e,t){if(t&&e&&"undefined"==typeof this.oUsersIdByName[t]){this.oUsersIdByName[t]=e,this.getOrCreateUser(e);var i=this.oTmpUsersByName[t];if(void 0!==i){i.user_id=e,this.setUserInfo(i.oInfo);for(var n in i.aCallbacks)this.addUserUpdateCallback(e,i.aCallbacks[n]);delete this.oTmpUsersByName[t]}if("undefined"!=typeof this.oTmpCallBacksByName[t]){for(var n in this.oTmpCallBacksByName[t])this.addUserUpdateCallback(e,this.oTmpCallBacksByName[t][n]);delete this.oTmpCallBacksByName[t]}}},standardizeUserInfo:function(e){if("undefined"!=typeof e.user_id&&null!==e.user_id||("undefined"!=typeof e.id_user?e.user_id=e.id_user:"undefined"!=typeof e.id&&(e.user_id=e.id)),"string"==typeof e.profile)e.user_name=e.profile;else if("undefined"==typeof e.user_name||null===e.user_name)if("string"==typeof e.username)e.user_name=e.username;else if("undefined"!=typeof e.user_id&&null!==e.user_id){var i=this.getUserNameById(e.user_id);i&&(e.user_name=i)}if("undefined"==typeof e.is_rejected&&"boolean"==typeof e.rejected&&(e.is_rejected=e.rejected),("undefined"==typeof e.nb_subs_formatted||null===e.nb_subs_formatted||"undefined"==typeof e.nb_subs||null===e.nb_subs)&&t.dyn&&t.dyn.subs_users){var n="undefined"!=typeof e.user_name&&null!==e.user_name&&"undefined"!=typeof t.dyn.subs_users[e.user_name]?t.dyn.subs_users[e.user_name]:null;if(!n&&"undefined"!=typeof e.user_id&&null!==e.user_id)for(var s in t.dyn.subs_users)t.dyn.subs_users[s].id===e.user_id&&(n=t.dyn.subs_users[s]);n&&(e.nb_subs=n.subs_s,e.nb_subs_formatted=n.subs)}return e},setUserInfo:function(e){if(e=this.standardizeUserInfo(e),"undefined"==typeof e.user_id){if("undefined"==typeof e.user_name)return!1;e.user_id=this.getUserIdByName(e.user_name)}var t=e.user_id?this.getOrCreateUser(e.user_id):this.getOrCreateUserByName(e.user_name);return Object.keys(e).forEach(function(i){t.oInfo[i]=e[i]}),this.setUserIdByName(e.user_id,e.user_name),this.callUserUpdateCallbacks(e.user_id),xv&&xv.thumb_block_menus&&"function"==typeof xv.thumb_block_menus.reset_initiated_contents&&xv.thumb_block_menus.reset_initiated_contents(),e},setUserInfoUnlogged:function(e){if(!t.dyn.login_info.is_logged){var i=this.getLoadedUser(e,!0);if(!i)return;i.oInfo.user_id=e,i.oInfo.is_follower=s.isTracking()&&s.hasSubscribed(e),i.oInfo.is_owner=!1,i.oInfo.is_rejected=!1,this.standardizeUserInfo(i.oInfo)}},addUserUpdateCallback:function(e,t){this.getOrCreateUser(e).aCallbacks.push(t)},addUserUpdateCallbackByName:function(e,t){var i=this.getLoadedUserByName(e,!0);i?i.aCallbacks.push(t):("undefined"==typeof this.oTmpCallBacksByName[e]&&(this.oTmpCallBacksByName[e]=[]),this.oTmpCallBacksByName[e].push(t))},callUserUpdateCallbacks:function(e){var t=this.getLoadedUser(e);if(t&&t.aCallbacks.length)for(var i in t.aCallbacks)t.aCallbacks[i]({is_follower:t.oInfo.is_follower,is_rejected:t.oInfo.is_rejected,nb_subs:t.oInfo.nb_subs,nb_subs_formatted:t.oInfo.nb_subs_formatted})},canUseLocalSub:function(e){if(!s.canTrack()){var o=n.alert(i.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}));return require(["skins/"+t.sitename+"/form/login"],function(e){var t=o.getNode().find("a").first();t.on("click",function(){o.close()}),e.setupLinks(t)}),this.bClicked=!1,!1}if(!s.isTracking()){var o=n.alert(i.__("profile.tracking.disabled",{"%start_login%":'<a href="#">',"%end_login%":"</a>","%start_enable%":'<a href="/my-feed">',"%end_enable%":"</a>"}));return require(["skins/"+t.sitename+"/form/login"],function(e){e.setupLinks(o.getNode().find("a").first())}),this.bClicked=!1,!1}return!("string"==typeof e&&!this.getUserIdByName(e))||(n.alert(i.__("misc.internal_error_retry")),!1)},follow:function(e,i,n,o){if(!this.bSubActionInProgress){if(this.bSubActionInProgress=!0,!t.dyn.login_info.is_logged){if(this.canUseLocalSub(e)){var a=this.getUserIdByName(e),r={result:!0,user_id:a,is_follower:!0};s.subscribe(a),this.setUserInfo(r)}this.bSubActionInProgress=!1}var l=this,d="/profiles/"+e+"/followers/subscribe",r="profile"===t.data.action?{ref:document.referrer}:{};"string"==typeof i&&(r.csrf=i);var u=function(){l.bSubActionInProgress=!1,"function"==typeof o&&o()};this.simplePost(d,r,function(i){if(l.bSubActionInProgress=!1,i.user_name=e,i.is_follower=!0,i.is_rejected=!1,l.setUserInfo(i),"profile"===t.data.action){var s=new CustomEvent("sub-action",{detail:{friend_id:t.data.user.id_user}});document.dispatchEvent(s)}"function"==typeof n&&n(i)},u)}},unfollow:function(e,i,n,o){if(!this.bSubActionInProgress){if(this.bSubActionInProgress=!0,!t.dyn.login_info.is_logged){if(this.canUseLocalSub(e)){var a=this.getUserIdByName(e),r={result:!0,user_id:a,is_follower:!1};s.unsubscribe(a),this.setUserInfo(r)}this.bSubActionInProgress=!1}var l=this,d="/profiles/"+e+"/followers/unsubscribe",r="string"==typeof i?{csrf:i}:{},u=function(){l.bSubActionInProgress=!1,"function"==typeof o&&o()};this.simplePost(d,r,function(i){if(l.bSubActionInProgress=!1,i.user_name=e,i.is_follower=!1,l.setUserInfo(i),"profile"===t.data.action){var s=new CustomEvent("unsub-action",{detail:{friend_id:t.data.user.id_user}});document.dispatchEvent(s)}"function"==typeof n&&n(i)},u)}},reject:function(e,t,i,n){if(!this.bSubActionInProgress){this.bSubActionInProgress=!0;var s=this,o="/profiles/"+e+"/followers/reject",a={csrf:t},r=function(){s.bSubActionInProgress=!1,"function"==typeof n&&n()};this.simplePost(o,a,function(t){s.bSubActionInProgress=!1,t.user_name=e,t.is_rejected=!0,t.is_follower=!1,s.setUserInfo(t),"function"==typeof i&&i(t)},r)}},cancelReject:function(e,t,i,n){if(!this.bSubActionInProgress){this.bSubActionInProgress=!0;var s=this,o="/profiles/"+e+"/followers/reject",a={csrf:t},r=function(){s.bSubActionInProgress=!1,"function"==typeof n&&n()};this.simplePost(o,a,function(t){s.bSubActionInProgress=!1,t.user_name=e,t.is_rejected=!1,s.setUserInfo(t),"function"==typeof i&&i(t)},r)}},unfollowMembership:function(e,t,i,n){var s="/profiles/"+e+"/memberships/unsubscribe",o={csrf:t};this.simplePost(s,o,i,n)},rejectMembership:function(e,t,i,n){var s="/profiles/"+e+"/memberships/reject",o={csrf:t};this.simplePost(s,o,i,n)},followCat:function(e,t,i,n){var s="/cats-subs/subscribe/"+e,o={csrf:t,ref:document.referrer};this.simplePost(s,o,i,n)},followCatInSubbedChannels:function(e,t,i,n){var s="/cats-subs/subscribe-in-channels/"+e,o={csrf:t,ref:document.referrer};this.simplePost(s,o,i,n)},unfollowCat:function(e,t,i,n){var s="/cats-subs/unsubscribe/"+e,o={csrf:t};this.simplePost(s,o,i,n)},rejectCat:function(e,t,i,n){var s="/cats-subs/reject/"+e,o={csrf:t};this.simplePost(s,o,i,n)}},new o}),define("text!skins/common/history/history_popup.mustache",[],function(){return'<div class="disable-history-confirm">\n\t{{ content }}\n\t<form>\n\t\t<label><input type="checkbox" name="clear" value="1"/> {{ history }}</label>\n\t</form>\n</div>'}),define("skins/form/validator/schema",[],function(){var e=function(e,t,i){void 0!==t&&(this.parent=e,this.halt_on_error=t.options.halt_on_error,this.validators=[],void 0!==i&&this.init(t.rules,i))};return e.prototype={errorChanged:null,refresh:function(){for(var e in this.validators)this.validators[e].refresh&&this.validators[e].refresh()},isValid:function(){for(var e in this.validators)if(!this.validators[e].isValid())return!1;return!0},getFirstError:function(){for(var e in this.validators){if("function"==typeof this.validators[e].getFirstError){var t=this.validators[e].getFirstError();if(t)return t}if(!this.validators[e].isValid())return this.validators[e]}return null},init:function(e,t){var i=this;for(var n in e){var s,o=t[e[n].rule_name];s="schema"===e[n].rule_name?new o(i,e[n],t):new o(i,e[n]),this.addValidator(s)}},addValidator:function(e){var t=this;e.errorChanged=function(e,i){t.errorChanged&&t.errorChanged(e,i)},this.validators.push(e)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e}},e}),define("text!skins/form/validator/form_errors/contener.mustache",[],function(){return"<div class='validator-err-sc'>\n\t<a href=\"#\" class='close-btn'><span class='icon-f icf-close-thin'></span></a>\n\t<h3>{{{ title }}}</h3>\n\t<span class=\"icon-f icf-warning icon-bg\"></span>\n\t<div></div>\n</div>"}),define("text!skins/form/validator/form_errors/error.mustache",[],function(){return"<p class=\"form-error-shortcut\">\n\t<span class='icon-f icf-caret-right'></span>\n\t<a href='#'>\n\t\t{{#label}}<strong>{{{ label }}}</strong> :{{/label}}\n\t\t<span>{{{ error }}}</span>\n\t</a>\n</p>"}),define("skins/form/validator",["./validator/schema","mustache","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","lib/i18n!front","text!./validator/form_errors/contener.mustache","text!./validator/form_errors/error.mustache"],function(e,t,i,n,s,o,a){var r=function(e){var t=[];for(var i in e){var n=e[i].rule_name,s=[n];"schema"===n&&(s=r(e[i].rules),s.push("schema"));for(var o in s)-1===$.inArray(s[o],t)&&t.push(s[o])}return t},l=function(t,s,o){this.options=o||{},e.apply(this,[null,{options:{halt_on_error:!1}}]),this.form=t,this.submit=t.find("button[type=submit],button.g-recaptcha"),this.target=!1;var a=$.trim(t.prop("target"));a.length>0&&(a=$("#"+a),a.length>0&&(this.target=a)),this.is_initialized=!1,this.is_valid=!0,this.submitted=!1,this.captcha_submitted=!1,this.confirmation=!1,this.bypass_confirmation=!1;var l=this;this.submit.length>0&&(this.submit.each(function(){$(this).on("click",function(e){l.bypass_confirmation=!1,l.confirmation=!1,l.confirmationButtonOk=!1,$(this).data("confirm")!==undefined&&(l.confirmation=$(this).data("confirm")),$(this).data("confirm-button-ok")!==undefined&&(l.confirmationButtonOk=$(this).data("confirm-button-ok")),!0===l.options.no_init_validate&&l.validateAll();var t=l.getFirstError();if(t)return l.showErrorsShortcuts(),t.focus&&t.focus(),e.preventDefault(),e.stopPropagation(),!1})}),this.form.on("submit",function(e){if(!0===l.options.no_init_validate&&l.validateAll(),!l.captcha_submitted&&l.submit.hasClass("g-recaptcha")&&(l.captcha_submitted=!0,l.submit.on("click",function(){l.form.submit()})),!l.isValid()){l.showErrorsShortcuts();var t=l.getFirstError();return t&&t.focus&&t.focus(),e.preventDefault(),e.stopPropagation(),!1}if(l.submitted)return e.preventDefault(),e.stopPropagation(),!1;if(l.onSubmit&&!l.onSubmit())return e.preventDefault(),e.stopPropagation(),!1;if(l.confirmation&&!l.bypass_confirmation){e.preventDefault(),e.stopPropagation();var s={};return l.confirmationButtonOk&&(s={text_ok:l.confirmationButtonOk}),n.confirm(l.confirmation,function(){l.bypass_confirmation=!0,l.form.submit()},null,!0,s),!1}l.submitted=!0,l.submit.each(function(){var e=$(this);e.data("original-content")||e.data("original-content",e.html()),e.prop("disabled",!0).addClass("disabled").html($('<span class="vloader">'+i.getIcf()+"</span>"))}),l.cancel_btn&&l.cancel_btn.hide()}),l.restoreButtonContent=function(){l.submit.each(function(){var e=$(this);e.prop("disabled",!1).removeClass("disabled"),void 0!==e.data("original-content")&&e.html(e.data("original-content"))})});var d=r(s),u=[];for(var c in d)u.push("skins/form/validator/"+d[c]);require(u,function(){var e={};for(var t in arguments)e[d[t]]=arguments[t];l.init(s,e)}),this.has_ready_only=this.form.hasClass("has-read-only"),this.cancel_btn=null,this.has_ready_only&&(this.is_editing=this.form.hasClass("editing"),this.form.find(".btn-start-edition").on("click",function(e){e.preventDefault(),l.is_editing||(l.is_editing=!0,l.form.addClass("editing"),l.refresh())}),this.cancel_btn=this.form.find(".btn-cancel-edition").on("click",function(e){e.preventDefault(),l.is_editing&&(l.submitted||(l.is_editing=!1,l.form.removeClass("editing")))}))};return l.prototype=new e,l.prototype.onInit=null,l.prototype.init=function(t,i){if(!0===this.options.no_init_validate)for(var n in t)t[n].options||(t[n].options={}),t[n].options.no_init_validate=!0;if(e.prototype.init.apply(this,[t,i]),this.errorChanged(!1,this),!this.is_valid){var s=this.getFirstError();s&&s.focus&&"undefined"==typeof this.options.no_init_focus&&s.focus()}this.is_initialized=!0,"function"==typeof this.onInit&&this.onInit(),"function"==typeof this.options.fnIsInit&&this.options.fnIsInit()},l.prototype.errorChanged=function(e,t){if(this.is_valid=!e&&this.isValid(),this.submit.toggleClass("has-verror",!this.is_valid),!this.update_error_timeout){this.updateErrorsShortcuts();var i=this;this.update_error_timeout=setTimeout(function(){i.updateErrorsShortcuts(),i.update_error_timeout=!1},1e3)}},l.prototype.hideErrorsShortcuts=function(){this.form_errors_shortcuts&&(this.form_errors_shortcuts.hide(),this.form_errors_shortcuts_closed=!0)},l.prototype.showErrorsShortcuts=function(){if(this.form.addClass("highlight-errors"),!this.options.no_errors_shortcuts){if(this.form_errors_shortcuts||(this.form_errors_shortcuts=$(t.render(o,{title:s.__("form.cant_validate_cause_errors")+" :"})),this.form_errors_shortcuts_list=this.form_errors_shortcuts.children("div"),this.options.append_errors_shortcuts_to&&$(this.options.append_errors_shortcuts_to).length>0?$(this.options.append_errors_shortcuts_to).append(this.form_errors_shortcuts):this.submit?this.form_errors_shortcuts.insertBefore(this.submit.last()):this.form.append(this.form_errors_shortcuts)),this.is_valid)return void this.hideErrorsShortcuts();this.form_errors_shortcuts.show(),this.form_errors_shortcuts_closed=!1,this.updateErrorsShortcuts()}},l.prototype.updateErrorsShortcuts=function(){if(this.form_errors_shortcuts&&!this.form_errors_shortcuts_closed){if(this.isValid())return void this.hideErrorsShortcuts();this.form_errors_shortcuts_list.empty();var e=this;this.form_errors_shortcuts.find(".close-btn").on("click",function(){e.hideErrorsShortcuts()});for(var i in this.validators)if("function"==typeof this.validators[i].getError){var n=this.validators[i].getError();if(n){var s=$(t.render(a,{label:"function"==typeof this.validators[i].getLabel&&this.validators[i].getLabel(),error:n}));s.children("a").data("goto",i).on("click",function(t){t.preventDefault();var i=e.validators[$(this).data("goto")];i&&i.focus()}),this.form_errors_shortcuts_list.append(s)}}}},l.prototype.onSubmit=null,l.prototype.setConfirmation=function(e){this.submit.data("confirm",e)},l.prototype.resetConfirmation=function(){this.submit.data("confirm",!1)},l.prototype.validateAll=function(){for(var e in this.validators)"function"==typeof this.validators[e].validate&&this.validators[e].validate()},l.prototype.resetSubmit=function(){this.submitted&&(this.submitted=!1,this.removeVLoader(),"function"==typeof this.restoreButtonContent&&this.restoreButtonContent(),this.cancel_btn&&this.cancel_btn.show())},l.prototype.removeVLoader=function(){this.submit.prop("disabled",!1).removeClass("disabled").find(".vloader").remove()},l}),define("skins/account/social_connect/social_media_integration/connect_alert",["config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t,i){return function(n){n.off("click").on("click",function(n){n.preventDefault()
;var s=$("<div></div>").append($(this).find("img").clone()).html(),o=$(this).attr("href"),a=$(this).data("name");bIsSignup="signup"===$(this).data("method");var r=t.__(bIsSignup?"login_form.signup_with":"login_form.signin_with",{"%method%":a}),l="<p class='title'><span class='social-login-icon'>"+s+"</span> "+r+" :</span><ul><li>"+t.__("login_form.social_signup_condition_1.2",{"%strong%":"<strong>","%strong_end%":"</strong>","%social%":a})+"</li><li>"+t.__("login_form.social_signup_condition_2",{"%strong%":"<strong>","%strong_end%":"</strong>"})+"</li><li>"+t.__("login_form.social_signup_condition_3",{"%strong%":"<strong>","%strong_end%":"</strong>","%social%":a})+"</li></ul>",d=!!bIsSignup&&'<p class="social-login-tos-accept">'+t.__("login_form.signup_accept_tos_pp",{"%tos_link%":'<a href="'+e.domains.info+'/legal/tos">',"%pp_link%":'<a href="'+e.domains.info+'/legal/privacy">',"%end_link%":"</a>"})+"</p>";i.confirm(l,function(){window.location.href=o},null,!0,{sBottomMessage:d,sPopClass:"social-login-info",text_ok:r})})}}),define("skins/form/captcha",["static/dom","lib/tools"],function(e,t){var i=function(){this.iMaxEvtsStart=200,this.iMaxEvtsEnd=200,this.bLoggingStarted=!1,this.bLoggingEnded=!1;var e=this;this.fnEvt=function(t){if(!t.type||"undefined"==typeof i.O_EVENTS_INFO[t.type])return!0;e[i.O_EVENTS_INFO[t.type].sFunc](t)}};return i.CREATE_FAKE_LOG_EVENT=function(t,i){return{type:t,target:e.element(i)}},i.O_KEYS_TO_FOLLOW={9:!0,13:!0,17:!0,18:!0,19:!0,27:!0,33:!0,34:!0,35:!0,36:!0,37:!0,38:!0,39:!0,40:!0,44:!0,45:!0,91:!0,92:!0,93:!0,112:!0,113:!0,114:!0,115:!0,116:!0,117:!0,118:!0,119:!0,120:!0,121:!0,122:!0,123:!0,144:!0,145:!0},i.O_EVENTS_INFO={log_start:{sFunc:"onOtherEvt",iId:1},click:{sFunc:"onSimpleMouseEvt",iId:11},contextmenu:{sFunc:"onSimpleMouseEvt",iId:12},dblclick:{sFunc:"onSimpleMouseEvt",iId:13},mousedown:{sFunc:"onMouseDown",iId:21},mouseup:{sFunc:"onMouseUp",iId:22},mousemove:{sFunc:"onMouseMove",iId:23},touchstart:{sFunc:"onTouchStart",iId:31},touchend:{sFunc:"onTouchEnd",iId:32},touchcancel:{sFunc:"onTouchEnd",iId:33},touchmove:{sFunc:"onTouchMove",iId:34},keydown:{sFunc:"onKeyEvt",iId:41},keyup:{sFunc:"onKeyEvt",iId:42},wheel:{sFunc:"onWheelEvt",iId:51},focus:{sFunc:"onOtherEvt",iId:61},blur:{sFunc:"onOtherEvt",iId:62},change:{sFunc:"onOtherEvt",iId:63},input:{sFunc:"onOtherEvt",iId:64},submit:{sFunc:"onOtherEvt",iId:65},resize:{sFunc:"onOtherEvt",iId:71},copy:{sFunc:"onOtherEvt",iId:72},paste:{sFunc:"onOtherEvt",iId:73},cut:{sFunc:"onOtherEvt",iId:74}},i.prototype={start:function(e,t){if(!0===this.bLoggingStarted||!0===this.bLoggingEnded){if(!0!==t)return;this.stop()}this.aEvtsStart=[],this.aEvtsEnd=[],this.oSelectorsMap={},this.iSelectorIncrement=1,this.oData={selectors:{},events:[]},this.oLatentEvent=null,this.iStarted=Date.now(),this.iMouseDist=0,this.iLastMouseX=null,this.iLastMouseY=null,this.oTouches={},this.iTouchIdentifierCount=0;for(var n in i.O_EVENTS_INFO)document.addEventListener(n,this.fnEvt,{capture:!0,passive:!0});this.bLoggingEnded=!1,this.bLoggingStarted=!0,this.log(i.CREATE_FAKE_LOG_EVENT("log_start",e||document.getElementsByTagName("body")[0]))},stop:function(){if(!0===this.bLoggingStarted){this.bLoggingEnded=!0,this.bLoggingStarted=!1;for(var e in i.O_EVENTS_INFO)document.removeEventListener(e,this.fnEvt,{capture:!0,passive:!0});this.stopLatentMouseEvent()}},get:function(){return this.oData.events=this.getEvents(),this.oData},getData:function(){return JSON.stringify(this.get())},getBase64Data:function(){return btoa(this.getData())},appendToForm:function(t,i){if(!(t=e.element(t)))return!1;var n=this.getBase64Data();if("function"==typeof t.querySelector){var s=t.querySelectorAll('[name="'+i+'"]');if(s&&s.length&&s[0]&&"function"==typeof s[0].setAttribute)return s[0].setAttribute("value",n),!0}var o=document.createElement("INPUT");return o.setAttribute("type","hidden"),o.setAttribute("name",i),o.setAttribute("value",n),t.appendChild(o),!0},setMax:function(e){("number"!=typeof e||e<1)&&null!==e&&(this.iMaxEvts=e)},log:function(e,t){var n="object"==typeof e&&"string"==typeof e.type&&e.type;if(n&&"undefined"!=typeof i.O_EVENTS_INFO[n]&&e&&"object"==typeof e&&"object"==typeof e.target&&"string"==typeof e.target.tagName){var s=e.target,o=Date.now()-this.iStarted,a=this.getDomElemName(s);this.oSelectorsMap[a]||(this.oSelectorsMap[a]=this.iSelectorIncrement++,this.oData.selectors[this.oSelectorsMap[a]]=a);var r=[i.O_EVENTS_INFO[n].iId,o,this.oSelectorsMap[a]];if(t&&t.length)for(var l in t)r.push(t[l]);this.pushEvent(r)}},pushEvent:function(e){if(this.aEvtsStart.length<this.iMaxEvtsStart)return void this.aEvtsStart.push(e);this.aEvtsEnd.push(e),this.aEvtsEnd.length>this.iMaxEvtsEnd&&this.aEvtsEnd.shift()},getEvents:function(){return[].concat(this.aEvtsStart,this.aEvtsEnd)},getNbEvents:function(){return this.aEvtsStart.length+this.aEvtsEnd.length},getDomElemName:function(e){var t=e.tagName;return e.hasAttribute("id")&&(t+="#"+e.getAttribute("id")),e.hasAttribute("name")&&(t+='[name="'+e.getAttribute("name")+'"]'),t},getDistance:function(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))},onSimpleMouseEvt:function(e){this.log(e,[e.pageX,e.pageY])},onMouseDown:function(e){this.log(e,[e.pageX,e.pageY]),this.stopLatentMouseEvent()},onMouseUp:function(e){this.log(e,[e.pageX,e.pageY])},onMouseMove:function(e){var t=null===this.iLastMouseX||null===this.iLastMouseY,i=t?0:this.getDistance(this.iLastMouseX,this.iLastMouseY,e.pageX,e.pageY);this.onLatentMouseEvent(e,i,0),this.iLastMouseX=e.pageX,this.iLastMouseY=e.pageY},onTouchStart:function(e){if(e&&e.touches&&e.touches.length)for(var t=0;t<e.touches.length;t++){var n=e.touches[t];"undefined"!=typeof n.identifier&&"undefined"!=typeof n.pageX&&("undefined"==typeof this.oTouches[n.identifier]&&(this.iTouchIdentifierCount++,this.oTouches[n.identifier]={iLogId:this.iTouchIdentifierCount,iDist:0,iLastPageX:Math.round(n.pageX),iLastPageY:Math.round(n.pageY)},this.log(i.CREATE_FAKE_LOG_EVENT(e.type,n.target),[this.oTouches[n.identifier].iLogId,this.oTouches[n.identifier].iLastPageX,this.oTouches[n.identifier].iLastPageY])))}},onTouchEnd:function(e){var t={};for(var n in this.oTouches)t[n]=!0;if(e&&e.touches&&e.touches.length)for(var s=0;s<e.touches.length;s++){var o=e.touches[s];"undefined"!=typeof o.identifier&&"undefined"!=typeof o.pageX&&("undefined"!=typeof this.oTouches[o.identifier]&&(t[o.identifier]=!1))}for(var n in t)!0===t[n]&&(this.oTouches[n].iDist>0&&this.log(i.CREATE_FAKE_LOG_EVENT("touchmove",document.getElementsByTagName("body")[0]),[this.oTouches[n].iLogId,this.oTouches[n].iDist]),this.log(e,[this.oTouches[n].iLogId,this.oTouches[n].iLastPageX,this.oTouches[n].iLastPageY]),delete this.oTouches[n])},onTouchMove:function(e){if(e&&e.touches&&e.touches.length)for(var t=0;t<e.touches.length;t++){var i=e.touches[t];if("undefined"!=typeof i.identifier&&"undefined"!=typeof i.pageX&&"undefined"!=typeof this.oTouches[i.identifier]){var n=i.pageX,s=i.pageY;this.oTouches[i.identifier].iDist+=this.getDistance(this.oTouches[i.identifier].iLastPageX,this.oTouches[i.identifier].iLastPageY,n,s),this.oTouches[i.identifier].iLastPageX=n,this.oTouches[i.identifier].iLastPageY=s}}},onKeyEvt:function(e){var t=i.O_KEYS_TO_FOLLOW[e.keyCode]?e.keyCode:-1;this.log(e,[t])},onWheelEvt:function(e){this.onLatentMouseEvent(e,e.deltaX,e.deltaY)},stopLatentMouseEvent:function(){this.onLatentMouseEvent(null)},onLatentMouseEvent:function(e,t,i){!this.oLatentEvent||e&&this.oLatentEvent.oEvent.type===e.type||!this.oLatentEvent.aInfo||(this.oLatentEvent.aInfo=this.oLatentEvent.aInfo.map(function(e){return Math.floor(e)}),this.log(this.oLatentEvent.oEvent,this.oLatentEvent.aInfo),delete this.oLatentEvent),e&&(this.oLatentEvent||(this.oLatentEvent={oEvent:e,aInfo:[0,0]}),this.oLatentEvent.aInfo[0]+=t,this.oLatentEvent.aInfo[1]+=i)},onOtherEvt:function(e){this.log(e)}},i}),define("text!skins/common/currency_switch/switcher.mustache",[],function(){return'<ul>\n\t{{#currencies}}\n\t\t<li>\n\t\t\t<button class="btn{{#is_current}} is-current{{/is_current}}" type="button" data-id="{{ id }}">{{{ short_name }}}</button>\n\t\t</li>\n\t{{/currencies}}\n</ul>'}),define("skins/common/currency_switch/switcher",["static/log","config/main","mustache","lib/helpers/popup","lib/i18n!front","text!skins/common/currency_switch/switcher.mustache"],function(e,t,i,n,s,o){var a=function(){};return a.prototype={getAll:function(){return t.dyn.currencies},getCurrent:function(){for(var e in t.dyn.currencies)if(t.dyn.currencies[e].is_current)return t.dyn.currencies[e];return this.setCurrent(t.dyn.currencies[0].id,null,!1),t.dyn.currencies[0]},setCurrent:function(i,o,a,r){var l=function(t){if(e.debug_("setCurrent --- fnError",t),o&&o.length){new n(o,$("<div>"+t+"</div>"),{trigger:!1,autoclose:!0,close_method:"close",mouseout_autoclose:3e3,autoclose_on_same_level:"any_level",popup_class:"currency-error-pop",mouseout_autoclose_openevents:["click","no_event"]}).open()}},d=function(){e.info_("setCurrent --- fnSuccess");var n=null;for(var o in t.dyn.currencies){var a=t.dyn.currencies[o];a.is_current=a.id===i,a.is_current&&(n=a.id,t.dyn.forcedCurrency=a)}if(null===n)return e.debug_("setCurrent --- fnSuccess --- sCurrentId === null"),void l(s.__("misc.error_please_retry"));"function"==typeof r&&r(n)};if(e.info_("setCurrent",{sCurrency:i,$btn:o,bWithAjaxCall:a,fnOnUpdated:r}),!1===a)return void d();var u=null;for(var c in t.dyn.currencies){var f=t.dyn.currencies[c];f.id===i&&(u=f.url)}if(null===u)return e.debug_("setCurrent --- sCurrentAimUrl === null"),void l(s.__("misc.error_please_retry"));$.ajax({method:"GET",url:u,dataType:"json",success:function(t){e.debug_("setCurrent --- ajax SUCCESS",{sUrl:u,oReturnedData:t}),t.result?d():l(t.message||s.__("misc.error_please_retry"))},error:function(t){e.debug_("setCurrent --- ajax ERROR",{sUrl:u,oError:t});var i="";t&&t.statusText&&(i+=t.statusText),t&&t.status&&(i+=(i.length?" ":"")+t.status),l(i.length?i:s.__("misc.error_please_retry"))}})},getCurrentCurrencyShortLabel:function(){var e=this.getCurrent();return e&&e.short_name?e.short_name:""},getAutonomousBtn:function(e,t){var i=this.getCurrentCurrencyShortLabel(),n=$("<button class='currency-switch-btn'><span class='icon-f icf-money'></span> <strong>"+i+"</strong> <span class='icon-f icf-caret-down'></span></button>");return this.initAutonomousBtn(n,e,t),n},initAutonomousBtn:function(e,t,i){var s={position:{v:"below",h:"left"},popup_class:"currency-switch-pop"};if("object"==typeof i)for(var o in s)"undefined"==typeof i[o]&&(i[o]=s[o]);else i=s;new n(e,this.getCurrencyBtns(t),i)},getCurrencyBtns:function(e){var t=$(i.render(o,{currencies:this.getAll()})),n=this;return t.find("button").on("click",function(t){t.preventDefault(),n.setCurrent($(this).data("id"),$(this),undefined,e)}),t}},new a}),define("skins/common/mozaique/premium_redirect_alert",["config/main"],function(e){var t=function(){};return t.prototype={init_listing:function(e){},test_referrer:function(){return""!==document.referrer&&(!(!e.dyn.is_premium||e.dyn.is_premium&&-1===document.referrer.indexOf(e.domains.slave))&&(-1===document.referrer.indexOf(document.location.hostname)||void 0))},displayPopup:function(e,t,i){"function"==typeof i&&i()}},new t}),define("skins/common/form/login/base",["static/log","config/main","static/console","static/dom","lib/tools","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","skins/account/social_connect/social_media_integration/connect_alert","skins/form/validator","skins/form/captcha"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=!1,h=function(e){this.box=null,this.sBoxClass=e,this.is_popup=!0,this.on_form_loaded=null,this.bReloadWithHash=!1,this.onFormLoadedEnd=null,this.fnOnSuccess=null,this.bClosableForm=!0,this.bCloseOnEscape=!1,this.bFormRepositionOnOverlayClick=!1,this.fnOnFormOpen=null,this.fnOnFormClose=null,this.form_opening_origin_mode="signin",this.form_opening_mode="signin",this.bIsOpened=!1,this.switching=!1,this.last_reqjs=null,this.validators={},this.sThisOpenOnlyTracker=null};return h.prototype={getType:function(){return"form_base"},setOpenCloseModes:function(e,t,i,n,s){"string"!=typeof e&&(e=""),"boolean"==typeof t&&(this.bClosableForm=t),"boolean"==typeof i&&(this.bCloseOnEscape=i),"boolean"==typeof s&&(this.bFormRepositionOnOverlayClick=s),this.setOnCloseCallback(n);var o=["signin","signup","premium"];this.form_opening_origin_mode=e,this.form_opening_mode=o[0];for(var a in o)0===e.indexOf(o[a])&&(this.form_opening_mode=o[a])},setOnCloseCallback:function(e){"function"==typeof e&&(this.fnOnFormClose=e)},createOrRefreshValidator:function(e,t,i){var n=$("#"+e);if("signup-form"===e&&("undefined"==typeof this.oSignupCaptcha&&(this.oSignupCaptcha=new c),this.oSignupCaptcha.start(n,!1)),"object"==typeof this.validators[e])return void this.validators[e].refresh();if(0!==n.length){var s=i||{};return s.no_init_validate=!0,this.validators[e]=new u(n,t,s),this.validators[e]}},clearValidators:function(){for(var e in this.validators)this.validators.hasOwnProperty(e)&&delete this.validators[e]},toggleForms:function(e){this.switching||this.doToggleForms(e)},doToggleForms:function(e){console.error("doToggleForms is not implemented")},getUrl:function(e,t){var i=t?null:this.getTracker(),n="/account/signinform"+(e?"/create":"");return i&&(n+="/"+i),n},warnPwned:function(e){this.validators["signin-form"].removeVLoader(),l.confirm("<p>"+o.__("pwned_breached")+"</p>"+o.__("misc.are_you_sure"),function(){e.find(".change-password.hidden").removeClass("hidden").find("input:disabled").prop("disabled",!1)},function(){e.submit()},!1,{text_ok:o.__("login_form.change_password"),text_cancel:o.__("login_form.later_log_me_in")})},onFormLoaded:function(t,i,n){e.debug_("%cform_base onFormLoaded","color:cornflowerblue;",i);var s=this;if(this.last_reqjs=i,this.clearValidators(),null!==t&&!0!==n&&(this.box.setContent(t),this.box.position("auto")),this.doSetupNodes(i),this.doSetupSocialLogin(),this.toggleForms(i),this.on_form_loaded&&this.on_form_loaded(i),null===t){var a=!0,r=$("#signin-form");return void r.find("button").click(function(e){r.find(".warn-pwned").length&&a&&(e.preventDefault(),a=!1,s.warnPwned(r))})}var l=this.box.getNode().find("form").each(function(){var t=$(this);if(!t.data("is-init")){t.data("is-init",!0);var i,n,a,r=!0,d=function(d){e.debug_("%cform_base onFormLoaded --- fnSubmitForm","color:cornflowerblue;"),"object"==typeof d&&d.preventDefault();var u=t.prop("id");if(("object"!=typeof s.validators[u]||s.validators[u].is_valid)&&!n){if(t.find("#signin-form_password").hasClass("warn-pwned")&&r)return r=!1,void s.warnPwned(t);a=!0,n=!0,i&&(i.remove(),i=null),s.onSubmit(t,l),"signup-form"===t.attr("id")&&"undefined"!=typeof s.oSignupCaptcha&&s.oSignupCaptcha.appendToForm(t,"signup-form[legacy_form]");for(var c=function(n){e.debug_("%cform_base onFormLoaded --- fnOnFail","color:cornflowerblue;",n),i=$('<div class="alert alert-danger"><ul class="form-error-list"><li><strong><i class="icon-f icf-close-circle"></i> '+(n||o.__("misc.error_please_retry"))+"</strong></li></ul></div>"),i.prependTo(t),s.onSubmitFailed(t,l);var a=s.validators[t.prop("id")];"object"==typeof a&&"object"==typeof a.restoreButtonContent&&a.restoreButtonContent()},f=s.getUrl(),h=new FormData(t[0]),p=new FormData,_=Array.from(h.entries()),g=0;g<_.length;g++){var m=_[g][0],b=_[g][1];"object"==typeof b?p.append(m,b,b.name):p.append(m,b)}$.ajax({type:"POST",url:f,data:p,dataType:"json",contentType:!1,processData:!1,xhrFields:{withCredentials:!0},success:function(i){if(e.debug_("%cform_base onFormLoaded AJAX --- SUCCESS","color:cornflowerblue;",{sUrl:f,oPostData:p,oReceivedData:i}),"object"==typeof i&&"boolean"==typeof i.result&&!1===i.result)return void c(i.message);var n=function(){i.redirect_url&&s.redirect(i.redirect_url,i.redirect_label?i.redirect_label:"GO")};if(i.user_currency&&require(["skins/common/currency_switch/switcher"],function(e){e.setCurrent(i.user_currency,undefined,!1)}),i.form_valid){n(),s.onFormSubmitSuccess(i);var o=s.validators[t.prop("id")];return void("object"==typeof o&&"object"==typeof o.restoreButtonContent&&o.restoreButtonContent())}s.onFormLoaded(i.form,i.reqjs),n(),s.onSubmitFailed(t,l)}}).fail(function(t,i,n){e.debug_("%cform_base onFormLoaded AJAX --- fail","color:cornflowerblue;",{sUrl:f,oPostData:p,sStatus:i,sError:n}),c()}).always(function(){e.debug_("%cform_base onFormLoaded AJAX --- always","color:cornflowerblue;"),n=!1;var i=s.validators[t.prop("id")];"object"==typeof i&&"object"==typeof i.restoreButtonContent&&i.restoreButtonContent()})}};t.on("submit",function(t){e.debug_("%cform_base onFormLoaded submit","color:cornflowerblue;"),t.preventDefault(),d()})}});s.onFormLoadedEnd&&s.onFormLoadedEnd(i)},doSetupNodes:function(e){console.error("doSetupNodes is not implemented")},doSetupSocialLogin:function(){this.box.getNode().find(".social-login-icon").each(function(){new d($(this))})},loggingLoader:function(){if(!0!==this.bIsLoadingPopOpen){this.bIsLoadingPopOpen=!0;var e=this;l.loading(o.__("misc.redirecting"),null,function(){e.bIsLoadingPopOpen=!1})}},redirect:function(e,i){if(!0!==this.bIsRedirecting)if(this.bIsRedirecting=!0,window.parent&&window.location!==window.parent.location){this.close();var n=r.get("body",!1,"close",!0);n.setContent('<div class="goto-premium-link-cont"><a href="'+e+'" target="_blank" class="btn btn-danger btn-lg btn-wrap">'+(i||"GO")+"</a></div>"),n.setEscapeClosable(this.bCloseOnEscape),n.setScrollAndResizeReposition("auto",!1,!0),this.bFormRepositionOnOverlayClick?n.setOverlayReposition("auto"):n.setOverlayClosable(!0),this.sBoxClass&&n.addClass(this.sBoxClass),n.show("auto")}else!t.dyn.premium&&t.domains&&-1!==e.indexOf(t.domains.premium)?require(["skins/common/mozaique/premium_redirect_alert"],function(t){var i=function(){window.location.reload()},n=function(){window.location.href=e};t.displayPopup("exit",i,n)}):window.location.href===e||window.location.pathname+window.location.search+window.location.hash===e?window.location.reload():window.location.href=e},redirectWithConnectionLoader:function(e){this.loggingLoader(),this.redirect(e)},reloadWithConnectionLoader:function(){this.loggingLoader(),this.redirect(this.buildPath(this.bReloadWithHash))},setReloadWithHash:function(e){this.bReloadWithHash="boolean"!=typeof e||e},onSubmit:function(e,t){},onSubmitFailed:function(e,t){var i=e.prop("id");"object"==typeof this.validators[i]&&this.validators[i].resetSubmit()},onFormSubmitSuccess:function(e){this.close();var i=null;return this.fnOnSuccess?void this.fnOnSuccess():"string"==typeof e.premium_redirect&&e.premium_redirect.length>0?(i=t.domains.premium+this.getRedirectPath(e.user_main_cat,!0),-1!==i.indexOf("?")?i+="&":i+="?",i+=e.premium_redirect,void this.redirectWithConnectionLoader(i)):"string"==typeof e.redirect_domain&&e.redirect_domain.length>0?(i=e.redirect_domain+this.getRedirectPath(e.user_main_cat,!0),void this.redirectWithConnectionLoader(i)):(i=this.getRedirectPath(e.user_main_cat,!1))?void this.redirectWithConnectionLoader(i):void this.reloadWithConnectionLoader()},getRedirectPath:function(e,i){var n=!1;return i&&(n=this.buildPath(!1)),"string"!=typeof e||"straight"!==e&&"gay"!==e&&"shemale"!==e?n:t.dyn.no_main_cat||!t.dyn.pagefilter||t.dyn.pagefilter===e?n:"straight"===e?"/":"/"+e},buildPath:function(e){var t=window.location.pathname;if("string"==typeof window.location.search&&window.location.search.length>1){for(var i=window.location.search.substring(1).split("&"),n=[],s=0;s<i.length;s++){var o=i[s].split("=");o.length>0&&-1===["buy-form","form-token","product"].indexOf(o[0])&&n.push(i[s])}n.length>0&&(t+="?"+n.join("&"))}return e&&window.location.hash.length>0&&(t+=window.location.hash),t},positionPopup:function(e){this.is_popup&&this.box&&this.box.position(e)},loadForm:function(t){e.debug_("%cform_base loadForm","color:cornflowerblue;","oPostData",t),this.box.setContent('<div id="'+this.sBoxClass+'"><br/><p class="text-center">'+a.getSafe("after",o.__("loading.loading")).getHtml()+"</p><br/></div>").show("auto"),this.box.addClass("opened");var n=this,s=this.getUrl("signup"===this.form_opening_mode),r=(this.getTracker(),function(e){var t=$('<div id="'+n.sBoxClass+'"><br/><p class="text-center"><a><strong class="text-danger">'+(e||o.__("loading.failed_retry"))+"</strong></a></p><br/></div>");t.find("a").on("click",function(e){e.preventDefault(),e.stopPropagation(),n.loadForm()}),n.box.setContent(t),n.box.position("auto")});$.ajax({type:"POST",url:s,data:t||{},dataType:"json",xhrFields:{withCredentials:!0},success:function(i){return e.debug_("%c form_base loadForm AJAX --- success","color:cornflowerblue;",{sUrl:s,oPostData:t,oReceivedData:i,sFormDisplayed:i.form_displayed}),"object"==typeof i&&"boolean"==typeof i.result&&!1===i.result?void r(i.message):"none"===i.form_displayed?void n.redirectWithConnectionLoader(window.location.href):(n.onFormLoaded(i.form,i.reqjs),n.positionPopup(),void(i.redirect_url&&n.redirect(i.redirect_url,i.redirect_label?i.redirect_label:"GO")))}}).fail(function(n,o,a){e.debug_("%cform_base loadForm AJAX --- fail","color:cornflowerblue;",{sUrl:s,oPostData:t,sStatus:o,sError:a}),i.print("FAILED LOADING URL "+s+" => ERROR: "+o+' - "'+a+'"',"Login form",n),r()})},getPopContainer:function(){return this.box?this.box.getContainer():null},open:function(t,i){if(this.bIsOpened)return!1;if(f)return e.debug_("%cform_base open --- RETURN ","color:cornflowerblue;","another form is already open"),!1;this.fnOnSuccess=null,"function"==typeof t&&(this.fnOnSuccess=t),this.close(),"object"!=typeof i&&(i={}),this.sThisOpenOnlyTracker=i.sThisOpenOnlyTracker?i.sThisOpenOnlyTracker:null,this.bIsOpened=!0,f=!0,$("body").css("minHeight",n.getViewportHeight()+"px"),this.box=r.get("body",this.bClosableForm,"close",!0),this.box.setEscapeClosable(this.bCloseOnEscape),this.box.setScrollAndResizeReposition("auto",!1,!0),this.bFormRepositionOnOverlayClick?this.box.setOverlayReposition("auto"):this.box.setOverlayClosable(!0),this.sBoxClass&&this.box.addClass(this.sBoxClass);var s=this;this.box.onShow=function(){s.fnOnFormOpen&&s.fnOnFormOpen()},this.box.onClose=function(){s.setIsClosed(),s.first_display=!0,s.box.node.removeClass("opened"),s.fnOnFormClose&&s.fnOnFormClose()};var o=this.bClosableForm?{}:{not_closable:1};return this.loadForm(o),!0},setIsClosed:function(){this.bIsOpened=!1,f=!1,this.sThisOpenOnlyTracker&&(this.sThisOpenOnlyTracker=null)},close:function(){this.bIsOpened&&(this.setIsClosed(),this.box&&(this.box.close(),this.box=null))},setupStandAlone:function(e){this.is_popup=!1;var i=function(e){this.node=e};i.prototype={setContent:function(e){this.node.html(e)},getNode:function(){return this.node},addClass:function(){},position:function(){},close:function(){}},this.box=new i($(e||"#page")),this.onFormLoaded(null,t.data)},setupLinks:function(e,t){var i=this;e.on("click",function(e){i.onClickLinks(e,$(this),t)})},onClickLinks:function(e,t,i,n){e.preventDefault(),e.stopPropagation();var s=t.data("mode"),o=t.data("closable"),a=t.data("close_on_escape"),r=t.data("on_close"),l=t.data("reposition_on_click");this.setOpenCloseModes(s,o,a,r,l),t.trigger("menu.forceclose"),!0!==n&&this.open(i)},addPasswordCheck:function(e,t,i){"signup-form"===e&&(t.init=function(e,i){u.prototype.init.apply(this,[e,i]);for(var n in this.validators)if("signup-form_details_password"===this.validators[n].id){this.validators[n].onStrengthChange=function(e){e<50?t.setConfirmation(o.__("account.password_weak")):t.resetConfirmation()};break}})},getTracker:function(){return this.sThisOpenOnlyTracker?this.sThisOpenOnlyTracker:null}},h}),define("skins/common/form/login/btn_actions",["skins/form/validator","lib/helpers/inline_loader"],function(e,t){var i=function(e,t){this.$link=null,this.sLinkText=null,this.bSendCodeEmailOngoing=!1,this.isPremium=e?1:0,this.validators={},this.oLoginForm=t};return i.prototype={init:function(){var e=$("#totp-auth"),t=$("#unknown-browser-form"),i=$("#vendo-double-auth-form");if(e.length>0){var n=$("#btn-sendCodeEmail"),s=$("#btn-loginWithVendoTotp");this.fnBtnAction(e,n,"unknown",!0),this.fnBtnAction(e,s,"vendo")}if(t.length>0){var o=$("#btn-use2FAUnknown"),a=$("#btn-loginWithVendoUnknown");this.fnBtnAction(t,o,"app"),this.fnBtnAction(t,a,"vendo")}if(i.length>0){var r=$("#btn-use2FAEmail"),l=$("#btn-use2FAVendo");this.fnBtnAction(i,r,"unknown"),this.fnBtnAction(i,l,"app")}},fnEnd:function(){this.bSendCodeEmailOngoing=!1,this.$link.bind("click"),this.$link.html(this.sLinkText),this.sLinkText=null},fnShowPopupError:function(e){require(["lib/helpers/overlay/contextual_popup","lib/i18n!front"],function(t,i){t.alert(e||i.__("misc.error_please_retry"),null,!0)})},fnBtnAction:function(e,i,n,s){var o=this;i.off("click").on("click",function(i){if(i.preventDefault(),i.stopPropagation(),e.length){if("app"===n&&$("#signin-form-block form").length){var a=o.oLoginForm.last_reqjs;return a.form_disp="signin",void o.oLoginForm.doToggleForms(a)}if(s){if(o.bSendCodeEmailOngoing)return;o.$link=$(this),o.sLinkText=o.$link.html(),o.$link.html(t.getImg()),o.bSendCodeEmailOngoing=!0}$.post({url:s?"/account/send-email-code":"/account/get-auth-form",dataType:"json",data:{values:e.serializeArray(),name:e.attr("id"),type:n,premium:o.isPremium},success:function(e){if(!e.result)return void o.fnShowPopupError(e.message);var t;"app"===n?(e.reqjs.form_disp="signin",t=o.isPremium?$("#signin-form-block, #social-login-form fieldset"):$("#signin-form-block fieldset, #social-login-form fieldset")):(e.reqjs.form_disp="login_dynamic",t=o.isPremium?$("#login-dynamic-form-block, #social-login-form fieldset"):$("#login-dynamic-form-block fieldset, #social-login-form fieldset")),e.reqjs.signin_new_form_validation_rules=e.validation_rules;var i=function(){o.fnSetupNewForm(e),o.oLoginForm.onFormLoaded(e.form,e.reqjs,!0),o.init()},s=t.find("form");s.length>0?s.fadeOut("fast",function(){s.replaceWith(e.form),i(),s.fadeIn("slow")}):(t.append(e.form),i())},error:function(){o.fnShowPopupError()},complete:function(){s&&o.fnEnd()}})}})},fnSetupNewForm:function(t){"object"==typeof this.validators[t.form_name]&&delete this.validators[t.form_name];var i=$(t.form);0!==i.length&&(this.validators[t.form_name]=new e(i,t.validation_rules,{no_init_focus:!0,no_init_validate:!0}))}},i}),define("skins/common/design/text",["static/log","static/dom"],function(e,t){var i=function(){this.self=this,this.canvas=document.createElement("canvas"),this.toResize=[],this.oTimerOnResize=null,this.iResizeDelay=500,$(window).on("resize",this,this.onResize)};return i.prototype={onResize:function(e){var i=e.data;if(i.oTimerOnResize||i.iLastResizeTime&&Date.now()-i.iLastResizeTime<i.iResizeDelay)return i.oTimerOnResize&&clearTimeout(i.oTimerOnResize),i.toResize.map(function(e){e.$hideOnResize&&(e.$hideOnResize.style.visibility="hidden")}),void(i.oTimerOnResize=setTimeout(function(){i.oTimerOnResize=null,e.data=i,i.onResize(e)},i.iResizeDelay));i.toResize.map(function(e){(e.$element.$hideOnResize||e.bProcessInvisible||t.isElementInView(e.$element))&&("normal"!==e.sInitialWhiteSpace&&(e.$element.style["white-space"]=e.sInitialWhiteSpace),e.bParagraph?i.doResizeToFitParagraph(e):i.doResizeToFitHorizontal(e))}),i.iLastResizeTime=Date.now()},resizeToFitHorizontal:function(e,t){if(t="object"!=typeof t?{}:t,"object"==typeof e)return t.$element=e,t.sUnit="string"==typeof t.sUnit?t.sUnit:"px",t.sHTMLAttribute="string"==typeof t.sHTMLAttribute?t.sHTMLAttribute:"textContent",t.sText="string"==typeof t.sText?t.sText:e[t.sHTMLAttribute],t.iFontSizeMin="number"==typeof t.iFontSizeMin?t.iFontSizeMin:undefined,t.iFontSizeMax="number"==typeof t.iFontSizeMax?t.iFontSizeMax:undefined,t.$hideOnResize="object"==typeof t.$hideOnResize?t.$hideOnResize:undefined,t.$targetElementWidth="object"==typeof t.$targetElementWidth?t.$targetElementWidth:e,t.bReapplyOnResize="boolean"!=typeof t.bReapplyOnResize||t.bReapplyOnResize,t.fnCallback="function"==typeof t.fnCallback?t.fnCallback:undefined,t.iInitialFontSize=parseInt(window.getComputedStyle(t.$element,null).getPropertyValue("font-size")),t.iInitialPaddingBottom=parseInt(window.getComputedStyle(t.$element,null).getPropertyValue("padding-bottom")),t.iInitialPaddingTop=parseInt(window.getComputedStyle(t.$element,null).getPropertyValue("padding-top")),t.bParagraph="boolean"==typeof t.bParagraph&&t.bParagraph,t.bClampText="boolean"==typeof t.bClampText&&t.bClampText,t.bProcessInvisible="boolean"==typeof t.bProcessInvisible&&t.bProcessInvisible,t.iMinNbChars="number"==typeof t.iMinNbChars?t.iMinNbChars:10,t.iMaxNbChars="number"==typeof t.iMaxNbChars?Math.max(3,t.iMaxNbChars-3):t.sText.length,t.iAddedWidth="number"==typeof t.iAddedWidth?t.iAddedWidth:0,t.bSyncLineHeight="boolean"==typeof t.bSyncLineHeight&&t.bSyncLineHeight,t.iInitialFontSize=window.getComputedStyle(t.$element,null).getPropertyValue("font-size"),t.sInitialWhiteSpace=window.getComputedStyle(t.$element,null).getPropertyValue("white-space"),isNaN(t.iInitialFontSize)&&(t.iInitialFontSize=10),isNaN(t.iInitialPaddingBottom)&&(t.iInitialPaddingBottom=0),isNaN(t.iInitialPaddingTop)&&(t.iInitialPaddingTop=0),t.$hideOnResize&&(t.$hideOnResize.style.visibility="hidden"),"normal"!==t.sInitialWhiteSpace&&(t.$element.style["white-space"]="normal"),t.bParagraph?this.doResizeToFitParagraph(t):this.doResizeToFitHorizontal(t),t.bReapplyOnResize&&!this.toResize.some(function(i){return i===t||i.$element===e})&&this.toResize.push(t),t},doResizeToFitHorizontal:function(t){if($(t.$element).is(":visible")){e.info("doResizeToFitHorizontal",t.sText,t);var i=t.$targetElementWidth?window.getComputedStyle(t.$targetElementWidth):null,n=i?i.getPropertyValue("box-sizing"):"",s=i?parseInt(i.getPropertyValue("padding-left")):0,o=i?parseInt(i.getPropertyValue("padding-right")):0;isNaN(s)&&(s=0),isNaN(o)&&(o=0);var a=i?t.$targetElementWidth.offsetWidth-("border-box"===n?s+o:0):0,r="number"==typeof t.iTargetWidth?t.iTargetWidth:"function"==typeof t.fnTargetWidth?t.fnTargetWidth():a;a>0&&a<r&&(r=a);var l=this.canvas.getContext("2d"),d=window.getComputedStyle(t.$element,null),u=d.getPropertyValue("font-family"),c=d.getPropertyValue("font-weight"),f=d.getPropertyValue("text-transform"),h=t.sText;"uppercase"===f?h=h.toUpperCase():"lowercase"===f&&(h=h.toLowerCase());var p=t.iFontSizeMax===undefined?t.iInitialFontSize:t.iFontSizeMax;l.font=c+" "+p+t.sUnit+" "+u;for(var _=l.measureText(h),g=Math.abs(_.actualBoundingBoxLeft)+Math.abs(_.actualBoundingBoxRight)+t.iAddedWidth,m=t.iFontSizeMin?t.iFontSizeMin:1;p>m&&g>r;)!0,p-=.1,l.font=c+" "+p+t.sUnit+" "+u,_=l.measureText(h),g=Math.abs(_.actualBoundingBoxLeft)+Math.abs(_.actualBoundingBoxRight)+t.iAddedWidth;t.$element.style["font-size"]=p+t.sUnit,t.bSyncLineHeight&&(t.$element.style["line-height"]=t.$element.style["font-size"]);var b=_.actualBoundingBoxAscent+_.actualBoundingBoxDescent,v=b-t.$element.offsetHeight;v>0&&(t.$element.style["padding-bottom"]=v+"px",t.$element.style["padding-top"]=v+"px"),t.fnCallback&&t.fnCallback(t),v=v>0?v:0;var y=v+(t.iInitialPaddingBottom?t.iInitialPaddingBottom:0),D=v+(t.iInitialPaddingTop?t.iInitialPaddingTop:0);t.$element.style["padding-bottom"]=y+"px",t.$element.style["padding-top"]=D+"px",t.fnCallback&&t.fnCallback(),t.$hideOnResize&&(t.$hideOnResize.style.visibility="visible"),"normal"!==t.sInitialWhiteSpace&&(t.$element.style["white-space"]=t.sInitialWhiteSpace)}},isOverflowing:function(e,t){t="number"==typeof t?t:0;var i=this.isOverflowingWhere(e,t);return i.horizontal||i.vertical},isClamped:function(e){return e.scrollHeight>e.clientHeight},isOverflowingWhere:function(e,t){t="number"==typeof t?t:0;var i=window.getComputedStyle(e,null),n=i.overflow,s=i.webkitLineClamp,o=i.lineClamp;n&&"visible"!==n||(e.style.overflow="hidden"),s&&(e.style.webkitLineClamp="unset"),o&&(e.style.lineClamp="unset");var a={horizontal:Math.abs(e.clientWidth-e.scrollWidth)>t,vertical:Math.abs(e.clientHeight-e.scrollHeight)>t};return e.style.overflow=n,
s&&(e.style.webkitLineClamp=s),o&&(e.style.lineClamp=o),a},doResizeToFitParagraph:function(t,i){if($(t.$element).is(":visible")){e.info("doResizeToFitParagraph",t.sText,t);var n="em"===t.sUnit?.1:1,s=t.iFontSizeMin===undefined?1:t.iFontSizeMin,o=t.iFontSizeMax===undefined?"em"===t.sUnit?50:250:t.iFontSizeMax,a=t.$element;if(t.bTextClamped=!1,t.bClampText)if(i){if(!(i>t.iMinNbChars))return;i-=3;var r=t.sText.slice(0,i)+"...";a[t.sHTMLAttribute]=r,t.bTextClamped=!0}else a[t.sHTMLAttribute]=t.sText,t.sText.length>t.iMaxNbChars+3&&(a[t.sHTMLAttribute]=t.sText.slice(0,t.iMaxNbChars)+"...",t.bTextClamped=!0),i=a[t.sHTMLAttribute].length-3;for(;s<o;)if(s+=n,a.style.fontSize=s+t.sUnit,t.bSyncLineHeight&&(a.style.lineHeight=a.style.fontSize),this.isOverflowing(a)){a.style.fontSize=s-n+t.sUnit,t.bSyncLineHeight&&(a.style.lineHeight=a.style.fontSize);break}if(this.isOverflowing(a)&&t.bClampText){var l=a.scrollHeight/a.clientHeight;return l>1.2&&(i=parseInt(i/l)),void this.doResizeToFitParagraph(t,i)}t.fnCallback&&t.fnCallback(t)}},getElementNbLines:function(e){var t=window.getComputedStyle(e,null),i=parseFloat(t.lineHeight);return e.offsetHeight/i},capitalizeWord:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},highlightStringParts:function(e,t,i){if(i=void 0!==i)return e.replaceAll(t,"<span class='highlighted'>"+t+"</span>");var n=e.toLowerCase().split(t.toLowerCase());if(1===n.length)return e;for(var s="",o=0;o<n.length;o++){var a=n[o];s+=e.slice(0,a.length),e=e.slice(a.length),o!==n.length-1&&(s+="<span class='highlighted'>"+e.slice(0,t.length)+"</span>"),e=e.slice(t.length)}return s}},new i}),define("skins/common/form/login/standard",["static/log","config/main","lib/tools","skins/form/validator","./base","./btn_actions"],function(e,t,i,n,s,o){var a=t.dyn.show_premium_info_frame?"with-premium-info-frame":"",r=t.dyn.show_premium_discount;r&&(a+=" signin-offer-ribbon-christmas-23");var l=function(){s.apply(this,["signin-popup-form "+a+" "+t.dyn.pagefilter+" "+t.dyn.locale]),this.signup_disp=null,this.signinblocks=null,this.signupblocks=null,this.$loginDynamicBlock=null,this.signupblocks_always_visible=null,this.signupdetails=null,this.signupstep2=null,this.lostpwdblocks=null,this.login2signup=null,this.signup2login=null,this.signup2nextbtn=null,this.step1_error=null,this.infopanel=null,this.not_yet_member=null,this.bHasPremiumSub=!1;var i=this;$(document).on("signupform.submit.completed",function(){var t=i.last_reqjs;e.debug_("%cstandard --- CONSTRUCTOR --- on signupform.submit.completed","color:cornflowerblue;",s,t),t.form_disp="signup",i.onFormLoaded(i.validators["signup-form"].target.contents().find("#iframe-content").html(),t)}),$(document).on("signupform.submit.validated",function(t){if(e.debug_("%cstandard --- CONSTRUCTOR --- on signupform.submit.validated","color:cornflowerblue;",t),i.on_success)return void i.on_success(t.referer);window.location.href=t.referer})};return l.prototype=new s,l.prototype.getType=function(){return"standard"},l.prototype.doToggleForms=function(e){var t=this,s=this.signinblocks.parent().css("position","relative"),o=this.signinblocks,a=this.signinblocks;if(!this.signupblocks_always_visible&&this.signupblocks.is(":visible")?o=this.signupblocks:this.$loginDynamicBlock.is(":visible")?o=this.$loginDynamicBlock:this.lostpwdblocks.is(":visible")&&(o=this.lostpwdblocks),this.signupblocks_always_visible||"signup"!==e.form_disp?"login_dynamic"===e.form_disp?a=this.$loginDynamicBlock:"lostpassword"===e.form_disp&&(a=this.lostpwdblocks):a=this.signupblocks,!o.is(a)){this.switching=!0;var r=Math.floor(o.innerWidth()/s.width()*100),l=o.height();r=r>=99?"100%":r>=83?"83.33333333%":r>=66?"66.66666666%":r>=58?"58.33333333%":r>=50?"50%":"41.66666667%",a.css({overflow:"hidden",display:"block",opacity:.01}).removeClass("hidden");var d=a.height();a.css("width",r).height(l).animate({opacity:1,height:d+"px"},"slow",function(){a.width("").height("")}),o.height(l).css({position:"absolute",top:0,left:0}).animate({opacity:0,height:d+"px"},"slow",function(){o.css({position:"static",top:"auto",left:"auto",height:"",display:"none"}),t.infopanel.css("float","left"),t.switching=!1})}if(this.bHasPremiumSub||(this.login2signup.toggleClass("hidden","signup"===e.form_disp),this.signup2login.toggleClass("hidden","signup"!==e.form_disp)),this.not_yet_member.toggleClass("hidden","signup"===e.form_disp||"login_dynamic"===e.form_disp),!this.switching&&this.signupblocks.length>0){var u=this.signupdetails,c=this.signupdetails;this.signupstep2.is(":visible")&&(u=this.signupstep2),"step2"===this.signup_disp&&(c=this.signupstep2),u.is(c)||(u.toggleClass("hidden"),c.toggleClass("hidden"),this.bHasPremiumSub?this.signupblocks.toggleClass("col-xs-12 col-xs-6 col-md-5"):this.signupblocks.toggleClass("col-xs-12 col-xs-7 col-md-6"),this.infopanel.toggleClass("hidden","step2"===this.signup_disp),i.scrollTo($("body")))}if(this.signupblocks_always_visible&&(this.createOrRefreshValidator("signup-form",e.signup_validation_rules,{no_init_validate:!0}),!0),"signin"===e.form_disp)return void this.createOrRefreshValidator("signin-form",e.signin_validation_rules,{no_init_validate:!0});if("lostpassword"===e.form_disp)return void($("#lost-password-form").length>0&&this.createOrRefreshValidator("lost-password-form",e.lostpwd_validation_rules,{no_init_focus:!0,no_init_validate:!0}));if("login_dynamic"===e.form_disp){var f=$("#login-dynamic-form-block form").prop("id");return void this.createOrRefreshValidator(f,e.login_dynamic_validation_rules,{no_init_validate:!0})}if(!this.signupblocks_always_visible){var h=this.createOrRefreshValidator("signup-form",e.signup_validation_rules,{no_init_validate:!0,append_errors_shortcuts_to:"#signup-form"});h&&(this.step1_error=!1,h.errorChanged=function(e,i){n.prototype.errorChanged.apply(this,[e,i]),t.step1_error=!1;for(var s in this.validators){var o=this.validators[s];if(!o.isValid()&&o.id&&"signup-form_details_"===o.id.substring(0,20)){t.step1_error=o;break}}t.signup2nextbtn.toggleClass("has-verror",!1!==t.step1_error)},h.errorChanged(!1,null))}},l.prototype.onFormLoaded=function(e,t,i){"undefined"!=typeof this.oBtnActions&&"function"==typeof this.oBtnActions.init&&this.oBtnActions.init(),s.prototype.onFormLoaded.apply(this,[e,t,i]),r&&require(["skins/common/design/text"],function(e){e.resizeToFitHorizontal($("#premium-info-frame .offer-ribbon-valentine-23-hook .resize")[0],{iFontSizeMax:40,fnTargetWidth:function(){var e=$("#premium-info-frame .offer-ribbon-valentine-23-hook"),t=parseInt(e.css("padding-left")),i=parseInt(e.css("padding-right"));isNaN(t)&&(t=0),isNaN(i)&&(i=0);var n=$("body").outerWidth()-220-t-i,s=$("#signin-popup-form").innerWidth()-t-i;return Math.min(n,s)},$targetElementWidth:$("#signin-popup-form")[0]}),e.resizeToFitHorizontal($("#premium-info-frame .offer-ribbon-valentine-23-annual .resize")[0],{iFontSizeMax:40,$targetElementWidth:$("#premium-info-frame .offer-ribbon-valentine-23-annual")[0]});var t=$(".offer-ribbon-christmas-23-label");if(t.length){var i=t.parent(),n=t.find(".discount"),s={iFontSizeMin:10,iFontSizeMax:30,fnTargetWidth:function(){return.95*(i.width()-n.width()-10)},$targetElementWidth:i[0]};e.resizeToFitHorizontal(t[0],s)}})},l.prototype.doSetupNodes=function(e){var t=this;this.signinblocks=$("#signin-form-block"),this.login2signup=$("#btn-login2signup"),this.signupblocks=$("#signup-form-block"),this.$loginDynamicBlock=$("#login-dynamic-form-block"),this.signupblocks_always_visible=this.signupblocks.hasClass("always-visible"),this.signup2login=$("#btn-signup2login"),this.signupdetails=$("#signup-form_details"),this.signupstep2=$("#signup-form_step2"),this.lostpwdblocks=$("#lostpassword-form-block"),this.infopanel=$(".info-pannel-frame"),this.not_yet_member=this.infopanel.find(".no-create-account"),this.bHasPremiumSub=$("#premium-info-frame").length>0,$("#signup-form_step2_profilepic .step2-profile-pic img").on("click",function(){$("#signup-form_step2_profilepic_file").click()}),this.signup_disp="details";var i=this.signupblocks.find(".has-error");i.length>0&&(this.signup_disp=i.first().parents("fieldset").last().prop("id").substring(12)),$("#btn-login2create,#btn-login2signup,#btn-signup2login,#btn-create2login").on("click",function(i){i.preventDefault(),e.form_disp="signup"!==e.form_disp?"signup":"signin",t.toggleForms(e)}),this.oBtnActions=new o(!1,t),this.oBtnActions.init(),$("#btn-lostpassword2login").on("click",function(i){i.preventDefault(),e.form_disp="signin",t.toggleForms(e)}),$("#btn-login2lostpassword").on("click",function(i){i.preventDefault(),e.form_disp="lostpassword",t.toggleForms(e)}),this.signup2nextbtn=$("#btn-signup2next,#btn-signup2prev").on("click",function(i){if(i.preventDefault(),"details"===t.signup_disp&&t.step1_error)return t.validators["signup-form"].showErrorsShortcuts(),void(t.step1_error.focus&&t.step1_error.focus());t.signup_disp="details"===t.signup_disp?"step2":"details",t.toggleForms(e)});var n=this.signupblocks.find("input,select").on("keydown",function(e){if(13===e.which){var t=n.index(this);if(t===n.length-1)return;return n.eq(t+1).focus(),e.preventDefault(),!1}})},l}),define("lib/helpers/scrollbar",["lib/tools"],function(e){var t=window.requestAnimationFrame||window.setImmediate||function(e){return setTimeout(e,0)},i=function(t){e.initParams(this,t||{},n);var s=$(this.oOptions.$Container);if(s&&s.length&&!s.data("xscroll-init")){if(this.sMode=this.oOptions.sMode,this.oTimerOnResize=null,this.bAutoHide=this.oOptions.bAutoHide,this.oAutoHideTimer=null,this.$container=$('<div class="'+i.S_MAIN_CONTAINER_CLASS+(this.bAutoHide?" xscroll-autohide":"")+'"></div>'),this.$content=$('<div class="xscroll-content"></div>'),this.$container.insertBefore(s).append(this.$content),this.$content.append(s),this.$VerticalBar=null,this.$VerticalGrab=null,this.$HorizontalBar=null,this.$HorizontalGrab=null,this.iLastPageContentY=null,this.bContentMouseGrabMoovingY=!1,this.iLastPageContentX=null,this.bContentMouseGrabMoovingX=!1,this.bPreventMouseClickContent=!1,this.iLastPageSBarY=null,this.iLastPageSBarX=null,this.iSavedLeftScrollDeltaMouseMove=0,this.iSavedTopScrollDeltaMouseMove=0,$(window).on("resize",this,this.onResize),this.$content.on("scroll",this,this.onScroll).on("mouseenter",this,this.onMouseEnter),this.bAutoHide&&this.$container.on("touchstart touchmove mouseenter mousemove wheel",this,this.onInteract),"undefined"!=typeof MutationObserver){var o=this;new MutationObserver(function(){o.onMutation()}).observe(this.$content[0],{childList:!0,subtree:!0})}this.oLastOnScrollReturn=null,this.updateView(),s.data("xscroll-init",1),this.bAutoHide&&this.onInteract({data:this}),this.onScrollCallback()}};i.S_MAIN_CONTAINER_CLASS="xscroll-container",i.S_MOVE_HORIZONTAL="horizontal",i.S_MOVE_VERTICAL="vertical",i.S_MODE_HORIZONTAL=i.S_MOVE_HORIZONTAL,i.S_MODE_VERTICAL=i.S_MOVE_VERTICAL,i.S_MODE_AUTO="auto",i.I_MOUSE_GRAB_LIMIT=50;var n={oOptions:{$Container:undefined,sMode:i.S_MODE_AUTO,bAutoHide:!0,iAutoHideDelayMs:3e3,iMinGrabSizePx:50,iMaxGrabSizePercent:95,iBarMarginPx:5,bNoAutoHideWhileGrabbing:!0,bNoAutoHideWhileHovering:!0,bCanMouseGrabToScroll:!1},oListeners:{fnOnScroll:null}};return i.prototype={updateContentInfos:function(e){var t=this.getContainerInfos(),i=!1;if("object"!=typeof t)return!1;if("object"==typeof this.oContainerInfos){for(var n in t)if("undefined"==typeof this.oContainerInfos[n]||this.oContainerInfos[n]!==t[n]){i=!0;break}}else i=!0;return(i||e)&&(this.oContainerInfos=t),i},forceUpdateView:function(){this.updateContentInfos(!0),this.updateView(!0)},updateView:function(e){var t=this,n=!!e||this.updateContentInfos();if(this.$content&&this.$content.length){if(!this.bFirstDraw){if(setTimeout(function(){t.updateView()},50),!this.$content.is(":visible"))return;this.bFirstDraw=!0}var s=this.$content.is(":visible")?2e3:1e4;this.oUpdateViewTimeout||(this.oUpdateViewTimeout=setTimeout(function(){t.oUpdateViewTimeout=null,t.updateView()},s)),n&&(this.oContainerInfos.iScrollHeight>this.oContainerInfos.iHeight?this.sMode!==i.S_MODE_AUTO&&this.sMode!==i.S_MODE_VERTICAL||this.updateVerticalBar(!0):this.deleteVerticalBar(),this.oContainerInfos.iScrollWidth>this.oContainerInfos.iWidth?this.sMode!==i.S_MODE_AUTO&&this.sMode!==i.S_MODE_HORIZONTAL||this.updateHorizontalBar(!0):this.deleteHorizontalBar(),this.updateGrabPos(),this.onScrollCallback())}},getCurrentScrollState:function(){if(this.updateContentInfos(),!this.oContainerInfos)throw new Error("no container information");return{$scrollableContent:this.$content,oHorizontal:{bHasScroll:this.oContainerInfos.iScrollWidth!==this.oContainerInfos.iWidth,iScroll:this.oContainerInfos.iScrollLeft,iScrollInvert:this.oContainerInfos.iScrollWidth-this.oContainerInfos.iWidth-this.oContainerInfos.iScrollLeft,iScrollSize:this.oContainerInfos.iScrollWidth,iSize:this.oContainerInfos.iWidth,iPercent:this.getHorizontalScrollPerc(!0)},oVertical:{bHasScroll:this.oContainerInfos.iScrollHeight!==this.oContainerInfos.iHeight,iScroll:this.oContainerInfos.iScrollTop,iScrollInvert:this.oContainerInfos.iScrollHeight-this.oContainerInfos.iHeight-this.oContainerInfos.iScrollTop,iScrollSize:this.oContainerInfos.iScrollHeight,iSize:this.oContainerInfos.iHeight,iPercent:this.getVerticalScrollPerc(!0)}}},onScrollCallback:function(e){if("function"==typeof this.oListeners.fnOnScroll&&this.$content&&this.$content.length){var t,i=this.getCurrentScrollState(),n=!0===e||null===this.oLastOnScrollReturn;if(!n)for(t in i.oHorizontal)if(i.oHorizontal[t]!==this.oLastOnScrollReturn[t]){n=!0;break}if(!n)for(t in i.oVertical)if(i.oVertical[t]!==this.oLastOnScrollReturn[t]){n=!0;break}n&&(this.oLastOnScrollReturn=i,"function"==typeof this.oListeners.fnOnScroll&&this.oListeners.fnOnScroll(i))}},updateGrabPos:function(){this.sMode!==i.S_MODE_AUTO&&this.sMode!==i.S_MODE_VERTICAL||this.updateVerticalGrabPos(),this.sMode!==i.S_MODE_AUTO&&this.sMode!==i.S_MODE_HORIZONTAL||this.updateHorizontalGrabPos()},getElemInfos:function(e){var t=e.outerHeight(),i=e.outerWidth(),n=e.offset(),s=n.left,o=s+i,a=n.top;return{iBottom:a+t,iLeft:s,iRight:o,iTop:a,iHeight:t,iWidth:i}},getContainerInfos:function(){if(!this.$content||!this.$content.length)return!1;var e=this.getElemInfos(this.$content);return e.iScrollLeft=this.$content.scrollLeft(),e.iScrollTop=this.$content.scrollTop(),e.iScrollHeight=this.$content[0].scrollHeight,e.iScrollWidth=this.$content[0].scrollWidth,e.iScrollHeightRatio=e.iHeight===e.iScrollHeight?1:(e.iHeight-2*this.oOptions.iBarMarginPx)/e.iScrollHeight,e.iScrollWidthRatio=e.iWidth===e.iScrollWidth?1:(e.iWidth-2*this.oOptions.iBarMarginPx)/e.iScrollWidth,e},getContainer:function(){return this.$container},createVerticalBar:function(){this.$VerticalBar&&this.$VerticalBar.length||(this.$VerticalBar=$('<div class="xscroll-v"></div>'),this.$VerticalGrab=$('<div class="xscroll-grab"></div>'),this.$VerticalBar.on("mousedown",this,this.onMouseDownScrollBarVertical).on("touchstart",this,this.onMouseDownScrollBarVertical).append(this.$VerticalGrab),this.oOptions.bCanMouseGrabToScroll&&this.$content.off("mousedown",this.onMouseDownContentVertical).on("mousedown",this,this.onMouseDownContentVertical),this.$container.addClass("xscroll-v-added").append(this.$VerticalBar))},getVerticalScrollPerc:function(e){if(!e){if(!this.updateContentInfos())return 0;e=!0}return Math.round(this.oContainerInfos.iScrollTop/(this.oContainerInfos.iScrollHeight-this.oContainerInfos.iHeight)*100*1e3)/1e3},getVerticalScrollRatio:function(e){if(!e){if(!this.updateContentInfos())return 0;e=!0}return Math.round(100*this.oContainerInfos.iScrollHeightRatio*1e4)/1e4},getVerticalGrabScrollPerc:function(e){var t=this.getVerticalScrollRatio(e),i=Math.round((this.oContainerInfos.iHeight-2*this.oOptions.iBarMarginPx-this.oOptions.iMinGrabSizePx)/(this.oContainerInfos.iScrollHeight-this.oContainerInfos.iHeight)*100*1e4)/1e4;return Math.min(t,i)},updateVerticalGrabPos:function(e){if(this.$VerticalGrab&&this.$VerticalGrab.length){if(!e){if(!this.updateContentInfos())return;e=!0}var t=this.getVerticalGrabScrollPerc(e);this.$VerticalGrab.css({top:Math.floor(this.oContainerInfos.iScrollTop*t/100)+this.oOptions.iBarMarginPx+"px"}),this.onScrollCallback()}},updateVerticalBar:function(e){if(this.createVerticalBar(),!e){if(!this.updateContentInfos())return;e=!0}this.$VerticalBar.css({height:this.oContainerInfos.iHeight});var t=this.getVerticalScrollRatio(e);this.iGrabHeight=Math.ceil(this.oContainerInfos.iHeight*t/100),this.iGrabHeight<this.oOptions.iMinGrabSizePx&&(this.iGrabHeight=this.oOptions.iMinGrabSizePx),this.iGrabHeight>this.oContainerInfos.iHeight*this.oOptions.iMaxGrabSizePercent/100&&(this.iGrabHeight=Math.ceil(this.oContainerInfos.iHeight*this.oOptions.iMaxGrabSizePercent/100)),this.$VerticalGrab.css({height:this.iGrabHeight}),this.updateVerticalGrabPos(e)},deleteVerticalBar:function(){this.$VerticalBar&&this.$VerticalBar.length&&(this.$container.removeClass("xscroll-v-added"),this.$VerticalBar.remove(),this.$VerticalBar.off("mousedown",this.onMouseDownScrollBarVertical).off("touchstart",this.onMouseDownScrollBarVertical),this.$VerticalBar=null,this.$VerticalGrab=null)},createHorizontalBar:function(){this.$HorizontalBar&&this.$HorizontalBar.length||(this.$HorizontalBar=$('<div class="xscroll-h"></div>'),this.$HorizontalGrab=$('<div class="xscroll-grab"></div>'),this.$HorizontalBar.on("mousedown",this,this.onMouseDownScrollBarHorizontal).on("touchstart",this,this.onMouseDownScrollBarHorizontal).append(this.$HorizontalGrab),this.oOptions.bCanMouseGrabToScroll&&this.$content.off("mousedown",this.onMouseDownContentHorizontal).on("mousedown",this,this.onMouseDownContentHorizontal),this.$container.addClass("xscroll-h-added").append(this.$HorizontalBar))},getHorizontalScrollPerc:function(e){if(!e){if(!this.updateContentInfos())return 0;e=!0}return Math.round(this.oContainerInfos.iScrollLeft/(this.oContainerInfos.iScrollWidth-this.oContainerInfos.iWidth)*100*1e3)/1e3},getHorizontalScrollRatio:function(e){if(!e){if(!this.updateContentInfos())return 0;e=!0}return Math.round(100*this.oContainerInfos.iScrollWidthRatio*1e4)/1e4},getHorizontalGrabScrollPerc:function(e){var t=this.getHorizontalScrollRatio(e),i=Math.round((this.oContainerInfos.iWidth-2*this.oOptions.iBarMarginPx-this.oOptions.iMinGrabSizePx)/(this.oContainerInfos.iScrollWidth-this.oContainerInfos.iWidth)*100*1e4)/1e4;return Math.min(t,i)},updateHorizontalGrabPos:function(e){if(this.$HorizontalGrab&&this.$HorizontalGrab.length){if(!e){if(!this.updateContentInfos())return;e=!0}var t=this.getHorizontalGrabScrollPerc(e);this.$HorizontalGrab.css({left:Math.floor(this.oContainerInfos.iScrollLeft*t/100)+this.oOptions.iBarMarginPx+"px"}),this.onScrollCallback()}},updateHorizontalBar:function(e){if(this.createHorizontalBar(),!e){if(!this.updateContentInfos())return;e=!0}this.$HorizontalBar.css({width:this.oContainerInfos.iWidth});var t=this.getHorizontalScrollRatio(e);this.iGrabWidth=Math.ceil(this.oContainerInfos.iWidth*t/100),this.iGrabWidth<this.oOptions.iMinGrabSizePx&&(this.iGrabWidth=this.oOptions.iMinGrabSizePx),this.iGrabWidth>this.oContainerInfos.iWidth*this.oOptions.iMaxGrabSizePercent/100&&(this.iGrabWidth=Math.ceil(this.oContainerInfos.iWidth*this.oOptions.iMaxGrabSizePercent/100)),this.$HorizontalGrab.css({width:this.iGrabWidth}),this.updateHorizontalGrabPos(e)},deleteHorizontalBar:function(){this.$HorizontalBar&&this.$HorizontalBar.length&&(this.$container.removeClass("xscroll-h-added"),this.$HorizontalBar.remove(),this.$HorizontalBar.off("mousedown",this.onMouseDownScrollBarHorizontal).off("touchstart",this.onMouseDownScrollBarHorizontal),this.$HorizontalBar=null,this.$HorizontalGrab=null)},destroy:function(){this.deleteVerticalBar(),this.deleteHorizontalBar(),$(document).off("mousemove",this.onMouseMoveScrollBar).off("mouseup",this.onMouseUpScrollBar).off("touchmove",this.onMouseMoveScrollBar).off("touchend",this.onMouseUpScrollBar),$(window).off("resize",this.onResize),this.$content&&this.$content.off("scroll",this.onScroll).off("mouseenter",this.onMouseEnter),this.$container&&this.$container.off("touchstart touchmove mouseenter mousemove",this.onInteract)},isFromBarElementOrContainer:function(e){return!(!(e=$(e))||!e.length)&&(e.is(this.$container)||e.is(this.$VerticalBar)||e.is(this.$VerticalGrab)||e.is(this.$HorizontalBar)||e.is(this.$HorizontalGrab))},scrollLeft:function(e,t){this.sMode!==i.S_MODE_AUTO&&(this.sMode,i.S_MODE_HORIZONTAL);var n=this.getContainerInfos();!0===t&&(e=Math.max(0,Math.min(100,e)),e=Math.round((n.iScrollWidth-n.iWidth)*e/100)),e=Math.max(0,Math.min(n.iScrollWidth,e)),this.$content&&this.$content.length&&this.$content.scrollLeft(e),this.updateHorizontalGrabPos()},scrollTop:function(e,t){this.sMode!==i.S_MODE_AUTO&&(this.sMode,i.S_MODE_VERTICAL);var n=this.getContainerInfos();!0===t&&(e=Math.max(0,Math.min(100,e)),e=Math.round((n.iScrollHeight-n.iHeight)*e/100)),e=Math.max(0,Math.min(n.iScrollHeight,e)),this.$content&&this.$content.length&&this.$content.scrollTop(e),this.updateVerticalGrabPos()},onInteract:function(e){var t=e.data;if(t.$container&&t.$container.length){t.oAutoHideTimer&&(clearTimeout(t.oAutoHideTimer),t.oAutoHideTimer=null),t.$container.addClass("xscroll-autohide-show");var i=function(){var e=!1;t.$container&&t.$container.length&&(t.oOptions.bNoAutoHideWhileHovering&&t.$container&&t.$container.is(":hover")&&(e=!0),t.oOptions.bNoAutoHideWhileGrabbing&&(t.$VerticalBar&&t.$VerticalBar.hasClass("is-grabbed")||t.$HorizontalBar&&t.$HorizontalBar.hasClass("is-grabbed"))&&(e=!0),e?t.oAutoHideTimer=setTimeout(i,t.oOptions.iAutoHideDelayMs):t.$container.removeClass("xscroll-autohide-show"))};t.oAutoHideTimer=setTimeout(i,t.oOptions.iAutoHideDelayMs)}},onMouseEnter:function(e){e.data.updateGrabPos()},onMutation:function(){var e=this,t=e.updateContentInfos();window.savediW=e.oContainerInfos.iWidth,window.savediSW=e.oContainerInfos.iScrollWidth,window.savediH=e.oContainerInfos.iHeight,window.savediSH=e.oContainerInfos.iScrollHeight,setTimeout(function(){e.updateView(t)},50)},onResize:function(e){var t=e.data;t.oTimerOnResize?clearTimeout(t.oTimerOnResize):t.updateView(),t.oTimerOnResize=setTimeout(function(){t.updateView(),t.oTimerOnResize=null},500)},onScroll:function(e){e.data.updateGrabPos()},onMouseDownContentVertical:function(e){var t=e.data;return t.iLastPageContentY=e.pageY,t.bContentMouseGrabMoovingY=!1,null===t.iLastPageContentX&&($(document).on("mousemove",t,t.onMouseMoveContent).on("mouseup",t,t.onMouseUpContent),t.addOnMouseClickContent()),!1},onMouseDownContentHorizontal:function(e){var t=e.data;return t.iLastPageContentX=e.pageX,t.bContentMouseGrabMoovingX=!1,null===t.iLastPageContentY&&($(document).on("mousemove",t,t.onMouseMoveContent).on("mouseup",t,t.onMouseUpContent),t.addOnMouseClickContent()),!1},onMouseMoveContent:function(e){var t=e.data;null===t.iLastPageContentY||t.bContentMouseGrabMoovingX?null!==t.iLastPageContentX&&(t.bContentMouseGrabMoovingX||Math.abs(t.iLastPageContentX-e.pageX)>=i.I_MOUSE_GRAB_LIMIT&&(t.bContentMouseGrabMoovingX=!0),t.bContentMouseGrabMoovingX&&(t.scrollLeft(t.$content.scrollLeft()+t.iLastPageContentX-e.pageX,!1),t.iLastPageContentX=e.pageX)):(t.bContentMouseGrabMoovingY||Math.abs(t.iLastPageContentY-e.pageY)>=i.I_MOUSE_GRAB_LIMIT&&(t.bContentMouseGrabMoovingY=!0),t.bContentMouseGrabMoovingY&&(t.scrollTop(t.$content.scrollTop()+t.iLastPageContentY-e.pageY,!1),t.iLastPageContentY=e.pageY))},onMouseUpContent:function(e){var t=e.data;if($(document).off("mousemove",t.onMouseMoveContent).off("mouseup",t.onMouseUpContent),t.iLastPageContentX=null,t.iLastPageContentY=null,!t.bContentMouseGrabMoovingY&&!t.bContentMouseGrabMoovingX)return void t.removeOnMouseClickContent();$(e.target).hasClass(i.S_MAIN_CONTAINER_CLASS)||$(e.target).parents("."+i.S_MAIN_CONTAINER_CLASS).length?(t.bPreventMouseClickContent=!0,setTimeout(function(){t.bPreventMouseClickContent&&t.removeOnMouseClickContent()},200)):t.removeOnMouseClickContent(),e.preventDefault(),e.stopPropagation(),t.bContentMouseGrabMoovingY=!1,t.bContentMouseGrabMoovingX=!1},addOnMouseClickContent:function(){if(!this.fnMouseClickContent){this.bPreventMouseClickContent=!1;var e=this;this.fnMouseClickContent=function(t){t.data=e,e.onMouseClickContent(t)},$(document)[0].addEventListener("click",this.fnMouseClickContent,!0)}},removeOnMouseClickContent:function(){this.bPreventMouseClickContent=!1,this.fnMouseClickContent&&($(document)[0].removeEventListener("click",this.fnMouseClickContent,!0),this.fnMouseClickContent=null)},onMouseClickContent:function(e){var t=e.data;t.bPreventMouseClickContent&&(e.preventDefault(),e.stopPropagation()),t.removeOnMouseClickContent()},onMouseDownScrollBarVertical:function(e){var t=e.data;return t.sCurrentMove=i.S_MOVE_VERTICAL,t.iLastPageSBarY="undefined"!=typeof e.pageY?e.pageY:e.originalEvent.touches[0].pageY,t.$VerticalBar.addClass("is-grabbed"),$(document).on("mousemove",t,t.onMouseMoveScrollBar).on("mouseup",t,t.onMouseUpScrollBar).on("touchmove",t,t.onMouseMoveScrollBar).on("touchend",t,t.onMouseUpScrollBar),!1},onMouseDownScrollBarHorizontal:function(e){var t=e.data;t.sCurrentMove=i.S_MOVE_HORIZONTAL,t.iLastPageSBarX="undefined"!=typeof e.pageX?e.pageX:e.originalEvent.touches[0].pageX,t.$HorizontalBar.addClass("is-grabbed");var n=t.getElemInfos(t.$HorizontalGrab),s=0;return t.iLastPageSBarX<n.iLeft?s=t.iLastPageSBarX-n.iLeft:t.iLastPageSBarX>n.iLeft+n.iWidth&&(s=t.iLastPageSBarX-(n.iLeft+n.iWidth)),0!==s&&(t.$content.scrollLeft(t.$content.scrollLeft()+s/t.oContainerInfos.iScrollWidthRatio),t.updateHorizontalGrabPos()),$(document).on("mousemove",t,t.onMouseMoveScrollBar).on("mouseup",t,t.onMouseUpScrollBar).on("touchmove",t,t.onMouseMoveScrollBar).on("touchend",t,t.onMouseUpScrollBar),!1},onMouseMoveScrollBar:function(e){var n,s=e.data;if(s.sCurrentMove===i.S_MOVE_VERTICAL){var o="undefined"!=typeof e.pageY?e.pageY:e.originalEvent.touches[0].pageY;n=o-s.iLastPageSBarY,s.iLastPageSBarY=o}else{var a="undefined"!=typeof e.pageX?e.pageX:e.originalEvent.touches[0].pageX;n=a-s.iLastPageSBarX,s.iLastPageSBarX=a}t(function(){var e,t;s.sCurrentMove===i.S_MOVE_VERTICAL?(e=n/s.oContainerInfos.iScrollHeightRatio+s.iSavedTopScrollDeltaMouseMove,t=Math.round(e),s.$content.scrollTop(s.$content.scrollTop()+t),s.iSavedTopScrollDeltaMouseMove=t-e,s.updateVerticalGrabPos()):(e=n/s.oContainerInfos.iScrollWidthRatio+s.iSavedLeftScrollDeltaMouseMove,t=Math.round(e),s.$content.scrollLeft(s.$content.scrollLeft()+t),s.iSavedLeftScrollDeltaMouseMove=t-e,s.updateHorizontalGrabPos())})},onMouseUpScrollBar:function(e){var t=e.data;e.preventDefault(),e.stopPropagation(),t.sCurrentMove===i.S_MOVE_VERTICAL?t.$VerticalBar.removeClass("is-grabbed"):t.$HorizontalBar.removeClass("is-grabbed"),$(document).off("mousemove",t.onMouseMoveScrollBar).off("mouseup",t.onMouseUpScrollBar).off("touchmove",t.onMouseMoveScrollBar).off("touchend",t.onMouseUpScrollBar)}},i}),define("text!skins/common/dropdown/tpls/dropdown.mustache",[],function(){return'<div class="{{getClasses}}{{#needsScrollbar}} with-scrollbar{{/needsScrollbar}}">\n\t<div class="x-dropdown-selected{{#oOptions.bOneLineSelected}} x-dropdown-selected-one-line{{/oOptions.bOneLineSelected}}">\n\t\t{{#getDefaultOptionData}}\n\t\t<div class="x-dropdown-selected-option" data-x-value="{{{ key }}}">\n\t\t\t<span class="icon-f {{#oOptions.sAlwaysIcon}}{{{ oOptions.sAlwaysIcon }}}{{/oOptions.sAlwaysIcon}}{{^oOptions.sAlwaysIcon}}{{#option.icon}}{{{ . }}}{{/option.icon}}{{^option.icon}}hidden{{/option.icon}}{{/oOptions.sAlwaysIcon}}"></span>\n\t\t\t<span class="x-dropdown-value">{{{ option.value }}}</span>\n\t\t\t<span class="x-dropdown-caret icon-f"></span>\n\t\t</div>\n\t\t{{/getDefaultOptionData}}\n\t\t<div class="x-dropdown-search-container hidden">\n\t\t\t<span class="x-dropdown-search-icon icon-f icf-search-v2"></span>\n\t\t\t<input type="text" class="x-dropdown-search-input" placeholder="{{{ oOptions.sSearchPlaceholder }}}"/>\n\t\t\t<span class="x-dropdown-search-reset icon-f icf-close"></span>\n\t\t</div>\n\t</div>\n\t<div class="{{getOptionsClasses}}">\n\t\t<div class="x-options-container">\n\t\t\t{{{ getOptionsHTML }}}\n\t\t</div>\n\t</div>\n</div>\n'}),define("text!skins/common/dropdown/tpls/dropdown_option.mustache",[],function(){return'<div class="x-dropdown-option{{#option.class}} {{{ option.class }}}{{/option.class}}{{#option.hidden}} hidden{{/option.hidden}}{{#option.disabled}} disabled{{/option.disabled}}{{#option.selected}} selected{{/option.selected}}{{#option.action_on_disabled}} with-action{{/option.action_on_disabled}}" data-x-value="{{{ key }}}">\n\t<span class="icon-f {{#option.icon}}{{{ . }}}{{/option.icon}}"></span>\n\t<span class="x-dropdown-value">{{{ option.value }}}</span>\n</div>'}),define("text!skins/common/dropdown/tpls/dropdown_sep.mustache",[],function(){return'<div class="x-dropdown-sep{{^text}} no-text{{/text}}">\n\t{{#text}}\n\t\t<span class="icon-f icf-filter"></span>\n\t\t<span class="x-dropdown-sep-text">{{{ text }}}</span>\n\t{{/text}}\n</div>'}),define("text!skins/common/dropdown/tpls/dropdown_empty_search_result.mustache",[],function(){return'<div class="x-dropdown-empty-search{{^text}} no-text{{/text}}">\n\t{{#text}}<span class="x-dropdown-empty-search-text">{{{ text }}}</span>{{/text}}\n</div>'}),define("skins/common/dropdown/dropdown",["static/log","lib/i18n!front","lib/tools","mustache","lib/helpers/scrollbar","text!./tpls/dropdown.mustache","text!./tpls/dropdown_option.mustache","text!./tpls/dropdown_sep.mustache","text!./tpls/dropdown_empty_search_result.mustache"],function(e,t,i,n,s,o,a,r,l){var d=function(t){var n=this;if(i.initParams(this,t||{},d.GET_DEFAULT_OPTIONS()),!this.oOptions.$container)return void e.error("dropdown --- missing $container");this.oOptions.$container=$(this.oOptions.$container),this.oOptions.aClasses.push("x-dropdown"),this.oOptions.aOptionsClasses.push("x-dropdown-select"),this.oOptions.aOptionsClasses.push("max-items-"+this.oOptions.iNbMaxDisplayedOptions),this.oOptions.bOptionsContainerOverflow&&(this.oOptions.aOptionsClasses.push("allow-overflow"),this.oOptions.bOptionsContainerOverflowRight&&this.oOptions.aOptionsClasses.push("overflow-right")),this.oOptions.bStyleLeft&&this.oOptions.aClasses.push("style-left"),this.oOptions.bStyleLeftMobile&&this.oOptions.aClasses.push("style-left-mobile"),this.isOneOptionMode()&&this.oOptions.aClasses.push("one-option-button"),this.redraw(),this.$searchInputContainer=this.oOptions.$container.find(".x-dropdown-search-container"),this.$searchInputReset=this.oOptions.$container.find(".x-dropdown-search-reset"),this.$searchInput=this.oOptions.$container.find(".x-dropdown-search-input"),this.initSearchInput(),this.$selectedOption=this.oOptions.$container.find(".x-dropdown-selected-option"),document.addEventListener("click",function(e){$(e.target).closest(n.$dropdown).length||n.close()})};return d.DEFAULT_KEY="default",d.SKIN={PURCHASE:"purchase",DEFAULT:"default"},d.DEFAULT_OPTIONS={oOptions:{$container:undefined,aKeyValuesLists:[],sSkin:d.SKIN.PURCHASE,aClasses:[],aOptionsClasses:[],oDefaultOption:undefined,iNbMaxDisplayedOptions:4,bCloseOnSelect:!0,bStyleLeft:!1,bStyleLeftMobile:!1,sAlwaysIcon:undefined,bSelectOnFirstReclick:!1,bSelectOnFirstReclickOpen:!1,bHideAlreadySelected:!1,bHighlightAlreadySelected:!0,bAlwaysScrollbar:!1,bOneLineSelected:!1,bNoDropdownForOneOption:!1,bEnableSearch:!1,bAutoToggleSearch:!1,sSearchPlaceholder:undefined,bOptionsContainerOverflow:!1,bOptionsContainerOverflowRight:!1},oTemplates:{sTplDropdown:o,sTplDropdownOption:a,sTplDropdownSep:r,sTplEmptySearchResult:l},oListeners:{fnOnSelectItem:undefined}},d.GET_DEFAULT_OPTIONS=function(){return d.DEFAULT_OPTIONS},d.buildOption=function(e,t,i,n,s,o,a,r,l,d){return{key:e,value:t,icon:i,hidden:n,disabled:s,action_on_disabled:o,fake_select:a,"class":r,selected:l,unfiltered:d}},d.buildKeyValuesInfo=function(e,t,i,n,s){return{sGroupKey:t,sSepText:i,aKeyValues:e,bEnableSearch:n,bShowEmptySearchResult:void 0===s||s}},d.prototype={find:function(e){
return this.$dropdown.find(e)},getOptionData:function(e){return e?{key:e.key,option:e,selected:this.getDefaultOptionKey()===e.key?"selected":"",hidden:e.hidden?"hidden":""}:{}},parseKeyValuesMaps:function(){for(var t=0;t<this.oOptions.aKeyValuesLists.length;t++){var i=this.oOptions.aKeyValuesLists[t];i.oKeyValues=i.aKeyValues.reduce(function(t,i){return i.key?(t[i.key]=i,t):(e.error("dropdown --- parseKeyValuesMaps --- missing key in option",i),t)},{})}},checkKeyValuesHasVisible:function(e){return e.some(function(e){return!e.hidden})},getKeyValues:function(e,t){var n=this,s=e.sGroupKey?e.sGroupKey:d.DEFAULT_KEY,o=this.getSanitizedSearchInput(),a=this.oOptions.bEnableSearch;return this._getKeyValues||(this._getKeyValues={}),this._getKeyValues[s]&&!t?this._getKeyValues[s]:(this._getKeyValues[s]=e.aKeyValues.reduce(function(e,t,s){if(a&&o&&!0!==t.unfiltered){if(!i.cleanStr(t.value,!0).includes(o))return e}var t=n.getOptionData(t);return t.order=s,e.push(t),e},[]).sort(function(e,t){return e.option.disabled===t.option.disabled?e.order-t.order:e.option.disabled?1:-1}),this._getKeyValues[s])},getOptions:function(e){var t=this;return e.map(function(e){return t.getOptionHTML(e)}).join("")},getOptionsHTML:function(){for(var e=[],i=0;i<this.oOptions.aKeyValuesLists.length;i++){var s=this.oOptions.aKeyValuesLists[i],o=this.getKeyValues(s,!0),a=!s.bShowEmptySearchResult&&0===o.length;(s.sSepText||s.sGroupKey)&&!a&&this.checkKeyValuesHasVisible(s.aKeyValues)&&e.push(n.render(this.oTemplates.sTplDropdownSep,{text:s.sSepText})),e.push(this.getOptions(o)),!s.bShowEmptySearchResult||0!==o.length&&this.checkKeyValuesHasVisible(o)||e.push(n.render(this.oTemplates.sTplEmptySearchResult,{text:t.__("search.no_result")}))}return e.join("")},getClasses:function(){return this.oOptions.sSkin&&this.oOptions.aClasses.push(this.oOptions.sSkin),this.oOptions.aClasses.join(" ")},getOptionHTML:function(e){return n.render(this.oTemplates.sTplDropdownOption,e)},getOptionsClasses:function(){return this.oOptions.aOptionsClasses.join(" ")},getDropdownHTML:function(){return n.render(this.oTemplates.sTplDropdown,this)},findDefaultKeyValuesInfo:function(){return this.oOptions.aKeyValuesLists.find(function(e){return!e.sGroupKey})},findDefaultOption:function(){if(this._findDefaultOption)return this._findDefaultOption;if(this.oOptions.oDefaultOption)return this._findDefaultOption=this.oOptions.oDefaultOption,this._findDefaultOption;var e=this.findDefaultKeyValuesInfo();return e?(this._findDefaultOption=e.aKeyValues[0],this._findDefaultOption):this.oOptions.aKeyValuesLists[0]?(this._findDefaultOption=this.oOptions.aKeyValuesLists[0].aKeyValues[0],this._findDefaultOption):undefined},getDefaultOptionKey:function(){return this.findDefaultOption()?this.findDefaultOption().key:undefined},getDefaultOptionData:function(){return this.getOptionData(this.findDefaultOption())},getNbOptions:function(){var e=this;return this.oOptions.aKeyValuesLists.reduce(function(t,i){return t+e.getKeyValues(i).length},0)},getNbSeps:function(){return this.oOptions.aKeyValuesLists.filter(function(e){return!(!e.sGroupKey&&!e.sSepText)}).length},needsScrollbar:function(){return this.oOptions.bAlwaysScrollbar||this.getNbOptions()+this.getNbSeps()>this.oOptions.iNbMaxDisplayedOptions},redraw:function(){var t=this.$searchInput?this.$searchInput.val():undefined;this.parseKeyValuesMaps(),e.debug("dropdown --- redraw",this);for(var i=0;i<this.oOptions.aKeyValuesLists.length;i++)this.getKeyValues(this.oOptions.aKeyValuesLists[i],!0);this.isOneOptionMode()&&(this.oOptions.aClasses.includes("one-option-button")||this.oOptions.aClasses.push("one-option-button"));var n=$(this.getDropdownHTML());this.$dropdown?this.$dropdown.replaceWith(n):this.oOptions.$container.append(n),this.$dropdown=n,this.$selected=this.find(".x-dropdown-selected-option"),this.$selection=this.find(".x-options-container"),this.$selectedOption=this.$dropdown.find(".x-dropdown-selected-option"),this.$searchInput=this.$dropdown.find(".x-dropdown-search-input"),this.$searchInputContainer=this.oOptions.$container.find(".x-dropdown-search-container"),this.$searchInputReset=this.oOptions.$container.find(".x-dropdown-search-reset"),this.initSearchInput(),this.needsScrollbar()?this.oScrollBar=new s({oOptions:{$Container:this.find(".x-dropdown-select > .x-options-container"),sMode:s.S_MODE_VERTICAL,bAutoHide:!1}}):this.oScrollBar=null,this.$searchInput&&this.$searchInput.length&&this.$searchInput.val(t),this.initSearchInput(),this.$dropdown.on("click",this.handleClick.bind(this)),this.redrawOptions(),this.initDefaultSelectedOptionClass()},redrawOptions:function(){if(!this.$selection||!this.$selection.length)return void e.error("dropdown --- redrawOptions --- $selection introuvable");this.parseKeyValuesMaps();var t=this.$searchInput?this.$searchInput.val():undefined,i=$(this.getOptionsHTML());this.$selection.html(i),this.$searchInput&&this.$searchInput.length&&this.$searchInput.val(t);var n=this;this.find(".x-dropdown-option").on("click",function(e){e.stopPropagation(),n.handleOptionClick($(this))})},toggle:function(e){this.$dropdown.toggle(e)},findOptionByKey:function(e){for(var t=0;t<this.oOptions.aKeyValuesLists.length;t++){var i=this.oOptions.aKeyValuesLists[t];if(i.oKeyValues[e])return i.oKeyValues[e]}return undefined},handleClick:function(e){if(this.oOptions.bSelectOnFirstReclick&&!this.$dropdown.hasClass("selected")){var t=this.getSelectedValue();if(this.findOptionByKey(t)&&(this.clickOption(t),!this.oOptions.bSelectOnFirstReclickOpen))return}if(!this.oScrollBar||!this.oScrollBar.isFromBarElementOrContainer(e.target)){if(this.$dropdown.hasClass("open")&&!this.oOptions.bEnableSearch)return void this.close();if(this.$dropdown.hasClass("open")&&this.oOptions.bEnableSearch)return void this.$searchInput.focus();if(this.isOneOptionMode()){var t=this.getSelectedValue();return void(this.findOptionByKey(t)&&this.clickOption(t))}this.open()}},clickOption:function(e){this.handleOptionClick(this.find('.x-dropdown-option[data-x-value="'+e+'"]'))},handleOptionClick:function(e){if(e.length){var t=e.attr("data-x-value"),i=this.findOptionByKey(t);if(i.disabled)return void this.handleDisabledOptionClick(e,t,i);i.fake_select||this.setSelection(t),this.oOptions.bCloseOnSelect&&this.close(),this.oOptions.bEnableSearch&&this.$searchInput&&this.$searchInput.length&&(this.$searchInput.val(""),this.redrawOptions(),e=this.$selection.find('[data-x-value="'+t+'"]')),"function"==typeof this.oListeners.fnOnSelectItem&&this.oListeners.fnOnSelectItem(e,t,i)}},handleDisabledOptionClick:function(e,t,i){i.action_on_disabled&&"function"==typeof this.oListeners.fnOnSelectUnavailableItem&&this.oListeners.fnOnSelectUnavailableItem(e,t)},setSelection:function(t){var i=this.findOptionByKey(t);if(i){e.info_("dropdown --- setSelection",i),this.$selected.attr("data-x-value",t),this.updateSelectedOptionClass(i["class"]);var n=null;this.oOptions.sAlwaysIcon!==undefined?n=this.oOptions.sAlwaysIcon:i.icon&&(n=i.icon);var s=this.$selected.find(".icon-f");s[0]&&(s[0].className="icon-f "+(n||"hidden")),this.oOptions.bHideAlreadySelected&&this.getNbOptions()>1&&(this.$selection.find(".x-dropdown-option").toggle(!0),this.$selection.find('.x-dropdown-option[data-x-value="'+t+'"]').toggle(!1)),this.oOptions.bHighlightAlreadySelected&&this.getNbOptions()>1&&(this.$selection.find(".x-dropdown-option.selected").removeClass("selected"),this.$selection.find('.x-dropdown-option[data-x-value="'+t+'"]').addClass("selected")),this.isOneOptionMode()||this.$selected.find(".x-dropdown-value").html(i.value)}},reinitSelection:function(){this.$selection.find(".x-dropdown-option").toggle(!0),this.$selection.find(".x-dropdown-option.selected").removeClass("selected");var t=this.getDefaultOptionData();if(void 0===t||"undefined"==typeof t.option)return void e.error("dropdown --- reinitSelection => NO DefaultOptionData",t);e.info("dropdown --- reinitSelection",t),this.updateSelectedOptionClass(t.option["class"]),this.isOneOptionMode()||(this.$selected.attr("data-x-value",t.option.key),this.$selected.find(".x-dropdown-value").html(t.option.value));var i=null;this.oOptions.sAlwaysIcon!==undefined?i=this.oOptions.sAlwaysIcon:t.option.icon&&(i=t.option.icon),this.$selected.find(".icon-f")[0].className="icon-f "+(i||"hidden")},setDropdownSelected:function(e){this.$dropdown.toggleClass("selected","boolean"!=typeof e||e)},updateSelectedOptionClass:function(e){this.sSelectedOptionClass&&(this.$selected.removeClass(this.sSelectedOptionClass),this.sSelectedOptionClass=null),e&&(this.$selected.addClass(e),this.sSelectedOptionClass=e)},initDefaultSelectedOptionClass:function(){var t=this.getDefaultOptionData();if(void 0===t||"undefined"==typeof t.option)return void e.info("dropdown --- initDefaultSelectedOptionClass => NO DefaultOptionData",t);this.updateSelectedOptionClass(t.option["class"])},setDropdownLabel:function(e){this.$selected&&this.$selected.find(".x-dropdown-value").html(e)},isOneOptionMode:function(){return this.oOptions.bNoDropdownForOneOption&&1===this.getNbOptions()},getSelectedValue:function(){return this.$selected.attr("data-x-value")},close:function(){this.$dropdown.removeClass("open"),(this.oOptions.bAutoToggleSearch||this.oOptions.bEnableSearch)&&(this.$searchInputContainer.addClass("hidden"),this.$selectedOption.removeClass("hidden"))},open:function(){this.$dropdown.addClass("open"),this.oScrollBar&&this.oScrollBar.updateView(),(this.oOptions.bAutoToggleSearch||this.oOptions.bEnableSearch)&&(this.$searchInputContainer.removeClass("hidden"),this.$selectedOption.addClass("hidden"))},getSanitizedSearchInput:function(){if(this.$searchInput&&this.$searchInput.length)return i.cleanStr(this.$searchInput.val())},initSearchInput:function(){if(this.oOptions.bEnableSearch&&this.$searchInput&&this.$searchInput.length&&this.$searchInputReset&&this.$searchInputReset.length){var e=this;this.$searchInput.on("input",function(){e.redrawOptions();var t=e.oOptions.$container.find('[data-x-value="all"]');""===e.$searchInput.val()&&t.length?t.removeClass("hidden"):t.addClass("hidden")}),this.$searchInputReset.on("click",function(t){if(t.stopPropagation(),t.preventDefault(),""===e.$searchInput.val()&&e.$dropdown.hasClass("open"))return void e.close();e.$searchInput.val(""),e.redrawOptions()})}}},d}),define("text!skins/common/form/login/purchase/tpls/payment_type_button.mustache",[],function(){return'<div class="payment-type-text">{{{ sIcon }}}<span class="payment-type-text-label">{{{ sText }}}</span></div>'}),define("skins/common/form/login/purchase/payment_type_map",[],function(){return{RPD:"RapidPagos",PFB:"PagoFacil",BL:"Boleto",IX:"Pix",PP:"PicPay",BB:"Banco do Brasil",CA:"Caixa",B:"Bradesco",SB:"Santander",BZ:"Banco Original",SF:"Banco Safra",UL:"Banrisul",WP:"WebPay",BE:"Banco Estado",BX:"Banco de Chile",CI:"Banco BCI",LE:"Banco CrediChile",LL:"Banco Falabella",KV:"Caja Vecina",SL:"Sencillito",SC:"Banco Santander",SO:"Servi Estado",ME:"MercadoPago",AE:"American Express",EY:"Efecty",PD:"Punto Red",PC:"PSE",EX:"Almacenes Exito",CR:"Carulla",SX:"Surtimax",XU:"Con Suerte",DX:"Dimonex",SR:"Su Suerte",SZ:"Surti Mayorista",RD:"Su Red",PPH:"PayPhone",AW:"Activa Western Union",GB:"Banco Guayaquil",MV:"Pichincha MiVecino",PX:"Banco Pichincha",SE:"Spei",OX:"OXXO",COD:"CoDi",AZ:"Banco Azteca",BV:"BBVA Bancomer",BVL:"BBVA Bancomer Online",SM:"Santander",AF:"Afirme online banking",TC:"Todito Cash",EA:"Extra",BW:"Bodega Aurrera",CU:"Circulo K",EN:"7 Eleven",SS:"Sams Club",FL:"Farmacia la mas barata",RO:"Roma",SQ:"Soriana",SW:"Supercity",TO:"Telecomm",WA:"Walmart",BQL:"Banorte online banking",APP:"Apple Pay",GO:"Google Pay",EF:"Pago Efectivo",YP:"Yape",IB:"Interbank",BC:"BCP",WU:"Western Union",BP:"BBVA",KE:"Kasnet",TM:"Tambo",HC:"Caja Huancayo",US:"Caja Cusco",JA:"Caja Arequipa",JI:"Caja ICA",JP:"Caja Piura",JT:"Caja Tacna",PPL:"Paypal",I:"Itaú",VI:"VISA",MC:"Mastercard",MD:"Mastercard Debit",VD:"VISA Debit",ST:"Scotiabank",TR:"Bank Transfer"}}),define("skins/common/form/login/purchase/payment_type",["static/log","mustache","lib/tools","config/main","lib/i18n!front","text!./tpls/payment_type_button.mustache","./payment_type_map"],function(e,t,i,n,s,o,a){var r={oTemplates:{sTplPaymentType:o}};l=function(e){i.initParams(this,e||{},r)};var l=new l;l.CRYPTO_CURRENCY="CRYPTO_CURRENCY",l.PIX="PIX",l.OXXO="OXXO",l.SEPA="SEPA",l.CREDIT_CARD="CREDIT_CARD",l.CREDIT_CARD_VENDO="CREDIT_CARD_VENDO",l.PAY_BY_BANK="PAY_BY_BANK",l.PIX_SEPA="PIX#SEPA",l.PAY_BY_BANK_SEPA="PAY_BY_BANK#SEPA",l.CREDIT_CARD_SEPA="CREDIT_CARD#SEPA",l.CREDIT_CARD_PIX="CREDIT_CARD#PIX",l.CREDIT_CARD_PIX_SEPA="CREDIT_CARD#PIX#SEPA";for(var d=Object.keys(a),u=0;u<d.length;u++)l[d[u]]=d[u];return l.getPaymentTypeDisplayName=function(t){switch(t){case l.CRYPTO_CURRENCY:return"<span>Crypto</span>";case l.CREDIT_CARD:return"<span>"+s.__("premium.payment_method_credit_card")+"</span>";case l.CREDIT_CARD_VENDO:return"<span>"+s.__("premium.credit_card_type_by_merchant",{"%credit_card_type%":"VISA","%merchant%":"Vendo"})+"</span>";case l.SEPA:return this.getPaymentIconDisplay(l.SEPA);case l.PIX:return"<span>PIX</span>";case l.OXXO:return"<span>OXXO</span>";case l.PAY_BY_BANK:return"<span>PayByBank</span>";case l.PIX_SEPA:return this.getPaymentTypeDisplayName(l.PIX)+"<span> / </span>"+this.getPaymentTypeDisplayName(l.SEPA);case l.PAY_BY_BANK_SEPA:return this.getPaymentTypeDisplayName(l.PAY_BY_BANK)+"<span> / </span>"+this.getPaymentTypeDisplayName(l.SEPA);case l.CREDIT_CARD_PIX_SEPA:return this.getPaymentTypeDisplayName(l.CREDIT_CARD)+"<span> / </span>"+this.getPaymentTypeDisplayName(l.PIX_SEPA);case l.CREDIT_CARD_SEPA:return this.getPaymentTypeDisplayName(l.CREDIT_CARD)+"<span> / </span>"+this.getPaymentTypeDisplayName(l.SEPA);case l.CREDIT_CARD_PIX:return this.getPaymentTypeDisplayName(l.CREDIT_CARD)+"<span> / </span>"+this.getPaymentTypeDisplayName(l.PIX);default:return l[t]?"<span>"+a[t]+"</span>":(e.warn('Unknown display name for payment type "'+t+'"'),t)}},l.getPaymentIconDisplay=function(t){var i="";switch(t){case l.CRYPTO_CURRENCY:i="icf-pay-crypto";break;case l.CREDIT_CARD:i="icf-pay-card";break;case l.CREDIT_CARD_VENDO:i="icf-pay-visa";break;case l.SEPA:i="icf-pay-sepa icf-pay-sepa-crop-empty";break;case l.PIX:i="icf-pay-pix";break;case l.OXXO:i="pay-icon-20 pi-OX";break;case l.PAY_BY_BANK:i="icf-pay-paybybank";break;default:return l[t]?'<span class="pay-icon-20 pi-'+t+'"></span>':(e.warn('Unknown icon for payment type "'+t+'"'),"")}return'<span class="icon-f '+i+'"></span>'},l.getPaymentTypeLabel=function(e){var t=this;return e.split("#").map(function(e){return t.getPaymentTypeDisplay(e)}).join('<div class="multipayment_sep">/</div>')},l.getPaymentTypeDisplay=function(e){var i={sIcon:this.getPaymentIconDisplay(e),sText:this.getPaymentTypeDisplayName(e)};return e===l.SEPA&&(i.sText=""),t.render(this.oTemplates.sTplPaymentType,i)},l}),define("skins/common/form/login/purchase/crypto_type",[],function(){return CRYPTO_TYPE=function(){},CRYPTO_TYPE.PREFIX="CRYPTO-",CRYPTO_TYPE.BTC="BTC",CRYPTO_TYPE.ETH="ETH",CRYPTO_TYPE.USDT="USDT",CRYPTO_TYPE.TRX="TRX",CRYPTO_TYPE.USDC="USDC",CRYPTO_TYPE.USDTBSC="USDTBSC",CRYPTO_TYPE.isCrypto=function(e){var t=e.split("-");return!(t.length<=1||"CRYPTO"!==t[0])&&!!CRYPTO_TYPE[t[1]]},CRYPTO_TYPE}),define("text!skins/common/form/login/purchase/tpls/product_dropdown_desc.mustache",[],function(){return'<span class="product-desc">\n\t{{#sMainText}}\n\t\t<span class="product-desc-main">{{{ sMainText }}}</span>\n\t\t{{#sMainPrice}}\n\t\t\t<span class="product-desc-sep price"> - </span>\n\t\t{{/sMainPrice}}\n\t{{/sMainText}}\n\t<span class="product-desc-price">{{{ sMainPrice }}}</span>\n\t{{#sDescription}}\n\t\t<span class="product-desc-sep description"> - </span>\n\t\t<span class="product-desc-description">{{{.}}}</span>\n\t{{/sDescription}}\n</span>'}),define("skins/common/form/login/purchase/product",["static/log","config/main","mustache","lib/i18n!front","skins/common/form/login/purchase/payment_type","skins/common/form/login/purchase/crypto_type","text!./tpls/product_dropdown_desc.mustache"],function(e,t,i,n,s,o,a){var r={one_time_payment:n.__("offer.one_time_payment"),one_time_payment_no_recurring_charges:n.__("offer.one_time_payment_no_recurring_charges"),monthly:n.__("monthly"),yearly:n.__("yearly"),for_one_month:n.__("offer.for_one_month"),for_one_year:n.__("offer.for_one_year"),pay_monthly:n.__("offer.pay_monthly_flexible"),pay_yearly:n.__("offer.pay_yearly_flexible"),month_l:n.__("misc.month_l"),select_other_for_more:n.__("offer.select_other_for_more")},l=function(){};return l.buildFromJSON=function(e){var t=(new l).setId(e.id).setPeriod(e.period).setNbPeriods(e.nbPeriods).setRecurring(e.recurring).setMonthlyPrice(e.monthlyPrice).setTotalPrice(e.totalPrice).setPaymentType(e.paymentType).setPaymentTypes(e.paymentTypes).setCryptoCurrencies(e.cryptoCurrencies).setIsGrouped(e.isGrouped).setHasTrial(e.hasTrial).setTrialDays(e.nbTrialDays).setIsFreeTrial(e.isFreeTrial).setTrialPrice(e.trialPrice);return t.processShowFullPriceOnly(),t},l.prototype={setId:function(e){return this.iId=parseInt(e),this},setCryptoCurrencies:function(e){return this.aCryptoCurrencies=e,this},setIsGrouped:function(e){return this.bIsGrouped=e,this},setMonthlyPrice:function(e){return this.sMonthlyPrice=e,this},setNbPeriods:function(e){return this.iNbPeriods=parseInt(e),this},setPaymentType:function(e){return this.sPaymentType=e,this},setPaymentTypes:function(e){return this.aPaymentTypes=e,this},setPeriod:function(e){return this.sPeriod=e,this},setRecurring:function(e){return this.bRecurring=e,this},setSavingPercent:function(e){return this.fSavingPercent=e,this},setTotalPrice:function(e){return this.sTotalPrice=e,this},setShowFullPriceOnly:function(e){return this.bShowFullPriceOnly=e,this},setHasTrial:function(e){return this.bHasTrial=e,this},setTrialDays:function(e){return this.iTrialDays=e,this},setIsFreeTrial:function(e){return this.bIsFreeTrial=e,this},setTrialPrice:function(e){return this.sTrialPrice=e,this},processShowFullPriceOnly:function(){return this.bRecurring?void this.setShowFullPriceOnly(!1):"MONTH"!==this.sPeriod&&"LIFETIME"!==this.sPeriod?void this.setShowFullPriceOnly(!1):1!==this.iNbPeriods?void this.setShowFullPriceOnly(!1):(this.setShowFullPriceOnly(!0),this)},getUnicity:function(){var e=this.bRecurring;return"undefined"!=typeof this.__bPayByBankHackRecurring&&(e=this.__bPayByBankHackRecurring),[this.sPeriod,this.iNbPeriods,e].join("#")},getParsedCryptoCurrencies:function(){return this.aCryptoCurrencies&&this.aCryptoCurrencies.length?this.aCryptoCurrencies.map(function(e){return o.PREFIX+e}):[]},getParsedPaymentTypes:function(){return this.bIsGrouped?[this.sPaymentType].concat(this.getParsedCryptoCurrencies()).filter(function(e){return e!==s.CRYPTO_CURRENCY}):this.aPaymentTypes.concat(this.getParsedCryptoCurrencies()).filter(function(e){return e!==s.CRYPTO_CURRENCY})},getDropdownOptionDisplay:function(e){e=void 0!==e&&e;var s=this.sMonthlyPrice+"<sup>/"+r.month_l+"</sup>",o=null;if(this.bRecurring){if("MONTH"===this.sPeriod&&(o=r.pay_monthly),"YEAR"===this.sPeriod&&(o=r.pay_yearly),this.bHasTrial){var l={"%offer_start%":'<span class="offer">',"%offer_end%":"</span>","%price%":'<span class="price">'+s+"</span>"},d="offer.trial_";this.bIsFreeTrial?d+="free_":l["%trial_price%"]='<span class="price">'+this.sTrialPrice+"</span>",this.iTrialDays>1?(d+="nb_days",l["%nb_days%"]=this.iTrialDays.toLocaleString(t.dyn.locale)):d+="one_day",s='<span class="trial">'+n.__(d,l)+"</span>"}}else{var u={"%price_start%":'<span class="price">',"%price_end%":"</span>"};u["%price%"]=this.sTotalPrice,"MONTH"===this.sPeriod&&(1===this.iNbPeriods?o=n.__("offer.one_month_one_time_payment",u):(u["%x%"]=this.iNbPeriods.toString(),o=n.__("offer.x_months_one_time_payment",u))),"YEAR"===this.sPeriod&&(1===this.iNbPeriods?o=n.__("offer.one_year_best_one_time_payment",u):(u["%x%"]=this.iNbPeriods.toString(),o=n.__("offer.x_years_best_one_time_payment",u))),this.bShowFullPriceOnly&&(s=this.sTotalPrice,o=r.one_time_payment_no_recurring_charges)}return"LIFETIME"===this.sPeriod&&(o=r.one_time_payment),e&&(o=r.select_other_for_more),i.render(a,{sMainPrice:s,sDescription:o})}},l}),define("text!skins/common/form/login/purchase/buttons_form/tpls/selectable_element.mustache",[],function(){return'<div class="selectable-element-parent {{ sParentClasses }}">\n\t<div class="selectable-element {{ sClasses }}">\n\t\t{{{ sContent }}}\n\t</div>\n</div>'}),define("skins/common/form/login/purchase/buttons_form/payment_type_button",["static/log","mustache","lib/tools","skins/common/dropdown/dropdown","skins/common/form/login/purchase/payment_type","text!./tpls/selectable_element.mustache"],function(e,t,i,n,s,o){var a={oOptions:{$container:undefined,sPaymentType:undefined,aAvailableCryptos:undefined,aParentClasses:[]},oTemplates:{sTplSelectableElement:o},oListeners:{onPaymentTypeClick:undefined,onCryptoSelect:undefined}},r=function(e){i.initParams(this,e||{},a),this.init()};return r.prototype={init:function(){var e=this,i=s.getPaymentTypeLabel(this.oOptions.sPaymentType);if(this.$paymentTypeButtonParent=$(t.render(this.oTemplates.sTplSelectableElement,{sParentClasses:["available"].concat(this.oOptions.aParentClasses).join(" "),sClasses:"payment-type",sContent:i})),this.oOptions.$container.append(this.$paymentTypeButtonParent),this.$paymentTypeButton=this.$paymentTypeButtonParent.find(".payment-type"),this.$paymentTypeButton.attr("data-x-payment-type",this.oOptions.sPaymentType),this.oOptions.sPaymentType===s.CRYPTO_CURRENCY)return void(this.crypto_dropdown=this.initCryptoDropdown(this.$paymentTypeButton));this.$paymentTypeButton.on("click",function(){"function"==typeof e.oListeners.onPaymentTypeClick&&e.oListeners.onPaymentTypeClick(e.$paymentTypeButton,e.oOptions.sPaymentType)})},initCryptoDropdown:function(e){var t=this,i=e.parent();if(i){var o={BTC:{text:"Bitcoin",icon:"icf-crypto-btc"},ETH:{text:"Ethereum",icon:"icf-crypto-eth"},USDT:{text:"USDT",icon:"icf-crypto-usdt"},TRX:{text:"Tron",icon:"icf-crypto-trx"},USDC:{text:"USDC",icon:"icf-crypto-usdc"},USDTBSC:{text:"USDTBSC",icon:"icf-crypto-usdt"}},a=this.oOptions.aAvailableCryptos.reduce(function(e,t){var i=o[t];return e.push({key:t,icon:i.icon,value:i.text}),e},[]);i.empty();var r=new n({oOptions:{$container:i,oDefaultOption:{key:"fake",icon:"icf-pay-crypto",value:"Crypto"},aKeyValuesLists:[n.buildKeyValuesInfo(a)],aClasses:["selectable-element","payment-type"],bStyleLeft:!0,bStyleLeftMobile:!1,bSelectOnFirstReclick:!0},oListeners:{fnOnSelectItem:function(e,i){"function"==typeof t.oListeners.onCryptoSelect&&t.oListeners.onCryptoSelect(e,i)}}});return r.$dropdown.attr("data-x-payment-type",s.CRYPTO_CURRENCY),r}},setCryptoDropDownVal:function(e){this.crypto_dropdown&&this.crypto_dropdown.setSelection(e)}},r}),define("text!skins/common/form/login/purchase/buttons_form/tpls/chosemethod_modal.mustache",[],function(){return'<div class="chosemethod-modal">\n\t<div class="chose-title {{{ payment_type }}}">\n\t\t<div class="chose-current">{{{ offer_not_available }}}</div>\n\t\t<div class="chose-next">{{{ use_this_these_method }}}</div>\n\t</div>\n\t<div class="methods">\n\t</div>\n</div>'}),define("skins/common/form/login/purchase/buttons_form/chose_payment_type",["static/log","mustache","lib/tools","config/main","lib/i18n!front","lib/helpers/overlay/box","skins/common/form/login/purchase/payment_type","skins/common/form/login/purchase/buttons_form/payment_type_button","text!./tpls/chosemethod_modal.mustache"],function(e,t,i,n,s,o,a,r,l){var d={oOptions:{aProducts:undefined,sCurrentPaymentType:undefined,iNbOptionsPerRow:3},oTemplates:{sTplChoseMethodModal:l},oTranslations:{offer_not_available_with_x:"purchase.offer_not_available_with_x",use_one_of_these_methods:"purchase.use_one_of_these_methods",use_this_method:"purchase.use_this_method"},oListeners:{onPaymentTypeClick:undefined,onCryptoSelect:undefined}},u=function(e){i.initParams(this,e||{},d),this.init()};return u.prototype={init:function(){this.aUniquePaymentTypes=this.computeUniquePaymentTypes(),this.aAvailableCryptos=this.computeUniqueCryptoOptions(),this.overlay=o.get($("body"),!0,"close",!0),this.overlay.addClass("premium-popup-form-v1"),this.overlay.addClass("chose-payment-type"),this.overlay.setContent(this.getChoseMethod()),this.addPaymentTypesButtons(),this.overlay.show()},getChoseMethod:function(){return t.render(this.oTemplates.sTplChoseMethodModal,{payment_type:this.oOptions.sCurrentPaymentType?this.oOptions.sCurrentPaymentType:"",offer_not_available:this.oOptions.sCurrentPaymentType?s.__(this.oTranslations.offer_not_available_with_x,{"%payment_method%":'<span class="title-method">'+a.getPaymentTypeDisplayName(this.oOptions.sCurrentPaymentType)+"</span>"}):"",use_this_these_method:1===this.aUniquePaymentTypes.length?s.__(this.oTranslations.use_this_method):s.__(this.oTranslations.use_one_of_these_methods)})},computeUniquePaymentTypes:function(){var t=Object.keys(this.oOptions.aProducts.reduce(function(e,t){return t.bIsGrouped?e[t.sPaymentType]=!0:t.aPaymentTypes.forEach(function(t){e[t]=!0}),e},[])),i=n.data.allPaymentTypes;if(!i||!i.length)return e.warn("data.allPaymentTypes is not available. Payment types will appear in order of appearance in the products."),t;var s=i.reduce(function(e,t,i){return e[t]=i,e},{});return t.sort(function(t,i){var n="undefined"!=typeof s[t]?s[t]:-1,o="undefined"!=typeof s[i]?s[i]:-1;return-1===n&&e.error("Payment type not found in reference list :",t),-1===o&&e.error("Payment type not found in reference list: ",i),n-o})},computeUniqueCryptoOptions:function(){return Object.keys(this.oOptions.aProducts.reduce(function(e,t){return t.aCryptoCurrencies&&t.aCryptoCurrencies.length&&t.aCryptoCurrencies.forEach(function(t){e[t]=!0}),e},[]))},addPaymentTypesButtons:function(){for(var e=this,t=e.overlay.node.find(".methods"),i=this.oOptions.iNbOptionsPerRow,n=this.aUniquePaymentTypes.length,s=0;s<this.aUniquePaymentTypes.length;s++){var o=this.aUniquePaymentTypes[s];i=i===e.oOptions.iNbOptionsPerRow?n>=i||s%i!=0?i:n:i,n--,new r({oOptions:{$container:t,sPaymentType:o,aAvailableCryptos:e.aAvailableCryptos,aParentClasses:e.aUniquePaymentTypes.length>3?["same-width","size-"+i]:[]},oListeners:{onPaymentTypeClick:function(t,i){"function"==typeof e.oListeners.onPaymentTypeClick&&e.oListeners.onPaymentTypeClick(t,i),e.overlay.close()},onCryptoSelect:function(t,i){"function"==typeof e.oListeners.onCryptoSelect&&e.oListeners.onCryptoSelect(t,i),e.overlay.close()}}})}}},u}),define("skins/common/form/login/purchase/buttons_form/buttons_form",["static/log","mustache","lib/tools","config/main","lib/i18n!front","skins/common/form/login/purchase/product","skins/common/form/login/purchase/payment_type","skins/common/form/login/purchase/buttons_form/payment_type_button","skins/common/form/login/purchase/buttons_form/chose_payment_type","text!./tpls/selectable_element.mustache"],function(e,t,i,n,s,o,a,r,l,d){var u={oOptions:{oFormInfo:undefined,$context:undefined,$selectable_plans:undefined,$offer_id_input:undefined},oTemplates:{sTplSelectableElement:d},oTranslations:{select_x_offer:"purchase.select_x_offer"}},c=function(e){i.initParams(this,e||{},u),this.oOptions.$context||(this.oOptions.$context=$("body")),this.oOptions.$selectable_plans&&this.oOptions.$selectable_plans.length&&(this.bHandlePlans=!0),this.init()};return c.prototype={init:function(){this.initProducts(),this.initPremiumPlans(),this.initPaymentMethodsGroup()},find:function(e){return this.oOptions.$context.find(e)},plans_find:function(e){return this.oOptions.$selectable_plans?this.oOptions.$selectable_plans.find(e):[]},initProducts:function(){this.oProducts=this.oOptions.oFormInfo.products.reduce(function(e,t){var i=o.buildFromJSON(t);return e[i.iId]=i,e},{}),this.oProductsByUnique=Object.values(this.oProducts).reduce(function(e,t){var i=t.getUnicity();return e[i]||(e[i]=[]),e[i].push(t),e},{})},initPremiumPlans:function(){var e=this;this.bHandlePlans&&(this.$allOffers=this.plans_find(".selectable-element-parent.premium-plan"),this.$allOffersInside=this.plans_find(".selectable-element.plan"),this.$allOffers.each(function(){var t=$(this),i=t.find(".selectable-element.plan");t.on("click",function(){if(!t.hasClass("available"))return void e.handleClickUnavailable_PremiumPlans(t);e.$allOffersInside.removeClass("selected"),i.addClass("selected")})}))},handleClickOnPaymentType_PremiumPlans:function(e){var t=this.find(".plan.selected").parent().attr("data-x-type-unique"),i=this.find('.selectable-element-parent.premium-plan[data-x-payment-type="'+e+'"]');this.$allOffers.removeClass("available"),i.addClass("available"),this.checkDuplicateOffers();var n=this.$allOffers.filter(function(e,t){return $(t).is(":visible")}).length;if(this.oOptions.$selectable_plans.attr("data-x-items-unavailable",n-i.length),this.oOptions.$selectable_plans.attr("data-x-items-available",i.length),i.length){$offerToSelect=i.first();var s=this.findEquivalentAvailableOffer(t);s&&s.length&&($offerToSelect=s),$offerToSelect.click(),$offerToSelect.children().click()}},findEquivalentAvailableOffer:function(e,t){if(!e)return null;var i=this.find('.premium-plan.available[data-x-type-unique="'+e+'"]');return i.length?(t&&(i.first().click(),i.first().children().click()),i):null},handleClickUnavailable_PremiumPlans:function(t){var i=this,n=this.oProducts[t.attr("data-x-product-id")];new l({oOptions:{aProducts:this.oProductsByUnique[n.getUnicity()],sCurrentPaymentType:this.find(".payment-type.selected").attr("data-x-payment-type")},oListeners:{onPaymentTypeClick:function(e,t){i.handleClickOnPaymentType(i.find('.payment-type[data-x-payment-type="'+t+'"]'),t),i.selectFirstCompatibleOffer(n,t)},onCryptoSelect:function(t,s){i.crypto_payment_button.crypto_dropdown.clickOption(s),i.selectFirstCompatibleOffer(n,a.CRYPTO_CURRENCY),e.debug("Selected crypto "+s)}}})},selectFirstCompatibleOffer:function(e,t){var i=this.getCompatibleProductsForPaymentType(e,t);if(i&&i.length){var n=i[0],s=this.find('[data-x-product-id="'+n.iId+'"]');s.click(),s.children().click()}},getCompatibleProductsForPaymentType:function(e,t){var i=this.oProductsByUnique[e.getUnicity()];return i=i&&i.length?i:[],i.filter(function(e){return e.sPaymentType===t})},initPaymentMethodsGroup:function(){var t=this,i=!1,n=this.find(".payment-types"),s=this.find(".payment-types-seps"),o=t.find('[name="premium-form[crypto_currency]"]'),l=t.find('[name="premium-form[payment_type]"]');n.empty(),this.oOptions.oFormInfo.paymentTypes.length<=1&&(n.toggle(!1),s.toggle(!1)),this.oOptions.oFormInfo.paymentTypes.forEach(function(e){t.createPaymentTypeSep(s,e)}),this.oOptions.oFormInfo.paymentTypes.forEach(function(s){var d=new r({oOptions:{$container:n,sPaymentType:s,aAvailableCryptos:t.getAvailableCryptoOptions()},oListeners:{onPaymentTypeClick:function(e,i){t.handleClickOnPaymentType(e,i),l.attr("value",i)},onCryptoSelect:function(i,n){o.attr("value",n),l.attr("value",a.CRYPTO_CURRENCY),t.handleClickOnPaymentType(i.parent().parent().parent(),a.CRYPTO_CURRENCY),e.debug("Selected crypto "+n)}}});s===a.CRYPTO_CURRENCY&&(t.crypto_payment_button=d),i||s===a.CRYPTO_CURRENCY||(e.debug("Selected payment type '"+s+"'"),d.$paymentTypeButton.click(),i=!0)})},createPaymentTypeSep:function(e,t){var i=s.__(this.oTranslations.select_x_offer,{"%method%":'<div class="method">'+a.getPaymentTypeDisplayName(t)+"</div>"}),n=$('<div class="category-sep">'+i+"</div>");n.attr("data-x-payment-type-show",t),e.append(n)},handleClickOnPaymentType:function(t,i){this.find(".payment-type.selected").removeClass("selected"),t.addClass("selected"),this.find("[data-x-payment-type-show]").toggle(!1),this.find('[data-x-payment-type-show="'+i+'"]').toggle(!0),this.find("[data-x-offer-payment-types]").toggle(!1);var n=this.getOfferFromPaymentMethod(i);if(n.length&&(n.toggle(!0),this.oOptions.$offer_id_input))if(n.length>1)e.error("Multiple offers for the payment type !");else{var s=n[0].getAttribute("x-product-id")
;this.oOptions.$offer_id_input.attr("value",s),e.debug("Selected offer "+s+" (determined by payment method)")}this.bHandlePlans&&this.handleClickOnPaymentType_PremiumPlans(i)},getOfferFromPaymentMethod:function(e){var t=this.find('[data-x-offer-payment-types*="'+e+'"]');if(e===a.PIX_SEPA){var i=a.PIX_SEPA.split("#").map(function(e){return'[data-x-offer-payment-types*="'+e+'"]'});t=this.find(i.join(","))}return t},getAvailableCryptoOptions:function(){return Object.keys(Array.from(this.find(".crypto-available")).reduce(function(e,t){return e[$(t).attr("data")]=1,e},{}))},checkDuplicateOffers:function(){var e={},t=this.find(".premium-plan[data-x-type-unique]"),i=this.find(".premium-plan.available[data-x-type-unique]");t.toggle(!0),i.each(function(){var t=$(this),i=t.attr("data-x-type-unique");e[i]=1}),t.each(function(){var t=$(this),i=t.attr("data-x-type-unique");t.hasClass("available")||1!==e[i]||t.toggle(!1),e[i]=1})}},c}),define("skins/common/purchase_form/purchase_const",[],function(){return oCONST={S_PURCHASE_BTN_CLASS:"purchase-content",S_IS_INIT_CLASS:"purchase-content-is-init",S_HASH_BASE:"purchase-",S_HASH_ID_SEP:"-",QUERY:{PAGE_RELATED_FORM:{DISPLAY_PURCHASE_POPUP:"buy-form",TOKEN:"form-token",PRODUCT:"product",PRODUCT_TR:"producttr",PRODUCT_PM:"productpm",PRODUCT_CC:"productcc"},FORCED_FORM:{DISPLAY_PURCHASE_POPUP:"dpp",ID_DOCUMENT:"iv",ID_CHANNEL:"ic",IS_PREMIUM:"ip",IS_MEMBERSHIP:"im",IS_PPV:"ipp",SOURCE:"s",TRACKING:"t"},FORM_TOKEN:{PREMIUM:"premium-form",PPV:"premium-form-ppv-video",MEMBERSHIP:"premium-form-membership-channel"}}}}),define("skins/common/form/login/purchase/multiform_option",["static/log","mustache","lib/tools","config/main","lib/i18n!front","skins/common/purchase_form/purchase_const","skins/common/form/login/purchase/payment_type","skins/common/form/login/purchase/crypto_type","skins/common/form/login/purchase/product","skins/common/form/login/purchase/buttons_form/chose_payment_type","skins/common/dropdown/dropdown","./payment_type_map"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f={oOptions:{oFormInfo:undefined,$context:undefined,$productOfferContext:undefined,bHideProductWhenSolo:!1,iMaxDisplayedPaymentTypes:5,iMaxDisplayedPaymentTypesDropdown:5,aPaymentTypeDropdownClasses:["selectable-element","payment-type"],bPaymentTypeExpandedDisplay:!1,iMinExpandedDropdownWidth:110,iMinExpandedForcedDisplayedMethods:2,bOtherPaymentTypeGroupedDisplay:!1,iMaxExpandedDisplayedMethodsWithOthersGrouped:null,iMaxOthersGroupedBtnIcons:3,sCryptoIcon:"icf-pay-crypto"},oTemplates:{},oTranslations:{payment_method_show_all:s.__("premium.payment_method_show_all"),payment_method_show_all_short:s.__("purchase.payment_methods_others"),payment_method_credit_card:s.__("premium.payment_method_credit_card")}},h=function(e){i.initParams(this,e||{},f),this.init()};return h.prototype={init:function(){if(!this.oOptions.oFormInfo)return void e.error("Missing form infos in reqjs");this.oOptions.$context||(this.oOptions.$context=$("body")),this.oOptions.$productOfferContext||(this.oOptions.$productOfferContext=this.oOptions.$context),this.sFormId=this.find("form").attr("id"),this.sFormId&&this.find("form").append($('<input type="hidden" name="'+this.sFormId+'[product]"/>')),e.debug_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","init",this.oOptions),this.$selectPaymentMethod=this.find(".select-payment-method"),this.$selectOffer=this.find(".select-offer"),e.info("form info",this.oOptions.oFormInfo),this.parseProducts(),e.info("oProducts",this.oProducts),e.info("oProductsByUnique",this.oProductsByUnique),this.parseOffersForPaymentTypes(),e.info("oPaymentTypesProducts",this.oPaymentTypesProducts),this.initPaymentMethodDropdown(),this.initProductsDropdown()},find:function(e,t){return t&&t.length||(t=this.oOptions.$context),t.find(e)},parseProducts:function(){this.oProducts=this.oOptions.oFormInfo.products.reduce(function(e,t){var i=l.buildFromJSON(t);return e[i.iId]=i,e},{}),this.oProductsByUnique=Object.values(this.oProducts).reduce(function(e,t){var i=t.getUnicity();return e[i]||(e[i]=[]),e[i].push(t),e},{})},parseOffersForPaymentTypes:function(){this.aPaymentTypes=this.oOptions.oFormInfo.paymentTypes.filter(function(e){return e!==a.CRYPTO_CURRENCY}).concat(this.oOptions.oFormInfo.cryptoCurrencies&&this.oOptions.oFormInfo.cryptoCurrencies.length?this.oOptions.oFormInfo.cryptoCurrencies.map(function(e){return r.PREFIX+e}):[]);var t=this.aPaymentTypes.reduce(function(e,t){return e[t]={},e},{});Object.values(this.oProducts).forEach(function(i){i.getParsedPaymentTypes().forEach(function(n){t[n]||(t[n]={},e.error('Undefined payment type "'+n+'" in product '+i.iId+".")),t[n][i.iId]=i})}),Object.entries(t).forEach(function(t){Object.values(t[1]).length||e.warn('Payment type "'+t[0]+'" was provided, but no product is matching.')}),e.debug_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","parseOffersForPaymentTypes",t),this.oPaymentTypesProducts=t},getSelectedPaymentType:function(){return this.oOptions.bPaymentTypeExpandedDisplay?this.oSelectedSelectPaymentMethodDropdown.getSelectedValue():this.oSelectPaymentMethodDropdown.getSelectedValue()},setSelectedPaymentType:function(t){e.debug_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","setSelectedPaymentType --- "+(this.oOptions.bPaymentTypeExpandedDisplay?"expanded":"condensed"),t);var i=this.find('[name="'+this.sFormId+'[payment_type]"]');if(t&&t.startsWith(r.PREFIX)?i.attr("value",a.CRYPTO_CURRENCY):t&&i.attr("value",t),this.oOptions.bPaymentTypeExpandedDisplay){var n=null;this.oSelectedSelectPaymentMethodDropdown=null;for(var s in this.oSelectPaymentMethodDropdowns){var o=this.oSelectPaymentMethodDropdowns[s];null===n&&(n=o),null===this.oSelectedSelectPaymentMethodDropdown&&o.findOptionByKey(t)?(e.info("multiform_option --- setSelectedPaymentType --- SELECT : "+s),o.setSelection(t),o.setDropdownSelected(!0),this.oSelectedSelectPaymentMethodDropdown=o):(e.info("multiform_option --- setSelectedPaymentType --- unselect + reinit : "+s),o.reinitSelection(),o.setDropdownSelected(!1))}null===this.oSelectedSelectPaymentMethodDropdown&&null!==n&&(e.info("multiform_option --- setSelectedPaymentType : SELECT FIRST"),n.setSelection(t),n.setDropdownSelected(!0),this.oSelectedSelectPaymentMethodDropdown=n,i.attr("value",n.getSelectedValue()))}else this.oSelectPaymentMethodDropdown.setSelection(t)},getAvailableProducts:function(t){var i=this.oPaymentTypesProducts[t];if(!i)return e.error('Selected payment method "'+t+'" is undefined, cannot display products.'),[];for(var n=[],s=0;s<this.oOptions.oFormInfo.products.length;s++){var o=this.oOptions.oFormInfo.products[s];i[o.id]&&n.push(this.oProducts[o.id])}return n},getUnavailableProducts:function(t,n){n=void 0===n?this.getAvailableProducts(t):n;var s=this.oPaymentTypesProducts[t],o=i.arrayToMap(n,"getUnicity");if(!s)return e.error('Selected payment method "'+t+'" is undefined, cannot display products.'),[];var a={},r=[];return Object.values(this.oProducts).forEach(function(e){if(!s[e.iId]){var t=e.getUnicity();o[t]||a[t]||(r.push(e),a[t]=!0)}}),r},initPaymentMethodDropdown:function(){this.initPaymentInfos(this.oOptions.bPaymentTypeExpandedDisplay),this.$selectPaymentMethod.empty(),this.oOptions.bPaymentTypeExpandedDisplay?this.initPaymentMethodDropdownExpanded():this.initPaymentMethodDropdownCondensed()},initPaymentMethodDropdownCondensed:function(){e.debug_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","initPaymentMethodDropdownCondensed");var t=this,i=0,n=!1,s=[],o=!1,a=this.aPaymentTypes.filter(function(e){return!e.startsWith(r.PREFIX)}),l=this.aPaymentTypes.filter(function(e){return e.startsWith(r.PREFIX)});a.length&&s.push(u.buildKeyValuesInfo(a.reduce(function(s,a){++i>t.oOptions.iMaxDisplayedPaymentTypes&&(n=!0,o=!0);var r=t.oPaymentInfos[a];return void 0===r?e.error("Unhandled payment type '"+a+"'"):s.push(u.buildOption(a,r.text,r.icon,o)),s},[]))),l.length&&(i++,i>t.oOptions.iMaxDisplayedPaymentTypes&&(n=!0,o=!0),s.push(u.buildKeyValuesInfo(l.reduce(function(i,n){var s=t.oPaymentInfos[n];return void 0===s?e.error("Unhandled payment type '"+n+"'"):i.push(u.buildOption(n,s.text,s.icon,o)),i},[]),"crypto","Crypto"))),n&&s.push(u.buildKeyValuesInfo([u.buildOption("SHOW_ALL",this.oTranslations.payment_method_show_all,"icf-list-ul",undefined,undefined,undefined,!0)],"show_all")),this.oSelectPaymentMethodDropdown=new u({oOptions:{$container:this.$selectPaymentMethod,aKeyValuesLists:s,bStyleLeft:!0,bStyleLeftMobile:!1,iNbMaxDisplayedOptions:t.oOptions.iMaxDisplayedPaymentTypesDropdown+(n?1:0),aClasses:t.oOptions.aPaymentTypeDropdownClasses,bOptionsContainerOverflow:!0,bOptionsContainerOverflowRight:!0},oListeners:{fnOnSelectItem:function(i,n){if(e.debug_("%c"+(t.sFormId?t.sFormId+" ":""),"color:#ba55d3;","Selected "+n),"SHOW_ALL"===n)return void t.handleShowAll();t.handlePaymentTypeSelection(n)}}})},initPaymentMethodDropdownExpanded:function(){e.debug_("%c"+(this.sFormId?this.sFormId+" ":"")+" --- initPaymentMethodDropdownExpanded","color:#ba55d3;","initPaymentMethodDropdownExpanded");var t=Math.floor(this.$selectPaymentMethod.innerWidth()/this.oOptions.iMinExpandedDropdownWidth);t<this.oOptions.iMinExpandedForcedDisplayedMethods&&(t=this.oOptions.iMinExpandedForcedDisplayedMethods),this.oOptions.bOtherPaymentTypeGroupedDisplay&&this.oOptions.iMaxExpandedDisplayedMethodsWithOthersGrouped&&t>this.oOptions.iMaxExpandedDisplayedMethodsWithOthersGrouped&&(t=this.oOptions.iMaxExpandedDisplayedMethodsWithOthersGrouped);var i=[],n=[],s=!1;for(var o in this.aPaymentTypes){var a=this.aPaymentTypes[o];a.startsWith(r.PREFIX)?(n.push(a),s||(s=!0,i.push(r.PREFIX))):i.push(a)}this.oSelectPaymentMethodDropdowns={};var l=this,d=!1,c=[],f=!1,h=[],p=[],_=0,g=null;if(n.length&&(g=u.buildKeyValuesInfo(n.reduce(function(t,i){var n=l.oPaymentInfos[i];return void 0===n?e.error("Unhandled payment type '"+i+"'"):t.push(u.buildOption(i,n.text,n.icon,b)),t},[]),"crypto","Crypto")),i.length){i.length>t&&t--;var m=0,b=!1;for(var o in i){var v,y=i[o];if(y===r.PREFIX||void 0!==(v=l.oPaymentInfos[y]))if(t>0)t--,y===r.PREFIX?this.oSelectPaymentMethodDropdowns.crypto=new u({oOptions:{$container:this.$selectPaymentMethod,oDefaultOption:{key:"fake",icon:"icf-pay-crypto",value:"Crypto"},aKeyValuesLists:[g],bStyleLeft:!1,bStyleLeftMobile:!1,bNoDropdownForOneOption:!0,iNbMaxDisplayedOptions:this.oOptions.iMaxDisplayedPaymentTypesDropdown,aClasses:l.oOptions.aPaymentTypeDropdownClasses,bOptionsContainerOverflow:!0,bOptionsContainerOverflowRight:!0},oListeners:{fnOnSelectItem:function(t,i){e.debug_("%c"+(l.sFormId?l.sFormId+" ":""),"color:#ba55d3;","Selected "+i),l.handlePaymentTypeSelection(i)}}}):this.oSelectPaymentMethodDropdowns[y]=this.makeSingleOptionPaymentTypeDropdown(this.$selectPaymentMethod,u.buildOption(y,v.text,v.icon),function(t,i){e.debug_("%c"+(l.sFormId?l.sFormId+" ":"")+" --- initPaymentMethodDropdownExpanded","color:#ba55d3;","Selected "+i),l.handlePaymentTypeSelection(i)});else if(m++,!d&&m>l.oOptions.iMaxDisplayedPaymentTypes&&(d=!0,b=!0),y===r.PREFIX)!f&&l.oOptions.bOtherPaymentTypeGroupedDisplay&&p.length<l.oOptions.iMaxOthersGroupedBtnIcons&&p.push(l.oOptions.sCryptoIcon),f=!0;else{var D=u.buildOption(y,v.text,v.icon,b);f?(h.push(D),_++):c.push(D),l.oOptions.bOtherPaymentTypeGroupedDisplay&&p.length<l.oOptions.iMaxOthersGroupedBtnIcons&&(v.icon||v.icon_forced)&&p.push(v.icon?v.icon:v.icon_forced)}else e.error("Unhandled payment type '"+y+"'")}}var C=[];if(C.push(u.buildKeyValuesInfo(c)),f&&(C.push(g),_>0&&C.push(u.buildKeyValuesInfo(h))),m){var w=[];for(var o in this.oOptions.aPaymentTypeDropdownClasses)w.push(this.oOptions.aPaymentTypeDropdownClasses[o]);d&&(C.push(u.buildKeyValuesInfo([u.buildOption("SHOW_ALL",this.oTranslations.payment_method_show_all,"icf-list-ul",undefined,undefined,undefined,!0)],"show_all")),l.oOptions.bOtherPaymentTypeGroupedDisplay||w.push("payment-method-show-all-options"));var S={$container:this.$selectPaymentMethod,aKeyValuesLists:C,bStyleLeft:!1,bStyleLeftMobile:!1,bNoDropdownForOneOption:!0,iNbMaxDisplayedOptions:l.oOptions.iMaxDisplayedPaymentTypesDropdown+(d?1:0),aClasses:w,bOptionsContainerOverflow:!0,bOptionsContainerOverflowRight:!0};l.oOptions.bOtherPaymentTypeGroupedDisplay&&(S.oDefaultOption={key:"fake","class":!!p.length&&"icons-only",value:p.length?'<span class="other-offers-icons"><span class="icon-f '+p.join('"></span><span class="icon-f ')+'"></span></span>':this.oTranslations.payment_method_show_all_short}),this.oSelectPaymentMethodDropdowns.others=new u({oOptions:S,oListeners:{fnOnSelectItem:function(t,i){if(e.debug_("%c"+(l.sFormId?l.sFormId+" ":"")+" --- initPaymentMethodDropdownExpanded","color:#ba55d3;","Selected "+i),"SHOW_ALL"===i)return void l.handleShowAll();l.handlePaymentTypeSelection(i)}}})}if(d&&!l.oOptions.bOtherPaymentTypeGroupedDisplay){var w=["payment-method-show-all"];for(var o in this.oOptions.aPaymentTypeDropdownClasses)w.push(this.oOptions.aPaymentTypeDropdownClasses[o]);this.makeSingleOptionPaymentTypeDropdown(this.$selectPaymentMethod,u.buildOption("SHOW_ALL",this.oTranslations.payment_method_show_all_short,undefined,undefined,undefined,undefined,!0),function(t,i){e.debug_("%c"+(l.sFormId?l.sFormId+" ":"")+" --- initPaymentMethodDropdownExpanded","color:#ba55d3;","Selected "+i),l.handleShowAll()},{aClasses:w})}this.setSelectedPaymentType()},makeSingleOptionPaymentTypeDropdown:function(e,t,n,s){var o=[t],a={},r={$container:e,aKeyValuesLists:[u.buildKeyValuesInfo(o)],bStyleLeft:!1,bStyleLeftMobile:!1,bNoDropdownForOneOption:!0,aClasses:this.oOptions.aPaymentTypeDropdownClasses};return i.initParams(a,s||{},r),new u({oOptions:a,oListeners:{fnOnSelectItem:n}})},handleShowAll:function(){var e=this;new d({oOptions:{aProducts:Object.values(e.oProducts)},oListeners:{onPaymentTypeClick:function(t,i){e.setSelectedPaymentType(i),e.updateProductsDropdown(),e.handlePaymentTypeSelection(i)},onCryptoSelect:function(t,i){e.setSelectedPaymentType(r.PREFIX+i),e.updateProductsDropdown(),e.handlePaymentTypeSelection(r.PREFIX+i)}}})},handlePaymentTypeSelection:function(t){e.info_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","handlePaymentTypeSelection",t);var i=this.find(".offer .x-dropdown-selected-option").attr("data-x-value"),n=this.oProducts[i];this.setSelectedPaymentType(t),this.updateProductsDropdown(t);var s=t.split("-");s.length>1&&"CRYPTO"===s[0]&&(this.find('[name="'+this.sFormId+'[crypto_currency]"]').attr("value",s[1]),t=a.CRYPTO_CURRENCY),this.find('[name="'+this.sFormId+'[payment_type]"]').attr("value",t),this.selectFirstCompatibleOffer(n,t)},selectFirstCompatibleOffer:function(e,t){var i=this.getCompatibleProductsForPaymentType(e,t);if(i&&i.length){var n=i[0];this.oSelectOfferDropdown.clickOption(n.iId)}},getCompatibleProductsForPaymentType:function(e,t){var i=this.oProductsByUnique[e.getUnicity()];return i=i&&i.length?i:[],i.filter(function(e){return e.bIsGrouped?e.sPaymentType===t:e.aPaymentTypes.includes(t)})},initProductsDropdown:function(){var t=this,i=["offer"],n=!1;this.sFormId!==o.QUERY.FORM_TOKEN.PPV&&(i.push("selectable-element"),n=!0),this.$selectOffer.empty(),this.oSelectOfferDropdown=new u({oOptions:{$container:this.$selectOffer,aKeyValuesLists:[],bStyleLeft:n,bStyleLeftMobile:!1,iNbMaxDisplayedOptions:4,aClasses:i,bAlwaysScrollbar:!0,bHideAlreadySelected:!0,bNoDropdownForOneOption:!0,bOptionsContainerOverflow:!0,bOptionsContainerOverflowRight:!0},oListeners:{fnOnSelectItem:function(i,n){e.info("Selected "+n),t.find(".submit-txt-single").length||(t.find(".submit-txt-product").toggle(!1),t.find(".submit-txt-product-"+n).toggle(!0)),t.toggleProductOfferDisplay(n),t.toggleSubmitDisplay(n),t.find('[name="'+t.sFormId+'[product]"]').attr("value",n)},fnOnSelectUnavailableItem:function(i,n){e.info("Unavailable product "+n);var s=t.oProducts[n];new d({oOptions:{aProducts:t.oProductsByUnique[s.getUnicity()],sCurrentPaymentType:t.getSelectedPaymentType()},oListeners:{onPaymentTypeClick:function(e,i){t.setSelectedPaymentType(i),t.updateProductsDropdown(),t.selectFirstCompatibleOffer(s,i)},onCryptoSelect:function(e,i){t.setSelectedPaymentType(r.PREFIX+i),t.updateProductsDropdown(),t.selectFirstCompatibleOffer(s,a.CRYPTO_CURRENCY)}}})}}}),this.updateProductsDropdown()},toggleProductOfferDisplay:function(t){e.info_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","toggleProductOfferDisplay",t,this.oOptions.$productOfferContext,this.find(".offer-price .product",this.oOptions.$productOfferContext)),this.find(".offer-price .product",this.oOptions.$productOfferContext).css("display","none"),this.find(".offer-price .product[data-value="+t+"]",this.oOptions.$productOfferContext).css("display","")},toggleSubmitDisplay:function(t){var i=this.oProducts[t];if(i){var n=this.find(".submit-txt-product");this.sOriginalSubmitText||(this.sOriginalSubmitText=n.html());var o=s.__("offer.start_free_trial"),a=s.__("offer.start_trial");e.info_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","toggleSubmitDisplay",i.bHasTrial?i.bIsFreeTrial?o:a:this.sOriginalSubmitText,i,"originalHTML : ",this.sOriginalSubmitText),i.bHasTrial?i.bIsFreeTrial?n.html(s.__(o)):n.html(s.__(a)):n.html(this.sOriginalSubmitText)}},setSelectedOffer:function(t){if(!this.oSelectOfferDropdown)return void e.error("%c"+(self.sFormId?self.sFormId+" ":""),"color:#ba55d3;","setSelectedOffer --- NO Offer Dropdown, sOptionId : ",t);e.debug_("%c"+(this.sFormId?this.sFormId+" ":""),"color:#ba55d3;","setSelectedOffer --- sOptionId : ",t),this.oSelectOfferDropdown.clickOption(t)},updateProductsDropdown:function(t){t=t||this.getSelectedPaymentType();var i=this.getAvailableProducts(t),n=[],s=[];n.push(u.buildKeyValuesInfo(s)),this.applyPayByBankHack(t,i),i.reduce(function(e,t){return e.push(u.buildOption(t.iId,t.getDropdownOptionDisplay())),e},s),this.getUnavailableProducts(t,i).reduce(function(e,t){return e.push(u.buildOption(t.iId,t.getDropdownOptionDisplay(!0),undefined,undefined,!0,!0)),e},s),e.info("aKeyValuesLists",n),this.oSelectOfferDropdown.oOptions.aKeyValuesLists=n,this.oSelectOfferDropdown.redraw(),this.oSelectOfferDropdown.$dropdown.parent().toggle(!0),this.oOptions.bHideProductWhenSolo&&s.length<=1&&this.oSelectOfferDropdown.$dropdown.parent().toggle(!1);var o=this.oSelectOfferDropdown.getKeyValues(u.DEFAULT_KEY)[0].key;o&&this.oSelectOfferDropdown.clickOption(o)},applyPayByBankHack:function(e,t){e===a.PAY_BY_BANK?t.forEach(function(e){e.__bPayByBankHack||"MONTH"===e.sPeriod&&1===e.iNbPeriods&&(e.__bPayByBankHack=!0,e.__bPayByBankHackRecurring=e.bRecurring,e.bShowFullPriceOnly=!0,e.bRecurring=!1,document.querySelectorAll('[x-product-id="'+e.iId+'"] sup').forEach(function(e){e.style.display="none"}))}):t.forEach(function(e){e.__bPayByBankHack&&(e.bShowFullPriceOnly=!1,e.bRecurring=e.__bPayByBankHackRecurring,delete e.__bPayByBankHack,delete e.__bPayByBankHackRecurring,document.querySelectorAll('[x-product-id="'+e.iId+'"] sup').forEach(function(e){e.style.display=""}))})},initPaymentInfos:function(e){this.oPaymentInfos={},this.oPaymentInfos[a.CREDIT_CARD_PIX_SEPA]={text:e?'<span class="icon-f icf-pay-card"></span> / <span class="icon-f icf-pay-sepa icf-pay-sepa-crop-empty"></span> / <span class="icon-f icf-pay-pix"></span>':this.oTranslations.payment_method_credit_card+' / SEPA / <span class="icon-f icf-pay-pix"></span> PIX',icon:e?null:"icf-pay-card",icon_forced:"icf-pay-card"},this.oPaymentInfos[a.CREDIT_CARD_SEPA]={text:e?'<span class="icon-f icf-pay-card"></span> / <span class="icon-f icf-pay-sepa icf-pay-sepa-crop-empty"></span>':this.oTranslations.payment_method_credit_card+" / SEPA",icon:e?null:"icf-pay-card",icon_forced:"icf-pay-card"},this.oPaymentInfos[a.CREDIT_CARD_PIX]={text:e?'<span class="icon-f icf-pay-card"></span> / <span class="icon-f icf-pay-pix"></span>':this.oTranslations.payment_method_credit_card+' / <span class="icon-f icf-pay-pix"></span> PIX',icon:e?null:"icf-pay-card",icon_forced:"icf-pay-card"},this.oPaymentInfos[a.CREDIT_CARD]={text:e?'<img src="'+n.domains["static"]+'/v3/img/skins/common/purchase_icons/creditcard.png" class="pay-card" alt="'+this.oTranslations.payment_method_credit_card+' - VISA / MASTERCARD"/>':this.oTranslations.payment_method_credit_card,icon:e?null:"icf-pay-card",icon_forced:"icf-pay-card"},this.oPaymentInfos[a.CREDIT_CARD_VENDO]={text:s.__("premium.credit_card_type_by_merchant",{"%credit_card_type%":"VISA","%merchant%":"Vendo"}),icon:"icf-pay-visa"},this.oPaymentInfos[a.PIX_SEPA]={text:e?'<span class="icon-f icf-pay-sepa icf-pay-sepa-crop-empty"></span> / <span class="icon-f icf-pay-pix"></span>':'SEPA / <span class="icon-f icf-pay-pix"></span> PIX',icon:e?null:"icf-pay-sepa",icon_forced:"icf-pay-sepa"},this.oPaymentInfos[a.PAY_BY_BANK_SEPA]={text:'SEPA / <span class="icon-f icf-pay-paybybank"></span> PayByBank',icon:e?null:"icf-pay-sepa",icon_forced:"icf-pay-sepa"},this.oPaymentInfos[a.SEPA]={text:e?'<span class="icon-f icf-pay-sepa icf-pay-sepa-crop-empty"></span>':"SEPA",icon:e?null:"icf-pay-sepa",icon_forced:"icf-pay-sepa"},this.oPaymentInfos[a.PIX]={text:"PIX",icon:"icf-pay-pix"},this.oPaymentInfos[a.OXXO]={text:"OXXO",icon:"pay-icon-20 pi-OX"},this.oPaymentInfos[a.PAY_BY_BANK]={text:"PayByBank",icon:"icf-pay-paybybank"},this.oPaymentInfos[r.PREFIX+r.BTC]={text:"Bitcoin",icon:"icf-crypto-btc"},this.oPaymentInfos[r.PREFIX+r.ETH]={text:"Ethereum",icon:"icf-crypto-eth"},this.oPaymentInfos[r.PREFIX+r.USDT]={text:"USDT",icon:"icf-crypto-usdt"},this.oPaymentInfos[r.PREFIX+r.TRX]={text:"Tron",icon:"icf-crypto-trx"},this.oPaymentInfos[r.PREFIX+r.USDC]={text:"USDC",icon:"icf-crypto-usdc"},this.oPaymentInfos[r.PREFIX+r.USDTBSC]={text:"USDTBSC",icon:"icf-crypto-usdt"};for(var t=Object.keys(c),i=0;i<t.length;i++){var o=t[i];this.oPaymentInfos[o]={text:c[o],icon:"pay-icon-20 pi-"+o}}}},h}),define("skins/common/form/login/clear_data",["static/log"],function(e){var t={COOKIE:["nb_thumbs_cols_XXX","thumbloadstats_vthumbs","static_cdn","html5_networkspeed","session_blih","session_rem_XXX","session_token","session_token_dev","hide_xmsg","disclaimer_vpn_display","wgvid_user_msg","dscld","cksd","session_ath","user_theme_fav","html5_pref"],LOCAL_STORAGE:["EZtrk_geoSwitchCountries.ids"],INDEXED_DB:[]},i=function(){this.aKeeplist=t};return i.prototype={fnClearAllStorages:function(){var t=this;return t.fnClearLocalStorage().then(function(){return t.fnClearIndexedDb()},function(t){e.error("Error when cleaning local storage : ",t)}).then(function(){return t.fnClearCookies()},function(t){e.error("Error when cleaning IndexedDB : ",t)}).then(function(){},function(t){e.error("Error when cleaning cookies : ",t)})},fnClearCookies:function(){var t=this;return new Promise(function(i){try{var n=window.xv.cookies.getAll();if(n&&Object.keys(n).length){for(var s in n)n.hasOwnProperty(s)&&!t.isInKeepList(s,t.aKeeplist.COOKIE)&&(e.debug("[31m%s[0m","Cookie clear : ",s),document.cookie=s+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;");e.debug("All Cookies cleared!")}i()}catch(o){e.error("Error when parsing cookies : ",o),i()}})},fnClearLocalStorage:function(){var t=this;return new Promise(function(i){try{if(localStorage&&localStorage.length){for(var n=0;n<localStorage.length;n++){var s=localStorage.key(n);t.isInKeepList(s,t.aKeeplist.LOCAL_STORAGE)||(e.debug("[31m%s[0m","LocalStorage clear : ",s),localStorage.removeItem(s))}e.debug("Local Storage cleared!")}i()}catch(o){e.error("Error when clearing local storage : ",o),i()}})},fnClearIndexedDb:function(){var t=this;return new Promise(function(i){try{var n=xv.indexedDb.getAllStoreNames();if(n&&n.length){for(var s=[],o=0;o<n.length;o++){var a=n[o];t.isInKeepList(a,t.aKeeplist.INDEXED_DB)||(e.debug("[31m%s[0m","IndexedDb clear : ",a),s.push(xv.indexedDb.clear(a)))}Promise.all(s).then(function(){e.debug("IndexedDb cleared!"),i()})}else i()}catch(r){e.error("Error when clearing IndexedDB : ",r),i()}})},isInKeepList:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.indexOf("_XXX")===n.length-4){var s=n.slice(0,-3);if(0===e.indexOf(s))return!0}else if(e===n)return!0}return!1}},i}),define("skins/common/form/login/premium",["static/log","lib/tools","config/main","./base","./btn_actions","skins/common/dropdown/dropdown","skins/common/form/login/purchase/buttons_form/buttons_form","skins/common/form/login/purchase/multiform_option","skins/common/currency_switch/switcher","skins/common/purchase_form/purchase_const","skins/common/form/login/clear_data"],function(e,t,i,n,s,o,a,r,l,d,u){var c={oTemplates:{}},f=function(e,i,s,o,a){t.initParams(this,a,c);var r=this;$("#main-signout-btn").on("click",function(e){e.preventDefault(),r.logOut()}),n.apply(this,["premium-popup-form"+("".length?" ":"")]),this.iIdChannel=e,this.iIdVideo=i,this.sOrigin=s,this.bPreventScrollToTop=o,this.sThisOpenOnlyOrigin=null,this.oContructorParams=a,this.signinblocks=null,this.signupblocks=null,this.lostpwdblocks=null,this.$loginDynamicBlock=null,this.login2signup=null,this.signup2login=null,this.login2lostpwd=null,this.lostpwd2login=null,this.tab2login=null,this.tab2signup=null,this.tab2lostpwd=null};return f.prototype=new n,f.prototype.getType=function(){return"premium"},f.prototype.doToggleForms=function(e){if(void 0===e)return console.error("reqjs is undefined"),!1;var t=this;if(this.box.node.addClass("premium-form-layout-v1"),this.box.node.removeClass("premium-popup-form-v1"),this.box.node.addClass("premium-popup-form"),this.box.node.removeClass("purchase-form"),"premium"!==e.form_disp&&"purchase"!==e.form_disp){this.signinblocks.parent().css("position","relative");var i=this.signupblocks.is(":visible")?this.signupblocks:this.lostpwdblocks.is(":visible")?this.lostpwdblocks:this.signinblocks.is(":visible")?this.signinblocks:this.$loginDynamicBlock.is(":visible")?this.$loginDynamicBlock:$(),n="signup"===e.form_disp||"signup_purchase"===e.form_disp?this.signupblocks:"lostpassword"===e.form_disp?this.lostpwdblocks:"login_dynamic"===e.form_disp?this.$loginDynamicBlock:this.signinblocks;if(!i.is(n))if(this.switching=!0,i.length){var s=i.width(),o=i.height(),a=i.position();n.css({overflow:"hidden",display:"block",opacity:.01}).removeClass("hidden");var r=n.outerHeight();n.height(o).animate({opacity:1,height:r+"px"},"slow",function(){n.width("").height("")}),i.width(s).height(o).css({position:"absolute",top:a.top,left:a.left}).animate({opacity:0,height:r+"px"},"slow",function(){i.css({position:"static",top:"auto",left:"auto",height:"",display:"none"}),t.switching=!1})}else n.css({overflow:"hidden",display:"block"}).removeClass("hidden"),t.switching=!1;if(this.tab2login.toggleClass("active","signin"===e.form_disp||"signin_purchase"===e.form_disp),this.tab2signup.toggleClass("active","signup"===e.form_disp||"signup_purchase"===e.form_disp),this.tab2lostpwd.toggleClass("active","lostpassword"===e.form_disp),"signup_purchase"!==e.form_disp&&"signin_purchase"!==e.form_disp||$("#premium-popup-form .xvr-close").remove(),"signin"===e.form_disp||"signin_purchase"===e.form_disp)return void this.createOrRefreshValidator("signin-form",e.signin_validation_rules);if("lostpassword"===e.form_disp)return void this.createOrRefreshValidator("lost-password-form",e.lostpwd_validation_rules);if("login_dynamic"===e.form_disp){var l=$("#login-dynamic-form-block form").prop("id");return void this.createOrRefreshValidator(l,e.signin_new_form_validation_rules,{no_init_validate:!0})}this.createOrRefreshValidator("signup-form",e.signup_validation_rules)}else{var d=$(".purchase-form-contents");if(d.length>0){"premium"===e.form_disp&&(d.removeClass("hidden"),d[0].style.display=""),"purchase"===e.form_disp&&(this.box.node.addClass("premium-popup-form-v1"),this.box.node.removeClass("premium-popup-form"),this.box.node.addClass("purchase-form"),t.initPaymentMethods(e));var u=d.find('.login-link[data-mode="signin"]');u.length&&require(["skins/default/form/login"],function(e){e.form_on_open=function(){t.close()},e.setupLinks(u)})}}},f.prototype.onFormLoaded=function(e,i,s){n.prototype.onFormLoaded.apply(this,[e,i,s]),this.box.getNode().find(".continue-browsing").on("click",function(e){e.preventDefault();var i=window.location.href;for(var n in d.QUERY.FORCED_FORM)i=t.addUrlParam(i,d.QUERY.FORCED_FORM[n],!1);window.location.href=i})},f.prototype.doSetupNodes=function(t){var n=this;if(void 0===t)return console.error("reqjs is undefined"),!1;if("premium"===t.form_disp||"purchase"===t.form_disp){this.$premiumForm=$("#premium-form"),this.createOrRefreshValidator(d.QUERY.FORM_TOKEN.PREMIUM,t.premium_validation_rules),t.has_membership_channel&&this.createOrRefreshValidator(d.QUERY.FORM_TOKEN.MEMBERSHIP,t.membership_channel_validation_rules),t.has_ppv_video&&this.createOrRefreshValidator(d.QUERY.FORM_TOKEN.PPV,t.ppv_video_validation_rules);var a=i.dyn.premium&&i.dyn.login_info.is_logged?null:$("#premium-form a, #premium-form-membership-channel a, #premium-form-ppv-video a");a&&a.length&&(i.dyn.premium||require(["skins/common/mozaique/premium_redirect_alert"],function(e){a.on("click",function(t){t.preventDefault();var i=$(this).attr("href"),s=function(){n.redirect(i)};e.displayPopup("exit",null,s)})})),$(".purchase-form-contents select").on("change",function(){$(this).toggleClass("no-value",""===$(this).val())}),t.products_signup_form&&this.$premiumForm.find(".form-field-premium-form_product").appendTo(this.$premiumForm);var r=this.$premiumForm.find(".premium-plans");if(r.length>0){$SubmitTxtProduct=r.closest("form").find(".submit-txt-product"),r.find(".plan").on("click",function(){if($(this).parent().hasClass("available")){var e=$(this).find("input").val();$SubmitTxtProduct.hide(),$SubmitTxtProduct.filter(".submit-txt-product-"+e).show()}});var u=r.find(".plan input:checked").val();$SubmitTxtProduct.hide(),$SubmitTxtProduct.filter(".submit-txt-product-"+u).show()}}else{this.signinblocks=$("#signin-form-block"),this.signupblocks=$("#signup-form-block"),this.lostpwdblocks=$("#lostpassword-form-block"),this.$loginDynamicBlock=$("#login-dynamic-form-block"),this.signup2login=$("#btn-signup2login"),this.login2signup=$("#btn-login2signup"),this.login2lostpwd=$("#btn-login2lostpassword"),this.lostpwd2login=$("#btn-lostpassword2login"),this.tab2login=$("#tab-2signin"),this.tab2signup=$("#tab-2signup"),this.tab2lostpwd=$("#tab-2lostpassword"),this.tab2signup.add(this.login2signup).on("click",function(e){e.preventDefault(),t.form_disp="signup",n.toggleForms(t)}),this.tab2login.add(this.signup2login).add(this.lostpwd2login).on("click",function(e){e.preventDefault(),t.form_disp="signin",n.toggleForms(t)}),this.tab2lostpwd.add(this.login2lostpwd).on("click",function(e){e.preventDefault(),t.form_disp="lostpassword",n.toggleForms(t)});var c=this.signupblocks.find("input,select").on("keydown",function(e){if(13===e.which){var t=c.index(this);if(t===c.length-1)return;return c.eq(t+1).focus(),e.preventDefault(),!1}});this.toggleForms(t),$("#signin-form, #signup-form").each(function(){var e=$(this),i=e.find("#signup-form-submit,.login-submit"),n=e.find('input[name="'+e.prop("id")+'[id_product]"]'),s=e.find(".premium-plans-block");if(0!==n.length){s.length&&s.append(i),e.find(".btn-ppv-video-buy-submit").on("click",function(){n.val(t.ppv_video_product_id),i.click()}),e.find(".btn-channel-membership-buy-submit").on("click",function(){n.val(t.membership_channel_product_id),i.click()});var o=e.find(".premium-plans"),a=o.closest("form").find(".submit-txt-product");if(o.length>0){o.find(".plan").on("click",function(){var e=$(this).find("input").val();a.hide(),a.filter(".submit-txt-product-"+e).show(),n.val(e)});var r=o.find(".plan input:checked").val();a.hide(),a.filter(".submit-txt-product-"+r).show(),n.val(r)}else i.hide()}})}new s(!0,this).init(),"purchase"!==t.form_disp&&"signin_purchase"!==t.form_disp&&"signup_purchase"!==t.form_disp||$(".x-overlay #btn-loginout").on("click",function(e){e.preventDefault(),n.logOut(function(){n.close(),n.open()})}),this.iIdVideo&&$("#premium-popup-form img[data-casting]").each(function(){xv.thumbs.prepareVideoImageAndLink(n.iIdVideo,[$(this)[0]])}),
$(".premium-plans").each(function(){var e=$(this).find(".plan"),t=$(this).closest("form").find(".premium-form-redirect-link-premium"),i=$(this).closest("form").find(".submit-txt-product");if(e.length>0){var s=null;e.on("click",function(o,a){if($(this).parent().hasClass("available")){var r=$(this).addClass("selected"),l=r.find("input").prop("checked","checked"),d=l.val();e.not(r).removeClass("selected"),s||$(this).addClass("is-clicked"),t&&t.length&&"string"==typeof t.attr("href")&&t.attr("href",t.attr("href").replace(/&product=\d+/,"&product="+d)),i.hide(),i.filter(".submit-txt-product-"+d).show();for(var u in n.validators)n.validators.hasOwnProperty(u)&&n.validators[u].resetSubmit();a||$(".premium-plan-"+d+" .plan").not(r).trigger("click",[!0])}}),s=!0,e.find("input:checked").parents(".p-ct").click(),s=!1}});var f=$("#premium-popup-form .detail-info");if(f.length&&require(["lib/helpers/popup"],function(e){f.each(function(){var t=$(this).children(".detail-info-btn"),i=$(this).children(".info");new e(t,i,{relative_to:$("#premium-popup-form"),popup_opened_class:"premium-popup-form-detail-info-pop",autoclose:!0,mouseout_autoclose:3e3,autoclose_on_same_level:"any_level",mouseover_open:500,mouseout_autoclose_openevents:["click","mouseover_btn_timer","no_event"],position:{h:"right",v:"below"}})})}),i.dyn.currencies&&i.dyn.currencies.length){var h=$("#premium-popup-signin .currency-switch-block");if(h.length){var p=l.getCurrent().id,_={},g=o.buildKeyValuesInfo(i.dyn.currencies.reduce(function(e,t){var i={key:t.id,value:t.short_name,item:t};return e.push(i),t.id===p&&(_=i),e},[]));n.currency_dropdown=new o({oOptions:{$container:h,oDefaultOption:_,aKeyValuesLists:[g],aClasses:["selectable-element","available"],sAlwaysIcon:"icf-cash",iNbMaxDisplayedOptions:10,bStyleLeft:!0,bStyleLeftMobile:!0},oListeners:{fnOnSelectItem:function(t,i,s){e.debug("Currency switch:",s),l.setCurrent(s.key,undefined,undefined,function(){n.reOpenSelf()})}}})}}},f.prototype.setSignInOut=function(t){e.debug_("premium.prototype.setSignInOut",t),"boolean"!=typeof t?t=i.dyn.login_info.is_logged:i.dyn.login_info.is_logged=t,t?($("#main-signout-btn").removeClass("hidden"),$("#main-signin-btn").addClass("hidden")):($("#main-signout-btn").addClass("hidden"),$("#main-signin-btn").removeClass("hidden"))},f.prototype.logOut=function(e){var t=this,i=new u;$.post({url:"/account/signout?no_redirect=1",success:function(n){if(!n.result)return void(window.location.href="/account/signout");i.fnClearAllStorages().then(function(){t.setSignInOut(!1),"function"==typeof e&&e()})},error:function(){i.fnClearAllStorages().then(function(){window.location.href="/account/signout"})},dataType:"json"})},f.prototype.open=function(e,t){"object"!=typeof t&&(t={}),this.sThisOpenOnlyOrigin=t.sThisOpenOnlyOrigin?t.sThisOpenOnlyOrigin:null,n.prototype.open.apply(this,[e,t])?this.box&&this.box.node&&this.box.node.addClass("premium-popup-form"):this.sThisOpenOnlyOrigin=null},f.prototype.setIsClosed=function(){n.prototype.setIsClosed.apply(this,[]),this.sThisOpenOnlyOrigin&&(this.sThisOpenOnlyOrigin=null)},f.prototype.getUrl=function(e){var t=n.prototype.getUrl.apply(this,[e,!0]),s=this.getTracker(),o=this.getOrigin();return this.iIdChannel?(t+="/channel-membership/"+this.iIdChannel,this.iIdVideo?t+="/"+this.iIdVideo:"video"===i.data.action&&i.data.id_video&&(t+="/"+i.data.id_video)):this.iIdVideo?t+="/video-direct-purchase/"+this.iIdVideo:!e&&i.dyn.premium&&"signin-auto-open"!==this.form_opening_origin_mode&&"signin-top-page"!==this.form_opening_origin_mode?(t+="/create","video"===i.data.action&&i.data.id_video&&(t+="/premium-sub/"+i.data.id_video)):e&&i.dyn.premium&&"video"===i.data.action&&i.data.id_video&&(t+="/premium-sub/"+i.data.id_video),s&&(t+="/"+s),o&&(t+="/"+o),t},f.prototype.setOriginFromAction=function(){switch("video"===i.data.action&&i.data.is_ppv?this.iIdVideo=i.data.id_video:"profile"===i.data.action&&i.data.user&&i.data.user.channel&&i.data.user.has_membership?this.iIdChannel=i.data.user.id_user:"video"===i.data.action&&i.data.is_membership&&i.data.uploader_id&&(this.iIdChannel=i.data.uploader_id,this.iIdVideo=i.data.id_video),i.data.action){case"video":if(-1!==window.location.search.indexOf("xsc=qp"))this.sOrigin="quickies_profile";else if(-1!==window.location.search.indexOf("xsc=qs"))this.sOrigin="quickies_search";else if(-1!==window.location.search.indexOf("xsc=fvtp"))this.sOrigin="full_video_on_trailer_player";else if(-1!==window.location.search.indexOf("xsc=fvtecp"))this.sOrigin="full_video_on_trailer_player_end_cta";else if(-1!==window.location.search.indexOf("xsc=gfps"))this.sOrigin="global_feed_premium_sub";else if(-1!==window.location.search.indexOf("xsc=pfps"))this.sOrigin="profile_feed_premium_sub";else{var e=window.location.search.indexOf("xsc=fvt");if(-1!==e){var t=window.location.search.substring(e+7,e+8),n="m"===t;n&&(t=window.location.search.substring(e+8,e+9)),this.sOrigin="full_video_on_trailer"+(n?"_mobile":"")+t}else{var s=-1!==window.location.search.indexOf("xsc=pofs");i.data.is_ppv?this.sOrigin=s?"premium_on_free_search_ppv":"video_page_ppv":i.data.is_membership?this.sOrigin=s?"premium_on_free_search_membership":"video_page_membership":this.sOrigin=s?"premium_on_free_search_premium":"video_page_premium"}}break;case"manage_login_create":-1!==window.location.href.indexOf("iframe")?this.sOrigin="iframe_premium":this.sOrigin="premium_tour";break;case"profile":i.data.user.has_membership?this.sOrigin="profile_page_membership":this.sOrigin="profile_page_premium"}},f.prototype.getOrigin=function(){return this.sThisOpenOnlyOrigin?this.sThisOpenOnlyOrigin:this.sOrigin?this.sOrigin:null},f.prototype.setOrigin=function(e){this.sOrigin=e},f.prototype.onSubmit=function(e,t){e.parent().children().not(e).hide(),e.addClass("is-only-displayed"),this.positionPopup()},f.prototype.onSubmitFailed=function(e,t){e.parent().children().not(e).show(),this.positionPopup(),n.prototype.onSubmitFailed.apply(this,[e,t])},f.prototype.onFormSubmitSuccess=function(e){if(e.redirect_to)return void this.redirectWithConnectionLoader(e.redirect_to);if(e.premium_declined)return e.premium_end_page?void this.box.setContent(e.premium_end_page):"/account/create/premium-iframe"===window.location.pathname?void this.redirect("/account/premium/declined-iframe"):void this.redirect("/account/premium/declined");if(!(e.is_premium||i.dyn.is_premium&&("signin"===e.form_displayed||"login_dynamic"===e.form_displayed)&&e.form_valid&&e.has_member_area))return this.setSignInOut(!0),void this.loadForm({product:e.id_product});if(e.premium_success){if(e.premium_end_page)return void this.box.setContent(e.premium_end_page);var t="/account/premium/congrats?referer="+encodeURIComponent(window.location.href);return"/account/create/premium-iframe"===window.location.pathname&&(t+="&form=iframe"),void this.redirect(t)}n.prototype.onFormSubmitSuccess.apply(this,[e])},f.prototype.onClickLinks=function(e,t,i){n.prototype.onClickLinks.apply(this,[e,t,i,!0]),this.open(i,{sThisOpenOnlyOrigin:t.data("origin")?t.data("origin"):null})},f.prototype.getFormVersion=function(e){return"undefined"==typeof e.formVersion?6:e.formVersion},f.prototype.initPaymentMethods=function(e){var t=$(".purchase-form-contents .premium_plans"),i=$(".purchase-form-contents .premium-form"),n=$(".purchase-form-contents .ppv-form"),s=$(".purchase-form-contents .membership-form"),o=$("#premium-popup-form .multiform-option-toggle .offer[data-form='premium']"),l=$("#premium-popup-form .multiform-option-toggle .offer[data-form='ppv']"),u=$("#premium-popup-form .multiform-option-toggle .offer[data-form='membership']"),c={premium:{$form:i,$toggleBtn:o},ppv:{$form:n,$toggleBtn:l},membership:{$form:s,$toggleBtn:u}},f=0;t.length&&new a({oOptions:{$context:t,oFormInfo:e.premiumForm,$selectable_plans:t.find(".premium-plans")}});var h=i.length&&e.premiumForm,p=n.length&&e.ppvForm,_=s.length&&e.membershipForm;h&&f++,p&&f++,_&&f++;var g=this.getFormVersion(e)>=5,m=this.getFormVersion(e)>=7;if(this.oMultiformOptions={},h&&(this.oMultiformOptions[d.QUERY.FORM_TOKEN.PREMIUM]=new r({oOptions:{oFormInfo:e.premiumForm,$context:i,$productOfferContext:i.add(o),bPaymentTypeExpandedDisplay:g,bOtherPaymentTypeGroupedDisplay:m}})),p&&(this.oMultiformOptions[d.QUERY.FORM_TOKEN.PPV]=new r({oOptions:{oFormInfo:e.ppvForm,$context:n,$productOfferContext:n.add(l),bHideProductWhenSolo:!1,bPaymentTypeExpandedDisplay:g,bOtherPaymentTypeGroupedDisplay:m}})),_&&(this.oMultiformOptions[d.QUERY.FORM_TOKEN.MEMBERSHIP]=new r({oOptions:{oFormInfo:e.membershipForm,$context:s,$productOfferContext:s.add(u),bHideProductWhenSolo:!0,bPaymentTypeExpandedDisplay:g,bOtherPaymentTypeGroupedDisplay:m}})),f>1){var b=function(e){var t=c[e].$form,i=c[e].$toggleBtn;for(var n in c){var s=c[n].$form,o=c[n].$toggleBtn;s.removeClass("is-condense-open"),o.removeClass("is-current")}t.addClass("is-condense-open"),i.addClass("is-current")};for(var v in c){var y=c[v].$form,D=c[v].$toggleBtn;!function(){var e=v;y.add(D).on("click",function(t){b(e)})}()}}},f.prototype.setSelectedPaymentType=function(e,t){if(this.oMultiformOptions&&"undefined"!=typeof this.oMultiformOptions[e]){this.oMultiformOptions[e].handlePaymentTypeSelection(t)}},f.prototype.setSelectedOffer=function(e,t){if(this.oMultiformOptions&&"undefined"!=typeof this.oMultiformOptions[e]){this.oMultiformOptions[e].setSelectedOffer(t)}},f.prototype.reOpenSelf=function(){this.close();var t=this;e.info_("%cpremium reOpenSelf","color:red;",{iIdChannel:t.iIdChannel,iIdVideo:t.iIdVideo,sOrigin:t.sOrigin,bPreventScrollToTop:t.bPreventScrollToTop,oContructorParams:t.oContructorParams}),new f(t.iIdChannel,t.iIdVideo,t.sOrigin,t.bPreventScrollToTop,t.oContructorParams).open()},f}),define("skins/default/form/login",["config/main","skins/common/form/login/standard","skins/common/form/login/premium","skins/common/tracker/video_subs","skins/common/tracker/videos_i_like"],function(e,t,i,n,s){var o=t;e.dyn.premium&&(o=i);var a=new o;return a.doSetupNodes=function(e){if(n.isTracking()){var t=n.getIds();if(t.length>0)try{this.box.getNode().find('form input[name$="[subs]"]').val(JSON.stringify(t))}catch(r){}}if(s.isTracking()){var i=this,a=function(e){if(e.length>0)try{i.box.getNode().find('form input[name$="[votes]"]').val(JSON.stringify(e))}catch(r){}};xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){s.getIds().then(function(e){a(e)})}):a(s.getIds())}return o.prototype.doSetupNodes.apply(this,[e])},a}),define("skins/common/history/page_view_history",["config/main","static/tracker","static/utils","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/basic_feature","mustache","text!skins/common/history/history_popup.mustache"],function(e,t,i,n,s,o,a,r){var l,d={video:"vv",photo_gallery:"pg",verified_picture:"vp",profile:"pr"},u=function(e){this.sTrackerName=e&&void 0!==e&&"string"==typeof e?e:"page_view_history",this.bIDB=xv.indexedDb&&xv.indexedDb.getDbIsSupported(),this.bIDB&&this.init_indexedDb()};u.prototype={sTrackerName:null,bIDB:null,sDbStoreName:null,init_indexedDb:function(){this.sDbStoreName=this.get_tracker_name()+".ids";var e=this,t=[{index:"i",unique:!0},{index:"t",unique:!1}],i=function(){xv.indexedDb.getStoreExist({store_name:e.sDbStoreName,store_index:t,callback_store_no_exist:function(){var i=function(){xv.indexedDb.storeCreate({store_name:e.sDbStoreName,store_index:t,callback_store_created:function(){var t=xv.storage.get(e.sDbStoreName);null!==t&&t.length>0&&xv.indexedDb.storeCreateFromLocalStorage(e.sDbStoreName,t)}})};xv.indexedDb.manageTempStackAdd(i)},callback_store_exist:function(){if(xv.indexedDb.getRemoveLocalStorage()){var t=xv.storage.get(e.sDbStoreName);if(null!==t){var i=0;for(var n in t)i=t[n].t>i?t[n].t:i;1970===new Date(i).getFullYear()&&new Date(1e3*i).getFullYear()===(new Date).getFullYear()&&(i*=1e3),(new Date).getTime()-6048e5>i&&xv.storage.remove(e.sDbStoreName)}}}})};xv.indexedDb.manageTempStackAdd(i)},get_tracker_name:function(){return this.sTrackerName},get_tracker:function(){return l||(l=new c(this.get_tracker_name(),this.bIDB?null:5e3,this.bIDB)),l},canTrack:function(){return this.get_tracker().canTrack()},cantTrackAlert:function(){e.dyn.login_info.is_logged?s.alert(n.__("profile.tracking.device_not_compatible_create_profile",{"%start_create_profile%":'<a href="/account/create_profile">',"%end_login%":"</a>"})):require(["skins/default/form/login"],function(e){var t=s.alert(n.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}));e.setupLinks(t.getNode().find(".contextual-popup-message a").first())})},isTracking:function(){return this.get_tracker().isTracking()},stopTracking:function(e,t){this.get_tracker().stopTracking(e,t)},startTracking:function(e){if(!this.canTrack())return this.cantTrackAlert(),!1;this.get_tracker().startTracking(e)},addId:function(e,t,i){if("undefined"==typeof d[e])return!1;if(this.bIDB){var n=this;xv.indexedDb.manageTempStackAdd(function(){n.get_tracker().addId(d[e]+"_"+t,i)})}else this.get_tracker().addId(d[e]+"_"+t,i)},removeId:function(e,t,i){if("undefined"==typeof d[e])return!1;var n;switch(e){case"video":n="page_view_history.ids"}this.get_tracker().removeId(t,i,n)},removeIds:function(e,t,i){this.get_tracker().removeIds(e,t,i)},clear:function(e,t){return this.get_tracker().clear(e,t)},getIds:function(){return this.get_tracker().getIdsList()},getIdsTimestamps:function(e){if(this.bIDB){if(e)return this.get_tracker().getIdsTimestampsList(e);var t=this;return new Promise(function(e,i){t.get_tracker().getIdsTimestampsList().then(function(t){e(t)})})}return this.get_tracker().getIdsTimestampsList()},getVideosIdsTimestamps:function(e){if(this.bIDB){if(e)return this.getIdsTimestampsByType(e).video;var t=this;return new Promise(function(e,i){t.getIdsTimestampsByType().then(function(t){e(t.video)})})}return this.getIdsTimestampsByType().video},getIdsTimestampsByType:function(e){var t=function(e){var t={},i={};for(var n in e){var s=n.indexOf("_"),o=n.substring(0,s),a=n.substring(s+1);t[o]||(t[o]={}),t[o][a]=e[n]}for(var r in d)t[d[r]]&&(i[r]=t[d[r]]);return i};if(this.bIDB){if(e)return t(this.getIdsTimestamps(e));var i=this;return new Promise(function(e,n){i.getIdsTimestamps().then(function(i){e(t(i))})})}return t(this.getIdsTimestamps())},clearOlderThan:function(e){var t=this.getIdsTimestamps(),i=Math.round((new Date).getTime()/1e3);for(var n in t)t[n]<i-86400*e&&this.removeId(n)}};var c=function(e,i,n){this.oFeature=new o(o.S_F_VIDEO_VIEWS),this.oFeature.activateErrorPopup(),t.apply(this,[e,i,n])};return c.prototype=new t,c.prototype.isTracking=function(){return this.oFeature.isEnabled()&&t.prototype.isTracking.apply(this)},c.prototype.removeIds=function(i,o,a){var r=this,l=function(i,o,a){for(var l in i)t.prototype.removeId.apply(r,[d.video+"_"+i[l],a,o]);e.dyn.login_info.is_logged?$.post("/history/clear/selection",{videos:i},function(e){if(!e.result)return void s.alert(n.__("form.error_modification_not_saved"));r.bUseIndexedDb||"function"!=typeof o||o()},"json"):r.bUseIndexedDb||"function"!=typeof o||o()};i.length>1?s.confirm(n.__("history.clear_this_elements_confirm"),function(){l(i,o,a)}):l(i,o,a)},c.prototype.removeId=function(e,t,i){c.prototype.removeIds.apply(this,[[e],t,i])},c.prototype.clear=function(e,i){var o=this;s.confirm(n.__("categories.confirm_clear_history"),function(){t.prototype.clear.apply(o,[o.bUseIndexedDb&&"function"==typeof e?e:null]),!1!==i?$.post("/history/clear/all",{},function(t){if(!t.result)return void s.alert(n.__("form.error_modification_not_saved"));o.bUseIndexedDb||"function"!=typeof e||e()},"json"):o.bUseIndexedDb||"function"!=typeof e||e()})},c.prototype.stopTracking=function(e,o){var l=this,d=a.render(r,{content:i.unescape(n.__("history.disable_confirm")),history:i.unescape(n.__("history.clear"))}),u=function(i){if("undefined"==typeof i[0]){var n=$(this);if(n.data("send-form")){var s=n.closest(".x-popup-content").find("form");s.length>0&&(i=s.serializeArray())}}var o=1===i.length&&"clear"===i[0].name&&i[0].value,a={};o&&(a.oPostData={clear:1}),t.prototype.stopTracking.apply(l,[o]),l.oFeature.disable(e,a)};void 0!==o&&"object"==typeof o.popup_btn?require(["lib/helpers/popup"],function(e){"undefined"==typeof l.popup&&(l.popup=new e(o.popup_btn),l.popup.setPosition(o.popup_position)),l.popup.open(),l.popup.setContent(d);var t=$(".disable-history-confirm");t.addClass("popup-confirm").append('<button class="btn btn-primary btn-ok" data-send-form="1">'+n.__("misc.ok")+'</button><button class="btn btn-primary btn-close">'+n.__("misc.cancel")+"</button>"),t.find(".btn-ok").on("click",u),t.find(".btn-close").on("click",function(){l.popup.close()})}):s.confirm(d,u)},c.prototype.startTracking=function(e){t.prototype.startTracking.apply(this),this.oFeature.enable(e)},new u}),define("text!skins/common/suggests/suggest_popup.mustache",[],function(){return'<div class="suggest-popup popup-confirm">\n\t<p>{{ content }}</p>\n\t<button class="btn btn-primary btn-ok">{{ ok }}</button>\n\t<button class="btn btn-primary btn-close">{{ not_ok }}</button>\n</div>'}),define("skins/common/suggests/suggests_manager",["static/utils","mustache","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/basic_feature"],function(e,t,i,n,s){var o=function(){this.site_id=e.getSiteId(),this.oFeature=new s(s.S_F_SUGGESTS),this.oFeature.activateErrorPopup()};return o.prototype={is_feature_enabled:function(){return this.oFeature.isEnabled()},toggle_feature:function(s,o){if(this.site_id<1)return!1;s="boolean"==typeof s?s:!this.is_feature_enabled();var a=this,r=function(){a.oFeature.toggle(function(){$("html,body").scrollTop(0),window.location.reload()},s)};if(s)return void r();void 0===o&&(o={});var l="string"==typeof o.sConfirmTxt?o.sConfirmTxt:i.__("misc.are_you_sure");"object"==typeof o.popup_btn?require(["lib/helpers/popup","text!skins/common/suggests/suggest_popup.mustache"],function(n,s){"undefined"==typeof a.popup&&(a.popup=new n(o.popup_btn),o.popup_position&&a.popup.setPosition(o.popup_position)),a.popup.open(),a.popup.setContent(t.render(s,{content:e.unescape(l),ok:e.unescape(i.__("misc.ok")),not_ok:e.unescape(i.__("misc.cancel"))}));var d=$(".suggest-popup");d.find(".btn-ok").on("click",r),d.find(".btn-close").on("click",function(){a.popup.close()})}):n.confirm(l,r)},remove_vid_from_suggest:function(e,t){var s=!1,o=setTimeout(function(){s=n.loading()},500);$.post("/video-suggest/blacklist/"+e,{},function(e){if(clearTimeout(o),s&&s.close(),!e||!e.OK)return void n.alert(i.__("form.error_modification_not_saved"));"function"==typeof t&&t()},"json")}},new o}),define("skins/common/video/vote_manager",["config/main","lib/helpers/inline_loader","lib/helpers/popup","lib/i18n!front"],function(e,t,i,n){var s={},o=0,a=0,r={},l={},d=function(e,t,i,n,s){a++,this.id=a,this.good_btn=$(e),this.bad_btn=$(t),this.url_good=i,this.url_bad=n,this.data_good=s&&s.data_good?s.data_good:{},this.data_bad=s&&s.data_bad?s.data_bad:{},this.end_func=!(!s||!s.end_func)&&s.end_func,this.success_func=!(!s||!s.success_func)&&s.success_func,this.notlogged_func=!(!s||!s.notlogged_func)&&s.notlogged_func,this.disable_confirm_pop=!(!s||"boolean"!=typeof s.disable_confirm_pop)&&s.disable_confirm_pop,this.pop_relative=s&&s.pop_relative?$(s.pop_relative):$(document.body),this.pop_class="video-vote-popup"+(s&&s.pop_class?" "+s.pop_class:""),this.rating_good_perc=!(!s||!s.rating_good_perc)&&$(s.rating_good_perc),this.rating_good_nbr=!(!s||!s.rating_good_nbr)&&$(s.rating_good_nbr),this.rating_bad_perc=!(!s||!s.rating_bad_perc)&&$(s.rating_bad_perc),this.rating_bad_nbr=!(!s||!s.rating_bad_nbr)&&$(s.rating_bad_nbr),this.rating_total=!(!s||!s.rating_total)&&$(s.rating_total),this.rating_total_text=!(!s||!s.rating_total_text)&&$(s.rating_total_text),this.rating_pgs_bar=!(!s||!s.rating_pgs_bar)&&$(s.rating_pgs_bar),this.rating_pgs_bad_bar=!(!s||!s.rating_pgs_bad_bar)&&$(s.rating_pgs_bad_bar),this.rating_box=!(!s||!s.rating_box)&&$(s.rating_box),this.voting=!1,this.save_callbacks(),this.init_btns()};return d.prototype={get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new i(e,t,{relative_to:this.pop_relative,position:{v:"below",h:"left"},trigger:!1,mouseout_autoclose:3e3,mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"],popup_class:this.pop_class}),this.popup},init_btns:function(){this.good_btn.length&&this.init_btn(this.good_btn,this.url_good,!0,this.data_good),this.bad_btn.length&&this.init_btn(this.bad_btn,this.url_bad,!1,this.data_bad)},init_btn:function(i,s,o,a){var r=this;i.on("click",function(l){if(l.preventDefault(),!r.voting){r.voting=!0;var d=i.html();r.good_btn.addClass("disabled"),r.bad_btn.addClass("disabled"),i.html(t.getImg()),$.post({url:s,dataType:"json",data:a,success:function(e){i.html(d);var t;if(e.result){if(r.rating_total&&r.rating_total.text(e.total),r.rating_total_text&&(e.vbad+e.vgood===0?r.rating_total_text.text(n.__("profile.vote.no_vote")):e.vbad+e.vgood===1?r.rating_total_text.text(n.__("profile.vote.one_vote")):r.rating_total_text.text(n.__("profile.vote.nb_votes",{"%number%":e.total}))),r.rating_pgs_bar&&r.rating_pgs_bar.css("width",e.rating+"%"),r.rating_pgs_bad_bar&&r.rating_pgs_bad_bar.css("width",100-e.rating+"%"),r.rating_box||r.rating_good_perc){var s=e.rating.toFixed(2).split(".");1===s.length&&s.push("00"),r.rating_box&&r.rating_box.html(s[0]+'<span class="mobile-hide">.'+s[1]+"</span>%"),r.rating_good_perc&&r.rating_good_perc.html(s[0]+'<span class="mobile-hide">.'+s[1]+"</span>%")}if(r.good_btn.children(".value").text(e.vgood),r.good_btn.children(".rating-inbtn").text(e.vgood_uf),r.rating_good_nbr&&r.rating_good_nbr.text(e.vgood_uf),r.rating_bad_perc){var a=(100-e.rating).toFixed(2).split(".");1===a.length&&a.push("00"),r.rating_bad_perc.html(a[0]+'<span class="mobile-hide">.'+a[1]+"</span>%")}r.bad_btn.children(".value").text(e.vbad),r.bad_btn.children(".rating-inbtn").text(e.vbad_uf),r.rating_bad_nbr&&r.rating_bad_nbr.text(e.vbad_uf),t=r.call_callbacks_success(o),t="<strong>"+t+"</strong>"}else{if(900===e.code)return void require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e.data.action_need_verified_email).show()});t='<strong class="text-danger">'+e.message+"</strong>"}r.disable_confirm_pop||r.get_popup(i,t).open()},error:function(){i.html(d),r.get_popup(i,'<strong class="text-danger">'+n.__("error.err_please_reload")+"</strong>").open()},complete:function(){r.call_callbacks_end(o),r.voting=!1,r.good_btn.removeClass("disabled"),r.bad_btn.removeClass("disabled")}}),e.dyn.login_info.is_logged||r.call_callbacks_notlogged(o)}})},set_success_func:function(e){this.success_func=e,this.save_callbacks()},set_notlogged_func:function(e){this.notlogged_func=e,this.save_callbacks()},update_callbacks_video_id:function(e,t){if("undefined"!=typeof s[e]){var i,n=s[e];"undefined"==typeof s[t]&&(s[t]={success_func:{},notlogged_func:{}});for(i in n.success_func)s[t].success_func[i]=n.success_func[i];for(i in n.notlogged_func)s[t].notlogged_func[i]=n.notlogged_func[i]}},get_callbacks_video_id:function(){return"undefined"!=typeof l[this.id]?l[this.id]:this.url_good&&"undefined"!=typeof r[this.url_good]?r[this.url_good]:!(!this.url_bad||"undefined"==typeof r[this.url_bad])&&r[this.url_bad]},call_callbacks_end:function(e){var t=this.get_callbacks_video_id();if(!t||"undefined"==typeof s[t])return!1;for(var i in s[t].end_func)try{s[t].end_func[i](e)}catch(n){console.error(n)}},call_callbacks_success:function(e){var t=this.get_callbacks_video_id();if(!t||"undefined"==typeof s[t])return n.__("video.votes.thanks");var i=!1;for(var o in s[t].success_func)try{var a=s[t].success_func[o](e);o===this.id&&(i=a)}catch(r){console.error(r)}return i||(i=n.__("video.votes.thanks")),i},call_callbacks_notlogged:function(e){var t=this.get_callbacks_video_id();if(!t||"undefined"==typeof s[t])return!1;for(var i in s[t].notlogged_func)try{s[t].notlogged_func[i](e)}catch(n){console.error(n)}},save_callbacks:function(){var e=-1,t="undefined"!=typeof l[this.id],i=this.url_good&&"undefined"!=typeof r[this.url_good],n=this.url_bad&&"undefined"!=typeof r[this.url_bad];if(t||i||n){if(t&&(e=l[this.id]),i){var a=r[this.url_good];-1!==e&&e!==a?(this.update_callbacks_video_id(a,e),r[this.url_good]=e):-1===e&&(e=a)}if(n){var d=r[this.url_bad];-1!==e&&e!==d?(this.update_callbacks_video_id(d,e),r[this.url_bad]=e):-1===e&&(e=d)}}else o++,e=o,l[this.id]=e,this.url_good&&(r[this.url_good]=e),this.url_bad&&(r[this.url_bad]=e);"undefined"==typeof s[e]&&(s[e]={end_func:{},success_func:{},notlogged_func:{}}),"function"==typeof this.end_func&&(s[e].end_func[this.id]=this.end_func),"function"==typeof this.success_func&&(s[e].success_func[this.id]=this.success_func),"function"==typeof this.notlogged_func&&(s[e].notlogged_func[this.id]=this.notlogged_func)}},d}),define("text!skins/common/mozaique/thumb_block_menu/btn.mustache",[],function(){return'<button class="action-menu"><span class="open icon-f icf-ellipsis-v"></span><span class="close icon-f icf-close-thin"></span></button>'}),define("skins/common/mozaique/thumb_block_menu/one_tb_menu",["config/main","mustache","lib/helpers/popup","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/events","skins/common/profile/sub_actions","skins/common/history/page_view_history","skins/common/suggests/suggests_manager","skins/common/video/vote_manager","skins/common/tracker/videos_i_like","text!./btn.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=function(e,n,s){this.$ThumbBlock=$(e),this.$TbInside=this.$ThumbBlock.children(".thumb-inside").first(),this.sId=String(parseInt(n)),this.options=s||{},this.$Btn=$(t.render(c)),this.$TbInside.append(this.$Btn);var o={mouseout_autoclose:3e3,mouseout_autoclose_openevents:["click","mouseover_btn_timer"],popup_class:"tb-menu",autoclose_on_same_level:"thumb_block_menu"};"favlist"===this.options.type&&(this.options.bBtnAlwaysVisible=!0,o.relative_to=this.options.favorite.getMainContainer()),this.popup=new i(this.$Btn,"",o),this.setVoteGoodEndFunc(this.options.fVoteGoodEnd),this.setVoteBadEndFunc(this.options.fVoteBadEnd),this.setUnvoteEndFunc(this.options.fUnvoteEnd),this.setOnOpenFunc(this.options.fOnOpen),this.setOnCloseFunc(this.options.fOnClose);var a=this;return this.popup.onOpen=function(){a.set_content(),a.$ThumbBlock.addClass("menu-opened"),a.fOnOpen&&a.fOnOpen()},this.popup.onClose=function(){a.$ThumbBlock.removeClass("menu-opened"),a.options.bBtnAlwaysVisible||a.start_hide_timer(),a.fOnClose&&a.fOnClose()},this.$TbInside.length>0&&(this.trigger_event,this.trigger_out_event,this.start_timer,this.hide_timer,this.last_start,this.touch_timer,this.iTmpLocked=!1,this.options.bBtnAlwaysVisible?$(this.$Btn).stop().show().css("opacity",1):this.$TbInside.on(this.ON_EVENT,function(e){if("touchstart"===e.type)return void(a.touch_timer||(a.touch_timer=setTimeout(function(){a.touch_timer=null,a.show("touchstart")},200)));a.show(e.type)}).on("touchend",function(){a.touch_timer&&clearTimeout(a.touch_timer)}).on("mouseleave",function(e){a.hide(e.type)})),this.$ThumbBlock.addClass("tbm-init-ok"),this};return f.prototype={ON_EVENT:/iPad|iPhone|iPod/.test(navigator.userAgent)||/Mac OS X/.test(navigator.userAgent)&&navigator.maxTouchPoints>2?"swipe touchmove":"swipe touchstart mouseenter",show:function(e){if(!0===this.bDisabled||o.isScrolling()||0===this.options.aEntries.length)return!1;if("mouseenter"===e&&"mouseleave"===this.trigger_out_event&&(this.trigger_out_event=!1),"mouseleave"!==this.trigger_out_event){if("mouseenter"===e&&this.iTmpLocked){if(!((new Date).getTime()-this.iTmpLocked>200))return;this.iTmpLocked=!1}this.start_timer&&(window.clearTimeout(this.start_timer),this.start_timer=null);var t=(new Date).getTime();if(this.last_start>0&&t-this.last_start<300){this.last_start=t;var i=this;return void(this.start_timer=window.setTimeout(function(){i.show(e)},300))}this.last_start=t,this.trigger_event=e,this.hide(!0),this.start_hide_timer(),$(this.$Btn).stop().show().css("opacity",1),this.$ThumbBlock.addClass("show-tb-menu")}},hide:function(e,t){if(!0===this.bDisabled)return!1;this.stop_hide_timer(),!0!==e&&"swipe"===this.trigger_event||(t&&(this.iTmpLocked=(new Date).getTime()),this.trigger_out_event=e,this.popup.isOpened()||$(this.$Btn).hide(),this.$ThumbBlock.removeClass("show-tb-menu"))},getBtn:function(){return this.$Btn},getId:function(){return this.sId},reinitButton:function(){return this.popup.initButton()},disable:function(){this.$Btn.length>0&&(this.$Btn.remove(),this.bDisabled=!0)},close_popup:function(){this.popup.close()},start_hide_timer:function(){if(!0===this.bDisabled)return!1;this.stop_hide_timer();var e=this;this.hide_timer=window.setTimeout(function(){e.popup.isOpened()||$(e.$Btn).fadeOut(1500,function(){e.hide(!0)})},2e3)},stop_hide_timer:function(){if(!0===this.bDisabled)return!1;$(this.$Btn).stop().show().css("opacity",1),this.hide_timer&&(window.clearTimeout(this.hide_timer),this.hide_timer=null)},set_content:function(){"video"===this.options.type&&this.set_content_video()},reset_content:function(){if(!0===this.bDisabled)return!1;this.$Content=!1},get_profile:function(){return e.dyn.login_info.is_logged&&e.dyn.login_info.profile?e.dyn.login_info.profile:"unlogged"},set_content_video:function(){if(!0===this.bDisabled)return!1;if(!this.$Content){this.popup.setContent(s.getIcf());var e=this;setTimeout(function(){a.loadSubInfoOneUserOneVid(e.get_profile(),e.sId,function(t){if(!t.found)return void e.popup.setContent($("<p>"+n.__("loading.error")+"</p>"));e.sVote=!!t.vote&&t.vote,e.sUrlVoteGood=!!t.vote_good&&t.vote_good,e.sUrlVoteBad=!!t.vote_bad&&t.vote_bad,e.uploader_id=!!t.user_id&&t.user_id,e.uploader_profile=!!t.user_name&&t.user_name,e.is_owner=t.is_owner?t.is_owner:null,e.is_follower=t.is_follower?t.is_follower:null,e.sub_csrf=t.csrf?t.csrf:null,e.rejected=t.is_rejected?t.is_rejected:null,e.reject_csrf=t.reject_csrf?t.reject_csrf:null,e.$Content=$("<ul></ul>");for(var i=0;i<e.options.aEntries.length;i++){var s=e.options.aEntries[i];"function"==typeof e[s]&&e[s](e)}e.popup.setContent(e.$Content)},function(){e.popup.setContent($("<p>"+n.__("error.err_please_reload")+"</p>")),e.$Content=$("<ul></ul>");for(var t=0;t<e.options.aEntries.length;t++){var i=e.options.aEntries[t];"function"==typeof e[i]&&e[i](e)}e.popup.setContent(e.$Content)})},10)}},setEntries:function(e){if(!0===this.bDisabled)return!1;this.options.aEntries=e,this.reset_content()},setOnOpenFunc:function(e){this.fOnOpen="function"==typeof e&&e},setOnCloseFunc:function(e){this.fOnClose="function"==typeof e&&e},getVote:function(){return this.sVote},setVote:function(e){"GOOD"!==e&&"BAD"!==e&&(e=!1),this.sVote=e,"GOOD"===this.sVote?(this.$ThumbBlock.addClass("voted-good").removeClass("voted-bad voted-null"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-good").addClass("active"),this.$Content.find(".vote-actions .vote-action-bad").removeClass("active")),this.fVoteGoodEnd&&this.fVoteGoodEnd()):"BAD"===this.sVote?(this.$ThumbBlock.addClass("voted-bad").removeClass("voted-good voted-null"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-bad").addClass("active"),this.$Content.find(".vote-actions .vote-action-good").removeClass("active")),this.fVoteBadEnd&&this.fVoteBadEnd()):(this.$ThumbBlock.addClass("voted-null").removeClass("voted-bad voted-good"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-bad").removeClass("active"),this.$Content.find(".vote-actions .vote-action-good").removeClass("active")),this.fUnvoteEnd&&this.fUnvoteEnd())},setVoteGoodEndFunc:function(e){this.fVoteGoodEnd="function"==typeof e&&e},setVoteBadEndFunc:function(e){this.fVoteBadEnd="function"==typeof e&&e},setUnvoteEndFunc:function(e){this.fUnvoteEnd="function"==typeof e&&e},add_content_v_vote_actions:function(){if(this.sUrlVoteGood&&this.sUrlVoteBad&&!this.is_owner){var t=$("<li class='vote-actions'></li>"),i=this.sVote||!1,n=this,s=function(e){
e&&-1!==e.indexOf(parseInt(n.sId))&&(i="GOOD")};i||e.dyn.login_info.is_logged||!u.isTracking()||(xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){u.getIds().then(function(e){s(e)})}):s(u.getIds()));var o=$("<a class='btn btn-default vote-action-good"+("GOOD"===i?" active":"")+"'><span class='icon-f icf-thumb-up'></span></a>");t.append(o);var a=$("<a class='btn btn-default vote-action-bad"+("BAD"===i?" active":"")+"'><span class='icon-f icf-thumb-down'></span></a>");t.append(a),new d(o,a,this.sUrlVoteGood,this.sUrlVoteBad,{pop_class:"no-arrow",disable_confirm_pop:!0,end_func:function(){"undefined"!=typeof n.popup&&"function"==typeof n.popup.close&&n.popup.close()},success_func:function(e){return n.setVote(e?"GOOD":"BAD"),""},notlogged_func:function(e){e?u.addVideo(n.sId):u.removeVideo(n.sId),n.setVote(e?"GOOD":"BAD")}}),this.$Content.append(t)}},add_content_v_suggested_video:function(){var e,t,i=this;this.options.origin_v_id&&(e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("suggest.remove_video")+"</a>"),t.on("click",function(){l.remove_vid_from_suggest(i.options.origin_v_id,function(){$("#video_"+i.sId).fadeOut(400,function(){$(this).remove()})}),i.popup.close()}),e.append(t),this.$Content.append(e)),e=$("<li></li>"),l.is_feature_enabled()?(t=$("<a><span class='icon-f icf-ban'></span>"+n.__("suggest.disable")+"</a>"),t.on("click",function(){l.toggle_feature(!1)})):(t=$("<a><span class='icon-f icf-suggest-square'></span>"+n.__("suggest.enable")+"</a>"),t.on("click",function(){l.toggle_feature(!0)})),e.append(t),this.$Content.append(e)},add_content_v_toggle_history:function(){if(r.canTrack()){var e,t;r.isTracking()?(e=$("<li class='disable-history'></li>"),t=$("<a><span class='icon-f icf-ban'></span>"+n.__("history.disable"+(l.is_feature_enabled()?"_and_suggests":""))+"</a>"),t.on("click",function(){r.stopTracking(function(){$("html,body").scrollTop(0),window.location.reload()})})):(e=$("<li class='enable-history'></li>"),t=$("<a><span class='icon-f icf-history'></span>"+n.__("history.enable")+"</a>"),t.on("click",function(){r.startTracking(function(){$("html,body").scrollTop(0),window.location.reload()})})),e.append(t),this.$Content.append(e)}},add_content_v_not_interested:function(){var e,t,i=this;e=$("<li></li>"),t=$("<a><span class='icon-f icf-ban'></span>"+n.__("misc.not_interested")+"</a>"),t.on("click",function(){i.popup.close(),i.$ThumbBlock.fadeOut(function(){i.$ThumbBlock.remove()}),$.post({url:"/profiles/"+i.get_profile()+"/video/reject/"+i.sId,data:{csrf:i.reject_csrf}})}),e.append(t),this.$Content.append(e)},add_content_v_report_btn:function(){if(e.dyn.login_info.is_logged){var t,i;t=$("<li></li>"),i=$("<a href='/account/support' target='_blank'><span class='icon-f icf-flag'></span>"+n.__("misc.report_issue")+"</a>"),t.append(i),this.$Content.append(t)}}},f}),define("skins/common/mozaique/thumb_block_menu",["config/main","mustache","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/events","./thumb_block_menu/one_tb_menu"],function(e,t,i,n,s,o){var a=function(){this.oEntries={vote_actions:"add_content_v_vote_actions",suggested_video:"add_content_v_suggested_video",toggle_history:"add_content_v_toggle_history",not_interested:"add_content_v_not_interested",report:"add_content_v_report_btn"},this.aEntriesOrder=[]};return a.prototype={init_listing:function(e,t){if(!0===this.bDisabled)return!1;t||(t={}),this.aInitiated||(this.aInitiated=[]);var i="favlist"===t.type?"favlist-elem":"thumb-block",n=$("."+i,e);if(0!==n.length||(e.length>0&&e.each(function(){$(this).hasClass(i)&&(n=n.add($(this)))}),0!==n.length)){var s=this,a=[];return n.each(function(){var e=$(this),i=e.prop("id"),n=e.hasClass("tbm-init-ok")||e.hasClass("thumb-ad"),r=!1,l={};if(!l.type&&i&&("video_"===i.substring(0,6)&&i==="video_"+String(parseInt(i.substring(6)))?l.type="video":"favlist_"===i.substring(0,8)&&i==="favlist_"+String(parseInt(i.substring(8)))&&(l.type="favlist")),!n){if(l.aEntries=s.getOrderedEntries(),"video"===l.type){r=String(parseInt(i.substring(6)));var d=e.data("origin-video-id");d&&(l.origin_v_id=d)}else"favlist"===t.type&&(l.favorite=t.favorite,r=t.favorite.sId);if(r){var u=new o(e,r,l);s.aInitiated.push(u),a.push(u)}}}),a}},getById:function(e){if(!this.aInitiated||!this.aInitiated.length)return!1;for(var t=0;t<this.aInitiated.length;t++)if(oTBMenu=this.aInitiated[t],oTBMenu.getId()===e)return oTBMenu;return!1},setEntry:function(e,t){this.oEntries[e]=t},getOrderedEntries:function(){for(var e=[],t=0;t<this.aEntriesOrder.length;t++){var i=this.aEntriesOrder[t];"string"==typeof this.oEntries[i]&&e.push(this.oEntries[i])}return e},orderEntries:function(e){this.aEntriesOrder=e},addEntryToDefaultOrder:function(e){if(-1!==this.aEntriesOrder.indexOf(e))return!1;this.aEntriesOrder.push(e),this.update_initiated_contents()},update_initiated_contents:function(){if(this.aInitiated){var e=this.getOrderedEntries();for(var t in this.aInitiated)this.aInitiated[t].setEntries(e)}},reset_initiated_contents:function(){if(this.aInitiated)for(var e in this.aInitiated)this.aInitiated[e].reset_content()},disableSubscribeTooltip:function(e){this.bAllSubscribeTooltipDisabled="boolean"!=typeof e||e},addSubscribeEndFunction:function(e){"undefined"==typeof this.aSubscribeEndFunctions&&(this.aSubscribeEndFunctions=[]),this.aSubscribeEndFunctions.push(e)},executeSubscribeEndFunctions:function(e,t){if("undefined"!=typeof this.aSubscribeEndFunctions)for(var i in this.aSubscribeEndFunctions){var n=this.aSubscribeEndFunctions[i];"function"==typeof n&&n(e,t)}},disableAll:function(){this.bDisabled=!0;for(var e in this.aInitiated){var t=this.aInitiated[e];t&&"function"==typeof t.disable&&t.disable()}}},a}),define("skins/common/video/copy_link",["lib/helpers/popup","lib/i18n!front"],function(e,t){var i=function(e,i){this.$container=$(e),this.$inp=this.$container.find("input"),this.$btn=this.$container.find(".copy-btn"),this.oManager=i;var n=this;this.$btn.on("click",function(e){e.preventDefault(),e.stopPropagation(),navigator.clipboard?navigator.clipboard.writeText(n.$inp.val()).then(function(){n.oManager.open_tooltip(n.$inp,t.__("misc.text_copied"))})["catch"](function(){n.oManager.open_tooltip(n.$inp,n.$inp.val())}):(n.$inp.focus(),n.$inp.select(),document.execCommand("copy"),n.oManager.open_tooltip(n.$inp,t.__("misc.text_copied")))}).addClass("init-ok")};i.prototype={$container:!1,$btn:!1,$inp:!1,oManager:!1};var n=function(e){0===$(e).length&&(e="body"),e=$(e);var t=this;e.find(".copy-link").each(function(){t.is_initiated($(this))||t.copy_links.push(new i($(this),t))})};return n.prototype={tooltip:null,copy_links:[],is_initiated:function(e){for(var t in this.copy_links)if(this.copy_links[t].$container.is(e))return!0;return!1},open_tooltip:function(t,i){null===this.tooltip?this.tooltip=new e(t,"",{trigger:!1,position:{v:"above",h:"left"},popup_class:"link-copied-popup",autoclose:2e3}):this.tooltip.setButton(t),this.tooltip.open(),this.tooltip.setContent($("<p>"+i+"</p>"))}},n}),define("text!skins/common/video/share.mustache",[],function(){return'<ul class="share-toolbox">\n\t{{#share}}\n\t\t<li>\n\t\t\t<a class="{{{ class }}}" href="{{{ href }}}" title="{{{ tool }}}"{{#target_blank}} target="_blank"{{/target_blank}}><span class="icon-f icf-{{{ icf }}}"></span></a>\n\t\t</li>\n\t{{/share}}\n</ul>'}),define("skins/common/video/share",["mustache","static/utils","lib/i18n!front","skins/common/video/copy_link","text!skins/common/video/share.mustache"],function(e,t,i,n,s){var o=function(){};return o.prototype={getShareElem:function(o,a,r){"string"!=typeof r&&(r="default"),o=t.escape(o,!0);var l="undefined"!=typeof window.navigator&&"function"==typeof window.navigator.share;-1!==o.indexOf("#")&&(o=o.split("#"),o=o[0]);var d=encodeURI(o),u=encodeURI(t.escape(a,!0)),c=[{tool:"Twitter",href:"http://twitter.com/intent/tweet?text="+u+" - "+d,icf:"twitter","class":"twitter",target_blank:!0},{tool:"Reddit",href:"http://www.reddit.com/submit?url="+d+"&title="+u,icf:"reddit icf-white-fill","class":"reddit",target_blank:!0},{tool:i.__("report_form.email"),href:"mailto:?subject="+u+"&amp;body="+d,icf:"envelop icf-white-fill","class":"envelop",target_blank:!0}];l&&c.unshift({tool:i.__("misc.other_options"),href:"#share",icf:"device-mobile-share","class":"native-share"}),"full"===r&&c.push({tool:i.__("misc.copy_url"),href:o,icf:"copy","class":"copy-btn"});var f=$(e.render(s,{share:c}));return"full"===r&&(f.find(".copy-btn").parent().addClass("copy-link").append($('<input type="text" value="'+o+'"/>')),new n(f)),l&&f.find(".native-share").on("click",function(e){e.preventDefault(),window.navigator.share({title:t.escape(a),url:o})}),f}},new o}),define("skins/default/video/watch_later/watch_later_tracker",["skins/common/tracker/user_videos_list_tracker"],function(e){return new e("aWatchLater")}),define("skins/default/video/watch_later",["config/main","lib/i18n!front","lib/helpers/popup","./watch_later/watch_later_tracker","skins/common/basic_feature"],function(e,t,i,n,s){var o=function(e,t,i,n){this.btn=e,this.video_id=t,this.csrf=i,this.options=n||{};var s=this;return this.btn.on("click",function(e){e.preventDefault(),s.click_func()}).addClass("init-ok"),this};o.prototype={btn:!1,video_id:0,popup:!1,csrf:!1,update_success:function(e){this.popup.open(),this.popup.setContent($("<p>"+t.__(e?"video.already_added_watch_later":"video.added_watch_later",{"%link_start%":'<a href="/watch-later">',"%link_end%":"</a>"})+"</p>")),"function"==typeof this.options.end_click_success_func&&this.options.end_click_success_func(),"function"==typeof this.options.end_click_func&&this.options.end_click_func()},update_error:function(e){this.popup.open(),this.popup.setContent($("<p>"+(e||t.__("form.error_modification_not_saved"))+"</p>")),"function"==typeof this.options.end_click_error_func&&this.options.end_click_error_func(),"function"==typeof this.options.end_click_func&&this.options.end_click_func()},click_func:function(){if(!1===this.popup&&(this.popup=new i(this.options.$confirmPos&&this.options.$confirmPos.length?this.options.$confirmPos:this.btn,"",{trigger:!1,autoclose:3e3,popup_class:"string"==typeof this.options.popup_class?this.options.popup_class:"watch-later-pop"})),e.dyn.login_info.is_logged){var s=this;$.post("/api/playlists/watch-later/add/"+this.video_id,{csrf:this.csrf},function(e){e.result?s.update_success(e.already_added):s.update_error(e.message)},"json")}else if(n.isTracking()){var s=this,o=function(e){var t=e.includes(s.video_id);t||n.addVideo(s.video_id),s.update_success(t)};xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){n.getIds().then(function(e){o(e)})}):o(n.getIds())}else this.update_error(t.__("video.cant_add_watch_later"))}};var a=function(){this.oFeature=new s(s.S_F_WATCH_LATER),this.oFeature.activateLoadingPopup(),this.oFeature.activateErrorPopup(),e.dyn.wl||(e.dyn.wl={in_listing:this.oFeature.isEnabled()})};return a.prototype={btns:[],list_btns:$(),rmv_btns:[],init_btn:function(e,t,i){e.hasClass("init-ok")||(this.btns.push(new o($(e),t,this.get_add_csrf(),i)),this.update_view())},init_listing:function(t,i){var n=$(".thumb-block .watch-later",t).not(".init-ok");if(0!==n.length||(t.length>0&&t.each(function(){$(this).hasClass("thumb-block")&&(n=n.add($(this).find(".watch-later")))}),0!==n.length)){var s=this;e.dyn.login_info.is_logged?this.is_feature_enabled()?$(n).each(function(){var e=$(this),t=e.parents(".thumb-block"),n=xv.thumbs.getVideoId(t);n===String(parseInt(n))&&(s.btns.push(new o(e,n,s.get_add_csrf(),i)),s.list_btns=s.list_btns.add(e))}):$(n).remove():require(["skins/default/form/login"],function(e){e.setupLinks(n),n.addClass("init-ok")}),this.update_view()}},get_add_csrf:function(){return e.dyn.wl&&e.dyn.wl.put?e.dyn.wl.put:""},get_del_csrf:function(){return e.dyn.wl&&e.dyn.wl.rem?e.dyn.wl.put:""},is_feature_enabled:function(){return this.oFeature.isEnabled()},toggle_feature:function(t){var i=this;this.oFeature.toggle(function(n){e.dyn.wl.in_listing=n,"undefined"!=typeof xv.thumb_block_menus&&"function"==typeof xv.thumb_block_menus.reset_initiated_contents&&xv.thumb_block_menus.reset_initiated_contents(),i.update_view(),"function"==typeof t&&t()},!this.is_feature_enabled())},update_view:function(){"undefined"!=typeof xv.settings_btn&&"function"==typeof xv.settings_btn.update_watch_later_toggle_btn&&xv.settings_btn.update_watch_later_toggle_btn(),this.list_btns.length>0&&(this.is_feature_enabled()?this.list_btns.removeClass("disabled"):this.list_btns.addClass("disabled"))}},new a}),define("skins/common/history/easy_tracker",["static/tracker"],function(e){var t=[],i=function(i){return t[i]||(t[i]=new e("EZtrk_"+i,5e3)),t[i]},n=function(){};return n.prototype={canTrack:function(e){return i(e).canTrack()},isTracking:function(e){return i(e).isTracking()},add:function(e,t){i(e).addId(t)},overrigth_all:function(e,t){this.clear(e);for(var i in t)this.add(e,t[i])},clear:function(e){return i(e).clear()},getAll:function(e){return i(e).getIdsList().reverse()},getLast:function(e){var t=this.getAll(e);return t.length>0&&t[0]}},new n}),define("skins/common/history/one_info_tracker",["./easy_tracker"],function(e){var t=function(){};return t.prototype={canTrack:function(t){return e.canTrack(t)},get:function(t){return e.getLast(t)},set:function(t,i){return e.overrigth_all(t,[i])},unset:function(t){e.clear(t)}},new t}),define("skins/default/mozaique/thumb_block_viewed",["config/main","skins/common/history/one_info_tracker","skins/common/history/page_view_history","skins/common/basic_feature"],function(e,t,i,n){var s=function(){return this.bIDB=xv.indexedDb&&xv.indexedDb.getDbIsSupported(),this.oFeature=new n(n.S_F_VIDEO_VIEWS_ICON),this.oFeature.activateLoadingPopup(),this.oFeature.activateErrorPopup(),e.dyn.vvi||(e.dyn.vvi={in_listing:this.oFeature.isEnabled()}),this};return s.prototype={is_feature_enabled:function(){return this.oFeature.isEnabled()},toggle_feature:function(t,i){i="boolean"==typeof i?i:!this.is_feature_enabled();var n=this;this.oFeature.toggle(function(i){e.dyn.vvi.in_listing=i,i?n.init_listing():($(".thumb-block.viewed").removeClass("tbv-init-ok"),$(".thumb-block.viewed .video-viewed").remove()),"undefined"!=typeof xv.settings_btn&&"function"==typeof xv.settings_btn.update_viewed_icon_toggle_btn&&xv.settings_btn.update_viewed_icon_toggle_btn(),"undefined"!=typeof xv.thumb_block_menus&&"function"==typeof xv.thumb_block_menus.reset_initiated_contents&&xv.thumb_block_menus.reset_initiated_contents(),"function"==typeof t&&t()},i)},init_listing:function(e){if(this.is_feature_enabled()){var t=!!this.bIDB&&xv.indexedDb.getStoreExist({store_name:"page_view_history.ids"}),i=this,n=function(){i.update_viewed_tb(e);var t=$(".thumb-block.viewed",e);0===t.length&&(e&&e.length>0&&e.each(function(){var e=$(this);e.hasClass("thumb-block")&&e.hasClass("viewed")&&(t=t.add(e))}),0===t.length)||t.each(function(){var e=$(this),t=e.children(".thumb-inside").first();!(e.hasClass("tbv-init-ok")||e.hasClass("thumb-ad"))&&t.length>0&&(e.addClass("tbv-init-ok"),t.append($('<span class="video-viewed"><span class="icon-f icf-eye"></span></span>')))})};this.viewed_list?n():this.bIDB?t?xv.indexedDb.manageTempStackAdd(function(){i.update_logged_list(e,!1).then(function(e){e&&n()})}):(i.update_logged_list(e,!0),n()):n()}},update_viewed_tb:function(e){if(this.viewed_list){var t=$(".thumb-block",e);if(0!==t.length||(e&&e.length>0&&e.each(function(){$(this).hasClass("thumb-block")&&(t=t.add($(this)))}),0!==t.length)){var i=this;t.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e);-1!==i.viewed_list.indexOf(t)&&e.addClass("viewed")})}}},update_logged_list:function(n,s){if(this.viewed_list)return!0;var o=this;return fnGetVideosTimestamp=function(i){o.viewed_list=[];for(var s in i)o.viewed_list.push(parseInt(s));if(!e.dyn.login_info.is_logged||!t.canTrack("tb_viewed_updated"))return!0;var a=t.get("tb_viewed_updated"),r=(new Date).getTime();if(a>0&&r-a<36e5){if(t.get("tb_viewed_list")){var l=t.get("tb_viewed_list");for(var d in l)-1===o.viewed_list.indexOf(parseInt(l[d]))&&o.viewed_list.push(parseInt(l[d]))}return!0}return $.post("/history/all-ids",{ids:i},function(e){if(e.result){t.set("tb_viewed_list",e.ids),o.viewed_list=[];for(var i in e.ids)o.viewed_list.push(parseInt(e.ids[i]));o.init_listing(n)}},"json"),t.set("tb_viewed_updated",(new Date).getTime()),!1},this.bIDB?s?fnGetVideosTimestamp(i.getVideosIdsTimestamps(s)):new Promise(function(e,t){xv.indexedDb.manageTempStackAdd(function(){i.getVideosIdsTimestamps().then(function(t){e(fnGetVideosTimestamp(t))})})}):fnGetVideosTimestamp(i.getVideosIdsTimestamps())}},new s}),define("lib/helpers/popup/tooltip",["lib/helpers/popup"],function(e){function t(){this.oTooltip=null}return t.prototype={create:function(t,i,n){var n=n||{};n.is_html||(t="<strong>"+t+"</strong>"),this.oTooltip=new e(i,t,{position:{v:"below",h:"left"},trigger:!1,autoclose:"number"!=typeof n.autoclose_timer||n.autoclose_timer,closebtn:"number"!=typeof n.autoclose_timer||n.autoclose_timer>5500,popup_class:"string"==typeof n.popup_class?n.popup_class:null,autoclose_on_same_level:"string"==typeof n.autoclose_on_same_level&&n.autoclose_on_same_level})},open:function(){this.oTooltip&&this.oTooltip.open()},close:function(){this.oTooltip&&this.oTooltip.close()},setOption:function(e,t){this.oTooltip&&(this.oTooltip.options[e]=t)},setButton:function(e){this.oTooltip&&this.oTooltip.setButton(e)},setContent:function(e,t){this.oTooltip&&!t?this.oTooltip.setContent($("<strong>"+e+"</strong>")):this.oTooltip.setContent(e)}},t}),define("text!skins/common/profile/subscribe/subscribed.mustache",[],function(){return'<div class=\'subscribed\'>\n\t<p>{{ subscribed }}{{^hide_view_activities}} <a href="/my-feed">{{ view_activities }}</a>{{/hide_view_activities}}{{#has_related}} <span>{{ also_like }}:</span>{{/has_related}}</p>\n\t{{#has_related}}<div class="profileslist">{{{ related_html }}}</div>{{/has_related}}\n</div>\n'}),define("text!skins/common/profile/subscribe/related_profile.mustache",[],function(){return'\n<div class="profile">\n\t<a class="profile-img" href="{{ url }}">\n\t\t{{{ img }}}\n\t\t<span class="flag-small flag-{{ country }}"></span>\n\t</a>\n\t<p class="profile-name">\n\t\t<a href="{{ url }}" title="{{ username_display }}">{{ username_display }}</a>\n\t</p>\n\t<div id="{{ div_sub_id }}"></div>\n\t{{#about_me}}\n\t\t<p class="profile-desc">\n\t\t\t{{{ about_me }}}\n\t\t</p>\n\t{{/about_me}}\n</div>'}),define("text!skins/default/profile/subscribe/btn_sub.mustache",[],function(){return'<span class="user-subscribe">\n\t<span class="count">{{ count }}</span>\n</span>'}),define("skins/default/profile/subscribe/btns",["mustache","config/main","lib/i18n!front","skins/common/profile/sub_actions","skins/default/profile/subscribe/btn","text!skins/default/profile/subscribe/btn_sub.mustache"],function(e,t,i,n,s,o){var a={unsubed_text:i.__("subscriptions.subs_short")};return init_btns=function(i,r){var l=[],d={},u={};"object"==typeof r&&"object"==typeof r.sub_options&&(u=r.sub_options);for(var c in a)"undefined"==typeof u[c]&&(u[c]=a[c]);for(var c in i){var f=i[c];l.push(f.user_id),d[f.user_id]=c;var h=$(e.render(o,{count:f.nb_subs}));f.btn_class&&h.addClass(f.btn_class),f.prepend_btn_to?(f.parent=$(f.prepend_btn_to),f.parent.prepend(h)):f.append_btn_to&&(f.parent=$(f.append_btn_to),f.parent.append(h))}if(t.dyn.login_info.is_logged&&t.dyn.login_info.profile)n.loadSubInfoListUsers(t.dyn.login_info.profile,l,function(e){if(!0===e.result)for(var n in e.users){var o=i[d[n]];new s(o.parent.find(".user-subscribe"),o.user_name,n,e.users[n].csrf,e.users[n].is_follower,o.user_name===t.dyn.login_info.profile,u)}});else for(var c in i){var f=i[c];new s(f.parent.find(".user-subscribe"),f.user_name,f.user_id,null,null,!1,u)}},init_btns}),define("skins/default/profile/subscribe/btn",["config/main","static/utils","lib/helpers/popup","lib/helpers/popup/tooltip","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","skins/common/profile/sub_actions"],function(e,t,i,n,s,o,a,r){var l=function(e,t,i,n,s,o,a){if(!o&&(e=$(e),!e.data("is-init"))){this.$btn=e,this.$btn.data("is-init",!0),this.action_label=this.$btn.find(".action"),this.username=t,this.id_user=i,this.related_users={},this.options=a||{},this.options.add_relateds_to="undefined"!=typeof this.options.add_relateds_to&&this.options.add_relateds_to,this.options.tooltip_hide_after="undefined"!=typeof this.options.tooltip_hide_after?this.options.tooltip_hide_after:-1;var l=function(e,t,i){if("number"==typeof e&&-1!==[1,2,4,5].indexOf(e)||(e=i),e!==t)return e;switch(t){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4}};if(this.options.subed_icf_pos=l(this.options.subed_icf_pos,3,5),this.options.unsubed_icf_pos=l(this.options.unsubed_icf_pos,3,5),this.options.subed_text_pos=l(this.options.subed_text_pos,this.options.subed_icf_pos,4),this.options.unsubed_text_pos=l(this.options.unsubed_text_pos,this.options.unsubed_icf_pos,4),"undefined"!=typeof this.options.subed_icf&&"string"!=typeof this.options.subed_icf||(this.$subedIcf=$("<span class='icon-f icf-"+("string"==typeof this.options.subed_icf?this.options.subed_icf:"feed")+"'></span>")),"string"==typeof this.options.unsubed_icf&&(this.$unsubedIcf=$("<span class='icon-f icf-"+this.options.unsubed_icf+"'></span>")),"string"==typeof this.options.subed_text&&(this.$subedText=this.$btn.find(".sub-state-text.subbed-text"),this.$subedText.length||(this.$subedText=$("<span class='sub-state-text subbed-text'></span>")),this.$subedText.html(this.options.subed_text)),"string"==typeof this.options.unsubed_text&&(this.$unsubedText=this.$btn.find(".sub-state-text.unsubbed-text"),this.$unsubedText.length||(this.$unsubedText=$("<span class='sub-state-text unsubbed-text'></span>")),this.$unsubedText.html(this.options.unsubed_text)),"string"!=typeof this.options.btn_display&&!1!==this.options.btn_display&&(this.options.btn_display="inline-block"),"boolean"!=typeof this.options.resize_on_end&&(this.options.resize_on_end=!0),"boolean"==typeof s&&"string"==typeof n)return this.csrf=n,this.is_follower=s,void this.on_subscribe_check({data_setted:!0,is_follower:this.is_follower});var d=this;r.setUserIdByName(i,t),r.addUserUpdateCallback(i,function(e){e.data_setted=!0,d.on_subscribe_check(e)});var u=a.bRemoveButtonIfLoadingError?function(){d.$btn&&d.$btn.remove()}:null;r.loadSubInfoOneUser(this.username,function(e){d.on_subscribe_check(e)},u)}};return l.prototype={$btn:!1,loader:!1,action_label:!1,username:"",id_user:!1,csrf:!1,is_follower:!1,is_logged:!1,subed_text:!1,unsubed_text:!1,subed_icf:!1,unsubed_icf:!1,options:{},clicked:!1,tooltip:!1,retry_on_csrf:!0,retry_is_follower:!1,retry_click_count:0,on_subscribe_check:function(t){if(!t.is_owner&&(t.data_setted||t.result&&"boolean"==typeof t.is_follower&&("string"==typeof t.csrf||!e.dyn.login_info.is_logged))){if(t.data_setted||(this.csrf=t.csrf),e.dyn.login_info&&e.dyn.login_info.is_logged&&this.$btn.addClass("logged-user"),this.options.btn_display&&this.$btn.fadeIn().css("display",this.options.btn_display),this.retry_is_follower)return this.is_follower===t.is_follower?this.$btn.click():this.subscribe_end(t.is_follower),this.retry_is_follower=!1,void(this.retry_on_csrf=!0);this.$btn.addClass("sub-checked"),this.subscribe_end(t.is_follower)}},subscribe_end:function(i,n){this.is_follower=i,this.$btn.removeClass("wait").prop("title",t.unescape(this.is_follower?s.__("subscriptions.unsubscribe"):s.__("subscriptions.subscribe"))),this.action_label&&this.action_label.text(t.unescape(this.is_follower?s.__("subscriptions.unsubscribe"):s.__("subscriptions.subscribe")));var o=this;n&&(this.is_follower?require(["mustache","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(n,a,r){var l=[],d="",u=0;if($.isArray(o.related)){var c=e.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",f=o.options.add_relateds_to?o.options.add_relateds_to.related_users:o.related_users;for(var h in o.related)"undefined"==typeof f[o.related[h].id]&&(f[o.related[h].id]=o.related[h],o.related[h].img='<img title="'+o.related[h].username_display+'" src="'+(o.related[h].thumb?o.related[h].thumb:c)+'" onerror="this.src=\''+c+"'; this.onerror=null;\" />",o.related[h].div_sub_id="profile-related-sub-"+o.related[h].id+"-"+Math.ceil(1e4*Math.random()),o.related[h].about_me&&(o.related[h].about_me=$("<div>").html(o.related[h].about_me).text()),l.push({user_id:o.related[h].id,user_name:o.related[h].username,nb_subs:o.related[h].nb_subs,append_btn_to:"#"+o.related[h].div_sub_id,btn_class:"sub-strip"}),d+=n.render(r,o.related[h]),u++)}var p=$(n.render(a,{subscribed:t.unescape(s.__("subscriptions.subscribed")),view_activities:t.unescape(s.__("subscriptions.view_activities")),also_like:t.unescape(s.__("user.you_may_also_like")),hide_view_activities:!1!==o.options.add_relateds_to,has_related:!1===o.options.add_relateds_to&&l.length>0,related_html:d})),_=Math.floor(($(window).width()-50)/140),g=u>_?_:u,m=140*g;if(p.find(".profileslist").css("width",m+"px").addClass("nb-profile-per-line-"+g),!0!==o.options.no_tooltip_validation&&o.set_tooltip(p,o.$btn,!0,-1!==o.options.tooltip_hide_after?o.options.tooltip_hide_after:!(l.length>0)&&3500),l.length>0){if(!1!==o.options.add_relateds_to){var b=o.options.add_relateds_to.tooltip?o.options.add_relateds_to.tooltip:!!o.options.add_relateds_to.popup&&o.options.add_relateds_to.popup;"object"==typeof b&&$(b.popup).length>0&&$(b.popup).find(".profileslist").append($(d))}require(["skins/default/profile/subscribe/btns"],function(e){e(l,{sub_options:{add_relateds_to:o.options.add_relateds_to?o.options.add_relateds_to:o,tooltip_hide_after:1e3}})})}"function"==typeof o.options.end_function&&o.options.end_function(o.username,i)}):(!0!==this.options.no_tooltip_validation&&this.set_tooltip(s.__("subscriptions.unsubscribed"),this.$btn,!1,-1!==o.options.tooltip_hide_after?o.options.tooltip_hide_after:3e3),"function"==typeof this.options.end_function&&this.options.end_function(this.username,i))),this.is_follower?(this.$subedText&&this.$subedText.show(),this.$subedIcf&&this.$subedIcf.show(),this.$unsubedText&&this.$unsubedText.hide(),this.$unsubedIcf&&this.$unsubedIcf.hide(),this.$subedText?this.options.subed_text_pos<3?(this.$subedIcf&&this.options.subed_icf_pos<3&&this.options.subed_icf_pos>this.options.subed_text_pos&&this.$btn.prepend(this.$subedIcf),this.$btn.prepend(this.$subedText),this.$subedIcf&&this.options.subed_icf_pos<3&&this.options.subed_icf_pos<this.options.subed_text_pos&&this.$btn.prepend(this.$subedIcf)):(this.$subedIcf&&this.options.subed_icf_pos>3&&this.options.subed_icf_pos<this.options.subed_text_pos&&this.$btn.append(this.$subedIcf),this.$btn.append(this.$subedText),this.$subedIcf&&this.options.subed_icf_pos>3&&this.options.subed_icf_pos>this.options.subed_text_pos&&this.$btn.append(this.$subedIcf)):this.$subedIcf&&(this.options.subed_icf_pos<3?this.$btn.prepend(this.$subedIcf):this.$btn.append(this.$subedIcf))):(this.$subedText&&this.$subedText.hide(),this.$subedIcf&&this.$subedIcf.hide(),this.$unsubedText&&this.$unsubedText.show(),this.$unsubedIcf&&this.$unsubedIcf.show(),this.$unsubedText?this.options.unsubed_text_pos<3?(this.$unsubedIcf&&this.options.unsubed_icf_pos<3&&this.options.unsubed_icf_pos>this.options.unsubed_text_pos&&this.$btn.prepend(this.$unsubedIcf),this.$btn.prepend(this.$unsubedText),this.$unsubedIcf&&this.options.unsubed_icf_pos<3&&this.options.unsubed_icf_pos<this.options.unsubed_text_pos&&this.$btn.prepend(this.$unsubedIcf)):(this.$unsubedIcf&&this.options.unsubed_icf_pos>3&&this.options.unsubed_icf_pos<this.options.unsubed_text_pos&&this.$btn.append(this.$unsubedIcf),this.$btn.append(this.$unsubedText),this.$unsubedIcf&&this.options.unsubed_icf_pos>3&&this.options.unsubed_icf_pos>this.options.unsubed_text_pos&&this.$btn.append(this.$unsubedIcf)):this.$unsubedIcf&&(this.options.unsubed_icf_pos<3?this.$btn.prepend(this.$unsubedIcf):this.$btn.append(this.$unsubedIcf))),this.loader&&(this.loader.remove(),this.loader=null),this.$btn.off("click").on("click",function(e){o.sub_btn_click(e)}),this.options.resize_on_end&&$(window).resize()},sub_btn_click:function(e){if(e.preventDefault(),!0===this.clicked)return!1;if(this.clicked=!0,this.tooltip&&this.tooltip.close(),this.is_follower&&!0!==this.options.no_unsub_confirm){var i=this;a.confirm(t.unescape(s.__("subscriptions.confirm_subscribed")),function(){i.sub_btn_click_part2()},function(){i.subscribe_end(!0,!1),i.clicked=!1})}else this.sub_btn_click_part2()},sub_btn_click_part2:function(){this.load_start(),$(this).off("click");var e=this,t=function(t){if(e.clicked=!1,t.related&&(e.related="undefined"!=typeof t.related&&t.related),t.result){var i="boolean"==typeof t.is_follower?t.is_follower:!e.is_follower;return e.subscribe_end(i,!0),void(e.retry_click_count=0)}if(9===t.code){if(e.retry_on_csrf&&e.retry_click_count<3)return e.retry_click_count++,e.retry_on_csrf=!1,e.retry_is_follower=!0,void r.loadSubInfoOneUser(e.username,function(t){e.on_subscribe_check(t)});e.retry_click_count=0,e.subscribe_end(e.is_follower),e.set_tooltip(s.__("misc.reload_the_page")+(t.message?" - "+t.message:""),e.$btn,!1,5e3)}else e.retry_click_count=0,e.subscribe_end(e.is_follower),e.set_tooltip(s.__("misc.error_please_retry"),e.$btn,!1,3e3)};this.is_follower?r.unfollow(this.username,this.csrf,t):r.follow(this.username,this.csrf,t)},load_start:function(){this.$btn.addClass("wait").prop("title",""),this.loader||(this.loader=$('<span class="loader"></span>').appendTo(this.$btn)),this.loader.append(o.getSafe().getHtml())},set_tooltip:function(e,t,i,s){this.tooltip?(this.tooltip.setButton(t),this.tooltip.setContent(e),this.tooltip.setOption("autoclose","number"!=typeof s||s),this.tooltip.setOption("closebtn","number"!=typeof s||s>5500),this.tooltip.open()):(this.tooltip=new n,this.tooltip.create(e,t,{is_html:i,autoclose_timer:s,popup_class:"video-subscribe-popup"+("string"==typeof this.options.tooltip_class?" "+this.options.tooltip_class:""),autoclose_on_same_level:this.options.add_relateds_to?"profile_related_submit":"profile_submit"}),this.tooltip.open())}},l}),define("text!skins/default/pagination/pagination.mustache",[],function(){return'<div class="pagination {{ pagination_class }}">\n\t<ul>\n\t\t{{# list }}\n\t\t\t<li{{# item.classes }} class="{{ item.classes }}"{{/ item.classes }}>\n\t\t\t\t{{# link }}\n\t\t\t\t<a {{# link.url }} href="{{ link.url }}"{{/ link.url }}{{# link.classes }} class="{{ link.classes }}"{{/ link.classes }} data-page="{{ link.pageIndex }}">\n\t\t\t\t\t{{{ link.content }}}\n\t\t\t\t</a>\n\t\t\t\t{{/ link }}\n\t\t\t\t{{{ item.customContent }}}\n\t\t\t</li>\n\t\t{{/ list }}\n\t</ul>\n</div>'}),define("skins/default/pagination",["config/main","lib/i18n!front","mustache","text!./pagination/pagination.mustache"],function(e,t,i,n){var s=function(e,t){if(this.params={page_selector:"li",current_class:"active",nextprev_class:"no-page",next_class:"next-page",prev_class:"prev-page",first_class:"first-page",last_class:"last-page",first_ellipsis_class:"first-ellipsis",last_ellipsis_class:"last-ellipsis",prev_index:0},t&&"object"==typeof t)for(var i in t)"undefined"!=typeof this.params[i]&&(this.params[i]=t[i]);this.ul=$(e),this.id=String.fromCharCode(Math.floor(11*Math.random()))+Math.floor(1e6*Math.random()),this.lis=[],this.current_index=!1,this.prev_index=!1,this.next_index=!1,this.first_index=!1,this.first_elem_index=!1,this.last_index=!1,this.last_elem_index=!1,this.first_ellipsis_index=!1,this.last_ellipsis_index=!1;var n=this;this.ul.find(this.params.page_selector).each(function(){var e={elem:$(this),index:parseInt($(this).index()),hidden:!1};!1===n.first_elem_index&&$(this).find("."+n.params.nextprev_class).length<1&&(n.first_elem_index=e.index),$(this).find("."+n.params.current_class).length>0&&(n.current_index=e.index),
$(this).find("."+n.params.last_class).length>0?n.last_index=e.index:$(this).find("."+n.params.first_class).length>0?n.first_index=e.index:$(this).find("."+n.params.first_ellipsis_class).length>0?n.first_ellipsis_index=e.index:$(this).find("."+n.params.last_ellipsis_class).length>0&&(n.last_ellipsis_index=e.index),$(this).find("."+n.params.next_class).length>0?n.next_index=e.index:$(this).find("."+n.params.prev_class).length>0?n.prev_index=e.index:$(this).find("."+n.params.nextprev_class).length>0?e.index===n.params.prev_index?n.prev_index=e.index:n.next_index=e.index:n.last_elem_index=e.index,n.lis.push(e)}),this.last_ellipsis_index?this.last_elem_index=this.last_ellipsis_index:this.last_index&&(this.last_elem_index=this.last_index)};s.prototype={get_li:function(e,t){"boolean"!=typeof t&&(t=!1);var i=[this.prev_index,this.first_index,this.first_elem_index,this.first_ellipsis_index,this.last_ellipsis_index,this.last_index,this.next_index];(this.last_ellipsis_index||this.last_index)&&i.push(this.last_elem_index);for(var n in this.lis)if(this.lis[n].index===e&&(!1===t||!1===this.lis[n].hidden&&-1===i.indexOf(this.lis[n].index)))return this.lis[n];return!1},get_page_or_before:function(e){var t=this.get_li(e,!0);if(!1===t)for(var i in this.lis){if(this.lis[i].index===e)break;!1===this.lis[i].hidden&&this.lis[i].index!==this.prev_index&&(t=this.lis[i])}return t},get_page_after:function(e){var t=!1,i=!1;for(var n in this.lis){if(!0===t){i=this.get_page_or_after(n);break}this.lis[n].index===e&&(t=!0)}return i},get_page_or_after:function(e){e=parseInt(e);var t=this.get_li(e,!0);if(!1===t){var i=!1;for(var n in this.lis){if(!0===i&&!1===this.lis[n].hidden&&this.lis[n].index!==this.next_index&&this.lis[n].index!==this.ellipsis_index){t=this.lis[n];break}this.lis[n].index===e&&(i=!0)}}return t},get_next_page_to_hide:function(){var e=!1;if(!1===this.current_index)e=this.get_page_or_before(this.last_elem_index);else{var t=this.get_page_after(this.first_elem_index),i=this.get_page_or_before(this.last_elem_index),n=this.current_index-t.index,s=i.index-this.current_index;n>=s&&n>0?e=t:s>0&&(e=i)}return e},is_pagination_to_wide:function(){var e=!1!==this.next_index?this.get_li(this.next_index):this.get_page_or_before(this.last_elem_index);return!1!==e&&Math.floor(e.elem.position().left+e.elem.outerWidth())>Math.floor(this.ul.outerWidth()+this.ul.position().left)},hide_page:function(e){!1!==e&&(e.elem.addClass("hidden"),e.hidden=!0)},resize_pagination:function(){for(var e in this.lis)this.lis[e].hidden&&(this.lis[e].elem.removeClass("hidden"),this.lis[e].hidden=!1);for(;this.is_pagination_to_wide()&&!1!==this.get_next_page_to_hide();)this.hide_page(this.get_next_page_to_hide())}};var o=function(){var e=this;$(window).resize(function(){e.resize_paginations()})};return o.prototype={paginations:[],params:{pagination_selector:".pagination ul"},add:function(e,t){!0!==this.is_initiated(e)&&this.paginations.push(new s(e,t))},add_all_in:function(e,t){t&&"object"==typeof t?"undefined"==typeof t.pagination_selector&&(t.pagination_selector=this.params.pagination_selector):t=this.params;var i=this;$(e).find(t.pagination_selector).each(function(){i.add($(this),t)}),this.resize_paginations()},is_initiated:function(e){for(var t in this.paginations)if($(e).is($(this.paginations[t].ul)))return!0;return!1},resize_paginations:function(){for(var e in this.paginations)this.paginations[e].resize_pagination()},create:function(e,i,n,s){if(i<2)return $();s=s||{};var o=s.start_index||0,a=s.max_page_display||0,r=s.max_page_left_low||6,l=s.max_page_left_high||4,d={list:[],pagination_class:""};e<o&&(e=o),e>i+o-1&&(e=i+o-1);var u=0,c=i-1;if(a>0){var f=e<9?r:l;u=Math.max(0,e-Math.min(f,Math.floor(a/1.5))),c=Math.min(i-1,u+a-1),u=Math.max(0,c-a+1),e-u>f&&(u=Math.max(0,Math.min(i-(f+3),e-f)))}u+=o,c+=o;var h=1-o;if(u<e&&d.list.push({link:{href:this.createUrl(n,e-1),classes:"no-page prev-page",content:'<span class="mobile-hide">'+t.__("misc.prev")+'</span><span class="mobile-show-inline icon-f icf-chevron-left"></span>',pageIndex:Math.max(0,e-1)}}),u>o){var p=["first-page"];e===u&&p.push("active"),d.list.push({link:{href:this.createUrl(n,o),classes:p.join(" "),content:o+h,pageIndex:o}})}u>o+1&&d.list.push({item:{classes:"no-page"},link:{href:"#",classes:"ellipsis first-ellipsis",content:"...",pageIndex:""}});for(var _=u;_<=c;_++){var g=[];0===_?g.push("first-page"):_===i-1&&g.push("last-page"),_===e&&g.push("active"),d.list.push({link:{href:this.createUrl(n,_),classes:g.join(" "),content:_+h,pageIndex:_}})}c<i-2+o&&d.list.push({item:{classes:"no-page"},link:{href:"#",classes:"ellipsis last-ellipsis",content:"...",pageIndex:""}});var m=i-1;if(c<m+o){var b=["last-page"];e===c&&b.push("active"),d.list.push({link:{href:this.createUrl(n,m),classes:b.join(" "),content:m+h,pageIndex:m}})}c>e&&d.list.push({link:{href:this.createUrl(n,e+1),classes:"no-page next-page",content:'<span class="mobile-hide">'+t.__("misc.next")+'</span><span class="mobile-show-inline icon-f icf-chevron-right"></span>',pageIndex:Math.min(i,e+1)}});var v=this.createHTMLObject(d);return s&&"function"==typeof s.pagin_click&&v.find("a").on("click",function(e){e.preventDefault(),s.pagin_click($(this).data("page"))}),v},createHTMLObject:function(e){return $(i.render(n,e))},createElementsBased:function(e,t,i,n,s){var o=Math.ceil(i/t);return this.create(e,o,n,s)},createUrl:function(e,t,i){return i&&"function"==typeof i.make_url?i.make_url(t):e+t},createTexte:function(t,i){var n=i&&i.start_one?1:0;return i&&"function"==typeof i.make_pagin_text?i.make_pagin_text(t):(t+1-n).toLocaleString(e.dyn.locale)}},new o}),define("text!lib/helpers/dragdrop_select_and_reorder/dragdrop_selection_checkbox.mustache",[],function(){return'<div class="checkbox-dragdrop">\n\t<input type="checkbox" id="{{ id }}" value="{{ id }}" name="delete-pic" />\n\t<label class="checkbox-label" for="{{ id }}">o</label>\n</div>'}),function(e){e.fn.drag=function(t,i,n){var s="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==s.indexOf("drag")&&(s="drag"+s),n=(t==o?i:n)||{},o?this.bind(s,n,o):this.trigger(s)};var t=e.event,i=t.special,n=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var i=e.data(this,n.datakey),s=t.data||{};i.related+=1,e.each(n.defaults,function(e,t){void 0!==s[e]&&(i[e]=s[e])})},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(!e.data(this,n.datakey)){var i=e.extend({related:0},n.defaults);e.data(this,n.datakey,i),t.add(this,"touchstart mousedown",n.init,i),this.attachEvent&&this.attachEvent("ondragstart",n.dontstart)}},teardown:function(){(e.data(this,n.datakey)||{}).related||(e.removeData(this,n.datakey),t.remove(this,"touchstart mousedown",n.init),n.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",n.dontstart))},init:function(s){if(!n.touched){var o,a=s.data;if(!(0!=s.which&&a.which>0&&s.which!=a.which)&&!e(s.target).is(a.not)&&(!a.handle||e(s.target).closest(a.handle,s.currentTarget).length)&&(n.touched="touchstart"==s.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[n.interaction(this,a)],a.target=s.target,a.pageX=s.pageX,a.pageY=s.pageY,a.dragging=null,o=n.hijack(s,"draginit",a),a.propagates))return(o=n.flatten(o))&&o.length&&(a.interactions=[],e.each(o,function(){a.interactions.push(n.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&i.drop&&i.drop.handler(s,a),n.textselect(!1),n.touched?t.add(n.touched,"touchmove touchend",n.handler,a):t.add(document,"mousemove mouseup",n.handler,a),!(!n.touched||a.live)&&void 0}},interaction:function(t,i){var s=e(t)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new n.callback,droppable:[],offset:s}},handler:function(s){var o=s.data;switch(s.type){case!o.dragging&&"touchmove":s.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(s.pageX-o.pageX,2)+Math.pow(s.pageY-o.pageY,2)<Math.pow(o.distance,2))break;s.target=o.target,n.hijack(s,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":s.preventDefault();case"mousemove":if(o.dragging){if(n.hijack(s,"drag",o),o.propagates){!1!==o.drop&&i.drop&&i.drop.handler(s,o);break}s.type="mouseup"}case"touchend":case"mouseup":default:n.touched?t.remove(n.touched,"touchmove touchend",n.handler):t.remove(document,"mousemove mouseup",n.handler),o.dragging&&(!1!==o.drop&&i.drop&&i.drop.handler(s,o),n.hijack(s,"dragend",o)),n.textselect(!0),!1===o.click&&o.dragging&&e.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=n.touched=!1}},hijack:function(i,s,o,a,r){if(o){var l,d,u,c={event:i.originalEvent,type:i.type},f=s.indexOf("drop")?"drag":"drop",h=a||0,p=isNaN(a)?o.interactions.length:a;i.type=s,i.originalEvent=null,o.results=[];do{if(d=o.interactions[h]){if("dragend"!==s&&d.cancelled)continue;u=n.properties(i,o,d),d.results=[],e(r||d[f]||o.droppable).each(function(a,r){if(u.target=r,i.isPropagationStopped=function(){return!1},!1===(l=r?t.dispatch.call(r,i,u):null)?("drag"==f&&(d.cancelled=!0,o.propagates-=1),"drop"==s&&(d[f][a]=null)):"dropinit"==s&&d.droppable.push(n.element(l)||r),"dragstart"==s&&(d.proxy=e(n.element(l)||d.drag)[0]),d.results.push(l),delete i.result,"dropinit"!==s)return l}),o.results[h]=n.flatten(d.results),"dropinit"==s&&(d.droppable=n.flatten(d.droppable)),"dragstart"!=s||d.cancelled||u.update()}}while(++h<p);return i.type=c.type,i.originalEvent=c.event,n.flatten(o.results)}},properties:function(e,t,i){var s=i.callback;return s.drag=i.drag,s.proxy=i.proxy||i.drag,s.startX=t.pageX,s.startY=t.pageY,s.deltaX=e.pageX-t.pageX,s.deltaY=e.pageY-t.pageY,s.originalX=i.offset.left,s.originalY=i.offset.top,s.offsetX=s.originalX+s.deltaX,s.offsetY=s.originalY+s.deltaY,s.drop=n.flatten((i.drop||[]).slice()),s.available=n.flatten((i.droppable||[]).slice()),s},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?n.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",n.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};n.callback.prototype={update:function(){i.drop&&this.available.length&&e.each(this.available,function(e){i.drop.locate(this,e)})}};var s=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return s.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,i){if(i){var n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;n&&e.each(o.props,function(e,i){t[i]=n[i]})}return t}};i.draginit=i.dragstart=i.dragend=n}(jQuery),function(e){var t=e.event,i=t.special.drag,n=i.add,s=i.teardown;i.noBubble=!1,i.livekey="livedrag",i.add=function(s){n.apply(this,arguments);var o=e.data(this,i.datakey);!o.live&&s.selector&&(o.live=!0,t.add(this,"draginit."+i.livekey,i.delegate))},i.teardown=function(){s.apply(this,arguments);var n=e.data(this,i.datakey)||{};n.live&&(t.remove(this,"draginit."+i.livekey,i.delegate),n.live=!1)},i.delegate=function(n){var s,o=[],a=e.data(this,"events")||{};return e.each(a||[],function(a,r){0===a.indexOf("drag")&&e.each(r||[],function(a,r){(s=e(n.target).closest(r.selector,n.currentTarget)[0])&&(t.add(s,r.origType+"."+i.livekey,r.origHandler||r.handler,r.data),e.inArray(s,o)<0&&o.push(s))})}),!!o.length&&e(o).bind("dragend."+i.livekey,function(){t.remove(this,"."+i.livekey)})}}(jQuery),function(e){e.fn.drop=function(t,i,n){var s="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==s.indexOf("drop")&&(s="drop"+s),n=(t==o?i:n)||{},o?this.bind(s,n,o):this.trigger(s)},e.drop=function(t){t=t||{},i.multi=!0===t.multi?1/0:!1===t.multi?1:isNaN(t.multi)?i.multi:t.multi,i.delay=t.delay||i.delay,i.tolerance=e.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:i.tolerance,i.mode=t.mode||i.mode||"intersect"};var t=e.event.special,i=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){e.data(this,i.datakey).related+=1},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){e.data(this,i.datakey)||(e.data(this,i.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),i.targets.push(this))},teardown:function(){if(!(e.data(this,i.datakey)||{}).related){e.removeData(this,i.datakey);var t=this;i.targets=e.grep(i.targets,function(e){return e!==t})}},handler:function(n,s){var o;if(s)switch(n.type){case"mousedown":case"touchstart":o=e(i.targets),"string"==typeof s.drop&&(o=o.filter(s.drop)),o.each(function(){var t=e.data(this,i.datakey);t.active=[],t.anyactive=0,t.winner=0}),s.droppable=o,t.drag.hijack(n,"dropinit",s);break;case"mousemove":case"touchmove":i.event=n,i.timer||i.tolerate(s);break;case"mouseup":case"touchend":i.timer=clearTimeout(i.timer),s.propagates&&(t.drag.hijack(n,"drop",s),t.drag.hijack(n,"dropend",s))}},locate:function(t,n){var s=e.data(t,i.datakey),o=e(t),a=o.offset()||{},r=o.outerHeight(),l=o.outerWidth(),d={elem:t,width:l,height:r,top:a.top,left:a.left,right:a.left+l,bottom:a.top+r};return s&&(s.location=d,s.index=n,s.elem=t),d},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,i){return this.contains(i,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(e,t,i){return this.contains(i,t)?1:0},middle:function(e,t,i){return this.contains(i,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(n){var s,o,a,r,l,d,u,c,f=0,h=n.interactions.length,p=[i.event.pageX,i.event.pageY],_=i.tolerance||i.modes[i.mode];do{if(c=n.interactions[f]){if(!c)return;c.drop=[],l=[],d=c.droppable.length,_&&(a=i.locate(c.proxy)),s=0;do{if(u=c.droppable[s]){if(!(o=(r=e.data(u,i.datakey)).location))continue;r.winner=_?_.call(i,i.event,a,o):i.contains(o,p)?1:0,l.push(r)}}while(++s<d);l.sort(i.sort),s=0;do{(r=l[s])&&(r.winner&&c.drop.length<i.multi?(r.active[f]||r.anyactive||(!1!==t.drag.hijack(i.event,"dropstart",n,f,r.elem)[0]?(r.active[f]=1,r.anyactive+=1):r.winner=0),r.winner&&c.drop.push(r.elem)):r.active[f]&&1==r.anyactive&&(t.drag.hijack(i.event,"dropend",n,f,r.elem),r.active[f]=0,r.anyactive-=1))}while(++s<d)}}while(++f<h);i.last&&p[0]==i.last.pageX&&p[1]==i.last.pageY?delete i.timer:i.timer=setTimeout(function(){i.tolerate(n)},i.delay),i.last=i.event}};t.dropinit=t.dropstart=t.dropend=i}(jQuery),function(e){var t=e.event,i=t.special.drop,n=i.add,s=i.teardown;i.noBubble=!1,i.livekey="livedrop",i.add=function(s){n.apply(this,arguments);var o=e.data(this,i.datakey);!o.live&&s.selector&&(o.live=!0,t.add(this,"dropinit."+i.livekey,i.delegate))},i.teardown=function(){s.apply(this,arguments);var n=e.data(this,i.datakey)||{};n.live&&(t.remove(this,"dropinit",i.delegate),n.live=!1)},i.delegate=function(n,s){var o,a=[],r=e.data(this,"events")||{};return e.each(r||[],function(s,r){0===s.indexOf("drop")&&e.each(r,function(s,r){(o=e(n.currentTarget).find(r.selector)).length&&o.each(function(){t.add(this,r.origType+"."+i.livekey,r.origHandler||r.handler,r.data),e.inArray(this,a)<0&&a.push(this)})})}),s&&t.add(s.drag,"dragend."+i.livekey,function(){e.each(a.concat(this),function(){t.remove(this,"."+i.livekey)})}),!!a.length&&e(a)}}(jQuery),define("libs/jquery-event-dragdrop",function(){}),define("lib/helpers/dragdrop_select_and_reorder/dragdrop_selection",["static/utils","mustache","text!./dragdrop_selection_checkbox.mustache","libs/jquery-event-dragdrop"],function(e,t,i){xv.bDebugDragDropSelectZone=xv.bDebugDragDrop;var n=function(e){this._init(e)};n.prototype={_init:function(t){this.$eltDrop=$(),this.$eltDropChild=$(),this.$eltDrag=t.$eltDrag,this.fnScroll=t.fnCallbackScroll,this.fnDropItem=t.fnCallbackDropItem,this.fnDragEnd=t.fnCallbackDragEnd,this.fnDragAbort=t.fnCallbackDragAbort,this.fnGetElemChildren="function"==typeof t.fnGetElemChildren&&t.fnGetElemChildren,this.$ScrollableContainer="undefined"!=typeof t.$ScrollableContainer?$(t.$ScrollableContainer):$(window),this.$Body=$("body"),this.$SelectZone=$('<div class="dragdrop-selection-zone"></div>'),this.bIsScrollableContainerWindow=this.$ScrollableContainer.is($(window)),this.bTouchScreen=e.isTouchScreen(),this.bTriggerDragDrop=!this.bTouchScreen,this.bTriggerInterval=!1,this.bIsStopped=!0,this.bIsDraging=!1,this.iCurrentScrollTop=null,this.iPrevScrollTop=null,this.iTouchScrollTop=null,this.iTouchDelay=500,this.iTouchPosX=null,this.iTouchPosY=null,this.iTouchPosLim=5,this.oTouchTimer=null,this.oInterval=null,this.iTouchTime=null,this.oDraggingPositions={oContainer:{iHeight:null,iLimitBeforeScroll:50,iLimitBottom:null,iLimitTop:null,iScrollDiff:null,iScrollDiffAbs:null,iStartSupScroll:null,iSupTop:null},oMouse:{iStartX:null,iStartY:null,iX:null,iY:null},oSelectZone:{iHeight:null,iLeft:null,iTop:null,iWidth:null},oWindow:{iScrollTop:null}},this.sLastEventTouch=null,this.updateDropElements(t.$eltDrop)},updateDropElements:function(e){if(null!==e&&e!==undefined){var n=this,s=$(),a=$(),r=$(),l=$();if(e.each(function(){-1===n.$eltDrop.index($(this))&&(s=s.add($(this)),a=a.add(n.getElemChildren($(this))))}),this.$eltDrop.each(function(){-1===e.index($(this))&&(r=r.add($(this)),l=l.add(n.getElemChildren($(this))))}),this.$eltDrop=this.$eltDrop.not(r).add(s),this.$eltDropChild=this.$eltDropChild.not(l).add(a),!s.length)return;this.setEvents(s,a),s.each(function(){if(!$(this).find(".checkbox-dragdrop").length){var e=$(t.render(i,{id:"checkbox-dragdrop-"+$(this).index()+"-"+Math.floor(999*Math.random())+"-"+Math.floor(999*Math.random())}));$(this).append(e),e.on("change",n,o)}})}},updateSelectZone:function(){var e=this.oDraggingPositions.oContainer,t=this.oDraggingPositions.oMouse,i=this.oDraggingPositions.oSelectZone,n=this.oDraggingPositions.oWindow;if(e.iLimitTop=Math.abs(t.iY-n.iScrollTop-e.iSupTop),e.iLimitBottom=Math.abs(t.iY-n.iScrollTop-e.iSupTop-e.iHeight),i.iLeft=Math.min(t.iX,t.iStartX),i.iWidth=Math.abs(t.iX-t.iStartX),this.bIsScrollableContainerWindow)i.iHeight=Math.abs(t.iY-t.iStartY),i.iTop=Math.min(t.iY,t.iStartY);else{e.iScrollDiff=this.iCurrentScrollTop-e.iStartSupScroll,e.iScrollDiffAbs=Math.abs(e.iScrollDiff);var s=t.iStartY+e.iStartSupScroll-e.iScrollDiff,o=t.iY+this.iCurrentScrollTop-e.iScrollDiff;i.iTop=(s<o?s:o)-e.iStartSupScroll,i.iHeight=Math.abs(s-o)}this.$SelectZone.css({top:i.iTop,left:i.iLeft,height:i.iHeight,width:i.iWidth})},setEvents:function(e,t){var i=void 0===e||void 0===t||!e.length||!t.length;if(!(!this.isStopped()&&i||this.isStopped()&&!i)){var n=this;i&&(e=this.$eltDrop,this.bIsStopped=!1,this.iPrevScrollTop=this.$ScrollableContainer.scrollTop(),this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.$ScrollableContainer.on("scroll",this,s),this.$eltDrag.on({dragstart:function(e){if(n.bTriggerDragDrop){n.$Body.addClass("is-dragdrop-draging");var t=n.oDraggingPositions.oContainer,i=n.oDraggingPositions.oMouse,s=n.oDraggingPositions.oWindow;return t.iStartSupScroll=n.bIsScrollableContainerWindow?0:n.iCurrentScrollTop,i.iStartX=e.pageX,i.iStartY=e.pageY,i.iX=e.pageX,i.iY=e.pageY,s.iScrollTop=$(window).scrollTop(),n.updateSelectZone(),n.$SelectZone.appendTo(n.$Body)}return!1},drag:function(e,t){if(!n.bTriggerDragDrop)return!1;n.bIsDraging=!0;var i=n.oDraggingPositions.oContainer,s=n.oDraggingPositions.oMouse,o=n.oDraggingPositions.oWindow;i.iSupTop=n.bIsScrollableContainerWindow?0:n.$ScrollableContainer.offset().top,i.iHeight=n.bIsScrollableContainerWindow?$(window).height():n.$ScrollableContainer.innerHeight(),e&&"undefined"!=typeof e.pageY&&(s.iX=e.pageX,s.iY=e.pageY),t&&(s.iStartX=t.startX),o.iScrollTop=$(window).scrollTop(),n.updateSelectZone(),i.iLimitTop<=i.iLimitBeforeScroll||i.iLimitBottom<=i.iLimitBeforeScroll?n.bTriggerInterval||(n.bTriggerInterval=!0,n.oInterval=setInterval(function(){n.scrollWindow(i.iLimitTop<i.iLimitBottom?"top":"bottom"),n.$eltDrag.trigger("mousemove")},15)):(n.bTriggerInterval=!1,clearInterval(n.oInterval))},dragend:function(){clearInterval(n.oInterval),n.$Body.removeClass("is-dragdrop-draging"),n.$SelectZone.remove(),n.bIsDraging=!1,n.bTriggerInterval=!1,n.fnDragEnd()}})),e.on({dropstart:function(){if(!n.bTriggerDragDrop)return!1;$(this).addClass("is-dragdrop-active")},drop:function(){n.fnDropItem($(this),"drop")},dropend:function(){$(this).removeClass("is-dragdrop-active")}}),$.drop({multi:!0,tolerance:function(e,t,i){var s=n.oDraggingPositions.oSelectZone,o=n.oDraggingPositions.oContainer,a=i.left,r=a+i.width,l=i.top-(n.bIsScrollableContainerWindow?0:o.iScrollDiff),d=l+i.height,u=s.iLeft,c=u+s.iWidth,f=s.iTop,h=f+s.iHeight;return r>=u&&a<=c&&d>=f&&l<=h}})}},unsetEvents:function(){this.isStopped()||(this.bIsStopped=!0,this.$ScrollableContainer.off("scroll",s),this.$eltDrag.off("dragstart drag dragend"),this.$eltDrop.off("dropstart drop dropend"))},isStopped:function(){return this.bIsStopped},getIsDraging:function(){return this.bIsDraging},scrollingWindow:function(){this.iPrevScrollTop=this.iCurrentScrollTop,this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.fnScroll(this.iCurrentScrollTop)},scrollWindow:function(e){"top"===e?this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop-10):this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop+10)},dropTouchstart:function(e,t){if(this.bTriggerDragDrop||"start"===this.sLastEventTouch)return!1;this.bTriggerDragDrop=!0,this.sLastEventTouch="start",this.fnDropItem(e,"touchstart"),t.type="dragstart",this.$eltDrag.trigger(t),this.iTouchTime=Date.now()},dropTouchend:function(e){if("end"===this.sLastEventTouch)return!1;e.hasClass("is-dragdrop-active")&&this.$eltDrag.find(".is-dragdrop-active").length&&(e.removeClass("is-dragdrop-active"),this.fnDropItem(e,"touchend"),e.trigger("drop")),this.updateSelectZone();var t=this.oDraggingPositions.oSelectZone;t.iHeight<=this.iTouchPosLim&&t.iWidth<=this.iTouchPosLim&&this.fnDropItem(e,this.bTouchScreen?"touchclick":"click"),this.$eltDrag.trigger("dragend"),this.bTriggerDragDrop=!1,this.iTouchTime=null,this.sLastEventTouch="end"},getElemChildren:function(e){return"function"==typeof this.fnGetElemChildren?this.fnGetElemChildren(e):e.children()},getElemFromChild:function(e){for(var t=e.parent(),i=!1;t&&t.length&&!t.is(this.$eltDrag)&&"body"!==t.nodeName;)i=t,t=i.parent();return!(!(i&&t&&t.length)||!t.is(this.$eltDrag)&&"body"===t.nodeName)&&i}};var s=function(e){e.data.scrollingWindow()},o=function(e){e.data.fnDropItem(e.data.getElemFromChild($(e.currentTarget)),"change")};return n}),define("lib/helpers/dragdrop_select_and_reorder/dragdrop_reorder",["static/utils","libs/jquery-event-dragdrop"],function(e){var t=function(e){this._init(e)};t.prototype={_init:function(t){this.$eltDrag=t.$eltDrag,this.$eltDrop=t.$eltDrop,this.fnReorder=t.fnCallbackReorder,this.fnReorderAbort=t.fnCallbackReorderAbort,this.fnScroll=t.fnCallbackScroll,this.fnGetElemChildren="function"==typeof t.fnGetElemChildren&&t.fnGetElemChildren,this.fnCustomGetElemById="function"==typeof t.fnCustomGetElemById&&t.fnCustomGetElemById,this.fnCustomGetIdByDomElem="function"==typeof t.fnCustomGetIdByDomElem&&t.fnCustomGetIdByDomElem,this.$ScrollableContainer="undefined"!=typeof t.$ScrollableContainer?$(t.$ScrollableContainer):$(window),this.$eltDropChild=this.getElemChildren(this.$eltDrop),this.$clone=null,this.$cloned=null,this.aItemsSelected=[],this.bIsScrollableContainerWindow=this.$ScrollableContainer.is($(window)),this.bIsStopped=!0,this.bSelection=null,this.bScrollDown=null,this.bTouchScreen=e.isTouchScreen(),this.bTriggerReorder=!1,this.bTriggerReorderTouch=!1,this.bTriggerInterval=!1,this.iCurrentScrollTop=null,this.iPrevScrollTop=null,this.iTouchPosLim=5,this.iLimitScreen=this.bTouchScreen?100:50,this.iTouchDelay=500,this.iCurrentDragPos=0,this.iIndexDragStart=null,this.oTouchTimer=null,this.oInterval=null},updateDropElements:function(e,t){if(null!==t&&t!==[]&&(this.bSelection=t.length>0,this.aItemsSelected=this.bSelection?t:[]),null!==e&&e!==undefined){var i=this,n=$(),s=$(),o=$(),a=$();if(e.each(function(){-1===i.$eltDrop.index($(this))&&(n=n.add($(this)),s=s.add(i.getElemChildren($(this))))}),this.$eltDrop.each(function(){-1===e.index($(this))&&(o=o.add($(this)),a=a.add(i.getElemChildren($(this))))}),this.$eltDrop=this.$eltDrop.not(o).add(n),this.$eltDropChild=this.$eltDropChild.not(a).add(s),!n.length)return;this.setEvents(n,s)}},setEvents:function(e,t){var n=void 0===e||void 0===t||!e.length||!t.length;if(!(!this.isStopped()&&n||this.isStopped()&&!n)){n&&(e=this.$eltDrop,this.iPrevScrollTop=this.$ScrollableContainer.scrollTop(),this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.bIsStopped=!1,this.$ScrollableContainer.on("scroll",this,i));var s=this;e.on({dragstart:function(){var e=$(this);if(!(s.bSelection&&!e.hasClass("is-dragdrop-selected")||s.bTouchScreen&&!s.bTriggerReorderTouch))if(s.bTriggerReorder=!0,s.iIndexDragStart=e.index(),null===s.$clone&&(s.setClone(e),s.$clone.addClass("hidden")),s.bSelection){for(var t=0;t<s.aItemsSelected.length;t++){var i=s.getElemById(s.aItemsSelected[t]);i.find('input[type="checkbox"]').prop("checked",!1),e.is(i)||i.addClass("is-dragdrop-inactive dragdrop-selection")}$('<span class="dragdrop-nb-pics-selected">'+s.aItemsSelected.length+"</span>").appendTo(s.$clone)}else e.find('input[type="checkbox"]').prop("checked",!1)},drag:function(e,t){if(s.$clone&&(s.bTriggerReorder||s.bTouchScreen&&s.bTriggerReorderTouch)){var i=$(this),n=t.drop[0],o=$.data(n||{},"drop+reorder"),a=Math.round(e.pageY-(s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)-i.height()/2),r=Math.round(e.pageX-i.width()/2),l=Math.round((s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)+s.iLimitScreen),d=Math.round((s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)+s.$ScrollableContainer.height()-s.iLimitScreen);s.iCurrentDragPos=e.pageY,s.$clone.hasClass("hidden")&&s.$clone.removeClass("hidden"),s.$clone.css({top:a,left:r}),!n||n===t.current&&o===t.method||(i[o](n),t.current=n,t.method=o,t.update()),s.iCurrentDragPos<l||s.iCurrentDragPos>d?(s.iCurrentDragPos<l&&(s.bScrollDown=!1),s.iCurrentDragPos>d&&(s.bScrollDown=!0),s.bTriggerInterval||(s.bTriggerInterval=!0,s.oInterval=setInterval(function(){s.scrollWindow()},15))):(s.bTriggerInterval=!1,clearInterval(s.oInterval))}},dragend:function(){if(s.oInterval&&clearInterval(s.oInterval),!s.$clone)return void(s.bTriggerReorder=!1);var e=$(this),t=s.getIdByDomElem(e);s.bTriggerReorder=!1,s.$clone.remove(),s.$clone=null,s.$cloned=null,e.removeClass("is-dragdrop-inactive"),s.$eltDrop.removeAttr("style"),s.fnReorder(t,s.bSelection?s.aItemsSelected:null,s.iIndexDragStart)},dropinit:function(e,t){return!(this==t.drag)}}),$.drop({multi:!1,tolerance:function(e,t,i){var n=e.pageY>i.top+.8*i.height||e.pageX>i.left+i.width/2;return i&&"undefined"!=typeof i.elem?($.data(i.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(i,[e.pageX,e.pageY])):(console.error("%c - ERROR ON TOLERANCE - -- target","color:#00CED1;",i),!1)}})}},unsetEvents:function(){this.isStopped()||(this.bIsStopped=!0,this.$ScrollableContainer.off("scroll"),this.$eltDrop.off("dragstart drag dragend dropinit"),$.drop({}))},setClone:function(e,t){this.$clone=e.clone(),this.$cloned=e,this.$clone.width(e.width()).removeAttr("id data-id").addClass("clone-block is-dragdrop-moving").appendTo(e.parent()),t!==undefined&&this.$clone.css({top:Math.round(t.pageY-(this.bIsScrollableContainerWindow?this.iCurrentScrollTop:0)-e.height()/2),left:Math.round(t.pageX-e.width()/2)}),e.addClass("is-dragdrop-inactive"),this.aItemsSelected.length>0&&$('<span class="dragdrop-nb-pics-selected">'+this.aItemsSelected.length+"</span>").appendTo(this.$clone)},isStopped:function(){return this.bIsStopped},scrollingWindow:function(){this.iPrevScrollTop=this.iCurrentScrollTop,this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.bScrollDown=this.iCurrentScrollTop>=this.iPrevScrollTop,this.fnScroll(this.iCurrentScrollTop)},scrollWindow:function(){this.bScrollDown?this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop+10):this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop-10)},dropTouchstart:function(e,t){this.bTriggerReorderTouch||(this.bTriggerReorderTouch=!0,this.$eltDrag.addClass("is-dragdrop-reorder-touch"),null===this.$clone&&this.setClone(e,t),t.type="dragstart",e.trigger(t))},dropTouchend:function(){clearTimeout(this.oTouchTimer),this.bTriggerReorderTouch=!1,this.$eltDrag.removeClass("is-dragdrop-reorder-touch")},getElemFromChild:function(e){for(var t=e.parent(),i=!1;t&&t.length&&!t.is(this.$eltDrag)&&"body"!==t.nodeName;)i=t,t=i.parent();return!(!(i&&t&&t.length)||!t.is(this.$eltDrag)&&"body"===t.nodeName)&&i},getElemChildren:function(e){return"function"==typeof this.fnGetElemChildren?this.fnGetElemChildren(e):e.children()},getElemById:function(e){return e=e.toString(),this.fnCustomGetElemById?this.fnCustomGetElemById(e,this.$eltDrop):this.$eltDrop.filter('[data-id="'+e+'"]')},getIdByDomElem:function(e){return this.fnCustomGetIdByDomElem?this.fnCustomGetIdByDomElem(e):e.data("id").toString()},hasClone:function(){return this.$clone&&this.$clone.length},isClone:function(e){return this.$clone&&this.$clone.length&&this.$clone.is(e)},getCloned:function(){return this.$cloned}};var i=function(e){e.data.scrollingWindow()};return t}),define("lib/helpers/dragdrop_select_and_reorder",["static/utils","lib/i18n!front","lib/helpers/overlay/contextual_popup","lib/helpers/dragdrop_select_and_reorder/dragdrop_selection","lib/helpers/dragdrop_select_and_reorder/dragdrop_reorder"],function(e,t,i,n,s){var o=function(e){this._init(e)};return o.prototype={_init:function(t){if(this.$Elems=$(t.element_list),this.aSelectedElems=[],this.aElemsIdOrder=[],this.$Elems.length){this.updateElemsIdOrder();var i=this.$Container=this.$Elems.first().parent();if(this.$Container.children().length<this.$Elems.length&&this.$Container.append(this.$Elems),this.$Container.children().length>this.$Elems.length){var o=$("<div></div>");this.$Container.append(o.append(this.$Elems)),this.$Container=o}this.$Container.addClass("container-dragdrop"),"undefined"==typeof t.functions&&(t.functions={}),this.fnInitElems="function"==typeof t.functions.init_elems&&t.functions.init_elems,this.fnCustomGetElemById="function"==typeof t.functions.get_elem_by_id&&t.functions.get_elem_by_id,this.fnCustomGetIdByDomElem="function"==typeof t.functions.get_id_by_dom_elem&&t.functions.get_id_by_dom_elem,this.fnGetElemChildrenForClick="function"==typeof t.functions.get_elem_children&&t.functions.get_elem_children,this.fnUpdateSelectedCount="function"==typeof t.functions.update_selected_count&&t.functions.update_selected_count,this.fnOnReorderModeMany="function"==typeof t.functions.on_reorder_mode_many&&t.functions.on_reorder_mode_many,this.fnOnReorderModeOneNoSelect="function"==typeof t.functions.on_reorder_mode_one_no_select&&t.functions.on_reorder_mode_one_no_select,this.fnOnReorderModeEnabled="function"==typeof t.functions.on_reorder_mode_enabled&&t.functions.on_reorder_mode_enabled,this.fnOnReorderModeDisabled="function"==typeof t.functions.on_reorder_mode_disabled&&t.functions.on_reorder_mode_disabled,this.fnOnScroll="function"==typeof t.functions.on_scroll&&t.functions.on_scroll,this.fnSaveNewOrder="function"==typeof t.functions.save_new_order&&t.functions.save_new_order,this.fnGetNewOrderFirstPosId="function"==typeof t.functions.get_new_order_first_position_id&&t.functions.get_new_order_first_position_id,
this.$ScrollableContainer="undefined"!=typeof t.scrollable_container?$(t.scrollable_container):$(window),this.$CurrentBlock=null,this.bIsTouching=!1,this.bIsTouchLongPressed=!1,this.bTouchScreen=e.isTouchScreen(),this.bResetTouchEvent=!1,i.toggleClass("touch-dragdrop-with-scroll",this.bTouchScreen),this.bSelecting=!1,this.bSelectionOrderBlocked=!1,this.iIndexDragStart=null,this.sIdCurrent=null,this.iTouchDelay=500,this.iTouchPosX=null,this.iTouchPosY=null,this.iTouchPosLim=5,this.iResetTouchEventX=null,this.iResetTouchEventY=null,this.oLoader=null,this.oUpdateTimer=null,this.oTouchTimer=null,this.sEventsSetTo=null,this.sReorderMode=null,this.sTouchMode=null,this.tOnDropItemTimer=!1;var a=this,r=function(e){a.callbackScroll(e)},l=function(e,t){a.callbackDropItem(e,t)},d=function(){a.callbackDragEnd()},u=function(e,t){a.callbackAbort(e,t)},c=function(e,t,i){a.callbackReorder(e,t,i)},f=function(e){return a.getElemChildrenForClick(e)},h=function(e,t){return a.getElemById(e,t)},p=function(e){return a.getIdByDomElem(e)};this.initElems(),this.bTouchScreen&&$("body").on("touchmove",function(e){a.iTouchPosX=e.clientX,a.iTouchPosY=e.clientY}),this.oDragdropReorder=new s({$eltDrag:this.$Container,$eltDrop:this.$Elems,$ScrollableContainer:this.$ScrollableContainer,fnCallbackReorder:c,fnCallbackScroll:r,fnCallbackReorderAbort:u,fnGetElemChildren:f,fnCustomGetElemById:h,fnCustomGetIdByDomElem:p}),this.oDragdropSelection=new n({$eltDrag:this.$Container,$eltDrop:this.$Elems,$ScrollableContainer:this.$ScrollableContainer,fnCallbackScroll:r,fnCallbackDropItem:l,fnCallbackDragEnd:d,fnCallbackDragAbort:u,fnGetElemChildren:f}),this.setSelectionEvents(!0)}},getContainer:function(){return this.$Container},getElems:function(){return this.$Elems},getSelectedElems:function(){return this.aSelectedElems},getElemById:function(e,t){return e=e.toString(),void 0===t&&(t=this.$Elems),this.fnCustomGetElemById?this.fnCustomGetElemById(e,t):t.filter('[data-id="'+e+'"]')},getIdByDomElem:function(e){return this.fnCustomGetIdByDomElem?this.fnCustomGetIdByDomElem(e):!!(e&&e.length&&e.data("id"))&&e.data("id").toString()},getElemChildrenForClick:function(e){return"function"==typeof this.fnGetElemChildrenForClick?this.fnGetElemChildrenForClick(e):e.children()},initElems:function(){var e=this.$Elems.filter(":not(.is-dragdrop)"),t=this;e.length&&(this.fnInitElems&&this.fnInitElems(e),e.addClass("is-dragdrop"),this.bTouchScreen&&(e.on("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,!1}),e.find("*").on("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,!1})),this.getElemChildrenForClick(e).off("click").on("click",function(e){t.isSelecting()&&(e.preventDefault(),t.callbackDropItem($(this).parents(".is-dragdrop"),"click"))}),this.bTouchScreen&&(e.on("touchmove",function(e){return null!==t.sTouchMode?e.preventDefault():(t.iTouchPosX=e.clientX,t.iTouchPosY=e.clientY,t.bResetTouchEvent&&(Math.abs(t.iResetTouchEventX-t.iTouchPosX)>t.iTouchPosLim||Math.abs(t.iResetTouchEventY-t.iTouchPosY)>t.iTouchPosLim)&&(t.bResetTouchEvent=!1,t.setEventsForSelection(),e.type="drag",$(this).trigger(e)),e.stopPropagation()),!0}),e.on("touchstart",function(e){t.bIsTouchLongPressed=!1,t.bIsTouching=!0,t.oTouchTimer&&(clearTimeout(t.oTouchTimer),t.oTouchTimer=!1),t.iTouchPosX=e.clientX,t.iTouchPosY=e.clientY;var i=t.iTouchPosX,n=t.iTouchPosY,s=$(this),o=s.hasClass("is-dragdrop-selected")?"reorder":"selection",a=t.sEventsSetTo!==o;if("selection"===o?t.setEventsForSelection():t.setEventsForReorder(),a)return t.bResetTouchEvent||(t.iResetTouchEventX=t.iTouchPosX,t.iResetTouchEventY=t.iTouchPosY,t.bResetTouchEvent=!0,s.trigger(e)),!0;t.oTouchTimer=setTimeout(function(){t.oTouchTimer=!1,Math.abs(i-t.iTouchPosX)>t.iTouchPosLim||Math.abs(n-t.iTouchPosY)>t.iTouchPosLim||(t.bIsTouchLongPressed=!0,window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(20),"selection"===o?t.oDragdropSelection.dropTouchstart(s,e):t.oDragdropReorder.dropTouchstart(s,e),t.sTouchMode=o,e.type="dragstart",s.triggerHandler(e))},t.iTouchDelay)}),e.on("touchend",function(e){t.oTouchTimer&&(clearTimeout(t.oTouchTimer),t.oTouchTimer=!1);var i=$(this);"selection"===t.sTouchMode?t.oDragdropSelection.dropTouchend(i):"reorder"===t.sTouchMode&&t.oDragdropReorder.dropTouchend(),t.bIsTouchLongPressed=!1,t.bIsTouching=!1,t.sTouchMode=null,t.bResetTouchEvent=!1,e.type="dragend",i.triggerHandler(e)})))},updateElementList:function(){if(this.$Elems=this.$Container.children(),this.$Elems.length&&(this.oDragdropSelection.updateDropElements(this.$Elems),this.oDragdropReorder.updateDropElements(this.$Elems,this.aSelectedElems),this.initElems(),this.updateElemsIdOrder(),this.aSelectedElems.length>0))for(var e in this.aSelectedElems){var t=this.getElemById(this.aSelectedElems[e]);if(!t||!t.length){this.setReorderMode(null),this.setEventsForSelection();break}}},updateElemsIdOrder:function(){this.aElemsIdOrder=[];var e=this;this.$Elems.each(function(t){var i=e.getIdByDomElem($(this));!i&&e.oDragdropReorder.isClone($(this))&&(i=e.getIdByDomElem(e.oDragdropReorder.getCloned())),i&&(e.aElemsIdOrder[t]=i)})},setEventsSetTo:function(e){this.sEventsSetTo=e;var t=$("body");t.removeClass("is-dragdrop-selection is-dragdrop-reorder"),"string"==typeof this.sEventsSetTo&&t.addClass("is-dragdrop-"+this.sEventsSetTo)},setSelectionEvents:function(e){"boolean"!=typeof e&&(e=!0),e?(this.oDragdropSelection.setEvents(),this.setEventsSetTo("selection")):(this.oDragdropSelection.unsetEvents(),"selection"===this.sEventsSetTo&&this.setEventsSetTo(null))},setReorderEvents:function(e){"boolean"!=typeof e&&(e=!0),e?(this.oDragdropReorder.setEvents(),this.setEventsSetTo("reorder")):(this.oDragdropReorder.unsetEvents(),"reorder"===this.sEventsSetTo&&this.setEventsSetTo(null))},unsetAllEvents:function(){this.setSelectionEvents(!1),this.setReorderEvents(!1)},setEventsForSelection:function(){"selection"!==this.sEventsSetTo&&(this.setReorderEvents(!1),this.setSelectionEvents(!0))},setEventsForReorder:function(){"reorder"!==this.sEventsSetTo&&(this.setSelectionEvents(!1),this.setReorderEvents(!0))},isSelecting:function(){return this.bSelecting},setIsSelecting:function(e){"boolean"!=typeof e&&(e=!0),this.$Container.toggleClass("is-dragdrop-selecting",e),this.bSelecting=e},addElemToSelection:function(e,t,i){this.toggleElemToSelection(e,t,!0,i)},removeElemFromSelection:function(e,t,i){this.toggleElemToSelection(e,t,!1,i)},updateSelectionOrder:function(){if(!(this.aSelectedElems.length<2||this.bSelectionOrderBlocked)){for(var e=[],t=0;t<this.aElemsIdOrder.length;t++){var i=this.aElemsIdOrder[t];-1!==this.aSelectedElems.indexOf(i)&&e.push(i)}this.aSelectedElems=e}},toggleSelectAll:function(){if(this.isSelecting){bAdd=this.aElemsIdOrder.length!==this.aSelectedElems.length;for(var e=0;e<this.aElemsIdOrder.length;e++){var t=this.aElemsIdOrder[e];this.toggleElemToSelection(t,null,bAdd)}}},emptySelection:function(){for(;this.aSelectedElems.length;)this.popLastSelectedElement();this.updateElementList()},popLastSelectedElement:function(){var e=this.aSelectedElems[this.aSelectedElems.length-1];return this.removeElemFromSelection(e),e},toggleElemToSelection:function(e,t,i,n){var s=this;if(t&&t.length>1)return void t.each(function(){s.toggleElemToSelection(null,$(this),i,n)});if(!e&&t&&(e=this.getIdByDomElem(t)),e&&!t&&(t=this.getElemById(e)),!e&&!t)return console.error("toggleElemToSelection --- no id nor dom element to refer to"),!1;var o=-1!==this.aSelectedElems.indexOf(e),a=!1;"boolean"!=typeof i&&(i=!o),i?o||(this.aSelectedElems.push(e),t.addClass("is-dragdrop-selected").find('input[type="checkbox"]').prop("checked",!0),a=!0):(t.removeClass("is-dragdrop-selected is-dragdrop-active is-dragdrop-inactive dragdrop-selection").find('input[type="checkbox"]').prop("checked",!1),o&&(this.aSelectedElems.splice(this.aSelectedElems.indexOf(e),1),a=!0)),null!==this.oUpdateTimer&&clearTimeout(this.oUpdateTimer),a&&!n&&(this.oUpdateTimer=setTimeout(function(){s.oUpdateTimer=null,s.updateSelectionOrder(),"function"==typeof s.fnUpdateSelectedCount&&s.fnUpdateSelectedCount("moveMany"===s.sReorderMode?s.aSelectedElems.length:0),s.updateElementList()},100))},countSelectedElems:function(){return this.aSelectedElems.length},getReorderMode:function(){return this.sReorderMode},setReorderMode:function(e){this.sReorderMode!==e&&(this.$Container.removeClass("is-dragdrop-reorder-moveMany is-dragdrop-reorder-moveOneNoSelect"),"moveMany"===e||"moveOneNoSelect"===e?(this.sReorderMode=e,this.$Container.addClass("is-dragdrop-reorder-"+e),this.setIsSelecting(),"function"==typeof this.fnOnReorderModeEnabled&&this.fnOnReorderModeEnabled(),"moveMany"===e?"function"==typeof this.fnOnReorderModeMany&&this.fnOnReorderModeMany():("function"==typeof this.fnOnReorderModeOneNoSelect&&this.fnOnReorderModeOneNoSelect(),this.emptySelection(),this.setEventsForReorder()),"function"==typeof this.fnUpdateSelectedCount&&this.fnUpdateSelectedCount("moveMany"===this.sReorderMode?this.aSelectedElems.length:0)):(this.sReorderMode=null,this.setIsSelecting(!1),this.emptySelection(),this.setEventsForSelection(),"function"==typeof this.fnOnReorderModeDisabled&&this.fnOnReorderModeDisabled(),"function"==typeof this.fnUpdateSelectedCount&&this.fnUpdateSelectedCount(0)))},isReorderActivated:function(){return null!==this.sReorderMode},moveToFirstPos:function(){this.saveNewOrder(0)},moveToBeginPage:function(){if("function"==typeof this.fnGetNewOrderFirstPosId){var e=this;return void this.fnGetNewOrderFirstPosId(function(t){e.saveNewOrder(t,!0)})}this.saveNewOrder(0)},saveNewOrder:function(e,n){if(null===this.oLoader&&(this.oLoader=i.loading(t.__("loading.in_progress"))),this.setEventsForSelection(),-1!==this.aSelectedElems.indexOf(e)){var s=this.aElemsIdOrder.indexOf(e);for(e=0,s;s>=0;s--){var o=this.aElemsIdOrder[s];if(o&&-1===this.aSelectedElems.indexOf(o)){e=o;break}}}if(n=!!n,"function"==typeof this.fnSaveNewOrder){var a=this;this.fnSaveNewOrder(this.aSelectedElems,e,function(){a.reorderMoveItems(e,n)})}else this.reorderMoveItems(e,n)},reorderMoveItems:function(e,t){var i=this.aSelectedElems.length,n=this;if(i>0){this.sIdCurrent||(this.sIdCurrent=this.aSelectedElems[0]);var s,o,a=this.aSelectedElems.indexOf(this.sIdCurrent);if(-1!==a&&(s=this.getElemById(this.sIdCurrent),0===e?"function"==typeof this.fnGetNewOrderFirstPosId?this.fnGetNewOrderFirstPosId(function(e){if(0===e)n.$Container.prepend(s);else for(var t=0;t<i;t++)s=n.getElemById(n.aSelectedElems[t]),s.remove()}):this.$Container.prepend(s):t?this.$Container.prepend(s):(o=this.getElemById(e),s.insertAfter(o)),i>1))if(0===a)for(var r=1;r<i;r++)s=this.getElemById(this.aSelectedElems[r]),o=this.getElemById(this.aSelectedElems[r-1]),s.insertAfter(o);else{for(var l=0;l<a;l++)s=this.getElemById(this.aSelectedElems[l]),s.insertBefore(this.$CurrentBlock);for(var d=a+1;d<this.aSelectedElems.length;d++)s=this.getElemById(this.aSelectedElems[d]),o=this.getElemById(this.aSelectedElems[d-1]),s.insertAfter(o)}}this.$Elems.filter(".is-dragdrop-inactive").removeClass("is-dragdrop-inactive dragdrop-selection"),this.sIdCurrent=null,this.updateElementList(),setTimeout(function(){n.$Elems.filter(".is-dragdrop-selected").removeClass("is-dragdrop-selected").find('input[type="checkbox"]').prop("checked",!1),n.aSelectedElems=[],n.bSelectionOrderBlocked=!1,"moveOneNoSelect"!==n.sReorderMode?n.setReorderMode(null):(n.setReorderMode(null),n.setReorderMode("moveOneNoSelect")),n.oLoader.isOpen()&&(n.oLoader.close(),n.oLoader=null)},500)},callbackScroll:function(e){"function"==typeof this.fnOnScroll&&this.fnOnScroll(e)},callbackDropItem:function(e,t){if("click"===t&&this.bTouchScreen&&(t="touchclick"),"touchstart"!==t&&this.toggleElemToSelection(null,e),this.aSelectedElems.length>0){this.setReorderMode("moveMany");var i=this;"click"===t||"change"===t?(i.setSelectionEvents(!1),this.tOnDropItemTimer&&(clearTimeout(this.tOnDropItemTimer),this.tOnDropItemTimer=!1),"change"===t?i.setReorderEvents(!0):this.tOnDropItemTimer=setTimeout(function(){i.setReorderEvents(!0)},300)):"touchstart"===t&&this.tOnDropItemTimer&&(clearTimeout(this.tOnDropItemTimer),this.tOnDropItemTimer=!1)}else this.setReorderMode(null)},callbackDragEnd:function(){this.aSelectedElems.length>0&&(this.setReorderMode("moveMany"),this.bTouchScreen||this.setEventsForReorder())},callbackAbort:function(e,t){t.stopPropagation(),this.oDragdropSelection.isStopped()&&(e.hasClass("is-dragdrop-selected")||(this.setEventsForSelection(),this.bTouchScreen&&this.oDragdropSelection.dropTouchstart(this.getElemChildrenForClick(e),t))),this.oDragdropReorder.isStopped()&&e.hasClass("is-dragdrop-selected")&&(this.setEventsForReorder(),this.bTouchScreen&&this.oDragdropReorder.dropTouchstart(this.getElemChildrenForClick(e),t))},callbackReorder:function(e,t,i){this.bSelectionOrderBlocked=!0,this.sIdCurrent=e,this.iIndexDragStart=i,this.$CurrentBlock=this.getElemById(this.sIdCurrent),t&&t.length||(t=[this.sIdCurrent]);for(var n=0;n<t.length;n++)this.addElemToSelection(t[n],null,!0);var s,o=this.$CurrentBlock.index(),a=this;if(0===o){if("function"==typeof this.fnGetNewOrderFirstPosId)return void this.fnGetNewOrderFirstPosId(function(e){a.saveNewOrder(e)});s=0}else s=this.getIdByDomElem(this.$Elems.eq(o-(this.iIndexDragStart<o?0:1)));this.saveNewOrder(s)}},o}),define("text!skins/default/video/playlists/tb_list_elem_base.mustache",[],function(){return'<span class=\'in-fav-indic\'>\n\t<span class="icon-f icf-check"></span>\n</span>\n{{^bIsVideo}}\n<span class=\'is-fav-indic{{#bWatchLater}} is-watch-later{{/bWatchLater}}\'>\n\t{{#bWatchLater}}<span class="icon-f icf-clock"></span>{{/bWatchLater}}\n\t{{^bWatchLater}}<span class="icon-f icf-favorites"></span>{{/bWatchLater}}\n</span>\n{{/bIsVideo}}\n'}),define("text!skins/default/video/playlists/tb_list_elem_base_line.mustache",[],function(){return'<div class="favlist-elem favlist-elem-line{{#bInList}} in-favlist{{/bInList}}{{#bIsFull}} max-videos-reached{{/bIsFull}}" id="favlist_{{{sId}}}">\n\t<div class="favlist-e-left">\n\t\t<div class="favlist-e-visibility">{{{sPicto}}}</div>\n\t\t<div class="favlist-e-title">\n\t\t\t<span class="icon-f icf-check in-fav-indic"></span>\n\t\t\t{{#bWatchLater}}<span class="icon-f icf-clock is-watch-later"></span>{{/bWatchLater}}\n\t\t\t{{{sName}}}\n\t\t\t<span class="favlist-e-tags">\n\t\t\t\t{{#bIsFull}}<span class="max-videos-reached" title="{{{sFullTitle}}}">{{{sFull}}}</span>{{/bIsFull}}\n\t\t\t\t<span class="favlist-e-nb-videos">{{{sNbVideos}}}</span>\n\t\t\t\t{{{sTags}}}\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="favlist-e-action favlist-e-right thumb-inside">{{#sAction}}{{{sAction}}}{{/sAction}}</div>\n</div>\n'}),define("text!skins/default/video/playlists/tb_list_elem_base_small_line.mustache",[],function(){return'<div class="favlist-elem favlist-elem-small-line{{#bInList}} in-favlist{{/bInList}}{{#bIsFull}} max-videos-reached{{/bIsFull}}" id="favlist_{{{sId}}}">\n\t<div class="favlist-e-left">\n\t\t<div class="favlist-e-visibility">{{{sPicto}}}</div>\n\t\t<div class="favlist-e-title">\n\t\t\t<span class="icon-f icf-check in-fav-indic"></span>\n\t\t\t{{#bWatchLater}}<span class="icon-f icf-clock is-watch-later"></span>{{/bWatchLater}}\n\t\t\t{{{sName}}}\n\t\t\t<span class="favlist-e-tags">\n\t\t\t\t{{#bIsFull}}<span class="max-videos-reached" title="{{{sFullTitle}}}">{{{sFull}}}</span>{{/bIsFull}}\n\t\t\t\t<span class="favlist-e-nb-videos">{{{sNbVideos}}}</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="favlist-e-action thumb-inside favlist-e-right">{{#sAction}}{{{sAction}}}{{/sAction}}</div>\n</div>\n'}),define("text!skins/default/video/playlists/tb_list_elem_add_to.mustache",[],function(){return'<div class=\'pl-add-remove{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<div class=\'add\'>\n\t\t{{^bInList}}\n\t\t\t{{#bMaxVideosReached}}\n\t\t\t\t{{^bDisplayModeList}}<span class="info-txt">{{{ sMax }}}</span>{{/bDisplayModeList}}\n\t\t\t\t<span class="icon-f icf-ban"></span>\n\t\t\t{{/bMaxVideosReached}}\n\t\t\t{{^bMaxVideosReached}}<span class="icon-f icf-favorites-add"></span>{{/bMaxVideosReached}}\n\t\t{{/bInList}}\n\t\t{{#bInList}}<span class="icon-f icf-favorites-add"></span>{{/bInList}}\n\t\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sAdd }}}</span>{{/bDisplayModeList}}\n\t</div>\n\t<div class=\'remove\'>\n\t\t<span class="icon-f icf-trash"></span>\n\t\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sRemove }}}</span>{{/bDisplayModeList}}\n\t</div>\n</div>'}),define("text!skins/default/video/playlists/tb_list_elem_edit.mustache",[],function(){return'<div class=\'pl-edit{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<span class="icon-f icf-pencil"></span>\n\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sEdit }}}</span>{{/bDisplayModeList}}\n</div>'}),define("text!skins/default/video/playlists/tb_list_elem_move_to.mustache",[],function(){return'<div class=\'pl-move-to{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<span class="icon-f icf-mail-forward"></span>\n\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sMoveTo }}}</span>{{/bDisplayModeList}}\n</div>'}),define("text!skins/default/video/playlists/edit_list.mustache",[],function(){return'<div class="favlist-edit">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\n\t<span class="favlist-picto icon-f icf-{{#bWatchLater}}clock{{/bWatchLater}}{{^bWatchLater}}favorites{{/bWatchLater}}"></span>\n\n\t{{#bWatchLater}}<div class="favlist-list-title"><div class="form-horizontal"><div class="form-group"><p>{{{ sTitle }}}</p></div></div></div>{{/bWatchLater}}\n\t<div class="favlist-edit-form"></div>\n\n\t<div class="favlist-edit-list-menu">\n\t\t<button class="btn btn-show-more btn-default btn-lg" title="{{{ sShowMore }}}"><span class="icon-f icf-minus-square"></span></button>\n\n\t\t<p class="legend">{{{ sNbVideo }}}</p>\n\n\t\t{{#bMaxVideosReached}}<span class="max-videos-reached" title="{{{ sMaxTitle }}}">{{{ sMax }}}</span>{{/bMaxVideosReached}}\n\n\t\t<button class="btn btn-reorder btn-default btn-lg" title="{{{ sReorder }}}"><span class="icon-f icf-arrows"></span> {{{ sReorder }}}</button>\n\t\t<button class="btn btn-select btn-default btn-lg" title="{{{ sSelect }}}"><span class="icon-f icf-check"></span> {{{ sSelect }}}</button>\n\t\t<button class="btn btn-empty btn-default btn-lg" title="{{{ sEmpty }}}"><span class="icon-f icf-close"></span> {{{ sEmpty }}}</button>\n\n\t\t<button class="btn btn-check-all btn-default btn-lg" title="{{{ sMoveToFirstPos }}}"><span class="icon-f icf-check-square"></span>/<span class="icon-f icf-square"></span> {{{ sCheckUncheckAll }}}</button>\n\t\t<button class="btn btn-move-first btn-default btn-lg" title="{{{ sMoveToFirstPos }}}"><span class="icon-f icf-arrows"></span> {{{ sMoveToFirstPos }}}</button>\n\t\t<button class="btn btn-move-begin-page btn-default btn-lg" title="{{{ sMoveToBeginPage }}}"><span class="icon-f icf-arrows"></span> {{{ sMoveToBeginPage }}}</button>\n\t\t<button class="btn btn-move-to btn-default btn-lg" title="{{{ sMoveToOtherList }}}"><span class="icon-f icf-mail-forward"></span> {{{ sMoveToOtherList }}}</button>\n\t\t<button class="btn btn-delete btn-danger btn-lg" title="{{{ sDelete }}}"><span class="icon-f icf-trash"></span> {{{ sDelete }}}</button>\n\n\t\t<button class="btn btn-cancel btn-default btn-lg" title="{{{ sCancel }}}"><span class="icon-f icf-close-thin"></span> {{{ sCancel }}}</button>\n\n\t\t<a class="btn btn-link-pl btn-link btn-lg hide-on-reorder" href="{{{ sPlayListPageHref }}}" target="_blank" title="{{{ sPlayListPage }}}"><span class="icon-f icf-player-play-circle-o"></span> {{{ sPlayListPage }}}</a>\n\t\t<a class="btn btn-link-rpl btn-link btn-lg hide-on-reorder" href="{{{ sRandomPlayListPageHref }}}" target="_blank" title="{{{ sRandomPlayListPage }}}"><span class="icon-f icf-random"></span> {{{ sRandomPlayListPage }}}</a>\n\t\t<a class="btn btn-link-pl btn-link btn-lg hide-on-reorder" href="{{{ sListPageHref }}}" target="_blank" title="{{{ sListPage }}}"><span class="icon-f icf-arrow-right"></span> {{{ sListPage }}}</a>\n\t</div>\n\n\t<div class="mozaique thumbs-5-cols"></div>\n</div>'}),define("text!skins/default/video/playlists/edit_list_delete_btn.mustache",[],function(){return'<button class="btn btn-default delete" type="button">\n\t<span class="icon-f icf-trash"></span>\n\t{{{ sDelete }}}\n</button>'}),define("text!skins/default/video/playlists/edit_list_voters_btn.mustache",[],function(){return'{{#oVote.iTotal}}\n\t<button class="btn btn-vote btn-link btn-lg hide-on-reorder" title="{{{ sVoters }}}">\n\t\t<span class="mobile-hide">\n\t\t\t{{#oVote.iGood}}<span class="icon-f icf-thumb-up"></span> {{{ oVote.sGood }}}{{/oVote.iGood}}\n\t\t\t<span class="icon-f icf-heart"></span> {{{ oVote.sRating }}}\n\t\t\t{{#oVote.iBad}}<span class="icon-f icf-thumb-down"></span> {{{ oVote.sBad }}}{{/oVote.iBad}}\n\t\t</span>\n\t\t<span class="mobile-show-inline">\n\t\t\t<span class="icon-f icf-thumb-up"></span> {{{ oVote.sRating }}}\n\t\t</span>\n\t</button>\n{{/oVote.iTotal}}'}),define("text!skins/default/video/playlists/edit_list_voters.mustache",[],function(){return'<div class="favlist-edit">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\t<div class="voters-list">\n\t\t<p class="voters-list-title">\n\t\t\t{{{ sTitle }}}\n\t\t\t<span class="voters-list-votes">\n\t\t\t\t<span class="good">\n\t\t\t\t\t<span class="icon-f icf-thumb-up"></span> {{{ sGood }}}\n\t\t\t\t</span>\n\t\t\t\t<span class="rating">\n\t\t\t\t\t<span class="icon-f icf-heart"></span> {{{ sRating }}}\n\t\t\t\t</span>\n\t\t\t\t<span class="bad">\n\t\t\t\t\t<span class="icon-f icf-thumb-down"></span> {{{ sBad }}}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</p>\n\n\t\t<ul class="voters">\n\t\t\t{{{ sVoters }}}\n\t\t\t{{^bLastPage}}\n\t\t\t\t<li class="action">\n\t\t\t\t\t<button type="button" class="btn btn-default btn-danger init-ok load-more-voters">\n\t\t\t\t\t\t<span>{{{ sShowMore }}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t{{/bLastPage}}\n\t\t</ul>\n\t</div>\n</div>'}),define("text!skins/default/video/playlists/edit_list_voter.mustache",[],function(){return'<li>\n\t<a href="/profiles/{{{ name }}}" title="{{{ display }}}">\n\t\t<figure><img src="{{{ picture }}}" alt="{{{ display }}}"/></figure>\n\t\t<span>{{{ display }}}</span>\n\t</a>\n</li>'}),define("skins/default/video/playlists/one_list",["config/main","static/utils","mustache","lib/i18n!front","lib/helpers/overlay/contextual_popup","lib/helpers/dragdrop_select_and_reorder","lib/helpers/inline_loader","skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_common_init","skins/form/validator","skins/default/pagination","text!./tb_list_elem_base.mustache","text!./tb_list_elem_base_line.mustache","text!./tb_list_elem_base_small_line.mustache","text!./tb_list_elem_add_to.mustache","text!./tb_list_elem_edit.mustache","text!./tb_list_elem_move_to.mustache","text!./edit_list.mustache","text!./edit_list_delete_btn.mustache","text!./edit_list_voters_btn.mustache","text!./edit_list_voters.mustache","text!./edit_list_voter.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D){var C=function(e,t){if(void 0!==e){this.bListOfLists=void 0!==t&&"object"==typeof t,this.oListOfLists=this.bListOfLists?t:null,this.sType=this.bListOfLists&&"undefined"!=typeof t.sType?t.sType:"undefined"!=typeof e.type?e.type:null,this.sId=e.id,this.sName=this.t=e.name,this.sUrl=this.u=e.url,this.sPlaylistUrl=!!e.playlist&&e.playlist,this.sPlaylistUrlParams=!!e.pl_params&&e.pl_params,this.sRandomPlaylistUrl=!!e.rand_playlist&&e.rand_playlist,this.sHistoricalStart="favlist_"+this.sId+"_",this.oCsrf=e.csrf?e.csrf:{},this.bWatchLater=!!e.watch_later,this.aCover=e.cover,this.sVisibility=e.status,this.bIsLoading=!1,this.bIsLoadingVoters=!1,this.bHasMoreVideosToLoad=!1,this.bNeedInfoUpdate=!0,this.bNeedTBElemUpdate=!1,this.bVideoListMenuPined=!1,this.bVideoListMenuShowMore=!0,this.bVideoListMenuShowMoreAuto=!0,this.sFormEdit="",this.aFormEditValidationRules=[],this.iDelayTouch=500,this.iPage=0,this.iLoadedPage=null,this.iMobileOnlyWidth=this.oListOfLists&&this.oListOfLists.iMobileOnlyWidth?this.oListOfLists.iMobileOnlyWidth:0,this.iMobileWidth=this.oListOfLists&&this.oListOfLists.iMobileWidth?this.oListOfLists.iMobileWidth:0,this.iHeaderMobileHeight=0,this.iClosestListMenuRelativeParentTop=0,this.iNbVideos=e.nb_videos,this.sNbVideosFormatted=e.nb_videos_f,this.iNbVideosPerPage=0,this.aVideos=[],this.iNbTags=e.nb_tags,this.oTags=e.tags,this.bMaxVideosReached=this.bHadMaxVideosReached=e.bMaxVideosReached,this.$EditContainer=null,this.$FormEditContainer=null,this.$VideoListContainer=null,this.$VideoListMenuShowMore=null,this.$VideoListMenuShowMoreIcf=null,this.$BtnSelect=null,this.$BtnEmpty=null,this.$BtnReorder=null,this.$BtnCheckAll=null,this.$BtnMoveFirst=null,this.$BtnMoveBeginPage=null,this.$BtnMoveTo=null,this.$BtnDelete=null,this.$VotersBtn=null,this.$BtnCancel=null,this.$BtnsLink=null,this.oTbMenu=null,this.oVote={bLoaded:!1,iTotal:0,iGood:0,iBad:0,iRating:0,sTotal:"",sGood:"",sBad:"",sRating:""},this.bInList=!!e.in_list,this.bListOfLists&&(this.initHistoricalNav(),t.oOptions.sIdVideo&&(this.sIdVideo=t.oOptions.sIdVideo.toString())),this.bIsMobileOnly=$(window).width()<this.iMobileOnlyWidth;var i=this;$(window).on("resize",function(){var e=$(window).width();i.bIsMobileOnly=e<i.iMobileOnlyWidth,i.updateHeaderMobileHeight(),i.updateVideoListMenu()})}};return C.prototype={getId:function(){return this.sId},getName:function(){return this.sName},getFullUrl:function(){return e.domains.slave+this.sUrl},getUrl:function(){return this.sUrl},getMainContainer:function(){return this.oListOfLists.getContainer()},getListListContainer:function(){return this.oListOfLists.getListContainer()},getPlaylistUrl:function(){return this.sPlaylistUrl},getRandomPlaylistUrl:function(){return this.sRandomPlaylistUrl},getType:function(){return this.sType},getCover:function(){return this.aCover&&this.aCover.length?this.aCover.length<4?'<img src="'+this.aCover[0]+'" alt="" />':'<img src="'+this.aCover[0]+'" alt="" class="top-left"/><img src="'+this.aCover[1]+'" alt="" class="top-right" /><img src="'+this.aCover[2]+'" alt="" class="bottom-left" /><img src="'+this.aCover[3]+'" alt="" class="bottom-right" />':'<img src="'+xv.conf.domains["static"]+'/v3/img/skins/default/favorites/default169ll.png" alt="" />'},getVisibility:function(){return this.sVisibility},getVisibilityPicto:function(e){var t='<span class="icon-f icf-';switch(void 0===e&&(e=this.sVisibility),e){case"NOBODY":t+="eye-blocked";break;case"FRIEND":t+="users";break;case"REGISTER":t+="user-check";break;case"PASSWORD":t+="lock";break;case"ANYONE":default:t+="eye"}return t+='"></span>'},getTags:function(){if(!this.oTags)return[];var e=[];for(var t in this.oTags)e.push({sId:t,sName:this.oTags[t]});return e},getTagsHTMLList:function(){sTags="";var e=this.getTags();if(e&&e.length)for(var t=0;t<e.length;t++){var i=e[t];sTags+=' <span class="tag">'+i.sName+"</span>"}return sTags},getMoveToCsrf:function(){return!(!this.oCsrf||!this.oCsrf.moveto)&&this.oCsrf.moveto},isWatchLater:function(){return this.bWatchLater},isVideoInList:function(){return this.bInList},isListFull:function(){return this.bMaxVideosReached},setPage:function(e){this.iPage=e},setLoadedPage:function(e){this.iLoadedPage=e},getPage:function(){return this.iPage},getPreviousPage:function(){var e=this.iPage-1;return e>0?e:0},getNextPageToLoad:function(){var e=this.iLoadedPage?this.iLoadedPage:this.iPage;return++e},setPopError:function(e,t,i){this.unsetPopLoader(),"string"!=typeof t&&(t=n.__("misc.error_please_retry")),"string"==typeof e&&e.length?t.length&&(e=" : "+e):e="";var o=t+e;o.length||(o=n.__("misc.error_please_retry")),s.alert('<span class="text-danger">'+o+"</span>","function"==typeof i?i:null)},setPopLoader:function(e){this.unsetPopLoader(),this.oPopLoader=s.loading(e)},unsetPopLoader:function(){this.oPopLoader&&(this.oPopLoader.close(),this.oPopLoader=null)},getThumbBlockElem:function(){var e=this.oListOfLists.getDisplayMode();"add_to"===this.sType?this.setThumbBlockAddTo(e):"move_to"===this.sType?this.setThumbBlockMoveTo(e):this.setThumbBlockEdit(e);var t=r.init_listing(this.$TBElem,{type:"favlist",favorite:this});return this.oTbMenu="object"==typeof t&&"undefined"!=typeof t[0]?t[0]:null,this.bNeedTBElemUpdate=!1,this.$TBElem},setThumbBlock:function(e,t){var n;n="list"===t?$(i.render(f,{sId:this.getId(),sPicto:this.getVisibilityPicto(),sName:this.getName(),bWatchLater:this.isWatchLater(),sNbVideos:this.getNbVideosTxt(),sTags:this.getTagsHTMLList(),bInList:this.isVideoInList(),bIsFull:this.isListFull(),sFull:xv.i18n.__("video.favs.full"),sFullTitle:xv.i18n.__("video.favs.max_vids_reached"),sAction:e})):"cols"===t?$(i.render(h,{sId:this.getId(),sPicto:this.getVisibilityPicto(),sName:this.getName(),bWatchLater:this.isWatchLater(),sNbVideos:this.getNbVideosTxt(),bInList:this.isVideoInList(),bIsFull:this.isListFull(),sFull:xv.i18n.__("video.favs.full"),sFullTitle:xv.i18n.__("video.favs.max_vids_reached"),sAction:e})):$(xv.thumbs.get_thumb_block_html(this,"favlist",{tb_thumb_end:i.render(c,{bWatchLater:this.bWatchLater})+(e||"")}).html),this.$TBElem&&this.$TBElem.length&&this.$TBElem.parents("body").length&&this.$TBElem.replaceWith(n),this.$TBElem=n},resetThumbBlockEvents:function(){"add_to"===this.sType?this.setThumbBlockAddToEvents():this.setThumbBlockEditEvents()},"delete":function(){var e=this;s.confirm(n.__("video.favs.delete_confirm"),function(){e.setPopLoader(),$.post({url:"/api/playlists/list/"+e.sId+"/delete",dataType:"json",data:{csrf:e.oCsrf["delete"]},success:function(t){t.result||e.setPopError(t.message)},error:function(t,i,n){e.setPopError(n)},complete:function(){e.oListOfLists.loadList(),e.unsetPopLoader()}})})},initHistoricalNav:function(){var e=this;this.oListOfLists.setHistoricalFunc("pl_edit_"+this.sId,function(){e.showEdit()})},setThumbBlockAddTo:function(e){var t={bMaxVideosReached:!!this.bMaxVideosReached,bWatchLater:this.bWatchLater,bInList:!!this.bInList,sMax:n.__("video.favs.full"),bDisplayModeList:"mozaique"!==e,sAdd:!this.bInList&&this.bMaxVideosReached?n.__("video.favs.full"):n.__("video.favs.add_video"),sRemove:n.__("video.favs.remove_video_from_list")};this.setThumbBlock(i.render(p,t),e),this.$MaxVideosReached=this.$TBElem.find(".max-videos-reached"),this.setThumbBlockAddToEvents()},setThumbBlockAddToEvents:function(){var e=this;this.$TBElem.find(".pl-add-remove").off("click").on("click",function(t){t.preventDefault(),e.bInList?e.removeVideoFromList():e.addVideoToList()})},addVideoToList:function(){this.addRemoveVideo("add")},removeVideoFromList:function(){this.addRemoveVideo("remove")},addRemoveVideo:function(e){if("add"===e&&this.bMaxVideosReached)return s.alert(n.__("video.favs.max_vids_reached")),!1;var t=this,i=n.__("add"===e?"video.favs.error_occured_adding":"video.favs.error_occured_removing"),o="add"===e?n.__("video.favs.adding_video"):n.__("video.favs.removing_video");this.setPopLoader(o+' "'+this.sName+'"...'),$.post({url:"/api/playlists/list/"+this.sId+"/"+e+"/"+this.sIdVideo,dataType:"json",data:{csrf:this.oCsrf[e]},success:function(n){return n.result?n.logged?void t.setToInList("add"===e):void t.oListOfLists.displayLogin():void t.setPopError(n.message,i)},error:function(e,n,s){t.setPopError(s,i)},complete:function(){t.unsetPopLoader()}})},setToInList:function(e,t){"boolean"!=typeof e&&(e=!0),e!==this.bInList&&("boolean"!=typeof t&&(t=!0),this.bInList=e,this.bInList?(this.$TBElem&&this.$TBElem.length&&this.$TBElem.addClass("in-favlist"),t&&(this.iNbVideos++,this.bNeedInfoUpdate=!0,this.bMaxVideosReached=this.bHadMaxVideosReached,
this.bMaxVideosReached&&this.$MaxVideosReached.show())):(this.$TBElem&&this.$TBElem.length&&this.$TBElem.removeClass("in-favlist"),t&&(this.iNbVideos--,this.iNbVideos<1&&this.reloadListInfos(),this.bMaxVideosReached?(this.bMaxVideosReached=!1,this.$MaxVideosReached.hide()):this.bHadMaxVideosReached=!1)),this.bNeedTBElemUpdate=!0,this.getThumbBlockElem())},setThumbBlockMoveTo:function(e){var t={bDisplayModeList:"mozaique"!==e,sMoveTo:n.__("video.favs.move_to_this_list")};this.setThumbBlock(i.render(g,t),e),this.setThumbBlockMoveToEvents()},setThumbBlockMoveToEvents:function(){var e=this;this.$TBElem.find(".pl-move-to").off("click").on("click",function(t){t.preventDefault(),e.moveVideosToThisList()})},moveVideosToThisList:function(){this.oListOfLists.moveVideosToOtherList(this.sId)},setThumbBlockEdit:function(e){var t={bDisplayModeList:"mozaique"!==e,sEdit:n.__("video.favs.edit_this_list")};this.setThumbBlock(i.render(_,t),e),this.setThumbBlockEditEvents()},setThumbBlockEditEvents:function(){var e=this;this.$TBElem.find(".pl-edit").off("click").on("click",function(t){t.preventDefault(),e.showEdit()})},showEdit:function(){if(bIsLogged=e.dyn.login_info.is_logged,!bIsLogged)return void this.oListOfLists.displayLogin();this.initEditHTML(),this.oListOfLists.setContent(this.$EditContainer,"pl_edit_"+this.sId),this.updateVideoListMenu(),this.updateEditInfos(),this.updateHeaderMobileHeight()},initEditHTML:function(){var e=this;this.$EditContainer=$(i.render(m,{bMaxVideosReached:!!this.bMaxVideosReached,bWatchLater:!!this.bWatchLater,sTitle:this.sName,aVideos:this.aVideos,sNbVideo:this.getNbVideosTxt(),sMaxTitle:n.__("video.favs.max_vids_reached"),sMax:n.__("video.favs.full"),sShowMore:n.__("misc.show_less"),sBack:n.__("misc.back"),sPlayListPageHref:this.sPlaylistUrl,sRandomPlayListPageHref:this.sRandomPlaylistUrl,sPlayListPage:n.__("video.favs.play_playlist"),sRandomPlayListPage:n.__("video.favs.play_random_playlist"),sListPageHref:this.sUrl,sListPage:n.__("video.favs.list_page"),sEmpty:n.__("video.favs.empty_the_list"),sReorder:n.__("video.favs.reorder_videos"),sSelect:n.__("video.favs.select_videos"),sCheckUncheckAll:n.__("form.check_uncheck_all"),sMoveToFirstPos:n.__("reorder.move_to_first_pos"),sMoveToBeginPage:n.__("reorder.move_to_begin_page"),sMoveToOtherList:n.__("video.favs.move_to_other_list"),sDelete:n.__("misc.delete"),sCancel:n.__("misc.cancel")})),this.$VideoListContainer=this.$EditContainer.find(".mozaique"),this.$VideoListMenu=this.$EditContainer.find(".favlist-edit-list-menu"),this.$VideoListMenuShowMore=this.$EditContainer.find(".btn-show-more"),this.$VideoListMenuShowMoreIcf=this.$VideoListMenuShowMore.find(".icf-minus-square"),this.$VideoListMenuLegend=this.$VideoListMenu.find(".legend"),this.$FormEditContainer=this.$EditContainer.find(".favlist-edit-form");var s=this.$EditContainer.find(".btn-back");this.$BtnSelect=this.$VideoListMenu.find(".btn-select"),this.$BtnEmpty=this.$VideoListMenu.find(".btn-empty"),this.$BtnReorder=this.$VideoListMenu.find(".btn-reorder"),this.$BtnCheckAll=this.$VideoListMenu.find(".btn-check-all"),this.$BtnMoveFirst=this.$VideoListMenu.find(".btn-move-first"),this.$BtnMoveBeginPage=this.$VideoListMenu.find(".btn-move-begin-page"),this.$BtnMoveTo=this.$VideoListMenu.find(".btn-move-to"),this.$BtnDelete=this.$VideoListMenu.find(".btn-delete"),this.$VotersBtn=this.$VideoListMenu.find(".btn-vote"),this.$BtnCancel=this.$VideoListMenu.find(".btn-cancel"),this.$BtnsLink=this.$VideoListMenu.find(".btn-link"),this.$VideoListMenuShowMore.on("click",function(t){t.preventDefault(),e.toggleVideoListMenuShowMore()}),s.on("click",function(t){t.preventDefault(),window.history&&window.history.back?window.history.back():e.goBackToListOfList()}),this.$BtnSelect.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode("moveMany")}),this.$BtnCancel.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode(null)}),this.$BtnCheckAll.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.toggleSelectAll()}),this.$BtnMoveFirst.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.moveToFirstPos()}),this.$BtnMoveBeginPage.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.moveToBeginPage()}),this.getPage()<1&&this.$BtnMoveBeginPage.hide(),this.oListOfLists.getNbLists()>1?this.$BtnMoveTo.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.moveVideosToOtherList()}):this.$BtnMoveTo.remove(),this.$BtnDelete.on("click",function(t){t.preventDefault(),$(this).hasClass("disabled")||e.deleteSelectedVideos()}),t.isTouchScreen()?this.$BtnReorder.remove():this.$BtnReorder.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode("moveOneNoSelect")}),this.iNbVideos>0?this.$BtnEmpty.on("click",function(t){t.preventDefault(),e.deleteAllVideos()}):this.$BtnEmpty.hide()},goBackToListOfList:function(){this.$VideoListContainer=null,this.oDragDrop=null,this.oListOfLists.showList()},getNbVideos:function(){return this.iNbVideos},getNbVideosFormatted:function(){return this.sNbVideosFormatted},getNbVideosTxt:function(){return"string"==typeof this.getNbVideosFormatted()?n.__("misc.nb_videos",{"%count%":this.getNbVideosFormatted()}):this.getNbVideos()>1?n.__("misc.nb_videos",{"%count%":String(this.getNbVideos())}):n.__("misc.one_video",{"%count%":String(this.getNbVideos())})},updateHeaderMobileHeight:function(){var e=$(window).width(),t=$(window).height();if(this.iHeaderMobileHeight=e<this.iMobileWidth&&e<t?40:0,this.$VideoListMenu&&this.$VideoListMenu.length&&this.$VideoListMenu.is(":visible")){var i=this.$VideoListMenu.parents().filter(function(){var e=$(this);return e.is("body")||"relative"===e.css("position")}).slice(0,1);this.iClosestListMenuRelativeParentTop=Math.round(i.offset().top)}},updateVideoListMenu:function(){if(this.$VideoListMenu&&this.$VideoListMenu.length&&this.$VideoListMenu.is(":visible")){var e="",t="",i=0;this.oDragDrop&&(t=this.oDragDrop.getReorderMode(),i=this.oDragDrop.countSelectedElems(),e+="_"+t,e+="_"+i.toString()),e+="_"+this.getPage().toString(),this.sLastVideoListMode!==e&&(this.oDragDrop&&this.oDragDrop.isReorderActivated()?(this.$BtnSelect.hide(),this.$BtnEmpty.hide(),this.$BtnReorder.hide(),this.$BtnsLink.hide(),this.$VotersBtn.hide(),"moveMany"===t?(this.$BtnCheckAll.show(),this.$BtnMoveFirst.show(),this.$BtnMoveTo.show(),this.$BtnDelete.show(),this.getPage()>0?this.$BtnMoveBeginPage.show():this.$BtnMoveBeginPage.hide()):(this.$BtnMoveFirst.hide(),this.$BtnMoveBeginPage.hide(),this.$BtnMoveTo.hide(),this.$BtnDelete.hide()),this.$BtnCancel.show(),i>0?(this.$BtnMoveFirst.removeClass("disabled"),this.$BtnMoveBeginPage.removeClass("disabled"),this.$BtnMoveTo.removeClass("disabled"),this.$BtnDelete.removeClass("disabled")):(this.$BtnMoveFirst.addClass("disabled"),this.$BtnMoveBeginPage.addClass("disabled"),this.$BtnMoveTo.addClass("disabled"),this.$BtnDelete.addClass("disabled"))):(this.$BtnSelect.show(),this.$BtnEmpty.show(),this.$BtnReorder.show(),this.$BtnsLink.show(),this.$VotersBtn.show(),this.$BtnCheckAll.hide(),this.$BtnMoveFirst.hide(),this.$BtnMoveBeginPage.hide(),this.$BtnMoveTo.hide(),this.$BtnDelete.hide(),this.$BtnCancel.hide()));var n=this.$VideoListMenu.find(".legend, .btn:not(.btn-show-more)"),s=null,o=!1;n.each(function(){var e=$(this);if(e&&e.length&&e.is(":visible"))return null===s?void(s=e.position().top):void(e.position().top>s&&(o=!0))}),o?(this.$VideoListMenuShowMore.show(),this.$VideoListMenu.addClass(this.bVideoListMenuShowMore?"is-opened":"is-closed")):(this.$VideoListMenuShowMore.hide(),this.$VideoListMenu.removeClass("is-opened is-closed"))}},toggleVideoListMenuShowMore:function(e){if(e||(this.bVideoListMenuShowMoreAuto=!1),!this.$VideoListMenuShowMore||!this.$VideoListMenuShowMore.length)return void this.$VideoListMenu.removeClass("is-opened is-closed");this.bVideoListMenuShowMore=!this.bVideoListMenuShowMore,this.bVideoListMenuShowMore?(this.$VideoListMenuShowMore.prop("title",n.__("misc.show_less")),this.$VideoListMenuShowMoreIcf.removeClass("icf-plus-square").addClass("icf-minus-square"),this.$VideoListMenu.removeClass("is-closed").addClass("is-opened")):(this.$VideoListMenuShowMore.prop("title",n.__("misc.show_more")),this.$VideoListMenuShowMoreIcf.removeClass("icf-minus-square").addClass("icf-plus-square"),this.$VideoListMenu.removeClass("is-opened").addClass("is-closed"))},reloadListInfos:function(){this.bNeedInfoUpdate=!0,this.bNeedTBElemUpdate=!0,this.loadListInfos("same-page")},loadListInfos:function(e,t){if(!this.bIsLoading){if(!this.bNeedInfoUpdate&&("number"!=typeof e||e===this.getPage()))return void this.updateEditInfos();this.bIsLoading=!0;var i=this.getMainContainer();i&&i.length&&i.addClass("is-loading-videos"),this.$VideoListContainer&&(t?this.$VideoListContainer.append($('<div class="thumb-block loader">'+a.getIcf()+"</div>")):this.$VideoListContainer.empty().append($('<div class="thumb-block loader">'+a.getIcf()+"</div>")));var s=this;if("number"!=typeof e){var o="/api/playlists/list/"+this.sId;"same-page"===e&&(o+="/"+this.getPage()),$.post({url:o,dataType:"json",success:function(t){if(!t.result)return void s.setPopError(t.message,n.__("loading.error"));"same-page"===e&&0!==s.iNbVideos||(s.setPage(0),s.aVideos=s.cleanupDeletedVideos(t.list.videos)),s.oListOfLists.updateAllLoadedListData(s.sId,t,"load-list"),s.bNeedInfoUpdate=!1,s.oVote.bLoaded=!0,s.updateEditInfos()},error:function(e,t,i){s.setPopError(i,n.__("loading.error"))},complete:function(){s.bIsLoading=!1,i&&i.length&&i.removeClass("is-loading-videos")}})}else $.post({url:"/api/playlists/list/"+this.sId+"/videos/"+e,dataType:"json",success:function(i){if(!i.result)return void s.setPopError(i.message,n.__("loading.error"));s.bHasMoreVideosToLoad=i.nb_more>0;var o=s.cleanupDeletedVideos(i.videos);t?(s.setLoadedPage(e),s.concatNewVideos(o)):(s.setPage(e),s.aVideos=o,s.updateEditInfos())},error:function(e,t,i){s.setPopError(i,n.__("loading.error"))},complete:function(){s.bIsLoading=!1,i&&i.length&&i.removeClass("is-loading-videos")}})}},updateListData:function(e,t){var i=[];this.iNbVideos=e.list.nb_videos,this.iNbVideosPerPage=e.list.nb_per_page,this.bHasMoreVideosToLoad=e.list.nb_more>0,e.list.cover&&(this.aCover=e.list.cover),e.list.csrf&&(this.oCsrf=e.list.csrf),e.list.vote&&e.list.vote.nbtotal&&(this.oVote.iTotal=e.list.vote.nbtotal,this.oVote.iGood=e.list.vote.nbgood,this.oVote.iBad=e.list.vote.nbbad,this.oVote.iRating=e.list.vote.rating,this.oVote.sTotal=e.list.vote.total,this.oVote.sGood=e.list.vote.vgood,this.oVote.sBad=e.list.vote.vbad,this.oVote.sRating=e.list.vote.vrating),this.sFormEdit=e.form,this.aFormEditValidationRules=e.js_validation_rules;var n=!0;for(var s in this.oTags)if(!e.list.tags||!e.list.tags[s]){n=!1;break}if(n)for(var o in e.list.tags)if(!this.oTags||!this.oTags[o]){n=!1;break}return n||(i.push("tags"),this.oTags=e.list.tags),this.iNbTags!==e.list.nb_tags&&(i.push("nb_tags"),this.iNbTags=e.list.nb_tags),this.sName!==e.list.name&&(i.push("name"),this.sName=this.t=e.list.name),this.sUrl!==e.list.url&&(i.push("url"),this.sUrl=this.u=e.list.url),this.bMaxVideosReached!==e.list.max_videos_reached&&(i.push("max_videos_reached"),this.bMaxVideosReached=this.bHadMaxVideosReached=e.list.max_videos_reached),this.sVisibility!==e.list.status&&(i.push("status"),this.sVisibility=e.list.status),this.iNbVideos!==e.list.nb_videos&&(i.push("nb_videos"),this.iNbVideos=e.list.nb_videos),"edit-save"===t&&(this.bNeedTBElemUpdate=!0,this.bNeedInfoUpdate=!0),i},cleanupDeletedVideos:function(t){for(var i in t)t[i].deleted&&(t[i].i=e.domains["static"]+"/v3/img/skins/default/no-img.png",t[i].t=n.__("video.deleted"),t[i].tf=n.__("video.deleted"));return t},reinitEditForm:function(e){var t=this.sFormEdit,s=this.aFormEditValidationRules;void 0!==e&&(t=e.form,s=e.js_validation_rules),this.$FormEditContainer.html(t);var o=this,a=this.$FormEditContainer.find("form"),r=a.find("#"+a.prop("id")+"_status");if(a.on("submit",function(e){e.preventDefault(),o.setPopLoader(n.__("misc.submitting")),$.post({url:"/api/playlists/list/"+o.sId+"/update",dataType:"json",data:a.serializeArray(),success:function(e){if(!e.result||!e.list)return void(2===e.code&&e.form&&e.js_validation_rules?o.reinitEditForm({form:e.form,js_validation_rules:e.js_validation_rules}):e.result||o.setPopError(e.message,null,function(){o.reinitEditForm()}));var t=o.oListOfLists.updateAllLoadedListData(o.sId,e,"edit-save");t&&(-1!==t.indexOf("tags")&&($TagList=a.find(".tag-adder .tag-list"),$TagList.removeClass("success"),setTimeout(function(){$TagList.addClass("success")},50),setTimeout(function(){$TagList.removeClass("success")},2e3)),-1!==t.indexOf("name")&&($InpName=a.find("#"+a.prop("id")+"_name"),$InpName.removeClass("success"),setTimeout(function(){$InpName.addClass("success")},50),setTimeout(function(){$InpName.removeClass("success")},2e3)),-1!==t.indexOf("status")&&(r.removeClass("success"),setTimeout(function(){r.addClass("success")},50),setTimeout(function(){r.removeClass("success")},2e3))),p.resetSubmit()},error:function(e,t,i){o.setPopError(i,null,function(){o.reinitEditForm()})},complete:function(){o.unsetPopLoader()}})}),r&&r.length){var l=$(this.getVisibilityPicto(r.val())),u=$("<label></label>");u.addClass("favlist-status-label select-label").insertBefore(r).append(r),l.addClass("favlist-status-picto").prependTo(u),r.on("change",function(e){e.preventDefault();var t=$(o.getVisibilityPicto(r.val()));t.addClass("favlist-status-picto"),l.replaceWith(t),l=t,a.find(".form-field-"+a.prop("id")+"_password").toggleClass("hidden","PASSWORD"!==r.val())})}var c=a.find("button[type=submit]");if(!this.isWatchLater()){var f=$(i.render(b,{sDelete:n.__("misc.delete")}));f.insertAfter(c),f.on("click",function(e){e.preventDefault(),o["delete"]()})}var h=$(i.render(v,{sVoters:n.__("voters.show_all"),oVote:this.oVote}));this.$VotersBtn&&this.$VotersBtn.length?this.$VotersBtn.replaceWith(h):this.$VideoListMenu.append(h),this.$VotersBtn=h,this.$VotersBtn.on("click",function(e){e.preventDefault(),o.showVoters()});var p=new d(a,s,{no_init_focus:!0,no_init_validate:!0});p.resetSubmit(),p.refresh()},showVoters:function(){this.oListOfLists.setContent($('<div class="loader">'+a.getIcf()+"</div>"));var e=this;this.iLoadedVoters=0,$.post({url:"/api/playlists/list/"+this.sId+"/voters/0",dataType:"json",success:function(t){if(!t.result)return void e.setPopError(t.message);var s="";for(var o in t.voters)s+=i.render(D,t.voters[o]);var a=i.render(y,{sBack:n.__("misc.back"),sVoters:s,bLastPage:!!t.lastpage,sGood:e.oVote.sGood,sBad:e.oVote.sBad,sRating:e.oVote.sRating,sTitle:n.__("video.favs.people_who_voted"),sShowMore:n.__("profile.see_more_profiles")});e.oListOfLists.setContent(a);var r=e.getMainContainer();r&&r.length&&(r.find(".btn-back").on("click",function(t){t.preventDefault(),e.showEdit()}),!0!==t.lastpage&&r.find(".load-more-voters").on("click",function(t){t.preventDefault(),e.seeMoreVoters()}))},error:function(t,i,n){e.setPopError(n)}})},seeMoreVoters:function(){if(!this.bIsLoadingVoters){this.bIsLoadingVoters=!0,this.iLoadedVoters++;var e=this.getMainContainer();if(e&&e.length){var t=e.find(".action");if(t&&t.length){var n=this;$.post({url:"/api/playlists/list/"+this.sId+"/voters/"+this.iLoadedVoters,dataType:"json",success:function(s){if(n.bIsLoadingVoters=!1,!s.result)return void n.setPopError(s.message,"");for(var o in s.voters)$(i.render(D,s.voters[o])).insertBefore(t);!0===s.lastpage?e.find(".load-more-voters").remove():t.enable()},error:function(e,t,i){n.bIsLoadingVoters=!1,n.setPopError(i,"")}})}}}},concatNewVideos:function(e){this.aVideos=this.aVideos.concat(e),this.$VideoListContainer.children(".loader").remove();for(var t in e){var n=e[t],s={bAddOnImgError:!0};n.id.toString()===this.sIdVideo&&(s.tb_thumb_end=i.render(c,{bIsVideo:!0})),this.$VideoListContainer.append($(xv.thumbs.get_thumb_block_html(n,"video",s).html))}this.oDragDrop.updateElementList()},updateEditInfos:function(){if(this.bNeedInfoUpdate)return void this.loadListInfos();if(!this.$VideoListContainer||!this.$VideoListContainer.length)return void this.initEditHTML();if(this.$VideoListContainer.empty(),this.reinitEditForm(),!this.iNbVideos)return this.$VideoListContainer.append($("<p>"+n.__("video.favs.no_video_in_list")+"</p>")),void this.$VideoListMenu.removeClass("init-ok");for(var t in this.aVideos){var s=this.aVideos[t],a={};s.id.toString()===this.sIdVideo&&(a.tb_thumb_end=i.render(c,{bIsVideo:!0}));var r=$(xv.thumbs.get_thumb_block_html(s,"video",a).html),d=$('<a class="play" href="'+s.u+this.sPlaylistUrlParams+'" title="'+n.__("video.play_video")+'"><i class="icon-f icf-play"></i></a>');r.find(".thumb-under").prepend(d),this.$VideoListContainer.append(r)}l.init_listing(this.$VideoListContainer,{tb_menu:!1,rotator:!1});var f=this,h=u.createElementsBased(this.getPage(),this.iNbVideosPerPage,this.iNbVideos,"",{pagin_click:function(e){f.loadListInfos(e)}}),p=this.$VideoListContainer.parent();p.find(".pagination").remove(),h&&(h.insertBefore(this.$VideoListContainer),h.clone(!0).insertAfter(this.$VideoListContainer),u.add_all_in(p));var _=this.oListOfLists.getScrollableContainer();this.oDragDrop=new o({element_list:this.$VideoListContainer.find(".thumb-block"),scrollable_container:_,functions:{init_elems:function(e){e.find("a:not(.play)").removeAttr("href").removeAttr("title")},on_reorder_mode_enabled:function(){f.updateVideoListMenu()},on_reorder_mode_disabled:function(){f.$VideoListMenuLegend.html(f.getNbVideosTxt()),f.updateVideoListMenu()},on_scroll:function(e){if(e>=g?f.bVideoListMenuPined?f.oListOfLists.isInPop()||f.$VideoListMenu.css("top",e-f.iClosestListMenuRelativeParentTop+f.iHeaderMobileHeight+"px"):(f.bVideoListMenuPined=!0,f.$FormEditContainer.css("paddingBottom",f.$VideoListMenu.outerHeight()),f.$VideoListMenu.addClass("is-pined"),f.bVideoListMenuShowMoreAuto&&f.bVideoListMenuShowMore&&setTimeout(function(){f.toggleVideoListMenuShowMore(!0)},20),f.oListOfLists.isInPop()?f.$EditContainer.parent().append(f.$VideoListMenu):f.$VideoListMenu.css("top",e-f.iClosestListMenuRelativeParentTop+f.iHeaderMobileHeight+"px")):f.bVideoListMenuPined?(f.bVideoListMenuPined=!1,f.$FormEditContainer.css("paddingBottom",""),f.oListOfLists.isInPop()?f.$VideoListMenu.insertAfter(f.$FormEditContainer):f.$VideoListMenu.css("top",""),f.bVideoListMenuShowMoreAuto&&!f.bVideoListMenuShowMore&&f.toggleVideoListMenuShowMore(!0),f.$VideoListMenu.removeClass("is-pined")):g=Math.round(f.oListOfLists.isInPop()?f.$VideoListMenu.position().top:f.$VideoListMenu.offset().top-f.iHeaderMobileHeight),f.oDragDrop&&f.oDragDrop.isReorderActivated()){var t=f.oDragDrop.getElems();!f.bIsLoading&&f.bHasMoreVideosToLoad&&e+_.innerHeight()>=Math.round(t.last().offset().top)-20&&f.loadListInfos(f.getNextPageToLoad(),!0)}},save_new_order:function(e,t,i){$.post({url:"/api/playlists/list/"+f.sId+"/move-after/"+t,dataType:"json",data:{ids:e,csrf:f.oCsrf.move},success:function(e){e.result||f.setPopError(e.message,null,function(){window.location.reload()}),f.bNeedTBElemUpdate=!0,"function"==typeof i&&i()},error:function(e,t,i){f.bIsLoadingVoters=!1,f.setPopError(i,null,function(){window.location.reload()})}})},get_new_order_first_position_id:function(e){if(0!==f.getPage()){var t=function(e){f.setPopError(e,n.__("misc.error_occured"),function(){window.location.reload()})};return $.post({url:"/api/playlists/list/"+f.sId+"/videos/"+f.getPreviousPage(),dataType:"json",success:function(i){if(!i.result)return void t(i.message);if(!i.videos||!i.videos.length)return void t("");var n=i.videos.pop();if(!n||!n.id)return void t("");e(n.id)},error:function(e,i,n){t(n)}}),!1}e(0)},update_selected_count:function(t){t>0?e.dyn.is_mobile?f.$VideoListMenuLegend.html(t.toString()):f.$VideoListMenuLegend.html(t>1?n.__("video.favs.nb_selected_videos",{"%nb%":t.toString()}):n.__("video.favs.one_selected_video")):f.oDragDrop.isReorderActivated()?f.$VideoListMenuLegend.html('<span class="icon-f icf-arrows"></span> '+n.__("video.favs.reorder_videos")):f.$VideoListMenuLegend.html(f.getNbVideosTxt()),f.updateVideoListMenu()}}}),this.$VideoListMenu.addClass("init-ok"),this.updateVideoListMenu();var g=Math.round(this.oListOfLists.isInPop()?this.$VideoListMenu.position().top:this.$VideoListMenu.offset().top-this.iHeaderMobileHeight),m=this.$VideoListMenu.parents().filter(function(){var e=$(this);return e.is("body")||"relative"===e.css("position")}).slice(0,1);this.iClosestListMenuRelativeParentTop=Math.round(m.offset().top)},deleteAllVideos:function(){var e=s.confirm("<p>"+n.__("video.favs.empty_the_list_confirm")+'</p><p class="favlist-empty-checkbox"><label><input type="checkbox" /> '+n.__("video.favs.empty_the_list")+" <span>("+n.__("form.check_to_confirm")+")</span></label></p>"),t=this,i=e.getNode().find(".favlist-empty-checkbox");e.getNode().find(".ok-close").off("click").on("click",function(){if(!e.getNode().find("label input").prop("checked"))return s.alert(n.__("form.check_to_confirm")),void i.addClass("is-mandatory");e.onClose=null,e.close();var o=t.oCsrf.remove;t.setPopLoader(n.__("misc.delete_in_progress")),$.post({url:"/api/playlists/list/"+t.sId+"/empty",dataType:"json",data:{csrf:o},success:function(e){e.result||t.setPopError(e.message),t.reloadListInfos()},error:function(e,i,n){t.setPopError(n)},complete:function(){t.unsetPopLoader()}})})},deleteSelectedVideos:function(e){if(this.oDragDrop){"boolean"!=typeof e&&(e=!0);var t=this;if(!this.oDragDrop.countSelectedElems())return this.iNbVideos<1&&this.reloadListInfos(),this.oDragDrop.setReorderMode(null),void setTimeout(function(){t.unsetPopLoader()},400);var i=this.oDragDrop.popLastSelectedElement(),s=this.oCsrf.remove;$currentBlock=this.oDragDrop.getElemById(i),this.setPopLoader(n.__("misc.delete_in_progress"));var o=function(){t.iNbVideos--,i===t.sIdVideo&&(t.bInList=!1),t.bNeedTBElemUpdate=!0,$currentBlock.fadeOut(500,function(){t.bMaxVideosReached?(t.bMaxVideosReached=!1,t.$MaxVideosReached.hide()):t.bHadMaxVideosReached=!1,$(this).remove();for(var e in t.aVideos)if(i===t.aVideos[e].id.toString()){t.aVideos.splice(e,1);break}})},a=function(){t.unsetPopLoader(),t.deleteSelectedVideos(e)};if(!e)return o(),void a();$.post({url:"/api/playlists/list/"+this.sId+"/remove/"+i,dataType:"json",data:{csrf:s},success:function(e){if(!e.result)return void t.setPopError(e.message);o()},error:function(e,i,n){t.setPopError(n)},complete:function(){a()}})}},deleteVideo:function(e,t){var i=this.oCsrf.remove,s=this;this.setPopLoader(n.__("misc.delete_in_progress")),$.post({url:"/api/playlists/list/"+this.sId+"/remove/"+e,dataType:"json",data:{csrf:i},success:function(e){if(!e.result)return void s.setPopError(e.message);t()},error:function(e,t,i){s.setPopError(i)},complete:function(){s.unsetPopLoader()}})},moveVideosToOtherList:function(){var e=this.oDragDrop.getSelectedElems();if(!e.length)return!1;var t=this;require(["skins/default/video/playlists/manager"],function(i){i.loadMoveToList(t,e)})},moveVideosToOtherListSuccess:function(e,t){this.oListOfLists.updateListNbVideos(e,t),this.deleteSelectedVideos(!1)},setMovedVideos:function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];-1!==this.aVideos.indexOf(n)&&t++,this.sIdVideo===n&&(this.bInList=!0)}this.iNbVideos+=t,this.bNeedTBElemUpdate=!0,this.bNeedInfoUpdate=!0}},C}),define("text!skins/default/video/playlists/container.mustache",[],function(){return'<div class="favlists">\n\t{{^bMaxListsReached}}\n\t\t<button class="btn btn-default favlists-create" type="button">\n\t\t\t<span class="icon-f icf-favorites-add"></span>\n\t\t\t<span class="mobile-hide">{{{ sNew }}}</span>\n\t\t</button>\n\t{{/bMaxListsReached}}\n\t<h2>{{{ sTitle }}}</h2>\n\t<div class="favlists-actions">\n\t\t<div class="favlists-actions-line-1">\n\t\t\t{{#aFilters.length}}\n\t\t\t\t<label class="select-label">\n\t\t\t\t\t<span class="icon-f icf-sort-amount-asc"></span>\n\t\t\t\t\t<select class="favlists-order form-control">\n\t\t\t\t\t\t{{#aFilters}}\n\t\t\t\t\t\t\t<option value="{{{ sMode }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t{{/aFilters}}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t\t{{#aAlphaGroups.length}}\n\t\t\t\t\t<label class="favlists-filter-alpha-label select-label">\n\t\t\t\t\t\t<span class="icon-f icf-sort-alpha-asc"></span>\n\t\t\t\t\t\t<select class="favlists-filter-alpha form-control">\n\t\t\t\t\t\t\t{{#aAlphaGroups}}\n\t\t\t\t\t\t\t\t<option value="{{{ sOption }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t\t{{/aAlphaGroups}}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</label>\n\t\t\t\t{{/aAlphaGroups.length}}\n\t\t\t{{/aFilters.length}}\n\t\t\t{{^bNoSearch}}\n\t\t\t\t<label class="favlists-search">\n\t\t\t\t\t<input type="text" class="form-control" placeholder="{{{ sPlaceHolder }}}"/>\n\t\t\t\t\t<button class="btn btn-default" type="button"><span class="icon-f icf-search"></span></button>\n\t\t\t\t</label>\n\t\t\t{{/bNoSearch}}\n\t\t\t<button class="favlists-show-more-filters btn" type="button">\n\t\t\t\t<span class="icon-f icf-sliders"></span>\n\t\t\t\t<span class="icon-f icf-plus-circle icf-white-fill"></span>\n\t\t\t\t<span class="icon-f icf-minus-circle icf-white-fill"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="favlists-actions-more">\n\t\t\t<button class="favlists-display-mode btn btn-default {{{ sDisplayMode }}}" type="button">\n\t\t\t\t<span class="icon-f icf-grid-4"></span>\n\t\t\t\t<span class="icon-f icf-list-ul"></span>\n\t\t\t\t<span class="icon-f icf-columns"></span>\n\t\t\t</button>\n\t\t\t<label class="favlists-nb-per-page-cont">\n\t\t\t\t<span class="select-label">\n\t\t\t\t\t<select class="favlists-nb-per-page form-control">\n\t\t\t\t\t\t{{#aNbPerPage}}\n\t\t\t\t\t\t\t<option value="{{{ sQtt }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t{{/aNbPerPage}}\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t\t<span>{{{ sNbPerPage }}}</span>\n\t\t\t</label>\n            <label>\n                <a href="/account/profile/privacy-settings"><span class="icon-f icf-cog"></span></a>\n            </label>\n\t\t</div>\n\t</div>\n\n\t<div class="mozaique thumbs-5-cols {{{ sDisplayMode }}}"></div>\n\n\t{{#sCancel}}\n\t\t<div class="favlists-actions-cancel">\n\t\t\t<button type="button" class="btn btn-default btn-lg">{{{ sCancel }}}</button>\n\t\t</div>\n\t{{/sCancel}}\n</div>'}),define("text!skins/default/video/playlists/create_list.mustache",[],function(){return'<div class="favlist-create">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\n\t<span class="favlist-picto icon-f icf-favorites"></span>\n\n\t<div class="favlist-list-title"><div class="form-horizontal"><div class="form-group"><p>{{{ sTitle }}}</p></div></div></div>\n\n\t<div class="favlist-create-form"></div>\n</div>\n'}),define("text!skins/default/video/playlists/login_alert.mustache",[],function(){return'<div class="favlist-alert-login">\n\t<p>{{{ sAlert }}}</p>\n\t<p>\n\t\t<button class="btn btn-primary btn-lg favlist-alert-login-btn" type="button">{{{ sLoginBtn }}}</button>\n\t\t{{#bWatchLaterEnabled}}\n\t\t\t<span class="separator">{{{ sSeparator }}}</span>\n\t\t\t<button class="btn btn-secondary btn-lg favlist-alert-watch-later-btn" type="button"><span class="icon-f icf-clock"></span> {{{ sWatchLaterBtn }}}</button>\n\t\t{{/bWatchLaterEnabled}}\n\t</p>\n</div>'}),define("skins/default/video/playlists/list_of_lists",["config/main","mustache","lib/i18n!front","lib/history","lib/tools","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","skins/form/validator","skins/common/history/one_info_tracker","skins/default/pagination","skins/default/video/watch_later","./one_list","text!./container.mustache","text!./create_list.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h){var p=function(e,t,i){this.bNoSearch=!0,this.bFirstLoad=!0,this.bLoaded=!1,this.bIsLoading=!1,this.bInPop=!1,this.sType=e,this.sId=null,this.sDisplayMode="mozaique",this.bShowMoreFilter=!1,this.oManager=t,this.oLoadedPlaylists={},this.aVisiblePlaylists=[],this.aFormCreateRules=[],this.sQuery=!1,this.iPage=0,this.iNbLists=0,this.iNbPerPage=0,this.iMobileOnlyWidth=480,this.iMobileWidth=768,this.$Content=$(),this.$FilterAlphaGroup=!1,this.$FilterSearchInput=!1,this.$FilterSearchBtn=!1,this.$FilterOrder=!1,this.$FilterShowMoreBtn=!1,this.$ToggleDisplayMode=!1,this.$ToggleNbPerPage=!1,this.$FormCreateContainer=!1,this.$ListsContainer=$(),this.$Pagination=!1,this.$ScrollableContainer=!1,this.bMaxListsReached=!1,this.bMaxVideosReached=!1,this.bUsesHashHistory="move_to"!==this.sType,this.sCurrentHash=!1,this.bHasError=!1,this.updateOptions(i),this.oHistorical={},this.initHistoricalNav();var n=this;$(window).on("resize",function(){"cols"===n.sDisplayMode&&$(window).width()<n.iMobileOnlyWidth&&n.toggleDisplayMode("list")})};return p.prototype={setId:function(e){this.sId=e},getId:function(){return this.sId},getNbLists:function(){return this.iNbLists},getDisplayMode:function(){return this.sDisplayMode},isInPop:function(){return this.bInPop},isPopOpen:function(){return!(!this.isInPop||!this.oPopContainer)&&this.oPopContainer.isOpen()},getLoadListUrl:function(){var e="/api/playlists/";switch(this.sOrder){case"alpha":e+="alpha",this.sFilterAlphaGroup&&(e+="/"+this.sFilterAlphaGroup);break;case"best":e+="best";break;case"new":e+="newest";break;case"old":e+="oldest";break;case"most":e+="most-videos";break;case"less":e+="less-videos";break;case"last":default:e+="last-updated"}return this.iPage&&(e+="/"+this.iPage),e},getContainer:function(){if(this.$Container&&0!==this.$Container.length)this.isInPop()&&this.oPopContainer.show();else if(!this.isInPop()&&this.oOptions&&this.oOptions.container&&0!==$(this.oOptions.container).length)this.bInPop=!1,this.$Container=$(this.oOptions.container),this.$ScrollableContainer=$(window);else{this.bInPop=!0;var e=this;this.oPopContainer=o.get($("body"),!0,"hide"),this.oPopContainer.setOverlayClosable(!0),this.oPopContainer.setCanReposition(!1),this.oPopContainer.addClass("x-overlay-body-bg favlist-overlay"),this.oPopContainer.onHide=function(){e.$Container=!1,e.bLoaded=!1,e.aVisiblePlaylists=[],e.setHistoricalNav(!1)},this.oPopContainer.show(),this.$Container=$(this.oPopContainer.getContainer()),this.$ScrollableContainer=this.$Container}return this.$Container},getListContainer:function(){return this.$ListsContainer},getScrollableContainer:function(){return this.$ScrollableContainer&&0!==this.$ScrollableContainer.length||this.getContainer(),this.$ScrollableContainer},getSavedCreateForm:function(){var e=l.get("pl_manager_create_form");return!!(e&&Date.now()-e.timestamp<216e5)&&e},hasSavedCreateForm:function(){return!!this.getSavedCreateForm()},hasError:function(){return this.bHasError},setNbPerPage:function(e){if(e=parseInt(e),!this.bIsLoading&&!isNaN(e)&&e!==this.iNbPerPage){this.bIsLoading=!0,this.$Content.addClass("is-loading-lists");var t=this,i="/api/playlists/set-nb-per-page/"+e,n=function(e){t.$Content.removeClass("is-loading-lists"),t.setPopError(e)};$.post({url:i,dataType:"json",success:function(e){return t.bIsLoading=!1,900==e.code?(t.fnDisplayEmailVerificationModal(e.data.action_need_verified_email),!1):e.result?(t.$Content.removeClass("is-loading-lists"),void t.loadList()):(n(e.message),!1)},error:function(e,t,i){n(i)},complete:function(){t.bIsLoading=!1}})}},updateOptions:function(e){this.oOptions=e||{};var t=l.get("pl_manager_list_order"),i=l.get("pl_manager_list_display_mode");if(this.sOrder=t||(this.oOptions.sOrder||"alpha"),this.sIdVideo=this.oOptions.sIdVideo||!1,i=i||(this.oOptions.sDisplayMode||"mozaique"),"cols"===i&&$(window).width()<this.iMobileOnlyWidth&&(i="list"),this.toggleDisplayMode(i),"move_to"===this.sType){
if("undefined"==typeof this.oOptions.oMoveToFromPlaylist||"undefined"==typeof this.oOptions.aMoveToSelectedIds||!this.oOptions.aMoveToSelectedIds.length)return console.error("Informations are missing to move the videos to another playlist"),void(this.bHasError=!0);this.oMoveToFromPlaylist=this.oOptions.oMoveToFromPlaylist,this.sMoveToFromId=this.oOptions.oMoveToFromPlaylist.getId(),this.sMoveToCsrf=this.oOptions.oMoveToFromPlaylist.getMoveToCsrf(),this.aMoveToSelectedIds=this.oOptions.aMoveToSelectedIds,this.sMoveToFromId&&this.sMoveToCsrf||(console.error("Informations are missing to move the videos to another playlist"),this.bHasError=!0)}},loadList:function(){var e=this,t=this.getLoadListUrl(),n={wcf:this.hasSavedCreateForm()?0:1,id_video:this.sIdVideo,query:this.sQuery},s=function(t,n){var s="";"boolean"!=typeof n&&(n=!0),n&&(s=i.__("error.internal_err_please_reload")),e.setPopError(t,s,function(){window.location.reload()})};"alpha"===this.sOrder&&(n.wag=1),this.bIsLoading=!0,this.$Content.addClass("is-loading-lists"),$.post({url:t,dataType:"json",data:n,success:function(t){if(e.bIsLoading=!1,e.$Content.removeClass("is-loading-lists"),900==t.code)return e.fnDisplayEmailVerificationModal(t.data.action_need_verified_email),!1;if(!t.result)return s(t.message),!1;if(t.create_form&&t.create_form_validation_rules&&t.create_form&&t.create_form_validation_rules&&e.saveCreateForm(t.create_form,t.create_form_validation_rules),e.iNbLists=t.nb_lists,e.iNbPerPage=t.nb_per_page,e.aVisiblePlaylists=t.lists,e.bMaxListsReached=!!t.max_lists_reached,e.bMaxVideosReached=!!t.max_videos_reached,e.aAlphaGroups=t.alpha_groups||[],e.$Pagination=d.createElementsBased(e.iPage,t.nb_per_page,t.nb_lists_alpha||t.nb_lists,"",{pagin_click:function(t){e.loadPage(t)}}),e.bLoaded=!0,"move_to"===e.sType)for(var i in e.aVisiblePlaylists)if(e.aVisiblePlaylists[i].id===e.sMoveToFromId){e.aVisiblePlaylists.splice(i,1);break}e.showList()},error:function(t,i,n){var o=n,a=!0;t&&t.responseJSON&&t.responseJSON.message&&(o=t.responseJSON.message,a=!1),e.bIsLoading=!1,e.$Content.removeClass("is-loading-lists"),s(o,a)}})},loadOnePlaylist:function(e,t){var n=this,s=function(e){n.setPopError(e,i.__("loading.error"),function(){t(!1)})};return this.bFirstLoad=!1,"undefined"!=typeof this.oLoadedPlaylists[e]?void t(this.oLoadedPlaylists[e]):this.bIsLoading?void t(!1):(this.bIsLoading=!0,void $.post({url:"/api/playlists/list/"+e,dataType:"json",success:function(i){if(n.bIsLoading=!1,900==i.code)return void n.fnDisplayEmailVerificationModal(i.data.action_need_verified_email);if(!i.result)return void s(i.message);i.nb_lists&&(n.iNbLists=i.nb_lists);var o=new c(i.list,n);n.oLoadedPlaylists[e]=o,t(o)},error:function(e,t,i){s(i)},complete:function(){n.bIsLoading=!1}}))},loadPage:function(e){this.iPage=parseInt(e),isNaN(this.iPage)&&(this.iPage=0),this.loadList()},setPopError:function(e,t,n){this.unsetPopLoader(),"string"!=typeof t&&(t=i.__("misc.error_please_retry")),"string"==typeof e&&e.length?t.length&&(e=" : "+e):e="";var s=t+e;s.length||(s=i.__("misc.error_please_retry")),a.alert('<span class="text-danger">'+s+"</span>","function"==typeof n?n:null)},setPopLoader:function(e){this.unsetPopLoader(),this.oPopLoader=a.loading(e)},unsetPopLoader:function(){this.oPopLoader&&(this.oPopLoader.close(),this.oPopLoader=null)},initHistoricalNav:function(){if(this.bUsesHashHistory){var e=this;this.setHistoricalFunc(!1,function(){e.isInPop()?e.oPopContainer.hide():e.showList()}),this.setHistoricalFunc("lists",function(){e.showList()}),this.oOptions.bNoInitHashUpdate||this.setHistoricalNav(!1)}},setHistoricalNav:function(e){this.bUsesHashHistory&&(e||!1===e)&&(e&&"function"==typeof this.oHistorical[e]?n.setUrlHash("_"+e):e||"function"!=typeof this.oHistorical.noHash||n.setUrlHash(""))},setHistoricalFunc:function(e,t){if(this.bUsesHashHistory&&t){var i=this;e&&"undefined"==typeof this.oHistorical[e]?n.registerHash("_"+e,function(e){i.onHistoricalNav(e)}):e||"undefined"!=typeof this.oHistorical.noHash||n.registerHash(!1,function(e){i.onHistoricalNav(e)}),e?this.oHistorical[e]=t:this.oHistorical.noHash=t}},onHistoricalNav:function(e){if(this.bUsesHashHistory){e===n.getNoHashValue()&&(e="_noHash");var t=this.oHistorical[e.substring(1)];"function"==typeof t&&t()}},showList:function(){if(!e.dyn.login_info.is_logged)return void this.displayLogin();if(!this.bIsLoading){if(!this.bLoaded)return void this.loadList();if(this.iPage>0&&(!this.aVisiblePlaylists||!this.aVisiblePlaylists.length)){var t=Math.ceil(this.iNbLists/this.iNbPerPage)-1;return t<this.iPage?this.iPage=t:this.iPage--,void this.loadList()}this.initEmptyMozaiqueContainer(!!this.oOptions.no_filter);for(var i in this.aVisiblePlaylists){var n,o=this.aVisiblePlaylists[i];"undefined"==typeof this.oLoadedPlaylists[o.id]?(n=new c(this.aVisiblePlaylists[i],this),this.oLoadedPlaylists[n.sId]=n):n=this.oLoadedPlaylists[o.id],n.isWatchLater()&&n.getNbVideos()<1&&!u.is_feature_enabled()||this.$ListsContainer.append(n.getThumbBlockElem())}if(this.$Pagination&&(this.$Pagination.insertBefore(this.$ListsContainer),this.$Pagination.clone(!0).insertAfter(this.$ListsContainer)),this.setContent(this.$Content,"lists"),this.bFirstLoad){this.bFirstLoad=!1;var a=this.oOptions.sLoadEditList?"_pl_edit_"+this.oOptions.sLoadEditList:s.getUrlHash();this.oOptions.sLoadEditList=!1,this.oOptions.bLoadCreateForm=!1,a&&(a=a.substring(1),"function"!=typeof this.oHistorical[a.toLowerCase()]&&(a=!1)),a&&(this.setHistoricalNav(a),this.onHistoricalNav("_"+a))}this.toggleShowMoreFilters(this.bShowMoreFilter)}},toggleDisplayMode:function(e){if("string"==typeof e)this.sDisplayMode=e;else{var t=$(window).width()<this.iMobileOnlyWidth;this.sDisplayMode="mozaique"===this.sDisplayMode?"list":"list"!==this.sDisplayMode||t?"mozaique":"cols"}l.set("pl_manager_list_display_mode",this.sDisplayMode),this.$ToggleDisplayMode&&this.$ToggleDisplayMode.length&&(this.$ToggleDisplayMode.removeClass("display-mozaique display-list display-cols").addClass("display-"+this.sDisplayMode),this.$ListsContainer.removeClass("display-mozaique display-list display-cols").addClass("display-"+this.sDisplayMode)),"lists"===this.sCurrentHash&&this.showList()},setOrder:function(e){this.sOrder=e,l.set("pl_manager_list_order",e),this.sFilterAlphaGroup=null,this.loadPage(0)},setOrderToAlphaGroup:function(e){this.sOrder="alpha",this.sFilterAlphaGroup="all"!==e?e:null,this.loadPage(0)},saveCreateForm:function(e,t){l.set("pl_manager_create_form",{create_form:e,create_form_validation_rules:t,timestamp:Date.now()})},setContent:function(e,t){var i=this.getContainer(),n=this.getScrollableContainer();i.html(e),this.isInPop()&&n.scrollTop(0),d.add_all_in(i),this.sCurrentHash=t,this.isInPop()||"lists"!==t||(t=!1),this.setHistoricalNav(t)},initEmptyMozaiqueContainer:function(n){var s=n?{}:{aFilters:[{sLabel:i.__("order.a_z"),sMode:"alpha",bActive:"alpha"===this.sOrder},{sLabel:i.__("misc.last_update"),sMode:"last",bActive:"last"===this.sOrder},{sLabel:i.__("video.favs.order.best"),sMode:"best",bActive:"best"===this.sOrder},{sLabel:i.__("video.favs.order.recent"),sMode:"new",bActive:"new"===this.sOrder},{sLabel:i.__("video.favs.order.oldest"),sMode:"old",bActive:"old"===this.sOrder},{sLabel:i.__("video.favs.order.most"),sMode:"most",bActive:"most"===this.sOrder},{sLabel:i.__("video.favs.order.less"),sMode:"less",bActive:"less"===this.sOrder}],aNbPerPage:[{sLabel:10..toLocaleString(e.dyn.locale),sQtt:"10",bActive:10===this.iNbPerPage},{sLabel:20..toLocaleString(e.dyn.locale),sQtt:"20",bActive:20===this.iNbPerPage},{sLabel:30..toLocaleString(e.dyn.locale),sQtt:"30",bActive:30===this.iNbPerPage},{sLabel:50..toLocaleString(e.dyn.locale),sQtt:"50",bActive:50===this.iNbPerPage},{sLabel:100..toLocaleString(e.dyn.locale),sQtt:"100",bActive:100===this.iNbPerPage}],sNbPerPage:i.__("js.pagination.per_page"),sPlaceHolder:i.__("video.favs.playlist_title"),bNoSearch:!!this.bNoSearch,sDisplayMode:"display-"+this.sDisplayMode};if("add_to"===this.sType)s.sTitle=i.__("video.favs.add_to_title"),s.sNew=i.__("video.favs.create_add_new");else if("move_to"===this.sType){var o=this.aMoveToSelectedIds.length;s.sTitle=o>1?i.__("video.favs.move_to_videos_title",{"%count%":o.toLocaleString(e.dyn.locale)}):i.__("video.favs.move_to_one_video_title"),s.sNew=i.__("video.favs.create_move_to_new"),s.sCancel=i.__("misc.cancel")}else s.sTitle=i.__("video.favs.manage_lists"),s.sNew=i.__("video.favs.create_new");if(s.bMaxListsReached=this.bMaxListsReached,this.aAlphaGroups.length>1){s.aAlphaGroups=[{sLabel:i.__("misc.all"),sOption:"all"}];for(var a in this.aAlphaGroups){var r=this.aAlphaGroups[a];if(!r.range||!r.range.length||!r.count)break;var l=r.range[0],d=r.range[r.range.length-1],u=l+"/"+d;"@"===l.substring(0,1)&&(l=l.substring(1)),"@"===d.substring(0,1)&&(d=d.substring(1));var c=(l!==d?l+" - "+d:l)+" ("+r.count.toLocaleString(e.dyn.locale)+")";s.aAlphaGroups.push({sLabel:c,sOption:u,bActive:u===this.sFilterAlphaGroup})}}this.$Content=$(t.render(f,s)),this.$ListsContainer=this.$Content.find(".mozaique");var h=this;this.$ToggleDisplayMode=this.$Content.find(".favlists-display-mode"),this.$ToggleDisplayMode.on("click",function(e){e.preventDefault(),h.toggleDisplayMode()}),this.$ToggleNbPerPage=this.$Content.find(".favlists-nb-per-page"),this.$ToggleNbPerPage.on("change",function(e){e.preventDefault(),h.setNbPerPage($(this).val())}),n||(this.$FilterOrder=this.$Content.find(".favlists-order"),this.$FilterOrder.on("change",function(e){e.preventDefault(),h.setOrder($(this).prop("value"))}),this.$FilterAlphaGroup=this.$Content.find(".favlists-filter-alpha"),this.$FilterAlphaGroup.on("change",function(e){e.preventDefault(),h.setOrderToAlphaGroup($(this).prop("value"))}),this.$FilterSearchInput=this.$Content.find(".favlists-search input"),this.$FilterSearchInput.on("keypress keydown",function(e){13===e.keyCode&&e.preventDefault()}),this.$FilterSearchInput.on("mouseup keyup",function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),h.searchQuery())}),this.$FilterSearchBtn=this.$Content.find(".favlists-search .btn"),this.$FilterSearchBtn.on("click",function(e){e.preventDefault(),h.searchQuery()}),this.$FilterShowMoreBtn=this.$Content.find(".favlists-show-more-filters"),this.$FilterShowMoreBtn.on("click",function(e){e.preventDefault(),h.toggleShowMoreFilters()}),"string"==typeof this.sQuery&&this.$FilterSearchInput.val(this.sQuery),"move_to"===this.sType?this.$Content.find(".favlists-create").remove():this.$Content.find(".favlists-create").on("click",function(){h.initCreateHTML()}),this.$Content.find(".favlists-actions-cancel .btn").on("click",function(){h.isInPop()&&h.oPopContainer.hide()}))},initCreateHTML:function(){var e=this,n=$(t.render(h,{sBack:i.__("misc.back"),sTitle:"add_to"===this.sType?i.__("video.favs.create_add_new"):i.__("video.favs.create_new")}));this.$FormCreateContainer=n.find(".favlist-create-form"),this.setContent(n),this.reinitCreateForm(),n.find(".btn-back").on("click",function(t){t.preventDefault(),e.showList()})},reinitCreateForm:function(e){var t=this;if(void 0===e&&(e=this.getSavedCreateForm()),!e){var n=this.getLoadListUrl(),s={wcf:1},o=function(e){t.setPopError(e,i.__("error.internal_err_please_reload"),function(){window.location.reload()})};return void $.post({url:n,dataType:"json",data:s,success:function(e){if(900==e.code)return void t.fnDisplayEmailVerificationModal(e.data.action_need_verified_email);e.result||o(e.message),e.create_form&&e.create_form_validation_rules&&t.saveCreateForm(e.create_form,e.create_form_validation_rules),t.reinitCreateForm()},error:function(e,t,i){o(i)}})}this.$FormCreateContainer.html(e.create_form);var a=this.$FormCreateContainer.find("form");this.aFormCreateRules=e.create_form_validation_rules,new r(a,this.aFormCreateRules,{no_init_focus:!0,no_init_validate:!0}),a.on("submit",function(e){e.preventDefault();var n=a.serializeArray(),s=function(e){t.setPopError(e,null,function(){t.reinitCreateForm()})};t.setPopLoader(i.__("misc.submitting")),"add_to"===t.sType&&n.push({name:"id_document",value:t.sIdVideo}),$.post({url:"/api/playlists/create/",dataType:"json",data:n,success:function(e){if(900==e.code)return void t.fnDisplayEmailVerificationModal(e.data.action_need_verified_email);if(!e.result)return void(2===e.code&&e.form&&e.js_validation_rules?t.reinitCreateForm({create_form:e.form,create_form_validation_rules:e.js_validation_rules}):s(e.message));if(e.list&&e.list.id){var i=e.list,n=new c(i,t),o=t.aVisiblePlaylists.length&&t.aVisiblePlaylists[0].watch_later?1:0;return t.aVisiblePlaylists.splice(o,0,i),t.oLoadedPlaylists[n.sId]=n,t.iNbLists++,e.video_added&&n.setToInList(!0,!1),void n.showEdit()}t.showList()},error:function(e,t,i){s(i)},complete:function(){t.unsetPopLoader()}})});var l=a.find("#"+a.prop("id")+"_status");if(l&&l.length){var d=new c,u=$(d.getVisibilityPicto(l.val())),f=$("<label></label>");f.addClass("favlist-status-label select-label").insertBefore(l).append(l),u.addClass("favlist-status-picto").prependTo(f),l.on("change",function(e){e.preventDefault();var t=$(d.getVisibilityPicto(l.val()));t.addClass("favlist-status-picto"),u.replaceWith(t),u=t,a.find(".form-field-"+a.prop("id")+"_password").toggleClass("hidden","PASSWORD"!==l.val())})}},searchQuery:function(){var e=this.$FilterSearchInput.val();e&&e.length||(e=!1),this.sQuery!==e&&(this.sQuery=e,this.loadPage(0))},toggleShowMoreFilters:function(e){this.bShowMoreFilter="boolean"==typeof e?e:!this.bShowMoreFilter,this.$FilterShowMoreBtn.toggleClass("is-opened",this.bShowMoreFilter),$(".favlists-actions-more").toggleClass("is-visible",this.bShowMoreFilter)},displayLogin:function(){var e=this;require(["skins/default/form/login","skins/default/video/watch_later","text!skins/default/video/playlists/login_alert.mustache"],function(n,s,o){var a=s.is_feature_enabled()&&e.oOptions.bAddWatchLaterOnLogin,r=$(t.render(o,{sAlert:i.__("video.favs.must_be_logged_in_to_fav"),sLoginBtn:i.__("login_form.login_or_create_account"),sWatchLaterBtn:i.__("video.add_to_watch_later"),bWatchLaterEnabled:a,sSeparator:i.__("misc.or")}));e.setContent(r),e.isInPop()&&r.parents(".x-overlay").addClass("auto-width-popup"),n.setupLinks(r.find(".favlist-alert-login-btn")),a&&s.init_btn(r.find(".favlist-alert-watch-later-btn"),e.sIdVideo,{$confirmPos:e.oOptions.$confirmPos?e.oOptions.$confirmPos:null,end_click_func:function(){e.oPopContainer.hide()}})})},moveVideosToOtherList:function(e){if(!this.bIsLoading){var t="/api/playlists/list/"+this.sMoveToFromId+"/move-to/"+e,i=this;this.bIsLoading=!0,this.setPopLoader(),$.post({url:t,dataType:"json",data:{ids:this.aMoveToSelectedIds,csrf:this.sMoveToCsrf},success:function(t){return i.bIsLoading=!1,900==t.code?void i.fnDisplayEmailVerificationModal(t.data.action_need_verified_email):t.result?(i.isInPop()?i.oPopContainer.hide():a.alert("OK"),void i.oMoveToFromPlaylist.moveVideosToOtherListSuccess(e,i.aMoveToSelectedIds)):(i.isInPop()&&(i.oPopContainer.hide(),i.oMoveToFromPlaylist.reloadListInfos()),i.setPopError(t.message),!1)},error:function(e,t,n){i.setPopError(n)},complete:function(){i.bIsLoading=!1,i.unsetPopLoader()}})}},updateListNbVideos:function(e,t){"undefined"!=typeof this.oLoadedPlaylists[e]&&this.oLoadedPlaylists[e].setMovedVideos(t)},updateLoadedListData:function(e,t,i){return"undefined"!=typeof this.oLoadedPlaylists[e]?this.oLoadedPlaylists[e].updateListData(t,i):[]},updateAllLoadedListData:function(e,t,i){return this.oManager.updateAllLoadedListData(e,t,i,this)},fnDisplayEmailVerificationModal:function(e){require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e).show()})}},p}),define("skins/default/video/playlists/manager",["lib/tools","./list_of_lists"],function(e,t){var i=function(){this.aLoadedListsOfLists=[]};return i.prototype={loadList:function(e,i){var n,s=e+(i&&i.sIdVideo?"_"+i.sIdVideo:"");if("undefined"!=typeof this.aLoadedListsOfLists[s])n=this.aLoadedListsOfLists[s],i&&n.updateOptions(i);else{if(i&&"object"==typeof i||(i={}),"editWithoutInitLoad"===e&&(i.bNoInitHashUpdate=!0),n=new t("editWithoutInitLoad"===e?"edit":e,this,i),n.hasError())return!1;n.setId(s),this.aLoadedListsOfLists[s]=n}return"editWithoutInitLoad"!==e&&n.showList(),n},isAListPopOpen:function(){for(sLolId in this.aLoadedListsOfLists){if(this.aLoadedListsOfLists[sLolId].isPopOpen())return!0}return!1},updateAllLoadedListData:function(e,t,i,n){var s=[],o=n.getId();for(sLolId in this.aLoadedListsOfLists){var a=this.aLoadedListsOfLists[sLolId],r=a.updateLoadedListData(e,t,i);o===a.getId()&&(s=r)}return s},loadAddToList:function(e,t){return void 0===t&&(t={}),t.sIdVideo=e,this.loadList("add_to",t)},loadEditList:function(e){return void 0===e&&(e={}),this.loadList("edit",e)},loadCreateForm:function(e,t){return void 0===t&&(t={}),t.bLoadCreateForm=!0,this.loadList(e,t)},loadCreateList:function(e){return void 0===e&&(e={}),this.loadCreateForm("edit",e)},loadCreateAndAddToList:function(e,t){return void 0===t&&(t={}),t.sIdVideo=e,this.loadCreateForm("add_to",t)},removeVideoFromList:function(e,t,i){var n=this.loadList("editWithoutInitLoad");n.loadOnePlaylist(t,function(t){if(!t)return void n.showList();t.deleteVideo(e,i)})},loadMoveToList:function(e,t,i){return void 0===i&&(i={}),i.oMoveToFromPlaylist=e,i.aMoveToSelectedIds=t,this.loadList("move_to",i)},loadEditPlayList:function(e,t,i){void 0===i&&(i={});var n=this.loadList("editWithoutInitLoad",i);n.loadOnePlaylist(e,function(e){if(!e)return void n.showList();t||(n.getContainer(),n.isInPop()&&n.setHistoricalNav("lists")),e.showEdit()})},autoOpenByHash:function(t){void 0===t&&(t={});var i=e.getUrlHash();if(!i.length)return void("function"==typeof t.fnDefault&&t.fnDefault(t));var n,s;return"pl_edit_"===i.substring(1,9)?(s=i.substring(9),void this.loadEditPlayList(s,!0,t)):"pl_voters_"===i.substring(1,11)?(s=i.substring(11),n=this.loadList("editWithoutInitLoad",t),void n.loadOnePlaylist(s,function(e){if(!e)return void n.showList();e.showVoters()})):"lists"===i.substring(1,6)?void this.loadList("edit",t):void 0}},new i}),define("skins/default/mozaique/thumb_block_menu",["skins/common/mozaique/thumb_block_menu","skins/common/mozaique/thumb_block_menu/one_tb_menu","config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/history/page_view_history","skins/common/video/share","skins/default/video/watch_later","skins/default/video/watch_later/watch_later_tracker","skins/default/mozaique/thumb_block_viewed","skins/default/profile/subscribe/btn"],function(e,t,i,n,s,o,a,r,l,d,u){var c,f=function(){e.apply(this),this.setEntry("watch_later","add_content_v_watch_later"),this.setEntry("sub_btn","add_content_v_sub_btn"),this.setEntry("pl_add","add_content_v_playlist_add");var t="favorite"===i.data.action&&i.dyn.login_info&&i.dyn.login_info.is_logged&&i.dyn.login_info.id===i.data.fav_list.id_user,n="watch_later"===i.data.action;t||n?(this.setEntry("pl_remove","add_content_v_playlist_remove"),this.orderEntries(["watch_later","sub_btn","pl_add","pl_remove","vote_actions"])):this.orderEntries(["watch_later","sub_btn","pl_add","vote_actions"])};return f.prototype=new e,t.prototype.set_content=function(){"video"===this.options.type?this.set_content_video():"favlist"===this.options.type&&this.set_content_favlist()},t.prototype.add_content_v_viewed=function(){var e,t,i=this;if(this.btn.parents(".thumb-block").hasClass("viewed")){this.viewed=!0;var s=$("<p><span class='icon-f icf-eye'></span>"+n.__("video.was_watched")+"</p>");e=$("<li class='video-viewed'></li>"),e.append(s),this.$Content.append(e)}d.is_feature_enabled()?d.is_feature_enabled()&&(e=$("<li class='video-viewed-disable'></li>"),t=$("<a><span class='icon-f icf-eye-blocked'></span>"+n.__("video.disable_viewed_indic")+"</a>"),t.on("click",function(){d.toggle_feature(!1,!1),i.popup.close(),c.reset_initiated_contents()}),e.append(t),this.$Content.append(e)):(e=$("<li class='video-viewed-enable'></li>"),t=$("<a><span class='icon-f icf-eye'></span>"+n.__("video.enable_viewed_indic")+"</a>"),t.on("click",function(){d.toggle_feature(!1,!0),i.popup.close(),c.reset_initiated_contents()}),e.append(t),this.$Content.append(e)),this.btn.parents(".thumb-block").hasClass("viewed")&&o.canTrack()&&(e=$("<li class='video-viewed-remove'></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("history.remove")+"</a>"),t.on("click",function(){o.removeId("video",i.sId,function(){i.$ThumbBlock.find(".video-viewed").remove(),i.$Content.find(".video-viewed, .video-viewed-remove").remove()}),i.popup.close()}),e.append(t),this.$Content.append(e))},t.prototype.add_content_v_watch_later=function(){if(r.is_feature_enabled()&&"watch_later"!==i.data.action){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-clock'></span>"+n.__("video.watch_later")+"</a>"),s=this;r.init_btn(t,this.sId,{popup_class:"watch-later-tb-menu",end_click_func:function(){s.popup.close()}}),e.append(t),this.$Content.append(e)}},t.prototype.add_content_v_sub_btn=function(){if(this.uploader_id&&this.uploader_profile&&!this.is_owner){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-feed'></span></a>"),i=this;new u(t,this.uploader_profile,this.uploader_id,this.sub_csrf,this.is_follower,this.is_owner,{state_info_pos:"append",subed_icf:!1,unsubed_text:n.__("subscriptions.subscribe")+"&nbsp;",subed_text:n.__("subscriptions.unsubscribe")+"&nbsp;",btn_display:!1,tooltip_class:"no-arrow",no_tooltip_validation:!!c.bAllSubscribeTooltipDisabled,resize_on_end:!1,end_function:function(e,t){i.popup.close(),c.reset_initiated_contents(),c.executeSubscribeEndFunctions(e,t)}}),e.append(t),this.$Content.append(e)}},t.prototype.add_content_v_playlist_add=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-favorites-add'></span>"+n.__("video.favs.add_to_list")+"</a>"),i=this;t.on("click",function(e){e.preventDefault(),i.popup.close();var t=s.loading();require(["skins/default/video/playlists/manager"],function(e){e.loadAddToList(i.sId),t&&t.close()})}),e.append(t),this.$Content.append(e)},t.prototype.add_content_v_playlist_remove=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.remove_video_from_list")+"</a>"),o=this;t.on("click",function(e){if(e.preventDefault(),o.popup.close(),i.dyn.login_info.is_logged){var t=s.loading();require(["skins/default/video/playlists/manager"],function(e){e.removeVideoFromList(o.sId,i.data.fav_list.id_list,function(){o.$ThumbBlock.fadeOut(500,function(){$(this).remove()})}),t&&t.close()})}else if("watch_later"===i.data.action&&xv.watch_later&&xv.watch_later.removeVideo){var n=parseInt(o.sId);o.$ThumbBlock.fadeOut(500,function(){$(this).remove(),xv.watch_later.removeVideo(n,"aWatchLater.ids")})}}),e.append(t),this.$Content.append(e)},t.prototype.set_content_favlist=function(){if(!this.$Content){this.$Content=$("<ul></ul>");var e=this.options.favorite.getType();"move_to"===e?this.add_content_f_move_to(this):("add_to"===e&&this.add_content_f_add_to(this),this.add_content_f_go_to_playlist(),this.add_content_f_go_to_playlist_random(),this.add_content_f_go_to(),this.add_content_f_edit(),this.options.favorite.isWatchLater()||this.add_content_f_delete(),this.add_content_f_share()),this.popup.setContent(this.$Content)}},t.prototype.add_content_f_add_to=function(){if(this.options.favorite.isVideoInList()||!this.options.favorite.isListFull()){var e,t=$("<li></li>"),i=this;this.options.favorite.isVideoInList()?(e=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.remove_video_from_list")+"</a>"),e.on("click",function(){i.options.favorite.removeVideoFromList(),i.close_popup()})):(e=$("<a><span class='icon-f icf-plus-square'></span>"+n.__("video.favs.add_video")+"</a>"),e.on("click",function(){i.options.favorite.addVideoToList(),i.close_popup()})),t.append(e),this.$Content.append(t)}},t.prototype.add_content_f_go_to=function(){var e=$("<li class='link-go-to'></li>"),t=$("<a href='"+this.options.favorite.getUrl()+"'><span class='icon-f icf-arrow-right'></span> "+n.__("video.favs.list_page")+"</a>");e.append(t),this.$Content.append(e)},t.prototype.add_content_f_go_to_playlist=function(){var e=this.options.favorite.getPlaylistUrl();if(e){var t=$("<li></li>"),i=$("<a href='"+e+"'><span class='icon-f icf-player-play-circle-o'></span> "+n.__("video.favs.play_playlist")+"</a>");t.append(i),this.$Content.append(t)}},t.prototype.add_content_f_go_to_playlist_random=function(){var e=this.options.favorite.getRandomPlaylistUrl();if(e){var t=$("<li></li>"),i=$("<a href='"+e+"'><span class='icon-f icf-random'></span> "+n.__("video.favs.play_random_playlist")+"</a>");t.append(i),this.$Content.append(t)}},t.prototype.add_content_f_share=function(){var e,t=$("<li></li>"),i=this.options.favorite.getVisibility();if("NOBODY"===i){e=$("<span><span class='icon-f icf-share'></span> "+n.__("video.favs.cant_share_private_playlist",{"%link%":"<strong class='u'>","%end_link%":"</strong>"})+"</span>"),e.addClass("tb-menu-share-title");var s=this;e.find("strong").on("click",function(){s.options.favorite.showEdit(),s.close_popup()}),t.append(e)}else e=$("<span><span class='icon-f icf-share'></span> "+n.__("video.favs.share_playlist")+"</span>"),e.addClass("tb-menu-share-title"),t.append(e),t.append(a.getShareElem(this.options.favorite.getFullUrl(),this.options.favorite.getName(),"full")),"ANYONE"!==i&&(e=$("<span>"+n.__("video.favs.share_not_everyone")+"</span>"),e.addClass("tb-menu-share-legend"),t.append(e));this.$Content.append(t)},t.prototype.add_content_f_edit=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-pencil'></span>"+n.__("video.favs.edit_this_list")+"</a>"),i=this;t.on("click",function(){i.options.favorite.showEdit(),i.close_popup()}),e.append(t),this.$Content.append(e)},t.prototype.add_content_f_delete=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.delete_this_list")+"</a>"),i=this;t.on("click",function(){i.options.favorite["delete"](),i.close_popup()}),e.append(t),this.$Content.append(e)},t.prototype.add_content_f_move_to=function(){var e,t=$("<li></li>"),i=this;e=$("<a><span class='icon-f icf-mail-forward'></span>"+n.__("video.favs.move_to_this_list")+"</a>"),e.on("click",function(){i.options.favorite.moveVideosToThisList(),i.close_popup()}),t.append(e),this.$Content.append(t)},c=new f,xv.thumb_block_menus=c,c}),define("skins/default/mozaique/next_too_much",[],function(){var e=function(){};return e.prototype={remove:function(e){$(".thumb-block-pagin-next",e).each(function(){var e=$(this).offset(),t=$(this).prev(".thumb-block").offset();(!t||t.top<e.top)&&$(this).remove()})}},new e}),define("lib/helpers/thumbs/mozaique",["lib/tools","./engine_creator"],function(e,t){var i,n=function(e){return e++,e>9?0:e},s=function(e,t,i){return e++,e>=t?i?-1:0:e},o=function(e,t){var n=Math.floor((e-1)/3);return 0===n?"0%":-1*n*(i?100:t?56.25:75)+"%"},a=function(e){this.rotator=e,this.name=t.ENGINE_MOZAIQUE,this.is_video_engine=!1,this.thumb,this.ori_src,this.is_profile_pic,this.is_video_pic,this.is_16_9,this.idx,this.mozaique,this.videos,this.timer};return a.prototype={startVideoPic:function(e){var t=this;this.thumb=e;var i=this.thumb.attr("src");this.is_16_9=-1!==i.indexOf("/thumbs169"),this.idx=0,this.mozaique=this.thumb.next(".hovered"),0===this.mozaique.length&&(i=i.substring(0,i.lastIndexOf("/")).replace("thumbs169lll","thumbs169ll").replace("thumbslll","thumbsll"),this.mozaique=$('<img class="hovered" src="'+i+'/mozaiquehome.jpg" />').hide().insertAfter(this.thumb).on("mouseout",function(e){t.rotator.stop(e)})),this.timer=window.setTimeout(function(){t.nextVideo()},30)},startProfilePic:function(t,i){this.thumb=t,this.ori_src=this.thumb.attr("src"),this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),this.idx=-1,this.videos=i,e.preloadPicture(i[0].img);var n=this;this.timer=window.setTimeout(function(){n.nextProfPic()},30)},nextVideo:function(){if(this.thumb){var e=this;this.idx=n(this.idx),0===this.idx?this.mozaique.hide():1===this.idx?this.mozaique.show().css({marginTop:"0%",marginLeft:"0%"}):(this.mozaique.css({marginTop:o(this.idx,this.is_16_9),marginLeft:-100*Math.floor((this.idx-1)%3)+"%"}),void 0===i&&4===this.idx&&(i=Math.abs(this.thumb.height()-Math.abs(parseInt(this.mozaique.css("marginTop").replace("px",""))))>5)&&this.mozaique.css({marginTop:o(this.idx,this.is_16_9)})),this.timer=window.setTimeout(function(){e.nextVideo()},1e3)}},nextProfPic:function(){if(this.thumb){var t=this;this.idx=s(this.idx,this.videos.length,this.is_video_pic),this.is_video_pic&&(-1===this.idx?this.thumb.addClass("video-pic"):this.thumb.removeClass("video-pic")),this.thumb.attr("src",-1===this.idx?this.ori_src:this.videos[this.idx].img),this.is_profile_pic&&(-1===this.idx?this.thumb.addClass("profile-pic"):this.thumb.removeClass("profile-pic"));var i=s(this.idx,this.videos.length,this.is_video_pic);-1!==i&&e.preloadPicture(this.videos[i].img),this.timer=window.setTimeout(function(){t.nextProfPic()},1e3)}},stop:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.thumb&&(this.mozaique&&this.mozaique.hide(),this.thumb=null,this.ori_src="",this.mozaique=null,this.videos=null)},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx||this.mozaique&&this.mozaique.is(e)&&0===this.idx}},a}),define("lib/helpers/thumbs/mp4vp",["static/utils","./engine_creator"],function(e,t){var i=function(e){return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},n=function(e,t,i){return i?e.replace(".jpg",".mp4"):(e.substring(0,e.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?((l*)|(poster))\//,"/videopreview/")+(t?"_169.mp4":"_43.mp4")).replace(/(-[0-9]+)_([0-9]+)/,"_$2$1")},s=function(e){var t=0;for(var i in e)t+=e[i];return t/e.length},o=function(e,t){return e++,e>=t?0:e},a=function(e){this.rotator=e,this.name=t.ENGINE_MP4,this.is_video_engine=!0,this.thumb,this.is_ad,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.nbplay=0,this.pgs_req,this.req_loaded={},this.req_start=0,this.req_total=0,this.req_dur=[],this.req_duration=[]};return a.prototype={startVideoPic:function(e){this.is_looping=!0,this.startPreview(e)},startProfilePic:function(e,t){this.is_looping=t.length+(e.hasClass("video-pic")?1:0)<2,this.videos=t,this.thumb=e,this.startPreview(e)},startPreview:function(e){this.nbplay=1;var t,i=this;if(this.thumb=e,e.hasClass("profile-pic")?(t=this.videos[0].img,this.thumb.prop("src",t).removeClass("profile-pic")):t=this.thumb.attr("src"),this.is_ad=!0===this.thumb.data("isad"),this.is_16_9=-1!==t.indexOf("/thumbs169"),this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var s=this.thumb.parent().prop("href"),o="",a="",r="",l=!1;if(this.is_ad)r=' target="_blank" rel="noopener"';else{var d=this.thumb.parent().prop("target");d&&(r=' target="'+d+'"')}(e.parent().hasClass("thumb-related-exo")||e.parent().hasClass("thumb-player-related-exo"))&&(o="thumb-related-exo-"+Math.round(1e7*Math.random()),a=' class="'+o+'"',l=!0),this.node=$('<div class="videopv"><a href="'+s+'"'+r+a+'></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(e){i.rotator.stop(e)}),l&&xv&&"object"==typeof xv.sda&&"object"==typeof xv.sda.pp&&"function"==typeof xv.sda.pp.add&&xv.sda.pp.add(o)}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),t=n(t,this.is_16_9,this.is_ad),this.startPgsCheck(t);var u=this.createVideo(t);this.node.prepend(u)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=o(this.idx,this.videos.length);var e=n(this.videos[this.idx].img,this.is_16_9,this.is_ad);this.pgsnode.show(),this.startPgsCheck(e);var t=this.node.css("backgroundColor","").children("video"),i=this.createVideo(e,function(){t.remove(),t[0].src="",t[0].load()});t.after(i)},stop:function(){if(this.thumb){this.nbplay=0,this.stopPgsCheck(),
this.node.css("backgroundColor","").hide();var e=this.node.children("video");e.remove(),e[0].src="",e[0].load(),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null}},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx},stopPgsCheck:function(){this.pgs_req&&(this.pgs_req.abort(),this.pgs_req=null,this.req_start=0,this.req_total=0)},startPgsCheck:function(t){var n=i(t);if("object"!=typeof this.req_loaded[n]&&(this.stopPgsCheck(),this.pgsbar.stop(!0).css("width","0%"),"boolean"!=typeof this.req_loaded[n])){var o=this;this.pgsbar.animate({width:"100%"},1e4,"linear"),this.req_start=(new Date).getTime(),this.req_total=0,this.pgs_req=e.createRequestObject(),this.pgs_req.open("GET",t),this.pgs_req.addEventListener("loadstart",function(e){o.req_start=(new Date).getTime()}),this.pgs_req.addEventListener("progress",function(e){if(e.lengthComputable&&(0===o.req_total&&o.req_dur.length>2&&o.pgsbar.stop(!0).animate({width:"100%"},Math.round(s(o.req_dur)*e.total),"linear"),o.req_total=e.total),!(o.req_dur.length>2)){if(e.lengthComputable){var t=Math.min(1,e.loaded/e.total*5/1),i=(new Date).getTime()-o.req_start;return t<1?void o.pgsbar.stop(!0).animate({width:"100%"},Math.round(i/t-i),"linear"):void o.pgsbar.stop(!0).animate({width:"100%"},1e3,"linear")}o.pgsbar.stop(!0).animate({width:"100%"},1e4,"linear")}}),this.pgs_req.addEventListener("load",function(){o.req_loaded[n]=!0}),this.pgs_req.addEventListener("abort",function(){!0!==o.req_loaded[n]&&delete o.req_loaded[n]}),this.pgs_req.send(),this.req_loaded[n]=this.pgs_req}},createVideo:function(e,t){var a=this,r=i(e),l=!1,d=document.createElement("video");d.src=e,d.muted=!0,d.autoplay="autoplay",d.disableRemotePlayback=!0,d.playsInline=!0,d.addEventListener("progress",function(){4===d.readyState&&d.seekable.end(0)==d.buffered.end(0)&&(a.req_loaded[r]=!0)}),d.addEventListener("timeupdate",function(){if(!l){var e=2;if(a.req_duration.length>1&&(e=s(a.req_duration)/1e3-.5),!a.is_looping&&d.duration-d.currentTime<=e){l=!0;var t=o(a.idx,a.videos.length),r=a.videos[t].img,u=i(r);"undefined"==typeof a.req_loaded[u]&&a.startPgsCheck(n(r,a.is_16_9,a.is_ad))}}}),this.is_looping?d.addEventListener("ended",function(){if(a.nbplay===a.rotator.max_nb_play)return void a.rotator.stop(!0,!0);a.nbplay++,this.play()}):d.addEventListener("ended",function(){a.req_loaded[r]=!0,a.nextPreview()});var u=!1,c=function(){if(!u){if(u=!0,d.removeEventListener("playing",c),a.req_total>0){var e=(new Date).getTime()-a.req_start;a.req_dur.push(e/a.req_total),a.req_duration.push(e),a.req_dur.length>4&&(a.req_dur.shift(),a.req_duration.shift())}a.stopPgsCheck(),a.node.css("backgroundColor","#000"),a.pgsnode.hide(),"function"==typeof t&&t()}};return d.addEventListener("playing",c),d}},a}),define("lib/helpers/thumbs/tsvp",["./engine_creator"],function(e){var t=function(e){var t=0;for(var i in e)t+=e[i];return t/e.length},i=function(e,t){return(e.substring(0,e.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?l*\//,"/videopreview/")+(t?"_169.ts":"_43.ts")).replace(/(-[0-9]+)_([0-9]+)/,"_$2$1")},n=function(e,t){return e++,e>=t?0:e},s=function(e,t,i){i.stop(!0).css("width","0%").animate({width:"100%"},1e4,"linear"),JSMpeg.Player.call(this,e,t);var n=(new Date).getTime(),s=!1,o=this,a=!1;this.renderer.canvas.style.visibility="hidden",this.renderer.renderProgress=function(e){if(0!==e){o.is_cached=!1,i.stop(!0),s&&(s=!1,i.css("width",(100*e).toFixed(2)+"%"));var t=(new Date).getTime()-n;i.animate({width:"100%"},Math.max(200,Math.round(t/e-t)),"linear")}},this.renderer.render=function(e,t,n){this.enabled&&(a?"function"==typeof o.nextframe&&o.nextframe(o.video.getCurrentTime(),o.video.timestamps[o.video.timestamps.length-1].time):(a=!0,this.canvas.style.visibility="",i.stop(!0),"function"==typeof o.started&&o.started()),Object.getPrototypeOf(this).render.call(this,e,t,n),o.video.timestampIndex>0&&o.video.timestampIndex===o.video.timestamps.length-1&&"function"==typeof o.ended&&o.ended())},this.resetProgress=function(){s=!0}};s.prototype=Object.create(JSMpeg.Player.prototype,{}),s.prototype.is_cached=!0,s.prototype.started=null,s.prototype.nextframe=null,s.prototype.ended=null,s.prototype.constructor=s;var o=function(t){this.rotator=t,this.name=e.ENGINE_TS,this.is_video_engine=!0,this.thumb,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.player,this.nextplayer,this.nbplay=0,this.req_duration=[]};return o.prototype={startVideoPic:function(e){this.is_looping=!0,this.startPreview(e)},startProfilePic:function(e,t){this.is_looping=t.length+(e.hasClass("video-pic")?1:0)<2,this.videos=t,this.thumb=e,this.startPreview(e)},startPreview:function(e){this.nbplay=1;var t,i=this;if(this.thumb=e,e.hasClass("profile-pic")?(t=this.videos[0].img,this.thumb.removeClass("profile-pic")):t=this.thumb.attr("src"),this.is_16_9=-1!==t.indexOf("/thumbs169"),this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var n=this.thumb.parent().prop("href"),s="",o="",a=!1;(e.parent().hasClass("thumb-related-exo")||e.parent().hasClass("thumb-player-related-exo"))&&(s="thumb-related-exo-"+Math.round(1e7*Math.random()),o=' class="'+s+'"',a=!0),this.node=$('<div class="videopv"><a href="'+n+'"'+o+'></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(e){i.rotator.stop(e)}),a&&xv&&"object"==typeof xv.sda&&"object"==typeof xv.sda.pp&&"function"==typeof xv.sda.pp.add&&xv.sda.pp.add(s)}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),this.player=this.createPlayer(t),this.node.prepend(this.player.options.canvas)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=n(this.idx,this.videos.length);var e=this.videos[this.idx].img;this.pgsnode.show();var t=this.player;this.player=this.createPlayer(e),$(t.options.canvas).after(this.player.options.canvas)},stop:function(){this.thumb&&(this.node.css("backgroundColor","").hide(),this.player&&(this.player.destroy(),this.player.options.canvas.parentNode&&this.player.options.canvas.parentNode.removeChild(this.player.options.canvas),this.player=null),this.nextplayer&&(this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null,this.nbplay=0)},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx},createPlayer:function(e,o){if(e=i(e,this.is_16_9),!o&&this.nextplayer){if(this.nextplayer.source.url===e){this.nextplayer.resetProgress(),this.nextplayer.play();var a=this.nextplayer;return this.nextplayer=null,a}this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null}var r=this,a=new s(e,{canvas:document.createElement("canvas"),progressive:!1,loop:this.is_looping,autoplay:void 0===o||!o,decodeFirstFrame:!1},this.pgsbar);if(this.is_looping)a.started=function(){r.node.css("backgroundColor","#000"),r.pgsnode.hide()},a.ended=function(){if(r.nbplay===r.rotator.max_nb_play)return void r.rotator.stop(!0,!0);r.nbplay++};else{var l=this.player,d=(new Date).getTime();a.started=function(){if(r.node.css("backgroundColor","#000"),r.pgsnode.hide(),l&&(l.destroy(),l.options.canvas.parentNode.removeChild(l.options.canvas)),!a.is_cached){var e=(new Date).getTime()-d;r.req_duration.push(e),r.req_duration.length>4&&r.req_duration.shift()}},a.nextframe=function(e,i){if(!r.nextplayer){var s=2;if(r.req_duration.length>1&&(s=t(r.req_duration)/1e3-.5),i-e<=s){var o=n(r.idx,r.videos.length),a=r.videos[o].img;r.nextplayer=r.createPlayer(a,!0)}}},a.ended=function(){r.nextPreview()}}return a}},o}),define("lib/helpers/thumbs/engine_creator",["config/main","static/utils","skins/common/basic_feature"],function(e,t,i){var n=function(){if(this.videop_allowed=!1,this.videop_enabled=!!i.IS_ENABLED(i.S_F_VIDEO_PREVIEW),this.videopv_codec,"object"==typeof e.dyn&&"object"==typeof e.dyn.vp&&e.dyn.vp.allowed&&"string"==typeof e.dyn.vp.codec&&("mp4"===e.dyn.vp.codec||"ts"===e.dyn.vp.codec)&&(this.videop_allowed=!0,this.videopv_codec=e.dyn.vp.codec,"mp4"===this.videopv_codec&&-1===navigator.userAgent.toLowerCase().indexOf("chrome-lighthouse"))){var t=document.createElement("video");"undefined"!=typeof t.canPlayType&&t.canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"').length>0||(this.videopv_codec="ts")}this.engineLoading=!1,this.engineName=!1,this.engineObj,this.libtimer,this.pending_create=[]};return n.prototype={ENGINE_MOZAIQUE:"mozaique",ENGINE_MP4:"mp4vp",ENGINE_TS:"tsvp",getPreviewAllowed:function(){return this.videop_allowed},getPreviewEnabled:function(){return this.videop_enabled},setPreviewEnabled:function(e){this.videop_enabled=e},setPreviewVideoCodec:function(e){this.videopv_codec=e},create:function(i){i&&this.pending_create.push(i);var n,s=this;if(this.videop_enabled)if(n=this.ENGINE_MOZAIQUE,"mp4"===this.videopv_codec)n=this.ENGINE_MP4;else if("ts"===this.videopv_codec)if("object"==typeof JSMpeg)n=this.ENGINE_TS,this.libtimer&&(window.clearInterval(this.libtimer),this.libtimer=null);else if(!this.libtimer)return t.loadScript(e.domains["static"]+"/v3/js/libs/jsmpeg.min.js"),void(this.libtimer=window.setInterval(function(){s.create()},500));if(this.engineName===n)return void this.executeCallbacks();if(this.engineLoading!==n){this.engineLoading=n;var o=function(e){s.engineLoading===n&&(s.engineLoading=!1,s.engineName=n,s.engineObj=e,s.executeCallbacks())};n===this.ENGINE_MOZAIQUE?require(["lib/helpers/thumbs/mozaique"],o):n===this.ENGINE_MP4?require(["lib/helpers/thumbs/mp4vp"],o):n===this.ENGINE_TS&&require(["lib/helpers/thumbs/tsvp"],o)}},executeCallbacks:function(){for(var e in this.pending_create)this.pending_create[e](this.engineObj);this.pending_create=[]}},new n}),function(e){function t(){var e=o();e!==a&&(a=e,d.trigger("orientationchange"))}function i(t,i,n,s){var o=n.type;n.type=i,e.event.dispatch.call(t,n,s),n.type=o}e.attrFn=e.attrFn||{};var n="ontouchstart"in window,s={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:n?"touchstart":"mousedown",endevent:n?"touchend":"mouseup",moveevent:n?"touchmove":"mousemove",tapevent:n?"tap":"click",scrollevent:n?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.touch={},e.isTouchCapable=function(){return s.touch_capable},e.getStartEvent=function(){return s.startevent},e.getEndEvent=function(){return s.endevent},e.getMoveEvent=function(){return s.moveevent},e.getTapEvent=function(){return s.tapevent},e.getScrollEvent=function(){return s.scrollevent},e.touch.setSwipeThresholdX=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.swipe_h_threshold=e},e.touch.setSwipeThresholdY=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.swipe_v_threshold=e},e.touch.setDoubleTapInt=function(e){if("number"!=typeof e)throw new Error("Interval parameter must be a type of number");s.doubletap_int=e},e.touch.setTapHoldThreshold=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.taphold_threshold=e},e.touch.setTapRange=function(e){if("number"!=typeof e)throw new Error("Ranger parameter must be a type of number");s.tap_pixel_range=e},e.each(["tapstart","tapend","tapmove","tap","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange","tap2","taphold2"],function(t,i){e.fn[i]=function(e){return e?this.on(i,e):this.trigger(i)},e.attrFn[i]=!0}),e.event.special.tapstart={setup:function(){var t=this,n=e(t);n.on(s.startevent,function o(e){if(n.data("callee",o),e.which&&1!==e.which)return!1;var a=n.get(0)!==window&&n.get(0)!==document?n.offset():{left:0,top:0},r=e.originalEvent,l={position:{x:s.touch_capable?r.touches[0].pageX:e.pageX,y:s.touch_capable?r.touches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(r.changedTouches[0].pageX-a.left):Math.round(e.pageX-a.left),y:s.touch_capable?Math.round(r.changedTouches[0].pageY-a.top):Math.round(e.pageY-a.top)},time:Date.now(),target:e.target};return i(t,"tapstart",e,l),!0})},remove:function(){e(this).off(s.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,n=e(t);n.on(s.moveevent,function o(e){n.data("callee",o);var a=n.get(0)!==window&&n.get(0)!==document?n.offset():{left:0,top:0},r=e.originalEvent,l={position:{x:s.touch_capable?r.touches[0].pageX:e.pageX,y:s.touch_capable?r.touches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(r.changedTouches[0].pageX-a.left):Math.round(e.pageX-a.left),y:s.touch_capable?Math.round(r.changedTouches[0].pageY-a.top):Math.round(e.pageY-a.top)},time:Date.now(),target:e.target};return i(t,"tapmove",e,l),!0})},remove:function(){e(this).off(s.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,n=e(t);n.on(s.endevent,function o(e){n.data("callee",o);var a=n.get(0)!==window&&n.get(0)!==document?n.offset():{left:0,top:0},r=e.originalEvent,l={position:{x:s.touch_capable?r.changedTouches[0].pageX:e.pageX,y:s.touch_capable?r.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(r.changedTouches[0].pageX-a.left):Math.round(e.pageX-a.left),y:s.touch_capable?Math.round(r.changedTouches[0].pageY-a.top):Math.round(e.pageY-a.top)},time:Date.now(),target:e.target};return i(t,"tapend",e,l),!0})},remove:function(){e(this).off(s.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,n=this,o=e(n),a={x:0,y:0},r=0,l=0;o.on(s.startevent,function d(e){if(e.which&&1!==e.which)return!1;o.data("tapheld",!1),t=e.target;var u=e.originalEvent,c=Date.now();s.touch_capable?u.touches[0].pageX:e.pageX,s.touch_capable?u.touches[0].pageY:e.pageY,s.touch_capable?(u.touches[0].pageX,u.touches[0].target.offsetLeft):e.offsetX,s.touch_capable?(u.touches[0].pageY,u.touches[0].target.offsetTop):e.offsetY;a.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,a.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,r=a.x,l=a.y;var f=o.parent().data("threshold")?o.parent().data("threshold"):o.data("threshold"),h=void 0!==f&&!1!==f&&parseInt(f)?parseInt(f):s.taphold_threshold;return o.data("hold_timer",window.setTimeout(function(){var f=a.x-r,h=a.y-l;if(e.target==t&&(a.x==r&&a.y==l||f>=-s.tap_pixel_range&&f<=s.tap_pixel_range&&h>=-s.tap_pixel_range&&h<=s.tap_pixel_range)){o.data("tapheld",!0);for(var p=Date.now(),_=p-c,g=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],m=[],b=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},v=0;v<g.length;v++){var y={position:{x:s.touch_capable?u.changedTouches[v].pageX:e.pageX,y:s.touch_capable?u.changedTouches[v].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(u.changedTouches[v].pageX-b.left):Math.round(e.pageX-b.left),y:s.touch_capable?Math.round(u.changedTouches[v].pageY-b.top):Math.round(e.pageY-b.top)},time:Date.now(),target:e.target,duration:_};m.push(y)}var D=2==g.length?"taphold2":"taphold";o.data("callee1",d),i(n,D,e,m)}},h)),!0}).on(s.endevent,function u(){o.data("callee2",u),o.data("tapheld",!1),window.clearTimeout(o.data("hold_timer"))}).on(s.moveevent,function c(e){o.data("callee3",c),r=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,l=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2).off(s.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,n,o,a,r=this,l=e(r),d=null,u=!1;l.on(s.startevent,function c(i){if(i.which&&1!==i.which)return!1;if(l.data("doubletapped",!1),t=i.target,l.data("callee1",c),o=i.originalEvent,!d){var n=l.get(0)!==window&&l.get(0)!==document?l.offset():{left:0,top:0};d={position:{x:s.touch_capable?o.touches[0].pageX:i.pageX,y:s.touch_capable?o.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-n.left):Math.round(i.pageX-n.left),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-n.top):Math.round(i.pageY-n.top)},time:Date.now(),target:i.target,element:i.originalEvent.srcElement,index:e(i.target).index()}}return!0}).on(s.endevent,function f(t){var c=Date.now(),h=l.data("lastTouch")||c+1,p=c-h;if(window.clearTimeout(n),l.data("callee2",f),p<s.doubletap_int&&e(t.target).index()==d.index&&p>100){l.data("doubletapped",!0),window.clearTimeout(s.tap_timer);var _=l.get(0)!==window&&l.get(0)!==document?l.offset():{left:0,top:0},g={position:{x:s.touch_capable?t.originalEvent.changedTouches[0].pageX:t.pageX,y:s.touch_capable?t.originalEvent.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-_.left):Math.round(t.pageX-_.left),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-_.top):Math.round(t.pageY-_.top)},time:Date.now(),target:t.target,element:t.originalEvent.srcElement,index:e(t.target).index()},m={firstTap:d,secondTap:g,interval:g.time-d.time};u||(i(r,"doubletap",t,m),d=null),u=!0,a=window.setTimeout(function(){u=!1},s.doubletap_int)}else l.data("lastTouch",c),n=window.setTimeout(function(){d=null,window.clearTimeout(n)},s.doubletap_int,[t]);l.data("lastTouch",c)})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,n=e(t),o=null,a=null,r={x:0,y:0};n.on(s.startevent,function l(e){return(!e.which||1===e.which)&&(a=Date.now(),o=e.target,n.data("callee1",l),r.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,r.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)}).on(s.endevent,function d(e){if(n.data("callee2",d),e.target==o){var l=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,u=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageY:e.pageY;s.tap_timer=window.setTimeout(function(){var o=r.x-l,d=r.y-u;if(!n.data("doubletapped")&&!n.data("tapheld")&&(r.x==l&&r.y==u||o>=-s.tap_pixel_range&&o<=s.tap_pixel_range&&d>=-s.tap_pixel_range&&d<=s.tap_pixel_range)){var c=n.get(0)!==window&&n.get(0)!==document?n.offset():{left:0,top:0},f=e.originalEvent,h={position:{x:s.touch_capable?f.changedTouches[0].pageX:e.pageX,y:s.touch_capable?f.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(f.changedTouches[0].pageX-c.left):Math.round(e.pageX-c.left),y:s.touch_capable?Math.round(f.changedTouches[0].pageY-c.top):Math.round(e.pageY-c.top)},time:Date.now(),target:e.target};h.time-a<s.taphold_threshold&&i(t,"singletap",e,h)}},s.doubletap_int)}})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,n,o=this,a=e(o),r=!1,l=null,d={x:0,y:0};a.on(s.startevent,function u(e){return a.data("callee1",u),(!e.which||1===e.which)&&(r=!0,d.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,d.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,t=Date.now(),l=e.target,n=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)}).on(s.endevent,function c(e){a.data("callee2",c);var u=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,f=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,h=d.x-u,p=d.y-f;if(l==e.target&&r&&Date.now()-t<s.taphold_threshold&&(d.x==u&&d.y==f||h>=-s.tap_pixel_range&&h<=s.tap_pixel_range&&p>=-s.tap_pixel_range&&p<=s.tap_pixel_range)){for(var _=a.get(0)!==window&&a.get(0)!==document?a.offset():{left:0,top:0},g=e.originalEvent,m=[],b=0;b<n.length;b++){var v={position:{x:s.touch_capable?g.changedTouches[b].pageX:e.pageX,y:s.touch_capable?g.changedTouches[b].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(g.changedTouches[b].pageX-_.left):Math.round(e.pageX-_.left),y:s.touch_capable?Math.round(g.changedTouches[b].pageY-_.top):Math.round(e.pageY-_.top)},time:Date.now(),target:e.target};m.push(v)}var y=2==n.length?"tap2":"tap";i(o,y,e,m)}})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){function t(i){r=e(i.currentTarget),r.data("callee1",t),u.x=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageX:i.pageX,u.y=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageY:i.pageY,c.x=u.x,c.y=u.y,l=!0;var n=r.get(0)!==window&&r.get(0)!==document?r.offset():{left:0,top:0},a=i.originalEvent;o={position:{x:s.touch_capable?a.touches[0].pageX:i.pageX,y:s.touch_capable?a.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-n.left):Math.round(i.pageX-n.left),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-n.top):Math.round(i.pageY-n.top)},time:Date.now(),target:i.target}}function i(t){r=e(t.currentTarget),r.data("callee2",i),c.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,c.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;var n,a=r.parent().data("xthreshold")?r.parent().data("xthreshold"):r.data("xthreshold"),f=r.parent().data("ythreshold")?r.parent().data("ythreshold"):r.data("ythreshold"),h=void 0!==a&&!1!==a&&parseInt(a)?parseInt(a):s.swipe_h_threshold,p=void 0!==f&&!1!==f&&parseInt(f)?parseInt(f):s.swipe_v_threshold;if(Math.abs(c.x-u.x)>Math.abs(c.y-u.y)?(u.x<c.x&&c.x-u.x>h&&(n="swiperight"),u.x>c.x&&u.x-c.x>h&&(n="swipeleft")):(u.y>c.y&&u.y-c.y>p&&(n="swipeup"),u.y<c.y&&c.y-u.y>p&&(n="swipedown")),n!=undefined&&l){u.x=0,u.y=0,c.x=0,c.y=0,l=!1;var _=r.get(0)!==window&&r.get(0)!==document?r.offset():{left:0,top:0},g=t.originalEvent,m={position:{x:s.touch_capable?g.touches[0].pageX:t.pageX,y:s.touch_capable?g.touches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(g.changedTouches[0].pageX-_.left):Math.round(t.pageX-_.left),y:s.touch_capable?Math.round(g.changedTouches[0].pageY-_.top):Math.round(t.pageY-_.top)},time:Date.now(),target:t.target},b=Math.abs(o.position.x-m.position.x),v=Math.abs(o.position.y-m.position.y),y={startEvnt:o,endEvnt:m,direction:n.replace("swipe",""),xAmount:b,yAmount:v,duration:m.time-o.time};d=!0,r.trigger("swipe",y).trigger(n,y)}}function n(t){r=e(t.currentTarget);var i="";if(r.data("callee3",n),d){var a=r.data("xthreshold"),u=r.data("ythreshold"),c=void 0!==a&&!1!==a&&parseInt(a)?parseInt(a):s.swipe_h_threshold,f=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):s.swipe_v_threshold,h=r.get(0)!==window&&r.get(0)!==document?r.offset():{left:0,top:0},p=t.originalEvent,_={position:{x:s.touch_capable?p.changedTouches[0].pageX:t.pageX,y:s.touch_capable?p.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(p.changedTouches[0].pageX-h.left):Math.round(t.pageX-h.left),y:s.touch_capable?Math.round(p.changedTouches[0].pageY-h.top):Math.round(t.pageY-h.top)},time:Date.now(),target:t.target},g=Math.abs(o.position.x-_.position.x),m=Math.abs(o.position.y-_.position.y);g>m?(o.position.x<_.position.x&&_.position.x-o.position.x>c&&(i="swiperight"),o.position.x>_.position.x&&o.position.x-_.position.x>c&&(i="swipeleft")):(o.position.y>_.position.y&&o.position.y-_.position.y>f&&(i="swipeup"),o.position.y<_.position.y&&_.position.y-o.position.y>f&&(i="swipedown"));var b={startEvnt:o,endEvnt:_,direction:i.replace("swipe",""),xAmount:g,yAmount:m,duration:_.time-o.time};r.trigger("swipeend",b)}l=!1,d=!1}var o,a=this,r=e(a),l=!1,d=!1,u={x:0,y:0},c={x:0,y:0};r.on(s.startevent,t),r.on(s.moveevent,i),r.on(s.endevent,n)},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.moveevent,e(this).data.callee2).off(s.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){function t(e,t){n=t,i(a,n?"scrollstart":"scrollend",e)}var n,o,a=this,r=e(a);r.on(s.scrollevent,function l(e){r.data("callee",l),n||t(e,!0),clearTimeout(o),o=setTimeout(function(){t(e,!1)},50)})},remove:function(){e(this).off(s.scrollevent,e(this).data.callee)}};var o,a,r,l,d=e(window),u={0:!0,180:!0};if(s.orientation_support){var c=window.innerWidth||d.width(),f=window.innerHeight||d.height();r=c>f&&c-f>50,l=u[window.orientation],(r&&l||!r&&!l)&&(u={"-90":!0,90:!0})}e.event.special.orientationchange={setup:function(){return!s.orientation_support&&(a=o(),d.on("throttledresize",t),!0)},teardown:function(){return!s.orientation_support&&(d.off("throttledresize",t),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=o=function(){var e=!0,t=document.documentElement;return e=s.orientation_support?u[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",g)},teardown:function(){e(this).off("resize",g)}};var h,p,_,g=function(){p=Date.now(),_=p-m,_>=250?(m=p,e(this).trigger("throttledresize")):(h&&window.clearTimeout(h),h=window.setTimeout(t,250-_))},m=0;e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap",taphold2:"taphold"},function(t,i){e.event.special[t]={setup:function(){e(this).on(i,e.noop)}}})}(jQuery),define("jquery-mobile-events",function(){}),define("lib/helpers/thumbs/rotator",["lib/helpers/events","./engine_creator","jquery-mobile-events"],function(e,t){var i=function(){this.thumbs=$(),this.thumb,this.ori_src,this.is_video_thumb,this.is_profile_pic,this.is_video_pic,this.trigger_event,this.start_timer,this.last_start,this.touch_timer,this.max_nb_play=4,this.tmp_locked=!1,this.videop_enabled=t.getPreviewEnabled(),this.no_video_pv=null,this.videop_enabled&&this.testVideoPreview()};return i.prototype={ON_EVENT:/iPad|iPhone|iPod/.test(navigator.userAgent)||/Mac OS X/.test(navigator.userAgent)&&navigator.maxTouchPoints>2?"swipe touchmove":"swipe touchstart mouseenter mousemove",getPreviewEnabled:function(){return this.videop_enabled},addThumb:function(e){if(-1===this.thumbs.index(e)){var t=this;this.thumbs=this.thumbs.add($(e).on(this.ON_EVENT,function(e){var i=e.type;if("touchstart"!==i)t.start(this,i);else if(!t.touch_timer){var n=this;t.touch_timer=setTimeout(function(){t.touch_timer=null,t.start(n,i)},200)}}).on("touchend",function(){t.touch_timer&&clearTimeout(t.touch_timer)}).on("mouseleave",function(e){t.stop(e)}).on("mousedown",function(e){t.lock(e)}))}},initEngine:function(){var e=this,i=function(t){var i=!1,n=e.thumb;e.engine&&e.thumb&&(e.stop(!0),i=!0),e.engine=new t(e),i&&e.start(n,e.trigger_event)};t.create(i)},onToggleVP:function(e){},start:function(t,i){if(e.isScrolling())return!1;if($(t).hasClass("thumb-ad")&&this.engine!==this.ENGINE_MP4)return!1;if("mouseenter"===i&&this.tmp_locked){if(!((new Date).getTime()-this.tmp_locked>200))return;this.tmp_locked=!1}if(this.start_timer&&(window.clearTimeout(this.start_timer),this.start_timer=null),!this.thumb||!this.thumb.is(t)){var n=(new Date).getTime();if(this.last_start>0&&n-this.last_start<300||!this.engine){this.last_start=n;var s=this;return void(this.start_timer=window.setTimeout(function(){s.start(t,i)},300))}this.last_start=n,this.trigger_event=i,this.stop(!0),this.addThumbBlockStartedClass(t),this.thumb=$(t);var o=this.thumb.data("videos");if(this.is_video_thumb="object"!=typeof o,this.is_profile_pic=!1,this.is_video_pic=!1,this.is_video_thumb)this.engine.startVideoPic(this.thumb);else{if(this.ori_src=this.thumb.attr("src"),this.ori_src.indexOf("/profthumb/")>0&&(!o||0===o.length))return this.thumb.off("swipe touchstart mouseenter mouseleave mousedown"),void(this.thumb=null);if(this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),(!o||0===o.length)&&(!this.engine.is_video_engine||this.is_profile_pic))return;this.engine.startProfilePic(this.thumb,o)}}},stop:function(e,t){if(this.engine){if(!0!==e){if("swipe"===this.trigger_event)return;if(this.engine.isStillOnThumb(e.target))return}t&&(this.tmp_locked=(new Date).getTime()),this.engine.stop(),this.thumb&&(this.removeThumbBlockStartedClass(this.thumb),this.is_video_pic&&this.thumb.addClass("video-pic"),this.is_video_thumb||this.thumb.attr("src",this.ori_src),this.is_profile_pic&&this.thumb.addClass("profile-pic"),this.thumb=null)}},lock:function(e){1!==e.which||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(this.thumbs.off("swipe touchstart mouseenter mouseleave"),this.stop(!0))},addThumbBlockStartedClass:function(e){var t=$(e).parents(".thumb-block");t.length||(t=$(e).parents(".thumb")),t.addClass("rotator-started")},removeThumbBlockStartedClass:function(e){var t=$(e).parents(".thumb-block");t.length||(t=$(e).parents(".thumb")),t.removeClass("rotator-started")},testVideoPreview:function(e){if(/iPad|iPhone|iPod|Firefox/.test(navigator.userAgent)&&!xv.conf.dyn.is_desktop){if(!0===this.no_video_pv||!this.videop_enabled&&!0!==e)return;var t=document.createElement("video");t.src=xv.conf.domains["static"]+"/v3/img/skins/common/blank.mp4",t.muted=!0,t.style.position="fixed",t.style.left="1px",t.style.top="1px",t.style.opacity="0.1",t.style.height="2px",t.style.width="2px",t.style.zIndex="9999";var i=!1,n=this;xv.dom.addEventListener(t,"suspend",function(){!0!==i&&null===n.no_video_pv&&(n.no_video_pv=!0,setTimeout(function(){!1===i&&(document.body.removeChild(t),i=!0,n.setVideoPreviewSlideShow())},1e3))}),xv.dom.addEventListener(t,"play",function(){!0!==i&&!1!==n.no_video_pv&&(n.no_video_pv=!1,!1===i&&(document.body.removeChild(t),i=!0,n.initEngine()))}),t.autoplay="autoplay",t.disableRemotePlayback=!0,t.playsInline=!0,document.body.appendChild(t)}else this.initEngine()},setVideoPreviewSlideShow:function(){if(!this.videop_enabled)return!1;null===this.no_video_pv?this.testVideoPreview(!0):(t.setPreviewVideoCodec(null),this.initEngine(this.no_video_pv))}},i}),define("lib/helpers/thumbs_rotator",["static/cookies","./thumbs/rotator","./events"],function(e,t,i){var n,s,o,a,r=new t,l=0,d=function(){r.addThumb(this)};a=function(e,t){if(t)$(".thumb img",e).not(".no-rotate").each(d);else{var i=$(".thumb-block",e).not(".no-rotate");if(0===i.length&&(e&&e.length>0&&e.each(function(){$(this).is(".thumb-block:not(.no-rotate)")&&(i=i.add($(this)))}),0===i.length))return;i.find(".thumb img").each(d)}},a.video_preview=r.getPreviewEnabled(),a(),i.addListener(i.TAB_HIDDEN,function(){r.stop(!0)});var u=function(){if(n=null,l=(new Date).getTime(),r.thumb){var e=r.thumb.offset();if(s<e.left||o<e.top)return void r.stop(!0);var t=r.thumb.outerWidth(!0),i=r.thumb.outerHeight(!0);return s>e.left+t||o>e.top+i?void r.stop(!0):void 0}};return $(window).on("mousemove",function(e){if(s=e.pageX,o=e.pageY,!n){var t=(new Date).getTime()-l;if(t<950)return void(n=window.setTimeout(u,1e3-t));u()}}),a}),define("skins/common/purchase_form/purchase_pop",[],function(){var e=function(){this.sVideoId=null,this.sUserId=null,this.sOrigin=null,this.oForm=null,this.fnOnFormLoadedEnd=null,this.fnOnFormClose=null};return e.prototype={setPreventScrollToTop:function(e){this.bPreventScrollToTop=e},setVideoId:function(e){this.sVideoId=e},setUserId:function(e){this.sUserId=e},setOrigin:function(e){this.sOrigin=e},setOnFormLoadedEnd:function(e){this.fnOnFormLoadedEnd=e},setOnCloseCallback:function(e){this.fnOnFormClose=e,this.oForm&&"function"==typeof this.oForm.setOnCloseCallback&&"function"==typeof this.fnOnFormClose&&this.oForm.setOnCloseCallback(this.fnOnFormClose)},open:function(){var e=this;require(["skins/common/form/login/premium"],function(t){
e.oForm=new t(e.sUserId,e.sVideoId,e.sOrigin,e.bPreventScrollToTop),"function"==typeof e.fnOnFormLoadedEnd&&(e.oForm.onFormLoadedEnd=function(t){e.fnOnFormLoadedEnd(t)}),"function"==typeof e.fnOnFormClose&&e.oForm.setOnCloseCallback(e.fnOnFormClose),e.oForm.open()})}},e}),define("skins/common/purchase_form/purchase_btn",["config/main","static/thumbs","lib/tools","skins/common/purchase_form/purchase_const"],function(e,t,i,n){var s={oOptions:{bPreventScrollToTop:!0}},o=function(e,t){i.initParams(this,t||{},s),this.bIsInit=!1,this.$btn=e};return o.prototype={init:function(){!this.bIsInit&&this.$btn&&this.$btn.length&&(t.getIsThumbBlockVideo(this.$btn)&&this.$btn.data("video-id",t.getVideoId(this.$btn)),this.iIdVideo=this.$btn.data("video-id"),this.iIdUser=this.iIdVideo?null:this.$btn.data("user-id"),this.$btn.on("click",this,this.onBtnClick),this.$btn.addClass(n.S_IS_INIT_CLASS),this.bIsInit=!0)},openForm:function(){var i=this;require(["skins/common/purchase_form/purchase_pop"],function(n){var s=new n;if(i.oOptions.bPreventScrollToTop&&s.setPreventScrollToTop(!0),i.iIdVideo&&s.setVideoId(i.iIdVideo),i.iIdUser&&s.setUserId(i.iIdUser),t.getIsThumbBlockVideo(i.$btn)){if(i.$btn.data("is-ppv"))switch(e.data.action){case"video":s.setOrigin("video_related_ppv");break;case"premium_feed":s.setOrigin("custom_home_videos_ppv");break;case"profile":i.$btn.closest("#tabActivity").length?s.setOrigin("profile_feed_ppv"):s.setOrigin("profile_videos_ppv");break;case"search":case"tag":case"category":s.setOrigin(e.data.action+"_ppv")}else if(i.$btn.data("is-membership"))switch(e.data.action){case"video":s.setOrigin("video_related_membership");break;case"premium_feed":s.setOrigin("custom_home_videos_membership");break;case"profile":i.$btn.closest("#tabActivity").length?s.setOrigin("profile_feed_membership"):s.setOrigin("profile_videos_membership");break;case"search":case"tag":case"category":s.setOrigin(e.data.action+"_membership")}}else switch(e.data.action){case"manage_login_create":-1!==window.location.href.indexOf("iframe")?s.setOrigin("iframe_premium"):s.setOrigin("premium_tour");break;case"profile":s.setOrigin("profile_page_subscribe_button");break;case"video":if(-1!==window.location.search.indexOf("xsc=qp"))s.setOrigin("quickies_profile");else if(-1!==window.location.search.indexOf("xsc=qs"))s.setOrigin("quickies_search");else if(-1!==window.location.search.indexOf("xsc=fvtp"))s.setOrigin("full_video_on_trailer_player");else if(-1!==window.location.search.indexOf("xsc=fvtecp"))s.setOrigin("full_video_on_trailer_player_end_cta");else if(-1!==window.location.search.indexOf("xsc=gfps"))s.setOrigin("global_feed_premium_sub");else if(-1!==window.location.search.indexOf("xsc=pfps"))s.setOrigin("profile_feed_premium_sub");else{var o=window.location.search.indexOf("xsc=fvt");if(-1!==o){var a=window.location.search.substring(o+7,o+8),r="m"===a;r&&(a=window.location.search.substring(o+8,o+9)),s.setOrigin("full_video_on_trailer"+(r?"_mobile":"")+a)}else{var l=-1!==window.location.search.indexOf("xsc=pofs");e.data.is_ppv?s.setOrigin(l?"premium_on_free_search_ppv":"video_page_ppv"):e.data.is_membership?s.setOrigin(l?"premium_on_free_search_membership":"video_page_membership"):s.setOrigin(l?"premium_on_free_search_premium":"video_page_premium")}}}s.open()})},onBtnClick:function(e){if(!$(e.target).closest("a").length||!$(e.target).closest(".metadata").length){e.preventDefault();e.data.openForm()}}},o}),define("skins/common/purchase_form/purchase_form_init",["static/log","config/main","lib/tools","skins/common/purchase_form/purchase_const","skins/common/form/login/purchase/payment_type","skins/common/form/login/purchase/crypto_type"],function(e,t,i,n,s,o){var a=function(){this.bAutoOpenedForm=!1};a.prototype={initPage:function(){this.initBtns($("body")),this.openPageRelatedForm()||this.openForcedForm()},openPageRelatedForm:function(e){return!!t.dyn.premium&&(e&&"object"==typeof e||(e=i.parseUrl(window.location.href,"query",!0)),!(!e||"object"!=typeof e||"string"!=typeof e[n.QUERY.PAGE_RELATED_FORM.DISPLAY_PURCHASE_POPUP]||"1"!==e[n.QUERY.PAGE_RELATED_FORM.DISPLAY_PURCHASE_POPUP]||"string"!=typeof e[n.QUERY.PAGE_RELATED_FORM.TOKEN])&&(!("premium-form-ppv-video"===e[n.QUERY.PAGE_RELATED_FORM.TOKEN]&&"video"===t.data.action&&t.dyn.video_premium_user_allowed||"premium-form-membership-channel"===e[n.QUERY.PAGE_RELATED_FORM.TOKEN]&&"profile"===t.data.action&&t.data.visitor&&t.data.visitor.is_member)&&(!(!("video"===t.data.action&&t.data.is_ppv||"profile"===t.data.action&&t.data.user&&t.data.user.channel&&t.data.user.has_membership||"video"===t.data.action&&t.data.is_membership&&t.data.uploader_id)&&t.dyn.login_info.is_premium)&&(this.bAutoOpenedForm=!0,require(["skins/common/form/login/premium"],function(t){var i=new t;i.setOriginFromAction(),i.onFormLoadedEnd=function(t){var a=e[n.QUERY.PAGE_RELATED_FORM.TOKEN],r=$("#"+a);if(i.onFormLoadedEnd=null,r.length){var l=!1;if("string"==typeof e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_PM]){var d=e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_PM];d===s.CRYPTO_CURRENCY&&"string"==typeof e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_CC]&&(d=o.PREFIX+e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_CC]),d!==s.CRYPTO_CURRENCY&&i.setSelectedPaymentType(a,d)}if("string"==typeof e[n.QUERY.PAGE_RELATED_FORM.PRODUCT]){var u=e[n.QUERY.PAGE_RELATED_FORM.PRODUCT];i.setSelectedOffer(a,u)}if("string"==typeof e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_TR]){var c=e[n.QUERY.PAGE_RELATED_FORM.PRODUCT_TR],f=r.find('[name="'+a+'[form]"]');f.length&&(f.val(c),l=0===a.indexOf("premium-form"))}l&&r.submit()}},i.open()}),!0))))},openForcedForm:function(t){if(e.debug_("%c oPurchasePopInit --- openForcedForm","color: gold;",t),t&&"object"==typeof t||(t=i.parseUrl(window.location.href,"query",!0)),!t||"object"!=typeof t||!t[n.QUERY.FORCED_FORM.DISPLAY_PURCHASE_POPUP])return!1;this.bAutoOpenedForm=!0;var s=parseInt(t[n.QUERY.FORCED_FORM.ID_DOCUMENT]),o=parseInt(t[n.QUERY.FORCED_FORM.ID_CHANNEL]);isNaN(s)&&(s=null),isNaN(o)&&(o=null),require(["skins/common/form/login/premium"],function(e){var i=new e(o,s);"string"==typeof t[n.QUERY.FORCED_FORM.SOURCE]?i.setOrigin(t[n.QUERY.FORCED_FORM.SOURCE]):i.setOriginFromAction(),i.open()})},hasFormAutoOpened:function(){return this.bAutoOpenedForm},getPurchaseBtns:function(e){var t=$("."+n.S_PURCHASE_BTN_CLASS+":not(."+n.S_IS_INIT_CLASS+")",e);return 0===t.length&&e&&e.length>0&&e.each(function(){$(this).is("."+n.S_PURCHASE_BTN_CLASS+":not(."+n.S_IS_INIT_CLASS+")")&&(t=t.add($(this)))}),t},getPurchaseThumbBlocks:function(e){var i=$(".thumb-block:not(."+n.S_IS_INIT_CLASS+")",e),s={$premiumOnly:$(),$purchaseOther:$()};return 0===i.length&&e&&e.length>0&&e.each(function(){$(this).is(".thumb-block:not(."+n.S_IS_INIT_CLASS+")")&&(i=i.add($(this)))}),i.each(function(){$(this).data("is-purchased")||$(this).data("is-premium")&&t.dyn.login_info.is_premium||($(this).data("is-ppv")||$(this).data("is-membership")?s.$purchaseOther=s.$purchaseOther.add($(this)):$(this).data("is-premium")&&(s.$premiumOnly=s.$premiumOnly.add($(this))))}),s},initBtns:function(e,t){var i=this.getPurchaseBtns(e),s=this.getPurchaseThumbBlocks(e);(i.length||s.$purchaseOther.length)&&require(["skins/common/purchase_form/purchase_btn"],function(e){i.length&&i.each(function(){if(!$(this).hasClass(n.S_IS_INIT_CLASS)){new e($(this),t).init()}}),s.$purchaseOther.length&&s.$purchaseOther.each(function(){if(!$(this).hasClass(n.S_IS_INIT_CLASS)){new e($(this),t).init()}})}),s.$premiumOnly.length&&require(["skins/common/mozaique/premium_redirect_alert"],function(e){e.init_listing(s.$premiumOnly),s.$premiumOnly.addClass(n.S_IS_INIT_CLASS)})}};var r=new a;return r.initPage(),r}),define("skins/default/mozaique/thumb_block_common_init",["skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_viewed","skins/default/mozaique/next_too_much","lib/helpers/thumbs_rotator","skins/common/purchase_form/purchase_form_init"],function(e,t,i,n,s){var o=function(){};o.prototype={init_listing:function(o,a){var r=$(".thumb-block:not(.tb_full_init):not(.thumb-nopreview)",o);0===r.length&&(o&&o.length>0&&o.each(function(){$(this).is(".thumb-block:not(.tb_full_init):not(.thumb-nopreview)")&&(r=r.add($(this)))}),0===r.length)||(r.addClass("tb_full_init"),a&&"object"==typeof a||(a={}),!1!==a.tb_menu&&e.init_listing(r),!1!==a.tb_viewed&&t.init_listing(r),!1!==a.rotator&&n(r,"boolean"==typeof a.is_thumb_list?a.is_thumb_list:null),!1!==a.next_too_much&&i.remove(r),!1!==a.purchase_form&&s.initBtns(r,a.oBtnOptions))}};var a=new o;return xv.thumb_block_initiator=a,a}),define("text!skins/common/xcams/currently_online_popup.mustache",[],function(){return'<div class="mac-models">\n\t<h2>{{{ title }}}</h2>\n\t<a href="{{{ home_url }}}" target="_blank" class="btn btn-xs btn-primary">{{{ more }}}</a>\n\t<div class="models">\n\t\t{{#models}}\n\t\t\t<a class="model" target="_blank" href="{{{ link_url }}}">\n\t\t\t\t<div class="live_model_thumb">\n\t\t\t\t\t<img src="{{^live_img_url}}{{{ img_url }}}{{/live_img_url}}{{#live_img_url}}{{{ live_img_url }}}" onerror="this.onerror=null;this.src=\'{{{ img_url }}}\';$(this).parent().addClass(\'not-live\');{{/live_img_url}}" alt="{{{ name }}}"/>\n\t\t\t\t</div>\n\t\t\t\t<span class="name">{{{ name }}}</span>\n\t\t\t\t<span class="live badge">{{{ live }}}</span>\n\t\t\t</a>\n\t\t{{/models}}\n\t</div>\n</div>'}),define("skins/common/xcams/current_live_cams",["static/log","config/main"],function(e,t){var i="rtl"===$("html").prop("dir"),n=function(){this.popups={},this.bDataIsSetted=!1,this.oCurrentLiveCams={},this.oAdsCam={},this.bShowJpeg=!1},s={autoStartLoad:!0,startPosition:-1,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,defaultAudioCodec:undefined,initialLiveManifestSize:1,maxBufferLength:30,maxMaxBufferLength:600,backBufferLength:Infinity,frontBufferFlushThreshold:Infinity,maxBufferSize:6e7,maxBufferHole:.5,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:Infinity,liveDurationInfinity:!1,preferManagedMediaSource:!1,enableWorker:!0,enableSoftwareAES:!0,fragLoadPolicy:{"default":{maxTimeToFirstByteMs:9e3,maxLoadTimeMs:1e5,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:5,retryDelayMs:3e3,maxRetryDelayMs:15e3,backoff:"linear"}}},startLevel:undefined,audioPreference:{characteristics:"public.accessibility.describes-video"},subtitlePreference:{lang:"en-US"},startFragPrefetch:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,licenseXhrSetup:undefined,drmSystems:{},drmSystemOptions:{}};return n.prototype={addHoverToLink:function(e,n){if(t.dyn.is_desktop){var s=e.attr("href");-1!==s.indexOf("language=sv")&&(s=s.replace("language=sv","language=se"),e.attr("href",s));var o=this;require(["lib/i18n!front","lib/helpers/popup","lib/helpers/inline_loader"],function(t,s,a){o.popups[n]=new s(e,a.getSafe("after",'<div class="mac-models-loading">'+t.__("loading.loading")).getHtml()+"</div>",{trigger:!1,autoclose:50,mouseover_open:325,position:{v:"below",h:i?"right":"left"}}),o.popups[n].onOpen=function(){o.getCurrentLiveCamsInfos(n)}})}},getCurrentLiveCamsInfos:function(i){if(this.bDataIsSetted)return void this.setCurrentLiveCams(i);"tab"===i&&(this.popups[i].onOpen=!1);var n=this,s=("tab"===i?"/abvr/tab/":"/euto/play/")+t.dyn.page_main_cat,o={};"undefined"!=typeof xv&&"undefined"!=typeof xv.conf&&"undefined"!=typeof xv.conf.dyn&&"undefined"!=typeof xv.conf.dyn.ads&&"string"==typeof xv.conf.dyn.ads.keywords&&(o.keywords=xv.conf.dyn.ads.keywords),$.ajax({url:s,type:"POST",dataType:"json",data:o,success:function(t){if(e.debug("%c Live Cams called successfuly","color: green;"),!t.result||"object"!=typeof t.data.c||"undefined"==typeof t.data.c[i])return void("tab"===i&&(n.popup.close(),n.popups[i].onOpen=function(){n.setCurrentLiveCams(i)}));n.bDataIsSetted||(n.oCurrentLiveCams=t.data,n.bDataIsSetted=!0),n.setCurrentLiveCams(i)},error:function(t){e.debug("%c Error while loading Live Cams ("+s+")","color: red;",t.status)}})},setCurrentLiveCams:function(i){var n=this;require(["mustache","lib/tools","lib/i18n!front"],function(s,o,a){e.debug("%c Set current live cams","color: green;");var r=n.oCurrentLiveCams.b,l=n.oCurrentLiveCams.c,d=function(e){for(var t="",i="abcdefABCDEF0123456789",n=32;n>0;n--)t+=i[Math.floor(Math.random()*i.length)];return e+t},u=n.oCurrentLiveCams.u,c=[];void 0===u&&(u=n.oCurrentLiveCams.d,t.dyn.camsnl?u+="/rooms/":u="gay"===t.dyn.page_main_cat?u+"/live/guys/":"trans"===t.dyn.page_main_cat?u+"/live/trans/":u,u=o.addUrlParam(u,"language","sv"===t.dyn.locale?"se":t.dyn.locale),u=o.addUrlParam(u,"mp_code",l[i]),u=o.addUrlParam(u,"utm_content",l[i]),"gay"===t.dyn.page_main_cat?(u=o.addUrlParam(u,"service","guys"),"foot"===i&&(u=o.addUrlParam(u,"utm_medium",encodeURIComponent("Guys|"+t.data.slcamscat)))):"trans"===t.dyn.page_main_cat?(u=o.addUrlParam(u,"service","trans"),"foot"===i&&(u=o.addUrlParam(u,"utm_medium",encodeURIComponent("Trans|"+t.data.slcamscat)))):(u=o.addUrlParam(u,"service","girls"),"foot"===i&&(u=o.addUrlParam(u,"utm_medium",encodeURIComponent("Girls|"+t.data.slcamscat)))));for(var f in r){var h=n.oCurrentLiveCams.d+r[f].link_url;"VSM"===n.oCurrentLiveCams.t&&(h=o.addUrlParam(h,"language","sv"===t.dyn.locale?"se":t.dyn.locale),h=o.addUrlParam(h,"mp_code",l[i]),h=o.addUrlParam(h,"utm_content",l[i]),"gay"===t.dyn.page_main_cat?(h=o.addUrlParam(h,"service","guys"),"foot"===i&&(h=o.addUrlParam(h,"utm_medium",encodeURIComponent("Guys|"+t.data.slcamscat)))):"trans"===t.dyn.page_main_cat?(h=o.addUrlParam(h,"service","trans"),"foot"===i&&(h=o.addUrlParam(h,"utm_medium",encodeURIComponent("Trans|"+t.data.slcamscat)))):"foot"===i&&(h=o.addUrlParam(h,"utm_medium",encodeURIComponent("Girls|"+t.data.slcamscat)))),r[f].link_url=h,c.push(r[f])}switch(i){case"tab":require(["text!skins/common/xcams/currently_online_popup.mustache"],function(o){e.debug("%c Live Cams added to the 'tab' section","color: green;"),n.popups[i].setContent(s.render(o,{models:c,home_url:u,title:"<span>"+("default"===t.sitename?"XVideos":"XNXX")+"</span> "+a.__("default"===t.sitename?"xcams.live_porn_models":"xcams.live_sex_models"),more:a.__("xcams.more_models"),live:a.__("xcams.live")})),t.dyn.is_premium&&$(".mac-models").find("a").each(function(){var e=$(this),i=e.attr("href");-1===i.indexOf(t.domains.premium)&&i.match(/^\http[s]:\/\/[a-z]*.[xvideos|xnxx]*.[com|local]*/gm)&&e.on("click",function(e){e.preventDefault(),require(["skins/common/mozaique/premium_redirect_alert"],function(e){var t=function(){document.location.href=i};e.displayPopup("exit",null,t)})})}),n.setHLSVideoOnHover(c)});break;case"ntv":require(["text!skins/"+t.sitename+"/xcams/ad_xv_cams_player_video.mustache"],function(i){t.dyn.is_mobile||t.dyn.is_tablet||(e.debug("%c Live Cams added to the 'ntv' section","color: green;"),n.oAdsCam.ntv=$(s.render(i,{class_container:d("ntv"),class_header:d("h"),class_models:d("ms"),class_model:d("m"),models:c,home_url:u,title:"straight"===t.dyn.page_main_cat?a.__("xcams.chat_with_girls",{"%span_start%":"<span>","%span_end%":"</span>"}):"gay"===t.dyn.page_main_cat?a.__("xcams.chat_with_guys",{"%span_start%":"<span>","%span_end%":"</span>"}):a.__("xcams.chat_with_trans",{"%span_start%":"<span>","%span_end%":"</span>"}),seemore:a.__("xcams.clicktosee"),filter:"straight"===t.dyn.page_main_cat?a.__("xcams.girls"):"gay"===t.dyn.page_main_cat?a.__("xcams.guys"):a.__("xcams.trans"),live:a.__("xcams.live")})),n.oAdsCam.ntv.insertBefore("#video-player-bg"),$("#video-right").addClass("hidden"),n.setHLSVideoOnHover(c))});break;case"foot":require(["text!skins/"+t.sitename+"/xcams/ad_xv_cams_footer.mustache"],function(t){e.debug("%c Live Cams added to the 'foot' section","color: green;"),n.oAdsCam.foot=$(s.render(t,{class_container:d("foot"),class_models:d("ms"),class_model:d("m"),models:c,home_url:u,live:a.__("xcams.live")})),n.oAdsCam.foot.insertBefore("#ad-footer"),n.setHLSVideoOnHover(c)})}})},supportHLSjs:function(t){if(!this.supportDefaultHlsjs(t))return e.debug("%c supportDefaultHlsjs : false"),!1;if(/android 4.4./.test(navigator.userAgent.toLowerCase()))return e.debug("%c supportHLSjs : false : Android 4.4 detected"),!1;var i=/chrome\/([0-9]+)\./.exec(navigator.userAgent.toLowerCase());return i&&parseInt(i[1])<46?(e.debug("%c supportHLSjs : false : Chrome < 46"),!1):/windows phone 8.0/.test(navigator.userAgent.toLowerCase())?(e.debug("%c supportHLSjs : false : Windows Phone 8.0"),!1):(e.debug("%c supportHLSjs : true","color: green;"),!0)},supportDefaultHlsjs:function(t){return"undefined"==typeof window.MediaSource||"undefined"==typeof window.MediaSource.isTypeSupported?(e.debug("%c Media source not supported","color: red;"),!1):void 0===t?(e.debug("%c Hls undefined","color: red;"),!1):!!t.isSupported()||(e.debug("%c Hls is not supported","color: red;"),!1)},onPlayerError:function(e){var t=e.data;console.error("%c\tPB ["+(t.bIsProfileLevel?"P-":"")+t.iNPlayer+"] onPlayerError","color:greenyellow;font-weight:bold;font-size:1.1em;",e)},setHLSVideoOnHover:function(t){if("CHATURBATE"===this.oCurrentLiveCams.t)return void(!0===this.bShowJpeg?this.setJPEGThumbOnHover(t):this.setMP4VideoOnHover(t));var i,n,o,a,r,l=this,d=!1,u=!1,c=!1,f=!1,h=document.createElement("video"),p=document.querySelectorAll(".live_model_thumb"),_=0;!1===c&&!1===f&&("undefined"!=typeof h.canPlayType&&""!==h.canPlayType("application/vnd.apple.mpegURL")?c=!0:(d=!0,require(["libs/hls-1.2.5.min"],function(e){d=!1,n=e,l.supportHLSjs(e)&&(f=!0),u&&a!==undefined&&$(a[0]).mouseover()})));for(var g=0;g<p.length;g++){_===t.length&&(_=0);var m=document.createElement("video");m.crossOrigin="anonymous",m.muted=!0,m.dataset.id=t[_].model_id,1===$(p[g]).children().length&&p[g].append(m),$(p[g]).on("mouseover",function(e){r=e.target,$(r).children().length>0&&(r=r.children[1]),d&&(u=!0,a=$(r).parent()),t.forEach(function(e){e.model_id===r.dataset.id&&(!0===c&&"string"==typeof e.stream_hls&&e.stream_hls.length?(r.src=e.stream_hls,o=r.play()):!0===f&&"string"==typeof e.stream_hls&&e.stream_hls.length&&(i=new n(s),i.on(n.Events.MANIFEST_LOADED,function(){o===undefined&&(o=r.play())}),i.loadSource(e.stream_hls),i.attachMedia(r),i.on(n.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case n.ErrorTypes.MEDIA_ERROR:case n.ErrorTypes.NETWORK_ERROR:$(r).parent().unbind(),r.remove();break;default:i.destroy()}}),i.on(n.Events.LEVEL_LOADED,function(e,t){if(r)var n=i.media.querySelector("source")?i.media.querySelector("source").src:r.src,s=!0;s&&(r.src!=n||r.src&&!r)&&$(r).parent().unbind()})))})}),$(p[g]).on("mouseout",function(t){u=!1,f&&o!==undefined&&i.destroy(),o!==undefined&&o.then(function(){t.target.pause(),o=undefined})["catch"](function(t){e.debug("%c Error of playPromise : ","color: red;",t)})}),_++}},getMp4Url:function(e){return"https://thumb.live.mmcdn.com/mp4fwap/"+e.name+".mp4"},setVideoElement:function(e){return $("<video></video>").attr("crossOrigin","anonymous").prop("muted",!0).prop("loop",!0).css({display:"none",position:"relative"}).attr("preload","auto").attr("src",this.getMp4Url(e)).attr("data-id",e.model_id)},getModelForIndex:function(e,t){return e[t%e.length]},handleMP4Enter:function(e,t){var i=e.find("img").height();t.css("height",i),e.children("img").hide(),t.show();var n=t.get(0);n.play(),n._refreshInterval=setInterval(function(){n.pause(),n.load(),n.play()},3e4)},handleMP4Leave:function(e,t){e.children("img").show(),t.hide();var i=t.get(0);i._refreshInterval&&(clearInterval(i._refreshInterval),i._refreshInterval=null),i.pause()},setMP4VideoOnHover:function(e){var t=this;$(".live_model_thumb").each(function(i,n){var s=$(n),o=s.find("video");if(0===o.length){var a=t.getModelForIndex(e,i);o=t.setVideoElement(a),s.append(o)}s.on("mouseenter",function(){t.handleMP4Enter(s,o)}).on("mouseleave",function(){t.handleMP4Leave(s,o)})})},getThumbUrl:function(e){return"https://jpeg.live.mmcdn.com/minifwap/"+e.name+".jpg?f="+Math.random()},handleJpegEnter:function(e,t,i){var n=t.height();t.css("height",n),t.css("object-fit","cover");var s=this,o=setInterval(function(){var e=new XMLHttpRequest;e.open("GET",s.getThumbUrl(i),!0),e.responseType="blob",e.onload=function(){if(200===e.status){var i=e.response,n=new FileReader;n.onloadend=function(){var e=n.result;t.attr("src",e)},n.readAsDataURL(i)}else console.error("Error loading image, status : ",e.status)},e.onerror=function(){console.error("XHR error when loading image")},e.send()},1e3/6);e.data("jpegInterval",o)},handleJpegLeave:function(e,t){var i=e.data("jpegInterval");i&&(clearInterval(i),e.removeData("jpegInterval"))},setJPEGThumbOnHover:function(e){var t=this;$(".live_model_thumb").each(function(i,n){var s=$(n),o=t.getModelForIndex(e,i),a=s.find("img").first();0===a.length&&(a=$("<img />").appendTo(s)),a.hasClass("jpeg-thumb")||a.addClass("jpeg-thumb"),s.on("mouseenter",function(){t.handleJpegEnter(s,a,o)}).on("mouseleave",function(){t.handleJpegLeave(s,a)})})}},new n}),define("text!skins/common/games/nutaku_migration_pop.mustache",[],function(){return'<div class="nutaku-mig">\n\t<div class="nutaku-mig__cont">\n\t\t<p class="nutaku-mig__hey">{{{ sHey }}}</p>\n\t\t<h3 class="nutaku-mig__start-playing">{{{ sStartPlaying }}}</h3>\n\t\t<p class="nutaku-mig__confirm-for">{{{ sConfirmFor }}}</p>\n\t\t<ul class="nutaku-mig__confirm-for-list">\n\t\t\t{{#aConfirmFor}}\n\t\t\t\t<li>{{{ sReason }}}</li>\n\t\t\t{{/aConfirmFor}}\n\t\t</ul>\n\t\t{{#aPrimaryLinks}}\n\t\t\t<a href="{{sConfirmUrl}}" target="_blank" class="nutaku-mig__btn__confirm btn btn-primary">{{{ sConfirm }}}</a>\n\t\t{{/aPrimaryLinks}}\n\t\t{{#aSecondaryLinks}}\n\t\t\t<a href="{{sNoThxUrl}}" target="_blank" class="nutaku-mig__btn__no-thx btn btn-secondary">{{{ sNoThx }}}</a>\n\t\t{{/aSecondaryLinks}}\n\t</div>\n\t<div class="nutaku-mig__logo">\n\t\t<img src="{{sLogoUrl}}" alt="{{sLogoAlt}}" />\n\t</div>\n</div>'}),define("skins/common/games/nutaku_migration_pop",["config/main","static/cookies","lib/i18n!front","lib/helpers/overlay/box","mustache","text!./nutaku_migration_pop.mustache"],function(e,t,i,n,s,o){var a=function(e){e&&e.length&&this.setPopupBtn(e)};return a.B_CLOSABLE_POPUP=!0,a.S_TOKEN_COOKIE="session_token",a.prototype={setPopupBtn:function(i){if(e.dyn.login_info&&e.dyn.login_info.is_logged){var n=this;i.on("click",function(i){if(!t.get(a.S_TOKEN_COOKIE)||!e.dyn.login_info.is_logged)return!0;i.preventDefault(),n.openPopup()})}},openPopup:function(){if(e.dyn.login_info&&e.dyn.login_info.is_logged)if("boolean"==typeof e.dyn.login_info.hasXGamesAccount)"undefined"==typeof this.oBox&&this.createPopup(),this.oBox.show();else{var t=this;$.ajax({url:"/account/check-xvgames",success:function(i){i.result?e.dyn.login_info.hasXGamesAccount=!!i.data.hasXGamesAccount:e.dyn.login_info.hasXGamesAccount=!1,t.openPopup()},error:function(){e.dyn.login_info.hasXGamesAccount=!1,t.openPopup()},dataType:"json"})}},createPopup:function(){this.oBox=n.get("body",a.B_CLOSABLE_POPUP,"hide",!0),this.oBox.setContent(this.getPopupContent()),a.B_CLOSABLE_POPUP&&(this.oBox.setOverlayClosable(!0),this.oBox.setEscapeClosable(!0)),this.oBox.setScrollAndResizeReposition("auto",!1,!0),this.oBox.addClass("nutaku-mig-pop")},getNutakuGamesUrl:function(i){var n=window.location.protocol+"//"+("default"===e.sitename?"xvideos":e.sitename)+".nutaku.net/wl/gate/";return i&&(n+="?token="+encodeURIComponent(t.get(a.S_TOKEN_COOKIE))),n},getOldGamesUrl:function(){var t=window.location.protocol+("default"===e.sitename?"//games.xvideos.com":"//xnxx-games.com");return-1!==["de","en","fr","zh","ja","ru","es"].indexOf(e.dyn.locale)&&(t+="/"+e.dyn.locale),t},getPopupContent:function(){var t=[];return t.push({sNoThxUrl:this.getNutakuGamesUrl(),sNoThx:"<span class='main'>"+i.__("games.no_thx_without_account_gen",{"%link%":"<span class='no-thx'>","%end_link%":"</span>"})+"</span>"}),e.dyn.login_info.hasXGamesAccount&&t.push({sNoThxUrl:this.getOldGamesUrl(),sNoThx:"<span class='main'>"+i.__("games.no_thx_continue_playing_old_site",{"%link%":"<span class='no-thx'>","%end_link%":"</span>","%site_name%":("default"===e.sitename?"Xvideos":e.sitename.charAt(0).toUpperCase()+e.sitename.slice(1))+" Games"})+"</span><span class='second'>"+i.__("games.needed_to_keep_progress")+"</span>"}),s.render(o,{sHey:i.__("user.hey_name",{"%user_name%":"<strong>"+(e.dyn.login_info.profile||e.dyn.login_info.email||"")+"</strong>"}),sStartPlaying:i.__("games.start_playing_new_portal"),sConfirmFor:i.__("games.confirm_account_for"),aConfirmFor:[{sReason:i.__("games.larger_cat")},{sReason:i.__("games.more_features")}],aPrimaryLinks:[{sConfirmUrl:this.getNutakuGamesUrl(!0),sConfirm:i.__("form.confirm")}],aSecondaryLinks:t,sLogoUrl:e.domains["static"]+"/v3/img/skins/"+e.sitename+"/games/nutaku/logo.png",sLogoAlt:("default"===e.sitename?"XVIDEOS":e.sitename.toUpperCase())+" GAMES"})}},a}),define("skins/common/mozaique/simple_dropdown",["lib/helpers/popup","static/cookies","lib/i18n!front"],function(e,t,i){var n=function(e){this.aPopups=[],e&&this.init(e)};return n.prototype={init:function(i){var n=this;if(i=$(i),i.find(".niv1").each(function(){var i=$(this).children(".niv2");if(0===i.length)return!0;i.on("click","a",function(){var e=$(this).data("cookie");e&&t.setLocal("sdpdwnce",e,12e4,"/")});var s=$(this).children(".show-niv2");s.removeAttr("href").addClass("init-ok");var o="simple-dropdown-pop",a=i.data("popup-class");a&&(o+=" "+a),s.hasClass("current")&&(o+=" current");var r=new e(s,i,{popup_class:o,autoclose_on_same_level:"any_level",max_width:function(){return Math.floor(96*$(window).innerWidth()/100)-4}});$(this).closest(".simple-dropdown").data("xvpop",r),n.aPopups.push(r);var l=i.children(".see-all");if(0===l.length)return!0;var d=i.data("type");if(!d)return l.remove(),!0;var u=i.find(".uls ul"),c=n.get_uls_to_center(u,d);u.addClass("hidden-pagin"),c.addClass("main-pagin"),l.on("click",function(){n.toggle_see_all($(this),r,d)})}),i.find(".year").length){var s=$(".year"),o=s.find(".year-months");if($(".year-label").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".year"),n=i.find(".year-months");if(n.is(":visible"))s.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden"),o.addClass("hidden");else if(s.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden is-close").find(".icf-angle-left").removeClass("hidden"),$(".with-days").length){var a=o.find(".year-month");a.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden")}}),$(".with-days").length){var a=o.find(".year-month"),r=a.find(".month-days");$(".month-label").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".year-month"),n=i.find(".month-days");n.is(":visible")?(a.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden"),r.addClass("hidden")):(a.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden is-close").find(".icf-angle-left").removeClass("hidden"))})}}},close_all:function(){for(var e=0;e<this.aPopups.length;e++){var t=this.aPopups[e];t&&"function"==typeof t.close&&t.close()}},get_uls_to_center:function(e,t){var i=!1,n=!1,s=!1;return e.each(function(){if($(this).find(".current").length>0){if("weeks"===t)return $(this);i?n=$(this):(i=$(this),n=!0)}else if(n){if(!0!==n)return s=$(this),!1;n=$(this)}else i=$(this)}),s?"boolean"==typeof n?e.slice(0,"weeks"===t?1:3):$(i).add($(n)).add($(s)):e.slice("weeks"===t?-1:-3)},toggle_see_all:function(e,t,n){var s=t.popup.find(".niv2"),o=!s.hasClass("see-all");if(s.toggleClass("see-all",o),e.text(i.__(o?"misc.show_less":"misc.show_more")),t.position(),!o)return!1;var a=this.get_uls_to_center(s.find(".uls ul"),n),r=a.first().position().left,l=s.find(".uls").first();r>30&&l.scrollLeft(r-30)}},n}),define("text!lib/helpers/popup/language_switcher.mustache",[],function(){return'<ul>\n\t{{#languages}}\n\t<li><a href="{{{ url }}}"><span class="flag-small flag-{{{ country }}}"></span> {{ name }}</a></li>\n\t{{/languages}}\n</ul>'}),define("lib/helpers/popup/language_switcher",["mustache","../popup","text!lib/helpers/popup/language_switcher.mustache"],function(e,t,i){return function(n,s,o,a){var r=function(){var t=[];for(var n in o)t.push({url:s+n,country:o[n].country.toLowerCase(),name:o[n].translated});return e.render(i,{languages:t})};return a&&"object"==typeof a||(a={}),"undefined"==typeof a.trigger&&(a.trigger="click mouseclick"),"undefined"==typeof a.popup_class&&(a.popup_class="language-switcher-popup"),"undefined"==typeof a.autoclose&&(a.autoclose=3e3),new t(n,r,a)}}),define("skins/default/common_all",["config/main","static/log"],function(e,t){require(["skins/common/main_cats/switcher","skins/common/player/quickies/sendLostViewDurations","skins/common/design/stop_anim_on_resize","skins/common/design/vh_tweak","skins/common/form/cookie_preferences","skins/common/design/old_ie"],function(e,t){e.initBtnSwitchers($("#main-cat-switcher"),{position:{v:"below",h:"right"}}),e.initBtnSwitchers($("#mobile-header-links .main-cat-switcher-mobile"),{position:{v:"below",h:"left"}}),e.initBtnSwitchers($("#mobile-footer-links .main-cat-switcher-mobile"),{position:{v:"above",h:"left"}}),t.verif()}),e.dyn.login_info.is_logged&&require(["skins/common/tracker/videos_i_like"],function(e){e.clear()}),e.dyn.login_info.profile&&require(["skins/common/tracker/video_subs"],function(e){e.clear()}),e.dyn.appandroidpop&&require(["skins/common/download_app"],function(e){e._init()}),$(".thumb-block").length>0&&require(["skins/default/mozaique/thumb_block_common_init"],function(e){e.init_listing(!1,{rotator:!1})});var i=$("#nav .live-cams");(i.length>0||!e.dyn.is_premium&&e.dyn.slcams)&&require(["skins/common/xcams/current_live_cams"],function(t){i.length>0&&t.addHoverToLink(i,"tab"),!e.dyn.is_premium&&e.dyn.slcams&&"undefined"!=typeof e.data.slcamscat&&window.xv.sda.adblocked.called&&t.getCurrentLiveCamsInfos("foot")});var n=$("#nav .nutaku-games, #mobile-header-links .nutaku-games");n.length>0&&e.dyn.login_info.is_logged&&require(["skins/common/games/nutaku_migration_pop"],function(e){n.each(function(){new e($(this))})});var s=$(".simple-dropdown");s.length>0&&require(["skins/common/mozaique/simple_dropdown"],function(t){"undefined"==typeof e.popup&&(e.popup={}),e.popup.oSimpleDropdown={pageInit:new t(s)}}),require(["skins/common/purchase_form/purchase_form_init"]),require(["static/utils","lib/helpers/overlay/contextual_popup"],function(e,t){e.contextual_popup=t}),!e.dyn.is_premium||e.dyn.login_info&&e.dyn.login_info.has_member_area&&e.dyn.login_info.is_logged||require(["skins/default/mozaique/thumb_block_menu"],function(e){e.disableAll()});var o=$("header .head__choice--language");o.length>0&&require(["lib/helpers/popup/language_switcher"],function(t){t(o,"/change-language/",e.data.other_locales)});var a=$("header .head__choice--main-cat");a.length>0&&require(["skins/common/main_cats/switcher"],function(e){e.initBtnSwitchers(a,{position:{v:"below",h:"left"}})})}),define("skins/common/form/login",["config/main","./login/standard","./login/premium"],function(e,t,i){return e.dyn.premium?new i:new t}),define("text!skins/common/geo_switch/contener.mustache",[],function(){
return'<div>\n\t<div class="filter">\n\t\t<label>\n\t\t\t<span class="icon-f icf-search"></span>\n\t\t\t<input type="text"{{#placeholder}} placeholder="{{ placeholder }}"{{/placeholder}}/>\n\t\t</label>\n\t\t<button type="button" class="clear"><span class="icon-f icf-close-thin"></span></button>\n\t</div>\n\t<ul class="countries row">{{{ list }}}</ul>\n\t{{^simple_contener}}\n\t<ul class="width-ref row">{{{ ref-list }}}</ul>\n\t<div class="see-all"><button type="button" class="btn btn-primary"></button></div>\n\t{{/simple_contener}}\n</div>'}),define("text!skins/common/geo_switch/list_element.mustache",[],function(){return'<li class="{{^empty}}country-{{ code }} {{/empty}}col-xs-12 {{^half}}col-sm-4 col-md-3 col-lg-2{{/half}}{{#half}}col-sm-2 col-md-1-5 col-lg-1{{/half}}{{#cur}} current{{/cur}}{{#empty}} empty{{/empty}}">{{^empty}}\n\t<a href="/change-country/{{ code }}" class="btn"><span class="flag-small flag-{{ code }}"></span> {{{ name }}}</a>\n{{/empty}}</li>'}),define("text!skins/common/geo_switch/list_no_result.mustache",[],function(){return'<li class="no-result col-xs-12">\n\t{{{ no_result }}}\n</li>'}),define("skins/common/geo_switch/geo_switch",["config/main","static/utils","mustache","lib/i18n!front","lib/helpers/overlay","lib/helpers/inline_loader","skins/common/history/one_info_tracker","text!./contener.mustache","text!./list_element.mustache","text!./list_no_result.mustache"],function(e,t,i,n,s,o,a,r,l,d){var u=["AF","AR","AT","AU","AZ","BD","BE","BG","BO","BR","CA","CH","CL","CM","CN","CO","CY","CZ","DE","DK","DO","EC","EG","ES","FI","FR","GB","GE","GR","GT","HK","HU","ID","IE","IL","IN","IQ","IS","IT","JO","JP","KE","KH","KR","LA","LB","LK","LV","MA","MD","MM","MT","MX","MY","NG","NL","NO","NZ","PE","PH","PK","PL","PT","QA","RO","RS","RU","SE","SG","SK","SN","TH","TN","TW","TZ","UA","US","VE","VN","ZA"];xv||(xv={});var c=function(){this.toExWhenInit=[],this.initiated,this.popup,this.countries,this.cur_country;var t=$("#disclaimer_vpn_another");if(this.is_vpn_disclaimer=t.length>0,this.is_vpn_disclaimer||(t="default"===e.sitename||"elitmovie"===e.sitename?$("#nav .main-categories .country-switch, header .head__choice--localisation"):$("#site-nav .country-switch, .topbar .country-switch"),0!==t.length)){var i=this;$(window).on("resize",function(){i.update_popup()}),t.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.auto_show_popup()}).addClass("init-ok")}};return c.prototype={sAllCountriesStoreId:"geoSwitchCountries",current_state:{search:!1,show_all:!1,nb_cols:0},last_update:{first_update:!0},filter_inp:!1,filter_clear_btn:!1,show_all_btn:!1,list_cont:!1,empty_list_elem:"",empty_half_list_elem:"",vpn_disclaimer_btn:!1,is_vpn_disclaimer:!1,mobile_menu_index:!1,get_popup:function(){return this.init(),this.popup},executeAllWhenInit:function(){for(var e=0;e<this.toExWhenInit.length;e++){var t=this.toExWhenInit[e];"function"==typeof t&&t()}this.toExWhenInit=[]},init:function(t){if("yes"===this.initiated)return this.executeAllWhenInit(),!0;if("pending"===this.initiated)return!1;this.initiated="pending";var i=this;this.popup||(this.popup=new s("body",!0,"hide"),this.popup.setClosable(!0,!0,!1),this.popup.addClass("geo-switch-pop"+(this.is_vpn_disclaimer?" vpn-disclaimer":"")),this.popup.onShow=function(){i.init()?i.update_popup():i.toExWhenInit.push(function(){i.update_popup()})},this.iAllMenuId=xv.menus.addClose(function(){i.popup.hide()})),this.setPopupLoading(),this.cur_country=("string"==typeof e.dyn.forcedcountry?e.dyn.forcedcountry:e.dyn.country).toLowerCase(),this.countries=[];var n=this.getCountriesStored();if(n&&n.timestamp){var o=Date.now()-1728e5;n.timestamp>o&&this.setCountries(n.countries)}return"yes"===this.initiated?(this.executeAllWhenInit(),!0):($.ajax({url:"/account/getcountries/"+e.dyn.locale,success:function(e){e.result&&e.countries?(a.set(i.sAllCountriesStoreId,{timestamp:Date.now(),countries:e.countries}),i.setCountries(e.countries),"function"==typeof t&&t()):(i.initiated="no",i.setPopupError())},error:function(){i.initiated="no",i.setPopupError()},dataType:"json"}),!1)},getCountriesStored:function(){return a.get(this.sAllCountriesStoreId)},setPopupLoading:function(){if(!this.popup)return!1;this.popup.setContent($('<p class="text-center">'+o.getSafe("after",n.__("loading.loading")).getHtml()+"</p>"))},setPopupError:function(){if(!this.popup)return!1;var e=$('<p class="text-center"><span class="btn btn-primary">'+n.__("error.failed_loading_info_retry")+"</span></p>"),t=this;e.find(".btn").on("click",function(){setTimeout(function(){t.init()},100)}),this.popup.setContent(e)},setCountries:function(e){var t=this,n=function(e){e.preventDefault(),t.get_popup().hide(),window.xv.disclaimer.vpn_display_closed($(this).prop("href"))};order=0;for(var s in e){var o=s.toLowerCase(),a={o:order,code:o,name:e[s],cur:o===this.cur_country,big:-1!==u.indexOf(s)};a.search=this.build_search_index(a),a.elem=$(i.render(l,a)),this.is_vpn_disclaimer&&(a.a_click=n),this.countries.push(a),order++}if(this.countries.length<1)return this.initiated="no",t.setPopupError(),!1;this.empty_list_elem=$(i.render(l,{empty:!0})),this.empty_half_list_elem=$(i.render(l,{empty:!0,half:!0}));var d=$(i.render(r,{list:"","ref-list":i.render(l,{empty:!0})}));this.filter_inp=d.find("input").first(),this.filter_clear_btn=d.find("button.clear").first(),this.show_all_btn=d.find(".see-all button").first(),this.ref_col_for_w=d.find("ul.width-ref li").first(),this.list_cont=d.find("ul.countries").first(),this.popup.setContent(d),this.filter_inp.on("change blur focus paste input",function(){t.update_search()}),this.filter_inp.on("keydown",function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation()),t.update_search()}),this.filter_inp.on("keyup",function(e){27===e.keyCode&&t.filter_inp.prop("value").length>0&&(e.preventDefault(),e.stopPropagation(),t.filter_inp.prop("value","")),t.update_search()}),this.filter_clear_btn.on("click",function(){t.filter_inp.prop("value",""),t.update_search()}),this.show_all_btn.on("click",function(){t.popup.getNode().children(".x-body").scrollTop(0),t.toggle_show_all()}),this.executeAllWhenInit(),this.initiated="yes"},build_search_index:function(e){var i=e.name.indexOf(","),n="us"===e.code?"usa|theunitedstatesofamerica|":"";return-1!==i?(n+=t.accentsTidy(e.name.substring(0,i)),n+=t.accentsTidy(e.name.substring(i+1)),n+="|"+t.accentsTidy(e.name.substring(i+1)),n+=t.accentsTidy(e.name.substring(0,i))):n+=t.accentsTidy(e.name),n+="|"+t.accentsTidy(e.code)},get_ordered_list_elems:function(e,t){var i=[];for(var n in this.countries)("all"===e||"search"===e&&-1!==this.countries[n].search.indexOf(t)||"search"!==e&&!this.current_state.search&&(this.current_state.show_all||this.countries[n].big)||"search"!==e&&this.current_state.search&&-1!==this.countries[n].search.indexOf(this.current_state.search))&&i.push(this.countries[n]);return i.sort(function(e,t){return e.o<t.o?-1:e.o>t.o?1:0})},show_popup:function(){var e=this.get_popup();e&&e.show("body")},auto_show_popup:function(){xv.menus.closeAll(this.iAllMenuId),this.show_popup()},update_search:function(e){var i=this.filter_inp.prop("value");!i||i.length<1?this.current_state.search=!1:(i=t.accentsTidy(i),i.length<1?this.current_state.search=!1:(this.current_state.search=i,this.toggle_show_all(!1,!0))),e||this.update_popup()},update_popup:function(){this.popup&&this.popup.open&&(this.update_nb_cols(),this.needs_update()&&(this.show_all_btn.html(this.current_state.show_all?n.__("misc.see_less_countries"):n.__("misc.see_all_countries")),this.write_list(),this.reinit_needs_update()))},needs_update:function(){for(var e in this.current_state)if("undefined"==typeof this.last_update[e]||this.last_update[e]!==this.current_state[e])return!0;return!1},reinit_needs_update:function(){this.last_update={};for(var e in this.current_state)this.last_update[e]=this.current_state[e]},update_nb_cols:function(){var e=parseInt(this.list_cont.width()),t=parseInt(this.ref_col_for_w.outerWidth());this.current_state.nb_cols=Math.max(Math.round(e/t),1)},write_list:function(){var e=this.get_ordered_list_elems(),t=e.length,s=Math.ceil(t/this.current_state.nb_cols),o=1===s&&this.current_state.nb_cols!==t,a=(this.current_state.nb_cols-1)*s>=t,r=(this.current_state.nb_cols-2)*s>=t;if(this.list_cont.empty().toggleClass("single-not-full-line",o),0===t)return this.list_cont.append($(i.render(d,{no_result:n.__("search.no_result")}))),!1;count=0;for(var l=0;l<s;l++)for(var u=0;u<this.current_state.nb_cols;u++){var c=l+u*s;if(count++,c<t){!o&&a&&count%this.current_state.nb_cols==1&&(r?this.list_cont.append(this.empty_list_elem.clone()):this.list_cont.append(this.empty_half_list_elem.clone()));var f=e[c].elem.clone();"function"==typeof e[c].a_click&&f.find("a").on("click",e[c].a_click),this.list_cont.append(f)}else o||(a&&count%this.current_state.nb_cols==0?r||this.list_cont.append(this.empty_half_list_elem.clone()):this.list_cont.append(this.empty_list_elem.clone()))}},set_simple_list_elem:function(e,t,i,n){var s=this,o=function(){var o=$(s.get_simple_list_elem());o.prop("id",t),o.addClass(i),$(e).append(o),s.init_simple_list_elem_search(o),n()};this.toExWhenInit.push(o),this.init()},get_simple_list_elem:function(){var e=this.get_ordered_list_elems("all"),t="";for(var n in e)t+=i.render(l,e[n]);return i.render(r,{simple_contener:!0,list:t})},init_simple_list_elem_search:function(e){var t=$(e).find(".filter input").first(),i=$(e).find(".filter .clear").first(),n=$(e).find("ul").first();if(0===t.length||0===i.length||0===n.length)return!1;var s=this,o=function(){var e=t.prop("value");e!==t.data("last-update")&&(t.data("last-update",e),s.update_simple_list_elem(n,e))};t.on("change blur focus paste input",o),t.on("keydown",function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation()),o()}),t.on("keyup",function(e){27===e.keyCode&&t.prop("value").length>0&&(e.preventDefault(),e.stopPropagation(),s.filter_inp.prop("value","")),o()}),i.on("click",function(){t.prop("value",""),o()})},update_simple_list_elem:function(e,s){if(e=$(e),0===e.length)return!1;s="string"==typeof s&&t.accentsTidy(s);var o=s?this.get_ordered_list_elems("search",s):this.get_ordered_list_elems("all");if(list_html="",0===o.length)list_html=i.render(d,{no_result:n.__("search.no_result")});else for(var a in o)list_html+=i.render(l,o[a]);e.html($(list_html))},toggle_show_all:function(e,t){this.current_state.show_all="boolean"==typeof e?e:!this.current_state.show_all,this.current_state.show_all&&(this.filter_inp.prop("value",""),this.update_search(!0)),t||this.update_popup()}},new c}),define("skins/common/design/big_ui",["skins/common/basic_feature"],function(e){var t=function(){this.oFeature=new e(e.S_F_REGULAR_UI)};return t.prototype={isEnabled:function(){return this.oFeature.isEnabled()},toggle:function(e){this.oFeature.toggle(function(t){$("html").toggleClass("big-ui",!t),"function"==typeof e&&e(t),"object"==typeof html5player&&"function"==typeof html5player.redraw&&html5player.redraw(),setTimeout(function(){$(window).trigger("resize")},500)})}},new t}),define("text!skins/default/header/theme_switcher.mustache",[],function(){return'<ul id="theme-switcher-list">\n\t{{#themes}}\n\t\t<li><span class="btn" data-mode="{{ mode }}">{{ name }}</span></li>\n\t{{/themes}}\n</ul>'}),define("skins/default/header/theme_switcher",["config/main","static/utils","lib/i18n!front","skins/common/basic_feature","mustache","text!skins/default/header/theme_switcher.mustache"],function(e,t,i,n,s,o){var a=function(){this.bGetSettingsBtn=!1,this.bIsOldIE="undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent),this.bIsDisabled=!1,this.bIsDev=!!e.is_dev,this.aBtns=[],this.oTimerSwitchAuto=null,this.sThemeCookie="session_ath",this.sThemeStorage="user_theme_fav";var t=this,i=function(){"object"==typeof xv.disclaimer&&xv.disclaimer.bIsOpen||!n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)||t.initModeAuto()};i(),"object"==typeof xv.disclaimer&&xv.disclaimer.bIsOpen&&document.addEventListener(xv.disclaimer.EVENT.CLOSE_POP,i),this.initMainSoloBtn()};return a.prototype={initModeAuto:function(){return"undefined"==typeof e.dyn.ui||"undefined"==typeof e.dyn.ui.theme?void this.setThemeWebsite("light"):(this.setThemeReference(),this.getThemeStorage(),this.getThemeWebsite(),"matchMedia"in window&&"manual"!==this.oThemeStorage.m&&(this.setThemeBrowser(),"black"===this.getThemeBrowser()&&"auto"!==this.oThemeStorage.m&&(this.setModeAuto(!1),this.getThemeWebsite()!==this.getThemeBrowser()))?void this.switchTheme(this.getThemeBrowser()):void("auto"===e.dyn.ui.theme?(this.setModeAuto(!0),this.initModeAutoByHour()):(this.setModeAuto(!1),this.setThemeWebsite(e.dyn.ui.theme),e.dyn.ui.theme!==this.oThemeStorage.i?this.switchTheme(this.getThemeWebsite()):this.setThemeStorage())))},initModeAutoByHour:function(){this.oTimer!==undefined&&clearTimeout(this.oTimer),this.getThemeWebsite()!==this.getThemeReference()?this.switchTheme(this.getThemeReference()):null!==this.oThemeStorage.i&&this.oThemeStorage.i!==this.getThemeReference()?(this.setThemeWebsite(this.oThemeStorage.i),this.switchTheme(this.getThemeReference())):this.setThemeStorage();var e=this.getDelayAutoSwitch(),t=this;e>0&&(this.oTimer=setTimeout(function(){t.setCurrentHour(),t.setThemeReference(),t.setDelayAutoSwitch(),t.initModeAutoByHour()},e))},setThemeReference:function(){this.getCurrentHour()>=0&&this.getCurrentHour()<=6||this.getCurrentHour()>=21&&this.getCurrentHour()<=23?this.sThemeReference="black":this.sThemeReference="light"},setThemeWebsite:function(e){this.sThemeWebsite=e},setThemeBrowser:function(){this.bMatchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.sThemeBrowser=this.bMatchMedia.matches?"black":"light"},setModeAuto:function(e){this.bModeAuto=e},setThemeStorage:function(){var e=xv.storage.get(this.sThemeStorage),t=(new Date).getTime();if(!n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)||null!==e&&"number"==typeof e.t&&t>e.t)return null!==xv.cookies.get(this.sThemeCookie)&&xv.cookies.removeLocal(this.sThemeCookie,"/"),void xv.storage.remove(this.sThemeStorage);"boolean"!=typeof this.isModeAuto()&&this.setModeAuto(!1);this.oThemeStorage={i:this.getThemeWebsite(),m:this.isModeAuto()?"auto":"manual",t:t+7776e6},xv.storage.set(this.sThemeStorage,this.oThemeStorage),xv.cookies.setLocal(this.sThemeCookie,this.getThemeWebsite(),7776e6,"/")},setCurrentHour:function(){var e=new Date;this.iCurrentHour=e.getHours()},setDelayAutoSwitch:function(){var e,t=new Date,i=t.getTime(),n=i+6e4*t.getTimezoneOffset()-i%864e5,s=[7,0,0],o=[21,0,0];e=t.getHours()<7?n+36e5*s[0]+6e4*s[1]+1e3*s[2]-i:t.getHours()>=7&&t.getHours()<21?n+36e5*o[0]+6e4*o[1]+1e3*o[2]-i:n+864e5+36e5*s[0]+6e4*s[1]+1e3*s[2]-i,this.iAutoSwitchHour=e},getThemeReference:function(){return this.sThemeReference},getThemeWebsite:function(){return"undefined"==typeof this.sThemeWebsite&&("undefined"==typeof this.oThemeStorage||null===this.oThemeStorage.i?this.setThemeWebsite("undefined"!=typeof e.dyn.ui&&"string"==typeof e.dyn.ui.theme?e.dyn.ui.theme:"light"):this.setThemeWebsite(this.oThemeStorage.i)),this.sThemeWebsite},getThemeBrowser:function(){return this.sThemeBrowser},getThemeList:function(){var a=[{name:t.unescape(i.__("theme.dark")),mode:"black"},{name:t.unescape(i.__("theme.light")),mode:"light"}];"matchMedia"in window&&"undefined"!=typeof e.dyn.ui&&"undefined"!=typeof e.dyn.ui.theme&&n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)&&a.push({name:t.unescape(i.__("theme.automatic")),mode:"auto"});var r=$('<div class="theme-switcher">'+s.render(o,{themes:a})+"</div>");return this.setClassCurrent(r.find(".btn")),r},isModeAuto:function(){return"undefined"==typeof this.bModeAuto&&("auto"===e.dyn.ui.theme?this.setModeAuto(!0):this.setModeAuto(!1)),this.bModeAuto},getThemeStorage:function(){this.oThemeStorage=xv.storage.get(this.sThemeStorage),null===this.oThemeStorage&&(this.oThemeStorage={i:null,m:null,t:null})},getCurrentHour:function(){return"undefined"==typeof this.iCurrentHour&&this.setCurrentHour(),this.iCurrentHour},getDelayAutoSwitch:function(){return"undefined"==typeof this.iAutoSwitchHour&&this.setDelayAutoSwitch(),this.iAutoSwitchHour},switchTheme:function(t){if(!0!==this.bIsDisabled){this.bIsDisabled=!0,this.disableBtns();var i=this,n=this.isModeAuto()?"/switch-theme/auto?no_redirect=1":"/switch-theme/"+t+"?no_redirect=1",s=function(){i.updateBtn(a),i.updateLogo(t),i.enableBtns(),i.setThemeWebsite(t),i.setThemeStorage()},o=function(){i.bIsDisabled=!1,$(".listing-settings-popup").removeClass("show-theme")},a=t;if((void 0===t||"auto"===t||t===this.getThemeWebsite())&&("auto"===t&&(a="auto",t=this.getThemeReference()),this.getThemeWebsite()===this.getThemeReference()))return void $.ajax({type:"POST",url:n,success:s,complete:o});var r=$("style.ajax-loaded"),l=$("link#xvstyles"),d=$("link#xvstylesspec"),u=0===window.location.pathname.split("#")[0].indexOf("/account"),c=u?"account":"main",f=r.length<1?l.attr("href"):r.attr("data-href"),h=[],p=[];if(this.bIsDev)var _=f.split("css/")[0]+"css/"+e.sitename+"/";switch(t){case"black":this.bIsDev?(h.push(_+c+"-black-base.css"),h.push(_+c+"-black-specific.css")):(h.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.ab:e.dyn.thvers.mb)+"/v3/css/"+e.sitename+"/"+c+"-black-base.css"),h.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.abs:e.dyn.thvers.mbs)+"/v3/css/"+e.sitename+"/"+c+"-black-specific.css"));break;case"light":this.bIsDev?h.push(_+c+".css"):h.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.a:e.dyn.thvers.m)+"/v3/css/"+e.sitename+"/"+c+".css")}var g=function(){var e=null;r.length>0&&(e=$("style.ajax-loaded")),p.sort(function(e,t){var i=h.indexOf(e.path),n=h.indexOf(t.path);return i<n?-1:i>n?1:0});for(var t in p)$('<style class="ajax-loaded" data-href="'+p[t].path+'"></style>').html(p[t].css).appendTo("head");r.length<1?(l.remove(),d.remove()):e.remove(),$.ajax({type:"POST",url:n,success:s,complete:o})};for(var m in h)!function(e){$.get(e,function(t){p.push({path:e,css:t.replace(/url\((\'|\")?\./g,"url($1"+f.substring(0,f.lastIndexOf("/")+1)+".").replace(/url\((\'|\")?\//g,"url($1"+xv.conf.domains["static"]+"/")}),p.length===h.length&&g()})}(h[m])}},canInit:function(){return!this.bIsOldIE},updateBtn:function(e){var n;n="auto"===e?i.__("theme.automatic"):"light"===e?i.__("theme.light"):i.__("theme.dark"),$(".site-settings").find(".theme-label").text(t.unescape(n))},updateLogo:function(e){var t="light"===e?"white":"black",i="light"===e?"black":"white";$("#site-logo, .site-logo-with-theme-color").each(function(){var e=$(this).attr("src").replace(t,i);$(this).attr("src",e)})},disableBtns:function(){for(var e=0;e<this.aBtns.length;e++)$Btn=this.aBtns[e],$Btn.length&&$Btn.addClass("isLoading").prop("disabled",!0)},enableBtns:function(){for(var e=0;e<this.aBtns.length;e++)$Btn=this.aBtns[e],$Btn.length&&$Btn.removeClass("isLoading").prop("disabled",!1)},getSettingsBtn:function(e){this.bGetSettingsBtn=!0;var n;return n=this.isModeAuto()?i.__("theme.automatic"):"light"===this.getThemeWebsite()?i.__("theme.light"):i.__("theme.dark"),this.sBtn=(e?"":'<button type="button">')+'<span class="icon-f icf-theme-switch"></span> '+t.unescape(i.__("theme.colors"))+' <strong class="theme-label">'+t.unescape(n)+"</strong>"+(e?"":"</button>"),this.sBtn},initChoiceBtn:function(e){if(this.canInit()){e=$(e);var t=this;e.off("click").on("click",function(i){i.preventDefault(),e.closest("li").removeClass("current");var n=$(i.currentTarget),s=n.data("mode"),o=!0;"auto"===s?t.isModeAuto()?o=!1:t.setModeAuto(!0):("undefined"==typeof t.oThemeStorage&&t.getThemeStorage(),"manual"===t.oThemeStorage.m&&s===t.getThemeWebsite()?o=!1:t.setModeAuto(!1)),o?(t.switchTheme(s),n.closest("li").addClass("current")):$(".listing-settings-popup").removeClass("show-theme")}),this.aBtns.push(e)}},setClassCurrent:function(e){var t=this.isModeAuto()?"auto":this.getThemeWebsite();e.each(function(){var e=$(this);e.closest("li").toggleClass("current",e.data("mode")===t)})},initMainSoloBtn:function(){if(!this.bIsMainSoloBtnInit){this.bIsMainSoloBtnInit=!0;var e=$("#site-theme-switch");if(e.length){var t=this;require(["lib/helpers/popup","mustache","text!skins/default/header/theme_switcher.mustache"],function(i){t.oPopup=new i(e,"",{popup_class:"listing-settings-popup in-header",autoclose:!0,mouseout_autoclose:5e3}),xv.menus&&(t.oPopup.iAllMenuId=xv.menus.addClose(function(){t.oPopup.close()})),t.oPopup.onOpen=function(){xv.menus&&xv.menus.closeAll(t.oPopup.iAllMenuId),t.oPopup.setContent(t.getThemeList());var e=$("#theme-switcher-list").find(".btn");t.initChoiceBtn(e)}})}}}},a}),define("skins/common/listing/settings",["config/main","static/cookies","static/dom","static/utils","static/log","lib/helpers/popup","lib/helpers/thumbs_rotator","lib/i18n!front","skins/common/suggests/suggests_manager","skins/common/history/page_view_history","skins/common/geo_switch/geo_switch","skins/common/main_cats/switcher","skins/common/design/big_ui","skins/common/basic_feature","skins/common/currency_switch/switcher","skins/common/form/login/clear_data","skins/default/video/watch_later","skins/default/mozaique/thumb_block_viewed","skins/default/header/theme_switcher","mustache","text!lib/helpers/popup/language_switcher.mustache","text!skins/default/header/theme_switcher.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D){var C=function(){if("default"===e.sitename||"elitmovie"===e.sitename?(this.$SiteSettings=$("header .head__btn--settings"),this.$SiteLanguage=$("#site-language"),this.$SiteLocalisation=$("#site-localisation"),this.$SiteMainCat=$("#site-main-cat"),this.$SiteThemeSwitch=$("#site-theme-switch")):this.$SiteSettings=$("#site-settings"),this.$Container=$("#listing-settings"),this.initDevActionInMenuFallBack(),0!==this.$SiteSettings.length||0!==this.$Container.length){this.oPopup=!1,"default"===e.sitename&&(this.oThemeSwitcher=new b),this.aHighlight=!1,this.iHighlightInterval=300,this.bDontCloseAllMenus=!1,this.setButtons(),this.nb_vids_btn_params="xnxx"===e.sitename?this.nb_vids_xnxx_btn_params.nb_vids_per_row_btn_params:this.nb_vids_default_btn_params.nb_vids_per_row_btn_params,this.nb_vids_btn_list="xnxx"===e.sitename?this.nb_vids_xnxx_btn_params.nb_vids_per_row_btn_list:this.nb_vids_default_btn_params.nb_vids_per_row_btn_list;var t=this;if(this.$SiteSettings.length>0)this.oPopup=new o(this.$SiteSettings,"",{popup_class:"listing-settings-popup in-header",autoclose:!0,mouseout_autoclose:5e3}),this.oPopup.iAllMenuId=xv.menus.addClose(function(){t.oPopup.close()}),this.oPopup.onOpen=function(){t.bDontCloseAllMenus||xv.menus.closeAll(t.oPopup.iAllMenuId),t.bDontCloseAllMenus=!1,t.oPopup.setContent(t.get_popup_content()),t.oPopup.position(),t.hide_lang(),t.hide_main_cat(),t.hide_theme(),$("body").addClass("header-site-settings-menu-opened")},this.oPopup.onClose=function(){$("body").removeClass("header-site-settings-menu-opened")},this.$SiteSettings.addClass("init-ok"),this.$Container.length>0&&(this.$Container.children("button,a,.btn").on("click",function(e){e.stopPropagation(),t.oPopup.toggle()}),this.$Container.addClass("init-ok"));else if(this.$Container.length>0){var n=this.$Container.children("button,a,.btn"),s=n.parents("#page");0===s.length&&(s=$("body")),this.oPopup=new o(n,"",{relative_to:s,trigger:"click mouseclick",popup_class:"listing-settings-popup under-header",autoclose:!0,autoclose_on_same_level:"header_menu",mouseout_autoclose:5e3,offset:{below:-5,above:0,left:0,right:1}}),this.oPopup.iAllMenuId=xv.menus.addClose(function(){t.oPopup.close()}),this.oPopup.onOpen=function(){t.bDontCloseAllMenus||xv.menus.closeAll(t.oPopup.iAllMenuId),t.bDontCloseAllMenus=!1,t.oPopup.setContent(t.get_popup_content()),t.oPopup.position(),t.hide_lang(),t.hide_main_cat(),t.hide_theme()},this.$Container.addClass("init-ok")}xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.openChatSettings=function(){i.isElementInView(t.$SiteSettings)||$("html,body").scrollTop(0),t.oPopup&&setTimeout(function(){t.bDontCloseAllMenus=!0,t.aHighlight=["main_cat_alert","chat_notif"],t.oPopup.close(),t.oPopup.open()},50)}}};return C.prototype={nb_vids_default_btn_params:{nb_vids_per_row_btn_list:[{"function":"get_nb_vids_btn",size:"xs"},{"function":"get_nb_vids_btn",size:"sm"},{"function":"get_nb_vids_btn",size:"lg"},{"function":"get_nb_vids_btn",size:"xlg"}],nb_vids_per_row_btn_params:{xs:{icf:"device-mobile","class":"mobile-only-show-list-item",nbs:window.xv.thumbs.nb_by_cols.xs.nbs||[1],"default":parseInt(window.xv.thumbs.nb_by_cols.xs["default"])||1,setted:window.xv.thumbs.nb_by_cols.xs.setted||!1},sm:{icf:"device-tablet","class":"mobile-show-list-item mobile-only-hide",nbs:window.xv.thumbs.nb_by_cols.sm.nbs||[3],"default":parseInt(window.xv.thumbs.nb_by_cols.sm["default"])||3,setted:window.xv.thumbs.nb_by_cols.sm.setted||!1},lg:{icf:"device-desktop","class":"mobile-hide device-xlg-hide",nbs:window.xv.thumbs.nb_by_cols.lg.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.lg["default"])||4,setted:window.xv.thumbs.nb_by_cols.lg.setted||!1},xlg:{icf:"device-desktop","class":"device-xlg-show",nbs:window.xv.thumbs.nb_by_cols.xlg.nbs||[5],"default":parseInt(window.xv.thumbs.nb_by_cols.xlg["default"])||5,setted:window.xv.thumbs.nb_by_cols.xlg.setted||!1}}},nb_vids_xnxx_btn_params:{nb_vids_per_row_btn_list:[{"function":"get_nb_vids_btn",size:"xs"},{"function":"get_nb_vids_btn",size:"sm"},{"function":"get_nb_vids_btn",size:"md"},{"function":"get_smaller_vids_btn",size:"lg"},{"function":"get_bigger_vids_btn",size:"lg"}],nb_vids_per_row_btn_params:{xs:{icf:"device-mobile","class":"mobile-only-show",nbs:window.xv.thumbs.nb_by_cols.xs.nbs||[1],"default":parseInt(window.xv.thumbs.nb_by_cols.xs["default"])||1,setted:window.xv.thumbs.nb_by_cols.xs.setted||!1},sm:{icf:"device-tablet","class":"sm-col-only-show",nbs:window.xv.thumbs.nb_by_cols.sm.nbs||[3],"default":parseInt(window.xv.thumbs.nb_by_cols.sm["default"])||3,setted:window.xv.thumbs.nb_by_cols.sm.setted||!1},md:{icf:"device-tablet","class":"md-col-only-show",nbs:window.xv.thumbs.nb_by_cols.md.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.md["default"])||4,setted:window.xv.thumbs.nb_by_cols.md.setted||!1},lg:{"class":"lg-col-only-show",nbs:window.xv.thumbs.nb_by_cols.lg.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.lg["default"])||4,setted:window.xv.thumbs.nb_by_cols.lg.setted||!1}}},setButtons:function(){this.buttons=[];for(var t in e.dyn.ls.buttons){var i=e.dyn.ls.buttons[t];this.buttons.push(i)}},get_popup_content:function(){this.setButtons();var t,i=$('<div class="site-settings"></div>'),n=$("<ul>"),s=null;for(var o in this.buttons){var a=this.buttons[o],r=a.name,l=this.aHighlight&&!1!==this.aHighlight.indexOf(r);if("sep"!==s||"sep"!==r)switch(r){case"nb_vids_per_row":for(var d in this.nb_vids_btn_list)n.append(this[this.nb_vids_btn_list[d]["function"]](this.nb_vids_btn_list[d].size)),s=r;break;case"video_preview":n.append(this.get_pv_btn()),s=r;break;case"watch_later":"default"===e.sitename&&(n.append(this.get_watch_later_toggle_btn()),s=r);break;case"viewed_icon":"default"===e.sitename&&(n.append(this.get_viewed_icon_toggle_btn()),s=r);break;case"suggests":"xnxx"!==e.sitename&&"default"!==e.sitename||(n.append(this.get_suggests_toggle_btn()),s=r);break;case"switch_theme":"default"===e.sitename&&(this.$SiteThemeSwitch&&this.$SiteThemeSwitch.length&&this.$SiteThemeSwitch.is(":visible")||(n.append(this.get_theme_toggle_btn()),i.append(this.get_theme_list()),s=r));break;case"language":"xnxx"!==e.sitename&&"default"!==e.sitename&&"elitmovie"!==e.sitename||this.$SiteLanguage&&this.$SiteLanguage.length&&this.$SiteLanguage.is(":visible")||(n.append(this.get_language_btn()),i.append(this.get_language_list()),s=r);break;case"currency":"xnxx"!==e.sitename&&"default"!==e.sitename&&"elitmovie"!==e.sitename||(n.append(this.get_currency_switch_btn()),i.append(this.get_currency_list()),s=r);break;case"history":"default"===e.sitename&&(n.append(this.get_history_switch_btn()),s=r);break;case"version":"xnxx"!==e.sitename&&"default"!==e.sitename&&"elitmovie"!==e.sitename||this.$SiteLocalisation&&this.$SiteLocalisation.length&&this.$SiteLocalisation.is(":visible")||(n.append(this.get_version_switch_btn()),s=r);break;case"main_cat":this.$SiteMainCat&&this.$SiteMainCat.length&&this.$SiteMainCat.is(":visible")||(n.append(this.get_main_cat_switch_btn()),i.append(this.get_main_cat_list()),s=r);break;case"main_cat_alert":n.append(this.get_main_cat_alert_switch_btn(l)),s=r;break;case"chat_notif":n.append(this.get_notifications_switch_btn(l)),s=r;break;case"auto_translate_title":n.append(this.get_auto_translate_title_switch_btn()),s=r;break;case"big_ui":n.append(this.get_big_ui_btn()),s=r;break;case"title_ui":n.append(this.get_ui_title()),s=r;break;case"title_account":n.append(this.get_account_title()),s=r;break;case"dev":n.append(this.get_dev_button(a)),i.append(this.get_dev_menu(a)),s=r;break;case"link_videos_like":t=this.get_videos_like_link(a),t&&(n.append(t),s=r);break;case"link_my_subs":t=this.get_my_subs_link(a),t&&(n.append(t),s=r);break;case"link_history":t=this.get_history_link(a),t&&(n.append(t),s=r);break;case"link_watch_later":t=this.get_watch_later_link(a),t&&(n.append(t),s=r);break;case"link_playlists":t=this.get_playlist_link(a),t&&(n.append(t),s=r);break;case"link":case"link_dash":t=this.get_link(a),t&&(n.append(t),s=r);break;case"logout":t=this.get_logout_link(a),t&&(n.append(t),s=r);break;case"link_log_as_menu":t=this.get_log_as_menu_link(a);var u=this.get_log_as_menu(a);t&&u&&(n.append(t),i.append(u),s=r);break;case"sep":n.append(this.get_sep()),s=r}}return i.prepend(n),this.aHighlight=!1,i},is_smallest_col_qtt:function(e,t){return t===this.nb_vids_btn_params[e].nbs[0]},is_biggest_col_qtt:function(e,t){var i=this.nb_vids_btn_params[e].nbs;return t===i[i.length-1]},set_nb_vids_next_qtt:function(e,t,i,n){var s,o=this.nb_vids_btn_params[e].nbs,a=!1;for(var r in o)if($("html").hasClass("nb-thumbs-cols-"+e+"-"+o[r])){if(a=o[r],t)return a;$("html").removeClass("nb-thumbs-cols-"+e+"-"+a)}return!a&&(a=this.nb_vids_btn_params[e]["default"],t)?a:(a=parseInt(a),s=!1!==i?this.is_biggest_col_qtt(e,a)?!1!==n?o[0]:a:o[o.indexOf(a)+1]:this.is_smallest_col_qtt(e,a)?!1!==n?o[o.length-1]:a:o[o.indexOf(a)-1],$("html").addClass("nb-thumbs-cols-"+e+"-"+s).trigger("col-changed"),s)},save_nb_for_size:function(e,i){if(t.setLocal("nb_thumbs_cols_"+e,i,7776e7,"/"),"xs"!==e&&"sm"!==e&&"md"!==e||0===$("html,body").scrollTop()||this.closeSettingsPopups(),document.body){var n;document.createEventObject?(n=document.createEventObject(),document.body.fireEvent("settings_nb_thumbs_changed",n)):(n=document.createEvent("HTMLEvents"),n.initEvent("settings_nb_thumbs_changed",!0,!0),document.body.dispatchEvent(n))}},get_smaller_vids_btn:function(e){var t=this,i=function(e){return"<span"+(t.is_biggest_col_qtt(e,t.set_nb_vids_next_qtt(e,!0))?' class="disabled"':"")+'><span class="icon-f icf-search-minus"></span> '+r.__("listing.smaller_thumbnails")+"</span>"},n=$('<button type="button">'+i(e)+"</button>");return n.on("click",function(s){s.preventDefault();var o=t.set_nb_vids_next_qtt(e,!1,!0,!1);n.html(i(e)),t.is_smallest_col_qtt(e,o)||n.parents("ul").find(".bigger-"+e+"-col-thumbs .disabled").removeClass("disabled"),t.save_nb_for_size(e,o)}),$('<li class="ui smaller-'+e+"-col-thumbs "+this.nb_vids_btn_params[e]["class"]+'"></li>').append(n)},get_bigger_vids_btn:function(e){var t=this,i=function(e){return"<span"+(t.is_smallest_col_qtt(e,t.set_nb_vids_next_qtt(e,!0))?' class="disabled"':"")+'><span class="icon-f icf-search-plus"></span> '+r.__("listing.bigger_thumbnails")+"</span>"},n=$('<button type="button">'+i(e)+"</button>");return n.on("click",function(s){s.preventDefault();var o=t.set_nb_vids_next_qtt(e,!1,!1,!1);n.html(i(e)),t.is_biggest_col_qtt(e,o)||n.parents("ul").find(".smaller-"+e+"-col-thumbs .disabled").removeClass("disabled"),t.save_nb_for_size(e,o)}),$('<li class="ui bigger-'+e+"-col-thumbs "+this.nb_vids_btn_params[e]["class"]+'"></li>').append(n)},get_nb_vids_btn:function(e){
var t=this,i=function(e,t){return'<span class="icon-f icf-'+e+'"></span> '+(1===t?r.__("listing.one_column"):100===t?r.__("listing.detailed"):r.__("listing.nb_columns",{"%nb%":t.toString()}))},n=this.nb_vids_btn_params[e].icf,s=$('<button type="button">'+i(n,this.set_nb_vids_next_qtt(e,!0))+"</button>");return s.on("click",function(o){o.preventDefault();var a=t.set_nb_vids_next_qtt(e);s.html(i(n,a)),t.save_nb_for_size(e,a)}),$('<li class="ui '+this.nb_vids_btn_params[e]["class"]+'"></li>').append(s)},get_checkbox_toggle:function(t){return"default"!==e.sitename?"":'<span class="checkbox toggle no-label w-28"><input type="checkbox"'+(t?' checked="checked"':"")+"><label></label></span>"},get_watch_later_toggle_btn:function(){var e=this,t=function(t){return e.get_checkbox_toggle(t)+'<span class="icon-f icf-clock'+(t?"":" icf-red-crossed")+'"></span> '+r.__("video.watch_later_btn_"+(t?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=$('<li class="ui"></li>'),n=$('<button type="button"></button>').appendTo(i),s=function(){n.html(t(g.is_feature_enabled()))};return xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.update_watch_later_toggle_btn=s,s(),n.on("click",function(e){e.preventDefault(),g.toggle_feature(function(){xv.settings_btn.update_watch_later_toggle_btn()})}),i},get_viewed_icon_toggle_btn:function(){var e=this,t=function(t){return e.get_checkbox_toggle(t)+'<span class="icon-f icf-eye'+(t?"":" icf-red-crossed")+'"></span> '+r.__("video.viewed_indic_"+(t?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=$('<li class="ui"></li>'),n=$('<button type="button"></button>').appendTo(i),s=function(){n.html(t(m.is_feature_enabled()))};return xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.update_viewed_icon_toggle_btn=s,s(),n.on("click",function(e){e.preventDefault(),m.toggle_feature(function(){xv.settings_btn.update_viewed_icon_toggle_btn()})}),i},get_language_btn:function(){var t=$("<li></li>"),i=$('<button type="button" class="language-switch"><span class="flag-small flag-'+e.dyn.locale_flag+'"></span> '+r.__("language")+" : <strong>"+e.dyn.locale_trsl+"</strong></button>"),n=this;return i.on("click",function(){n.show_lang()}),t.append(i),t},get_language_list:function(){var t=[],i=this;for(var n in e.data.other_locales)t.push({url:"/change-language/"+n,country:e.data.other_locales[n].country.toLowerCase(),name:e.data.other_locales[n].translated});var s=$('<div class="language-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>'+v.render(y,{languages:t})+"</div>");return s.find(".back").on("click",function(){i.hide_lang()}),s},get_theme_toggle_btn:function(){var e=$('<li class="ui"></li>'),t=$(this.oThemeSwitcher.getSettingsBtn()),i=this;return t.on("click",function(){i.show_theme()}),e.append(t),e},get_theme_list:function(){var t=this,i=[{name:n.unescape(r.__("theme.dark")),mode:"black"},{name:n.unescape(r.__("theme.light")),mode:"light"}];"matchMedia"in window&&"undefined"!=typeof e.dyn.ui&&"undefined"!=typeof e.dyn.ui.theme&&h.IS_ENABLED(h.S_F_COOKIES_FUNCTIONALITY)&&i.push({name:n.unescape(r.__("theme.automatic")),mode:"auto"});var s=$('<div class="theme-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>'+v.render(D,{themes:i})+"</div>");return this.oThemeSwitcher.setClassCurrent(s.find(".btn")),s.find(".back").on("click",function(){t.hide_theme()}),s},show_lang:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-lang")},hide_lang:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-lang")},show_theme:function(){if(!1!==this.oPopup&&this.oPopup.isOpened()){this.oPopup.popup.addClass("show-theme");var e=$("#theme-switcher-list").find(".btn");this.oThemeSwitcher.initChoiceBtn(e)}},hide_theme:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-theme")},show_log_as:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-log-as")},hide_log_as:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-log-as")},get_suggests_toggle_btn:function(){var t=this,i=$("<li></li>");return $('<button type="button">'+function(i){return t.get_checkbox_toggle(i)+'<span class="icon-f icf-suggest-square'+(i?"":" icf-red-crossed")+'"></span> '+("default"===e.sitename&&"main"===e.data.action?r.__("subscriptions.show_on_homepage"):r.__(i?"suggest.enabled":"suggest.disabled",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"}))}(l.is_feature_enabled())+"</button>").appendTo(i).on("click",function(t){t.preventDefault(),"default"===e.sitename&&"main"===e.data.action&&l.is_feature_enabled()?l.toggle_feature(!1,{sConfirmTxt:r.__("suggest.this_will_disable")}):l.toggle_feature(!l.is_feature_enabled())}),i},get_history_switch_btn:function(){var e=this,t=$("<li></li>");return $('<button type="button">'+function(t){return e.get_checkbox_toggle(t)+'<span class="icon-f icf-history'+(t?"":" icf-red-crossed")+'"></span> '+r.__(t?"history.enabled":"history.disabled",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})}(d.isTracking())+"</button>").appendTo(t).on("click",function(e){e.preventDefault(),d.isTracking()?d.stopTracking(function(){$("html,body").scrollTop(0),window.location.reload()}):d.startTracking(function(){$("html,body").scrollTop(0),window.location.reload()})}),t},get_version_switch_btn:function(){var t=$("<li></li>");return $('<button type="button">'+function(){return'<span class="flag-small flag-'+e.dyn.version_flag+'"></span> '+("xnxx"===e.sitename?r.__("misc.content"):r.__("country"))+" : <strong>"+e.dyn.version_trsl+"</strong>"}()+"</button>").appendTo(t).on("click",function(e){e.preventDefault(),u.auto_show_popup()}),t},get_currency_switch_btn:function(){var e=$("<li></li>"),t=$('<button class="currency-switch-btn" type="button">'+function(){var e=p.getCurrentCurrencyShortLabel();return"<span class='icon-f icf-money'></span> "+r.__("misc.payment_currency")+" : <strong>"+e+"</strong>"}()+"</button>"),i=this;return t.on("click",function(){i.show_currency()}),e.append(t),e},get_currency_list:function(){var e=this,t=$('<div class="currency-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button></div>');return t.find(".back").on("click",function(){e.hide_currency()}),t.append(p.getCurrencyBtns(function(){window.location.reload()})),t},show_currency:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-currency")},hide_currency:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-currency")},get_main_cat_switch_btn:function(){var e=$("<li></li>"),t=$('<button type="button">'+function(){var e=c.getSettingsCat();return e.picto+" "+r.__("categories.category")+" : <strong>"+e.name+"</strong>"}()+"</button>"),i=this;return t.on("click",function(){i.show_main_cat()}),e.append(t),e},get_main_cat_list:function(){var e=this,t=$('<div class="main-cat-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button></div>');return t.find(".back").on("click",function(){e.hide_main_cat()}),t.append(c.getPopupContent()),t},show_main_cat:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-main-cat")},hide_main_cat:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-main-cat")},get_notifications_switch_btn:function(e){if("function"!=typeof xv.get_messages_toggle_feature)return $("");var t=this,i=function(e){return t.get_checkbox_toggle(e)+'<span class="icon-f icf-bell'+(e?"":" icf-red-crossed")+'"></span> '+r.__("chat.settings.notifications."+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},n=$("<li></li>"),s=$('<button type="button">'+i(xv.get_messages_feature_enabled())+"</button>").appendTo(n);return s.on("click",function(e){e.preventDefault(),xv.get_messages_toggle_feature(function(){s.html(i(xv.get_messages_feature_enabled()))})}),e&&this.setBtnToHighlight(s),n},get_auto_translate_title_switch_btn:function(){var e=this,t=function(t){return e.get_checkbox_toggle(t)+'<span class="icon-f icf-refresh'+(t?"":" icf-red-crossed")+'"></span> '+r.__("video.auto_title_translation_feature."+(t?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=new h(h.S_F_AUTO_TITLE_TRANSLATE),n=$("<li></li>"),s=$('<button type="button">'+t(i.isEnabled())+"</button>").appendTo(n);return s.on("click",function(e){e.preventDefault(),i.toggle(function(){s.html(t(i.isEnabled())),window.location.reload()})}),n},get_main_cat_alert_switch_btn:function(e){var t=this,i=function(e){return t.get_checkbox_toggle(e)+'<span class="icon-f icf-bell'+(e?"":" icf-red-crossed")+'"></span> '+r.__("main_cats.cat_chang_alert."+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},n=$("<li></li>"),s=$('<button type="button">'+i(c.isFeatureEnabled())+"</button>").appendTo(n);return s.on("click",function(e){e.preventDefault(),c.toggleFeature(function(){s.html(i(c.isFeatureEnabled()))})}),e&&this.setBtnToHighlight(s),n},get_big_ui_btn:function(){var e=this,t=function(){var t=!f.isEnabled();return e.get_checkbox_toggle(t)+'<span class="icon-f icf-search-plus'+(t?"":" icf-red-crossed")+'"></span> '+r.__("misc.big_ui")},i=$('<li class="ui"></li>'),n=$('<button type="button">'+t()+"</button>").appendTo(i);return n.on("click",function(e){e.preventDefault(),f.toggle(function(){n.html(t())})}),i},get_pv_btn:function(){var e=this,t=function(t){return e.get_checkbox_toggle(t)+'<span class="icon-f icf-play-rectangle'+(t?"":" icf-red-crossed")+'"></span> '+r.__(t?"listing.disable_pv":"listing.enable_pv",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=new h(h.S_F_VIDEO_PREVIEW),n=$("<li></li>"),s=$('<button type="button">'+t(i.isEnabled())+"</button>").appendTo(n);return s.on("click",function(e){e.preventDefault(),i.toggle(function(){s.html(t(i.isEnabled())),window.location.reload()})}),n},get_ui_title:function(){return $('<li class="title"><span class="icon-f icf-paint-brush"></span> '+r.__("misc.ui_long")+"</li>")},get_account_title:function(){return $('<li class="title"><span class="icon-f icf-user"></span> '+r.__("misc.account")+"</li>")},get_videos_like_link:function(e){return this.get_link(e)},get_my_subs_link:function(e){return this.get_link(e)},get_history_link:function(e){return!!d.isTracking()&&this.get_link(e)},get_watch_later_link:function(e){return!!g.is_feature_enabled()&&this.get_link(e)},get_playlist_link:function(e){return!!g.is_feature_enabled()&&this.get_link(e)},get_logout_link:function(e){var t=this.get_link(e),i=new _;return t.on("click",function(t){t.preventDefault(),i.fnClearAllStorages().then(function(){window.location.href=e.url})}),t},get_link:function(e){var t="link_log_as"===e.name?" log-as-link":"logout"!==e.name?" page-link":"",i="string"==typeof e.icf?'<span class="icon-f icf-'+e.icf+'"></span> ':"",n="string"==typeof e.badge&&e.badge.length?'<span class="navbadge">'+e.badge+"</span> ":"",s="string"==typeof e.id&&e.id.length?'id="'+e.id+'"':"";return $("<li><a "+s+' class="btn'+t+'" href="'+e.url+'">'+n+i+e.label+"</a></li>")},get_log_as_menu_link:function(e){if("undefined"==typeof e.links||!e.links.length)return!1;var t=this,i="string"==typeof e.icf?'<span class="icon-f icf-'+e.icf+'"></span> ':"",n='<span class="navbadge">'+e.links.length+"</span> ",s=$("<li></li>"),o=$('<button type="button" class="log-as-btn">'+n+i+e.label+"</button>");return o.on("click",function(e){e.preventDefault(),t.show_log_as()}),s.append(o),s},get_log_as_menu:function(e){if("undefined"==typeof e.links||!e.links.length)return!1;var t=this,i=$('<div class="log-as-menu"></div>'),n=$("<ul></ul>"),s=$("<li></li>"),o=$('<button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>');o.on("click",function(e){e.preventDefault(),t.hide_log_as()}),s.append(o),n.append(s),i.append(n);for(var a in e.links)n.append(this.get_link(e.links[a]));return i},get_dev_button:function(e){var t=$("<li></li>"),i=e.get_menu_btn(this),n=this;return i.on("click",function(){n.show_dev_menu()}),t.append(i),t},get_dev_menu:function(e){return e.get_menu(this)},show_dev_menu:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-dev")},hide_dev_menu:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-dev")},get_sep:function(){return $('<li class="sep"></li>')},closeSettingsPopups:function(){this.hide_lang(),this.hide_main_cat(),this.hide_currency(),this.hide_theme(),this.hide_dev_menu(),!1!==this.oPopup&&this.oPopup.close()},setBtnToHighlight:function(e){e.addClass("btn-highlight btn-highlighting btn-highlight-t");var t=!0,i=setInterval(function(){t=!t,t?e.addClass("btn-highlight"):e.removeClass("btn-highlight")},this.iHighlightInterval);setTimeout(function(){clearInterval(i),e.removeClass("btn-highlight btn-highlighting")},8*this.iHighlightInterval),setTimeout(function(){e.removeClass("btn-highlight-t")},8*this.iHighlightInterval+500)},initDevActionInMenuFallBack:function(){xv&&"undefined"==typeof xv.devActionInMenu&&(xv.devActionInMenu={addCustomButtonAction:function(){s.warn("devActionInMenu not initiated")}})}},new C}),define("skins/default/common_all_if_no_premium_login",["config/main","skins/default/pagination"],function(e,t){"object"==typeof e.dyn.ls&&"object"==typeof e.dyn.ls.buttons&&e.dyn.ls.buttons.length>0&&require(["skins/common/listing/settings"]);var i=$(".head__btn--connection");i.length>0&&require(["skins/default/form/login","lib/i18n!front"],function(t,n){var s=function(){if($container=t.getPopContainer(),$container&&$container.length){var e=$container.find("#signin-form").first(),i=e.find(".login-submit").first();i.hasClass("is-signinonly-init")||i.addClass("is-signinonly-init").html("<span class='not-signin-only'>"+i.html()+"</span> <span class='signin-only'>"+n.__("login_form.sign_in")+"</span>"),"signin-top-page"===t.form_opening_origin_mode&&"premium"===t.getType()?($container.find("#signin-form_id_product").val(""),e.addClass("is-signin-only"),i.addClass("is-signin-only")):($container.find("#signin-form_id_product").val($container.find('.form-field-signin-form_product input[type="radio"]:checked').val()),e.removeClass("is-signin-only"),i.removeClass("is-signin-only"))}};if("function"==typeof t.setOrigin)switch(e.data.action){case"video":if(i.filter('[data-mode="signin-top-page"]').data("origin","video_page_login"),-1!==window.location.search.indexOf("xsc=qp"))t.setOrigin("quickies_profile");else if(-1!==window.location.search.indexOf("xsc=qs"))t.setOrigin("quickies_search");else if(-1!==window.location.search.indexOf("xsc=fvtp"))t.setOrigin("full_video_on_trailer_player");else if(-1!==window.location.search.indexOf("xsc=fvtecp"))t.setOrigin("full_video_on_trailer_player_end_cta");else if(-1!==window.location.search.indexOf("xsc=gfps"))t.setOrigin("global_feed_premium_sub");else if(-1!==window.location.search.indexOf("xsc=pfps"))t.setOrigin("profile_feed_premium_sub");else{var o=window.location.search.indexOf("xsc=fvt");if(-1!==o){var a=window.location.search.substring(o+7,o+8),r="m"===a;r&&(a=window.location.search.substring(o+8,o+9)),t.setOrigin("full_video_on_trailer"+(r?"_mobile":"")+a)}else{var l=-1!==window.location.search.indexOf("xsc=pofs");e.data.is_ppv?t.setOrigin(l?"premium_on_free_search_ppv":"video_page_ppv"):e.data.is_membership?t.setOrigin(l?"premium_on_free_search_membership":"video_page_membership"):t.setOrigin(l?"premium_on_free_search_premium":"video_page_premium")}}break;case"profile":i.filter('[data-mode="signin-top-page"]').data("origin","profile_page_login")}t.on_form_loaded=s,t.form_on_open=s,t.setupLinks(i)});var n=$("header .head__btn--id");if(n.length>0){var s=$("body"),o=!1,a=$("header .head__login-btn-group"),r=xv.menus.addClose(function(){l(!1,!1)}),l=function(e,t){!1!==t&&xv.menus.closeAll(r),"boolean"==typeof e&&e===o||(o="boolean"==typeof e?e:!o,n.toggleClass("is-opened",o),a.toggleClass("is-opened",o),s.toggleClass("body--head-login-menu-is-opened",o))};n.on("click",function(e){e.preventDefault(),l()}).addClass("init-ok"),a.on("menu.forceclose",function(){l(!1,!1)}),s.on("click",function(e){o&&($(e.target).closest("header .head__btn--id, header .head__login-btn-group").length>0||(s.innerWidth()<768&&e.preventDefault(),l(!1,!1)))}),a.find(".playlists").on("click",function(e){e.preventDefault(),l(!1,!1),require(["skins/default/video/playlists/manager"],function(e){e.loadEditList()})})}var d=$("#reload-page");d.length>0&&d.on("click",function(){$("html,body").scrollTop(0),window.location.reload()}).addClass("init-ok");var u=$("#subs-home-toggle");u.length>0&&require(["lib/i18n!front","skins/common/basic_feature"],function(e,t){var i=new t(t.S_F_SUGGESTS);i.activateErrorPopup();var n=i.isEnabled();u.html((n?"<span class='icon-f icf-ban'></span> ":"")+e.__("subscriptions."+(n?"dont_":"")+"show_on_homepage")).on("click",function(){i.toggle(function(){$("html,body").scrollTop(0),window.location.reload()},!n)}).addClass("init-ok")});var c=$("#language-switcher");c.length>0&&require(["lib/helpers/popup/language_switcher"],function(t){t(c,"/change-language/",e.data.other_locales),c.addClass("init-ok")}),t.add_all_in("#page")}),define("skins/common/blog_survey",["config/main","static/cookies"],function(e,t){var i=$("#warning-survey");if(i.length>0){var n=i.data("survey");if("string"==typeof n){var s="survey_"+n;null===t.get(s)&&$.ajax({type:"POST",url:window.location.protocol+"//pornbiz.com/"+n+"/has-answered",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){var i="0",n=300;e.result&&(e.has_answered&&0===e.nb_rem?(i="2",n=86400):(i=e.has_answered?"1":"0",n=900)),t.setLocal(s,i,1e3*n,"/")},error:function(){t.setLocal(s,"0",3e5,"/")}}),i.find("a").on("click",function(){t.removeLocal(s,"/")})}}}),require.config({waitSeconds:300,paths:{jquery:"jquery",text:"text","@firebase/app":"libs/firebase-app","@firebase/messaging":"libs/firebase-messaging"},shim:{json3:{exports:"JSON"}},config:{text:{useXhr:function(e,t,i,n){if("/"===e.substring(0,1))return!0;if(e.match(/^https?:\/\/static[\w-]*\.(xvideos|red)-cdn\.com\/.*$/))return!0;var s=t+"://"+i;return e.substring(0,s.length)===s||-1!==i.split(".").pop().indexOf("local")}}},packages:[{name:"moment",main:"moment",location:"libs/moment"}]}),define("static/log",window.xv.log),define("static/console",window.xv.console),define("static/tracker",[],function(){return window.xv.tracker}),define("static/utils",window.xv.utils),define("static/dom",window.xv.dom),define("static/cookies",window.xv.cookies),define("static/storage",window.xv.storage),define("static/idb_storage",window.xv.idb_storage),define("static/thumbs",window.xv.thumbs),define("static/messages",window.xv.messages),document.addEventListener||require(["respond"]),require(["config/main","static/dom","static/cookies","lib/helpers/inline_loader","static/console"],function(e,t,i,n,s){s.log(window.location.href,"Load page"),n.setup(e.domains["static"]+"/v3/img/skins/default/xv-inline-loader.gif"),require(["skins/default/common_all"]);if(function(){return!!e.dyn.premium&&(!e.dyn.login_info.has_member_area&&(-1===["main","profile","video","lang"].indexOf(e.data.action)&&(("category"!==e.data.action||-1===window.location.pathname.indexOf("/p:1/"))&&(("mozaique"!==e.data.action||-1===window.location.pathname.indexOf("/best-of"))&&(("mozaique"!==e.data.action||-1===window.location.pathname.indexOf("-hits/"))&&("/red"!==window.location.pathname.substring(0,4)&&"/landing"!==window.location.pathname.substring(0,8)))))))}())return void require(["skins/common/form/login"],function(t){var i=$("body > .x-overlay.premium-popup-form");t.setOpenCloseModes("signup",!0,!1,function(){e.data.is_premium?window.location.href=e.domains.slave:window.location.href=e.domains.slave+window.location.pathname+window.location.search}),t.open(),$("#language-switcher,#language-switcher-list").appendTo(t.box.body),i.remove()});e.data.action&&require(["skins/"+e.sitename+"/"+e.data.action]),require(["skins/default/common_all_if_no_premium_login"]),e.dyn.premium||require(["skins/common/blog_survey"]);var o=$("#page-go-up");if(o.length>0){o.on("click",function(){t.scrollToTop()});var a,r=!1,l=$(window),d=function(){a=null;var e=l.scrollTop()>t.getViewportHeight()/3;e!==r&&(o.toggleClass("displayed",e),r=e)};l.on("scroll",function(){a||(a=window.setTimeout(d,500))}),d()}e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&(i.get("last_subs_check")||window.setTimeout(function(){$.getJSON("/my-feed/update-count",function(e){if(e.result){var t=$("#home-tabs .mysubs .navbadge,#mobile-filters-menu .nb-new-video-subs-badge,#mobile-login-menu .nb-new-video-subs-badge");0===e.data.nbSubs?t.remove():0===t.length?($("#home-tabs .mysubs").append('<span class="navbadge">'+e.data.formatted+"</span>"),$("#mobile-filters-menu .my-subs-nav-link,#mobile-login-menu .my-subs-nav-link").append('&nbsp;<span class="navbadge nb-new-video-subs-badge">'+e.formatted+"</span>")):t.text(e.data.formatted)}}),i.setLocal("last_subs_check","1",3e5,"/")},5e3)),e.dyn.chat&&e.dyn.chat.enabled&&!e.dyn.chat.is_sheer_creator&&(e.is_dev?require(["skins/chat"]):e.dyn.chat.vers?require([e.domains["static"]+"/v-"+e.dyn.chat.vers+"/v3/js/skins/min/chat.js"]):require(["skins/min/chat"]))}),define("skins/default",function(){}),define("skins/default/mozaique/premium_result_on_free",["config/main","static/thumbs","static/utils","mustache","lib/i18n!front","skins/default/mozaique/thumb_block_common_init"],function(e,t,n,s,o,a){var r=function(i){i=n.unescape(i),this.$pageTbs=$(".mozaique .thumb-block"),this.iPageWidth=null;var s,a="";for(s in e.data.premium_vids)a+=t.get_thumb_block_html(e.data.premium_vids[s],"video_premium_search_free").html;if(this.$tbsPremium=$(a),e.data.premium_search&&e.data.premium_search.nbResults&&e.data.premium_search.nbResults>0&&this.$tbsPremium.length){this.$premiumLineTitle=$('<div class="premium-results-line-title"></div>'),this.$premiumLineSeeMore=$('<div class="premium-results-line-see-more"></div>'),this.$premiumLineContainer=$('<div class="premium-results-line"></div>');var r=$('<a class="see-more" href="'+e.data.premium_search.url+'"></a>'),l=$('<a class="see-more" href="'+e.data.premium_search.url+'"></a>'),d=e.data.premium_search.nbResults.toLocaleString(e.dyn.locale);r.html(o.__("listing.nb_videos_found_on_site",{"%nb_videos%":"<strong>"+d+"</strong>","%query%":'<strong class="query">'+n.escape(i.length>20?i.substring(0,20)+"...":i)+"</strong>","%site%":"<strong>XVIDEOS <span class='icon-f icf-ticket-red icf-white-fill'></span></strong>"})),l.html(o.__("listing.see_all_premium_content_on",{"%strong%":'<span class="underline">',"%strong_end%":"</span>","%query%":'<strong class="query">'+n.escape(i.length>20?i.substring(0,20)+"...":i)+"</strong>","%site%":"<strong>XVIDEOS <span class='icon-f icf-ticket-red'></span></strong>"})),this.$premiumLineTitle.append(r),this.$premiumLineSeeMore.append(l);var u=this;$(window).on("resize",function(){u.onResize()}),$("body").on("settings_nb_thumbs_changed",function(){u.onResize()}),this.onResize()}};return r.prototype={onResize:function(){var t=$(window).outerWidth();if(this.iPageWidth!==t){this.iPageWidth=t;var n=null,s=!1,o=1,r=this.$pageTbs.length;this.$premiumLineTitle.detach(),this.$premiumLineSeeMore.detach(),this.$premiumLineContainer.empty(),this.$premiumLineContainer.detach(),this.$pageTbs.each(function(){return!!s||(null===n?(n=$(this).offset(),!0):$(this).offset().top>n.top?(s=!0,!1):void o++)});var l=Math.min(e.dyn.is_desktop?4:10,Math.ceil(Math.ceil(r/o)/2)),d=$(this.$pageTbs.get(Math.min(r,l*o)-1));if(d.length){for(this.$premiumLineContainer.append(this.$premiumLineTitle),1===o&&(o=3),i=0;i<o;i++){var u=$(this.$tbsPremium.get(i));u.length&&this.$premiumLineContainer.append(u.clone())}this.$premiumLineContainer.append(this.$premiumLineSeeMore),this.$premiumLineContainer.insertAfter(d),a.init_listing(this.$premiumLineContainer)}}}},r}),define("lib/converter",[],function(){var e={},t={in2cm:2.54,lbs2kg:.45359237},i={"in":"cm",cm:"in",lbs:"kg",kg:"lbs"};return e.map=function(e){return i[e]},e.convert=function(e,n,s,o){void 0!==s&&s||(s=i[n]);var a,r=n+"2"+s;if("undefined"==typeof t[r]){if(r=s+"2"+n,"undefined"==typeof t[r])return!1;a=1/t[r]}else a=t[r];var l=e*a;if(void 0!==o){if(0===o)return Math.round(l);var d=Math.pow(10,o);l=Math.round(l*d)/d}return l},e.trimPx=function(e){return Math.round(parseFloat(e.replace(/[^\d\.-]/g,"")))},e}),function(e){"function"==typeof define&&define.amd?define("jquery-scrollLock",["jquery"],e):e(jQuery)}(function(e){"use strict";var t,i={space:32,pageup:33,pagedown:34,end:35,home:36,up:38,down:40},n=function(t,i){var n,s,o,a=i.scrollTop(),r=i.prop("scrollHeight"),l=i.prop("clientHeight"),d=t.originalEvent.wheelDelta||-1*t.originalEvent.detail||-1*t.originalEvent.deltaY,u=0;return"wheel"===t.type?(n=i.height()/e(window).height(),u=t.originalEvent.deltaY*n):this.options.touch&&"touchmove"===t.type&&(d=t.originalEvent.changedTouches[0].clientY-this.startClientY),o=(s=d>0&&a+u<=0)||d<0&&a+u>=r-l,{prevent:o,top:s,scrollTop:a,deltaY:u}},s=function(e,t){var n,s,o=t.scrollTop(),a={top:!1,bottom:!1};return a.top=0===o&&(e.keyCode===i.pageup||e.keyCode===i.home||e.keyCode===i.up),a.top||(n=t.prop("scrollHeight"),s=t.prop("clientHeight"),a.bottom=n===o+s&&(e.keyCode===i.space||e.keyCode===i.pagedown||e.keyCode===i.end||e.keyCode===i.down)),a},o=function(t,i){this.$element=t,this.options=e.extend({},o.DEFAULTS,this.$element.data(),i),this.enabled=!0,this.startClientY=0,this.options.unblock&&this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this)),this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.handler,this)),this.options.touch&&(this.$element.on("touchstart"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.touchHandler,this)),this.$element.on("touchmove"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.handler,this)),this.options.unblock&&this.$element.on("touchmove"+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this))),this.options.keyboard&&(this.$element.attr("tabindex",this.options.keyboard.tabindex||0),this.$element.on("keydown"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.keyboardHandler,this)),this.options.unblock&&this.$element.on("keydown"+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this)))};o.NAME="ScrollLock",o.VERSION="3.1.2",o.NAMESPACE=".scrollLock",o.ANIMATION_NAMESPACE=o.NAMESPACE+".effect",o.DEFAULTS={strict:!1,strictFn:function(e){return e.prop("scrollHeight")>e.prop("clientHeight")},selector:!1,animation:!1,touch:"ontouchstart"in window,keyboard:!1,unblock:!1},o.CORE={wheelEventName:"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",animationEventName:["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].join(o.ANIMATION_NAMESPACE+" ")+o.ANIMATION_NAMESPACE,unblockHandler:function(e){e.__currentTarget=e.currentTarget},handler:function(t){var i,s,a;this.enabled&&!t.ctrlKey&&(i=e(t.currentTarget),(!0!==this.options.strict||this.options.strictFn(i))&&(t.stopPropagation(),s=e.proxy(n,this)(t,i),t.__currentTarget&&(s.prevent&=e.proxy(n,this)(t,e(t.__currentTarget)).prevent),s.prevent&&(t.preventDefault(),s.deltaY&&i.scrollTop(s.scrollTop+s.deltaY),a=s.top?"top":"bottom",this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,i,a),0),i.trigger(e.Event(a+o.NAMESPACE)))))},touchHandler:function(e){this.startClientY=e.originalEvent.touches[0].clientY},animationHandler:function(e,t){var i=this.options.animation[t],n=this.options.animation.top+" "+this.options.animation.bottom;e.off(o.ANIMATION_NAMESPACE).removeClass(n).addClass(i).one(o.CORE.animationEventName,function(){e.removeClass(i)})},keyboardHandler:function(t){var i,n=e(t.currentTarget),a=(n.scrollTop(),s(t,n));return t.__currentTarget&&(i=s(t,e(t.__currentTarget)),a.top&=i.top,a.bottom&=i.bottom),a.top?(n.trigger(e.Event("top"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"top"),0),!1):a.bottom?(n.trigger(e.Event("bottom"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"bottom"),0),!1):void 0}},o.prototype.toggleStrict=function(){this.options.strict=!this.options.strict},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.destroy=function(){this.disable(),this.$element.off(o.NAMESPACE),this.$element=null,this.options=null},t=e.fn.scrollLock,e.fn.scrollLock=function(t){return this.each(function(){var i=e(this),n="object"==typeof t&&t,s=i.data(o.NAME);(s||"destroy"!==t)&&(s||i.data(o.NAME,s=new o(i,n)),"string"==typeof t&&s[t]())})},e.fn.scrollLock.defaults=o.DEFAULTS,e.fn.scrollLock.noConflict=function(){return e.fn.scrollLock=t,this}}),define("skins/common/search/autocomplete",["config/main","static/dom","mustache","lib/tools","lib/converter","lib/i18n!front","jquery-scrollLock"],function(e,t,i,n,s,o){var a=["keywords","pornstar","channel"],r="object"==typeof window.visualViewport&&"number"==typeof window.visualViewport.height,l=function(e,t,i,n,s){this.relative=i,this.input=t.prop("autocomplete","off"),this.is_premium_search_input=!!this.input.parents("form").find('input[name="premium"]').prop("value"),this.tpl=n,this.opened=!1,this.autocomplete=$("<div>").addClass("search-autocomplete").appendTo(e.css("position","relative")).hide().scrollLock({unblock:"ul"}),this.source_url=s,this.has_results=!1,this.results={},this.resultsEnhanced={},this.time_btw_searchs=200,this.timer,this.last_time=0,this.cur_search=!1,this.last_search=!1,this.cur_keywords=!1,this.searches=[],this.max_searchs=3,this.iEnhanceSuggestionsFrom=3,this.iMaxWithEnhancedSuggestions=10,this.has_scroll_height="undefined"!=typeof $("body")[0].scrollHeight,this.min_height=106,this.max_height=0,this.selected=!1,this.res_selected=-1,this.is_keyboard_nav=!1;var o=this;this.input.on("keydown",function(e){o.on_tab_input(e)}).on("keyup paste",function(e){o.on_char_input(e)}).on("blur",function(){setTimeout(function(){o.close()},300)}).on("focus",function(){o.search()}),$(window).on("resize",function(){o.resize()})};return l.prototype={open:function(){this.opened||(this.autocomplete.show(),this.resize(),this.opened=!0,"function"==typeof this.fnOnToggle&&this.fnOnToggle(this,!0))},close:function(){this.opened&&(this.autocomplete.hide(),this.opened=!1,"function"==typeof this.fnOnToggle&&this.fnOnToggle(this,!1))},resize:function(){var e=s.trimPx(this.input.css("border-left-width")),t=s.trimPx(this.input.css("padding-left")),i=s.trimPx(this.input.css("padding-left")),n=this.relative.offset(),o=this.input.offset(),a=this.input.outerHeight(),l=o.top-n.top+a+1,d=o.left-n.left,u=this.relative.outerWidth()-d,c=this.input.width()+i+t+2*e;this.lpadding={left:t+e+"px",right:i+e+"px"},this.autocomplete.css({top:l+"px",left:d+"px"}),u<=c?this.autocomplete.css("width",u+"px"):this.autocomplete.css({minWidth:Math.min(u,Math.max(c,Math.min(u,300)))+"px",maxWidth:u+"px"}),
this.max_height=(r?window.visualViewport.height:window.innerHeight)-(("fixed"===this.relative.css("position")||"hidden"===$("body").css("overflow")?Math.abs(o.top-n.top):o.top+n.top)+a+1),this.max_height<this.min_height&&(this.max_height=this.min_height),this.resizeResults()},resizeResults:function(){if(this.has_scroll_height&&this.has_results){if(this.max_height<768)return this.autocomplete.children(".title").hide(),this.autocomplete.children("ul").css("maxHeight","none"),void this.autocomplete.css({maxHeight:this.max_height-4+"px",overflowY:"auto"});this.autocomplete.css({maxHeight:"none",overflowY:"hidden"});var e=0,t=0,i=[];this.autocomplete.children().each(function(){var n=$(this);if(n.hasClass("title"))return n.show(),void(e+=n.outerHeight(!0));var s={e:n,h:n[0].scrollHeight};t+=s.h,i.push(s)});var n=Math.max(this.max_height-e-4,140*i.length);do{var s=i.length,o=0;for(var a in i){var r=n/s;r>=i[a].h&&(i[a].e.css("maxHeight","none"),o+=i[a].h,i.splice(a,1))}n-=o,t-=o}while(i.length<s);for(var a in i){var r=n/i.length;i[a].e.css("maxHeight",r+"px")}}},getSearch:function(){return $.trim(this.input.val()).replace(/[\s\/]+/," ")},search:function(t){if(void 0===t?(!1===this.last_search&&(this.last_search=this.getSearch()),t=this.last_search):this.last_search=t,this.cur_keywords===t)return void(this.has_results&&this.open());if(this.cur_search!==t){if("undefined"!=typeof this.results[t])return void this.display(t);if(0===t.length)return this.results[""]={keywords:[],pornstar:[],channel:[]},void this.display("");if(!this.timer){var i=this,n=(new Date).getTime(),s=n-this.last_time;if(s<this.time_btw_searchs)return void(this.timer=window.setTimeout(function(){i.timer=null,i.search()},this.time_btw_searchs-s));this.searches.length===this.max_searchs&&this.searches.shift().abort(),this.last_time=n,this.searches.push($.getJSON(this.source_url+"/"+encodeURIComponent(t),function(n){if(n&&n.result){var s=n.data;s=i.updateData(s,t),i.results[t]=s,!e.dyn.autoCompReg&&s.keywords.length<i.iEnhanceSuggestionsFrom&&!s.BLACKLISTED&&i.enhanceSuggestions(t,1),i.last_search===t&&i.display(t)}}).fail(function(){i.results[t]={keywords:[],pornstar:[],channel:[]},i.last_search===t&&i.display(t)}).always(function(){i.cur_search===t&&(i.cur_search=!1,i.timer&&(window.clearTimeout(i.timer),i.timer=null))}))}}},enhanceSuggestions:function(e,t){e=e.trim();var i=e.split(" ");if(!(i.length<=t)){var n=i.slice(0,t),s=i.slice(t);this.searches.length===this.max_searchs&&this.searches.shift().abort();var o=s.join(" "),a=this;if(this.last_time=(new Date).getTime(),"undefined"!=typeof this.resultsEnhanced[o])return void this.displayEnhanced(e,o,n,t);this.searches.push($.getJSON(this.source_url+"/"+encodeURIComponent(o),function(i){if(i&&i.result){var s=i.data;a.resultsEnhanced[o]=s,a.displayEnhanced(e,o,n,t)}}))}},displayEnhanced:function(e,t,i,n){var s=this.results[e],o=!1,a=null,r=[],l=function(e){if("object"==typeof e){if($.isArray(e)){for(var t=[],i=0;i<e.length;i++)t.push(l(e[i]));return t}var n={};for(var s in e)n[s]=l(e[s]);return n}return e},d=this.updateData(l(this.resultsEnhanced[t]),t,i);for(a in s.keywords)r.push(s.keywords[a].N.toString().toLowerCase().trim()),s.keywords[a].more&&(o=!0);for(a=0;a<d.keywords.length&&!(s.keywords.length>=this.iMaxWithEnhancedSuggestions);a++){var u=d.keywords[a].N.toString().toLowerCase().trim();-1===r.indexOf(u)&&(o||(d.keywords[a].more=!0,o=!0),r.push(u),s.keywords.push(d.keywords[a]))}this.results[e]=s,this.last_search===e&&(this.display(e),s.keywords.length<this.iEnhanceSuggestionsFrom&&this.enhanceSuggestions(e,n+1))},updateData:function(e,t,i){"object"!=typeof e.keywords&&(e.keywords=[]),"object"!=typeof e.pornstar&&(e.pornstar=[]),"object"!=typeof e.channel&&(e.channel=[]);for(var n in a){var s=a[n];if("keywords"!==s)for(var o in e[s]){var r=e[s][o];"https:"===window.location.protocol&&(e[s][o].P=r.P.replace("http://","https://")),"number"==typeof r.M?(e[s][o].highlight=!0,e[s][o].t1=r.N.toString().substring(0,r.M),e[s][o].t2=r.N.toString().substring(r.M,r.M+r.L),e[s][o].t3=r.N.toString().substring(r.M+r.L)):e[s][o].highlight=!1}}for(var o=0;o<e.keywords.length;o++)for(;"object"==typeof e.keywords[o]&&"undefined"!=typeof e.keywords[o].R&&parseInt(e.keywords[o].R)<1;)e.keywords.splice(o,1);for(var o in e.keywords){var r=e.keywords[o],l=r.N.toString().toLowerCase().indexOf(t.toLowerCase());if(-1===l)e.keywords[o].highlight=!1;else if(e.keywords[o].highlight=!0,e.keywords[o].t1=r.N.toString().substring(0,l),e.keywords[o].t2=r.N.toString().substring(l,l+t.length),e.keywords[o].t3=r.N.toString().substring(l+t.length),void 0!==i){delete e.keywords[o].R;var d=e.keywords[o].N.toString().toLowerCase().split(" "),u=[];for(var c in i){var f=d.indexOf(i[c]);-1===f&&u.push(i[c])}var h=u.join(" ");e.keywords[o].N=h+" "+e.keywords[o].N,e.keywords[o].t1=h+" "+e.keywords[o].t1}}for(var o=0;o<e.pornstar.length;o++)e.pornstar[o].model=0===e.pornstar[o].R||e.pornstar[o].R>1e3;return e},display:function(e){this.cur_keywords=e;var t=this.results[e];if(0===t.keywords.length&&0===t.pornstar.length&&0===t.channel.length)return this.selected=!1,this.has_results=!1,void this.close();this.has_results=!0,this.open(),t.pornstar=t.pornstar.map(function(e){return e.sub_label=o.__("profile.subs",{"%count%":e.SF}),e}),this.selected=$(i.render(this.tpl,{results:t,has_keywords:t.keywords.length>0,has_pornstars:t.pornstar.length>0,has_channels:t.channel.length>0,padding:this.lpadding,lbl_world:o.__("misc.world"),lbl_pss:o.__("profile.models"),lbl_chans:o.__("profile.channels"),lbl_suggestions:o.__("video.suggestions"),is_premium_search:this.is_premium_search_input,uri:function(){return function(e,t){return encodeURIComponent(t(e))}}})).appendTo(this.autocomplete.empty()).filter("ul").first().scrollTop(0),this.res_selected=-1,this.resizeResults()},on_tab_input:function(e){if(13===e.which&&!this.input.val().length)return void e.preventDefault();(38===e.which||9===e.which&&this.has_results)&&e.preventDefault()},on_char_input:function(e){var t=this;if(38===e.which||40===e.which||9===e.which){if(!this.has_results)return;e.preventDefault(),this.is_keyboard_nav=!0;var i=this.results[this.cur_keywords];return 38===e.which?-1===this.res_selected?this.res_selected=i.keywords.length+i.pornstar.length+i.channel.length-1:this.res_selected--:this.res_selected===i.keywords.length+i.pornstar.length+i.channel.length-1?this.res_selected=-1:this.res_selected++,this.selected.removeClass("selected"),void(this.res_selected>=0?(this.selected=this.autocomplete.children("ul").children("li").eq(this.res_selected).addClass("selected"),this.selected.parent().scrollTop(this.selected.parent().scrollTop()+this.selected.position().top-20),this.input.val(this.selected.find("a .keywords").text())):(this.selected=$(),this.input.val(this.last_search)))}return 13===e.which&&this.has_results&&this.is_keyboard_nav&&this.selected?(e.preventDefault(),void(window.location.href=this.selected.children("a").prop("href"))):(this.is_keyboard_nav=!1,"paste"===e.type?("object"==typeof e.originalEvent.clipboardData&&"function"==typeof e.originalEvent.clipboardData.getData&&this.search(e.originalEvent.clipboardData.getData("text")),void window.setTimeout(function(){t.search(t.getSearch())},50)):void this.search(this.getSearch()))},setOnToggle:function(e){this.fnOnToggle=e},getInput:function(){return this.input},getAutocomplete:function(){return this.autocomplete}},function(i,n,s,o){if("string"==typeof e.dyn.ip&&-1!==e.dyn.ip.indexOf(".")){var a="/search-suggest",r=e.dyn.user_main_cat||e.dyn.pagefilter||!1;!r||"gay"!==r&&"shemale"!==r||(a+="/"+r);var d=$("input.search-input[name='k']"),u=!1;d.each(function(){if($(this).is(":focus")){var e=new l(i,$(this),n||i,s,a);"function"==typeof o&&e.setOnToggle(o),u=!0}});var c=d.first(":visible");!1!==u||"/"!==window.location.pathname&&"/gay"!==window.location.pathname&&"/shemale"!==window.location.pathname||!document.activeElement||"BODY"!==document.activeElement.tagName||!t.isElementInView(c,!0)||c.val().length||c.focus(),d.on("keyup keydown focus",function(e){$(this).off("keyup keydown focus");var t=new l(i,$(this),n||i,s,a);"function"==typeof o&&t.setOnToggle(o),$(this).trigger(e)})}}}),define("text!skins/default/header/autocomplete.mustache",[],function(){return'\r\n{{#has_channels}}\r\n\t<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}"><span class="icon-f icf-device-tv-v2"></span> {{{lbl_chans}}}</div>\r\n\t<ul class="pornstars">\r\n\t\t{{#results.channel}}\r\n\t\t\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\r\n\t\t\t\t<a href="/profiles/{{{F}}}">\r\n\t\t\t\t\t<span class="thumb" style="background-image:url(\'{{{P}}}\')"></span>\r\n\t\t\t\t\t<span class="name">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t\t\t\t{{#SF}}\r\n\t\t\t\t\t\t<span class="sub">{{SF}}<span class="sub-icon icon-f icf-feed"></span></span>\r\n\t\t\t\t\t{{/SF}}\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t{{/results.channel}}\r\n\t</ul>\r\n{{/has_channels}}\r\n\r\n{{#has_keywords}}\r\n\t<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_suggestions}}}</div>\r\n\t<ul class="keywords">\r\n\t\t{{#results.keywords}}\r\n\t\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}"{{#more}} class="more"{{/more}}>\r\n\t\t\t<a href="/?k={{#uri}}{{{N}}}{{/uri}}{{#is_premium_search}}&premium=1{{/is_premium_search}}&top">\r\n\t\t\t\t<span class="nbres">{{R}}</span>\r\n\t\t\t\t<span class="keywords">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t{{/results.keywords}}\r\n\t</ul>\r\n{{/has_keywords}}\r\n\r\n{{#has_pornstars}}\r\n\t<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}"><span class="icon-f icf-star-o"></span> {{{lbl_pss}}}</div>\r\n\t<ul class="pornstars">\r\n\t\t{{#results.pornstar}}\r\n\t\t\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\r\n\t\t\t\t<a href="/profiles/{{{F}}}">\r\n\t\t\t\t\t<span class="thumb" style="background-image:url(\'{{{P}}}\')"></span>\r\n\t\t\t\t\t<span class="name">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t\t\t\t{{#SF}}\r\n\t\t\t\t\t\t<span class="sub">{{SF}}<span class="sub-icon icon-f icf-feed"></span></span>\r\n\t\t\t\t\t{{/SF}}\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t{{/results.pornstar}}\r\n\t</ul>\r\n{{/has_pornstars}}'}),define("skins/default/header/autocomplete",["skins/common/search/autocomplete","text!./autocomplete.mustache"],function(e,t){var i=$("header.head__top__container");e(i,i,t,function(e,t){if(t){for(var i=e.getInput(),n=!1;i&&i.length&&"string"==typeof i[0].nodeName&&"BODY"!==i[0].nodeName&&"function"==typeof i.parent&&"function"==typeof i.css;){if("fixed"===i.css("position")){n=!0;break}i=i.parent()}n&&($autoComp=e.getAutocomplete(),$autoComp.addClass("isForcedFixedPosition"))}else $autoComp=e.getAutocomplete(),$autoComp.removeClass("isForcedFixedPosition")})}),define("skins/default/header/preventempty",[],function(){var e=$("input.search-input[name='k']").parents("form");e.length>0&&e.on("submit",function(e){if(""===$(this).find('input[name="k"]').val().trim())return void e.preventDefault()})}),define("skins/default/header/categories",["skins/common/geo_switch/geo_switch"],function(e){if(xv.header&&"function"==typeof xv.header.add_mobile_menu_init){var t=$("#version-country-switch-btn");t.length&&xv.header.add_mobile_menu_init(function(){t.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.auto_show_popup()})})}}),define("skins/default/header/header",["./autocomplete","./preventempty","./categories"],function(){}),define("skins/default/mozaique/search_base",["lib/i18n!front","lib/helpers/thumbs_rotator","./../header/header"],function(e){var t,i,n=$("#search-page-filters-block"),s=!1;t=n.find(".btn,.selected a").on("click",function(o){o.preventDefault(),n.toggleClass("expanded"),t.html(s?i:e.__("search.hide_filters",{},"Hide filters")+"&#9650;"),s=!s}).filter(".btn"),i=t.html()}),define("text!skins/common/search/report.mustache",[],function(){return'<div class="report-search-words">\n\t<h2><span class="icon-f icf-warning-stop icf-white-fill"></span> {{{ sTitle }}}</h2>\n\t<p class="desc">{{{ sDesc }}}</p>\n\t<ul class="search-report-list">\n\t\t{{#aSearchs}}\n\t\t\t<li><label><input type="radio" name="search_query" value="{{{ sName }}}" data-type="{{{ sType }}}"{{#bOneSearch}} checked="checked"{{/bOneSearch}}/> {{{ sLabel }}}</label></li>\n\t\t{{/aSearchs}}\n\t</ul>\n\t<div class="form form-horizontal">\n\t\t<div class="form-group">\n\t\t\t<div class="col-sm-12">\n\t\t\t\t<textarea class="form-control" rows="2" placeholder="{{{ sComment }}}"></textarea>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<div class="col-sm-12">\n\t\t\t\t<p class="label-i-understand">{{{ sTypeIUnderstand }}}</p>\n\t\t\t\t<input class="form-control" placeholder=\'"{{{ sIUnderstand }}}"\' name="i_understand"></input>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<button class="btn btn-primary disabled" disabled>{{{ sSend }}}</button>\n</div>'}),define("skins/common/search/report",["config/main","mustache","lib/i18n!front","static/utils","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","text!skins/common/search/report.mustache"],function(e,t,i,n,s,o,a){var r=function(){this.aSearchs=[]};return r.prototype={setMain:function(e,t){this.setSearch(e,t,"MAIN")},setRelated:function(e,t){this.setSearch(e,t,"RELATED")},setSearch:function(e,t,i){this.aSearchs.push({sName:e,sLabel:t,sType:i})},openForm:function(){var n="I understand",r=$(t.render(a,{sTitle:i.__("report_form.report"),sDesc:i.__("report_form.report_words_expressions"),sComment:i.__("report_form.please_explain_meaning"),sTypeIUnderstand:i.__("report_form.type_i_understand_bellow",{"%message%":"\" <strong class='i-understand'>"+n+'</strong> "'}),sIUnderstand:n,sSend:i.__("chat.message_send"),aSearchs:this.aSearchs,bOneSearch:1===this.aSearchs.length})),l=s.get($("body"),!0,"close");l.setOverlayClosable(!0),l.addClass("auto-width-popup"),l.append(r),l.show();var d=!1,u=r.find("button"),c=r.find('input[type="radio"]'),f=r.find("textarea"),h=r.find('input[name="i_understand"]'),p=function(){d=c.filter(":checked").length>0&&f.val().trim().length>=10&&h.val().replace(/\s+/g," ").trim().toLowerCase()===n.toLowerCase(),u.prop("disabled",!d).toggleClass("disabled",!d)};c.on("change",p),f.on("keyup change blur",p),h.on("keyup change blur",p);var _=function(){c.length>0?l.show():l.close()};u.on("click",function(t){if(t.preventDefault(),d){var n=c.filter(":checked");l.hide();var s=o.loading(i.__("report_form.sending"));$.ajax({type:"POST",url:"/search-report",dataType:"json",data:{csrf:e.data.report_csrf,comment:f.val().trim(),query:n.val(),type:n.data("type")},success:function(e){s.close(),e.result?(o.alert(i.__("report_form.thanks"),_),c=c.not(n),f.val(""),p(),n.parent().remove()):o.alert(e.message||i.__("misc.error_please_retry"),function(){l.show()},!0)},error:function(){s.close(),o.alert(i.__("misc.error_please_retry"),function(){l.show()},!0)}})}})}},r}),define("skins/default/category",["config/main","./mozaique/premium_result_on_free","./mozaique/search_base"],function(e,t){$(".report-search").on("click",function(t){t.preventDefault(),require(["skins/common/search/report"],function(t){var i=new t;i.setMain(e.data.slcamscat,e.data.slcamscat),i.openForm()})}),new t(e.data.slcamscat)}),define("skins/default/facial_recognition.js",["static/utils","./header/header"],function(e){var t=$("#similar-face-form"),i=t.find("fieldset > .form-group"),n=t.find(".file-upload-submit"),s=t.find("input[type='file']"),o=t.find(".file-upload-recap"),a="";s.change(function(){if(a=s.val(),a.length<1)return!1;o.html(e.escape(a)),i.fadeOut(function(){n.fadeIn()})}),n.find(".return-file-select").click(function(){s.val("").trigger("change"),n.fadeOut(function(){o.html(""),i.fadeIn()})})}),define("text!skins/default/profile/vote/light.html",[],function(){return'<div class="rating-box-light">\n\t<span class="vote-actions">\n\t\t<span class="vote-action-good"><span class="icon thumb-up white">&nbsp;</span></span><span class="vote-action-bad"><span class="icon thumb-down white">&nbsp;</span></span>\n\t</span>\n\t<span class="rating">{{ rating }}</span> (<span class="total">{{ vtotal }}</span>)\n\t<div class="rating-bar"><div style="width:{{ vrating }}%;"></div></div>\n</div>'}),define("skins/default/profile/vote/light",["config/main","mustache","lib/tools","text!./light.html","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/overlay/box","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(e,i,s,o,a,r,l){if(void 0!==e){this.vtotal=o,this.vrating=i,this.rating=s,this.visitor_vote=!1,void 0===a||"GOOD"!==a&&"BAD"!==a||(this.visitor_vote=a),this.login_required="boolean"==typeof r&&r,this.login_container=l,this.node=$(t.render(n,this._get_tpl_vars())),e.replaceWith(this.node),this.actions=this.node.children(".vote-actions"),this.yes_btn=this.actions.children(".vote-action-good"),"GOOD"===this.visitor_vote&&this.yes_btn.addClass("disabled"),this.no_btn=this.actions.children(".vote-action-bad"),"BAD"===this.visitor_vote&&this.no_btn.addClass("disabled"),this.bar_good=this.node.find(".rating-bar div"),this.bar_rating=this.node.children(".rating"),this.total=this.node.find(".total"),this._init_counts();var d=this;this.voting=!1,this.popup=null,this.popup_pos={v:"below",h:"left"},this.yes_btn.on("click",function(){d._vote("GOOD")}),this.no_btn.on("click",function(){d._vote("BAD")})}};return l.prototype={initPostData:function(e,t,i){this.url_good=e,this.url_bad=t,this.post_data=i||{}},setPopupPosition:function(e,t){this.popup_pos.v=e,this.popup_pos.h=t},_init_counts:function(){this.counts_total=this.node.find(".total")},_get_tpl_vars:function(){return{vtotal:this.vtotal,rating:this.rating,vrating:this.vrating}},_update_counts:function(e){this.bar_rating.text(e.vrating),this.total.text(e.total),this.bar_good.css("width",e.rating+"%")},_get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new o(e,t,{relative_to:this.node.parent(),position:this.popup_pos,trigger:!1}),this.popup},_open_login:function(){require(["skins/default/form/login"],function(e){e.open()})},_vote:function(t){if("GOOD"!==t&&"BAD"!==t)return!1;if(t===this.visitor_vote)return!0;if(this.voting)return!1;if(this.login_required&&!e.dyn.login_info.is_logged)return this._open_login(),!1;var i=this,n="GOOD"===t?this.yes_btn:this.no_btn,o=n.html(),a="GOOD"===t?this.url_good:this.url_bad;this.yes_btn.addClass("disabled"),this.no_btn.addClass("disabled"),n.html(s.getImg()),$.post(a,this.post_data,function(e){var s;e.result?(i._update_counts(e),i.visitor_vote=t,s="<strong>"+r.__("video.votes.thanks")+"</strong>"):s='<strong class="text-danger">'+e.message+"</strong>",i._get_popup(n,s).open()},"json").fail(function(){i._get_popup(n,'<strong class="text-danger">'+r.__("error.err_please_reload")+"</strong>").open()}).complete(function(){n.html(o),i.voting=!1,i.yes_btn.toggleClass("disabled",!e.dyn.login_info.is_logged||"GOOD"===i.visitor_vote),i.no_btn.toggleClass("disabled",!e.dyn.login_info.is_logged||"BAD"===i.visitor_vote)})}},l}),define("skins/common/profile/subscribe/btns_controler",["static/log","config/main","static/utils","mustache","lib/tools","lib/i18n!front","lib/helpers/popup","lib/helpers/popup/tooltip","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","skins/common/profile/sub_actions"],function(e,t,i,n,s,o,a,r,l,d,u){var c={uploader:{},uploaders:[],elts:{sub_btn:null,sub_btn_tpl:null,reject_btn_only:!1,no_reject_btn:null,append_to_channel:null,append_to_listing:null,btn_class:null,btn_display:null,counter:null,reject_btn:null,reject_tpl:null,tooltip:!1,tooltip_validation:!1},elts_order:{is_sub_icon:5,is_sub_text:4,sub_icon:5,sub_text:4},icons:{is_rejected:null,is_sub:null,reject:null,sub:null},texts:{confirm_unfollow:null,confirm_unreject:null,confirm_unignore:null,sub:null,reject:null,ignore:null,is_rejected:null,is_ignored:null,is_sub:null,sub_title:null,reject_title:null,ignore_title:null,unreject:null,unignore:null,unsub:null},listeners:{onSub:null,onUnsub:null,onReject:null}},f=function(e){this._init(e)};f.prototype={_init:function(e){this.sMethod=null,this.aUserBtns=[];var t={};e&&"object"==typeof e||(e={}),s.initParams(t,e,c),this.oUser=t.uploader,this.aUsers=t.uploaders,this.elts=t.elts,this.elts_order=t.elts_order,this.icons=t.icons,this.texts=t.texts,this.listeners=t.listeners,this.bDisplayNotIntersted=this.getDisplayBtnNotInterested(),!0===this.elts.no_reject_btn&&(this.bDisplayNotIntersted=!1),this.bDisplayNotInterstedOnly=!!this.elts.reject_btn_only,this.checkProfiles()},getDisplayBtnNotInterested:function(){return!!this.elts.reject_btn_only||!!(t.dyn.premium&&t.dyn.login_info.is_logged&&t.dyn.login_info.has_member_area&&("object"==typeof t.data.user&&(t.data.user.model||t.data.user.channel)||"profiles_index"===t.data.action||"xnxx_channels_premium_regular"===t.data.action))},checkProfiles:function(){if("xnxx"!==t.sitename||t.dyn.login_info.is_logged){var e=this,i=[],n={};if(this.oUser&&(this.oUser.hasOwnProperty("user_id")||this.oUser.hasOwnProperty("user_name")))this.sMethod="one_user",this.oUser.hasOwnProperty("user_id")&&this.oUser.hasOwnProperty("user_name")&&u.setUserIdByName(this.oUser.user_id,this.oUser.user_name);else{this.sMethod="user_list";for(var s in this.aUsers){var o=this.aUsers[s];i.push(o.user_id),n[o.user_id]=s,o.hasOwnProperty("user_name")&&u.setUserIdByName(o.user_id,o.user_name)}oOptionsPost={users:i}}var a=function(i){if(i.result)if("user_list"===e.sMethod)for(var s in i.users){var o=i.users[s].user_name,a=i.users[s].nb_subs;if(!o){var r=e.aUsers[n[s]];r&&r.user_name&&(o=r.user_name)}if(!a){var r=e.aUsers[n[s]];a=r&&r.nb_subs?r.nb_subs:null}o&&e.createBtns({append_to:"#profile_"+o,csrf:i.users[s].csrf,id:s,is_follower:i.users[s].is_follower,is_model:i.users[s].is_model,is_owner:o===t.dyn.login_info.profile,is_rejected:e.bIsModel?i.users[s].is_ignored:i.users[s].is_rejected,nb_subs:a,result:i.result,username:o})}else{if(i.users&&i.users.length,"undefined"==typeof e.oUser.user_id){if("undefined"==typeof e.oUser.user_name){if(!t.data||!t.data.user||!t.data.user.id_user)return;i.id=t.data.user.id_user}}else i.id=e.oUser.user_id;"undefined"!=typeof e.oUser.user_name&&(i.username=e.oUser.user_name),i.append_to=e.elts.append_to_channel,e.createBtns(i)}};"one_user"===this.sMethod&&"undefined"!=typeof e.oUser.user_name?u.loadSubInfoOneUser(this.oUser.user_name,a):u.loadSubInfoListUsers(t.dyn.login_info.profile,i,a)}},createBtns:function(e){if(!t.dyn.login_info.is_logged||!e.is_owner&&e.result&&"boolean"==typeof e.is_follower&&"string"==typeof e.csrf){var i={elts:this.elts,elts_order:this.elts_order,icons:this.icons,texts:this.texts,listeners:this.listeners,display_reject_only:this.bDisplayNotInterstedOnly,display_reject:this.bDisplayNotIntersted,sMethod:this.sMethod};this.addUserBtns(new h(e,i))}},addUserBtns:function(e){this.aUserBtns.push(e)}};var h=function(e,t){this._init(e,t)};return h.prototype={_init:function(e,t){this.csrf=e.csrf,this.id=e.id,this.bIsFollower=!!e.is_follower,this.bIsModel=!!e.is_model,this.bIsRejected=!!e.is_rejected,this.sCurrentType=null,this.username=e.username,this.nb_subs=e.nb_subs,this.options=t,this.counter=$(this.options.elts.counter),this.options.add_relateds_to="undefined"!=typeof this.options.add_relateds_to&&this.options.add_relateds_to,this.options.tooltip_hide_after="undefined"!=typeof this.options.tooltip_hide_after?this.options.tooltip_hide_after:-1,this.bInit=!1,this.loader=null,this.$BtnsSub=null,this.$BtnsReject=null,this.clicked=!1,this.tooltip=!1,this.related=null,this.options.elts_order.sub_icon=this.verifyAndCorrectPos(this.options.elts_order.sub_icon,3,5),this.options.elts_order.sub_text=this.verifyAndCorrectPos(this.options.elts_order.sub_text,this.options.elts_order.sub_icon,4),this.options.display_reject_only||(this.$btnIconSub=$(),this.$btnTextSub=$(),this.$btnIconIsSub=$(),this.$btnTextIsSub=$()),this.options.display_reject&&(this.$btnIconReject=$(),this.$btnTextReject=$(),this.$btnIconIsReject=$(),this.$btnTextIsReject=$()),this.appendBtns()},verifyAndCorrectPos:function(e,t,i){if("number"==typeof e&&-1!==[1,2,4,5].indexOf(e)||(e=i),e!==t)return e;switch(t){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4}},appendBtns:function(){var e=this;if(!this.options.display_reject_only){if("one_user"===this.options.sMethod)this.$BtnsSub=null!==this.options.elts.sub_btn?$(this.options.elts.sub_btn):$(n.render(this.options.elts.sub_btn_tpl)),this.$BtnsSub.addClass(this.options.elts.btn_class),null!==this.options.elts.append_to_channel&&this.$BtnsSub.appendTo(this.options.elts.append_to_channel);else{this.$BtnsSub=$(n.render(this.options.elts.sub_btn_tpl,{count:this.nb_subs})),this.$BtnsSub.addClass(this.options.elts.btn_class);var s=$(this.options.elts.append_to_listing.replace("%username%",this.username));"default"===t.sitename?s.append(this.$BtnsSub):(s.find(".thumb-inside").append('<span class="profile-sub"></span>'),s.find(".profile-sub").append(this.$BtnsSub))}this.$BtnsSub.each(function(){var t=null,n=null,s=null,o=null;e.options.icons.sub&&(t=$('<span class="icon-f icf-'+e.options.icons.sub+'"></span>'),$(this).append(t),e.$btnIconSub=e.$btnIconSub.add(t)),e.options.texts.sub&&(n=$('<span class="sub-state-text">'+i.unescape(e.options.texts.sub)+"</span>"),$(this).append(n),e.$btnTextSub=e.$btnTextSub.add(n)),e.options.icons.is_sub&&(s=$('<span class="icon-f icf-'+e.options.icons.is_sub+'"></span>'),$(this).append(s),e.$btnIconIsSub=e.$btnIconIsSub.add(s)),e.options.texts.is_sub&&(o=$('<span class="sub-state-text">'+i.unescape(e.options.texts.is_sub)+"</span>"),$(this).append(o),e.$btnTextIsSub=e.$btnTextIsSub.add(o)),e.setPositions($(this),t,n,s,o)})}if(this.options.display_reject){var o;this.options.elts.reject_btn?o=$(this.options.elts.reject_btn):(o=$(n.render(this.options.elts.reject_tpl)),o.addClass(this.options.elts.btn_class)),"one_user"===this.options.sMethod?null!==this.options.elts.append_to_channel?(this.$BtnsReject=o,this.$BtnsReject.appendTo(this.options.elts.append_to_channel)):this.options.display_reject_only&&this.options.elts.reject_btn?this.$BtnsReject=o:!this.options.display_reject_only&&this.$BtnsSub.length<2?(this.$BtnsReject=o,this.$BtnsReject.insertAfter(this.$BtnsSub)):(this.$BtnsReject=$(),this.$BtnsSub.each(function(){var t=$(this),i=o.clone();i.insertAfter(t),e.$BtnsReject=e.$BtnsReject.add(i)})):(this.$BtnsReject=o,s.find(".profile-sub").append(this.$BtnsReject)),this.$BtnsReject.each(function(){var t=null,n=null,s=null,o=null;e.options.icons.reject&&(t=$('<span class="icon-f icf-'+e.options.icons.reject+'"></span>'),$(this).append(t),e.$btnIconReject=e.$btnIconReject.add(t));var a=e.bIsModel?e.options.texts.ignore:e.options.texts.reject;a&&(n=$('<span class="sub-state-text">'+i.unescape(a)+"</span>"),$(this).append(n),e.$btnTextReject=e.$btnTextReject.add(n)),e.options.icons.is_rejected&&(s=$('<span class="icon-f icf-'+e.options.icons.is_rejected+'"></span>'),$(this).append(s),e.$btnIconIsReject=e.$btnIconIsReject.add(s));var r=e.bIsModel?e.options.texts.is_ignored:e.options.texts.is_rejected;r&&(o=$('<span class="sub-state-text">'+i.unescape(r)+"</span>"),$(this).append(o),e.$btnTextIsReject=e.$btnTextIsReject.add(o)),e.setPositions($(this),t,n,s,o)})}if(t.dyn.login_info&&t.dyn.login_info.is_logged){this.options.display_reject_only||this.$BtnsSub.addClass("logged-user"),this.options.display_reject&&this.$BtnsReject.addClass("logged-user")}this.initBtns()},initBtns:function(){this.options.display_reject_only||("null"!==this.options.elts.btn_display&&this.$BtnsSub.css("display",this.options.elts.btn_display),this.$BtnsSub.prop("title",i.unescape(this.bIsFollower?this.options.texts.unsub:this.options.texts.sub_title))),this.options.display_reject&&("null"!==this.options.elts.btn_display&&this.$BtnsReject.css("display",this.options.elts.btn_display),this.$BtnsReject.prop("title",i.unescape(this.bIsRejected?this.bIsModel?this.options.texts.unignore:this.options.texts.unreject:this.bIsModel?this.options.texts.ignore_title:this.options.texts.reject_title))),this.enableBtnsClick(),this.bInit=!0,this.onClickEnded(this.bIsFollower,this.bIsRejected,null,null);var e=this;u.addUserUpdateCallback(this.id,function(t){e.onClickEnded(t.is_follower,t.is_rejected,t.nb_subs_formatted?t.nb_subs_formatted:t.nb_subs?t.nb_subs:null,e.$BtnsSub.filter(":visible"))})},setPositions:function(e,t,i,n,s){t&&i?this.options.elts_order.sub_text<3?(this.options.elts_order.sub_icon<3&&this.options.elts_order.sub_icon>this.options.elts_order.sub_text&&e.prepend(t),e.prepend(i),this.options.elts_order.sub_icon<3&&this.options.elts_order.sub_icon<this.options.elts_order.sub_text&&e.prepend(t),this.options.elts_order.sub_icon>3&&e.append(t)):(this.options.elts_order.sub_icon>3&&this.options.elts_order.sub_icon<this.options.elts_order.sub_text&&e.append(t),e.append(i),this.options.elts_order.sub_icon>3&&this.options.elts_order.sub_icon>this.options.elts_order.sub_text&&e.append(t)):t?this.options.elts_order.sub_icon<3?e.prepend(t):e.append(t):i&&(this.options.elts_order.sub_text<3?e.prepend(i):e.append(i)),n&&s?this.options.elts_order.is_sub_text<3?(this.options.elts_order.is_sub_icon<3&&this.options.elts_order.is_sub_icon>this.options.elts_order.is_sub_text&&e.prepend(n),e.prepend(s),this.options.elts_order.is_sub_icon<3&&this.options.elts_order.is_sub_icon<this.options.elts_order.is_sub_text&&e.prepend(n),this.options.elts_order.is_sub_icon>3&&e.append(n)):(this.options.elts_order.is_sub_icon>3&&this.options.elts_order.is_sub_icon<this.options.elts_order.is_sub_text&&e.append(n),e.append(s),this.options.elts_order.is_sub_icon>3&&this.options.elts_order.is_sub_icon>this.options.elts_order.is_sub_text&&e.append(n)):n?this.options.elts_order.is_sub_icon<3?e.prepend(n):e.append(n):s&&(this.options.elts_order.is_sub_text<3?e.prepend(s):e.append(s))},disableBtnsClick:function(){this.options.display_reject_only||this.$BtnsSub.off("click"),this.options.display_reject&&this.$BtnsReject.off("click")},enableBtnsClick:function(){var e=this;this.options.display_reject_only||this.$BtnsSub.on("click",function(t){e.onClick(t,"sub-btn")}),this.options.display_reject&&this.$BtnsReject.on("click",function(t){e.onClick(t,"reject-btn")})},onClick:function(e,t){e.preventDefault();var i=this;if(this.bClicked)return!1;this.bClicked=!0,this.sCurrentType=t;var n,s,i=this,o=$(e.currentTarget);"sub-btn"===t?(n=!this.bIsFollower)&&(s=!1):(s=!this.bIsRejected)&&(n=!1),this.disableBtnsClick();var a=this.csrf,r=function(e){e.related&&(i.related="undefined"!=typeof e.related&&e.related),e.result&&i.onClickEnded(n,s,e.nb_subs_formatted,o)},d=function(){u.unfollow(i.username,a,r)},c=function(){u.cancelReject(i.username,a,r)},f=function(e){e&&e.message&&i.set_tooltip(e.message,!1,-1!==i.options.tooltip_hide_after?i.options.tooltip_hide_after:3e3,o),i.onCancelEnded()};if(this.loadStart(o),"sub-btn"===t)this.bIsFollower?this.options.texts.confirm_unfollow?l.confirm(this.options.texts.confirm_unfollow,d,f):d():u.follow(this.username,a,r,f);else if(this.bIsRejected){var h=this.bIsModel?this.options.texts.confirm_unignore:this.options.texts.confirm_unreject;h?l.confirm(h,c,f):d()}else u.reject(this.username,a,r,f)},updateBtns:function(){this.options.display_reject_only||(this.bIsFollower?(this.$BtnsSub.prop("title",i.unescape(this.options.texts.unsub)).addClass("active"),this.$btnIconSub&&this.$btnIconSub.length&&this.$btnIconSub.hide(),this.$btnTextSub&&this.$btnTextSub.length&&this.$btnTextSub.hide(),
this.$btnIconIsSub&&this.$btnIconIsSub.length&&this.$btnIconIsSub.show(),this.$btnTextIsSub&&this.$btnTextIsSub.length&&this.$btnTextIsSub.show()):(this.$BtnsSub.prop("title",i.unescape(this.options.texts.sub_title)).removeClass("active"),this.$btnIconSub&&this.$btnIconSub.length&&this.$btnIconSub.show(),this.$btnTextSub&&this.$btnTextSub.length&&this.$btnTextSub.show(),this.$btnIconIsSub&&this.$btnIconIsSub.length&&this.$btnIconIsSub.hide(),this.$btnTextIsSub&&this.$btnTextIsSub.length&&this.$btnTextIsSub.hide())),this.options.display_reject&&(this.$BtnsReject.toggleClass("no-active",this.bIsFollower),this.$BtnsReject.toggleClass("hidden",this.bIsFollower),this.bIsRejected?(this.$BtnsReject.prop("title",i.unescape(this.bIsModel?this.options.texts.unignore:this.options.texts.unreject)).addClass("active"),this.$BtnsReject&&this.$BtnsSub&&this.$BtnsSub.addClass("user-reject-active"),this.$btnIconReject&&this.$btnIconReject.length&&this.$btnIconReject.hide(),this.$btnTextReject&&this.$btnTextReject.length&&this.$btnTextReject.hide(),this.$btnIconIsReject&&this.$btnIconIsReject.length&&this.$btnIconIsReject.show(),this.$btnTextIsReject&&this.$btnTextIsReject.length&&this.$btnTextIsReject.show(),this.options.display_reject_only||this.$BtnsSub.addClass("no-active")):(this.$BtnsReject.prop("title",i.unescape(this.bIsModel?this.options.texts.ignore_title:this.options.texts.reject_title)).removeClass("active"),this.$BtnsSub&&this.$BtnsSub.removeClass("user-reject-active"),this.$btnIconReject&&this.$btnIconReject.length&&this.$btnIconReject.show(),this.$btnTextReject&&this.$btnTextReject.length&&this.$btnTextReject.show(),this.$btnIconIsReject&&this.$btnIconIsReject.length&&this.$btnIconIsReject.hide(),this.$btnTextIsReject&&this.$btnTextIsReject.length&&this.$btnTextIsReject.hide(),this.options.display_reject_only||this.$BtnsSub.removeClass("no-active")))},onClickEnded:function(e,n,s,a){if(this.bInit?("boolean"==typeof e&&(this.bIsFollower=e,this.bIsFollower&&(this.bIsRejected=!1)),t.dyn.login_info.is_logged&&"boolean"==typeof n&&(this.bIsRejected=n,this.bIsRejected&&(this.bIsFollower=!1))):this.initBtns(),this.updateBtns(),this.bClicked){if(this.loader&&this.loadStop(),t.dyn.login_info.is_logged&&this.counter&&null!==s&&this.counter.text(s),this.enableBtnsClick(),this.bIsFollower?"function"==typeof this.options.listeners.onSub&&this.options.listeners.onSub():this.bIsRejected?"function"==typeof this.options.listeners.onReject&&this.options.listeners.onReject():"function"==typeof this.options.listeners.onUnsub&&this.options.listeners.onUnsub(),null!==a&&this.options.elts.tooltip&&"sub-btn"===this.sCurrentType){var r=this;this.bIsFollower?require(["mustache","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(e,n,s){var l=[],d="",u=0;if($.isArray(r.related)){var c=t.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",f=r.options.add_relateds_to?r.options.add_relateds_to.related_users:r.related_users;for(var h in r.related)"undefined"==typeof f[r.related[h].id]&&(f[r.related[h].id]=r.related[h],r.related[h].img='<img title="'+r.related[h].username_display+'" src="'+(r.related[h].thumb?r.related[h].thumb:c)+'" onerror="this.src=\''+c+"'; this.onerror=null;\" />",r.related[h].div_sub_id="profile-related-sub-"+r.related[h].id+"-"+Math.ceil(1e4*Math.random()),r.related[h].about_me&&(r.related[h].about_me=$("<div>").html(r.related[h].about_me).text()),l.push({user_id:r.related[h].id,user_name:r.related[h].username,nb_subs:r.related[h].nb_subs,append_btn_to:"#"+r.related[h].div_sub_id,btn_class:"sub-strip"}),d+=e.render(s,r.related[h]),u++)}var p=$(e.render(n,{subscribed:i.unescape(o.__("subscriptions.subscribed")),view_activities:i.unescape(o.__("subscriptions.view_activities")),also_like:i.unescape(o.__("user.you_may_also_like")),hide_view_activities:!1!==r.options.add_relateds_to,has_related:!1===r.options.add_relateds_to&&l.length>0,related_html:d})),_=Math.floor(($(window).width()-50)/140),g=u>_?_:u,m=140*g;if(p.find(".profileslist").css("width",m+"px").addClass("nb-profile-per-line-"+g),!0===r.options.elts.tooltip_validation&&r.set_tooltip(p,!0,-1!==r.options.tooltip_hide_after?r.options.tooltip_hide_after:!(l.length>0)&&3500,a),l.length>0){if(!1!==r.options.add_relateds_to){var b=r.options.add_relateds_to.tooltip?r.options.add_relateds_to.tooltip:!!r.options.add_relateds_to.popup&&r.options.add_relateds_to.popup;"object"==typeof b&&$(b.popup).length>0&&$(b.popup).find(".profileslist").append($(d))}require(["skins/default/profile/subscribe/btns"],function(e){e(l,{sub_options:{add_relateds_to:r.options.add_relateds_to?r.options.add_relateds_to:r,tooltip_hide_after:1e3}})})}"function"==typeof r.options.end_function&&r.options.end_function(r.username,is_follower)}):(!0===this.options.elts.tooltip_validation&&this.set_tooltip(o.__("subscriptions.unsubscribed"),!1,-1!==r.options.tooltip_hide_after?r.options.tooltip_hide_after:3e3,a),"function"==typeof this.options.end_function&&this.options.end_function(this.username,is_follower))}this.bClicked=!1}},onCancelEnded:function(){this.bClicked&&(this.loader&&this.loadStop(),this.enableBtnsClick(),this.bClicked=!1)},loadStart:function(e){e.addClass("wait").prop("title",""),this.loader||(this.loader=$('<span class="loader"></span>').appendTo(e)),this.loader.append(d.getSafe().getHtml())},loadStop:function(){this.loader.parents(".wait").removeClass("wait"),this.loader.remove(),this.loader=null},set_tooltip:function(e,t,i,n){this.tooltip?(this.tooltip.setButton(n),this.tooltip.setContent(e,"string"!=typeof e),this.tooltip.setOption("autoclose","number"!=typeof i||i),this.tooltip.setOption("closebtn","number"!=typeof i||i>5500),this.tooltip.open()):(this.tooltip=new r,this.tooltip.create(e,n,{is_html:t,autoclose_timer:i,popup_class:"video-subscribe-popup"+("string"==typeof this.options.tooltip_class?" "+this.options.tooltip_class:""),autoclose_on_same_level:this.options.add_relateds_to?"profile_related_submit":"profile_submit"}),this.tooltip.open())}},f}),define("text!skins/common/profile/subscribe/btn_reject.mustache",[],function(){return'<span class="user-reject"></span>'}),define("skins/default/profile/subscribe/btns_controler",["config/main","lib/tools","lib/i18n!front","skins/common/profile/subscribe/btns_controler","text!skins/common/profile/subscribe/btn_reject.mustache","text!skins/default/profile/subscribe/btn_sub.mustache"],function(e,t,i,n,s,o){var a={uploader:{},uploaders:{},elts:{sub_btn:"#profile-title .user-subscribe",sub_btn_tpl:o,append_to_listing:"#profile_%username% .profile-counts .with-sub",btn_class:"sub-strip",btn_display:"flex",counter:"#profile-title .count",reject_tpl:s,tooltip:!0,tooltip_validation:!0},elts_order:{sub_text:1,is_sub_icon:4,is_sub_text:5},icons:{is_sub:"feed"},texts:{confirm_unfollow:i.__("subscriptions.confirm_subscribed"),confirm_unreject:i.__("misc.confirm_cancel_not_interested"),confirm_unignore:i.__("subscriptions.confirm_stop_ignoring"),sub:i.__("subscriptions.subscribe"),reject:i.__("misc.not_interested"),ignore:i.__("misc.ignore"),is_sub:i.__("profile.subscribed"),is_rejected:i.__("misc.cancel_not_interested"),is_ignored:i.__("subscriptions.unignore"),sub_title:i.__("subscriptions.subscribe"),reject_title:i.__("misc.not_interested"),ignore_title:i.__("misc.ignore"),unsub:i.__("subscriptions.unsubscribe"),unreject:i.__("misc.cancel_not_interested"),unignore:i.__("subscriptions.is_ignored_unignored")},listeners:{}},r=function(e){this._init(e)};return Object.setPrototypeOf(r.prototype,n.prototype),r.prototype._init=function(e){e&&"object"==typeof e||(e={}),"undefined"==typeof e.uploaders&&"undefined"==typeof e.uploader&&(e.uploaders=[]);var i={};t.initParams(i,e,a),n.prototype._init.apply(this,[i])},r}),define("skins/default/favorite",["config/main","skins/form/validator","./profile/vote/light","lib/helpers/thumbs_rotator","./header/header"],function(e,t,i){if("undefined"==typeof e.data.fav_list){var n=$("#playlist-access");return void(n.length>0&&new t(n,e.data.playlist_access_validation_rules))}var s=e.data.fav_list;new i($("#fav-list-votes"),s.rating,s.vrating,s.total,s.visitor_vote).initPostData("/api/playlists/list/"+s.id_list+"/vote/GOOD","/api/playlists/list/"+s.id_list+"/vote/BAD",{csrf:s.csrf_vote,id_user:s.id_user});var o=$("#profile-title .user-subscribe");o.length>0&&require(["skins/default/profile/subscribe/btns_controler"],function(t){new t({uploader:{user_id:e.data.user.id_user,user_name:e.data.user.username,csrf:e.data.user.csrf.sub||""},elts:{sub_btn:o},texts:{is_sub:"",sub:""}})});var a=$("#profile-title .playlist-edit");a.length>0&&require(["skins/default/video/playlists/manager"],function(e){a.on("click",function(t){t.preventDefault(),e.loadEditPlayList(s.id_list)}),e.autoOpenByHash()})}),define("skins/common/global_feed/user",[],function(){var e=function(){};return e.buildFromJSON=function(t){t.th;return t.thp&&"video"===t.tht&&t.thp,(new e).setId(t.i).setUsername(t.u).setDisplayName(t.d).setUrl(t.url).setIsPornstar(t.ps).setIsChannel(t.ch).setCountryCode(t.c).setCountryName(t.cn).setThumb(t.th).setNbSubscribers(t.ns).setNbSubscribersFormatted(t.nsf).setIsSubscribed(t.scb).setIsRejected(t.sr)},e.buildFromUser=function(t){var i=new e;return Object.assign(i,t),i},e.TYPE={REGULAR:"REGULAR",CHANNEL:"CHANNEL",MODEL:"MODEL"},e.prototype={setId:function(e){return this.sId=e,this},setUsername:function(e){return this.sUsername=e,this},setDisplayName:function(e){return this.sDisplayName=e,this},setUrl:function(e){return this.sUrl=e,this},setIsPornstar:function(e){return this.bIsPornstar=e,this},setIsChannel:function(e){return this.bIsChannel=e,this},setCountryCode:function(e){return this.sCountryCode=e,this.sCountryCodeLower=e.toLowerCase(),this},setCountryName:function(e){return this.sCountryName=e,this},setThumb:function(e){return this.sThumb=e,this},setNbSubscribers:function(e){return this.iNbSubscribers=e,this},setNbSubscribersFormatted:function(e){return this.sNbSubscribersFormatted=e,this},setIsSubscribed:function(e){return this.bIsSubscribed=e,this},setIsRejected:function(e){return this.bIsRejected=e,this},getType:function(){return this.bIsChannel?e.TYPE.CHANNEL:this.bIsPornstar?e.TYPE.MODEL:e.TYPE.REGULAR}},e}),define("skins/common/global_feed/post/post",["static/log"],function(e){var t=function(){};return t.POST_TYPE={FREE_VIDEO:"fv",PREMIUM_VIDEO:"pv",FREE_MODEL_ASSOCIATION_VIDEO:"fmav",PREMIUM_MODEL_ASSOCIATION_VIDEO:"fpav",FAN_CLUB_POST:"fcp",GALLERY_PICTURES:"gp",PLAYLIST_VIDEOS:"plv",VIDEO_VIEWS_ACHIEVED:"vva",BANNER_NEW_UPLOADS:"buvn",BANNER_NEW_ASSOC:"bavn",BANNER_RECENTLY_WATCHED:"buvr",BANNER_RECENTLY_WATCHED_ASSOC:"bavr"},t.POST_TYPES=Object.entries(t.POST_TYPE).reduce(function(e,t){return e[t[1]]=t[0],e},{}),t.POST_GENERATOR={VIDEO:"VIDEO",GALLERY:"GALLERY",TEXT:"TEXT",PLAYLIST:"PLAYLIST",VIEWS_ACHIEVED:"VIEWS_ACHIEVED",BANNER_NEW_UPLOADS:"BANNER_NEW_UPLOADS",BANNER_NEW_ASSOC:"BANNER_NEW_ASSOC",BANNER_RECENTLY_WATCHED:"BANNER_RECENTLY_WATCHED",BANNER_RECENTLY_WATCHED_ASSOC:"BANNER_RECENTLY_WATCHED_ASSOC"},t.buildFromJSON=function(i){if(!i)return undefined;var n=(new t).setType(i.et).setId(i.i).setTimestamp(i.t).setUserId(i.u).setLink(i.l).setVideos(i.v).setPictures(i.p).setGroupPosts(i.g).setPaid(i.ip).setPremiumSub(i.pms).setPurchased(i.hp).setIsPPV(i.pmp).setIsMembership(i.pmf).setPPVPrice(i.pppf).setNbVideosPlaylist(i.nvf),s=i.ti,o=i.c;!o&&n.hasVideo()&&n.aVideos[0].tf!==s?o=n.aVideos[0].tf:!s&&o&&n.hasVideo()&&n.isVideo()&&(s=n.aVideos[0].tf);var a=i.ou;a&&n.setOtherUserId(a);var r=i.ous;return r&&r.length?n.setOtherUserIds(r):n.setOtherUserIds([]),n.isPlaylist()&&n.setPlaylistUrl(i.l),n.isVideoViewsAchieved()&&n.setNbViews(i.nv),i.vd&&n.setViewData(i.vd),n.setComment(o),n.setTitle(s),n.sComment===n.sTitle&&delete n.sComment,e.debug("Post content locked :",n.isContentLocked()," ppv ?",n.isPPV," membership ?",n.isMembership,"(pm:",n.isPaid," pms:",n.isPremiumSub," hp:",n.isPurchased,")"),n},t.prototype={getGenerator:function(){return this.sType===t.POST_TYPE.BANNER_NEW_UPLOADS?t.POST_GENERATOR.BANNER_NEW_UPLOADS:this.sType===t.POST_TYPE.BANNER_NEW_ASSOC?t.POST_GENERATOR.BANNER_NEW_ASSOC:this.sType===t.POST_TYPE.BANNER_RECENTLY_WATCHED?t.POST_GENERATOR.BANNER_RECENTLY_WATCHED:this.sType===t.POST_TYPE.BANNER_RECENTLY_WATCHED_ASSOC?t.POST_GENERATOR.BANNER_RECENTLY_WATCHED_ASSOC:this.sType===t.POST_TYPE.PLAYLIST_VIDEOS?t.POST_GENERATOR.PLAYLIST:this.sType===t.POST_TYPE.VIDEO_VIEWS_ACHIEVED?t.POST_GENERATOR.VIEWS_ACHIEVED:this.hasVideo()?t.POST_GENERATOR.VIDEO:this.hasPicture()?t.POST_GENERATOR.GALLERY:t.POST_GENERATOR.TEXT},isPlaylist:function(){return this.sType===t.POST_TYPE.PLAYLIST_VIDEOS},hasVideoThumbMobilePreview:function(){return this.sType===t.POST_TYPE.PLAYLIST_VIDEOS||this.sType===t.POST_TYPE.BANNER_NEW_UPLOADS},isVideo:function(){return this.sType===t.POST_TYPE.FREE_VIDEO||this.sType===t.POST_TYPE.PREMIUM_VIDEO||this.sType===t.POST_TYPE.FREE_MODEL_ASSOCIATION_VIDEO||this.sType===t.POST_TYPE.PREMIUM_MODEL_ASSOCIATION_VIDEO||this.sType===t.POST_TYPE.FAN_CLUB_POST&&this.hasVideo()},isBanner:function(){return this.sType===t.POST_TYPE.BANNER_NEW_UPLOADS||this.sType===t.POST_TYPE.BANNER_NEW_ASSOC||this.sType===t.POST_TYPE.BANNER_RECENTLY_WATCHED||this.sType===t.POST_TYPE.BANNER_RECENTLY_WATCHED_ASSOC},isVideoViewsAchieved:function(){return this.sType===t.POST_TYPE.VIDEO_VIEWS_ACHIEVED},hasVideo:function(){return this.aVideos.length>0},hasPicture:function(){return this.aPictures.length>0},isTextOnly:function(){return(this.sComment||this.sTitle)&&!this.hasVideo()&&!this.hasPicture()},getMainThumb:function(){return this.isTextOnly()?undefined:this.hasVideo()?this.aVideos[0].i:this.hasPicture()?this.aPictures[0].t:void 0},getSecondaryThumbs:function(e){return this.hasVideo()?this.aVideos[0].bi.slice(0,e).map(function(e){return e.i}):this.hasPicture()?this.aPictures.slice(1,e).map(function(e){return e.t}):[]},setType:function(i){return t.POST_TYPES[i]||e.warn("Unhandled post type "+i),this.sType=i,this},setId:function(e){return this.sId=e,this},setTimestamp:function(e){return this.iTimestamp=e,this},setUserId:function(e){return this.sUserId=e,this},setOtherUserId:function(e){return this.sOtherUserId=e,this},setOtherUserIds:function(e){return this.aOtherUserIds=e,this},setLink:function(e){return this.sLink=e,this},setComment:function(e){return this.sComment=e,this},setTitle:function(e){return this.sTitle=e,this},setVideos:function(e){return this.aVideos=e||[],this},setPictures:function(e){return this.aPictures=e||[],this},setGroupPosts:function(e){return this.aGroupPosts=e?e.map(function(e){return t.buildFromJSON(e)}):[],this},setPlaylistUrl:function(e){return this.sPlaylistUrl=e,this},setNbViews:function(e){return this.sNbViews=e,this},setViewData:function(e){return this.sViewData=e,this},hasViewData:function(){return!!this.sViewData},setPaid:function(e){return this.isPaid="boolean"==typeof e&&e,this},setPremiumSub:function(e){return this.isPremiumSub="boolean"==typeof e&&e,this},setPurchased:function(e){return this.isPurchased="boolean"==typeof e&&e,this},isContentLocked:function(){return!this.isBanner()&&(!0===this.isPaid&&!1===this.isPurchased)},setIsPPV:function(e){return this.isPPV="boolean"==typeof e&&e,this},setIsMembership:function(e){return this.isMembership="boolean"==typeof e&&e,this},setPPVPrice:function(e){return this.sPPVPrice=e,this},isBothPPVMembership:function(){return!0===this.isPPV&&!0===this.isMembership},setNbVideosPlaylist:function(e){return this.sNbVideosPlaylist=e,this},isQuickies:function(){return 1===this.aVideos.length&&!!this.aVideos[0].iq}},t}),define("text!skins/common/global_feed/no_more_posts.mustache",[],function(){return'<div class="no-more-posts">{{{ sNoMorePosts }}}</div>'}),define("text!skins/common/global_feed/cover_invalid_filters.mustache",[],function(){return'<div class="feed-main-message cover-invalid-filters">\n    <div class="feed-main-message-text filter-reset-text">{{{ sNoMatchFilters }}}</div>\n    <div class="feed-main-message-btn filter-reset-btn">\n        <input type="button" class="btn btn-default" value="{{{ sResetFilters }}}">\n    </div>\n</div>'}),define("text!skins/common/global_feed/cover_internal_error.mustache",[],function(){return'<div class="feed-main-message cover-interal-error">\n    <div class="feed-main-message-text error-retry-text">{{{ sInternalError }}}</div>\n    <div class="feed-main-message-btn error-retry-btn">\n        <input type="button" class="btn btn-default" value="{{{ sRetry }}}">\n    </div>\n</div>'}),define("text!skins/common/global_feed/cover_server_message.mustache",[],function(){return'<div class="feed-main-message cover-server-message">\n    <div class="feed-main-message-text filter-message-text">{{{ sServerMessage }}}</div>\n</div>'});define("text!skins/common/global_feed/scroll_to_top.mustache",[],function(){return'<div class="scroll-to-top">\n    {{{ sScrollToTop }}}\n</div>'}),define("text!skins/common/global_feed/post/preview_tpls/see_more_posts_container.mustache",[],function(){return'<div class="see-more-posts">\n    <div class="see-more-posts-text-container">\n        <div class="see-more-posts-text">\n            <span>{{{ sSeeMore }}}</span>\n            <div class="icon-f icf-angle-right"></div>\n        </div>\n    </div>\n    <div class="more-posts-preview">{{{ sPostsPreviewHtml }}}</div>\n    <div class="more-posts-container"></div>\n</div>'}),define("text!skins/common/global_feed/post/preview_tpls/post_preview_text.mustache",[],function(){return"<div class='post-preview p-icon-bg'>\n    <div class=\"post-preview-text\">\n        {{{ sComment }}}\n    </div>\n</div>"}),define("text!skins/common/global_feed/post/preview_tpls/post_preview_picture.mustache",[],function(){return'<div class="post-preview p-glass-effect">\n    <img loading="lazy" src=\'{{{ sThumb }}}\'/>\n</div>'}),define("skins/common/global_feed/post/post_preview_generator",["mustache","lib/i18n!front","lib/tools","text!./preview_tpls/see_more_posts_container.mustache","text!./preview_tpls/post_preview_text.mustache","text!./preview_tpls/post_preview_picture.mustache"],function(e,t,i,n,s,o,a){var r={oOptions:{aPosts:undefined,sUser:undefined,$container:undefined,nb_thumbs_goal:30,nb_total_remaining:0,oListeners:{afterReady:function(e){},afterClick:function(e){}}},oTranslations:{see_nb_more_posts_from:"global_feed.see_nb_more_posts_from",see_one_more_post_from:"global_feed.see_one_more_post_from"},oTemplates:{see_more_posts_container:n,post_preview_text:s,post_preview_picture:o,post_preview_see_more:a}},l=function(e){i.initParams(this,e,r),this.init()};return l.prototype={init:function(){this.iNbFill=Math.max(0,this.oOptions.nb_thumbs_goal-this.oOptions.aPosts.length),this.$container=this.oOptions.$container.appendChild($(this.getContainerHtml())[0]),this.$nextPostsContainer=this.$container.querySelector(".more-posts-container"),this.onReady()},handleClick:function(){var e=this;$(e.$container).toggleClass("view",!0),$(e.$container).toggleClass("p-glass-effect",!1),"function"==typeof e.oOptions.oListeners.afterClick&&e.oOptions.oListeners.afterClick(e)},onReady:function(){var e=this;this.$container.addEventListener("click",function(){e.handleClick()}),"function"==typeof this.oOptions.oListeners.afterReady&&this.oOptions.oListeners.afterReady(this)},getContainerHtml:function(){return e.render(this.oTemplates.see_more_posts_container,{sSeeMore:this.getSeeMore(),sPostsPreviewHtml:this.getPostsPreviewHtml()})},getPostsPreviewHtml:function(){var e=this;return this.oOptions.aPosts.map(function(t){return e.getPostPreviewHtml(t)}).concat(this.getFillThumbs()).join("")},getSeeMore:function(){if(1===this.oOptions.aPosts.length)return t.__(this.oTranslations.see_one_more_post_from,{"%user%":this.oOptions.sUser});var e=this.oOptions.aPosts.length.toString();return e<this.oOptions.nb_total_remaining&&(e+="/"+this.oOptions.nb_total_remaining),e='<span class="see-more-nb">'+e+"</span>",t.__(this.oTranslations.see_nb_more_posts_from,{"%nb%":e,"%user%":this.oOptions.sUser})},getPostPreviewHtml:function(t){t.sThumb=t.getMainThumb();var i=this.oTemplates.post_preview_picture;return t.sThumb===undefined&&(i=this.oTemplates.post_preview_text),e.render(i,t)},getFillThumbs:function(){if(this.iNbFill<=0)return[];for(var t=this,i=[],n=this.oOptions.aPosts.map(function(e){return JSON.parse(JSON.stringify(e.getSecondaryThumbs(t.iNbFill)))}),s=!1,o=0;i.length<this.iNbFill;){var a=n[o].shift();if(a&&(s=!0,i.push(a)),++o>=n.length){if(!s)break;o=0,s=!1}}return i.map(function(i){return e.render(t.oTemplates.post_preview_picture,{sThumb:i})})}},l}),define("lib/helpers/viewer/lightgallery_css_loader",["config/main"],function(e){var t=function(){this.bIsCssCalled=!1,this.bIsCssLoaded=!1};return t.prototype={loadCssLightgallery:function(){if(!0!==this.bIsCssCalled&&!0!==this.bIsCssLoaded){this.bIsCssCalled=!0;var t=this;$.get({url:e.domains["static"]+"/v-"+e.dyn.thvers.lg+"/v3/css/"+e.sitename+"/lightgallery.css",success:function(e){!0!==t.bIsCssLoaded&&($("body").append('<style id="lg-styles">'+e+"</style>"),t.bIsCssLoaded=!0)},error:function(){t.bIsCssCalled=!1}})}}},new t}),define("lib/helpers/viewer/lightgallery-generic-manager",["static/utils","lib/i18n!front","libs/lightgallery.min"],function(e,t){"object"!=typeof xv&&(xv={}),"object"!=typeof xv.oLG&&(xv.oLG={}),"number"!=typeof xv.oLG.iGalIdCount&&(xv.oLG.iGalIdCount=0);var i={image_max:"misc.image_max",gallery_link:"misc.show_all_pictures"},n=!1,s=function(){var s=document.createElement("button"),o=document.createElement("span"),a=$(".lg-outer");s.setAttribute("type","button"),s.setAttribute("id","lg-zoom-max"),s.setAttribute("aria-label","Zoom max"),s.setAttribute("title",e.unescape(t.__(i.image_max))),s.classList.add("lg-icon"),o.classList.add("icon-f"),o.classList.add("icf-stretch"),s.appendChild(o),$("#lg-zoom-in").remove(),$("#lg-zoom-out").remove(),$(".lg-toolbar").append(s),s.addEventListener("click",function(){n=!n,a.toggleClass("lg-stretched",n)})},o=function(n){var s=document.createElement("button"),o=document.createElement("span");s.setAttribute("type","button"),s.setAttribute("id","lg-gallery-link"),s.setAttribute("aria-label","Gallery link"),s.setAttribute("title",e.unescape(t.__(i.gallery_link))),s.classList.add("lg-icon"),o.classList.add("icon-f"),o.classList.add("icf-images"),s.appendChild(o),$(".lg-toolbar").append(s),s.addEventListener("click",function(){$(".lg-close.lg-icon").click(),$(window).on("onCloseAfter.lg.done",function(){n()})})},a=!1;return function(e,t,i){this.bIsOpen=!1;var r=this;require(["config/main","static/utils","lib/i18n!front","lib/helpers/viewer/lightgallery_css_loader","libs/lg-zoom.min","libs/lg-fullscreen.min","libs/lg-hash.min"],function(l,d,u,c){i=i||{},xv.oLG.iGalIdCount++;var f={selector:t,closeOnClick:"boolean"==typeof i.close_on_click&&i.close_on_click,download:"boolean"==typeof i.download&&i.download,fullScreen:"boolean"!=typeof i.fullscreen||i.fullscreen,exThumbImage:"string"==typeof i.src_attr?i.src_attr:"data-src",hash:"boolean"==typeof i.hash&&i.hash,galleryId:xv.oLG.iGalIdCount,stretchEnabled:"boolean"==typeof i.stretchEnabled&&i.stretchEnabled,onGalleryLink:"function"==typeof i.onGalleryLink&&i.onGalleryLink,bBodyNoScroll:"boolean"==typeof i.bBodyNoScroll&&i.bBodyNoScroll,bBodyNoScrollSticky:"boolean"!=typeof i.bBodyNoScrollSticky||i.bBodyNoScrollSticky,hideBarsDelay:"number"==typeof i.hideBarsDelay?i.hideBarsDelay:1e3},h=$(e).lightGallery(f).on("onBeforeOpen.lg",function(){c.loadCssLightgallery(),"function"==typeof i.fnBeforeOpen&&i.fnBeforeOpen()}).on("onAfterOpen.lg",function(){c.loadCssLightgallery(),r.bIsOpen=!0,f.bBodyNoScroll&&!f.bBodyNoScrollSticky?($("body").addClass("no-scroll"),$("body").removeClass("no-scroll-sticky")):f.bBodyNoScrollSticky&&($("body").removeClass("no-scroll"),$("body").addClass("no-scroll-sticky")),"string"==typeof i.title&&$("#lg-counter").prepend("<div>"+i.title+"</div>"),$("#lg-zoom-in").attr("title",d.unescape(u.__("misc.image_larger"))).append('<span class="icon-f icf-search-plus"></span>'),$("#lg-zoom-out").attr("title",d.unescape(u.__("misc.image_reduce"))).append('<span class="icon-f icf-search-minus"></span>'),$("#lg-actual-size").attr("title",d.unescape(u.__("misc.image_normal_size"))).append('<span class="icon-f icf-resolution"></span>'),$(".lg-close").attr("title",d.unescape(u.__("misc.close"))).append('<span class="icon-f icf-close"></span>'),$(".lg-fullscreen").attr("title",d.unescape(u.__("misc.fullscreen"))).append('<span class="icon-f icf-fullscreen"></span>'),$(".lg-prev").attr("title",d.unescape(u.__("misc.previous"))).append('<span class="icon-f icf-chevron-left"></span>'),$(".lg-next").attr("title",d.unescape(u.__("misc.next"))).append('<span class="icon-f icf-chevron-right"></span>'),$(".lg-item").each(function(){$(this).append('<span class="loader icon-f icf-spinner icf-anim-pulse"></span>')}),f.stretchEnabled&&s(),f.onGalleryLink&&o(f.onGalleryLink),n&&$(".lg-outer").toggleClass("lg-stretched",!0),"function"==typeof i.fnOnOpen&&i.fnOnOpen()}).on("onCloseAfter.lg",function(){r.bIsOpen=!1,$("body").removeClass("no-scroll no-scroll-sticky"),"function"==typeof i.fnOnClose&&(i.fnOnClose(),$(window).trigger("onCloseAfter.lg.done"))});!a&&h.length>0&&(a=!0,document.addEventListener("fullscreenchange",function(){var e=$(".lg-fullscreen").find(".icon-f");e.hasClass("icf-fullscreen")?e.addClass("icf-fullscreen-back").removeClass("icf-fullscreen"):e.addClass("icf-fullscreen").removeClass("icf-fullscreen-back")}))})}}),define("text!skins/common/global_feed/post/tpls/post_base.mustache",[],function(){return'<div\n\tclass="post-block {{ sVideos }} {{ sPictures }} {{ sPremium }} {{ sNoExtend }} {{ sFakeText }} {{ sReducedMobile }}"\n\tdata-post="{{ sPostId }}"\n\tdata-channel="{{ iUploaderId }}"\n\tstyle="position: absolute; top: {{ oOptions.iTopPosition }}px; left: {{ oOptions.iLeftPosition }}px;"\n>\n\t{{{ sHead }}}\n\t<div class="p-gallery p-icon-bg p-glass-effect {{ sSmallText }}">\n\t\t{{{ sHtmlGallery }}}\n\t</div>\n\t<div class="p-display-min p-show-more-button"><span class="icon-f icf-angle-down"></span></div>\n\t{{{ sHtmlAllGallery }}}\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_head.mustache",[],function(){return'<div class="p-head">\n\t{{{ sHtmlMetadata }}}\n\t{{{ sHtmlMobileComment }}}\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_metadata.mustache",[],function(){return'<div class="p-metadata">\n    {{{ sHtmlUploader }}}\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_gallery.mustache",[],function(){return'<div class="p-pics {{ sPostTypeClass }}">\n    {{{ sHtml }}}\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_gallery_frame.mustache",[],function(){return'<div class="p-frame p-frame-{{iNb}}">\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_thumb.mustache",[],function(){return'\n<div class="pic {{ sLocked }} {{ sRedCache }} p-frame p-frame-{{ iNb }} {{{ sGallery }}} {{{ sPreview }}} {{{ sHiddenGallery }}} {{{ sExtendView }}}">\n    <div class="thumb fill-icon" title="{{{ sPreviewTooltip }}}">\n        <a href="{{ sImgLink }}">\n            <img loading="lazy" src="{{{ sSrc }}}" data-src="{{ sFull }}"/>\n        </a>\n    </div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_pic.mustache",[],function(){return'\n<div class="pic {{ sLocked }} {{ sRedCache }} p-frame p-frame-{{ iNb }} {{{ sGallery }}} {{{ sPreview }}} {{{ sHiddenGallery }}} {{{ sExtendView }}}">\n    <div class="thumb">\n        <div class="fit-image {{#sWithDesktop2cols}}{{{sWithDesktop2cols}}}{{/sWithDesktop2cols}}">\n            <img loading="lazy" src="{{{ sSrc }}}" data-src="{{ sFull }}"/>\n            {{#sNbGalleryMoreTablet}}<div class="p-gallery-seemore p-gallery-more-tablet">+ {{{ sNbGalleryMoreTablet }}}</div>{{/sNbGalleryMoreTablet}}\n            {{#sNbGalleryMoreDesktop}}<div class="p-gallery-seemore p-gallery-more-desktop">+ {{{ sNbGalleryMoreDesktop }}}</div>{{/sNbGalleryMoreDesktop}}\n            {{#sNbGalleryMoreDesktop2cols}}<div class="p-gallery-seemore p-gallery-more-desktop-col-2">+ {{{ sNbGalleryMoreDesktop2cols }}}</div>{{/sNbGalleryMoreDesktop2cols}}\n            {{#sNbVideoMoreTablet}}<div class="p-gallery-seemore p-gallery-more-video-tablet">+ {{{ sNbVideoMoreTablet }}}</div>{{/sNbVideoMoreTablet}}\n            {{#sNbVideoMoreDesktop}}<div class="p-gallery-seemore p-gallery-more-video-desktop">+ {{{ sNbVideoMoreDesktop }}}</div>{{/sNbVideoMoreDesktop}}\n            {{#sNbVideoMoreDesktop2cols}}<div class="p-gallery-seemore p-gallery-more-video-desktop-col-2">+ {{{ sNbVideoMoreDesktop2cols }}}</div>{{/sNbVideoMoreDesktop2cols}}\n        </div>\n\t\t{{#sTopRightTag}}<div class="p-pic-top-right">{{{ sTopRightTag }}}</div>{{/sTopRightTag}}\n    </div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_pic_gallery.mustache",[],function(){return'<div class="pic-gallery p-gallery-data p-frame p-frame-added pic">\n    <span class="p-gallery-data" data-src="{{ sFull }}"></span>\n\t<div class="thumb">\n        <div class="fit-image">\n            <img loading="lazy" src="{{ sFull }}" data-src="{{ sFull }}"/>\n        </div>\n    </div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_allgallery.mustache",[],function(){return'<div class="p-allgallery-back">\n    <div class="p-allgallery-exit">\n        <span class="icon-f icf-close-thin"></span>\n    </div>\n    <div class="p-allgallery">\n\t\t<div class="p-allgallery-pics">\n\t\t\t{{{ sHtmlPics }}}\n\t\t</div>\n    </div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_comment.mustache",[],function(){return'<div class="p-frame p-frame-{{ iNb }} p-glass-effect">\n\t{{{ sFrameHead }}}\n\t<div class="p-content">\n\t\t<div class="p-profile-picture" user-id="{{ oUser.sId }}"><img src="{{ oUser.sThumb }}"/></div>\n\t\t<div class="p-text {{{ sSmallTextCenter }}}{{#bHasTitle}} has-title{{/bHasTitle}}{{#bTitleOnly}} title-only{{/bTitleOnly}}">\n\t\t\t<div class="p-frame-head">\n\t\t\t\t{{{ sHtmlUploaderNoContent }}}\n\t\t\t</div>\n\t\t\t<div class="p-postcomment">\n\t\t\t\t{{#sTitle}}<div class="p-posttitle">{{{ sTitle }}}</div>{{/sTitle}}\n\t\t\t\t<div class="p-formatted-text p-clampable {{{ sBigTextLeft }}}">{{{ sComment }}}</div>\n\t\t\t</div>\n\t\t\t{{{ sFrameFoot }}}\n\t\t</div>\n\t</div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_mobile_comment.mustache",[],function(){return'<div class="p-mobile-comment {{#sMobileCommentClasses}}{{{ . }}}{{/sMobileCommentClasses}}">\n\t<div class="p-mobile-comment-title">{{{ sMobileTitle }}}</div>\n\t<div class="p-mobile-comment-comment">{{{ sMobileComment }}}</div>\n\t<div class="p-mobile-extend-container"><div class="p-extend icon-f"></div></div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_frame_head.mustache",[],function(){return'<div class="p-frame-head-full">\n    {{{ sHtmlUploader }}}\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_frame_foot.mustache",[],function(){return'<div class="p-frame-foot">\n    <div class="p-update">{{{ sUpdateText }}}</div>\n    <div class="p-extend-container"><div class="p-extend icon-f"></div></div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_user_link.mustache",[],function(){return'<a class="p-user" user-id="{{ sId }}" href="{{ sUrl }}">{{ sDisplayName }}</a>'}),define("text!skins/common/global_feed/post/tpls/post_user_info.mustache",[],function(){
return'<div class="uploader-info">\n    <div class="uploader-info-pic">\n        <img src="{{ user.sThumb }}"/>\n    </div>\n    <div class="uploader-info-profile">\n        <div class="uploader-info-user">\n            <div class="uploader-info-full-name">\n\t\t\t\t<div class="uploader-info-flag">\n\t\t\t\t\t<span class="flag-small flag-{{ user.sCountryCodeLower }}"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="uploader-info-name">\n\t\t\t\t\t<a class="uploader-info-name-text" href="{{ user.sUrl }}">{{ user.sDisplayName }}</a>\n\t\t\t\t</div>\n            </div>\n\t\t\t<div class="user-subscribe sub-strip">\n\t\t\t\t<span class="count">{{ user.sNbSubscribersFormatted }}</span>\n\t\t\t</div>\n        </div>\n\t\t{{#user.bIsSubscribed}}\n        <div class="user-filter">\n\t\t\t<span class="icon-f icf-search-v2"></span>\n            <span class="view-click">{{{ view_posts_user }}}</span>\n        </div>\n\t\t{{/user.bIsSubscribed}}\n        {{! <div class="uploader-info-ranking">\n            <span class="uploader-info-ranking-lb">World: </span><span class="uploader-info-ranking-n">#1</span>\n        </div> }}\n    </div>\n</div>'}),define("text!skins/common/global_feed/post/tpls/post_update.mustache",[],function(){return"<div class='update-container'>\n\t<div class='uploader'>\n\t\t{{{ sTicket }}}\n\t\t{{{ sUploader }}}\n\t</div>\n\t<div class='content-info'><span>{{{ sInfo }}}</span></div>\n</div>"}),define("text!skins/common/global_feed/post/tpls/post_content_locked.mustache",[],function(){return'<div class="content-locked">\n\t<div class="content-locked-icon">\n\t\t{{{ sContentLockedText }}}\n\t</div>\n</div>'}),define("skins/common/player/quickies/constants",[],function(){return{DISPLAY_LEVEL:{MAIN:"m",PROFILE:"p",PROFILE_VIDEO:"pv"},URL_MODE:{LOAD_HOME_VIDEOS:"lhv",LOAD_VIDEOS:"lv",LOAD_PROFILE_VIDEOS:"lpv",LOAD_PROFILE:"lp",MONITORING:"m"},EVENT:{UPDATE_LIST:"eQcksUL",VIEW:"eQcksV",SETTING_UPDATE:"eQcksSU",VOLUME_UPDATE:"eQcksVC",MUTE_TOGGLE:"eQcksTM",MANAGER:{OPEN:"eMQcksO",CLOSE:"eMQcksC",NEW_PLAYER_BOX:"eMQcksNP"},PLAYER_BOX:{SET_AS_NEXT:"ePBQcksSN",SET_AS_CURR:"ePBQcksSC",SET_AS_PREV:"ePBQcksSP",INFO_SET_FULL:"ePBQcksISF"}},MONITORING:{ABORT:"abort",BUFFERED:"buffered",BUFFERTIMEOUT:"buffertimeout",ERROR:"error",PLAYING:"playing",START_LOADING:"startloading",VIEW:"view"},SIZE:{PLAYER_MIN_WIDTH:500,PLAYER_MIN_WIDTH_BIG:1e3,DESKTOP_PROFILE_WIDTH:500,MEDIA_MEDIUM_MIN_WIDTH:1e3,MEDIA_SMALL_MAX_WIDTH:999,MEDIA_MEDIUM_MIN_WIDTH_BIG:1500,MEDIA_SMALL_MAX_WIDTH_BIG:1499,MEDIA_MEDIUM_MIN_HEIGHT:800,MEDIA_SMALL_MAX_HEIGHT:799,MEDIA_XSMALL_MAX_HEIGHT:499},LOAD_MORE:{NO_MORE:"no-more",LOADING:"loading",NOT_ENOUGHT_FOR_MORE:"not-enough-for-more",NO_PROFILE:"no-profile"},isValidObjectOption:function(e,t){return!!Object.keys(e).find(function(i){return e[i]===t})}}}),define("text!skins/common/player/quickies/templates/settingsActionBtn.mustache",[],function(){return'<div class="quickies__actions__btn quickies__actions__btn--settings" title="{{{ sTitle }}}">\n\t<span class="icon-f icf-ellipsis-v"></span>\n</div>'}),define("text!skins/common/player/quickies/templates/settingsActionMenu.mustache",[],function(){return'<div class="quickies__menu quickies__settings-menu">\n\t{{#aSettings}}\n\t\t<div class="quickies__setting quickies__menu-elem" data-key="{{{ sKey }}}">\n\t\t\t{{#bHasToggle}}\n\t\t\t\t<span class="checkbox toggle no-label w-28">\n\t\t\t\t\t<input type="checkbox"/>\n\t\t\t\t\t<label></label>\n\t\t\t\t</span>\n\t\t\t{{/bHasToggle}}\n\t\t\t{{#sPicto}}\n\t\t\t\t<span class="icon-f icf-{{sPicto}} no-toggle"></span>\n\t\t\t{{/sPicto}}\n\t\t\t{{{ sLabel }}}\n\t\t</div>\n\t{{/aSettings}}\n</div>\n'}),define("skins/common/player/quickies/settingsAction",["static/log","mustache","lib/i18n!front","static/storage","./constants","text!./templates/settingsActionBtn.mustache","text!./templates/settingsActionMenu.mustache"],function(e,t,i,n,s,o,a){var r=function(e){this.oPlayerBox=e,this.$settings=$()};return r.I_TIME_BEFORE_CLOSE_AFTER_TOGGLE=400,r.O_DEFAULT_SETTINGS_INFOS={share:{sKey:"share",sType:"function",sFunction:"shareUrl",sPicto:"share",sLabel:i.__("video.share_this"),sFuncCondition:"settingHasShareUrl"},mobileNavBtn:{sKey:"mobileNavBtn",sType:"toggle",sLabel:i.__("quickies.add_next_prev_btn"),bDefault:!1,sFuncCondition:"settingsHasMobileNavBtn"},autoNext:{sKey:"autoNext",sType:"toggle",sLabel:i.__("quickies.autoplay_next"),bDefault:!1}},r.SAVE_SETTING=function(e,t){"boolean"==typeof t&&(n.set("setting."+e,t,"quickies"),$(window).trigger(s.EVENT.SETTING_UPDATE,{setting:e,value:t}))},r.GET_SAVED_SETTING=function(e){var t=n.get("setting."+e,"quickies");return"boolean"==typeof t?t:null},r.GET_DEFAULT_SETTING=function(e){var t=r.O_DEFAULT_SETTINGS_INFOS[e];return void 0===t?null:"boolean"==typeof t.bDefault?t.bDefault:null},r.GET_SETTING_CONDITION=function(e,t){if(!e)return null;var i=r.O_DEFAULT_SETTINGS_INFOS[t];if(void 0===i)return null;var n="string"==typeof i.sFuncCondition?i.sFuncCondition:null;if(!n||"function"!=typeof e[n])return null;var s=e[n]();return"boolean"==typeof s?s:null},r.prototype={getButton:function(){return this.$btn&&this.$btn.length||this.makeButton(),this.updateView(),this.$btn},makeButton:function(){this.$btn=$(t.render(o,{sTitle:i.__("misc.settings")})),this.$btnIcon=this.$btn.find(".icon-f"),this.$btnIcon.on("click",this,this.onClickBtn)},getMenu:function(){return this.$menu&&this.$menu.length||this.makeMenu(),this.updateView(),this.$menu},makeMenu:function(){this.$menu=$(t.render(a,{aSettings:this.getTplInfo()})),this.$settings=this.$menu.find(".quickies__setting"),this.$settings.on("click",this,this.onClickSetting),this.oPlayerBox.appendMenu("settings",this.$menu)},getTplInfo:function(){var e=[];for(var t in r.O_DEFAULT_SETTINGS_INFOS){var i=r.O_DEFAULT_SETTINGS_INFOS[t];e.push({sKey:i.sKey,sLabel:i.sLabel,bHasToggle:"toggle"===i.sType,sPicto:"string"==typeof i.sPicto?i.sPicto:null})}return e},updateView:function(){var e=this;this.$settings.each(function(){var t=$(this).data("key"),i=r.GET_SETTING_CONDITION(e.oPlayerBox,t),n=r.GET_SAVED_SETTING(t);"boolean"!=typeof n&&"boolean"!=typeof(n=r.GET_DEFAULT_SETTING(t))&&(n=!1),"boolean"==typeof i&&(i?$(this).show():$(this).hide()),$(this).find(".checkbox input").prop("checked",n)})},openMenu:function(){this.getMenu(),this.oPlayerBox.openMenu("settings"),this.updateView()},closeMenu:function(){this.stopCloseTimer(),this.oPlayerBox.closeMenus()},stopCloseTimer:function(){this.oCloseTimer&&clearTimeout(this.oCloseTimer),this.oCloseTimer=null},startCloseTimer:function(e){this.stopCloseTimer();var t=this;this.oCloseTimer=setTimeout(function(){t.closeMenu(),t.oCloseTimer=null},e)},toggleSetting:function(e){r.SAVE_SETTING(e,!r.GET_SAVED_SETTING(e)),this.updateView(),this.startCloseTimer(r.I_TIME_BEFORE_CLOSE_AFTER_TOGGLE)},onClickBtn:function(e){e.preventDefault(),e.stopPropagation(),e.data.openMenu()},onClickSetting:function(e){e.preventDefault(),e.stopPropagation();var t=e.data,i=r.O_DEFAULT_SETTINGS_INFOS[$(this).data("key")];void 0!==i&&("toggle"===i.sType?t.toggleSetting(i.sKey):"function"===i.sType&&"function"==typeof t.oPlayerBox[i.sFunction]&&t.oPlayerBox[i.sFunction](e.currentTarget))}},r}),define("text!skins/common/player/quickies/templates/volumeControlBtn.mustache",[],function(){return'<div class="quickies__actions__btn quickies__actions__btn--sound" title="{{{ sTitle }}}">\n\t<span class="icon-f icf-sound"></span>\n</div>\n<div class="quickies__volume-slider__back-close"></div>'}),define("text!skins/common/player/quickies/templates/volumeControlSlider.mustache",[],function(){return'<div class="quickies__volume-slider">\n\t<div class="slider">\n\t\t<div class="back">\n\t\t\t<div class="back-bar"></div>\n\t\t\t<div class="bar"></div>\n\t\t\t<div class="handle"></div>\n\t\t</div>\n\t\t<span class="icon-f icf-sound mute-toggle"></span>\n\t\t<span class="icon-f icf-close-thin close"></span>\n\t</div>\n</div>'}),define("skins/common/player/quickies/volumeControl",["static/log","mustache","lib/i18n!front","static/storage","./constants","text!./templates/volumeControlBtn.mustache","text!./templates/volumeControlSlider.mustache"],function(e,t,i,n,s,o,a){var r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,l=function(e,t){this.oPlayerBox=e,this.bIsSimpleMuteToggle="boolean"==typeof t?t:r,this.oCloseTimer=null,this.$THEBtn=null,this.$backClose=null,$(window).on("resize",this,this.onResizeScreen),$(window).on(s.EVENT.MUTE_TOGGLE,this,this.onToggleMute).on(s.EVENT.VOLUME_UPDATE,this,this.onVolumeChange)};return l.I_DEFAULT_VOLUME=1,l.B_DEFAULT_MUTE=!1,l.I_FADE_IN_DUR=250,l.I_FADE_OUT_DUR=250,l.I_SLIDER_WIDTH_BASE=85,l.I_TIME_BEFORE_CLOSE_AFTER_OPEN=3e3,l.I_TIME_BEFORE_CLOSE_AFTER_MOVE=1e4,l.I_TIME_BEFORE_CLOSE_AFTER_TOUCH=1e4,l.I_TIME_BEFORE_CLOSE_AFTER_MOUSEOUT=1e3,l.I_TIME_BEFORE_CLOSE_AFTER_MUTE=2500,l.SAVE_VOLUME=function(e,t){"number"==typeof e&&(n.set("volume",e,"quickies"),!0!==t&&$(window).trigger(s.EVENT.VOLUME_UPDATE))},l.GET_SAVED_VOLUME=function(){var e=n.get("volume","quickies");return"number"==typeof e?e:l.I_DEFAULT_VOLUME},l.SAVE_MUTE=function(e,t){"boolean"==typeof e&&(n.set("mute",e,"quickies"),!0!==t&&$(window).trigger(s.EVENT.MUTE_TOGGLE))},l.GET_SAVED_MUTE=function(){var e=n.get("mute","quickies");return"boolean"==typeof e?e:l.B_DEFAULT_MUTE},l.prototype={getButton:function(){return this.makeButton(),this.updateView(),this.$btn},makeButton:function(){if(!this.$btn||!this.$btn.length){var e=l.GET_SAVED_MUTE();this.$btn=$(t.render(o,{sTitle:this.bIsSimpleMuteToggle?e?i.__("player.unmute"):i.__("player.mute"):i.__("player.manage_volume")})),this.$btnIcon=this.$btn.find(".icon-f"),this.$THEBtn=this.$btn.filter(".quickies__actions__btn"),this.$backClose=this.$btn.filter(".quickies__volume-slider__back-close"),this.$btnIcon.on("click",this,this.onClickBtn),this.$backClose.on("click",this,this.onClickBackClose)}},getSlider:function(){return this.makeSlider(),this.updateView(),this.$slider},getSliderBackBar:function(){return this.makeSlider(),this.$sliderBackBar},makeSlider:function(){if(!this.$slider||!this.$slider.length){var e=l.GET_SAVED_MUTE();this.$slider=$(t.render(a,{sTitle:e?i.__("player.unmute"):i.__("player.mute")})),this.$soundMuteToggle=this.$slider.find(".mute-toggle"),this.$soundMuteToggle.on("click",this,this.onClickMuteToggle),this.$sliderBackBar=this.$slider.find(".back-bar"),this.$sliderBar=this.$slider.find(".bar"),this.$sliderHandle=this.$slider.find(".handle"),this.$slider.find(".back").on("mousedown",this,this.onMouseDownBar).on("touchstart",this,this.onMouseDownBar),this.$slider.find(".close").on("click",this,this.onClickBackClose),this.getButton(),this.$THEBtn.append(this.$slider);var n=this.oPlayerBox.getContainer();!n||n.length}},updateView:function(){var e=l.GET_SAVED_MUTE(),t=l.GET_SAVED_VOLUME();this.$slider&&this.$slider.length&&this.$slider.toggleClass("is-muted",e),this.$sliderBar&&this.$sliderBar.length&&this.$sliderBar.css({width:100*t+"%"}),this.$sliderHandle&&this.$sliderHandle.length&&this.$sliderHandle.css({left:100*t+"%"}),this.$soundMuteToggle&&this.$soundMuteToggle.length&&(this.$soundMuteToggle.prop("title",e?i.__("player.unmute"):i.__("player.mute")),this.$soundMuteToggle.removeClass("icf-sound icf-sound-off"),this.$soundMuteToggle.addClass("icf-sound"+(e||t<.02?"-off":""))),this.$btn&&this.$btn.length&&this.bIsSimpleMuteToggle&&this.$btn.prop("title",e?i.__("player.unmute"):i.__("player.mute")),this.$btnIcon&&this.$btnIcon.length&&(this.$btnIcon.removeClass("icf-sound icf-sound-off"),this.$btnIcon.addClass("icf-sound"+(e||t<.02?"-off":"")))},openSlider:function(){this.oPlayerBox.closeMenus(),this.getSlider().show(),this.$THEBtn.addClass("is-opened"),this.$backClose.show(),this.updateView()},closeSlider:function(){this.stopCloseTimer(),this.getSlider().hide(),this.$THEBtn.removeClass("is-opened"),this.$backClose.hide(),this.updateView()},setVolume:function(e,t){if(t)return"number"==typeof e&&(l.SAVE_VOLUME(e,!0),this.iVolumeToSet=e),void this.updateView();var i=l.GET_SAVED_VOLUME(),n=l.GET_SAVED_MUTE();("number"!=typeof e||i!==e||n)&&(n&&l.SAVE_MUTE(!1,!0),l.SAVE_VOLUME(e),0===e&&this.toggleMute(!0))},toggleMute:function(e){var t=l.GET_SAVED_MUTE();if("boolean"!=typeof e)e=!t;else if(e===t)return;if(!e){l.GET_SAVED_VOLUME()<.05&&this.setVolume(.5,!0)}l.SAVE_MUTE(e),this.updateView(),this.startCloseTimer(l.I_TIME_BEFORE_CLOSE_AFTER_MUTE)},stopCloseTimer:function(){this.oCloseTimer&&clearTimeout(this.oCloseTimer),this.oCloseTimer=null},startCloseTimer:function(e){this.stopCloseTimer();var t=this;this.oCloseTimer=setTimeout(function(){t.closeSlider(),t.oCloseTimer=null},e)},setVolumeByBar:function(e){var t=this.getSliderBackBar(),i=t.outerWidth(),n=t.offset();if(!(e<n.left||e>n.left+i)){var s=Math.round((e-n.left)/i*50)/50;this.setVolume(s),this.updateView()}},onClickBackClose:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.bMouseDown||t.closeSlider()},onClickBtn:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.bIsSimpleMuteToggle?t.toggleMute():t.openSlider()},onClickMuteToggle:function(e){e.preventDefault(),e.stopPropagation(),e.data.toggleMute()},onMouseDownBar:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;$(document).on("mousemove",t,t.onMouseMoveBar).on("mouseup",t,t.onMouseUpBar).on("touchmove",t,t.onMouseMoveBar).on("touchend",t,t.onMouseUpBar),t.bMouseDown=!0,t.setVolumeByBar(e.pageX||e.originalEvent.touches[0].pageX)},onMouseMoveBar:function(e){var t=e.data;t.bMouseDown&&t.setVolumeByBar(e.pageX||e.originalEvent.touches[0].pageX)},onMouseUpBar:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.bMouseDown=!1,$(document).off("mousemove",t.onMouseMoveBar).off("mouseup",t.onMouseUpBar).off("touchmove",t.onMouseMoveBar).off("touchend",t.onMouseUpBar)},onResizeScreen:function(e){var t=e.data;t.oTimerOnResize?clearTimeout(t.oTimerOnResize):t.updateView(),t.oTimerOnResize=setTimeout(function(){t.updateView(),t.oTimerOnResize=null},500)},onToggleMute:function(e){e.data.updateView()},onTouchBar:function(e){e.preventDefault(),e.stopPropagation(),e.data.setVolumeByBar(e.originalEvent.touches[0].pageX)},onVolumeChange:function(e){e.data.updateView()}},l}),define("skins/common/thread/node",["config/main","static/console","lib/helpers/overlay/contextual_popup","lib/i18n!front"],function(e,t,i,n){var s=function(e,t,i,n){void 0!==e&&(this.thread=e,this.parent=t,this.id_post=i,this.level=-1,this.parent&&(this.level=this.parent.level+1),this.children={},this.nb_children=0,this.user_posts={},this.id_post_end=0,this.loading=!1,this.loaded=!1,this.children_loading=!1,this.children_loaded=!1,this.all_children_loaded=!1,this.nb_per_page=10,this.deleted=!1,this["private"]=!1,this.bScrollOnFormOpen=!0,this.editing=!1,this.can_edit=!1,this.edit_csrf="",this.edit_text=null,this.edit_user=null,this.pending_delete=!1,this.can_delete=!1,this.delete_csrf="",this.deleting=!1,this.can_undelete=!1,this.undelete_csrf="",this.undeleting=!1,this.can_report=!1,this.report_csrf="",this.report_form=null,this.current_vote=!1,this.vote_csrf="",this.voting=!1,this.form=null,this.parent&&(this.ui_node=this.parent.ui_node.createChild(i,this),this.setNbChildren(n)))};return s.prototype={load:function(e){return this.ui_node.hideError(),this.deleted=!1,this["private"]=!1,e.deleted?(this.deleted=!0,void this.ui_node.hide()):e["private"]?(this["private"]=!0,void this.ui_node.hide()):(this.pending_delete=!!e.pending_delete,this.ui_node.show(),this.ui_node.render(e),this.can_edit=e.edit,this.can_edit&&(this.edit_csrf=e.edit_csrf,this.edit_text=e.edit_text,this.edit_user=e.edit_user),this.can_delete=e["delete"],this.can_delete&&(this.delete_csrf=e.delete_csrf),this.can_undelete=e.undelete,this.can_undelete&&(this.undelete_csrf=e.undelete_csrf),this.can_report=e.report,this.can_report&&(this.report_csrf=e.report_csrf),this.current_vote=e.votes.user,this.vote_csrf=e.votes.csrf,this.loading=!1,this.loaded=!0,void("object"==typeof e.replies&&e.replies.ids.length>0&&this.onLoaded({result:!0,posts:e.replies})))},getRoot:function(){return this.parent?this.parent.getRoot():this},canPost:function(){return this.thread.can_post&&this.level<this.thread.max_level&&!this.pending_delete},canLoadChildren:function(){return!this.children_loaded&&!this.children_loading&&this.nb_children>0},isFormOpened:function(){return!!this.form&&this.form.isFormOpened()},isEditing:function(){return this.editing},isDeleting:function(){return this.deleting},isUndeleting:function(){return this.undeleting},addUserPost:function(e){var t=new s(this.thread,this,e.id,0);t.load(e),this.ui_node.appendChild(t.ui_node),this.user_posts[e.id]=t,this.setNbChildren(this.nb_children+1),this.parent&&this.getRoot().setNbChildren(this.getRoot().nb_children+1),this.ui_node.toggleChildren(!0),this.children_loaded=!0},setNbChildren:function(e){this.nb_children=e,this.ui_node.setNbChildren(e)},destroy:function(){this.destroyChildren(),this.ui_node.destroy()},destroyChild:function(e){if("object"==typeof this.children[e])this.children[e].destroy(),delete this.children[e];else{if("object"!=typeof this.user_posts[e])return;this.user_posts[e].destroy(),delete this.user_posts[e]}this.setNbChildren(this.nb_children-1),this.ui_node.toggleChildren(!this.parent||this.nb_children>0)},destroyChildren:function(){for(var e in this.children)this.children.hasOwnProperty(e)&&(this.children[e].destroy(),delete this.children[e]);for(var e in this.user_posts)this.user_posts.hasOwnProperty(e)&&(this.user_posts[e].destroy(),delete this.user_posts[e]);this.nb_children=0,this.children_loaded=!1,this.id_post_end=0},loadChildren:function(e,i,n){if(!this.all_children_loaded&&!(this.children_loading||this.editing||this.deleting||this.undeleting)){this.children_loading=!0,this.ui_node.hideChildrenError(),this.ui_node.showChildrenLoader();var s,o=this,a=[];for(s in this.children)this.children.hasOwnProperty(s)&&a.push(s);for(s in this.user_posts)this.user_posts.hasOwnProperty(s)&&a.push(s);window.setTimeout(function(){var s=o.thread.getThreadUrl(o.parent?o.id_post:"0",o.id_post_end),r={loaded_ids:a.join(","),load_all:e?1:0,site:o.thread.sSite};o.thread.is_admin&&(r.is_admin=1),$.post(s,r,function(t){o.onLoaded(t,i,n||function(){o.loadChildren(e)})},"json").fail(function(i,s,a){t.log("Failed to load","Thread "+o.thread.type,i);var r=i&&i.responseJSON&&i.responseJSON.message?i.responseJSON.message:null;o.ui_node.showChildrenError(r,n||function(){o.loadChildren(e)})}).complete(function(){o.children_loading=!1,o.ui_node.hideChildrenLoader(),window.setTimeout(function(){window.xv!==undefined&&window.xv.videopage!==undefined&&"function"==typeof window.xv.videopage.displayRelatedVideos&&window.xv.videopage.displayRelatedVideos()},200)})})}},loadChildrenIds:function(e,i,n){if(!this.all_children_loaded&&!(this.children_loading||this.editing||this.deleting||this.undeleting)){this.children_loading=!0,this.ui_node.hideChildrenError(),this.ui_node.showChildrenLoader();var s=this;window.setTimeout(function(){var o=s.thread.getPostsUrl(),a={admin_posts:e,site:s.thread.sSite};$.post(o,a,function(e){s.onLoaded(e,i,n||function(){s.loadChildrenIds(id_posts)})},"json").fail(function(e,i,o){t.log("Failed to load","Thread "+s.thread.type,e);var a=e&&e.responseJSON&&e.responseJSON.message?e.responseJSON.message:null;s.ui_node.showChildrenError(a,n||function(){s.loadChildrenIds(id_posts)})}).complete(function(){s.children_loading=!1,s.ui_node.hideChildrenLoader()})})}},onLoaded:function(e,t,i){if(!e.result)return void this.ui_node.showChildrenError(e.message,i);"function"==typeof t&&t(e),this.ui_node.hideChildrenLoader(),e=e.posts;var n,o,a={},r=[];for(n in e.ids){o=e.ids[n];var l;if("object"==typeof this.children[o]?(l=this.children[o],delete this.children[o]):"object"==typeof this.user_posts[o]?(l=this.user_posts[o],delete this.user_posts[o]):l=new s(this.thread,this,o,e.children[o]||0),"object"==typeof e.posts[o]&&l.load(e.posts[o]),a[o]=l,l.loaded||r.push(o),o===e.id_post_end)break}for(var d in this.children)this.children.hasOwnProperty(d)&&this.children[d].destroy();this.children=a;for(n in e.ids)if(o=e.ids[n],this.ui_node.appendChild(this.children[o].ui_node),o===e.id_post_end)break;if(this.parent)for(n in this.user_posts)this.ui_node.appendChild(this.user_posts[n].ui_node);this.loadPosts(r),this.setNbChildren(this.parent?e.ids.length:e.nb_posts_total),this.id_post_end=e.nb_after>0&&e.id_post_end,this.children_loaded=!0,this.all_children_loaded=0===e.nb_after,this.ui_node.toggleChildren(e.ids.length>0),this.ui_node.setNbNext(e.nb_after,e.nb_by_page),this.canOpenFormOnInit()&&this.ui_node.createFormNodes(),e.nb_by_page>0&&(this.nb_per_page=e.nb_by_page)},loadPosts:function(e){var i=[],n=[];for(var s in e){var o=this.children[e[s]];"object"!=typeof o||o.loading||(o.loading=!0,o.ui_node.hideError(),o.ui_node.showLoader(),i.push(e[s]),n.push(o))}if(0===i.length)return!0;var a=this,r=[],l=this.thread.getPostsUrl(),d={posts:i,site:this.thread.sSite};this.thread.is_admin&&(d.is_admin=1),$.post(l,d,function(e){if(e.result)for(var t in n){var s=n[t];"object"==typeof e.posts[s.id_post]?(s.load(e.posts[s.id_post]),"number"==typeof e.posts[s.id_post].nb_children&&s.setNbChildren(e.posts[s.id_post].nb_children)):(r.push(s.id_post),s.ui_node.showError(null,function(){a.loadPosts(r)}))}else for(var t in n)n[t].ui_node.showError(e.messsage,function(){a.loadPosts(i)})},"json").fail(function(e,s,o){t.log("Failed to load","Thread "+a.thread.type,e);for(var r in n)n[r].ui_node.showError(null,function(){a.loadPosts(i)})}).complete(function(){for(var e in n)n[e].loading=!1,n[e].ui_node.hideLoader()})},onNewPost:function(){"function"==typeof this.thread.onNewPost&&this.thread.onNewPost()},canOpenFormOnInit:function(){return!(this.nb_children>0)&&!!this.canOpenForm()},canOpenForm:function(t){if(this.pending_delete)return!1;if(!this.thread.allow_anonymous){if(!e.dyn.login_info.is_logged){if(t){var s=this;require([this.thread.login_form_mod],function(e){s.thread.login_reload_with_hash&&e.setReloadWithHash(!0),e.open()})}return!1}if(!e.dyn.login_info.profile)return t&&i.alert(n.__("video.need_profile_to_comment",{"%link_start%":'<a href="/account/create-profile">',"%link_end%":"</a>"},"You must have a profile to comment on this video. You can create it %link_start%here%link_end%.")),!1}return!0},getForm:function(){return!!this.canOpenForm(!0)&&(null===this.form&&(this.form=this.thread.createForm(this)),this.form)},"delete":function(e){if(!(!this.can_delete||this.deleting||this.undeleting||this.children_loading||this.voting||this.editing)){var t=this;if(!e){var s,o;return this.nb_children>0?(s="misc.confirm_delete_message_replies",o="Are you sure you want to delete this message and its replies ?"):(s="misc.confirm_delete_message",o="Are you sure you want to delete this message ?"),void i.confirm(n.__(s,{},o),function(){t["delete"](!0)})}this.deleting=!0,this.ui_node.toggleVotesDelete(!1),this.ui_node.toggleChildrenShowHide(!1),this.ui_node.renderPostBtn(),this.ui_node.renderEditBtn(),this.form&&this.form.close();var a=this.thread.getDeleteUrl(this.id_post),r={csrf:this.delete_csrf,site:this.thread.sSite};this.thread.is_admin&&(r.is_admin=1),$.post(a,r,function(e){if(!e.result)return void t.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."));e.post?t.load(e.post):t.parent.destroyChild(t.id_post),t.getRoot().setNbChildren(e.nb_posts)},"json").fail(function(){t.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."))}).complete(function(){t.deleting=!1,t.ui_node.toggleVotesDelete(!0),t.ui_node.toggleChildrenShowHide(!0),t.ui_node.renderPostBtn(),t.ui_node.renderEditBtn()})}},undelete:function(){if(!(!this.can_undelete||this.deleting||this.undeleting||this.children_loading||this.voting||this.editing)){var e=this;this.undeleting=!0,this.ui_node.toggleVotesDelete(!1),this.ui_node.toggleChildrenShowHide(!1),this.ui_node.renderPostBtn(),this.ui_node.renderEditBtn(),this.form&&this.form.close();var t=this.thread.getUndeleteUrl(this.id_post),i={csrf:this.undelete_csrf,site:this.thread.sSite};this.thread.is_admin&&(i.is_admin=1),$.post(t,i,function(t){if(!t.result)return void e.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."));e.load(t.post),e.getRoot().setNbChildren(t.nb_posts)},"json").fail(function(){e.ui_node.setUndeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."))}).complete(function(){e.undeleting=!1,e.ui_node.toggleVotesDelete(!0),e.ui_node.toggleChildrenShowHide(!0),e.ui_node.renderPostBtn(),e.ui_node.renderEditBtn()})}},report:function(){!this.can_report||this.deleting||this.undeleting||this.editing||(this.report_form||(this.report_form=this.thread.createReportForm(this)),this.report_form.open())},disableReport:function(){this.can_report=!1,this.report_csrf="",this.ui_node.disableReport()},vote:function(t){if(!(this.voting||this.deleting||this.undeleting||this.pending_delete||this.editing)){if(!this.thread.allow_anonymous_vote){if(!e.dyn.login_info.is_logged)return require([this.thread.login_form_mod],function(e){e.open()}),!1;if(!e.dyn.login_info.profile)return i.alert(n.__("video.comments.need_profile_to_vote",{"%link_start%":'<a href="/account/create-profile">',"%link_end%":"</a>"},"You must have a profile to vote for this comment. You can create it %link_start%here%link_end%.")),!1}this.current_vote===t&&(t="CANCEL"),this.voting=!0,this.ui_node.toggleVotesDelete(!1);var s=this,o=this.thread.getVoteUrl(this.id_post,t),a={csrf:this.vote_csrf,site:this.thread.sSite};$.post(o,a,function(e){if(900===e.code)return void require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e.data.action_need_verified_email).show()});if(e.result&&(s.current_vote=e.votes.user,s.ui_node.renderVotes(e.votes),"object"==typeof e.ids)){for(var t=s.id_post,i=0,n=e.ids.length-1;n>=0;n--){if("undefined"!=typeof s.parent.children[e.ids[n]]){t=e.ids[n];break}i++}s.parent.onLoaded({result:!0,posts:{ids:e.ids,posts:{},children:{},nb_after:i,id_post_end:t,nb_posts_total:e.nb_posts_total,nb_by_page:s.parent.nb_per_page}})}},"json").complete(function(){s.voting=!1,s.ui_node.toggleVotesDelete(!0)})}}},s}),define("text!skins/common/thread/ui/form.mustache",[],function(){return'<div class="thread-node thread-node-form hidden">\r\n\t{{^force_anonymous}}\r\n\t<div class="thread-node-picture">\r\n\t\t<img src="{{{ img }}}"{{#img_error}} onerror="this.src=\'{{{ img_error }}}\';this.onerror=null;"{{/img_error}} />\r\n\t\t{{#profile_name}}\r\n\t\t<div class="thread-node-poster">\r\n\t\t\t<span class="thread-node-poster-name">{{{ profile_name }}}</span>\r\n\t\t</div>\r\n\t\t{{/profile_name}}\r\n\t</div>\r\n\t{{/force_anonymous}}\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t<div class="thread-node-content">\r\n\t\t{{{ form }}}\r\n\t</div>\r\n</div>'}),define("text!skins/common/thread/ui/form_message.mustache",[],function(){return'<div class="alert alert-{{{ alert_type }}} form-error-list-contener">\r\n\t<ul class="form-error-list"><li>{{{ message }}}</li></ul>\r\n\t<span class="icon-f icf-{{{ icon }}}"></span>\r\n</div>'}),define("skins/common/thread/ui/form",["config/main","mustache","static/utils","lib/tools","static/dom","skins/form/validator","text!./form.mustache","text!./form_message.mustache"],function(e,t,i,n,s,o,a,r){var l=function(e,t,i,n){void 0!==e&&(this.logic_node=e,this.force_anonymous=i,this.default_form_html=this.updateFormHtml(t),this.validation_rules=this.updateValidationRules(n),this.node=null,this.createNode(),this.opened=!1,this.submitted=!1,this.message=null)};return l.prototype={getTemplate:function(){return a},getTemplateVars:function(){var t=!this.force_anonymous&&e.dyn.login_info.profile;return{form:this.default_form_html,force_anonymous:this.force_anonymous,img:t?"/profiles-picture/"+e.dyn.login_info.profile:this.getDefaultPictureUrl(),img_error:!!t&&this.getDefaultPictureUrl(),profile_name:!!t&&n.ucwords(t.replace(/_/g," "))}},getDefaultPictureUrl:function(){return e.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg"},createNode:function(e){this.node||(this.node=$(t.render(this.getTemplate(),this.getTemplateVars(e))),this.getNodes())},getNodes:function(){this.form=this.node.find("form"),this.form_validator=new o(this.form,this.validation_rules,{no_errors_shortcuts:!0,no_init_validate:!0,no_init_focus:!0}),this.inputs=this.node.find('input[type="text"],textarea'),this.radios=this.node.find('input[type="checkbox"],input[type="radio"]'),this.captcha=this.form.find(".g-recaptcha"),this.cancel_btn=this.form.find("a").on("click",function(t){t.preventDefault(),e.logic_node.reset(),e.logic_node.close()});var e=this,t=function(){return e.submitted||e.captcha.on("click",t),e.logic_node.submit(),e.submitted=!0,!1};this.form.on("submit",function(e){e.preventDefault(),e.stopPropagation(),t()}),this.inputs.filter("textarea").on("keyup",function(){e.message&&(e.message.remove(),e.message=null),$(this).height(5).height($(this).prop("scrollHeight"))})},updateFormHtml:function(e){var t=e.indexOf(' id="');if(-1===t)return e;var i=e.substring(t+5);return-1===(t=i.indexOf('"'))?e:(i=i.substring(0,t),e=e.replace(new RegExp('id="'+i,"g"),'id="'+i+(this.logic_node.node.id_post.length>0?"_"+this.logic_node.node.id_post:"")),e=e.replace(new RegExp("jQuery\\('#"+i+"'\\)","g"),"jQuery('#"+i+(this.logic_node.node.id_post.length>0?"_"+this.logic_node.node.id_post:"")+"')"),e=e.replace(new RegExp("getElementById\\('"+i+"'\\)","g"),"getElementById('"+i+(this.logic_node.node.id_post.length>0?"_"+this.logic_node.node.id_post:"")+"')"),e=e.replace(new RegExp("(grecaptchabtn-[0-9a-f]+)","g"),i+(this.logic_node.node.id_post.length>0?"_"+this.logic_node.node.id_post+"_":"_")+"$1"),e=e.replace(new RegExp("(OnPostSubmit[0-9a-f]+)","g"),"$1"+Math.round(1e5*Math.random())))},updateValidationRules:function(e){if(0===this.logic_node.node.id_post.length)return e;for(var t in e)e[t].elt_id=e[t].elt_id.replace(/post/g,"post_"+this.logic_node.node.id_post);return e},updateForm:function(e,t){this.form.html(this.updateFormHtml(e)),this.validation_rules=this.updateValidationRules(t),this.getNodes()},open:function(){if(this.opened)return this.logic_node.node.ui_node.renderPostBtn(),this.logic_node.node.ui_node.renderEditBtn(),void(this.inputs.eq(0)[0]&&this.inputs.eq(0)[0].emojioneArea?this.inputs.eq(0)[0].emojioneArea.setFocus():this.inputs.eq(0).focus());this.node.removeClass("hidden"),this.opened=!0,!this.logic_node.node.parent&&this.logic_node.node.bScrollOnFormOpen&&(s.isElementInView(this.form,!0)||n.scrollTo(this.form,50)),this.logic_node.node.ui_node.renderPostBtn(),this.logic_node.node.ui_node.renderEditBtn(),this.logic_node.node.bScrollOnFormOpen&&(this.inputs.eq(0)[0]&&this.inputs.eq(0)[0].emojioneArea?this.inputs.eq(0)[0].emojioneArea.setFocus():this.inputs.eq(0).focus())},close:function(){this.opened&&(this.node.addClass("hidden"),this.opened=!1,this.logic_node.node.ui_node.renderPostBtn(),this.logic_node.node.ui_node.renderEditBtn(!0))},showMessage:function(e,i){this.message&&(this.message.remove(),this.message=null),this.message=$(t.render(r,{message:e,alert_type:i?"danger":"success",icon:i?"warning":"check-circle-thin"})).prependTo(this.form)},toggleSubmitting:function(e){this.inputs.prop("disabled",e),this.radios.prop("disabled",e),this.cancel_btn.toggleClass("hidden",e),this.captcha.length>0&&this.captcha.toggleClass("hidden",e)},reset:function(e){this.submitted?(this.submitted=!1,this.form.html(this.default_form_html),this.getNodes()):(this.inputs.val(""),this.setText(""),this.radios.prop("checked",!1)),e&&this.showMessage(e,!1)},setText:function(e){var t=this.inputs.filter('[name="post[text]"]');return 0!==t.length&&(t[0].emojioneArea?(t[0].emojioneArea.setText(e),!0):(t.val(e),!0))},setDefault:function(e,t){this.setText(e),this.inputs.filter('[name="post[user]"]').val(t)}},l}),
define("skins/common/thread/form",["./ui/form","lib/i18n!front"],function(e,t){var i=function(t,i,n,s){this.node=t,this.ui_node=new e(this,i,n,s),this.posting=!1,this.mode="create",this.edit_csrf=null};return i.prototype={submit:function(){if(!this.posting){this.posting=!0;var e,i=this,n=this.ui_node.form.serializeArray();n.push({name:"site",value:this.node.thread.sSite}),"edit"===this.mode?(e=this.node.thread.getEditUrl(this.node.id_post),n.push({name:"csrf",value:this.edit_csrf})):e=this.node.thread.getPostUrl(this.node.parent?this.node.id_post:"0"),this.node.thread.is_admin&&(n.is_admin=1),$.post(e,n,function(e){if(!e.result){switch(e.code){case 50:return void i.ui_node.updateForm(e.form,e.validation_rules);case 900:require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e.data.action_need_verified_email).show()});break;default:i.ui_node.showMessage(e.message,!0)}return void i.ui_node.form_validator.resetSubmit()}"edit"===i.mode?i.node.load(e.post):i.node.addUserPost(e.post),i.node.onNewPost(),i.reset(e.message),i.close()},"json").fail(function(){i.ui_node.showMessage(t.__("loading.error"),!0),i.ui_node.form_validator.resetSubmit()}).complete(function(){i.posting=!1,i.ui_node.toggleSubmitting(!1)}),this.ui_node.toggleSubmitting(!0)}},isFormOpened:function(){return this.ui_node.opened},open:function(){this.node.thread.closeOpenedForms(),this.node.thread.opened_form=this,this.ui_node.open()},close:function(){this.ui_node.close()},reset:function(e){this.mode="create",this.ui_node.reset(e)},setEditMode:function(e,t,i){this.mode="edit",this.edit_csrf=i,this.ui_node.setDefault(e,t)}},i}),define("text!skins/common/thread/ui/report_form.mustache",[],function(){return'<div>\n\t<h2 class="text-center">{{{ title }}}</h2>\n\t{{{ form }}}\n</div>'}),define("skins/common/thread/ui/report_form",["lib/helpers/overlay/box","./form","text!./report_form.mustache","lib/i18n!front"],function(e,t,i,n){var s=function(e,i,n){t.apply(this,[e,i,!1,n]),this.overlay=null};return s.prototype=new t,s.prototype.getTemplate=function(){return i},s.prototype.getTemplateVars=function(){return{title:n.__(this.logic_node.node.ui_node.getMessageKey("report_this_post"),{},"Report this post"),form:this.default_form_html}},s.prototype.open=function(){if(this.opened)return void this.inputs.eq(0).focus();if(!this.overlay){var t=this;this.overlay=e.get($("body"),!0,"hide").setContent(this.node).show("auto"),this.overlay.setOverlayClosable(!0),this.overlay.setEscapeClosable(!0),this.overlay.onHide=function(){t.opened=!1},this.overlay.node.addClass("thread-post-report-form-popup")}this.overlay.show(),this.opened=!0,this.inputs.eq(0).focus()},s.prototype.close=function(){this.opened=!1,this.overlay.hide()},s}),define("skins/common/thread/report_form",["static/cookies","./ui/report_form","lib/i18n!front"],function(e,t,i){var n=function(e,i,n){this.node=e,this.ui_node=new t(this,i,n),this.reporting=!1};return n.prototype={submit:function(){if(!this.reporting){this.reporting=!0;var e=this,t=this.node.thread.getReportUrl(this.node.id_post),n=this.ui_node.form.serializeArray();n.push({name:"site",value:this.node.thread.sSite}),n.push({name:"csrf",value:this.node.report_csrf}),$.post(t,n,function(t){if(!t.result){switch(t.code){case 50:return void e.ui_node.updateForm(t.report_form,t.report_js_validation_rules);case 900:require(["skins/common/email_verification/email_verification_modal"],function(e){new e(t.data.action_need_verified_email).show()});break;default:e.ui_node.showMessage(t.message,!0)}return void e.ui_node.form_validator.resetSubmit()}e.ui_node.close(),e.node.disableReport()},"json").fail(function(){e.ui_node.showMessage(i.__("loading.error"),!0),e.ui_node.form_validator.resetSubmit()}).complete(function(){e.reporting=!1,e.ui_node.toggleSubmitting(!1)}),this.ui_node.toggleSubmitting(!0)}},isFormOpened:function(){return this.ui_node.opened},reset:function(){this.ui_node.reset()},open:function(){this.ui_node.open()},close:function(){this.ui_node.close()}},n}),define("skins/common/thread/root",["config/main","static/cookies","./node","./form","./report_form"],function(e,t,i,n,s){var o=function(e,t,n,s){void 0!==e&&(this.thread=this,this.type=e,this.id_related=t,this.sort=o.SORT_TOP,this.is_admin=!1,this.max_level=0,this.init=!1,this.node=new i(this,null,"",0),n.logic_node=this,this.node.ui_node=n,this.setSort(),this.allow_anonymous=!1,this.force_anonymous=!1,this.show_emojis=!1,this.login_form_mod=s,this.login_reload_with_hash=!1,this.form_html=null,this.form_validation_rules=null,this.opened_form=!1,this.report_form_html=null,this.report_form_validation_rules=null,this.sSite=null,this.onNewPost=null)};return o.SORT_NEW="new",o.SORT_TOP="top",o.SORT_AUTHOR="author",o.prototype={SORT_NEW:"new",SORT_TOP:"top",SORT_AUTHOR:"author",canPost:function(){return this.init&&!this.is_admin&&this.node.canPost()},canLoadChildren:function(){return this.node.canLoadChildren()},isFormOpened:function(){return this.node.isFormOpened()},isDeleting:function(){return!1},isUndeleting:function(){return!1},getNbChildren:function(){return this.node.nb_children},closeOpenedForms:function(){this.opened_form&&(this.opened_form.close(),this.opened_form=null)},setScrollOnFormOpen:function(e){this.node.bScrollOnFormOpen=!!e},load:function(e,t){if(!this.init){"string"==typeof t&&(this.sSite=t),this.loading=!1,this.loaded=!0,this.node.ui_node.render(),this.node.all_children_loaded=!1;var i=this;void 0===e?this.node.loadChildren(!1,function(e){i.onFirstLoaded(e)},function(){i.init=!1,i.load()}):(this.is_admin=!0,this.setSort(o.SORT_NEW),this.node.loadChildrenIds(e,function(e){i.onFirstLoaded(e)},function(){i.init=!1,i.load(e)}))}},loadChildren:function(e){this.node.loadChildren(e)},onFirstLoaded:function(e){this.init=!0,this.show_emojis=e.show_emojis,this.allow_anonymous=e.allow_anonymous,this.allow_anonymous_vote=e.allow_anonymous_vote,this.force_anonymous=e.force_anonymous,this.form_html=e.form,this.form_validation_rules=e.js_validation_rules,this.report_form_html=e.report_form,this.report_form_validation_rules=e.report_js_validation_rules,this.max_level=e.max_level,this.can_post=e.can_post},getThreadUrl:function(e,t){return"/threads/"+this.type+"/get-posts/"+this.sort+"/"+this.id_related+"/"+e+"/"+t},getPostsUrl:function(){return"/threads/"+this.type+"/get-posts/"+this.id_related},getVoteUrl:function(e,t){return"/threads/"+this.type+"/vote/"+this.sort+"/"+this.id_related+"/"+e+"/"+t},getPostUrl:function(e){return"/threads/"+this.type+"/post/"+this.id_related+"/"+e},getEditUrl:function(e){return"/threads/"+this.type+"/edit/"+this.id_related+"/"+e},getDeleteUrl:function(e){return"/threads/"+this.type+"/delete/"+this.id_related+"/"+e},getUndeleteUrl:function(e){return"/threads/"+this.type+"/undelete/"+this.id_related+"/"+e},getReportUrl:function(e){return"/threads/"+this.type+"/report/"+this.id_related+"/"+e},setSort:function(e){return"string"!=typeof e||e!==o.SORT_NEW&&e!==o.SORT_TOP&&e!==o.SORT_AUTHOR?(this.node.ui_node.setSort(this.sort),!1):(this.sort=e,this.node.ui_node.setSort(this.sort),!0)},updateSort:function(e){return"string"==typeof e&&(e===o.SORT_NEW||e===o.SORT_TOP||e===o.SORT_AUTHOR)&&(this.sort===e||(this.node.destroyChildren(),this.setSort(e),this.init=!1,void this.load()))},canOpenFormOnInit:function(){return this.node.canOpenFormOnInit()},getForm:function(){return this.node.getForm()},setNbChildren:function(e){return this.node.setNbChildren(e)},createForm:function(e){return new n(e,this.form_html,this.force_anonymous,JSON.parse(JSON.stringify(this.form_validation_rules)))},createReportForm:function(e){return new s(e,this.report_form_html,JSON.parse(JSON.stringify(this.report_form_validation_rules)))},setLoginReloadWithHash:function(e){this.login_reload_with_hash="boolean"!=typeof e||e}},o}),define("text!skins/common/thread/ui/node.mustache",[],function(){return'<div class="thread-node">\r\n\t<div class="thread-node-nb-before hidden"></div>\r\n\t{{#has_profile}}\r\n\t<div class="thread-node-picture">\r\n\t\t<img src="{{{ default_img }}}" />\r\n\t\t<span class="flag-small hidden"></span>\r\n\t</div>\r\n\t{{/has_profile}}\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t<div class="thread-node-content hidden">\r\n\t\t<div class="thread-node-poster">\r\n\t\t\t{{^has_profile}}<span class="flag-small hidden"></span>{{/has_profile}}\r\n\t\t\t<span class="thread-node-poster-name"></span>\r\n\t\t\t<span class="thread-node-date"></span>\r\n\t\t</div>\r\n\t\t<div class="thread-node-message"></div>\r\n\t\t<div class="thread-node-metadata">\r\n\t\t\t<span class="icon-f icf-thumb-up"></span>\r\n\t\t\t<span class="thread-node-nb-votes votes-up"></span>\r\n\t\t\t<span class="icon-f icf-thumb-down"></span>\r\n\t\t\t<span class="thread-node-nb-votes votes-down"></span>\r\n\t\t\t<a class="thread-node-btn-post hidden">{{{ lbl_reply }}}</a>\r\n\t\t\t<a class="thread-node-btn-edit hidden">{{{ lbl_edit }}}</a>\r\n\t\t\t<a class="thread-node-btn-delete hidden">{{{ lbl_delete }}}</a>\r\n\t\t\t<a class="thread-node-btn-restore hidden">{{{ lbl_undelete }}}</a>\r\n\t\t\t<a class="thread-node-btn-report hidden">{{{ lbl_report }}}</a>\r\n\t\t</div>\r\n\t\t{{> children}}\r\n\t</div>\r\n\t<div class="thread-node-nb-after hidden"></div>\r\n</div>'}),define("text!skins/common/thread/ui/children.mustache",[],function(){return'<div class="thread-node-children hidden">\r\n\t<div class="thread-node-children-show"><span></span></div>\r\n\t<div class="thread-node-children-hide"><span>{{{ lbl_hide_replies }}}</span></div>\r\n\t<div class="thread-node-children-nodes" style="display:none"></div>\r\n</div>\r\n<div class="thread-node-children-loader hidden"></div>\r\n<div class="thread-node-children-error hidden"></div>\r\n<div class="thread-node-children-load-next">\r\n\t<a href="#" class="thread-node-btn thread-node-children-load-next-btn hidden"></a>\r\n\t<a href="#" class="thread-node-btn thread-node-children-load-all-btn hidden">{{{ lbl_load_all }}}</a>\r\n\t<a href="#" class="thread-node-btn thread-node-btn-post hidden">{{{ lbl_post_reply }}}</a>\r\n</div>'}),define("text!skins/common/thread/ui/message.mustache",[],function(){return'{{#is_video}}<span class="icon uploads"></span>{{/is_video}}\n{{#is_gallery}}<span class="icon albums"></span>{{/is_gallery}}\n{{#is_playlist}}<span class="icon playlist"></span>{{/is_playlist}}\n<a class="preview preview-{{ t }}" href="{{ u }}" data-thumb="{{{ i }}}">{{{ n }}}</a>\n{{#v}}<span class="icon-f icf-check-circle verified"></span>{{/v}}'}),define("text!skins/common/thread/ui/friend_button.mustache",[],function(){return'{{#is_friend}}\n\t<div class="thread-node-pic-bottom" title="{{{ lbl_already_friends }}}"><span class="icon-f icf-user-check"></span></div>\n{{/is_friend}}\n{{#friend_req_asked}}\n\t<div class="thread-node-pic-bottom" title="{{{ lbl_friend_req_asked }}}"><span class="icon-f icf-user-hourglass"></span></div>\n{{/friend_req_asked}}\n{{#can_ask_friend}}\n\t<div class="thread-node-pic-bottom">\n\t\t<button type="button" class="btn btn-default btn-xs thread-node-friend-ask-btn" title="{{{ lbl_add_to_friends }}}">\n\t\t\t<span class="icon-f icf-user-plus"></span>\n\t\t</button>\n\t</div>\n{{/can_ask_friend}}'}),function(e){if("function"==typeof define&&define.amd)define("jquery.textcomplete.min",["jquery"],e);else if("object"==typeof module&&module.exports){var t=require("jquery");module.exports=e(t)}else e(jQuery)}(function(e){if(void 0===e)throw new Error("jQuery.textcomplete requires jQuery");return function(e){"use strict";var t=function(e){console.warn&&console.warn(e)},i=1;e.fn.textcomplete=function(n,s){var o=Array.prototype.slice.call(arguments);return this.each(function(){var a=this,r=e(this),l=r.data("textComplete");if(l||(s||(s={}),s._oid=i++,l=new e.fn.textcomplete.Completer(this,s),r.data("textComplete",l)),"string"==typeof n){if(!l)return;o.shift(),l[n].apply(l,o),"destroy"===n&&r.removeData("textComplete")}else e.each(n,function(i){e.each(["header","footer","placement","maxCount"],function(e){i[e]&&(l.option[e]=i[e],t(e+"as a strategy param is deprecated. Use option."),delete i[e])})}),l.register(e.fn.textcomplete.Strategy.parse(n,{el:a,$el:r}))})}}(e),function(e){"use strict";function t(i,o){if(this.$el=e(i),this.id="textcomplete"+n++,this.strategies=[],this.views=[],this.option=e.extend({},t.defaults,o),!(this.$el.is("input[type=text]")||this.$el.is("input[type=search]")||this.$el.is("textarea")||i.isContentEditable||"true"==i.contentEditable))throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(i===i.ownerDocument.activeElement)this.initialize();else{var a=this;this.$el.one("focus."+this.id,function(){a.initialize()}),this.option.adapter&&"CKEditor"!=this.option.adapter||"undefined"==typeof CKEDITOR||!this.$el.is("textarea")||CKEDITOR.on("instanceReady",function(t){-1==e.inArray(t.editor.id,s)&&(s.push(t.editor.id),t.editor.on("focus",function(i){a.$el=e(t.editor.editable().$),a.option.adapter||(a.option.adapter=e.fn.textcomplete.CKEditor),a.option.ckeditor_instance=t.editor,a.initialize()}))})}}var i=function(e){return"[object String]"===Object.prototype.toString.call(e)},n=0,s=[];t.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30},e.extend(t.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var t=this.$el.get(0);if(this.$el.prop("ownerDocument")!==document&&window.frames.length)for(var i=0;i<window.frames.length;i++)if(this.$el.prop("ownerDocument")===window.frames[i].document){this.$iframe=e(window.frames[i].frameElement);break}this.dropdown=new e.fn.textcomplete.Dropdown(t,this,this.option);var n,s;this.option.adapter?n=this.option.adapter:(s=this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")?"number"==typeof t.selectionEnd?"Textarea":"IETextarea":"ContentEditable",n=e.fn.textcomplete[s]),this.adapter=new n(t,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},deactivate:function(){this.dropdown&&this.dropdown.deactivate()},trigger:function(e,t){this.dropdown||this.initialize(),null!=e||(e=this.adapter.getTextFromHeadToCaret());var i=this._extractSearchQuery(e);if(i.length){var n=i[1];if(t&&this._term===n&&""!==n)return;this._term=n,this._search.apply(this,i)}else this._term=null,this.dropdown.deactivate()},fire:function(e){var t=Array.prototype.slice.call(arguments,1);return this.$el.trigger(e,t),this},register:function(e){Array.prototype.push.apply(this.strategies,e)},select:function(e,t,i){this._term=null,this.adapter.select(e,t,i),this.fire("change").fire("textComplete:select",e,t),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(t){for(var n=0;n<this.strategies.length;n++){var s=this.strategies[n],o=s.context(t);if(o||""===o){var a=e.isFunction(s.match)?s.match(t):s.match;i(o)&&(t=o);var r=t.match(a);if(r)return[s,r[s.index],r]}}return[]},_search:function(e){var t,i;return function(){var n=Array.prototype.slice.call(arguments);if(t)return void(i=n);t=!0;var s=this;n.unshift(function o(){if(i){var n=i;i=void 0,n.unshift(o),e.apply(s,n)}else t=!1}),e.apply(this,n)}}(function(e,t,i,n){var s=this;t.search(i,function(n,o){s.dropdown.shown||s.dropdown.activate(),s._clearAtNext&&(s.dropdown.clear(),s._clearAtNext=!1),s.dropdown.setPosition(s.adapter.getCaretPosition()),s.dropdown.render(s._zip(n,t,i)),o||(e(),s._clearAtNext=!0)},n)}),_zip:function(t,i,n){return e.map(t,function(e){return{value:e,strategy:i,term:n}})}}),e.fn.textcomplete.Completer=t}(e),function(e){"use strict";function t(i,n,o){this.$el=t.createElement(o),this.completer=n,this.id=n.id+"dropdown",this._data=[],this.$inputEl=e(i),this.option=o,o.listPosition&&(this.setPosition=o.listPosition),o.height&&this.$el.height(o.height);var a=this;e.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(e,t){null!=o[t]&&(a[t]=o[t])}),this._bindEvents(i),s[this.id]=this}var i=e(window),n=function(e,t){var i,n,s=t.strategy.idProperty;for(i=0;i<e.length;i++)if(n=e[i],n.strategy===t.strategy)if(s){if(n.value[s]===t.value[s])return!0}else if(n.value===t.value)return!0;return!1},s={};e(document).on("click",function(t){var i=t.originalEvent&&t.originalEvent.keepTextCompleteDropdown;e.each(s,function(e,t){e!==i&&t.deactivate()})});var o={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};e.extend(t,{createElement:function(t){var i=t.appendTo;return i instanceof e||(i=e(i)),e("<ul></ul>").addClass(t.dropdownClassName).attr("id","textcomplete-dropdown-"+t._oid).css({display:"none",left:0,position:"absolute",zIndex:t.zIndex}).appendTo(i)}}),e.extend(t.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el.remove(),this.$el=this.$inputEl=this.completer=null,delete s[this.id]},render:function(t){var i=this._buildContents(t),n=e.map(t,function(e){return e.value});if(t.length){var s=t[0].strategy;s.id?this.$el.attr("data-strategy",s.id):this.$el.removeAttr("data-strategy"),this._renderHeader(n),this._renderFooter(n),i&&(this._renderContents(i),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(n):this.shown&&this.deactivate()},setPosition:function(t){var n="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==e(this).css("position")&&("fixed"===e(this).css("position")?(t.top-=i.scrollTop(),t.left-=i.scrollLeft(),n="fixed",!1):void 0)}),this.$el.css(this._applyPlacement(t)),this.$el.css({position:n}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(e){return 38===e.keyCode||e.ctrlKey&&80===e.keyCode},isDown:function(e){return 40===e.keyCode||e.ctrlKey&&78===e.keyCode},isEnter:function(e){return!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&(13===e.keyCode||9===e.keyCode||!0===this.option.completeOnSpace&&32===e.keyCode)},isPageup:function(e){return 33===e.keyCode},isPagedown:function(e){return 34===e.keyCode},isEscape:function(e){return 27===e.keyCode},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("touchstart."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",e.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,e.proxy(this._onKeydown,this))},_onClick:function(t){var i=e(t.target);t.preventDefault(),t.originalEvent.keepTextCompleteDropdown=this.id,i.hasClass("textcomplete-item")||(i=i.closest(".textcomplete-item"));var n=this.data[parseInt(i.data("index"),10)];this.completer.select(n.value,n.strategy,t);var s=this;setTimeout(function(){s.deactivate(),"touchstart"===t.type&&s.$inputEl.focus()},0)},_onMouseover:function(t){var i=e(t.target);t.preventDefault(),i.hasClass("textcomplete-item")||(i=i.closest(".textcomplete-item")),this._index=parseInt(i.data("index"),10),this._activateIndexedItem()},_onKeydown:function(t){if(this.shown){var i;switch(e.isFunction(this.option.onKeydown)&&(i=this.option.onKeydown(t,o)),null==i&&(i=this._defaultKeydown(t)),i){case o.KEY_UP:t.preventDefault(),this._up();break;case o.KEY_DOWN:t.preventDefault(),this._down();break;case o.KEY_ENTER:t.preventDefault(),this._enter(t);break;case o.KEY_PAGEUP:t.preventDefault(),this._pageup();break;case o.KEY_PAGEDOWN:t.preventDefault(),this._pagedown();break;case o.KEY_ESCAPE:t.preventDefault(),this.deactivate()}}},_defaultKeydown:function(e){return this.isUp(e)?o.KEY_UP:this.isDown(e)?o.KEY_DOWN:this.isEnter(e)?o.KEY_ENTER:this.isPageup(e)?o.KEY_PAGEUP:this.isPagedown(e)?o.KEY_PAGEDOWN:this.isEscape(e)?o.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(e){var t=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(t.value,t.strategy,e),this.deactivate()},_pageup:function(){var t=0,i=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(n){return e(this).position().top+e(this).outerHeight()>i?(t=n,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var t=this.data.length-1,i=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(n){return e(this).position().top>i?(t=n,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var e=this._getActiveElement(),t=e.position().top,i=e.outerHeight(),n=this.$el.innerHeight(),s=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||0>t?this.$el.scrollTop(t+s):t+i>n&&this.$el.scrollTop(t+i+s-n)},_buildContents:function(e){var t,i,s,o="";for(i=0;i<e.length&&this.data.length!==this.maxCount;i++)t=e[i],n(this.data,t)||(s=this.data.length,this.data.push(t),o+='<li class="textcomplete-item" data-index="'+s+'"><a>',o+=t.strategy.template(t.value,t.term),o+="</a></li>");return o},_renderHeader:function(t){if(this.header){this._$header||(this._$header=e('<li class="textcomplete-header"></li>').prependTo(this.$el));var i=e.isFunction(this.header)?this.header(t):this.header;this._$header.html(i)}},_renderFooter:function(t){if(this.footer){this._$footer||(this._$footer=e('<li class="textcomplete-footer"></li>').appendTo(this.$el));var i=e.isFunction(this.footer)?this.footer(t):this.footer;this._$footer.html(i)}},_renderNoResultsMessage:function(t){if(this.noResultsMessage){this._$noResultsMessage||(this._$noResultsMessage=e('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el));var i=e.isFunction(this.noResultsMessage)?this.noResultsMessage(t):this.noResultsMessage;this._$noResultsMessage.html(i)}},_renderContents:function(e){this._$footer?this._$footer.before(e):this.$el.append(e)},_fitToBottom:function(){var e=i.scrollTop()+i.height(),t=this.$el.height();this.$el.position().top+t>e&&(this.completer.$iframe||this.$el.offset({top:e-t}))},_fitToRight:function(){for(var e,t=this.option.rightEdgeOffset,n=this.$el.offset().left,s=this.$el.width(),o=i.width()-t;n+s>o&&(this.$el.offset({left:n-t}),!((e=this.$el.offset().left)>=n));)n=e},_applyPlacement:function(e){return-1!==this.placement.indexOf("top")?e={top:"auto",bottom:this.$el.parent().height()-e.top+e.lineHeight,left:e.left}:(e.bottom="auto",delete e.lineHeight),-1!==this.placement.indexOf("absleft")?e.left=0:-1!==this.placement.indexOf("absright")&&(e.right=0,e.left="auto"),e}}),e.fn.textcomplete.Dropdown=t,e.extend(e.fn.textcomplete,o)}(e),function(e){"use strict";function t(t){e.extend(this,t),this.cache&&(this.search=i(this.search))}var i=function(e){var t={};return function(i,n){t[i]?n(t[i]):e.call(this,i,function(e){t[i]=(t[i]||[]).concat(e),n.apply(null,arguments)})}};t.parse=function(i,n){return e.map(i,function(e){var i=new t(e);return i.el=n.el,i.$el=n.$el,i})},e.extend(t.prototype,{match:null,replace:null,search:null,id:null,cache:!1,context:function(){return!0},index:2,template:function(e){return e},idProperty:null}),e.fn.textcomplete.Strategy=t}(e),function(e){"use strict";function t(){}var i=Date.now||function(){return(new Date).getTime()},n=function(e,t){var n,s,o,a,r,l=function(){var d=i()-a;t>d?n=setTimeout(l,t-d):(n=null,r=e.apply(o,s),o=s=null)};return function(){return o=this,s=arguments,a=i(),n||(n=setTimeout(l,t)),r}};e.extend(t.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(t,i,s){this.el=t,this.$el=e(t),this.id=i.id+this.constructor.name,this.completer=i,this.option=s,this.option.debounce&&(this._onKeyup=n(this._onKeyup,this.option.debounce)),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var t=this._getCaretRelativePosition(),i=this.$el.offset(),n=this.option.appendTo;if(n){n instanceof e||(n=e(n));var s=n.offsetParent().offset();i.top-=s.top,i.left-=s.left}return t.top+=i.top,t.left+=i.left,t},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))},_onKeyup:function(e){this._skipSearch(e)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(e){switch(e.keyCode){case 9:case 13:case 16:case 17:case 18:case 33:case 34:case 40:case 38:case 27:return!0}if(e.ctrlKey)switch(e.keyCode){case 78:case 80:return!0}}}),e.fn.textcomplete.Adapter=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,i,n){var s,o=this.getTextFromHeadToCaret(),a=this.el.value.substring(this.el.selectionEnd),r=i.replace(t,n);void 0!==r&&(e.isArray(r)&&(a=r[1]+a,r=r[0]),s=e.isFunction(i.match)?i.match(o):i.match,o=o.replace(s,r),this.$el.val(o+a),this.el.selectionStart=this.el.selectionEnd=o.length)},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var t=e.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:t.top+this._calculateLineHeight()-this.$el.scrollTop(),left:t.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()}},_calculateLineHeight:function(){var e=parseInt(this.$el.css("line-height"),10);if(isNaN(e)){var t=this.el.parentNode,i=document.createElement(this.el.nodeName),n=this.el.style;i.setAttribute("style","margin:0px;padding:0px;font-family:"+n.fontFamily+";font-size:"+n.fontSize),i.innerHTML="test",t.appendChild(i),e=i.clientHeight,t.removeChild(i)}return e}}),e.fn.textcomplete.Textarea=t}(e),function(e){"use strict";function t(t,n,s){this.initialize(t,n,s),e("<span>"+i+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(t)}var i="吶";e.extend(t.prototype,e.fn.textcomplete.Textarea.prototype,{select:function(t,i,n){var s,o=this.getTextFromHeadToCaret(),a=this.el.value.substring(o.length),r=i.replace(t,n);if(void 0!==r){e.isArray(r)&&(a=r[1]+a,r=r[0]),s=e.isFunction(i.match)?i.match(o):i.match,o=o.replace(s,r),this.$el.val(o+a),this.el.focus();var l=this.el.createTextRange();l.collapse(!0),l.moveEnd("character",o.length),l.moveStart("character",o.length),l.select()}},getTextFromHeadToCaret:function(){this.el.focus();var e=document.selection.createRange();e.moveStart("character",-this.el.value.length);var t=e.text.split(i);return 1===t.length?t[0]:t[1]}}),e.fn.textcomplete.IETextarea=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,i,n){var s=this.getTextFromHeadToCaret(),o=this.el.ownerDocument.getSelection(),a=o.getRangeAt(0),r=a.cloneRange();r.selectNodeContents(a.startContainer);var l,d=r.toString(),u=d.substring(a.startOffset),c=i.replace(t,n);if(void 0!==c){e.isArray(c)&&(u=c[1]+u,c=c[0]),l=e.isFunction(i.match)?i.match(s):i.match,s=s.replace(l,c).replace(/ $/,"&nbsp"),a.selectNodeContents(a.startContainer),a.deleteContents();var f=this.el.ownerDocument.createElement("div");f.innerHTML=s;var h=this.el.ownerDocument.createElement("div");h.innerHTML=u;for(var p,_,g=this.el.ownerDocument.createDocumentFragment();p=f.firstChild;)_=g.appendChild(p);for(;p=h.firstChild;)g.appendChild(p);a.insertNode(g),a.setStartAfter(_),a.collapse(!0),o.removeAllRanges(),o.addRange(a)}},_getCaretRelativePosition:function(){var t=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange(),i=t.endContainer.parentNode,n=this.el.ownerDocument.createElement("span");t.insertNode(n),t.selectNodeContents(n),t.deleteContents(),setTimeout(function(){i.normalize()},0);var s=e(n),o=s.offset();if(o.left-=this.$el.offset().left,o.top+=s.height()-this.$el.offset().top,o.lineHeight=s.height(),this.completer.$iframe){var a=this.completer.$iframe.offset();o.top+=a.top,o.left+=a.left,o.top-=e(this.completer.$iframe[0].contentWindow.document).scrollTop()}return s.remove(),o},getTextFromHeadToCaret:function(){var e=this.el.ownerDocument.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(e.startContainer),t.toString().substring(0,e.startOffset)}}),e.fn.textcomplete.ContentEditable=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var t=this;this.option.ckeditor_instance.on("key",function(e){var i=e.data;return t._onKeyup(i),(!t.completer.dropdown.shown||!t._skipSearch(i))&&void 0},null,null,1),this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))}}),e.fn.textcomplete.CKEditor=t}(e),function(e){function t(e,t,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var r=document.querySelector("#input-textarea-caret-position-mirror-div");r&&r.parentNode.removeChild(r)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var d=l.style,u=window.getComputedStyle?getComputedStyle(e):e.currentStyle;d.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(d.wordWrap="break-word"),d.position="absolute",a||(d.visibility="hidden"),i.forEach(function(e){d[e]=u[e]}),s?e.scrollHeight>parseInt(u.height)&&(d.overflowY="scroll"):d.overflow="hidden",l.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(l.textContent=l.textContent.replace(/\s/g," "));var c=document.createElement("span");c.textContent=e.value.substring(t)||".",l.appendChild(c);var f={top:c.offsetTop+parseInt(u.borderTopWidth),left:c.offsetLeft+parseInt(u.borderLeftWidth)};return a?c.style.backgroundColor="#aaa":document.body.removeChild(l),f}var i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,s=n&&null!=window.mozInnerScreenX;e.fn.textcomplete.getCaretCoordinates=t}(e),e}),!function(e){e.emojioneList={":kiss_ww:":["1f469-200d-2764-fe0f-200d-1f48b-200d-1f469","1f469-2764-1f48b-1f469"],":couplekiss_ww:":["1f469-200d-2764-fe0f-200d-1f48b-200d-1f469","1f469-2764-1f48b-1f469"],":kiss_mm:":["1f468-200d-2764-fe0f-200d-1f48b-200d-1f468","1f468-2764-1f48b-1f468"],":couplekiss_mm:":["1f468-200d-2764-fe0f-200d-1f48b-200d-1f468","1f468-2764-1f48b-1f468"],":family_mmbb:":["1f468-200d-1f468-200d-1f466-200d-1f466","1f468-1f468-1f466-1f466"],
":family_mmgb:":["1f468-200d-1f468-200d-1f467-200d-1f466","1f468-1f468-1f467-1f466"],":family_mmgg:":["1f468-200d-1f468-200d-1f467-200d-1f467","1f468-1f468-1f467-1f467"],":family_mwbb:":["1f468-200d-1f469-200d-1f466-200d-1f466","1f468-1f469-1f466-1f466"],":family_mwgb:":["1f468-200d-1f469-200d-1f467-200d-1f466","1f468-1f469-1f467-1f466"],":family_mwgg:":["1f468-200d-1f469-200d-1f467-200d-1f467","1f468-1f469-1f467-1f467"],":family_wwbb:":["1f469-200d-1f469-200d-1f466-200d-1f466","1f469-1f469-1f466-1f466"],":family_wwgb:":["1f469-200d-1f469-200d-1f467-200d-1f466","1f469-1f469-1f467-1f466"],":family_wwgg:":["1f469-200d-1f469-200d-1f467-200d-1f467","1f469-1f469-1f467-1f467"],":couple_ww:":["1f469-200d-2764-fe0f-200d-1f469","1f469-2764-1f469"],":couple_with_heart_ww:":["1f469-200d-2764-fe0f-200d-1f469","1f469-2764-1f469"],":couple_mm:":["1f468-200d-2764-fe0f-200d-1f468","1f468-2764-1f468"],":couple_with_heart_mm:":["1f468-200d-2764-fe0f-200d-1f468","1f468-2764-1f468"],":family_mmb:":["1f468-200d-1f468-200d-1f466","1f468-1f468-1f466"],":family_mmg:":["1f468-200d-1f468-200d-1f467","1f468-1f468-1f467"],":family_mwg:":["1f468-200d-1f469-200d-1f467","1f468-1f469-1f467"],":family_wwb:":["1f469-200d-1f469-200d-1f466","1f469-1f469-1f466"],":family_wwg:":["1f469-200d-1f469-200d-1f467","1f469-1f469-1f467"],":eye_in_speech_bubble:":["1f441-200d-1f5e8","1f441-1f5e8"],":hash:":["0023-fe0f-20e3","0023-20e3"],":zero:":["0030-fe0f-20e3","0030-20e3"],":one:":["0031-fe0f-20e3","0031-20e3"],":two:":["0032-fe0f-20e3","0032-20e3"],":three:":["0033-fe0f-20e3","0033-20e3"],":four:":["0034-fe0f-20e3","0034-20e3"],":five:":["0035-fe0f-20e3","0035-20e3"],":six:":["0036-fe0f-20e3","0036-20e3"],":seven:":["0037-fe0f-20e3","0037-20e3"],":eight:":["0038-fe0f-20e3","0038-20e3"],":nine:":["0039-fe0f-20e3","0039-20e3"],":asterisk:":["002a-fe0f-20e3","002a-20e3"],":keycap_asterisk:":["002a-fe0f-20e3","002a-20e3"],":metal_tone5:":["1f918-1f3ff"],":sign_of_the_horns_tone5:":["1f918-1f3ff"],":metal_tone4:":["1f918-1f3fe"],":sign_of_the_horns_tone4:":["1f918-1f3fe"],":metal_tone3:":["1f918-1f3fd"],":sign_of_the_horns_tone3:":["1f918-1f3fd"],":metal_tone2:":["1f918-1f3fc"],":sign_of_the_horns_tone2:":["1f918-1f3fc"],":metal_tone1:":["1f918-1f3fb"],":sign_of_the_horns_tone1:":["1f918-1f3fb"],":bath_tone5:":["1f6c0-1f3ff"],":bath_tone4:":["1f6c0-1f3fe"],":bath_tone3:":["1f6c0-1f3fd"],":bath_tone2:":["1f6c0-1f3fc"],":bath_tone1:":["1f6c0-1f3fb"],":walking_tone5:":["1f6b6-1f3ff"],":walking_tone4:":["1f6b6-1f3fe"],":walking_tone3:":["1f6b6-1f3fd"],":walking_tone2:":["1f6b6-1f3fc"],":walking_tone1:":["1f6b6-1f3fb"],":mountain_bicyclist_tone5:":["1f6b5-1f3ff"],":mountain_bicyclist_tone4:":["1f6b5-1f3fe"],":mountain_bicyclist_tone3:":["1f6b5-1f3fd"],":mountain_bicyclist_tone2:":["1f6b5-1f3fc"],":mountain_bicyclist_tone1:":["1f6b5-1f3fb"],":bicyclist_tone5:":["1f6b4-1f3ff"],":bicyclist_tone4:":["1f6b4-1f3fe"],":bicyclist_tone3:":["1f6b4-1f3fd"],":bicyclist_tone2:":["1f6b4-1f3fc"],":bicyclist_tone1:":["1f6b4-1f3fb"],":rowboat_tone5:":["1f6a3-1f3ff"],":rowboat_tone4:":["1f6a3-1f3fe"],":rowboat_tone3:":["1f6a3-1f3fd"],":rowboat_tone2:":["1f6a3-1f3fc"],":rowboat_tone1:":["1f6a3-1f3fb"],":pray_tone5:":["1f64f-1f3ff"],":pray_tone4:":["1f64f-1f3fe"],":pray_tone3:":["1f64f-1f3fd"],":pray_tone2:":["1f64f-1f3fc"],":pray_tone1:":["1f64f-1f3fb"],":person_with_pouting_face_tone5:":["1f64e-1f3ff"],":person_with_pouting_face_tone4:":["1f64e-1f3fe"],":person_with_pouting_face_tone3:":["1f64e-1f3fd"],":person_with_pouting_face_tone2:":["1f64e-1f3fc"],":person_with_pouting_face_tone1:":["1f64e-1f3fb"],":person_frowning_tone5:":["1f64d-1f3ff"],":person_frowning_tone4:":["1f64d-1f3fe"],":person_frowning_tone3:":["1f64d-1f3fd"],":person_frowning_tone2:":["1f64d-1f3fc"],":person_frowning_tone1:":["1f64d-1f3fb"],":raised_hands_tone5:":["1f64c-1f3ff"],":raised_hands_tone4:":["1f64c-1f3fe"],":raised_hands_tone3:":["1f64c-1f3fd"],":raised_hands_tone2:":["1f64c-1f3fc"],":raised_hands_tone1:":["1f64c-1f3fb"],":raising_hand_tone5:":["1f64b-1f3ff"],":raising_hand_tone4:":["1f64b-1f3fe"],":raising_hand_tone3:":["1f64b-1f3fd"],":raising_hand_tone2:":["1f64b-1f3fc"],":raising_hand_tone1:":["1f64b-1f3fb"],":bow_tone5:":["1f647-1f3ff"],":bow_tone4:":["1f647-1f3fe"],":bow_tone3:":["1f647-1f3fd"],":bow_tone2:":["1f647-1f3fc"],":bow_tone1:":["1f647-1f3fb"],":ok_woman_tone5:":["1f646-1f3ff"],":ok_woman_tone4:":["1f646-1f3fe"],":ok_woman_tone3:":["1f646-1f3fd"],":ok_woman_tone2:":["1f646-1f3fc"],":ok_woman_tone1:":["1f646-1f3fb"],":no_good_tone5:":["1f645-1f3ff"],":no_good_tone4:":["1f645-1f3fe"],":no_good_tone3:":["1f645-1f3fd"],":no_good_tone2:":["1f645-1f3fc"],":no_good_tone1:":["1f645-1f3fb"],":vulcan_tone5:":["1f596-1f3ff"],":raised_hand_with_part_between_middle_and_ring_fingers_tone5:":["1f596-1f3ff"],":vulcan_tone4:":["1f596-1f3fe"],":raised_hand_with_part_between_middle_and_ring_fingers_tone4:":["1f596-1f3fe"],":vulcan_tone3:":["1f596-1f3fd"],":raised_hand_with_part_between_middle_and_ring_fingers_tone3:":["1f596-1f3fd"],":vulcan_tone2:":["1f596-1f3fc"],":raised_hand_with_part_between_middle_and_ring_fingers_tone2:":["1f596-1f3fc"],":vulcan_tone1:":["1f596-1f3fb"],":raised_hand_with_part_between_middle_and_ring_fingers_tone1:":["1f596-1f3fb"],":middle_finger_tone5:":["1f595-1f3ff"],":reversed_hand_with_middle_finger_extended_tone5:":["1f595-1f3ff"],":middle_finger_tone4:":["1f595-1f3fe"],":reversed_hand_with_middle_finger_extended_tone4:":["1f595-1f3fe"],":middle_finger_tone3:":["1f595-1f3fd"],":reversed_hand_with_middle_finger_extended_tone3:":["1f595-1f3fd"],":middle_finger_tone2:":["1f595-1f3fc"],":reversed_hand_with_middle_finger_extended_tone2:":["1f595-1f3fc"],":middle_finger_tone1:":["1f595-1f3fb"],":reversed_hand_with_middle_finger_extended_tone1:":["1f595-1f3fb"],":hand_splayed_tone5:":["1f590-1f3ff"],":raised_hand_with_fingers_splayed_tone5:":["1f590-1f3ff"],":hand_splayed_tone4:":["1f590-1f3fe"],":raised_hand_with_fingers_splayed_tone4:":["1f590-1f3fe"],":hand_splayed_tone3:":["1f590-1f3fd"],":raised_hand_with_fingers_splayed_tone3:":["1f590-1f3fd"],":hand_splayed_tone2:":["1f590-1f3fc"],":raised_hand_with_fingers_splayed_tone2:":["1f590-1f3fc"],":hand_splayed_tone1:":["1f590-1f3fb"],":raised_hand_with_fingers_splayed_tone1:":["1f590-1f3fb"],":spy_tone5:":["1f575-1f3ff"],":sleuth_or_spy_tone5:":["1f575-1f3ff"],":spy_tone4:":["1f575-1f3fe"],":sleuth_or_spy_tone4:":["1f575-1f3fe"],":spy_tone3:":["1f575-1f3fd"],":sleuth_or_spy_tone3:":["1f575-1f3fd"],":spy_tone2:":["1f575-1f3fc"],":sleuth_or_spy_tone2:":["1f575-1f3fc"],":spy_tone1:":["1f575-1f3fb"],":sleuth_or_spy_tone1:":["1f575-1f3fb"],":muscle_tone5:":["1f4aa-1f3ff"],":muscle_tone4:":["1f4aa-1f3fe"],":muscle_tone3:":["1f4aa-1f3fd"],":muscle_tone2:":["1f4aa-1f3fc"],":muscle_tone1:":["1f4aa-1f3fb"],":haircut_tone5:":["1f487-1f3ff"],":haircut_tone4:":["1f487-1f3fe"],":haircut_tone3:":["1f487-1f3fd"],":haircut_tone2:":["1f487-1f3fc"],":haircut_tone1:":["1f487-1f3fb"],":massage_tone5:":["1f486-1f3ff"],":massage_tone4:":["1f486-1f3fe"],":massage_tone3:":["1f486-1f3fd"],":massage_tone2:":["1f486-1f3fc"],":massage_tone1:":["1f486-1f3fb"],":nail_care_tone5:":["1f485-1f3ff"],":nail_care_tone4:":["1f485-1f3fe"],":nail_care_tone3:":["1f485-1f3fd"],":nail_care_tone2:":["1f485-1f3fc"],":nail_care_tone1:":["1f485-1f3fb"],":dancer_tone5:":["1f483-1f3ff"],":dancer_tone4:":["1f483-1f3fe"],":dancer_tone3:":["1f483-1f3fd"],":dancer_tone2:":["1f483-1f3fc"],":dancer_tone1:":["1f483-1f3fb"],":guardsman_tone5:":["1f482-1f3ff"],":guardsman_tone4:":["1f482-1f3fe"],":guardsman_tone3:":["1f482-1f3fd"],":guardsman_tone2:":["1f482-1f3fc"],":guardsman_tone1:":["1f482-1f3fb"],":information_desk_person_tone5:":["1f481-1f3ff"],":information_desk_person_tone4:":["1f481-1f3fe"],":information_desk_person_tone3:":["1f481-1f3fd"],":information_desk_person_tone2:":["1f481-1f3fc"],":information_desk_person_tone1:":["1f481-1f3fb"],":angel_tone5:":["1f47c-1f3ff"],":angel_tone4:":["1f47c-1f3fe"],":angel_tone3:":["1f47c-1f3fd"],":angel_tone2:":["1f47c-1f3fc"],":angel_tone1:":["1f47c-1f3fb"],":princess_tone5:":["1f478-1f3ff"],":princess_tone4:":["1f478-1f3fe"],":princess_tone3:":["1f478-1f3fd"],":princess_tone2:":["1f478-1f3fc"],":princess_tone1:":["1f478-1f3fb"],":construction_worker_tone5:":["1f477-1f3ff"],":construction_worker_tone4:":["1f477-1f3fe"],":construction_worker_tone3:":["1f477-1f3fd"],":construction_worker_tone2:":["1f477-1f3fc"],":construction_worker_tone1:":["1f477-1f3fb"],":baby_tone5:":["1f476-1f3ff"],":baby_tone4:":["1f476-1f3fe"],":baby_tone3:":["1f476-1f3fd"],":baby_tone2:":["1f476-1f3fc"],":baby_tone1:":["1f476-1f3fb"],":older_woman_tone5:":["1f475-1f3ff"],":grandma_tone5:":["1f475-1f3ff"],":older_woman_tone4:":["1f475-1f3fe"],":grandma_tone4:":["1f475-1f3fe"],":older_woman_tone3:":["1f475-1f3fd"],":grandma_tone3:":["1f475-1f3fd"],":older_woman_tone2:":["1f475-1f3fc"],":grandma_tone2:":["1f475-1f3fc"],":older_woman_tone1:":["1f475-1f3fb"],":grandma_tone1:":["1f475-1f3fb"],":older_man_tone5:":["1f474-1f3ff"],":older_man_tone4:":["1f474-1f3fe"],":older_man_tone3:":["1f474-1f3fd"],":older_man_tone2:":["1f474-1f3fc"],":older_man_tone1:":["1f474-1f3fb"],":man_with_turban_tone5:":["1f473-1f3ff"],":man_with_turban_tone4:":["1f473-1f3fe"],":man_with_turban_tone3:":["1f473-1f3fd"],":man_with_turban_tone2:":["1f473-1f3fc"],":man_with_turban_tone1:":["1f473-1f3fb"],":man_with_gua_pi_mao_tone5:":["1f472-1f3ff"],":man_with_gua_pi_mao_tone4:":["1f472-1f3fe"],":man_with_gua_pi_mao_tone3:":["1f472-1f3fd"],":man_with_gua_pi_mao_tone2:":["1f472-1f3fc"],":man_with_gua_pi_mao_tone1:":["1f472-1f3fb"],":person_with_blond_hair_tone5:":["1f471-1f3ff"],":person_with_blond_hair_tone4:":["1f471-1f3fe"],":person_with_blond_hair_tone3:":["1f471-1f3fd"],":person_with_blond_hair_tone2:":["1f471-1f3fc"],":person_with_blond_hair_tone1:":["1f471-1f3fb"],":bride_with_veil_tone5:":["1f470-1f3ff"],":bride_with_veil_tone4:":["1f470-1f3fe"],":bride_with_veil_tone3:":["1f470-1f3fd"],":bride_with_veil_tone2:":["1f470-1f3fc"],":bride_with_veil_tone1:":["1f470-1f3fb"],":cop_tone5:":["1f46e-1f3ff"],":cop_tone4:":["1f46e-1f3fe"],":cop_tone3:":["1f46e-1f3fd"],":cop_tone2:":["1f46e-1f3fc"],":cop_tone1:":["1f46e-1f3fb"],":woman_tone5:":["1f469-1f3ff"],":woman_tone4:":["1f469-1f3fe"],":woman_tone3:":["1f469-1f3fd"],":woman_tone2:":["1f469-1f3fc"],":woman_tone1:":["1f469-1f3fb"],":man_tone5:":["1f468-1f3ff"],":man_tone4:":["1f468-1f3fe"],":man_tone3:":["1f468-1f3fd"],":man_tone2:":["1f468-1f3fc"],":man_tone1:":["1f468-1f3fb"],":girl_tone5:":["1f467-1f3ff"],":girl_tone4:":["1f467-1f3fe"],":girl_tone3:":["1f467-1f3fd"],":girl_tone2:":["1f467-1f3fc"],":girl_tone1:":["1f467-1f3fb"],":boy_tone5:":["1f466-1f3ff"],":boy_tone4:":["1f466-1f3fe"],":boy_tone3:":["1f466-1f3fd"],":boy_tone2:":["1f466-1f3fc"],":boy_tone1:":["1f466-1f3fb"],":open_hands_tone5:":["1f450-1f3ff"],":open_hands_tone4:":["1f450-1f3fe"],":open_hands_tone3:":["1f450-1f3fd"],":open_hands_tone2:":["1f450-1f3fc"],":open_hands_tone1:":["1f450-1f3fb"],":clap_tone5:":["1f44f-1f3ff"],":clap_tone4:":["1f44f-1f3fe"],":clap_tone3:":["1f44f-1f3fd"],":clap_tone2:":["1f44f-1f3fc"],":clap_tone1:":["1f44f-1f3fb"],":thumbsdown_tone5:":["1f44e-1f3ff"],":-1_tone5:":["1f44e-1f3ff"],":thumbsdown_tone4:":["1f44e-1f3fe"],":-1_tone4:":["1f44e-1f3fe"],":thumbsdown_tone3:":["1f44e-1f3fd"],":-1_tone3:":["1f44e-1f3fd"],":thumbsdown_tone2:":["1f44e-1f3fc"],":-1_tone2:":["1f44e-1f3fc"],":thumbsdown_tone1:":["1f44e-1f3fb"],":-1_tone1:":["1f44e-1f3fb"],":thumbsup_tone5:":["1f44d-1f3ff"],":+1_tone5:":["1f44d-1f3ff"],":thumbsup_tone4:":["1f44d-1f3fe"],":+1_tone4:":["1f44d-1f3fe"],":thumbsup_tone3:":["1f44d-1f3fd"],":+1_tone3:":["1f44d-1f3fd"],":thumbsup_tone2:":["1f44d-1f3fc"],":+1_tone2:":["1f44d-1f3fc"],":thumbsup_tone1:":["1f44d-1f3fb"],":+1_tone1:":["1f44d-1f3fb"],":ok_hand_tone5:":["1f44c-1f3ff"],":ok_hand_tone4:":["1f44c-1f3fe"],":ok_hand_tone3:":["1f44c-1f3fd"],":ok_hand_tone2:":["1f44c-1f3fc"],":ok_hand_tone1:":["1f44c-1f3fb"],":wave_tone5:":["1f44b-1f3ff"],":wave_tone4:":["1f44b-1f3fe"],":wave_tone3:":["1f44b-1f3fd"],":wave_tone2:":["1f44b-1f3fc"],":wave_tone1:":["1f44b-1f3fb"],":punch_tone5:":["1f44a-1f3ff"],":punch_tone4:":["1f44a-1f3fe"],":punch_tone3:":["1f44a-1f3fd"],":punch_tone2:":["1f44a-1f3fc"],":punch_tone1:":["1f44a-1f3fb"],":point_right_tone5:":["1f449-1f3ff"],":point_right_tone4:":["1f449-1f3fe"],":point_right_tone3:":["1f449-1f3fd"],":point_right_tone2:":["1f449-1f3fc"],":point_right_tone1:":["1f449-1f3fb"],":point_left_tone5:":["1f448-1f3ff"],":point_left_tone4:":["1f448-1f3fe"],":point_left_tone3:":["1f448-1f3fd"],":point_left_tone2:":["1f448-1f3fc"],":point_left_tone1:":["1f448-1f3fb"],":point_down_tone5:":["1f447-1f3ff"],":point_down_tone4:":["1f447-1f3fe"],":point_down_tone3:":["1f447-1f3fd"],":point_down_tone2:":["1f447-1f3fc"],":point_down_tone1:":["1f447-1f3fb"],":point_up_2_tone5:":["1f446-1f3ff"],":point_up_2_tone4:":["1f446-1f3fe"],":point_up_2_tone3:":["1f446-1f3fd"],":point_up_2_tone2:":["1f446-1f3fc"],":point_up_2_tone1:":["1f446-1f3fb"],":nose_tone5:":["1f443-1f3ff"],":nose_tone4:":["1f443-1f3fe"],":nose_tone3:":["1f443-1f3fd"],":nose_tone2:":["1f443-1f3fc"],":nose_tone1:":["1f443-1f3fb"],":ear_tone5:":["1f442-1f3ff"],":ear_tone4:":["1f442-1f3fe"],":ear_tone3:":["1f442-1f3fd"],":ear_tone2:":["1f442-1f3fc"],":ear_tone1:":["1f442-1f3fb"],":lifter_tone5:":["1f3cb-1f3ff"],":weight_lifter_tone5:":["1f3cb-1f3ff"],":lifter_tone4:":["1f3cb-1f3fe"],":weight_lifter_tone4:":["1f3cb-1f3fe"],":lifter_tone3:":["1f3cb-1f3fd"],":weight_lifter_tone3:":["1f3cb-1f3fd"],":lifter_tone2:":["1f3cb-1f3fc"],":weight_lifter_tone2:":["1f3cb-1f3fc"],":lifter_tone1:":["1f3cb-1f3fb"],":weight_lifter_tone1:":["1f3cb-1f3fb"],":swimmer_tone5:":["1f3ca-1f3ff"],":swimmer_tone4:":["1f3ca-1f3fe"],":swimmer_tone3:":["1f3ca-1f3fd"],":swimmer_tone2:":["1f3ca-1f3fc"],":swimmer_tone1:":["1f3ca-1f3fb"],":horse_racing_tone5:":["1f3c7-1f3ff"],":horse_racing_tone4:":["1f3c7-1f3fe"],":horse_racing_tone3:":["1f3c7-1f3fd"],":horse_racing_tone2:":["1f3c7-1f3fc"],":horse_racing_tone1:":["1f3c7-1f3fb"],":surfer_tone5:":["1f3c4-1f3ff"],":surfer_tone4:":["1f3c4-1f3fe"],":surfer_tone3:":["1f3c4-1f3fd"],":surfer_tone2:":["1f3c4-1f3fc"],":surfer_tone1:":["1f3c4-1f3fb"],":runner_tone5:":["1f3c3-1f3ff"],":runner_tone4:":["1f3c3-1f3fe"],":runner_tone3:":["1f3c3-1f3fd"],":runner_tone2:":["1f3c3-1f3fc"],":runner_tone1:":["1f3c3-1f3fb"],":santa_tone5:":["1f385-1f3ff"],":santa_tone4:":["1f385-1f3fe"],":santa_tone3:":["1f385-1f3fd"],":santa_tone2:":["1f385-1f3fc"],":santa_tone1:":["1f385-1f3fb"],":flag_zw:":["1f1ff-1f1fc"],":zw:":["1f1ff-1f1fc"],":flag_zm:":["1f1ff-1f1f2"],":zm:":["1f1ff-1f1f2"],":flag_za:":["1f1ff-1f1e6"],":za:":["1f1ff-1f1e6"],":flag_yt:":["1f1fe-1f1f9"],":yt:":["1f1fe-1f1f9"],":flag_ye:":["1f1fe-1f1ea"],":ye:":["1f1fe-1f1ea"],":flag_xk:":["1f1fd-1f1f0"],":xk:":["1f1fd-1f1f0"],":flag_ws:":["1f1fc-1f1f8"],":ws:":["1f1fc-1f1f8"],":flag_wf:":["1f1fc-1f1eb"],":wf:":["1f1fc-1f1eb"],":flag_vu:":["1f1fb-1f1fa"],":vu:":["1f1fb-1f1fa"],":flag_vn:":["1f1fb-1f1f3"],":vn:":["1f1fb-1f1f3"],":flag_vi:":["1f1fb-1f1ee"],":vi:":["1f1fb-1f1ee"],":flag_vg:":["1f1fb-1f1ec"],":vg:":["1f1fb-1f1ec"],":flag_ve:":["1f1fb-1f1ea"],":ve:":["1f1fb-1f1ea"],":flag_vc:":["1f1fb-1f1e8"],":vc:":["1f1fb-1f1e8"],":flag_va:":["1f1fb-1f1e6"],":va:":["1f1fb-1f1e6"],":flag_uz:":["1f1fa-1f1ff"],":uz:":["1f1fa-1f1ff"],":flag_uy:":["1f1fa-1f1fe"],":uy:":["1f1fa-1f1fe"],":flag_us:":["1f1fa-1f1f8"],":us:":["1f1fa-1f1f8"],":flag_um:":["1f1fa-1f1f2"],":um:":["1f1fa-1f1f2"],":flag_ug:":["1f1fa-1f1ec"],":ug:":["1f1fa-1f1ec"],":flag_ua:":["1f1fa-1f1e6"],":ua:":["1f1fa-1f1e6"],":flag_tz:":["1f1f9-1f1ff"],":tz:":["1f1f9-1f1ff"],":flag_tw:":["1f1f9-1f1fc"],":tw:":["1f1f9-1f1fc"],":flag_tv:":["1f1f9-1f1fb"],":tuvalu:":["1f1f9-1f1fb"],":flag_tt:":["1f1f9-1f1f9"],":tt:":["1f1f9-1f1f9"],":flag_tr:":["1f1f9-1f1f7"],":tr:":["1f1f9-1f1f7"],":flag_to:":["1f1f9-1f1f4"],":to:":["1f1f9-1f1f4"],":flag_tn:":["1f1f9-1f1f3"],":tn:":["1f1f9-1f1f3"],":flag_tm:":["1f1f9-1f1f2"],":turkmenistan:":["1f1f9-1f1f2"],":flag_tl:":["1f1f9-1f1f1"],":tl:":["1f1f9-1f1f1"],":flag_tk:":["1f1f9-1f1f0"],":tk:":["1f1f9-1f1f0"],":flag_tj:":["1f1f9-1f1ef"],":tj:":["1f1f9-1f1ef"],":flag_th:":["1f1f9-1f1ed"],":th:":["1f1f9-1f1ed"],":flag_tg:":["1f1f9-1f1ec"],":tg:":["1f1f9-1f1ec"],":flag_tf:":["1f1f9-1f1eb"],":tf:":["1f1f9-1f1eb"],":flag_td:":["1f1f9-1f1e9"],":td:":["1f1f9-1f1e9"],":flag_tc:":["1f1f9-1f1e8"],":tc:":["1f1f9-1f1e8"],":flag_ta:":["1f1f9-1f1e6"],":ta:":["1f1f9-1f1e6"],":flag_sz:":["1f1f8-1f1ff"],":sz:":["1f1f8-1f1ff"],":flag_sy:":["1f1f8-1f1fe"],":sy:":["1f1f8-1f1fe"],":flag_sx:":["1f1f8-1f1fd"],":sx:":["1f1f8-1f1fd"],":flag_sv:":["1f1f8-1f1fb"],":sv:":["1f1f8-1f1fb"],":flag_st:":["1f1f8-1f1f9"],":st:":["1f1f8-1f1f9"],":flag_ss:":["1f1f8-1f1f8"],":ss:":["1f1f8-1f1f8"],":flag_sr:":["1f1f8-1f1f7"],":sr:":["1f1f8-1f1f7"],":flag_so:":["1f1f8-1f1f4"],":so:":["1f1f8-1f1f4"],":flag_sn:":["1f1f8-1f1f3"],":sn:":["1f1f8-1f1f3"],":flag_sm:":["1f1f8-1f1f2"],":sm:":["1f1f8-1f1f2"],":flag_sl:":["1f1f8-1f1f1"],":sl:":["1f1f8-1f1f1"],":flag_sk:":["1f1f8-1f1f0"],":sk:":["1f1f8-1f1f0"],":flag_sj:":["1f1f8-1f1ef"],":sj:":["1f1f8-1f1ef"],":flag_si:":["1f1f8-1f1ee"],":si:":["1f1f8-1f1ee"],":flag_sh:":["1f1f8-1f1ed"],":sh:":["1f1f8-1f1ed"],":flag_sg:":["1f1f8-1f1ec"],":sg:":["1f1f8-1f1ec"],":flag_se:":["1f1f8-1f1ea"],":se:":["1f1f8-1f1ea"],":flag_sd:":["1f1f8-1f1e9"],":sd:":["1f1f8-1f1e9"],":flag_sc:":["1f1f8-1f1e8"],":sc:":["1f1f8-1f1e8"],":flag_sb:":["1f1f8-1f1e7"],":sb:":["1f1f8-1f1e7"],":flag_sa:":["1f1f8-1f1e6"],":saudiarabia:":["1f1f8-1f1e6"],":saudi:":["1f1f8-1f1e6"],":flag_rw:":["1f1f7-1f1fc"],":rw:":["1f1f7-1f1fc"],":flag_ru:":["1f1f7-1f1fa"],":ru:":["1f1f7-1f1fa"],":flag_rs:":["1f1f7-1f1f8"],":rs:":["1f1f7-1f1f8"],":flag_ro:":["1f1f7-1f1f4"],":ro:":["1f1f7-1f1f4"],":flag_re:":["1f1f7-1f1ea"],":re:":["1f1f7-1f1ea"],":flag_qa:":["1f1f6-1f1e6"],":qa:":["1f1f6-1f1e6"],":flag_py:":["1f1f5-1f1fe"],":py:":["1f1f5-1f1fe"],":flag_pw:":["1f1f5-1f1fc"],":pw:":["1f1f5-1f1fc"],":flag_pt:":["1f1f5-1f1f9"],":pt:":["1f1f5-1f1f9"],":flag_ps:":["1f1f5-1f1f8"],":ps:":["1f1f5-1f1f8"],":flag_pr:":["1f1f5-1f1f7"],":pr:":["1f1f5-1f1f7"],":flag_pn:":["1f1f5-1f1f3"],":pn:":["1f1f5-1f1f3"],":flag_pm:":["1f1f5-1f1f2"],":pm:":["1f1f5-1f1f2"],":flag_pl:":["1f1f5-1f1f1"],":pl:":["1f1f5-1f1f1"],":flag_pk:":["1f1f5-1f1f0"],":pk:":["1f1f5-1f1f0"],":flag_ph:":["1f1f5-1f1ed"],":ph:":["1f1f5-1f1ed"],":flag_pg:":["1f1f5-1f1ec"],":pg:":["1f1f5-1f1ec"],":flag_pf:":["1f1f5-1f1eb"],":pf:":["1f1f5-1f1eb"],":flag_pe:":["1f1f5-1f1ea"],":pe:":["1f1f5-1f1ea"],":flag_pa:":["1f1f5-1f1e6"],":pa:":["1f1f5-1f1e6"],":flag_om:":["1f1f4-1f1f2"],":om:":["1f1f4-1f1f2"],":flag_nz:":["1f1f3-1f1ff"],":nz:":["1f1f3-1f1ff"],":flag_nu:":["1f1f3-1f1fa"],":nu:":["1f1f3-1f1fa"],":flag_nr:":["1f1f3-1f1f7"],":nr:":["1f1f3-1f1f7"],":flag_np:":["1f1f3-1f1f5"],":np:":["1f1f3-1f1f5"],":flag_no:":["1f1f3-1f1f4"],":no:":["1f1f3-1f1f4"],":flag_nl:":["1f1f3-1f1f1"],":nl:":["1f1f3-1f1f1"],":flag_ni:":["1f1f3-1f1ee"],":ni:":["1f1f3-1f1ee"],":flag_ng:":["1f1f3-1f1ec"],":nigeria:":["1f1f3-1f1ec"],":flag_nf:":["1f1f3-1f1eb"],":nf:":["1f1f3-1f1eb"],":flag_ne:":["1f1f3-1f1ea"],":ne:":["1f1f3-1f1ea"],":flag_nc:":["1f1f3-1f1e8"],":nc:":["1f1f3-1f1e8"],":flag_na:":["1f1f3-1f1e6"],":na:":["1f1f3-1f1e6"],":flag_mz:":["1f1f2-1f1ff"],":mz:":["1f1f2-1f1ff"],":flag_my:":["1f1f2-1f1fe"],":my:":["1f1f2-1f1fe"],":flag_mx:":["1f1f2-1f1fd"],":mx:":["1f1f2-1f1fd"],":flag_mw:":["1f1f2-1f1fc"],":mw:":["1f1f2-1f1fc"],":flag_mv:":["1f1f2-1f1fb"],":mv:":["1f1f2-1f1fb"],":flag_mu:":["1f1f2-1f1fa"],":mu:":["1f1f2-1f1fa"],":flag_mt:":["1f1f2-1f1f9"],":mt:":["1f1f2-1f1f9"],":flag_ms:":["1f1f2-1f1f8"],":ms:":["1f1f2-1f1f8"],":flag_mr:":["1f1f2-1f1f7"],":mr:":["1f1f2-1f1f7"],":flag_mq:":["1f1f2-1f1f6"],":mq:":["1f1f2-1f1f6"],":flag_mp:":["1f1f2-1f1f5"],":mp:":["1f1f2-1f1f5"],":flag_mo:":["1f1f2-1f1f4"],":mo:":["1f1f2-1f1f4"],":flag_mn:":["1f1f2-1f1f3"],":mn:":["1f1f2-1f1f3"],":flag_mm:":["1f1f2-1f1f2"],":mm:":["1f1f2-1f1f2"],":flag_ml:":["1f1f2-1f1f1"],":ml:":["1f1f2-1f1f1"],":flag_mk:":["1f1f2-1f1f0"],":mk:":["1f1f2-1f1f0"],":flag_mh:":["1f1f2-1f1ed"],":mh:":["1f1f2-1f1ed"],":flag_mg:":["1f1f2-1f1ec"],":mg:":["1f1f2-1f1ec"],":flag_mf:":["1f1f2-1f1eb"],":mf:":["1f1f2-1f1eb"],":flag_me:":["1f1f2-1f1ea"],":me:":["1f1f2-1f1ea"],":flag_md:":["1f1f2-1f1e9"],":md:":["1f1f2-1f1e9"],":flag_mc:":["1f1f2-1f1e8"],":mc:":["1f1f2-1f1e8"],":flag_ma:":["1f1f2-1f1e6"],":ma:":["1f1f2-1f1e6"],":flag_ly:":["1f1f1-1f1fe"],":ly:":["1f1f1-1f1fe"],":flag_lv:":["1f1f1-1f1fb"],":lv:":["1f1f1-1f1fb"],":flag_lu:":["1f1f1-1f1fa"],":lu:":["1f1f1-1f1fa"],":flag_lt:":["1f1f1-1f1f9"],":lt:":["1f1f1-1f1f9"],":flag_ls:":["1f1f1-1f1f8"],":ls:":["1f1f1-1f1f8"],":flag_lr:":["1f1f1-1f1f7"],":lr:":["1f1f1-1f1f7"],":flag_lk:":["1f1f1-1f1f0"],":lk:":["1f1f1-1f1f0"],":flag_li:":["1f1f1-1f1ee"],":li:":["1f1f1-1f1ee"],":flag_lc:":["1f1f1-1f1e8"],":lc:":["1f1f1-1f1e8"],":flag_lb:":["1f1f1-1f1e7"],":lb:":["1f1f1-1f1e7"],":flag_la:":["1f1f1-1f1e6"],":la:":["1f1f1-1f1e6"],":flag_kz:":["1f1f0-1f1ff"],":kz:":["1f1f0-1f1ff"],":flag_ky:":["1f1f0-1f1fe"],":ky:":["1f1f0-1f1fe"],":flag_kw:":["1f1f0-1f1fc"],":kw:":["1f1f0-1f1fc"],":flag_kr:":["1f1f0-1f1f7"],":kr:":["1f1f0-1f1f7"],":flag_kp:":["1f1f0-1f1f5"],":kp:":["1f1f0-1f1f5"],":flag_kn:":["1f1f0-1f1f3"],":kn:":["1f1f0-1f1f3"],":flag_km:":["1f1f0-1f1f2"],":km:":["1f1f0-1f1f2"],":flag_ki:":["1f1f0-1f1ee"],":ki:":["1f1f0-1f1ee"],":flag_kh:":["1f1f0-1f1ed"],":kh:":["1f1f0-1f1ed"],":flag_kg:":["1f1f0-1f1ec"],":kg:":["1f1f0-1f1ec"],":flag_ke:":["1f1f0-1f1ea"],":ke:":["1f1f0-1f1ea"],":flag_jp:":["1f1ef-1f1f5"],":jp:":["1f1ef-1f1f5"],":flag_jo:":["1f1ef-1f1f4"],":jo:":["1f1ef-1f1f4"],":flag_jm:":["1f1ef-1f1f2"],":jm:":["1f1ef-1f1f2"],":flag_je:":["1f1ef-1f1ea"],":je:":["1f1ef-1f1ea"],":flag_it:":["1f1ee-1f1f9"],":it:":["1f1ee-1f1f9"],":flag_is:":["1f1ee-1f1f8"],":is:":["1f1ee-1f1f8"],":flag_ir:":["1f1ee-1f1f7"],":ir:":["1f1ee-1f1f7"],":flag_iq:":["1f1ee-1f1f6"],":iq:":["1f1ee-1f1f6"],":flag_io:":["1f1ee-1f1f4"],":io:":["1f1ee-1f1f4"],":flag_in:":["1f1ee-1f1f3"],":in:":["1f1ee-1f1f3"],":flag_im:":["1f1ee-1f1f2"],":im:":["1f1ee-1f1f2"],":flag_il:":["1f1ee-1f1f1"],":il:":["1f1ee-1f1f1"],":flag_ie:":["1f1ee-1f1ea"],":ie:":["1f1ee-1f1ea"],":flag_id:":["1f1ee-1f1e9"],":indonesia:":["1f1ee-1f1e9"],":flag_ic:":["1f1ee-1f1e8"],":ic:":["1f1ee-1f1e8"],":flag_hu:":["1f1ed-1f1fa"],":hu:":["1f1ed-1f1fa"],":flag_ht:":["1f1ed-1f1f9"],":ht:":["1f1ed-1f1f9"],":flag_hr:":["1f1ed-1f1f7"],":hr:":["1f1ed-1f1f7"],":flag_hn:":["1f1ed-1f1f3"],":hn:":["1f1ed-1f1f3"],":flag_hm:":["1f1ed-1f1f2"],":hm:":["1f1ed-1f1f2"],":flag_hk:":["1f1ed-1f1f0"],":hk:":["1f1ed-1f1f0"],":flag_gy:":["1f1ec-1f1fe"],":gy:":["1f1ec-1f1fe"],":flag_gw:":["1f1ec-1f1fc"],":gw:":["1f1ec-1f1fc"],":flag_gu:":["1f1ec-1f1fa"],":gu:":["1f1ec-1f1fa"],":flag_gt:":["1f1ec-1f1f9"],":gt:":["1f1ec-1f1f9"],":flag_gs:":["1f1ec-1f1f8"],":gs:":["1f1ec-1f1f8"],":flag_gr:":["1f1ec-1f1f7"],":gr:":["1f1ec-1f1f7"],":flag_gq:":["1f1ec-1f1f6"],":gq:":["1f1ec-1f1f6"],":flag_gp:":["1f1ec-1f1f5"],":gp:":["1f1ec-1f1f5"],":flag_gn:":["1f1ec-1f1f3"],":gn:":["1f1ec-1f1f3"],":flag_gm:":["1f1ec-1f1f2"],":gm:":["1f1ec-1f1f2"],":flag_gl:":["1f1ec-1f1f1"],":gl:":["1f1ec-1f1f1"],":flag_gi:":["1f1ec-1f1ee"],":gi:":["1f1ec-1f1ee"],":flag_gh:":["1f1ec-1f1ed"],":gh:":["1f1ec-1f1ed"],":flag_gg:":["1f1ec-1f1ec"],":gg:":["1f1ec-1f1ec"],":flag_gf:":["1f1ec-1f1eb"],":gf:":["1f1ec-1f1eb"],":flag_ge:":["1f1ec-1f1ea"],":ge:":["1f1ec-1f1ea"],":flag_gd:":["1f1ec-1f1e9"],":gd:":["1f1ec-1f1e9"],":flag_gb:":["1f1ec-1f1e7"],":gb:":["1f1ec-1f1e7"],":flag_ga:":["1f1ec-1f1e6"],":ga:":["1f1ec-1f1e6"],":flag_fr:":["1f1eb-1f1f7"],":fr:":["1f1eb-1f1f7"],":flag_fo:":["1f1eb-1f1f4"],":fo:":["1f1eb-1f1f4"],":flag_fm:":["1f1eb-1f1f2"],":fm:":["1f1eb-1f1f2"],":flag_fk:":["1f1eb-1f1f0"],":fk:":["1f1eb-1f1f0"],":flag_fj:":["1f1eb-1f1ef"],":fj:":["1f1eb-1f1ef"],":flag_fi:":["1f1eb-1f1ee"],":fi:":["1f1eb-1f1ee"],":flag_eu:":["1f1ea-1f1fa"],":eu:":["1f1ea-1f1fa"],":flag_et:":["1f1ea-1f1f9"],":et:":["1f1ea-1f1f9"],":flag_es:":["1f1ea-1f1f8"],":es:":["1f1ea-1f1f8"],":flag_er:":["1f1ea-1f1f7"],":er:":["1f1ea-1f1f7"],":flag_eh:":["1f1ea-1f1ed"],":eh:":["1f1ea-1f1ed"],":flag_eg:":["1f1ea-1f1ec"],":eg:":["1f1ea-1f1ec"],":flag_ee:":["1f1ea-1f1ea"],":ee:":["1f1ea-1f1ea"],":flag_ec:":["1f1ea-1f1e8"],":ec:":["1f1ea-1f1e8"],":flag_ea:":["1f1ea-1f1e6"],":ea:":["1f1ea-1f1e6"],":flag_dz:":["1f1e9-1f1ff"],":dz:":["1f1e9-1f1ff"],":flag_do:":["1f1e9-1f1f4"],":do:":["1f1e9-1f1f4"],":flag_dm:":["1f1e9-1f1f2"],":dm:":["1f1e9-1f1f2"],":flag_dk:":["1f1e9-1f1f0"],":dk:":["1f1e9-1f1f0"],":flag_dj:":["1f1e9-1f1ef"],":dj:":["1f1e9-1f1ef"],":flag_dg:":["1f1e9-1f1ec"],":dg:":["1f1e9-1f1ec"],":flag_de:":["1f1e9-1f1ea"],":de:":["1f1e9-1f1ea"],":flag_cz:":["1f1e8-1f1ff"],":cz:":["1f1e8-1f1ff"],":flag_cy:":["1f1e8-1f1fe"],":cy:":["1f1e8-1f1fe"],":flag_cx:":["1f1e8-1f1fd"],":cx:":["1f1e8-1f1fd"],":flag_cw:":["1f1e8-1f1fc"],":cw:":["1f1e8-1f1fc"],":flag_cv:":["1f1e8-1f1fb"],":cv:":["1f1e8-1f1fb"],":flag_cu:":["1f1e8-1f1fa"],":cu:":["1f1e8-1f1fa"],":flag_cr:":["1f1e8-1f1f7"],":cr:":["1f1e8-1f1f7"],":flag_cp:":["1f1e8-1f1f5"],":cp:":["1f1e8-1f1f5"],":flag_co:":["1f1e8-1f1f4"],":co:":["1f1e8-1f1f4"],":flag_cn:":["1f1e8-1f1f3"],":cn:":["1f1e8-1f1f3"],":flag_cm:":["1f1e8-1f1f2"],":cm:":["1f1e8-1f1f2"],":flag_cl:":["1f1e8-1f1f1"],":chile:":["1f1e8-1f1f1"],":flag_ck:":["1f1e8-1f1f0"],":ck:":["1f1e8-1f1f0"],":flag_ci:":["1f1e8-1f1ee"],":ci:":["1f1e8-1f1ee"],":flag_ch:":["1f1e8-1f1ed"],":ch:":["1f1e8-1f1ed"],":flag_cg:":["1f1e8-1f1ec"],":cg:":["1f1e8-1f1ec"],":flag_cf:":["1f1e8-1f1eb"],":cf:":["1f1e8-1f1eb"],":flag_cd:":["1f1e8-1f1e9"],":congo:":["1f1e8-1f1e9"],":flag_cc:":["1f1e8-1f1e8"],":cc:":["1f1e8-1f1e8"],":flag_ca:":["1f1e8-1f1e6"],":ca:":["1f1e8-1f1e6"],":flag_bz:":["1f1e7-1f1ff"],":bz:":["1f1e7-1f1ff"],":flag_by:":["1f1e7-1f1fe"],":by:":["1f1e7-1f1fe"],":flag_bw:":["1f1e7-1f1fc"],":bw:":["1f1e7-1f1fc"],":flag_bv:":["1f1e7-1f1fb"],":bv:":["1f1e7-1f1fb"],":flag_bt:":["1f1e7-1f1f9"],":bt:":["1f1e7-1f1f9"],":flag_bs:":["1f1e7-1f1f8"],":bs:":["1f1e7-1f1f8"],":flag_br:":["1f1e7-1f1f7"],":br:":["1f1e7-1f1f7"],":flag_bq:":["1f1e7-1f1f6"],":bq:":["1f1e7-1f1f6"],":flag_bo:":["1f1e7-1f1f4"],":bo:":["1f1e7-1f1f4"],":flag_bn:":["1f1e7-1f1f3"],":bn:":["1f1e7-1f1f3"],":flag_bm:":["1f1e7-1f1f2"],":bm:":["1f1e7-1f1f2"],":flag_bl:":["1f1e7-1f1f1"],":bl:":["1f1e7-1f1f1"],":flag_bj:":["1f1e7-1f1ef"],":bj:":["1f1e7-1f1ef"],":flag_bi:":["1f1e7-1f1ee"],":bi:":["1f1e7-1f1ee"],":flag_bh:":["1f1e7-1f1ed"],":bh:":["1f1e7-1f1ed"],":flag_bg:":["1f1e7-1f1ec"],":bg:":["1f1e7-1f1ec"],":flag_bf:":["1f1e7-1f1eb"],":bf:":["1f1e7-1f1eb"],":flag_be:":["1f1e7-1f1ea"],":be:":["1f1e7-1f1ea"],":flag_bd:":["1f1e7-1f1e9"],":bd:":["1f1e7-1f1e9"],":flag_bb:":["1f1e7-1f1e7"],":bb:":["1f1e7-1f1e7"],":flag_ba:":["1f1e7-1f1e6"],":ba:":["1f1e7-1f1e6"],":flag_az:":["1f1e6-1f1ff"],":az:":["1f1e6-1f1ff"],":flag_ax:":["1f1e6-1f1fd"],":ax:":["1f1e6-1f1fd"],":flag_aw:":["1f1e6-1f1fc"],":aw:":["1f1e6-1f1fc"],":flag_au:":["1f1e6-1f1fa"],":au:":["1f1e6-1f1fa"],":flag_at:":["1f1e6-1f1f9"],":at:":["1f1e6-1f1f9"],":flag_as:":["1f1e6-1f1f8"],":as:":["1f1e6-1f1f8"],":flag_ar:":["1f1e6-1f1f7"],":ar:":["1f1e6-1f1f7"],":flag_aq:":["1f1e6-1f1f6"],":aq:":["1f1e6-1f1f6"],":flag_ao:":["1f1e6-1f1f4"],":ao:":["1f1e6-1f1f4"],":flag_am:":["1f1e6-1f1f2"],":am:":["1f1e6-1f1f2"],":flag_al:":["1f1e6-1f1f1"],":al:":["1f1e6-1f1f1"],":flag_ai:":["1f1e6-1f1ee"],":ai:":["1f1e6-1f1ee"],":flag_ag:":["1f1e6-1f1ec"],":ag:":["1f1e6-1f1ec"],":flag_af:":["1f1e6-1f1eb"],":af:":["1f1e6-1f1eb"],":flag_ae:":["1f1e6-1f1ea"],":ae:":["1f1e6-1f1ea"],":flag_ad:":["1f1e6-1f1e9"],":ad:":["1f1e6-1f1e9"],":flag_ac:":["1f1e6-1f1e8"],":ac:":["1f1e6-1f1e8"],":mahjong:":["1f004-fe0f","1f004"],":parking:":["1f17f-fe0f","1f17f"],":sa:":["1f202-fe0f","1f202"],":u7121:":["1f21a-fe0f","1f21a"],":u6307:":["1f22f-fe0f","1f22f"],":u6708:":["1f237-fe0f","1f237"],":film_frames:":["1f39e-fe0f","1f39e"],":tickets:":["1f39f-fe0f","1f39f"],":admission_tickets:":["1f39f-fe0f","1f39f"],":lifter:":["1f3cb-fe0f","1f3cb"],":weight_lifter:":["1f3cb-fe0f","1f3cb"],":golfer:":["1f3cc-fe0f","1f3cc"],":motorcycle:":["1f3cd-fe0f","1f3cd"],":racing_motorcycle:":["1f3cd-fe0f","1f3cd"],":race_car:":["1f3ce-fe0f","1f3ce"],":racing_car:":["1f3ce-fe0f","1f3ce"],":military_medal:":["1f396-fe0f","1f396"],":reminder_ribbon:":["1f397-fe0f","1f397"],":hot_pepper:":["1f336-fe0f","1f336"],":cloud_rain:":["1f327-fe0f","1f327"],":cloud_with_rain:":["1f327-fe0f","1f327"],":cloud_snow:":["1f328-fe0f","1f328"],":cloud_with_snow:":["1f328-fe0f","1f328"],":cloud_lightning:":["1f329-fe0f","1f329"],":cloud_with_lightning:":["1f329-fe0f","1f329"],":cloud_tornado:":["1f32a-fe0f","1f32a"],":cloud_with_tornado:":["1f32a-fe0f","1f32a"],":fog:":["1f32b-fe0f","1f32b"],":wind_blowing_face:":["1f32c-fe0f","1f32c"],":chipmunk:":["1f43f-fe0f","1f43f"],":spider:":["1f577-fe0f","1f577"],":spider_web:":["1f578-fe0f","1f578"],":thermometer:":["1f321-fe0f","1f321"],":microphone2:":["1f399-fe0f","1f399"],":studio_microphone:":["1f399-fe0f","1f399"],":level_slider:":["1f39a-fe0f","1f39a"],":control_knobs:":["1f39b-fe0f","1f39b"],":flag_white:":["1f3f3-fe0f","1f3f3"],":waving_white_flag:":["1f3f3-fe0f","1f3f3"],":rosette:":["1f3f5-fe0f","1f3f5"],":label:":["1f3f7-fe0f","1f3f7"],":projector:":["1f4fd-fe0f","1f4fd"],":film_projector:":["1f4fd-fe0f","1f4fd"],":om_symbol:":["1f549-fe0f","1f549"],":dove:":["1f54a-fe0f","1f54a"],":dove_of_peace:":["1f54a-fe0f","1f54a"],":candle:":["1f56f-fe0f","1f56f"],":clock:":["1f570-fe0f","1f570"],":mantlepiece_clock:":["1f570-fe0f","1f570"],":hole:":["1f573-fe0f","1f573"],":dark_sunglasses:":["1f576-fe0f","1f576"],":joystick:":["1f579-fe0f","1f579"],":paperclips:":["1f587-fe0f","1f587"],":linked_paperclips:":["1f587-fe0f","1f587"],":pen_ballpoint:":["1f58a-fe0f","1f58a"],":lower_left_ballpoint_pen:":["1f58a-fe0f","1f58a"],":pen_fountain:":["1f58b-fe0f","1f58b"],":lower_left_fountain_pen:":["1f58b-fe0f","1f58b"],":paintbrush:":["1f58c-fe0f","1f58c"],":lower_left_paintbrush:":["1f58c-fe0f","1f58c"],":crayon:":["1f58d-fe0f","1f58d"],":lower_left_crayon:":["1f58d-fe0f","1f58d"],":desktop:":["1f5a5-fe0f","1f5a5"],":desktop_computer:":["1f5a5-fe0f","1f5a5"],":printer:":["1f5a8-fe0f","1f5a8"],":trackball:":["1f5b2-fe0f","1f5b2"],":frame_photo:":["1f5bc-fe0f","1f5bc"],":frame_with_picture:":["1f5bc-fe0f","1f5bc"],":dividers:":["1f5c2-fe0f","1f5c2"],":card_index_dividers:":["1f5c2-fe0f","1f5c2"],":card_box:":["1f5c3-fe0f","1f5c3"],":card_file_box:":["1f5c3-fe0f","1f5c3"],":file_cabinet:":["1f5c4-fe0f","1f5c4"],":wastebasket:":["1f5d1-fe0f","1f5d1"],":notepad_spiral:":["1f5d2-fe0f","1f5d2"],":spiral_note_pad:":["1f5d2-fe0f","1f5d2"],":calendar_spiral:":["1f5d3-fe0f","1f5d3"],":spiral_calendar_pad:":["1f5d3-fe0f","1f5d3"],":compression:":["1f5dc-fe0f","1f5dc"],":key2:":["1f5dd-fe0f","1f5dd"],":old_key:":["1f5dd-fe0f","1f5dd"],":newspaper2:":["1f5de-fe0f","1f5de"],":rolled_up_newspaper:":["1f5de-fe0f","1f5de"],":dagger:":["1f5e1-fe0f","1f5e1"],":dagger_knife:":["1f5e1-fe0f","1f5e1"],":speaking_head:":["1f5e3-fe0f","1f5e3"],":speaking_head_in_silhouette:":["1f5e3-fe0f","1f5e3"],":anger_right:":["1f5ef-fe0f","1f5ef"],":right_anger_bubble:":["1f5ef-fe0f","1f5ef"],":ballot_box:":["1f5f3-fe0f","1f5f3"],":ballot_box_with_ballot:":["1f5f3-fe0f","1f5f3"],":map:":["1f5fa-fe0f","1f5fa"],":world_map:":["1f5fa-fe0f","1f5fa"],":tools:":["1f6e0-fe0f","1f6e0"],":hammer_and_wrench:":["1f6e0-fe0f","1f6e0"],":shield:":["1f6e1-fe0f","1f6e1"],":oil:":["1f6e2-fe0f","1f6e2"],":oil_drum:":["1f6e2-fe0f","1f6e2"],":satellite_orbital:":["1f6f0-fe0f","1f6f0"],":fork_knife_plate:":["1f37d-fe0f","1f37d"],":fork_and_knife_with_plate:":["1f37d-fe0f","1f37d"],":eye:":["1f441-fe0f","1f441"],":levitate:":["1f574-fe0f","1f574"],":man_in_business_suit_levitating:":["1f574-fe0f","1f574"],":spy:":["1f575-fe0f","1f575"],":sleuth_or_spy:":["1f575-fe0f","1f575"],":hand_splayed:":["1f590-fe0f","1f590"],
":raised_hand_with_fingers_splayed:":["1f590-fe0f","1f590"],":mountain_snow:":["1f3d4-fe0f","1f3d4"],":snow_capped_mountain:":["1f3d4-fe0f","1f3d4"],":camping:":["1f3d5-fe0f","1f3d5"],":beach:":["1f3d6-fe0f","1f3d6"],":beach_with_umbrella:":["1f3d6-fe0f","1f3d6"],":construction_site:":["1f3d7-fe0f","1f3d7"],":building_construction:":["1f3d7-fe0f","1f3d7"],":homes:":["1f3d8-fe0f","1f3d8"],":house_buildings:":["1f3d8-fe0f","1f3d8"],":cityscape:":["1f3d9-fe0f","1f3d9"],":house_abandoned:":["1f3da-fe0f","1f3da"],":derelict_house_building:":["1f3da-fe0f","1f3da"],":classical_building:":["1f3db-fe0f","1f3db"],":desert:":["1f3dc-fe0f","1f3dc"],":island:":["1f3dd-fe0f","1f3dd"],":desert_island:":["1f3dd-fe0f","1f3dd"],":park:":["1f3de-fe0f","1f3de"],":national_park:":["1f3de-fe0f","1f3de"],":stadium:":["1f3df-fe0f","1f3df"],":couch:":["1f6cb-fe0f","1f6cb"],":couch_and_lamp:":["1f6cb-fe0f","1f6cb"],":shopping_bags:":["1f6cd-fe0f","1f6cd"],":bellhop:":["1f6ce-fe0f","1f6ce"],":bellhop_bell:":["1f6ce-fe0f","1f6ce"],":bed:":["1f6cf-fe0f","1f6cf"],":motorway:":["1f6e3-fe0f","1f6e3"],":railway_track:":["1f6e4-fe0f","1f6e4"],":railroad_track:":["1f6e4-fe0f","1f6e4"],":motorboat:":["1f6e5-fe0f","1f6e5"],":airplane_small:":["1f6e9-fe0f","1f6e9"],":small_airplane:":["1f6e9-fe0f","1f6e9"],":cruise_ship:":["1f6f3-fe0f","1f6f3"],":passenger_ship:":["1f6f3-fe0f","1f6f3"],":white_sun_small_cloud:":["1f324-fe0f","1f324"],":white_sun_with_small_cloud:":["1f324-fe0f","1f324"],":white_sun_cloud:":["1f325-fe0f","1f325"],":white_sun_behind_cloud:":["1f325-fe0f","1f325"],":white_sun_rain_cloud:":["1f326-fe0f","1f326"],":white_sun_behind_cloud_with_rain:":["1f326-fe0f","1f326"],":mouse_three_button:":["1f5b1-fe0f","1f5b1"],":three_button_mouse:":["1f5b1-fe0f","1f5b1"],":point_up_tone1:":["261d-1f3fb"],":point_up_tone2:":["261d-1f3fc"],":point_up_tone3:":["261d-1f3fd"],":point_up_tone4:":["261d-1f3fe"],":copyright:":["00a9-fe0f","00a9"],":registered:":["00ae-fe0f","00ae"],":bangbang:":["203c-fe0f","203c"],":interrobang:":["2049-fe0f","2049"],":tm:":["2122-fe0f","2122"],":information_source:":["2139-fe0f","2139"],":left_right_arrow:":["2194-fe0f","2194"],":arrow_up_down:":["2195-fe0f","2195"],":arrow_upper_left:":["2196-fe0f","2196"],":arrow_upper_right:":["2197-fe0f","2197"],":arrow_lower_right:":["2198-fe0f","2198"],":arrow_lower_left:":["2199-fe0f","2199"],":leftwards_arrow_with_hook:":["21a9-fe0f","21a9"],":arrow_right_hook:":["21aa-fe0f","21aa"],":watch:":["231a-fe0f","231a"],":hourglass:":["231b-fe0f","231b"],":m:":["24c2-fe0f","24c2"],":black_small_square:":["25aa-fe0f","25aa"],":white_small_square:":["25ab-fe0f","25ab"],":arrow_forward:":["25b6-fe0f","25b6"],":arrow_backward:":["25c0-fe0f","25c0"],":white_medium_square:":["25fb-fe0f","25fb"],":black_medium_square:":["25fc-fe0f","25fc"],":white_medium_small_square:":["25fd-fe0f","25fd"],":black_medium_small_square:":["25fe-fe0f","25fe"],":sunny:":["2600-fe0f","2600"],":cloud:":["2601-fe0f","2601"],":telephone:":["260e-fe0f","260e"],":ballot_box_with_check:":["2611-fe0f","2611"],":umbrella:":["2614-fe0f","2614"],":coffee:":["2615-fe0f","2615"],":point_up:":["261d-fe0f","261d"],":relaxed:":["263a-fe0f","263a"],":aries:":["2648-fe0f","2648"],":taurus:":["2649-fe0f","2649"],":gemini:":["264a-fe0f","264a"],":cancer:":["264b-fe0f","264b"],":leo:":["264c-fe0f","264c"],":virgo:":["264d-fe0f","264d"],":libra:":["264e-fe0f","264e"],":scorpius:":["264f-fe0f","264f"],":sagittarius:":["2650-fe0f","2650"],":capricorn:":["2651-fe0f","2651"],":aquarius:":["2652-fe0f","2652"],":pisces:":["2653-fe0f","2653"],":spades:":["2660-fe0f","2660"],":clubs:":["2663-fe0f","2663"],":hearts:":["2665-fe0f","2665"],":diamonds:":["2666-fe0f","2666"],":hotsprings:":["2668-fe0f","2668"],":recycle:":["267b-fe0f","267b"],":wheelchair:":["267f-fe0f","267f"],":anchor:":["2693-fe0f","2693"],":warning:":["26a0-fe0f","26a0"],":zap:":["26a1-fe0f","26a1"],":white_circle:":["26aa-fe0f","26aa"],":black_circle:":["26ab-fe0f","26ab"],":soccer:":["26bd-fe0f","26bd"],":baseball:":["26be-fe0f","26be"],":snowman:":["26c4-fe0f","26c4"],":partly_sunny:":["26c5-fe0f","26c5"],":no_entry:":["26d4-fe0f","26d4"],":church:":["26ea-fe0f","26ea"],":fountain:":["26f2-fe0f","26f2"],":golf:":["26f3-fe0f","26f3"],":sailboat:":["26f5-fe0f","26f5"],":tent:":["26fa-fe0f","26fa"],":fuelpump:":["26fd-fe0f","26fd"],":scissors:":["2702-fe0f","2702"],":airplane:":["2708-fe0f","2708"],":envelope:":["2709-fe0f","2709"],":v:":["270c-fe0f","270c"],":pencil2:":["270f-fe0f","270f"],":black_nib:":["2712-fe0f","2712"],":heavy_check_mark:":["2714-fe0f","2714"],":heavy_multiplication_x:":["2716-fe0f","2716"],":eight_spoked_asterisk:":["2733-fe0f","2733"],":eight_pointed_black_star:":["2734-fe0f","2734"],":snowflake:":["2744-fe0f","2744"],":sparkle:":["2747-fe0f","2747"],":exclamation:":["2757-fe0f","2757"],":heart:":["2764-fe0f","2764"],":arrow_right:":["27a1-fe0f","27a1"],":arrow_heading_up:":["2934-fe0f","2934"],":arrow_heading_down:":["2935-fe0f","2935"],":arrow_left:":["2b05-fe0f","2b05"],":arrow_up:":["2b06-fe0f","2b06"],":arrow_down:":["2b07-fe0f","2b07"],":black_large_square:":["2b1b-fe0f","2b1b"],":white_large_square:":["2b1c-fe0f","2b1c"],":star:":["2b50-fe0f","2b50"],":o:":["2b55-fe0f","2b55"],":wavy_dash:":["3030-fe0f","3030"],":part_alternation_mark:":["303d-fe0f","303d"],":congratulations:":["3297-fe0f","3297"],":secret:":["3299-fe0f","3299"],":cross:":["271d-fe0f","271d"],":latin_cross:":["271d-fe0f","271d"],":keyboard:":["2328-fe0f","2328"],":writing_hand:":["270d-fe0f","270d"],":track_next:":["23ed-fe0f","23ed"],":next_track:":["23ed-fe0f","23ed"],":track_previous:":["23ee-fe0f","23ee"],":previous_track:":["23ee-fe0f","23ee"],":play_pause:":["23ef-fe0f","23ef"],":stopwatch:":["23f1-fe0f","23f1"],":timer:":["23f2-fe0f","23f2"],":timer_clock:":["23f2-fe0f","23f2"],":pause_button:":["23f8-fe0f","23f8"],":double_vertical_bar:":["23f8-fe0f","23f8"],":stop_button:":["23f9-fe0f","23f9"],":record_button:":["23fa-fe0f","23fa"],":umbrella2:":["2602-fe0f","2602"],":snowman2:":["2603-fe0f","2603"],":comet:":["2604-fe0f","2604"],":shamrock:":["2618-fe0f","2618"],":skull_crossbones:":["2620-fe0f","2620"],":skull_and_crossbones:":["2620-fe0f","2620"],":radioactive:":["2622-fe0f","2622"],":radioactive_sign:":["2622-fe0f","2622"],":biohazard:":["2623-fe0f","2623"],":biohazard_sign:":["2623-fe0f","2623"],":orthodox_cross:":["2626-fe0f","2626"],":star_and_crescent:":["262a-fe0f","262a"],":peace:":["262e-fe0f","262e"],":peace_symbol:":["262e-fe0f","262e"],":yin_yang:":["262f-fe0f","262f"],":wheel_of_dharma:":["2638-fe0f","2638"],":frowning2:":["2639-fe0f","2639"],":white_frowning_face:":["2639-fe0f","2639"],":hammer_pick:":["2692-fe0f","2692"],":hammer_and_pick:":["2692-fe0f","2692"],":crossed_swords:":["2694-fe0f","2694"],":scales:":["2696-fe0f","2696"],":alembic:":["2697-fe0f","2697"],":gear:":["2699-fe0f","2699"],":atom:":["269b-fe0f","269b"],":atom_symbol:":["269b-fe0f","269b"],":fleur-de-lis:":["269c-fe0f","269c"],":coffin:":["26b0-fe0f","26b0"],":urn:":["26b1-fe0f","26b1"],":funeral_urn:":["26b1-fe0f","26b1"],":thunder_cloud_rain:":["26c8-fe0f","26c8"],":thunder_cloud_and_rain:":["26c8-fe0f","26c8"],":pick:":["26cf-fe0f","26cf"],":helmet_with_cross:":["26d1-fe0f","26d1"],":helmet_with_white_cross:":["26d1-fe0f","26d1"],":chains:":["26d3-fe0f","26d3"],":shinto_shrine:":["26e9-fe0f","26e9"],":mountain:":["26f0-fe0f","26f0"],":beach_umbrella:":["26f1-fe0f","26f1"],":umbrella_on_ground:":["26f1-fe0f","26f1"],":ferry:":["26f4-fe0f","26f4"],":skier:":["26f7-fe0f","26f7"],":ice_skate:":["26f8-fe0f","26f8"],":basketball_player:":["26f9-fe0f","26f9"],":person_with_ball:":["26f9-fe0f","26f9"],":star_of_david:":["2721-fe0f","2721"],":heart_exclamation:":["2763-fe0f","2763"],":heavy_heart_exclamation_mark_ornament:":["2763-fe0f","2763"],":black_joker:":["1f0cf"],":a:":["1f170"],":b:":["1f171"],":o2:":["1f17e"],":ab:":["1f18e"],":cl:":["1f191"],":cool:":["1f192"],":free:":["1f193"],":id:":["1f194"],":new:":["1f195"],":ng:":["1f196"],":ok:":["1f197"],":sos:":["1f198"],":up:":["1f199"],":vs:":["1f19a"],":koko:":["1f201"],":u7981:":["1f232"],":u7a7a:":["1f233"],":u5408:":["1f234"],":u6e80:":["1f235"],":u6709:":["1f236"],":u7533:":["1f238"],":u5272:":["1f239"],":u55b6:":["1f23a"],":ideograph_advantage:":["1f250"],":accept:":["1f251"],":cyclone:":["1f300"],":foggy:":["1f301"],":closed_umbrella:":["1f302"],":night_with_stars:":["1f303"],":sunrise_over_mountains:":["1f304"],":sunrise:":["1f305"],":city_dusk:":["1f306"],":city_sunset:":["1f307"],":city_sunrise:":["1f307"],":rainbow:":["1f308"],":bridge_at_night:":["1f309"],":ocean:":["1f30a"],":volcano:":["1f30b"],":milky_way:":["1f30c"],":earth_asia:":["1f30f"],":new_moon:":["1f311"],":first_quarter_moon:":["1f313"],":waxing_gibbous_moon:":["1f314"],":full_moon:":["1f315"],":crescent_moon:":["1f319"],":first_quarter_moon_with_face:":["1f31b"],":star2:":["1f31f"],":stars:":["1f320"],":chestnut:":["1f330"],":seedling:":["1f331"],":palm_tree:":["1f334"],":cactus:":["1f335"],":tulip:":["1f337"],":cherry_blossom:":["1f338"],":rose:":["1f339"],":hibiscus:":["1f33a"],":sunflower:":["1f33b"],":blossom:":["1f33c"],":corn:":["1f33d"],":ear_of_rice:":["1f33e"],":herb:":["1f33f"],":four_leaf_clover:":["1f340"],":maple_leaf:":["1f341"],":fallen_leaf:":["1f342"],":leaves:":["1f343"],":mushroom:":["1f344"],":tomato:":["1f345"],":eggplant:":["1f346"],":grapes:":["1f347"],":melon:":["1f348"],":watermelon:":["1f349"],":tangerine:":["1f34a"],":banana:":["1f34c"],":pineapple:":["1f34d"],":apple:":["1f34e"],":green_apple:":["1f34f"],":peach:":["1f351"],":cherries:":["1f352"],":strawberry:":["1f353"],":hamburger:":["1f354"],":pizza:":["1f355"],":meat_on_bone:":["1f356"],":poultry_leg:":["1f357"],":rice_cracker:":["1f358"],":rice_ball:":["1f359"],":rice:":["1f35a"],":curry:":["1f35b"],":ramen:":["1f35c"],":spaghetti:":["1f35d"],":bread:":["1f35e"],":fries:":["1f35f"],":sweet_potato:":["1f360"],":dango:":["1f361"],":oden:":["1f362"],":sushi:":["1f363"],":fried_shrimp:":["1f364"],":fish_cake:":["1f365"],":icecream:":["1f366"],":shaved_ice:":["1f367"],":ice_cream:":["1f368"],":doughnut:":["1f369"],":cookie:":["1f36a"],":chocolate_bar:":["1f36b"],":candy:":["1f36c"],":lollipop:":["1f36d"],":custard:":["1f36e"],":honey_pot:":["1f36f"],":cake:":["1f370"],":bento:":["1f371"],":stew:":["1f372"],":egg:":["1f373"],":fork_and_knife:":["1f374"],":tea:":["1f375"],":sake:":["1f376"],":wine_glass:":["1f377"],":cocktail:":["1f378"],":tropical_drink:":["1f379"],":beer:":["1f37a"],":beers:":["1f37b"],":ribbon:":["1f380"],":gift:":["1f381"],":birthday:":["1f382"],":jack_o_lantern:":["1f383"],":christmas_tree:":["1f384"],":santa:":["1f385"],":fireworks:":["1f386"],":sparkler:":["1f387"],":balloon:":["1f388"],":tada:":["1f389"],":confetti_ball:":["1f38a"],":tanabata_tree:":["1f38b"],":crossed_flags:":["1f38c"],":bamboo:":["1f38d"],":dolls:":["1f38e"],":flags:":["1f38f"],":wind_chime:":["1f390"],":rice_scene:":["1f391"],":school_satchel:":["1f392"],":mortar_board:":["1f393"],":carousel_horse:":["1f3a0"],":ferris_wheel:":["1f3a1"],":roller_coaster:":["1f3a2"],":fishing_pole_and_fish:":["1f3a3"],":microphone:":["1f3a4"],":movie_camera:":["1f3a5"],":cinema:":["1f3a6"],":headphones:":["1f3a7"],":art:":["1f3a8"],":tophat:":["1f3a9"],":circus_tent:":["1f3aa"],":ticket:":["1f3ab"],":clapper:":["1f3ac"],":performing_arts:":["1f3ad"],":video_game:":["1f3ae"],":dart:":["1f3af"],":slot_machine:":["1f3b0"],":8ball:":["1f3b1"],":game_die:":["1f3b2"],":bowling:":["1f3b3"],":flower_playing_cards:":["1f3b4"],":musical_note:":["1f3b5"],":notes:":["1f3b6"],":saxophone:":["1f3b7"],":guitar:":["1f3b8"],":musical_keyboard:":["1f3b9"],":trumpet:":["1f3ba"],":violin:":["1f3bb"],":musical_score:":["1f3bc"],":running_shirt_with_sash:":["1f3bd"],":tennis:":["1f3be"],":ski:":["1f3bf"],":basketball:":["1f3c0"],":checkered_flag:":["1f3c1"],":snowboarder:":["1f3c2"],":runner:":["1f3c3"],":surfer:":["1f3c4"],":trophy:":["1f3c6"],":football:":["1f3c8"],":swimmer:":["1f3ca"],":house:":["1f3e0"],":house_with_garden:":["1f3e1"],":office:":["1f3e2"],":post_office:":["1f3e3"],":hospital:":["1f3e5"],":bank:":["1f3e6"],":atm:":["1f3e7"],":hotel:":["1f3e8"],":love_hotel:":["1f3e9"],":convenience_store:":["1f3ea"],":school:":["1f3eb"],":department_store:":["1f3ec"],":factory:":["1f3ed"],":izakaya_lantern:":["1f3ee"],":japanese_castle:":["1f3ef"],":european_castle:":["1f3f0"],":snail:":["1f40c"],":snake:":["1f40d"],":racehorse:":["1f40e"],":sheep:":["1f411"],":monkey:":["1f412"],":chicken:":["1f414"],":boar:":["1f417"],":elephant:":["1f418"],":octopus:":["1f419"],":shell:":["1f41a"],":bug:":["1f41b"],":ant:":["1f41c"],":bee:":["1f41d"],":beetle:":["1f41e"],":fish:":["1f41f"],":tropical_fish:":["1f420"],":blowfish:":["1f421"],":turtle:":["1f422"],":hatching_chick:":["1f423"],":baby_chick:":["1f424"],":hatched_chick:":["1f425"],":bird:":["1f426"],":penguin:":["1f427"],":koala:":["1f428"],":poodle:":["1f429"],":camel:":["1f42b"],":dolphin:":["1f42c"],":mouse:":["1f42d"],":cow:":["1f42e"],":tiger:":["1f42f"],":rabbit:":["1f430"],":cat:":["1f431"],":dragon_face:":["1f432"],":whale:":["1f433"],":horse:":["1f434"],":monkey_face:":["1f435"],":dog:":["1f436"],":pig:":["1f437"],":frog:":["1f438"],":hamster:":["1f439"],":wolf:":["1f43a"],":bear:":["1f43b"],":panda_face:":["1f43c"],":pig_nose:":["1f43d"],":feet:":["1f43e"],":paw_prints:":["1f43e"],":eyes:":["1f440"],":ear:":["1f442"],":nose:":["1f443"],":lips:":["1f444"],":tongue:":["1f445"],":point_up_2:":["1f446"],":point_down:":["1f447"],":point_left:":["1f448"],":point_right:":["1f449"],":punch:":["1f44a"],":wave:":["1f44b"],":ok_hand:":["1f44c"],":thumbsup:":["1f44d"],":+1:":["1f44d"],":thumbsdown:":["1f44e"],":-1:":["1f44e"],":clap:":["1f44f"],":open_hands:":["1f450"],":crown:":["1f451"],":womans_hat:":["1f452"],":eyeglasses:":["1f453"],":necktie:":["1f454"],":shirt:":["1f455"],":jeans:":["1f456"],":dress:":["1f457"],":kimono:":["1f458"],":bikini:":["1f459"],":womans_clothes:":["1f45a"],":purse:":["1f45b"],":handbag:":["1f45c"],":pouch:":["1f45d"],":mans_shoe:":["1f45e"],":athletic_shoe:":["1f45f"],":high_heel:":["1f460"],":sandal:":["1f461"],":boot:":["1f462"],":footprints:":["1f463"],":bust_in_silhouette:":["1f464"],":boy:":["1f466"],":girl:":["1f467"],":man:":["1f468"],":woman:":["1f469"],":family:":["1f46a"],":couple:":["1f46b"],":cop:":["1f46e"],":dancers:":["1f46f"],":bride_with_veil:":["1f470"],":person_with_blond_hair:":["1f471"],":man_with_gua_pi_mao:":["1f472"],":man_with_turban:":["1f473"],":older_man:":["1f474"],":older_woman:":["1f475"],":grandma:":["1f475"],":baby:":["1f476"],":construction_worker:":["1f477"],":princess:":["1f478"],":japanese_ogre:":["1f479"],":japanese_goblin:":["1f47a"],":ghost:":["1f47b"],":angel:":["1f47c"],":alien:":["1f47d"],":space_invader:":["1f47e"],":imp:":["1f47f"],":skull:":["1f480"],":skeleton:":["1f480"],":card_index:":["1f4c7"],":information_desk_person:":["1f481"],":guardsman:":["1f482"],":dancer:":["1f483"],":lipstick:":["1f484"],":nail_care:":["1f485"],":ledger:":["1f4d2"],":massage:":["1f486"],":notebook:":["1f4d3"],":haircut:":["1f487"],":notebook_with_decorative_cover:":["1f4d4"],":barber:":["1f488"],":closed_book:":["1f4d5"],":syringe:":["1f489"],":book:":["1f4d6"],":pill:":["1f48a"],":green_book:":["1f4d7"],":kiss:":["1f48b"],":blue_book:":["1f4d8"],":love_letter:":["1f48c"],":orange_book:":["1f4d9"],":ring:":["1f48d"],":books:":["1f4da"],":gem:":["1f48e"],":name_badge:":["1f4db"],":couplekiss:":["1f48f"],":scroll:":["1f4dc"],":bouquet:":["1f490"],":pencil:":["1f4dd"],":couple_with_heart:":["1f491"],":telephone_receiver:":["1f4de"],":wedding:":["1f492"],":pager:":["1f4df"],":fax:":["1f4e0"],":heartbeat:":["1f493"],":satellite:":["1f4e1"],":loudspeaker:":["1f4e2"],":broken_heart:":["1f494"],":mega:":["1f4e3"],":outbox_tray:":["1f4e4"],":two_hearts:":["1f495"],":inbox_tray:":["1f4e5"],":package:":["1f4e6"],":sparkling_heart:":["1f496"],":e-mail:":["1f4e7"],":email:":["1f4e7"],":incoming_envelope:":["1f4e8"],":heartpulse:":["1f497"],":envelope_with_arrow:":["1f4e9"],":mailbox_closed:":["1f4ea"],":cupid:":["1f498"],":mailbox:":["1f4eb"],":postbox:":["1f4ee"],":blue_heart:":["1f499"],":newspaper:":["1f4f0"],":iphone:":["1f4f1"],":green_heart:":["1f49a"],":calling:":["1f4f2"],":vibration_mode:":["1f4f3"],":yellow_heart:":["1f49b"],":mobile_phone_off:":["1f4f4"],":signal_strength:":["1f4f6"],":purple_heart:":["1f49c"],":camera:":["1f4f7"],":video_camera:":["1f4f9"],":gift_heart:":["1f49d"],":tv:":["1f4fa"],":radio:":["1f4fb"],":revolving_hearts:":["1f49e"],":vhs:":["1f4fc"],":arrows_clockwise:":["1f503"],":heart_decoration:":["1f49f"],":loud_sound:":["1f50a"],":battery:":["1f50b"],":diamond_shape_with_a_dot_inside:":["1f4a0"],":electric_plug:":["1f50c"],":mag:":["1f50d"],":bulb:":["1f4a1"],":mag_right:":["1f50e"],":lock_with_ink_pen:":["1f50f"],":anger:":["1f4a2"],":closed_lock_with_key:":["1f510"],":key:":["1f511"],":bomb:":["1f4a3"],":lock:":["1f512"],":unlock:":["1f513"],":zzz:":["1f4a4"],":bell:":["1f514"],":bookmark:":["1f516"],":boom:":["1f4a5"],":link:":["1f517"],":radio_button:":["1f518"],":sweat_drops:":["1f4a6"],":back:":["1f519"],":end:":["1f51a"],":droplet:":["1f4a7"],":on:":["1f51b"],":soon:":["1f51c"],":dash:":["1f4a8"],":top:":["1f51d"],":underage:":["1f51e"],":poop:":["1f4a9"],":shit:":["1f4a9"],":hankey:":["1f4a9"],":poo:":["1f4a9"],":ten:":["1f51f"],":muscle:":["1f4aa"],":capital_abcd:":["1f520"],":abcd:":["1f521"],":dizzy:":["1f4ab"],":1234:":["1f522"],":symbols:":["1f523"],":speech_balloon:":["1f4ac"],":abc:":["1f524"],":fire:":["1f525"],":flame:":["1f525"],":white_flower:":["1f4ae"],":flashlight:":["1f526"],":wrench:":["1f527"],":100:":["1f4af"],":hammer:":["1f528"],":nut_and_bolt:":["1f529"],":moneybag:":["1f4b0"],":knife:":["1f52a"],":gun:":["1f52b"],":currency_exchange:":["1f4b1"],":crystal_ball:":["1f52e"],":heavy_dollar_sign:":["1f4b2"],":six_pointed_star:":["1f52f"],":credit_card:":["1f4b3"],":beginner:":["1f530"],":trident:":["1f531"],":yen:":["1f4b4"],":black_square_button:":["1f532"],":white_square_button:":["1f533"],":dollar:":["1f4b5"],":red_circle:":["1f534"],":large_blue_circle:":["1f535"],":money_with_wings:":["1f4b8"],":large_orange_diamond:":["1f536"],":large_blue_diamond:":["1f537"],":chart:":["1f4b9"],":small_orange_diamond:":["1f538"],":small_blue_diamond:":["1f539"],":seat:":["1f4ba"],":small_red_triangle:":["1f53a"],":small_red_triangle_down:":["1f53b"],":computer:":["1f4bb"],":arrow_up_small:":["1f53c"],":briefcase:":["1f4bc"],":arrow_down_small:":["1f53d"],":clock1:":["1f550"],":minidisc:":["1f4bd"],":clock2:":["1f551"],":floppy_disk:":["1f4be"],":clock3:":["1f552"],":cd:":["1f4bf"],":clock4:":["1f553"],":dvd:":["1f4c0"],":clock5:":["1f554"],":clock6:":["1f555"],":file_folder:":["1f4c1"],":clock7:":["1f556"],":clock8:":["1f557"],":open_file_folder:":["1f4c2"],":clock9:":["1f558"],":clock10:":["1f559"],":page_with_curl:":["1f4c3"],":clock11:":["1f55a"],":clock12:":["1f55b"],":page_facing_up:":["1f4c4"],":mount_fuji:":["1f5fb"],":tokyo_tower:":["1f5fc"],":date:":["1f4c5"],":statue_of_liberty:":["1f5fd"],":japan:":["1f5fe"],":calendar:":["1f4c6"],":moyai:":["1f5ff"],":grin:":["1f601"],":joy:":["1f602"],":smiley:":["1f603"],":chart_with_upwards_trend:":["1f4c8"],":smile:":["1f604"],":sweat_smile:":["1f605"],":chart_with_downwards_trend:":["1f4c9"],":laughing:":["1f606"],":satisfied:":["1f606"],":wink:":["1f609"],":bar_chart:":["1f4ca"],":blush:":["1f60a"],":yum:":["1f60b"],":clipboard:":["1f4cb"],":relieved:":["1f60c"],":heart_eyes:":["1f60d"],":pushpin:":["1f4cc"],":smirk:":["1f60f"],":unamused:":["1f612"],":round_pushpin:":["1f4cd"],":sweat:":["1f613"],":pensive:":["1f614"],":paperclip:":["1f4ce"],":confounded:":["1f616"],":kissing_heart:":["1f618"],":straight_ruler:":["1f4cf"],":kissing_closed_eyes:":["1f61a"],":stuck_out_tongue_winking_eye:":["1f61c"],":triangular_ruler:":["1f4d0"],":stuck_out_tongue_closed_eyes:":["1f61d"],":disappointed:":["1f61e"],":bookmark_tabs:":["1f4d1"],":angry:":["1f620"],":rage:":["1f621"],":cry:":["1f622"],":persevere:":["1f623"],":triumph:":["1f624"],":disappointed_relieved:":["1f625"],":fearful:":["1f628"],":weary:":["1f629"],":sleepy:":["1f62a"],":tired_face:":["1f62b"],":sob:":["1f62d"],":cold_sweat:":["1f630"],":scream:":["1f631"],":astonished:":["1f632"],":flushed:":["1f633"],":dizzy_face:":["1f635"],":mask:":["1f637"],":smile_cat:":["1f638"],":joy_cat:":["1f639"],":smiley_cat:":["1f63a"],":heart_eyes_cat:":["1f63b"],":smirk_cat:":["1f63c"],":kissing_cat:":["1f63d"],":pouting_cat:":["1f63e"],":crying_cat_face:":["1f63f"],":scream_cat:":["1f640"],":no_good:":["1f645"],":ok_woman:":["1f646"],":bow:":["1f647"],":see_no_evil:":["1f648"],":hear_no_evil:":["1f649"],":speak_no_evil:":["1f64a"],":raising_hand:":["1f64b"],":raised_hands:":["1f64c"],":person_frowning:":["1f64d"],":person_with_pouting_face:":["1f64e"],":pray:":["1f64f"],":rocket:":["1f680"],":railway_car:":["1f683"],":bullettrain_side:":["1f684"],":bullettrain_front:":["1f685"],":metro:":["1f687"],":station:":["1f689"],":bus:":["1f68c"],":busstop:":["1f68f"],":ambulance:":["1f691"],":fire_engine:":["1f692"],":police_car:":["1f693"],":taxi:":["1f695"],":red_car:":["1f697"],":blue_car:":["1f699"],":truck:":["1f69a"],":ship:":["1f6a2"],":speedboat:":["1f6a4"],":traffic_light:":["1f6a5"],":construction:":["1f6a7"],":rotating_light:":["1f6a8"],":triangular_flag_on_post:":["1f6a9"],":door:":["1f6aa"],":no_entry_sign:":["1f6ab"],":smoking:":["1f6ac"],":no_smoking:":["1f6ad"],":bike:":["1f6b2"],":walking:":["1f6b6"],":mens:":["1f6b9"],":womens:":["1f6ba"],":restroom:":["1f6bb"],":baby_symbol:":["1f6bc"],":toilet:":["1f6bd"],":wc:":["1f6be"],":bath:":["1f6c0"],":metal:":["1f918"],":sign_of_the_horns:":["1f918"],":grinning:":["1f600"],":innocent:":["1f607"],":smiling_imp:":["1f608"],":sunglasses:":["1f60e"],":neutral_face:":["1f610"],":expressionless:":["1f611"],":confused:":["1f615"],":kissing:":["1f617"],":kissing_smiling_eyes:":["1f619"],":stuck_out_tongue:":["1f61b"],":worried:":["1f61f"],":frowning:":["1f626"],":anguished:":["1f627"],":grimacing:":["1f62c"],":open_mouth:":["1f62e"],":hushed:":["1f62f"],":sleeping:":["1f634"],":no_mouth:":["1f636"],":helicopter:":["1f681"],":steam_locomotive:":["1f682"],":train2:":["1f686"],":light_rail:":["1f688"],":tram:":["1f68a"],":oncoming_bus:":["1f68d"],":trolleybus:":["1f68e"],":minibus:":["1f690"],":oncoming_police_car:":["1f694"],":oncoming_taxi:":["1f696"],":oncoming_automobile:":["1f698"],":articulated_lorry:":["1f69b"],":tractor:":["1f69c"],":monorail:":["1f69d"],":mountain_railway:":["1f69e"],":suspension_railway:":["1f69f"],":mountain_cableway:":["1f6a0"],":aerial_tramway:":["1f6a1"],":rowboat:":["1f6a3"],":vertical_traffic_light:":["1f6a6"],":put_litter_in_its_place:":["1f6ae"],":do_not_litter:":["1f6af"],":potable_water:":["1f6b0"],":non-potable_water:":["1f6b1"],":no_bicycles:":["1f6b3"],":bicyclist:":["1f6b4"],":mountain_bicyclist:":["1f6b5"],":no_pedestrians:":["1f6b7"],":children_crossing:":["1f6b8"],":shower:":["1f6bf"],":bathtub:":["1f6c1"],":passport_control:":["1f6c2"],":customs:":["1f6c3"],":baggage_claim:":["1f6c4"],":left_luggage:":["1f6c5"],":earth_africa:":["1f30d"],":earth_americas:":["1f30e"],":globe_with_meridians:":["1f310"],":waxing_crescent_moon:":["1f312"],":waning_gibbous_moon:":["1f316"],":last_quarter_moon:":["1f317"],":waning_crescent_moon:":["1f318"],":new_moon_with_face:":["1f31a"],":last_quarter_moon_with_face:":["1f31c"],":full_moon_with_face:":["1f31d"],":sun_with_face:":["1f31e"],":evergreen_tree:":["1f332"],":deciduous_tree:":["1f333"],":lemon:":["1f34b"],":pear:":["1f350"],":baby_bottle:":["1f37c"],":horse_racing:":["1f3c7"],":rugby_football:":["1f3c9"],":european_post_office:":["1f3e4"],":rat:":["1f400"],":mouse2:":["1f401"],":ox:":["1f402"],":water_buffalo:":["1f403"],":cow2:":["1f404"],":tiger2:":["1f405"],":leopard:":["1f406"],":rabbit2:":["1f407"],":cat2:":["1f408"],":dragon:":["1f409"],":crocodile:":["1f40a"],":whale2:":["1f40b"],":ram:":["1f40f"],":goat:":["1f410"],":rooster:":["1f413"],":dog2:":["1f415"],":pig2:":["1f416"],":dromedary_camel:":["1f42a"],":busts_in_silhouette:":["1f465"],":two_men_holding_hands:":["1f46c"],":two_women_holding_hands:":["1f46d"],":thought_balloon:":["1f4ad"],":euro:":["1f4b6"],":pound:":["1f4b7"],":mailbox_with_mail:":["1f4ec"],":mailbox_with_no_mail:":["1f4ed"],":postal_horn:":["1f4ef"],":no_mobile_phones:":["1f4f5"],":twisted_rightwards_arrows:":["1f500"],":repeat:":["1f501"],":repeat_one:":["1f502"],":arrows_counterclockwise:":["1f504"],":low_brightness:":["1f505"],":high_brightness:":["1f506"],":mute:":["1f507"],":sound:":["1f509"],":no_bell:":["1f515"],":microscope:":["1f52c"],":telescope:":["1f52d"],":clock130:":["1f55c"],":clock230:":["1f55d"],":clock330:":["1f55e"],":clock430:":["1f55f"],":clock530:":["1f560"],":clock630:":["1f561"],":clock730:":["1f562"],":clock830:":["1f563"],":clock930:":["1f564"],":clock1030:":["1f565"],":clock1130:":["1f566"],":clock1230:":["1f567"],":speaker:":["1f508"],":train:":["1f68b"],":medal:":["1f3c5"],":sports_medal:":["1f3c5"],":flag_black:":["1f3f4"],":waving_black_flag:":["1f3f4"],":camera_with_flash:":["1f4f8"],":sleeping_accommodation:":["1f6cc"],":middle_finger:":["1f595"],":reversed_hand_with_middle_finger_extended:":["1f595"],":vulcan:":["1f596"],":raised_hand_with_part_between_middle_and_ring_fingers:":["1f596"],":slight_frown:":["1f641"],":slightly_frowning_face:":["1f641"],":slight_smile:":["1f642"],":slightly_smiling_face:":["1f642"],":airplane_departure:":["1f6eb"],":airplane_arriving:":["1f6ec"],":tone1:":["1f3fb"],":tone2:":["1f3fc"],":tone3:":["1f3fd"],":tone4:":["1f3fe"],":tone5:":["1f3ff"],":upside_down:":["1f643"],":upside_down_face:":["1f643"],":money_mouth:":["1f911"],":money_mouth_face:":["1f911"],":nerd:":["1f913"],":nerd_face:":["1f913"],":hugging:":["1f917"],":hugging_face:":["1f917"],":rolling_eyes:":["1f644"],":face_with_rolling_eyes:":["1f644"],":thinking:":["1f914"],":thinking_face:":["1f914"],":zipper_mouth:":["1f910"],":zipper_mouth_face:":["1f910"],":thermometer_face:":["1f912"],":face_with_thermometer:":["1f912"],":head_bandage:":["1f915"],":face_with_head_bandage:":["1f915"],":robot:":["1f916"],":robot_face:":["1f916"],":lion_face:":["1f981"],":lion:":["1f981"],":unicorn:":["1f984"],":unicorn_face:":["1f984"],":scorpion:":["1f982"],":crab:":["1f980"],":turkey:":["1f983"],":cheese:":["1f9c0"],":cheese_wedge:":["1f9c0"],":hotdog:":["1f32d"],":hot_dog:":["1f32d"],":taco:":["1f32e"],":burrito:":["1f32f"],":popcorn:":["1f37f"],":champagne:":["1f37e"],":bottle_with_popping_cork:":["1f37e"],":bow_and_arrow:":["1f3f9"],":archery:":["1f3f9"],":amphora:":["1f3fa"],":place_of_worship:":["1f6d0"],":worship_symbol:":["1f6d0"],":kaaba:":["1f54b"],":mosque:":["1f54c"],":synagogue:":["1f54d"],":menorah:":["1f54e"],":prayer_beads:":["1f4ff"],":cricket:":["1f3cf"],":cricket_bat_ball:":["1f3cf"],":volleyball:":["1f3d0"],":field_hockey:":["1f3d1"],":hockey:":["1f3d2"],":ping_pong:":["1f3d3"],":table_tennis:":["1f3d3"],":badminton:":["1f3f8"],":fast_forward:":["23e9"],":rewind:":["23ea"],":arrow_double_up:":["23eb"],":arrow_double_down:":["23ec"],":alarm_clock:":["23f0"],":hourglass_flowing_sand:":["23f3"],":ophiuchus:":["26ce"],":white_check_mark:":["2705"],":fist:":["270a"],":raised_hand:":["270b"],":sparkles:":["2728"],":x:":["274c"],":negative_squared_cross_mark:":["274e"],":question:":["2753"],":grey_question:":["2754"],":grey_exclamation:":["2755"],":heavy_plus_sign:":["2795"],":heavy_minus_sign:":["2796"],":heavy_division_sign:":["2797"],":curly_loop:":["27b0"],":loop:":["27bf"]};var t,i=[];for(t in e.emojioneList)e.emojioneList.hasOwnProperty(t)&&i.push(t.replace(/[+]/g,"\\$&"));e.shortnames=i.join("|"),e.asciiList={"<3":"2764","</3":"1f494",":')":"1f602",":'-)":"1f602",":D":"1f603",":-D":"1f603","=D":"1f603",":)":"1f604",":-)":"1f604","=]":"1f604","=)":"1f604",":]":"1f604","':)":"1f605","':-)":"1f605","'=)":"1f605","':D":"1f605","':-D":"1f605","'=D":"1f605",">:)":"1f606",">;)":"1f606",">:-)":"1f606",">=)":"1f606",";)":"1f609",";-)":"1f609","*-)":"1f609","*)":"1f609",";-]":"1f609",";]":"1f609",";D":"1f609",";^)":"1f609","':(":"1f613","':-(":"1f613","'=(":"1f613",":*":"1f618",":-*":"1f618","=*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c","x-p":"1f61c",">:[":"1f61e",":-(":"1f61e",":(":"1f61e",":-[":"1f61e",":[":"1f61e","=(":"1f61e",">:(":"1f620",">:-(":"1f620",":@":"1f620",":'(":"1f622",":'-(":"1f622",";(":"1f622",";-(":"1f622",">.<":"1f623","D:":"1f628",":$":"1f633","=$":"1f633","#-)":"1f635","#)":"1f635","%-)":"1f635","%)":"1f635","X)":"1f635","X-)":"1f635","*\\0/*":"1f646","\\0/":"1f646","*\\O/*":"1f646","\\O/":"1f646","O:-)":"1f607","0:-3":"1f607","0:3":"1f607","0:-)":"1f607","0:)":"1f607","0;^)":"1f607","O:)":"1f607","O;-)":"1f607","O=)":"1f607","0;-)":"1f607","O:-3":"1f607","O:3":"1f607","B-)":"1f60e","B)":"1f60e","8)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e","-_-":"1f611","-__-":"1f611","-___-":"1f611",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":/":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",":P":"1f61b",":-P":"1f61b","=P":"1f61b",":-p":"1f61b",":p":"1f61b","=p":"1f61b",":-Þ":"1f61b",":Þ":"1f61b",":þ":"1f61b",":-þ":"1f61b",":-b":"1f61b",":b":"1f61b","d:":"1f61b",":-O":"1f62e",":O":"1f62e",":-o":"1f62e",":o":"1f62e",O_O:"1f62e",">:O":"1f62e",":-X":"1f636",":X":"1f636",":-#":"1f636",":#":"1f636","=X":"1f636","=x":"1f636",":x":"1f636",":-x":"1f636","=#":"1f636"},e.asciiRegexp="(\\<3|&lt;3|\\<\\/3|&lt;\\/3|\\:'\\)|\\:'\\-\\)|\\:D|\\:\\-D|\\=D|\\:\\)|\\:\\-\\)|\\=\\]|\\=\\)|\\:\\]|'\\:\\)|'\\:\\-\\)|'\\=\\)|'\\:D|'\\:\\-D|'\\=D|\\>\\:\\)|&gt;\\:\\)|\\>;\\)|&gt;;\\)|\\>\\:\\-\\)|&gt;\\:\\-\\)|\\>\\=\\)|&gt;\\=\\)|;\\)|;\\-\\)|\\*\\-\\)|\\*\\)|;\\-\\]|;\\]|;D|;\\^\\)|'\\:\\(|'\\:\\-\\(|'\\=\\(|\\:\\*|\\:\\-\\*|\\=\\*|\\:\\^\\*|\\>\\:P|&gt;\\:P|X\\-P|x\\-p|\\>\\:\\[|&gt;\\:\\[|\\:\\-\\(|\\:\\(|\\:\\-\\[|\\:\\[|\\=\\(|\\>\\:\\(|&gt;\\:\\(|\\>\\:\\-\\(|&gt;\\:\\-\\(|\\:@|\\:'\\(|\\:'\\-\\(|;\\(|;\\-\\(|\\>\\.\\<|&gt;\\.&lt;|D\\:|\\:\\$|\\=\\$|#\\-\\)|#\\)|%\\-\\)|%\\)|X\\)|X\\-\\)|\\*\\\\0\\/\\*|\\\\0\\/|\\*\\\\O\\/\\*|\\\\O\\/|O\\:\\-\\)|0\\:\\-3|0\\:3|0\\:\\-\\)|0\\:\\)|0;\\^\\)|O\\:\\-\\)|O\\:\\)|O;\\-\\)|O\\=\\)|0;\\-\\)|O\\:\\-3|O\\:3|B\\-\\)|B\\)|8\\)|8\\-\\)|B\\-D|8\\-D|\\-_\\-|\\-__\\-|\\-___\\-|\\>\\:\\\\|&gt;\\:\\\\|\\>\\:\\/|&gt;\\:\\/|\\:\\-\\/|\\:\\-\\.|\\:\\/|\\:\\\\|\\=\\/|\\=\\\\|\\:L|\\=L|\\:P|\\:\\-P|\\=P|\\:\\-p|\\:p|\\=p|\\:\\-Þ|\\:\\-&THORN;|\\:Þ|\\:&THORN;|\\:þ|\\:&thorn;|\\:\\-þ|\\:\\-&thorn;|\\:\\-b|\\:b|d\\:|\\:\\-O|\\:O|\\:\\-o|\\:o|O_O|\\>\\:O|&gt;\\:O|\\:\\-X|\\:X|\\:\\-#|\\:#|\\=X|\\=x|\\:x|\\:\\-x|\\=#)",
e.unicodeRegexp="(\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC8B\\u200D\\uD83D\\uDC69|\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC8B\\u200D\\uD83D\\uDC68|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC68|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC66|\\uD83D\\uDC41\\u200D\\uD83D\\uDDE8|\\uD83C\\uDDE6\\uD83C\\uDDE9|\\uD83C\\uDDE6\\uD83C\\uDDEA|\\uD83C\\uDDE6\\uD83C\\uDDEB|\\uD83C\\uDDE6\\uD83C\\uDDEC|\\uD83C\\uDDE6\\uD83C\\uDDEE|\\uD83C\\uDDE6\\uD83C\\uDDF1|\\uD83C\\uDDE6\\uD83C\\uDDF2|\\uD83C\\uDDE6\\uD83C\\uDDF4|\\uD83C\\uDDE6\\uD83C\\uDDF6|\\uD83C\\uDDE6\\uD83C\\uDDF7|\\uD83C\\uDDE6\\uD83C\\uDDF8|\\uD83E\\uDD18\\uD83C\\uDFFF|\\uD83E\\uDD18\\uD83C\\uDFFE|\\uD83E\\uDD18\\uD83C\\uDFFD|\\uD83E\\uDD18\\uD83C\\uDFFC|\\uD83E\\uDD18\\uD83C\\uDFFB|\\uD83D\\uDEC0\\uD83C\\uDFFF|\\uD83D\\uDEC0\\uD83C\\uDFFE|\\uD83D\\uDEC0\\uD83C\\uDFFD|\\uD83D\\uDEC0\\uD83C\\uDFFC|\\uD83D\\uDEC0\\uD83C\\uDFFB|\\uD83D\\uDEB6\\uD83C\\uDFFF|\\uD83D\\uDEB6\\uD83C\\uDFFE|\\uD83D\\uDEB6\\uD83C\\uDFFD|\\uD83D\\uDEB6\\uD83C\\uDFFC|\\uD83D\\uDEB6\\uD83C\\uDFFB|\\uD83D\\uDEB5\\uD83C\\uDFFF|\\uD83D\\uDEB5\\uD83C\\uDFFE|\\uD83D\\uDEB5\\uD83C\\uDFFD|\\uD83D\\uDEB5\\uD83C\\uDFFC|\\uD83D\\uDEB5\\uD83C\\uDFFB|\\uD83D\\uDEB4\\uD83C\\uDFFF|\\uD83D\\uDEB4\\uD83C\\uDFFE|\\uD83D\\uDEB4\\uD83C\\uDFFD|\\uD83D\\uDEB4\\uD83C\\uDFFC|\\uD83D\\uDEB4\\uD83C\\uDFFB|\\uD83D\\uDEA3\\uD83C\\uDFFF|\\uD83D\\uDEA3\\uD83C\\uDFFE|\\uD83D\\uDEA3\\uD83C\\uDFFD|\\uD83D\\uDEA3\\uD83C\\uDFFC|\\uD83D\\uDEA3\\uD83C\\uDFFB|\\uD83D\\uDE4F\\uD83C\\uDFFF|\\uD83D\\uDE4F\\uD83C\\uDFFE|\\uD83D\\uDE4F\\uD83C\\uDFFD|\\uD83D\\uDE4F\\uD83C\\uDFFC|\\uD83D\\uDE4F\\uD83C\\uDFFB|\\uD83D\\uDE4E\\uD83C\\uDFFF|\\uD83D\\uDE4E\\uD83C\\uDFFE|\\uD83D\\uDE4E\\uD83C\\uDFFD|\\uD83D\\uDE4E\\uD83C\\uDFFC|\\uD83D\\uDE4E\\uD83C\\uDFFB|\\uD83D\\uDE4D\\uD83C\\uDFFF|\\uD83D\\uDE4D\\uD83C\\uDFFE|\\uD83D\\uDE4D\\uD83C\\uDFFD|\\uD83D\\uDE4D\\uD83C\\uDFFC|\\uD83D\\uDE4D\\uD83C\\uDFFB|\\uD83D\\uDE4C\\uD83C\\uDFFF|\\uD83D\\uDE4C\\uD83C\\uDFFE|\\uD83D\\uDE4C\\uD83C\\uDFFD|\\uD83D\\uDE4C\\uD83C\\uDFFC|\\uD83D\\uDE4C\\uD83C\\uDFFB|\\uD83D\\uDE4B\\uD83C\\uDFFF|\\uD83D\\uDE4B\\uD83C\\uDFFE|\\uD83D\\uDE4B\\uD83C\\uDFFD|\\uD83D\\uDE4B\\uD83C\\uDFFC|\\uD83D\\uDE4B\\uD83C\\uDFFB|\\uD83D\\uDE47\\uD83C\\uDFFF|\\uD83D\\uDE47\\uD83C\\uDFFE|\\uD83D\\uDE47\\uD83C\\uDFFD|\\uD83D\\uDE47\\uD83C\\uDFFC|\\uD83D\\uDE47\\uD83C\\uDFFB|\\uD83D\\uDE46\\uD83C\\uDFFF|\\uD83D\\uDE46\\uD83C\\uDFFE|\\uD83D\\uDE46\\uD83C\\uDFFD|\\uD83D\\uDE46\\uD83C\\uDFFC|\\uD83D\\uDE46\\uD83C\\uDFFB|\\uD83D\\uDE45\\uD83C\\uDFFF|\\uD83D\\uDE45\\uD83C\\uDFFE|\\uD83D\\uDE45\\uD83C\\uDFFD|\\uD83D\\uDE45\\uD83C\\uDFFC|\\uD83D\\uDE45\\uD83C\\uDFFB|\\uD83D\\uDD96\\uD83C\\uDFFF|\\uD83D\\uDD96\\uD83C\\uDFFE|\\uD83D\\uDD96\\uD83C\\uDFFD|\\uD83D\\uDD96\\uD83C\\uDFFC|\\uD83D\\uDD96\\uD83C\\uDFFB|\\uD83D\\uDD95\\uD83C\\uDFFF|\\uD83D\\uDD95\\uD83C\\uDFFE|\\uD83D\\uDD95\\uD83C\\uDFFD|\\uD83D\\uDD95\\uD83C\\uDFFC|\\uD83D\\uDD95\\uD83C\\uDFFB|\\uD83D\\uDD90\\uD83C\\uDFFF|\\uD83D\\uDD90\\uD83C\\uDFFE|\\uD83D\\uDD90\\uD83C\\uDFFD|\\uD83D\\uDD90\\uD83C\\uDFFC|\\uD83D\\uDD90\\uD83C\\uDFFB|\\uD83D\\uDD75\\uD83C\\uDFFF|\\uD83D\\uDD75\\uD83C\\uDFFE|\\uD83D\\uDD75\\uD83C\\uDFFD|\\uD83D\\uDD75\\uD83C\\uDFFC|\\uD83D\\uDD75\\uD83C\\uDFFB|\\uD83D\\uDCAA\\uD83C\\uDFFF|\\uD83D\\uDCAA\\uD83C\\uDFFE|\\uD83D\\uDCAA\\uD83C\\uDFFD|\\uD83D\\uDCAA\\uD83C\\uDFFC|\\uD83D\\uDCAA\\uD83C\\uDFFB|\\uD83D\\uDC87\\uD83C\\uDFFF|\\uD83D\\uDC87\\uD83C\\uDFFE|\\uD83D\\uDC87\\uD83C\\uDFFD|\\uD83D\\uDC87\\uD83C\\uDFFC|\\uD83D\\uDC87\\uD83C\\uDFFB|\\uD83D\\uDC86\\uD83C\\uDFFF|\\uD83D\\uDC86\\uD83C\\uDFFE|\\uD83D\\uDC86\\uD83C\\uDFFD|\\uD83D\\uDC86\\uD83C\\uDFFC|\\uD83D\\uDC86\\uD83C\\uDFFB|\\uD83D\\uDC85\\uD83C\\uDFFF|\\uD83D\\uDC85\\uD83C\\uDFFE|\\uD83D\\uDC85\\uD83C\\uDFFD|\\uD83D\\uDC85\\uD83C\\uDFFC|\\uD83D\\uDC85\\uD83C\\uDFFB|\\uD83D\\uDC83\\uD83C\\uDFFF|\\uD83D\\uDC83\\uD83C\\uDFFE|\\uD83D\\uDC83\\uD83C\\uDFFD|\\uD83D\\uDC83\\uD83C\\uDFFC|\\uD83D\\uDC83\\uD83C\\uDFFB|\\uD83D\\uDC82\\uD83C\\uDFFF|\\uD83D\\uDC82\\uD83C\\uDFFE|\\uD83D\\uDC82\\uD83C\\uDFFD|\\uD83D\\uDC82\\uD83C\\uDFFC|\\uD83D\\uDC82\\uD83C\\uDFFB|\\uD83D\\uDC81\\uD83C\\uDFFF|\\uD83D\\uDC81\\uD83C\\uDFFE|\\uD83D\\uDC81\\uD83C\\uDFFD|\\uD83D\\uDC81\\uD83C\\uDFFC|\\uD83D\\uDC81\\uD83C\\uDFFB|\\uD83D\\uDC7C\\uD83C\\uDFFF|\\uD83D\\uDC7C\\uD83C\\uDFFE|\\uD83D\\uDC7C\\uD83C\\uDFFD|\\uD83D\\uDC7C\\uD83C\\uDFFC|\\uD83D\\uDC7C\\uD83C\\uDFFB|\\uD83D\\uDC78\\uD83C\\uDFFF|\\uD83D\\uDC78\\uD83C\\uDFFE|\\uD83D\\uDC78\\uD83C\\uDFFD|\\uD83D\\uDC78\\uD83C\\uDFFC|\\uD83D\\uDC78\\uD83C\\uDFFB|\\uD83D\\uDC77\\uD83C\\uDFFF|\\uD83D\\uDC77\\uD83C\\uDFFE|\\uD83D\\uDC77\\uD83C\\uDFFD|\\uD83D\\uDC77\\uD83C\\uDFFC|\\uD83D\\uDC77\\uD83C\\uDFFB|\\uD83D\\uDC76\\uD83C\\uDFFF|\\uD83D\\uDC76\\uD83C\\uDFFE|\\uD83D\\uDC76\\uD83C\\uDFFD|\\uD83D\\uDC76\\uD83C\\uDFFC|\\uD83D\\uDC76\\uD83C\\uDFFB|\\uD83D\\uDC75\\uD83C\\uDFFF|\\uD83D\\uDC75\\uD83C\\uDFFE|\\uD83D\\uDC75\\uD83C\\uDFFD|\\uD83D\\uDC75\\uD83C\\uDFFC|\\uD83D\\uDC75\\uD83C\\uDFFB|\\uD83D\\uDC74\\uD83C\\uDFFF|\\uD83D\\uDC74\\uD83C\\uDFFE|\\uD83D\\uDC74\\uD83C\\uDFFD|\\uD83D\\uDC74\\uD83C\\uDFFC|\\uD83D\\uDC74\\uD83C\\uDFFB|\\uD83D\\uDC73\\uD83C\\uDFFF|\\uD83D\\uDC73\\uD83C\\uDFFE|\\uD83D\\uDC73\\uD83C\\uDFFD|\\uD83D\\uDC73\\uD83C\\uDFFC|\\uD83D\\uDC73\\uD83C\\uDFFB|\\uD83D\\uDC72\\uD83C\\uDFFF|\\uD83D\\uDC72\\uD83C\\uDFFE|\\uD83D\\uDC72\\uD83C\\uDFFD|\\uD83D\\uDC72\\uD83C\\uDFFC|\\uD83D\\uDC72\\uD83C\\uDFFB|\\uD83D\\uDC71\\uD83C\\uDFFF|\\uD83D\\uDC71\\uD83C\\uDFFE|\\uD83D\\uDC71\\uD83C\\uDFFD|\\uD83D\\uDC71\\uD83C\\uDFFC|\\uD83D\\uDC71\\uD83C\\uDFFB|\\uD83D\\uDC70\\uD83C\\uDFFF|\\uD83D\\uDC70\\uD83C\\uDFFE|\\uD83D\\uDC70\\uD83C\\uDFFD|\\uD83D\\uDC70\\uD83C\\uDFFC|\\uD83D\\uDC70\\uD83C\\uDFFB|\\uD83D\\uDC6E\\uD83C\\uDFFF|\\uD83D\\uDC6E\\uD83C\\uDFFE|\\uD83D\\uDC6E\\uD83C\\uDFFD|\\uD83D\\uDC6E\\uD83C\\uDFFC|\\uD83D\\uDC6E\\uD83C\\uDFFB|\\uD83D\\uDC69\\uD83C\\uDFFF|\\uD83D\\uDC69\\uD83C\\uDFFE|\\uD83D\\uDC69\\uD83C\\uDFFD|\\uD83D\\uDC69\\uD83C\\uDFFC|\\uD83D\\uDC69\\uD83C\\uDFFB|\\uD83D\\uDC68\\uD83C\\uDFFF|\\uD83D\\uDC68\\uD83C\\uDFFE|\\uD83D\\uDC68\\uD83C\\uDFFD|\\uD83D\\uDC68\\uD83C\\uDFFC|\\uD83D\\uDC68\\uD83C\\uDFFB|\\uD83D\\uDC67\\uD83C\\uDFFF|\\uD83D\\uDC67\\uD83C\\uDFFE|\\uD83D\\uDC67\\uD83C\\uDFFD|\\uD83D\\uDC67\\uD83C\\uDFFC|\\uD83D\\uDC67\\uD83C\\uDFFB|\\uD83D\\uDC66\\uD83C\\uDFFF|\\uD83D\\uDC66\\uD83C\\uDFFE|\\uD83D\\uDC66\\uD83C\\uDFFD|\\uD83D\\uDC66\\uD83C\\uDFFC|\\uD83D\\uDC66\\uD83C\\uDFFB|\\uD83D\\uDC50\\uD83C\\uDFFF|\\uD83D\\uDC50\\uD83C\\uDFFE|\\uD83D\\uDC50\\uD83C\\uDFFD|\\uD83D\\uDC50\\uD83C\\uDFFC|\\uD83D\\uDC50\\uD83C\\uDFFB|\\uD83D\\uDC4F\\uD83C\\uDFFF|\\uD83D\\uDC4F\\uD83C\\uDFFE|\\uD83D\\uDC4F\\uD83C\\uDFFD|\\uD83D\\uDC4F\\uD83C\\uDFFC|\\uD83D\\uDC4F\\uD83C\\uDFFB|\\uD83D\\uDC4E\\uD83C\\uDFFF|\\uD83D\\uDC4E\\uD83C\\uDFFE|\\uD83D\\uDC4E\\uD83C\\uDFFD|\\uD83D\\uDC4E\\uD83C\\uDFFC|\\uD83D\\uDC4E\\uD83C\\uDFFB|\\uD83D\\uDC4D\\uD83C\\uDFFF|\\uD83D\\uDC4D\\uD83C\\uDFFE|\\uD83D\\uDC4D\\uD83C\\uDFFD|\\uD83D\\uDC4D\\uD83C\\uDFFC|\\uD83D\\uDC4D\\uD83C\\uDFFB|\\uD83D\\uDC4C\\uD83C\\uDFFF|\\uD83D\\uDC4C\\uD83C\\uDFFE|\\uD83D\\uDC4C\\uD83C\\uDFFD|\\uD83D\\uDC4C\\uD83C\\uDFFC|\\uD83D\\uDC4C\\uD83C\\uDFFB|\\uD83D\\uDC4B\\uD83C\\uDFFF|\\uD83D\\uDC4B\\uD83C\\uDFFE|\\uD83D\\uDC4B\\uD83C\\uDFFD|\\uD83D\\uDC4B\\uD83C\\uDFFC|\\uD83D\\uDC4B\\uD83C\\uDFFB|\\uD83D\\uDC4A\\uD83C\\uDFFF|\\uD83D\\uDC4A\\uD83C\\uDFFE|\\uD83D\\uDC4A\\uD83C\\uDFFD|\\uD83D\\uDC4A\\uD83C\\uDFFC|\\uD83D\\uDC4A\\uD83C\\uDFFB|\\uD83D\\uDC49\\uD83C\\uDFFF|\\uD83D\\uDC49\\uD83C\\uDFFE|\\uD83D\\uDC49\\uD83C\\uDFFD|\\uD83D\\uDC49\\uD83C\\uDFFC|\\uD83D\\uDC49\\uD83C\\uDFFB|\\uD83D\\uDC48\\uD83C\\uDFFF|\\uD83D\\uDC48\\uD83C\\uDFFE|\\uD83D\\uDC48\\uD83C\\uDFFD|\\uD83D\\uDC48\\uD83C\\uDFFC|\\uD83D\\uDC48\\uD83C\\uDFFB|\\uD83D\\uDC47\\uD83C\\uDFFF|\\uD83D\\uDC47\\uD83C\\uDFFE|\\uD83D\\uDC47\\uD83C\\uDFFD|\\uD83D\\uDC47\\uD83C\\uDFFC|\\uD83D\\uDC47\\uD83C\\uDFFB|\\uD83D\\uDC46\\uD83C\\uDFFF|\\uD83D\\uDC46\\uD83C\\uDFFE|\\uD83D\\uDC46\\uD83C\\uDFFD|\\uD83D\\uDC46\\uD83C\\uDFFC|\\uD83D\\uDC46\\uD83C\\uDFFB|\\uD83D\\uDC43\\uD83C\\uDFFF|\\uD83D\\uDC43\\uD83C\\uDFFE|\\uD83D\\uDC43\\uD83C\\uDFFD|\\uD83D\\uDC43\\uD83C\\uDFFC|\\uD83D\\uDC43\\uD83C\\uDFFB|\\uD83D\\uDC42\\uD83C\\uDFFF|\\uD83D\\uDC42\\uD83C\\uDFFE|\\uD83D\\uDC42\\uD83C\\uDFFD|\\uD83D\\uDC42\\uD83C\\uDFFC|\\uD83D\\uDC42\\uD83C\\uDFFB|\\uD83C\\uDFCB\\uD83C\\uDFFF|\\uD83C\\uDFCB\\uD83C\\uDFFE|\\uD83C\\uDFCB\\uD83C\\uDFFD|\\uD83C\\uDFCB\\uD83C\\uDFFC|\\uD83C\\uDFCB\\uD83C\\uDFFB|\\uD83C\\uDFCA\\uD83C\\uDFFF|\\uD83C\\uDFCA\\uD83C\\uDFFE|\\uD83C\\uDFCA\\uD83C\\uDFFD|\\uD83C\\uDFCA\\uD83C\\uDFFC|\\uD83C\\uDFCA\\uD83C\\uDFFB|\\uD83C\\uDFC7\\uD83C\\uDFFF|\\uD83C\\uDFC7\\uD83C\\uDFFE|\\uD83C\\uDFC7\\uD83C\\uDFFD|\\uD83C\\uDFC7\\uD83C\\uDFFC|\\uD83C\\uDFC7\\uD83C\\uDFFB|\\uD83C\\uDFC4\\uD83C\\uDFFF|\\uD83C\\uDFC4\\uD83C\\uDFFE|\\uD83C\\uDFC4\\uD83C\\uDFFD|\\uD83C\\uDFC4\\uD83C\\uDFFC|\\uD83C\\uDFC4\\uD83C\\uDFFB|\\uD83C\\uDFC3\\uD83C\\uDFFF|\\uD83C\\uDFC3\\uD83C\\uDFFE|\\uD83C\\uDFC3\\uD83C\\uDFFD|\\uD83C\\uDFC3\\uD83C\\uDFFC|\\uD83C\\uDFC3\\uD83C\\uDFFB|\\uD83C\\uDF85\\uD83C\\uDFFF|\\uD83C\\uDF85\\uD83C\\uDFFE|\\uD83C\\uDF85\\uD83C\\uDFFD|\\uD83C\\uDF85\\uD83C\\uDFFC|\\uD83C\\uDF85\\uD83C\\uDFFB|\\uD83C\\uDDFF\\uD83C\\uDDFC|\\uD83C\\uDDFF\\uD83C\\uDDF2|\\uD83C\\uDDFF\\uD83C\\uDDE6|\\uD83C\\uDDFE\\uD83C\\uDDF9|\\uD83C\\uDDFE\\uD83C\\uDDEA|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDFC\\uD83C\\uDDF8|\\uD83C\\uDDFC\\uD83C\\uDDEB|\\uD83C\\uDDFB\\uD83C\\uDDFA|\\uD83C\\uDDFB\\uD83C\\uDDF3|\\uD83C\\uDDFB\\uD83C\\uDDEE|\\uD83C\\uDDFB\\uD83C\\uDDEC|\\uD83C\\uDDFB\\uD83C\\uDDEA|\\uD83C\\uDDFB\\uD83C\\uDDE8|\\uD83C\\uDDFB\\uD83C\\uDDE6|\\uD83C\\uDDFA\\uD83C\\uDDFF|\\uD83C\\uDDFA\\uD83C\\uDDFE|\\uD83C\\uDDFA\\uD83C\\uDDF8|\\uD83C\\uDDFA\\uD83C\\uDDF2|\\uD83C\\uDDFA\\uD83C\\uDDEC|\\uD83C\\uDDFA\\uD83C\\uDDE6|\\uD83C\\uDDF9\\uD83C\\uDDFF|\\uD83C\\uDDE6\\uD83C\\uDDE8|\\uD83C\\uDDF9\\uD83C\\uDDFB|\\uD83C\\uDDF9\\uD83C\\uDDF9|\\uD83C\\uDDF9\\uD83C\\uDDF7|\\uD83C\\uDDF9\\uD83C\\uDDF4|\\uD83C\\uDDF9\\uD83C\\uDDF3|\\uD83C\\uDDF9\\uD83C\\uDDF2|\\uD83C\\uDDF9\\uD83C\\uDDF1|\\uD83C\\uDDF9\\uD83C\\uDDF0|\\uD83C\\uDDF9\\uD83C\\uDDEF|\\uD83C\\uDDF9\\uD83C\\uDDED|\\uD83C\\uDDF9\\uD83C\\uDDEC|\\uD83C\\uDDF9\\uD83C\\uDDEB|\\uD83C\\uDDF9\\uD83C\\uDDE9|\\uD83C\\uDDF9\\uD83C\\uDDE8|\\uD83C\\uDDF9\\uD83C\\uDDE6|\\uD83C\\uDDF8\\uD83C\\uDDFF|\\uD83C\\uDDF8\\uD83C\\uDDFE|\\uD83C\\uDDF8\\uD83C\\uDDFD|\\uD83C\\uDDF8\\uD83C\\uDDFB|\\uD83C\\uDDF8\\uD83C\\uDDF9|\\uD83C\\uDDF8\\uD83C\\uDDF8|\\uD83C\\uDDF8\\uD83C\\uDDF7|\\uD83C\\uDDF8\\uD83C\\uDDF4|\\uD83C\\uDDF8\\uD83C\\uDDF3|\\uD83C\\uDDF8\\uD83C\\uDDF2|\\uD83C\\uDDF8\\uD83C\\uDDF1|\\uD83C\\uDDF8\\uD83C\\uDDF0|\\uD83C\\uDDF8\\uD83C\\uDDEF|\\uD83C\\uDDF8\\uD83C\\uDDEE|\\uD83C\\uDDF8\\uD83C\\uDDED|\\uD83C\\uDDF8\\uD83C\\uDDEC|\\uD83C\\uDDF8\\uD83C\\uDDEA|\\uD83C\\uDDF8\\uD83C\\uDDE9|\\uD83C\\uDDF8\\uD83C\\uDDE8|\\uD83C\\uDDF8\\uD83C\\uDDE7|\\uD83C\\uDDF8\\uD83C\\uDDE6|\\uD83C\\uDDF7\\uD83C\\uDDFC|\\uD83C\\uDDF7\\uD83C\\uDDFA|\\uD83C\\uDDF7\\uD83C\\uDDF8|\\uD83C\\uDDF7\\uD83C\\uDDF4|\\uD83C\\uDDF7\\uD83C\\uDDEA|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF5\\uD83C\\uDDFE|\\uD83C\\uDDF5\\uD83C\\uDDFC|\\uD83C\\uDDF5\\uD83C\\uDDF9|\\uD83C\\uDDF5\\uD83C\\uDDF8|\\uD83C\\uDDF5\\uD83C\\uDDF7|\\uD83C\\uDDF5\\uD83C\\uDDF3|\\uD83C\\uDDF5\\uD83C\\uDDF2|\\uD83C\\uDDF5\\uD83C\\uDDF1|\\uD83C\\uDDF5\\uD83C\\uDDF0|\\uD83C\\uDDF5\\uD83C\\uDDED|\\uD83C\\uDDF5\\uD83C\\uDDEC|\\uD83C\\uDDF5\\uD83C\\uDDEB|\\uD83C\\uDDF5\\uD83C\\uDDEA|\\uD83C\\uDDF5\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83C\\uDDF3\\uD83C\\uDDFF|\\uD83C\\uDDF3\\uD83C\\uDDFA|\\uD83C\\uDDF3\\uD83C\\uDDF7|\\uD83C\\uDDF3\\uD83C\\uDDF5|\\uD83C\\uDDF3\\uD83C\\uDDF4|\\uD83C\\uDDF3\\uD83C\\uDDF1|\\uD83C\\uDDF3\\uD83C\\uDDEE|\\uD83C\\uDDF3\\uD83C\\uDDEC|\\uD83C\\uDDF3\\uD83C\\uDDEB|\\uD83C\\uDDF3\\uD83C\\uDDEA|\\uD83C\\uDDF3\\uD83C\\uDDE8|\\uD83C\\uDDF3\\uD83C\\uDDE6|\\uD83C\\uDDF2\\uD83C\\uDDFF|\\uD83C\\uDDF2\\uD83C\\uDDFE|\\uD83C\\uDDF2\\uD83C\\uDDFD|\\uD83C\\uDDF2\\uD83C\\uDDFC|\\uD83C\\uDDF2\\uD83C\\uDDFB|\\uD83C\\uDDF2\\uD83C\\uDDFA|\\uD83C\\uDDF2\\uD83C\\uDDF9|\\uD83C\\uDDF2\\uD83C\\uDDF8|\\uD83C\\uDDF2\\uD83C\\uDDF7|\\uD83C\\uDDF2\\uD83C\\uDDF6|\\uD83C\\uDDF2\\uD83C\\uDDF5|\\uD83C\\uDDF2\\uD83C\\uDDF4|\\uD83C\\uDDF2\\uD83C\\uDDF3|\\uD83C\\uDDF2\\uD83C\\uDDF2|\\uD83C\\uDDF2\\uD83C\\uDDF1|\\uD83C\\uDDF2\\uD83C\\uDDF0|\\uD83C\\uDDF2\\uD83C\\uDDED|\\uD83C\\uDDF2\\uD83C\\uDDEC|\\uD83C\\uDDF2\\uD83C\\uDDEB|\\uD83C\\uDDF2\\uD83C\\uDDEA|\\uD83C\\uDDF2\\uD83C\\uDDE9|\\uD83C\\uDDF2\\uD83C\\uDDE8|\\uD83C\\uDDF2\\uD83C\\uDDE6|\\uD83C\\uDDF1\\uD83C\\uDDFE|\\uD83C\\uDDF1\\uD83C\\uDDFB|\\uD83C\\uDDF1\\uD83C\\uDDFA|\\uD83C\\uDDF1\\uD83C\\uDDF9|\\uD83C\\uDDF1\\uD83C\\uDDF8|\\uD83C\\uDDF1\\uD83C\\uDDF7|\\uD83C\\uDDF1\\uD83C\\uDDF0|\\uD83C\\uDDF1\\uD83C\\uDDEE|\\uD83C\\uDDF1\\uD83C\\uDDE8|\\uD83C\\uDDF1\\uD83C\\uDDE7|\\uD83C\\uDDF1\\uD83C\\uDDE6|\\uD83C\\uDDF0\\uD83C\\uDDFF|\\uD83C\\uDDF0\\uD83C\\uDDFE|\\uD83C\\uDDF0\\uD83C\\uDDFC|\\uD83C\\uDDF0\\uD83C\\uDDF7|\\uD83C\\uDDF0\\uD83C\\uDDF5|\\uD83C\\uDDF0\\uD83C\\uDDF3|\\uD83C\\uDDF0\\uD83C\\uDDF2|\\uD83C\\uDDF0\\uD83C\\uDDEE|\\uD83C\\uDDF0\\uD83C\\uDDED|\\uD83C\\uDDF0\\uD83C\\uDDEC|\\uD83C\\uDDF0\\uD83C\\uDDEA|\\uD83C\\uDDEF\\uD83C\\uDDF5|\\uD83C\\uDDEF\\uD83C\\uDDF4|\\uD83C\\uDDEF\\uD83C\\uDDF2|\\uD83C\\uDDEF\\uD83C\\uDDEA|\\uD83C\\uDDEE\\uD83C\\uDDF9|\\uD83C\\uDDEE\\uD83C\\uDDF8|\\uD83C\\uDDEE\\uD83C\\uDDF7|\\uD83C\\uDDEE\\uD83C\\uDDF6|\\uD83C\\uDDEE\\uD83C\\uDDF4|\\uD83C\\uDDEE\\uD83C\\uDDF3|\\uD83C\\uDDEE\\uD83C\\uDDF2|\\uD83C\\uDDEE\\uD83C\\uDDF1|\\uD83C\\uDDEE\\uD83C\\uDDEA|\\uD83C\\uDDEE\\uD83C\\uDDE9|\\uD83C\\uDDEE\\uD83C\\uDDE8|\\uD83C\\uDDED\\uD83C\\uDDFA|\\uD83C\\uDDED\\uD83C\\uDDF9|\\uD83C\\uDDED\\uD83C\\uDDF7|\\uD83C\\uDDED\\uD83C\\uDDF3|\\uD83C\\uDDED\\uD83C\\uDDF2|\\uD83C\\uDDED\\uD83C\\uDDF0|\\uD83C\\uDDEC\\uD83C\\uDDFE|\\uD83C\\uDDEC\\uD83C\\uDDFC|\\uD83C\\uDDEC\\uD83C\\uDDFA|\\uD83C\\uDDEC\\uD83C\\uDDF9|\\uD83C\\uDDEC\\uD83C\\uDDF8|\\uD83C\\uDDEC\\uD83C\\uDDF7|\\uD83C\\uDDEC\\uD83C\\uDDF6|\\uD83C\\uDDEC\\uD83C\\uDDF5|\\uD83C\\uDDEC\\uD83C\\uDDF3|\\uD83C\\uDDEC\\uD83C\\uDDF2|\\uD83C\\uDDEC\\uD83C\\uDDF1|\\uD83C\\uDDEC\\uD83C\\uDDEE|\\uD83C\\uDDEC\\uD83C\\uDDED|\\uD83C\\uDDEC\\uD83C\\uDDEC|\\uD83C\\uDDEC\\uD83C\\uDDEB|\\uD83C\\uDDEC\\uD83C\\uDDEA|\\uD83C\\uDDEC\\uD83C\\uDDE9|\\uD83C\\uDDEC\\uD83C\\uDDE7|\\uD83C\\uDDEC\\uD83C\\uDDE6|\\uD83C\\uDDEB\\uD83C\\uDDF7|\\uD83C\\uDDEB\\uD83C\\uDDF4|\\uD83C\\uDDEB\\uD83C\\uDDF2|\\uD83C\\uDDEB\\uD83C\\uDDF0|\\uD83C\\uDDEB\\uD83C\\uDDEF|\\uD83C\\uDDEB\\uD83C\\uDDEE|\\uD83C\\uDDEA\\uD83C\\uDDFA|\\uD83C\\uDDEA\\uD83C\\uDDF9|\\uD83C\\uDDEA\\uD83C\\uDDF8|\\uD83C\\uDDEA\\uD83C\\uDDF7|\\uD83C\\uDDEA\\uD83C\\uDDED|\\uD83C\\uDDEA\\uD83C\\uDDEC|\\uD83C\\uDDEA\\uD83C\\uDDEA|\\uD83C\\uDDEA\\uD83C\\uDDE8|\\uD83C\\uDDEA\\uD83C\\uDDE6|\\uD83C\\uDDE9\\uD83C\\uDDFF|\\uD83C\\uDDE9\\uD83C\\uDDF4|\\uD83C\\uDDE9\\uD83C\\uDDF2|\\uD83C\\uDDE9\\uD83C\\uDDF0|\\uD83C\\uDDE9\\uD83C\\uDDEF|\\uD83C\\uDDE9\\uD83C\\uDDEC|\\uD83C\\uDDE9\\uD83C\\uDDEA|\\uD83C\\uDDE8\\uD83C\\uDDFF|\\uD83C\\uDDE8\\uD83C\\uDDFE|\\uD83C\\uDDE8\\uD83C\\uDDFD|\\uD83C\\uDDE8\\uD83C\\uDDFC|\\uD83C\\uDDE8\\uD83C\\uDDFB|\\uD83C\\uDDE8\\uD83C\\uDDFA|\\uD83C\\uDDE8\\uD83C\\uDDF7|\\uD83C\\uDDE8\\uD83C\\uDDF5|\\uD83C\\uDDE8\\uD83C\\uDDF4|\\uD83C\\uDDE8\\uD83C\\uDDF3|\\uD83C\\uDDE8\\uD83C\\uDDF2|\\uD83C\\uDDE8\\uD83C\\uDDF1|\\uD83C\\uDDE8\\uD83C\\uDDF0|\\uD83C\\uDDE8\\uD83C\\uDDEE|\\uD83C\\uDDE8\\uD83C\\uDDED|\\uD83C\\uDDE8\\uD83C\\uDDEC|\\uD83C\\uDDE8\\uD83C\\uDDEB|\\uD83C\\uDDE8\\uD83C\\uDDE9|\\uD83C\\uDDE8\\uD83C\\uDDE8|\\uD83C\\uDDE8\\uD83C\\uDDE6|\\uD83C\\uDDE7\\uD83C\\uDDFF|\\uD83C\\uDDE7\\uD83C\\uDDFE|\\uD83C\\uDDE7\\uD83C\\uDDFC|\\uD83C\\uDDE7\\uD83C\\uDDFB|\\uD83C\\uDDE7\\uD83C\\uDDF9|\\uD83C\\uDDE7\\uD83C\\uDDF8|\\uD83C\\uDDE7\\uD83C\\uDDF7|\\uD83C\\uDDE7\\uD83C\\uDDF6|\\uD83C\\uDDE7\\uD83C\\uDDF4|\\uD83C\\uDDE7\\uD83C\\uDDF3|\\uD83C\\uDDE7\\uD83C\\uDDF2|\\uD83C\\uDDE7\\uD83C\\uDDF1|\\uD83C\\uDDE7\\uD83C\\uDDEF|\\uD83C\\uDDE7\\uD83C\\uDDEE|\\uD83C\\uDDE7\\uD83C\\uDDED|\\uD83C\\uDDE7\\uD83C\\uDDEC|\\uD83C\\uDDE7\\uD83C\\uDDEB|\\uD83C\\uDDE7\\uD83C\\uDDEA|\\uD83C\\uDDE7\\uD83C\\uDDE9|\\uD83C\\uDDE7\\uD83C\\uDDE7|\\uD83C\\uDDE7\\uD83C\\uDDE6|\\uD83C\\uDDE6\\uD83C\\uDDFF|\\uD83C\\uDDE6\\uD83C\\uDDFD|\\uD83C\\uDDE6\\uD83C\\uDDFC|\\uD83C\\uDDE6\\uD83C\\uDDFA|\\uD83C\\uDDE6\\uD83C\\uDDF9|\\uD83C\\uDDF9\\uD83C\\uDDFC|\\uD83D\\uDDA5\\uFE0F|\\u261D\\uD83C\\uDFFE|\\u261D\\uD83C\\uDFFD|\\u261D\\uD83C\\uDFFC|\\u261D\\uD83C\\uDFFB|\\uD83D\\uDDB1\\uFE0F|\\uD83C\\uDF26\\uFE0F|\\uD83C\\uDF25\\uFE0F|\\uD83C\\uDF24\\uFE0F|\\uD83D\\uDEF3\\uFE0F|\\uD83D\\uDEE9\\uFE0F|\\uD83C\\uDC04\\uFE0F|\\uD83C\\uDD7F\\uFE0F|\\uD83C\\uDE02\\uFE0F|\\uD83C\\uDE1A\\uFE0F|\\uD83C\\uDE2F\\uFE0F|\\uD83C\\uDE37\\uFE0F|\\uD83C\\uDF9E\\uFE0F|\\uD83C\\uDF9F\\uFE0F|\\uD83C\\uDFCB\\uFE0F|\\uD83C\\uDFCC\\uFE0F|\\uD83C\\uDFCD\\uFE0F|\\uD83C\\uDFCE\\uFE0F|\\uD83C\\uDF96\\uFE0F|\\uD83C\\uDF97\\uFE0F|\\uD83C\\uDF36\\uFE0F|\\uD83C\\uDF27\\uFE0F|\\uD83C\\uDF28\\uFE0F|\\uD83C\\uDF29\\uFE0F|\\uD83C\\uDF2A\\uFE0F|\\uD83C\\uDF2B\\uFE0F|\\uD83C\\uDF2C\\uFE0F|\\uD83D\\uDC3F\\uFE0F|\\uD83D\\uDD77\\uFE0F|\\uD83D\\uDD78\\uFE0F|\\uD83C\\uDF21\\uFE0F|\\uD83C\\uDF99\\uFE0F|\\uD83C\\uDF9A\\uFE0F|\\uD83C\\uDF9B\\uFE0F|\\uD83C\\uDFF3\\uFE0F|\\uD83C\\uDFF5\\uFE0F|\\uD83C\\uDFF7\\uFE0F|\\uD83D\\uDCFD\\uFE0F|\\uD83D\\uDD49\\uFE0F|\\uD83D\\uDD4A\\uFE0F|\\uD83D\\uDD6F\\uFE0F|\\uD83D\\uDD70\\uFE0F|\\uD83D\\uDD73\\uFE0F|\\uD83D\\uDD76\\uFE0F|\\uD83D\\uDD79\\uFE0F|\\uD83D\\uDD87\\uFE0F|\\uD83D\\uDD8A\\uFE0F|\\uD83D\\uDD8B\\uFE0F|\\uD83D\\uDD8C\\uFE0F|\\uD83D\\uDD8D\\uFE0F|\\uD83D\\uDEE5\\uFE0F|\\uD83D\\uDDA8\\uFE0F|\\uD83D\\uDDB2\\uFE0F|\\uD83D\\uDDBC\\uFE0F|\\uD83D\\uDDC2\\uFE0F|\\uD83D\\uDDC3\\uFE0F|\\uD83D\\uDDC4\\uFE0F|\\uD83D\\uDDD1\\uFE0F|\\uD83D\\uDDD2\\uFE0F|\\uD83D\\uDDD3\\uFE0F|\\uD83D\\uDDDC\\uFE0F|\\uD83D\\uDDDD\\uFE0F|\\uD83D\\uDDDE\\uFE0F|\\uD83D\\uDDE1\\uFE0F|\\uD83D\\uDDE3\\uFE0F|\\uD83D\\uDDEF\\uFE0F|\\uD83D\\uDDF3\\uFE0F|\\uD83D\\uDDFA\\uFE0F|\\uD83D\\uDEE0\\uFE0F|\\uD83D\\uDEE1\\uFE0F|\\uD83D\\uDEE2\\uFE0F|\\uD83D\\uDEF0\\uFE0F|\\uD83C\\uDF7D\\uFE0F|\\uD83D\\uDC41\\uFE0F|\\uD83D\\uDD74\\uFE0F|\\uD83D\\uDD75\\uFE0F|\\uD83D\\uDD90\\uFE0F|\\uD83C\\uDFD4\\uFE0F|\\uD83C\\uDFD5\\uFE0F|\\uD83C\\uDFD6\\uFE0F|\\uD83C\\uDFD7\\uFE0F|\\uD83C\\uDFD8\\uFE0F|\\uD83C\\uDFD9\\uFE0F|\\uD83C\\uDFDA\\uFE0F|\\uD83C\\uDFDB\\uFE0F|\\uD83C\\uDFDC\\uFE0F|\\uD83C\\uDFDD\\uFE0F|\\uD83C\\uDFDE\\uFE0F|\\uD83C\\uDFDF\\uFE0F|\\uD83D\\uDECB\\uFE0F|\\uD83D\\uDECD\\uFE0F|\\uD83D\\uDECE\\uFE0F|\\uD83D\\uDECF\\uFE0F|\\uD83D\\uDEE3\\uFE0F|\\uD83D\\uDEE4\\uFE0F|4\\uFE0F\\u20E3|9\\uFE0F\\u20E3|0\\uFE0F\\u20E3|1\\uFE0F\\u20E3|2\\uFE0F\\u20E3|3\\uFE0F\\u20E3|#\\uFE0F\\u20E3|5\\uFE0F\\u20E3|6\\uFE0F\\u20E3|7\\uFE0F\\u20E3|8\\uFE0F\\u20E3|\\*\\uFE0F\\u20E3|\\u00A9\\uFE0F|\\u00AE\\uFE0F|\\u203C\\uFE0F|\\u2049\\uFE0F|\\u2122\\uFE0F|\\u2139\\uFE0F|\\u2194\\uFE0F|\\u2195\\uFE0F|\\u2196\\uFE0F|\\u2197\\uFE0F|\\u2198\\uFE0F|\\u2199\\uFE0F|\\u21A9\\uFE0F|\\u21AA\\uFE0F|\\u231A\\uFE0F|\\u231B\\uFE0F|\\u24C2\\uFE0F|\\u25AA\\uFE0F|\\u25AB\\uFE0F|\\u25B6\\uFE0F|\\u25C0\\uFE0F|\\u25FB\\uFE0F|\\u25FC\\uFE0F|\\u25FD\\uFE0F|\\u25FE\\uFE0F|\\u2600\\uFE0F|\\u2601\\uFE0F|\\u260E\\uFE0F|\\u2611\\uFE0F|\\u2614\\uFE0F|\\u2615\\uFE0F|\\u261D\\uFE0F|\\u263A\\uFE0F|\\u2648\\uFE0F|\\u2649\\uFE0F|\\u264A\\uFE0F|\\u264B\\uFE0F|\\u264C\\uFE0F|\\u264D\\uFE0F|\\u264E\\uFE0F|\\u264F\\uFE0F|\\u2650\\uFE0F|\\u2651\\uFE0F|\\u2652\\uFE0F|\\u2653\\uFE0F|\\u2660\\uFE0F|\\u2663\\uFE0F|\\u2665\\uFE0F|\\u2666\\uFE0F|\\u2668\\uFE0F|\\u267B\\uFE0F|\\u267F\\uFE0F|\\u2693\\uFE0F|\\u26A0\\uFE0F|\\u26A1\\uFE0F|\\u26AA\\uFE0F|\\u26AB\\uFE0F|\\u26BD\\uFE0F|\\u26BE\\uFE0F|\\u26C4\\uFE0F|\\u26C5\\uFE0F|\\u26D4\\uFE0F|\\u26EA\\uFE0F|\\u26F2\\uFE0F|\\u26F3\\uFE0F|\\u26F5\\uFE0F|\\u26FA\\uFE0F|\\u26FD\\uFE0F|\\u2702\\uFE0F|\\u2708\\uFE0F|\\u2709\\uFE0F|\\u270C\\uFE0F|\\u270F\\uFE0F|\\u2712\\uFE0F|\\u2714\\uFE0F|\\u2716\\uFE0F|\\u2733\\uFE0F|\\u2734\\uFE0F|\\u2744\\uFE0F|\\u2747\\uFE0F|\\u2757\\uFE0F|\\u2764\\uFE0F|\\u27A1\\uFE0F|\\u2934\\uFE0F|\\u2935\\uFE0F|\\u2B05\\uFE0F|\\u2B06\\uFE0F|\\u2B07\\uFE0F|\\u2B1B\\uFE0F|\\u2B1C\\uFE0F|\\u2B50\\uFE0F|\\u2B55\\uFE0F|\\u3030\\uFE0F|\\u303D\\uFE0F|\\u3297\\uFE0F|\\u3299\\uFE0F|\\u271D\\uFE0F|\\u2328\\uFE0F|\\u270D\\uFE0F|\\u23ED\\uFE0F|\\u23EE\\uFE0F|\\u23EF\\uFE0F|\\u23F1\\uFE0F|\\u23F2\\uFE0F|\\u23F8\\uFE0F|\\u23F9\\uFE0F|\\u23FA\\uFE0F|\\u2602\\uFE0F|\\u2603\\uFE0F|\\u2604\\uFE0F|\\u2618\\uFE0F|\\u2620\\uFE0F|\\u2622\\uFE0F|\\u2623\\uFE0F|\\u2626\\uFE0F|\\u262A\\uFE0F|\\u262E\\uFE0F|\\u262F\\uFE0F|\\u2638\\uFE0F|\\u2639\\uFE0F|\\u2692\\uFE0F|\\u2694\\uFE0F|\\u2696\\uFE0F|\\u2697\\uFE0F|\\u2699\\uFE0F|\\u269B\\uFE0F|\\u269C\\uFE0F|\\u26B0\\uFE0F|\\u26B1\\uFE0F|\\u26C8\\uFE0F|\\u26CF\\uFE0F|\\u26D1\\uFE0F|\\u26D3\\uFE0F|\\u26E9\\uFE0F|\\u26F0\\uFE0F|\\u26F1\\uFE0F|\\u26F4\\uFE0F|\\u26F7\\uFE0F|\\u26F8\\uFE0F|\\u26F9\\uFE0F|\\u2721\\uFE0F|\\u2763\\uFE0F|\\uD83C\\uDCCF|\\uD83C\\uDD70|\\uD83C\\uDD71|\\uD83C\\uDD7E|\\uD83C\\uDD8E|\\uD83C\\uDD91|\\uD83C\\uDD92|\\uD83C\\uDD93|\\uD83C\\uDD94|\\uD83C\\uDD95|\\uD83C\\uDD96|\\uD83C\\uDD97|\\uD83C\\uDD98|\\uD83C\\uDD99|\\uD83C\\uDD9A|\\uD83C\\uDE01|\\uD83C\\uDE32|\\uD83C\\uDE33|\\uD83C\\uDE34|\\uD83C\\uDE35|\\uD83C\\uDE36|\\uD83C\\uDE38|\\uD83C\\uDE39|\\uD83C\\uDE3A|\\uD83D\\uDDB1|\\uD83C\\uDE51|\\uD83C\\uDF00|\\uD83C\\uDF01|\\uD83C\\uDF02|\\uD83C\\uDF03|\\uD83C\\uDF04|\\uD83C\\uDF05|\\uD83C\\uDF06|\\uD83C\\uDF07|\\uD83C\\uDF08|\\uD83C\\uDF09|\\uD83C\\uDF0A|\\uD83C\\uDF0B|\\uD83C\\uDF0C|\\uD83C\\uDF0F|\\uD83C\\uDF11|\\uD83C\\uDF13|\\uD83C\\uDF14|\\uD83C\\uDF15|\\uD83C\\uDF19|\\uD83C\\uDF1B|\\uD83C\\uDF1F|\\uD83C\\uDF20|\\uD83C\\uDF30|\\uD83C\\uDF31|\\uD83C\\uDF34|\\uD83C\\uDF35|\\uD83C\\uDF37|\\uD83C\\uDF38|\\uD83C\\uDF39|\\uD83C\\uDF3A|\\uD83C\\uDF3B|\\uD83C\\uDF3C|\\uD83C\\uDF3D|\\uD83C\\uDF3E|\\uD83C\\uDF3F|\\uD83C\\uDF40|\\uD83C\\uDF41|\\uD83C\\uDF42|\\uD83C\\uDF43|\\uD83C\\uDF44|\\uD83C\\uDF45|\\uD83C\\uDF46|\\uD83C\\uDF47|\\uD83C\\uDF48|\\uD83C\\uDF49|\\uD83C\\uDF4A|\\uD83C\\uDF4C|\\uD83C\\uDF4D|\\uD83C\\uDF4E|\\uD83C\\uDF4F|\\uD83C\\uDF51|\\uD83C\\uDF52|\\uD83C\\uDF53|\\uD83C\\uDF54|\\uD83C\\uDF55|\\uD83C\\uDF56|\\uD83C\\uDF57|\\uD83C\\uDF58|\\uD83C\\uDF59|\\uD83C\\uDF5A|\\uD83C\\uDF5B|\\uD83C\\uDF5C|\\uD83C\\uDF5D|\\uD83C\\uDF5E|\\uD83C\\uDF5F|\\uD83C\\uDF60|\\uD83C\\uDF61|\\uD83C\\uDF62|\\uD83C\\uDF63|\\uD83C\\uDF64|\\uD83C\\uDF65|\\uD83C\\uDF66|\\uD83C\\uDF67|\\uD83C\\uDF68|\\uD83C\\uDF69|\\uD83C\\uDF6A|\\uD83C\\uDF6B|\\uD83C\\uDF6C|\\uD83C\\uDF6D|\\uD83C\\uDF6E|\\uD83C\\uDF6F|\\uD83C\\uDF70|\\uD83C\\uDF71|\\uD83C\\uDF72|\\uD83C\\uDF73|\\uD83C\\uDF74|\\uD83C\\uDF75|\\uD83C\\uDF76|\\uD83C\\uDF77|\\uD83C\\uDF78|\\uD83C\\uDF79|\\uD83C\\uDF7A|\\uD83C\\uDF7B|\\uD83C\\uDF80|\\uD83C\\uDF81|\\uD83C\\uDF82|\\uD83C\\uDF83|\\uD83C\\uDF84|\\uD83C\\uDF85|\\uD83C\\uDF86|\\uD83C\\uDF87|\\uD83C\\uDF88|\\uD83C\\uDF89|\\uD83C\\uDF8A|\\uD83C\\uDF8B|\\uD83C\\uDF8C|\\uD83C\\uDF8D|\\uD83C\\uDF8E|\\uD83C\\uDF8F|\\uD83C\\uDF90|\\uD83C\\uDF91|\\uD83C\\uDF92|\\uD83C\\uDF93|\\uD83C\\uDFA0|\\uD83C\\uDFA1|\\uD83C\\uDFA2|\\uD83C\\uDFA3|\\uD83C\\uDFA4|\\uD83C\\uDFA5|\\uD83C\\uDFA6|\\uD83C\\uDFA7|\\uD83C\\uDFA8|\\uD83C\\uDFA9|\\uD83C\\uDFAA|\\uD83C\\uDFAB|\\uD83C\\uDFAC|\\uD83C\\uDFAD|\\uD83C\\uDFAE|\\uD83C\\uDFAF|\\uD83C\\uDFB0|\\uD83C\\uDFB1|\\uD83C\\uDFB2|\\uD83C\\uDFB3|\\uD83C\\uDFB4|\\uD83C\\uDFB5|\\uD83C\\uDFB6|\\uD83C\\uDFB7|\\uD83C\\uDFB8|\\uD83C\\uDFB9|\\uD83C\\uDFBA|\\uD83C\\uDFBB|\\uD83C\\uDFBC|\\uD83C\\uDFBD|\\uD83C\\uDFBE|\\uD83C\\uDFBF|\\uD83C\\uDFC0|\\uD83C\\uDFC1|\\uD83C\\uDFC2|\\uD83C\\uDFC3|\\uD83C\\uDFC4|\\uD83C\\uDFC6|\\uD83C\\uDFC8|\\uD83C\\uDFCA|\\uD83C\\uDFE0|\\uD83C\\uDFE1|\\uD83C\\uDFE2|\\uD83C\\uDFE3|\\uD83C\\uDFE5|\\uD83C\\uDFE6|\\uD83C\\uDFE7|\\uD83C\\uDFE8|\\uD83C\\uDFE9|\\uD83C\\uDFEA|\\uD83C\\uDFEB|\\uD83C\\uDFEC|\\uD83C\\uDFED|\\uD83C\\uDFEE|\\uD83C\\uDFEF|\\uD83C\\uDFF0|\\uD83D\\uDC0C|\\uD83D\\uDC0D|\\uD83D\\uDC0E|\\uD83D\\uDC11|\\uD83D\\uDC12|\\uD83D\\uDC14|\\uD83D\\uDC17|\\uD83D\\uDC18|\\uD83D\\uDC19|\\uD83D\\uDC1A|\\uD83D\\uDC1B|\\uD83D\\uDC1C|\\uD83D\\uDC1D|\\uD83D\\uDC1E|\\uD83D\\uDC1F|\\uD83D\\uDC20|\\uD83D\\uDC21|\\uD83D\\uDC22|\\uD83D\\uDC23|\\uD83D\\uDC24|\\uD83D\\uDC25|\\uD83D\\uDC26|\\uD83D\\uDC27|\\uD83D\\uDC28|\\uD83D\\uDC29|\\uD83D\\uDC2B|\\uD83D\\uDC2C|\\uD83D\\uDC2D|\\uD83D\\uDC2E|\\uD83D\\uDC2F|\\uD83D\\uDC30|\\uD83D\\uDC31|\\uD83D\\uDC32|\\uD83D\\uDC33|\\uD83D\\uDC34|\\uD83D\\uDC35|\\uD83D\\uDC36|\\uD83D\\uDC37|\\uD83D\\uDC38|\\uD83D\\uDC39|\\uD83D\\uDC3A|\\uD83D\\uDC3B|\\uD83D\\uDC3C|\\uD83D\\uDC3D|\\uD83D\\uDC3E|\\uD83D\\uDC40|\\uD83D\\uDC42|\\uD83D\\uDC43|\\uD83D\\uDC44|\\uD83D\\uDC45|\\uD83D\\uDC46|\\uD83D\\uDC47|\\uD83D\\uDC48|\\uD83D\\uDC49|\\uD83D\\uDC4A|\\uD83D\\uDC4B|\\uD83D\\uDC4C|\\uD83D\\uDC4D|\\uD83D\\uDC4E|\\uD83D\\uDC4F|\\uD83D\\uDC50|\\uD83D\\uDC51|\\uD83D\\uDC52|\\uD83D\\uDC53|\\uD83D\\uDC54|\\uD83D\\uDC55|\\uD83D\\uDC56|\\uD83D\\uDC57|\\uD83D\\uDC58|\\uD83D\\uDC59|\\uD83D\\uDC5A|\\uD83D\\uDC5B|\\uD83D\\uDC5C|\\uD83D\\uDC5D|\\uD83D\\uDC5E|\\uD83D\\uDC5F|\\uD83D\\uDC60|\\uD83D\\uDC61|\\uD83D\\uDC62|\\uD83D\\uDC63|\\uD83D\\uDC64|\\uD83D\\uDC66|\\uD83D\\uDC67|\\uD83D\\uDC68|\\uD83D\\uDC69|\\uD83D\\uDC6A|\\uD83D\\uDC6B|\\uD83D\\uDC6E|\\uD83D\\uDC6F|\\uD83D\\uDC70|\\uD83D\\uDC71|\\uD83D\\uDC72|\\uD83D\\uDC73|\\uD83D\\uDC74|\\uD83D\\uDC75|\\uD83D\\uDC76|\\uD83D\\uDC77|\\uD83D\\uDC78|\\uD83D\\uDC79|\\uD83D\\uDC7A|\\uD83D\\uDC7B|\\uD83D\\uDC7C|\\uD83D\\uDC7D|\\uD83D\\uDC7E|\\uD83D\\uDC7F|\\uD83D\\uDC80|\\uD83D\\uDCC7|\\uD83D\\uDC81|\\uD83D\\uDC82|\\uD83D\\uDC83|\\uD83D\\uDC84|\\uD83D\\uDC85|\\uD83D\\uDCD2|\\uD83D\\uDC86|\\uD83D\\uDCD3|\\uD83D\\uDC87|\\uD83D\\uDCD4|\\uD83D\\uDC88|\\uD83D\\uDCD5|\\uD83D\\uDC89|\\uD83D\\uDCD6|\\uD83D\\uDC8A|\\uD83D\\uDCD7|\\uD83D\\uDC8B|\\uD83D\\uDCD8|\\uD83D\\uDC8C|\\uD83D\\uDCD9|\\uD83D\\uDC8D|\\uD83D\\uDCDA|\\uD83D\\uDC8E|\\uD83D\\uDCDB|\\uD83D\\uDC8F|\\uD83D\\uDCDC|\\uD83D\\uDC90|\\uD83D\\uDCDD|\\uD83D\\uDC91|\\uD83D\\uDCDE|\\uD83D\\uDC92|\\uD83D\\uDCDF|\\uD83D\\uDCE0|\\uD83D\\uDC93|\\uD83D\\uDCE1|\\uD83D\\uDCE2|\\uD83D\\uDC94|\\uD83D\\uDCE3|\\uD83D\\uDCE4|\\uD83D\\uDC95|\\uD83D\\uDCE5|\\uD83D\\uDCE6|\\uD83D\\uDC96|\\uD83D\\uDCE7|\\uD83D\\uDCE8|\\uD83D\\uDC97|\\uD83D\\uDCE9|\\uD83D\\uDCEA|\\uD83D\\uDC98|\\uD83D\\uDCEB|\\uD83D\\uDCEE|\\uD83D\\uDC99|\\uD83D\\uDCF0|\\uD83D\\uDCF1|\\uD83D\\uDC9A|\\uD83D\\uDCF2|\\uD83D\\uDCF3|\\uD83D\\uDC9B|\\uD83D\\uDCF4|\\uD83D\\uDCF6|\\uD83D\\uDC9C|\\uD83D\\uDCF7|\\uD83D\\uDCF9|\\uD83D\\uDC9D|\\uD83D\\uDCFA|\\uD83D\\uDCFB|\\uD83D\\uDC9E|\\uD83D\\uDCFC|\\uD83D\\uDD03|\\uD83D\\uDC9F|\\uD83D\\uDD0A|\\uD83D\\uDD0B|\\uD83D\\uDCA0|\\uD83D\\uDD0C|\\uD83D\\uDD0D|\\uD83D\\uDCA1|\\uD83D\\uDD0E|\\uD83D\\uDD0F|\\uD83D\\uDCA2|\\uD83D\\uDD10|\\uD83D\\uDD11|\\uD83D\\uDCA3|\\uD83D\\uDD12|\\uD83D\\uDD13|\\uD83D\\uDCA4|\\uD83D\\uDD14|\\uD83D\\uDD16|\\uD83D\\uDCA5|\\uD83D\\uDD17|\\uD83D\\uDD18|\\uD83D\\uDCA6|\\uD83D\\uDD19|\\uD83D\\uDD1A|\\uD83D\\uDCA7|\\uD83D\\uDD1B|\\uD83D\\uDD1C|\\uD83D\\uDCA8|\\uD83D\\uDD1D|\\uD83D\\uDD1E|\\uD83D\\uDCA9|\\uD83D\\uDD1F|\\uD83D\\uDCAA|\\uD83D\\uDD20|\\uD83D\\uDD21|\\uD83D\\uDCAB|\\uD83D\\uDD22|\\uD83D\\uDD23|\\uD83D\\uDCAC|\\uD83D\\uDD24|\\uD83D\\uDD25|\\uD83D\\uDCAE|\\uD83D\\uDD26|\\uD83D\\uDD27|\\uD83D\\uDCAF|\\uD83D\\uDD28|\\uD83D\\uDD29|\\uD83D\\uDCB0|\\uD83D\\uDD2A|\\uD83D\\uDD2B|\\uD83D\\uDCB1|\\uD83D\\uDD2E|\\uD83D\\uDCB2|\\uD83D\\uDD2F|\\uD83D\\uDCB3|\\uD83D\\uDD30|\\uD83D\\uDD31|\\uD83D\\uDCB4|\\uD83D\\uDD32|\\uD83D\\uDD33|\\uD83D\\uDCB5|\\uD83D\\uDD34|\\uD83D\\uDD35|\\uD83D\\uDCB8|\\uD83D\\uDD36|\\uD83D\\uDD37|\\uD83D\\uDCB9|\\uD83D\\uDD38|\\uD83D\\uDD39|\\uD83D\\uDCBA|\\uD83D\\uDD3A|\\uD83D\\uDD3B|\\uD83D\\uDCBB|\\uD83D\\uDD3C|\\uD83D\\uDCBC|\\uD83D\\uDD3D|\\uD83D\\uDD50|\\uD83D\\uDCBD|\\uD83D\\uDD51|\\uD83D\\uDCBE|\\uD83D\\uDD52|\\uD83D\\uDCBF|\\uD83D\\uDD53|\\uD83D\\uDCC0|\\uD83D\\uDD54|\\uD83D\\uDD55|\\uD83D\\uDCC1|\\uD83D\\uDD56|\\uD83D\\uDD57|\\uD83D\\uDCC2|\\uD83D\\uDD58|\\uD83D\\uDD59|\\uD83D\\uDCC3|\\uD83D\\uDD5A|\\uD83D\\uDD5B|\\uD83D\\uDCC4|\\uD83D\\uDDFB|\\uD83D\\uDDFC|\\uD83D\\uDCC5|\\uD83D\\uDDFD|\\uD83D\\uDDFE|\\uD83D\\uDCC6|\\uD83D\\uDDFF|\\uD83D\\uDE01|\\uD83D\\uDE02|\\uD83D\\uDE03|\\uD83D\\uDCC8|\\uD83D\\uDE04|\\uD83D\\uDE05|\\uD83D\\uDCC9|\\uD83D\\uDE06|\\uD83D\\uDE09|\\uD83D\\uDCCA|\\uD83D\\uDE0A|\\uD83D\\uDE0B|\\uD83D\\uDCCB|\\uD83D\\uDE0C|\\uD83D\\uDE0D|\\uD83D\\uDCCC|\\uD83D\\uDE0F|\\uD83D\\uDE12|\\uD83D\\uDCCD|\\uD83D\\uDE13|\\uD83D\\uDE14|\\uD83D\\uDCCE|\\uD83D\\uDE16|\\uD83D\\uDE18|\\uD83D\\uDCCF|\\uD83D\\uDE1A|\\uD83D\\uDE1C|\\uD83D\\uDCD0|\\uD83D\\uDE1D|\\uD83D\\uDE1E|\\uD83D\\uDCD1|\\uD83D\\uDE20|\\uD83D\\uDE21|\\uD83D\\uDE22|\\uD83D\\uDE23|\\uD83D\\uDE24|\\uD83D\\uDE25|\\uD83D\\uDE28|\\uD83D\\uDE29|\\uD83D\\uDE2A|\\uD83D\\uDE2B|\\uD83D\\uDE2D|\\uD83D\\uDE30|\\uD83D\\uDE31|\\uD83D\\uDE32|\\uD83D\\uDE33|\\uD83D\\uDE35|\\uD83D\\uDE37|\\uD83D\\uDE38|\\uD83D\\uDE39|\\uD83D\\uDE3A|\\uD83D\\uDE3B|\\uD83D\\uDE3C|\\uD83D\\uDE3D|\\uD83D\\uDE3E|\\uD83D\\uDE3F|\\uD83D\\uDE40|\\uD83D\\uDE45|\\uD83D\\uDE46|\\uD83D\\uDE47|\\uD83D\\uDE48|\\uD83D\\uDE49|\\uD83D\\uDE4A|\\uD83D\\uDE4B|\\uD83D\\uDE4C|\\uD83D\\uDE4D|\\uD83D\\uDE4E|\\uD83D\\uDE4F|\\uD83D\\uDE80|\\uD83D\\uDE83|\\uD83D\\uDE84|\\uD83D\\uDE85|\\uD83D\\uDE87|\\uD83D\\uDE89|\\uD83D\\uDE8C|\\uD83D\\uDE8F|\\uD83D\\uDE91|\\uD83D\\uDE92|\\uD83D\\uDE93|\\uD83D\\uDE95|\\uD83D\\uDE97|\\uD83D\\uDE99|\\uD83D\\uDE9A|\\uD83D\\uDEA2|\\uD83D\\uDEA4|\\uD83D\\uDEA5|\\uD83D\\uDEA7|\\uD83D\\uDEA8|\\uD83D\\uDEA9|\\uD83D\\uDEAA|\\uD83D\\uDEAB|\\uD83D\\uDEAC|\\uD83D\\uDEAD|\\uD83D\\uDEB2|\\uD83D\\uDEB6|\\uD83D\\uDEB9|\\uD83D\\uDEBA|\\uD83D\\uDEBB|\\uD83D\\uDEBC|\\uD83D\\uDEBD|\\uD83D\\uDEBE|\\uD83D\\uDEC0|\\uD83E\\uDD18|\\uD83D\\uDE00|\\uD83D\\uDE07|\\uD83D\\uDE08|\\uD83D\\uDE0E|\\uD83D\\uDE10|\\uD83D\\uDE11|\\uD83D\\uDE15|\\uD83D\\uDE17|\\uD83D\\uDE19|\\uD83D\\uDE1B|\\uD83D\\uDE1F|\\uD83D\\uDE26|\\uD83D\\uDE27|\\uD83D\\uDE2C|\\uD83D\\uDE2E|\\uD83D\\uDE2F|\\uD83D\\uDE34|\\uD83D\\uDE36|\\uD83D\\uDE81|\\uD83D\\uDE82|\\uD83D\\uDE86|\\uD83D\\uDE88|\\uD83D\\uDE8A|\\uD83D\\uDE8D|\\uD83D\\uDE8E|\\uD83D\\uDE90|\\uD83D\\uDE94|\\uD83D\\uDE96|\\uD83D\\uDE98|\\uD83D\\uDE9B|\\uD83D\\uDE9C|\\uD83D\\uDE9D|\\uD83D\\uDE9E|\\uD83D\\uDE9F|\\uD83D\\uDEA0|\\uD83D\\uDEA1|\\uD83D\\uDEA3|\\uD83D\\uDEA6|\\uD83D\\uDEAE|\\uD83D\\uDEAF|\\uD83D\\uDEB0|\\uD83D\\uDEB1|\\uD83D\\uDEB3|\\uD83D\\uDEB4|\\uD83D\\uDEB5|\\uD83D\\uDEB7|\\uD83D\\uDEB8|\\uD83D\\uDEBF|\\uD83D\\uDEC1|\\uD83D\\uDEC2|\\uD83D\\uDEC3|\\uD83D\\uDEC4|\\uD83D\\uDEC5|\\uD83C\\uDF0D|\\uD83C\\uDF0E|\\uD83C\\uDF10|\\uD83C\\uDF12|\\uD83C\\uDF16|\\uD83C\\uDF17|\\uD83C\\uDF18|\\uD83C\\uDF1A|\\uD83C\\uDF1C|\\uD83C\\uDF1D|\\uD83C\\uDF1E|\\uD83C\\uDF32|\\uD83C\\uDF33|\\uD83C\\uDF4B|\\uD83C\\uDF50|\\uD83C\\uDF7C|\\uD83C\\uDFC7|\\uD83C\\uDFC9|\\uD83C\\uDFE4|\\uD83D\\uDC00|\\uD83D\\uDC01|\\uD83D\\uDC02|\\uD83D\\uDC03|\\uD83D\\uDC04|\\uD83D\\uDC05|\\uD83D\\uDC06|\\uD83D\\uDC07|\\uD83D\\uDC08|\\uD83D\\uDC09|\\uD83D\\uDC0A|\\uD83D\\uDC0B|\\uD83D\\uDC0F|\\uD83D\\uDC10|\\uD83D\\uDC13|\\uD83D\\uDC15|\\uD83D\\uDC16|\\uD83D\\uDC2A|\\uD83D\\uDC65|\\uD83D\\uDC6C|\\uD83D\\uDC6D|\\uD83D\\uDCAD|\\uD83D\\uDCB6|\\uD83D\\uDCB7|\\uD83D\\uDCEC|\\uD83D\\uDCED|\\uD83D\\uDCEF|\\uD83D\\uDCF5|\\uD83D\\uDD00|\\uD83D\\uDD01|\\uD83D\\uDD02|\\uD83D\\uDD04|\\uD83D\\uDD05|\\uD83D\\uDD06|\\uD83D\\uDD07|\\uD83D\\uDD09|\\uD83D\\uDD15|\\uD83D\\uDD2C|\\uD83D\\uDD2D|\\uD83D\\uDD5C|\\uD83D\\uDD5D|\\uD83D\\uDD5E|\\uD83D\\uDD5F|\\uD83D\\uDD60|\\uD83D\\uDD61|\\uD83D\\uDD62|\\uD83D\\uDD63|\\uD83D\\uDD64|\\uD83D\\uDD65|\\uD83D\\uDD66|\\uD83D\\uDD67|\\uD83D\\uDD08|\\uD83D\\uDE8B|\\uD83C\\uDFC5|\\uD83C\\uDFF4|\\uD83D\\uDCF8|\\uD83D\\uDECC|\\uD83D\\uDD95|\\uD83D\\uDD96|\\uD83D\\uDE41|\\uD83D\\uDE42|\\uD83D\\uDEEB|\\uD83D\\uDEEC|\\uD83C\\uDFFB|\\uD83C\\uDFFC|\\uD83C\\uDFFD|\\uD83C\\uDFFE|\\uD83C\\uDFFF|\\uD83D\\uDE43|\\uD83E\\uDD11|\\uD83E\\uDD13|\\uD83E\\uDD17|\\uD83D\\uDE44|\\uD83E\\uDD14|\\uD83E\\uDD10|\\uD83E\\uDD12|\\uD83E\\uDD15|\\uD83E\\uDD16|\\uD83E\\uDD81|\\uD83E\\uDD84|\\uD83E\\uDD82|\\uD83E\\uDD80|\\uD83E\\uDD83|\\uD83E\\uDDC0|\\uD83C\\uDF2D|\\uD83C\\uDF2E|\\uD83C\\uDF2F|\\uD83C\\uDF7F|\\uD83C\\uDF7E|\\uD83C\\uDFF9|\\uD83C\\uDFFA|\\uD83D\\uDED0|\\uD83D\\uDD4B|\\uD83D\\uDD4C|\\uD83D\\uDD4D|\\uD83D\\uDD4E|\\uD83D\\uDCFF|\\uD83C\\uDFCF|\\uD83C\\uDFD0|\\uD83C\\uDFD1|\\uD83C\\uDFD2|\\uD83C\\uDFD3|\\uD83C\\uDFF8|\\uD83C\\uDF26|\\uD83C\\uDF25|\\uD83C\\uDF24|\\uD83D\\uDEF3|\\uD83D\\uDEE9|\\uD83D\\uDEE5|\\uD83D\\uDEE4|\\uD83D\\uDEE3|\\uD83D\\uDECF|\\uD83D\\uDECE|\\uD83D\\uDECD|\\uD83D\\uDECB|\\uD83C\\uDFDF|\\uD83C\\uDFDE|\\uD83C\\uDFDD|\\uD83C\\uDFDC|\\uD83C\\uDFDB|\\uD83C\\uDFDA|\\uD83C\\uDFD9|\\uD83C\\uDFD8|\\uD83C\\uDFD7|\\uD83C\\uDFD6|\\uD83C\\uDFD5|\\uD83C\\uDFD4|\\uD83D\\uDD90|\\uD83D\\uDD75|\\uD83D\\uDD74|\\uD83D\\uDC41|\\uD83C\\uDF7D|\\uD83D\\uDEF0|\\uD83D\\uDEE2|\\uD83D\\uDEE1|\\uD83D\\uDEE0|\\uD83D\\uDDFA|\\uD83D\\uDDF3|\\uD83D\\uDDEF|\\uD83D\\uDDE3|\\uD83D\\uDDE1|\\uD83D\\uDDDE|\\uD83D\\uDDDD|\\uD83D\\uDDDC|\\uD83D\\uDDD3|\\uD83D\\uDDD2|\\uD83D\\uDDD1|\\uD83D\\uDDC4|\\uD83D\\uDDC3|\\uD83D\\uDDC2|\\uD83D\\uDDBC|\\uD83D\\uDDB2|\\uD83D\\uDDA8|\\uD83D\\uDDA5|\\uD83D\\uDD8D|\\uD83D\\uDD8C|\\uD83D\\uDD8B|\\uD83D\\uDD8A|\\uD83D\\uDD87|\\uD83D\\uDD79|\\uD83D\\uDD76|\\uD83D\\uDD73|\\uD83D\\uDD70|\\uD83D\\uDD6F|\\uD83D\\uDD4A|\\uD83D\\uDD49|\\uD83D\\uDCFD|\\uD83C\\uDFF7|\\uD83C\\uDFF5|\\uD83C\\uDFF3|\\uD83C\\uDF9B|\\uD83C\\uDF9A|\\uD83C\\uDF99|\\uD83C\\uDF21|\\uD83D\\uDD78|\\uD83D\\uDD77|\\uD83D\\uDC3F|\\uD83C\\uDF2C|\\uD83C\\uDF2B|\\uD83C\\uDF2A|\\uD83C\\uDF29|\\uD83C\\uDF28|\\uD83C\\uDF27|\\uD83C\\uDF36|\\uD83C\\uDF97|\\uD83C\\uDF96|\\uD83C\\uDFCE|\\uD83C\\uDFCD|\\uD83C\\uDFCC|\\uD83C\\uDFCB|\\uD83C\\uDF9F|\\uD83C\\uDF9E|\\uD83C\\uDE37|\\uD83C\\uDE2F|\\uD83C\\uDE1A|\\uD83C\\uDE02|\\uD83C\\uDD7F|\\uD83C\\uDC04|\\uD83C\\uDE50|\\u2714|\\u2733|\\u2734|\\u2744|\\u2747|\\u2757|\\u2764|\\u27A1|\\u2934|\\u2935|\\u2B05|\\u2B06|\\u2B07|\\u2B1B|\\u2B1C|\\u2B50|\\u2B55|\\u3030|\\u303D|\\u3297|\\u3299|\\u2712|\\u270F|\\u270C|\\u2709|\\u2708|\\u2702|\\u26FD|\\u26FA|\\u26F5|\\u26F3|\\u26F2|\\u26EA|\\u26D4|\\u26C5|\\u26C4|\\u26BE|\\u26BD|\\u26AB|\\u26AA|\\u26A1|\\u26A0|\\u2693|\\u267F|\\u267B|\\u2668|\\u2666|\\u2665|\\u2663|\\u2660|\\u2653|\\u2652|\\u2651|\\u271D|\\u2650|\\u264F|\\u264E|\\u264D|\\u264C|\\u264B|\\u264A|\\u2649|\\u2648|\\u263A|\\u261D|\\u2615|\\u2614|\\u2611|\\u2328|\\u260E|\\u2601|\\u2600|\\u25FE|\\u25FD|\\u25FC|\\u25FB|\\u25C0|\\u25B6|\\u25AB|\\u25AA|\\u24C2|\\u2716|\\u231A|\\u21AA|\\u21A9|\\u2199|\\u2198|\\u2197|\\u2196|\\u2195|\\u2194|\\u2139|\\u2122|\\u270D|\\u2049|\\u203C|\\u00AE|\\u00A9|\\u27BF|\\u27B0|\\u2797|\\u2796|\\u2795|\\u2755|\\u2754|\\u2753|\\u274E|\\u274C|\\u2728|\\u270B|\\u270A|\\u2705|\\u26CE|\\u23F3|\\u23F0|\\u23EC|\\u23ED|\\u23EE|\\u23EF|\\u23F1|\\u23F2|\\u23F8|\\u23F9|\\u23FA|\\u2602|\\u2603|\\u2604|\\u2618|\\u2620|\\u2622|\\u2623|\\u2626|\\u262A|\\u262E|\\u262F|\\u2638|\\u2639|\\u2692|\\u2694|\\u2696|\\u2697|\\u2699|\\u269B|\\u269C|\\u26B0|\\u26B1|\\u26C8|\\u26CF|\\u26D1|\\u26D3|\\u26E9|\\u26F0|\\u26F1|\\u26F4|\\u26F7|\\u26F8|\\u26F9|\\u2721|\\u2763|\\u23EB|\\u23EA|\\u23E9|\\u231B)",
e.jsEscapeMap={"👩‍❤️‍💋‍👩":"1f469-2764-1f48b-1f469","👨‍❤️‍💋‍👨":"1f468-2764-1f48b-1f468","👨‍👨‍👦‍👦":"1f468-1f468-1f466-1f466","👨‍👨‍👧‍👦":"1f468-1f468-1f467-1f466","👨‍👨‍👧‍👧":"1f468-1f468-1f467-1f467","👨‍👩‍👦‍👦":"1f468-1f469-1f466-1f466","👨‍👩‍👧‍👦":"1f468-1f469-1f467-1f466","👨‍👩‍👧‍👧":"1f468-1f469-1f467-1f467","👩‍👩‍👦‍👦":"1f469-1f469-1f466-1f466","👩‍👩‍👧‍👦":"1f469-1f469-1f467-1f466","👩‍👩‍👧‍👧":"1f469-1f469-1f467-1f467","👩‍❤️‍👩":"1f469-2764-1f469","👨‍❤️‍👨":"1f468-2764-1f468","👨‍👨‍👦":"1f468-1f468-1f466","👨‍👨‍👧":"1f468-1f468-1f467","👨‍👩‍👧":"1f468-1f469-1f467","👩‍👩‍👦":"1f469-1f469-1f466","👩‍👩‍👧":"1f469-1f469-1f467","👁‍🗨":"1f441-1f5e8","#️⃣":"0023-20e3","0️⃣":"0030-20e3","1️⃣":"0031-20e3","2️⃣":"0032-20e3","3️⃣":"0033-20e3","4️⃣":"0034-20e3","5️⃣":"0035-20e3","6️⃣":"0036-20e3","7️⃣":"0037-20e3","8️⃣":"0038-20e3","9️⃣":"0039-20e3","*️⃣":"002a-20e3","🤘🏿":"1f918-1f3ff","🤘🏾":"1f918-1f3fe","🤘🏽":"1f918-1f3fd","🤘🏼":"1f918-1f3fc","🤘🏻":"1f918-1f3fb","🛀🏿":"1f6c0-1f3ff","🛀🏾":"1f6c0-1f3fe","🛀🏽":"1f6c0-1f3fd","🛀🏼":"1f6c0-1f3fc","🛀🏻":"1f6c0-1f3fb","🚶🏿":"1f6b6-1f3ff","🚶🏾":"1f6b6-1f3fe","🚶🏽":"1f6b6-1f3fd","🚶🏼":"1f6b6-1f3fc","🚶🏻":"1f6b6-1f3fb","🚵🏿":"1f6b5-1f3ff","🚵🏾":"1f6b5-1f3fe","🚵🏽":"1f6b5-1f3fd","🚵🏼":"1f6b5-1f3fc","🚵🏻":"1f6b5-1f3fb","🚴🏿":"1f6b4-1f3ff","🚴🏾":"1f6b4-1f3fe","🚴🏽":"1f6b4-1f3fd","🚴🏼":"1f6b4-1f3fc","🚴🏻":"1f6b4-1f3fb","🚣🏿":"1f6a3-1f3ff","🚣🏾":"1f6a3-1f3fe","🚣🏽":"1f6a3-1f3fd","🚣🏼":"1f6a3-1f3fc","🚣🏻":"1f6a3-1f3fb","🙏🏿":"1f64f-1f3ff","🙏🏾":"1f64f-1f3fe","🙏🏽":"1f64f-1f3fd","🙏🏼":"1f64f-1f3fc","🙏🏻":"1f64f-1f3fb","🙎🏿":"1f64e-1f3ff","🙎🏾":"1f64e-1f3fe","🙎🏽":"1f64e-1f3fd","🙎🏼":"1f64e-1f3fc","🙎🏻":"1f64e-1f3fb","🙍🏿":"1f64d-1f3ff","🙍🏾":"1f64d-1f3fe","🙍🏽":"1f64d-1f3fd","🙍🏼":"1f64d-1f3fc","🙍🏻":"1f64d-1f3fb","🙌🏿":"1f64c-1f3ff","🙌🏾":"1f64c-1f3fe","🙌🏽":"1f64c-1f3fd","🙌🏼":"1f64c-1f3fc","🙌🏻":"1f64c-1f3fb","🙋🏿":"1f64b-1f3ff","🙋🏾":"1f64b-1f3fe","🙋🏽":"1f64b-1f3fd","🙋🏼":"1f64b-1f3fc","🙋🏻":"1f64b-1f3fb","🙇🏿":"1f647-1f3ff","🙇🏾":"1f647-1f3fe","🙇🏽":"1f647-1f3fd","🙇🏼":"1f647-1f3fc","🙇🏻":"1f647-1f3fb","🙆🏿":"1f646-1f3ff","🙆🏾":"1f646-1f3fe","🙆🏽":"1f646-1f3fd","🙆🏼":"1f646-1f3fc","🙆🏻":"1f646-1f3fb","🙅🏿":"1f645-1f3ff","🙅🏾":"1f645-1f3fe","🙅🏽":"1f645-1f3fd","🙅🏼":"1f645-1f3fc","🙅🏻":"1f645-1f3fb","🖖🏿":"1f596-1f3ff","🖖🏾":"1f596-1f3fe","🖖🏽":"1f596-1f3fd","🖖🏼":"1f596-1f3fc","🖖🏻":"1f596-1f3fb","🖕🏿":"1f595-1f3ff","🖕🏾":"1f595-1f3fe","🖕🏽":"1f595-1f3fd","🖕🏼":"1f595-1f3fc","🖕🏻":"1f595-1f3fb","🖐🏿":"1f590-1f3ff","🖐🏾":"1f590-1f3fe","🖐🏽":"1f590-1f3fd","🖐🏼":"1f590-1f3fc","🖐🏻":"1f590-1f3fb","🕵🏿":"1f575-1f3ff","🕵🏾":"1f575-1f3fe","🕵🏽":"1f575-1f3fd","🕵🏼":"1f575-1f3fc","🕵🏻":"1f575-1f3fb","💪🏿":"1f4aa-1f3ff","💪🏾":"1f4aa-1f3fe","💪🏽":"1f4aa-1f3fd","💪🏼":"1f4aa-1f3fc","💪🏻":"1f4aa-1f3fb","💇🏿":"1f487-1f3ff","💇🏾":"1f487-1f3fe","💇🏽":"1f487-1f3fd","💇🏼":"1f487-1f3fc","💇🏻":"1f487-1f3fb","💆🏿":"1f486-1f3ff","💆🏾":"1f486-1f3fe","💆🏽":"1f486-1f3fd","💆🏼":"1f486-1f3fc","💆🏻":"1f486-1f3fb","💅🏿":"1f485-1f3ff","💅🏾":"1f485-1f3fe","💅🏽":"1f485-1f3fd","💅🏼":"1f485-1f3fc","💅🏻":"1f485-1f3fb","💃🏿":"1f483-1f3ff","💃🏾":"1f483-1f3fe","💃🏽":"1f483-1f3fd","💃🏼":"1f483-1f3fc","💃🏻":"1f483-1f3fb","💂🏿":"1f482-1f3ff","💂🏾":"1f482-1f3fe","💂🏽":"1f482-1f3fd","💂🏼":"1f482-1f3fc","💂🏻":"1f482-1f3fb","💁🏿":"1f481-1f3ff","💁🏾":"1f481-1f3fe","💁🏽":"1f481-1f3fd","💁🏼":"1f481-1f3fc","💁🏻":"1f481-1f3fb","👼🏿":"1f47c-1f3ff","👼🏾":"1f47c-1f3fe","👼🏽":"1f47c-1f3fd","👼🏼":"1f47c-1f3fc","👼🏻":"1f47c-1f3fb","👸🏿":"1f478-1f3ff","👸🏾":"1f478-1f3fe","👸🏽":"1f478-1f3fd","👸🏼":"1f478-1f3fc","👸🏻":"1f478-1f3fb","👷🏿":"1f477-1f3ff","👷🏾":"1f477-1f3fe","👷🏽":"1f477-1f3fd","👷🏼":"1f477-1f3fc","👷🏻":"1f477-1f3fb","👶🏿":"1f476-1f3ff","👶🏾":"1f476-1f3fe","👶🏽":"1f476-1f3fd","👶🏼":"1f476-1f3fc","👶🏻":"1f476-1f3fb","👵🏿":"1f475-1f3ff","👵🏾":"1f475-1f3fe","👵🏽":"1f475-1f3fd","👵🏼":"1f475-1f3fc","👵🏻":"1f475-1f3fb","👴🏿":"1f474-1f3ff","👴🏾":"1f474-1f3fe","👴🏽":"1f474-1f3fd","👴🏼":"1f474-1f3fc","👴🏻":"1f474-1f3fb","👳🏿":"1f473-1f3ff","👳🏾":"1f473-1f3fe","👳🏽":"1f473-1f3fd","👳🏼":"1f473-1f3fc","👳🏻":"1f473-1f3fb","👲🏿":"1f472-1f3ff","👲🏾":"1f472-1f3fe","👲🏽":"1f472-1f3fd","👲🏼":"1f472-1f3fc","👲🏻":"1f472-1f3fb","👱🏿":"1f471-1f3ff","👱🏾":"1f471-1f3fe","👱🏽":"1f471-1f3fd","👱🏼":"1f471-1f3fc","👱🏻":"1f471-1f3fb","👰🏿":"1f470-1f3ff","👰🏾":"1f470-1f3fe","👰🏽":"1f470-1f3fd","👰🏼":"1f470-1f3fc","👰🏻":"1f470-1f3fb","👮🏿":"1f46e-1f3ff","👮🏾":"1f46e-1f3fe","👮🏽":"1f46e-1f3fd","👮🏼":"1f46e-1f3fc","👮🏻":"1f46e-1f3fb","👩🏿":"1f469-1f3ff","👩🏾":"1f469-1f3fe","👩🏽":"1f469-1f3fd","👩🏼":"1f469-1f3fc","👩🏻":"1f469-1f3fb","👨🏿":"1f468-1f3ff","👨🏾":"1f468-1f3fe","👨🏽":"1f468-1f3fd","👨🏼":"1f468-1f3fc","👨🏻":"1f468-1f3fb","👧🏿":"1f467-1f3ff","👧🏾":"1f467-1f3fe","👧🏽":"1f467-1f3fd","👧🏼":"1f467-1f3fc","👧🏻":"1f467-1f3fb","👦🏿":"1f466-1f3ff","👦🏾":"1f466-1f3fe","👦🏽":"1f466-1f3fd","👦🏼":"1f466-1f3fc","👦🏻":"1f466-1f3fb","👐🏿":"1f450-1f3ff","👐🏾":"1f450-1f3fe","👐🏽":"1f450-1f3fd","👐🏼":"1f450-1f3fc","👐🏻":"1f450-1f3fb","👏🏿":"1f44f-1f3ff","👏🏾":"1f44f-1f3fe","👏🏽":"1f44f-1f3fd","👏🏼":"1f44f-1f3fc","👏🏻":"1f44f-1f3fb","👎🏿":"1f44e-1f3ff","👎🏾":"1f44e-1f3fe","👎🏽":"1f44e-1f3fd","👎🏼":"1f44e-1f3fc","👎🏻":"1f44e-1f3fb","👍🏿":"1f44d-1f3ff","👍🏾":"1f44d-1f3fe","👍🏽":"1f44d-1f3fd","👍🏼":"1f44d-1f3fc","👍🏻":"1f44d-1f3fb","👌🏿":"1f44c-1f3ff","👌🏾":"1f44c-1f3fe","👌🏽":"1f44c-1f3fd","👌🏼":"1f44c-1f3fc","👌🏻":"1f44c-1f3fb","👋🏿":"1f44b-1f3ff","👋🏾":"1f44b-1f3fe","👋🏽":"1f44b-1f3fd","👋🏼":"1f44b-1f3fc","👋🏻":"1f44b-1f3fb","👊🏿":"1f44a-1f3ff","👊🏾":"1f44a-1f3fe","👊🏽":"1f44a-1f3fd","👊🏼":"1f44a-1f3fc","👊🏻":"1f44a-1f3fb","👉🏿":"1f449-1f3ff","👉🏾":"1f449-1f3fe","👉🏽":"1f449-1f3fd","👉🏼":"1f449-1f3fc","👉🏻":"1f449-1f3fb","👈🏿":"1f448-1f3ff","👈🏾":"1f448-1f3fe","👈🏽":"1f448-1f3fd","👈🏼":"1f448-1f3fc","👈🏻":"1f448-1f3fb","👇🏿":"1f447-1f3ff","👇🏾":"1f447-1f3fe","👇🏽":"1f447-1f3fd","👇🏼":"1f447-1f3fc","👇🏻":"1f447-1f3fb","👆🏿":"1f446-1f3ff","👆🏾":"1f446-1f3fe","👆🏽":"1f446-1f3fd","👆🏼":"1f446-1f3fc","👆🏻":"1f446-1f3fb","👃🏿":"1f443-1f3ff","👃🏾":"1f443-1f3fe","👃🏽":"1f443-1f3fd","👃🏼":"1f443-1f3fc","👃🏻":"1f443-1f3fb","👂🏿":"1f442-1f3ff","👂🏾":"1f442-1f3fe","👂🏽":"1f442-1f3fd","👂🏼":"1f442-1f3fc","👂🏻":"1f442-1f3fb","🏋🏿":"1f3cb-1f3ff","🏋🏾":"1f3cb-1f3fe","🏋🏽":"1f3cb-1f3fd","🏋🏼":"1f3cb-1f3fc","🏋🏻":"1f3cb-1f3fb","🏊🏿":"1f3ca-1f3ff","🏊🏾":"1f3ca-1f3fe","🏊🏽":"1f3ca-1f3fd","🏊🏼":"1f3ca-1f3fc","🏊🏻":"1f3ca-1f3fb","🏇🏿":"1f3c7-1f3ff","🏇🏾":"1f3c7-1f3fe","🏇🏽":"1f3c7-1f3fd","🏇🏼":"1f3c7-1f3fc","🏇🏻":"1f3c7-1f3fb","🏄🏿":"1f3c4-1f3ff","🏄🏾":"1f3c4-1f3fe","🏄🏽":"1f3c4-1f3fd","🏄🏼":"1f3c4-1f3fc","🏄🏻":"1f3c4-1f3fb","🏃🏿":"1f3c3-1f3ff","🏃🏾":"1f3c3-1f3fe","🏃🏽":"1f3c3-1f3fd","🏃🏼":"1f3c3-1f3fc","🏃🏻":"1f3c3-1f3fb","🎅🏿":"1f385-1f3ff","🎅🏾":"1f385-1f3fe","🎅🏽":"1f385-1f3fd","🎅🏼":"1f385-1f3fc","🎅🏻":"1f385-1f3fb","🇿🇼":"1f1ff-1f1fc","🇿🇲":"1f1ff-1f1f2","🇿🇦":"1f1ff-1f1e6","🇾🇹":"1f1fe-1f1f9","🇾🇪":"1f1fe-1f1ea","🇽🇰":"1f1fd-1f1f0","🇼🇸":"1f1fc-1f1f8","🇼🇫":"1f1fc-1f1eb","🇻🇺":"1f1fb-1f1fa","🇻🇳":"1f1fb-1f1f3","🇻🇮":"1f1fb-1f1ee","🇻🇬":"1f1fb-1f1ec","🇻🇪":"1f1fb-1f1ea","🇻🇨":"1f1fb-1f1e8","🇻🇦":"1f1fb-1f1e6","🇺🇿":"1f1fa-1f1ff","🇺🇾":"1f1fa-1f1fe","🇺🇸":"1f1fa-1f1f8","🇺🇲":"1f1fa-1f1f2","🇺🇬":"1f1fa-1f1ec","🇺🇦":"1f1fa-1f1e6","🇹🇿":"1f1f9-1f1ff","🇹🇼":"1f1f9-1f1fc","🇹🇻":"1f1f9-1f1fb","🇹🇹":"1f1f9-1f1f9","🇹🇷":"1f1f9-1f1f7","🇹🇴":"1f1f9-1f1f4","🇹🇳":"1f1f9-1f1f3","🇹🇲":"1f1f9-1f1f2","🇹🇱":"1f1f9-1f1f1","🇹🇰":"1f1f9-1f1f0","🇹🇯":"1f1f9-1f1ef","🇹🇭":"1f1f9-1f1ed","🇹🇬":"1f1f9-1f1ec","🇹🇫":"1f1f9-1f1eb","🇹🇩":"1f1f9-1f1e9","🇹🇨":"1f1f9-1f1e8","🇹🇦":"1f1f9-1f1e6","🇸🇿":"1f1f8-1f1ff","🇸🇾":"1f1f8-1f1fe","🇸🇽":"1f1f8-1f1fd","🇸🇻":"1f1f8-1f1fb","🇸🇹":"1f1f8-1f1f9","🇸🇸":"1f1f8-1f1f8","🇸🇷":"1f1f8-1f1f7","🇸🇴":"1f1f8-1f1f4","🇸🇳":"1f1f8-1f1f3","🇸🇲":"1f1f8-1f1f2","🇸🇱":"1f1f8-1f1f1","🇸🇰":"1f1f8-1f1f0","🇸🇯":"1f1f8-1f1ef","🇸🇮":"1f1f8-1f1ee","🇸🇭":"1f1f8-1f1ed","🇸🇬":"1f1f8-1f1ec","🇸🇪":"1f1f8-1f1ea","🇸🇩":"1f1f8-1f1e9","🇸🇨":"1f1f8-1f1e8","🇸🇧":"1f1f8-1f1e7","🇸🇦":"1f1f8-1f1e6","🇷🇼":"1f1f7-1f1fc","🇷🇺":"1f1f7-1f1fa","🇷🇸":"1f1f7-1f1f8","🇷🇴":"1f1f7-1f1f4","🇷🇪":"1f1f7-1f1ea","🇶🇦":"1f1f6-1f1e6","🇵🇾":"1f1f5-1f1fe","🇵🇼":"1f1f5-1f1fc","🇵🇹":"1f1f5-1f1f9","🇵🇸":"1f1f5-1f1f8","🇵🇷":"1f1f5-1f1f7","🇵🇳":"1f1f5-1f1f3","🇵🇲":"1f1f5-1f1f2","🇵🇱":"1f1f5-1f1f1","🇵🇰":"1f1f5-1f1f0","🇵🇭":"1f1f5-1f1ed","🇵🇬":"1f1f5-1f1ec","🇵🇫":"1f1f5-1f1eb","🇵🇪":"1f1f5-1f1ea","🇵🇦":"1f1f5-1f1e6","🇴🇲":"1f1f4-1f1f2","🇳🇿":"1f1f3-1f1ff","🇳🇺":"1f1f3-1f1fa","🇳🇷":"1f1f3-1f1f7","🇳🇵":"1f1f3-1f1f5","🇳🇴":"1f1f3-1f1f4","🇳🇱":"1f1f3-1f1f1","🇳🇮":"1f1f3-1f1ee","🇳🇬":"1f1f3-1f1ec","🇳🇫":"1f1f3-1f1eb","🇳🇪":"1f1f3-1f1ea","🇳🇨":"1f1f3-1f1e8","🇳🇦":"1f1f3-1f1e6","🇲🇿":"1f1f2-1f1ff","🇲🇾":"1f1f2-1f1fe","🇲🇽":"1f1f2-1f1fd","🇲🇼":"1f1f2-1f1fc","🇲🇻":"1f1f2-1f1fb","🇲🇺":"1f1f2-1f1fa","🇲🇹":"1f1f2-1f1f9","🇲🇸":"1f1f2-1f1f8","🇲🇷":"1f1f2-1f1f7","🇲🇶":"1f1f2-1f1f6","🇲🇵":"1f1f2-1f1f5","🇲🇴":"1f1f2-1f1f4","🇲🇳":"1f1f2-1f1f3","🇲🇲":"1f1f2-1f1f2","🇲🇱":"1f1f2-1f1f1","🇲🇰":"1f1f2-1f1f0","🇲🇭":"1f1f2-1f1ed","🇲🇬":"1f1f2-1f1ec","🇲🇫":"1f1f2-1f1eb","🇲🇪":"1f1f2-1f1ea","🇲🇩":"1f1f2-1f1e9","🇲🇨":"1f1f2-1f1e8","🇲🇦":"1f1f2-1f1e6","🇱🇾":"1f1f1-1f1fe","🇱🇻":"1f1f1-1f1fb","🇱🇺":"1f1f1-1f1fa","🇱🇹":"1f1f1-1f1f9","🇱🇸":"1f1f1-1f1f8","🇱🇷":"1f1f1-1f1f7","🇱🇰":"1f1f1-1f1f0","🇱🇮":"1f1f1-1f1ee","🇱🇨":"1f1f1-1f1e8","🇱🇧":"1f1f1-1f1e7","🇱🇦":"1f1f1-1f1e6","🇰🇿":"1f1f0-1f1ff","🇰🇾":"1f1f0-1f1fe","🇰🇼":"1f1f0-1f1fc","🇰🇷":"1f1f0-1f1f7","🇰🇵":"1f1f0-1f1f5","🇰🇳":"1f1f0-1f1f3","🇰🇲":"1f1f0-1f1f2","🇰🇮":"1f1f0-1f1ee","🇰🇭":"1f1f0-1f1ed","🇰🇬":"1f1f0-1f1ec","🇰🇪":"1f1f0-1f1ea","🇯🇵":"1f1ef-1f1f5","🇯🇴":"1f1ef-1f1f4","🇯🇲":"1f1ef-1f1f2","🇯🇪":"1f1ef-1f1ea","🇮🇹":"1f1ee-1f1f9","🇮🇸":"1f1ee-1f1f8","🇮🇷":"1f1ee-1f1f7","🇮🇶":"1f1ee-1f1f6","🇮🇴":"1f1ee-1f1f4","🇮🇳":"1f1ee-1f1f3","🇮🇲":"1f1ee-1f1f2","🇮🇱":"1f1ee-1f1f1","🇮🇪":"1f1ee-1f1ea","🇮🇩":"1f1ee-1f1e9","🇮🇨":"1f1ee-1f1e8","🇭🇺":"1f1ed-1f1fa","🇭🇹":"1f1ed-1f1f9","🇭🇷":"1f1ed-1f1f7","🇭🇳":"1f1ed-1f1f3","🇭🇲":"1f1ed-1f1f2","🇭🇰":"1f1ed-1f1f0","🇬🇾":"1f1ec-1f1fe","🇬🇼":"1f1ec-1f1fc","🇬🇺":"1f1ec-1f1fa","🇬🇹":"1f1ec-1f1f9","🇬🇸":"1f1ec-1f1f8","🇬🇷":"1f1ec-1f1f7","🇬🇶":"1f1ec-1f1f6","🇬🇵":"1f1ec-1f1f5","🇬🇳":"1f1ec-1f1f3","🇬🇲":"1f1ec-1f1f2","🇬🇱":"1f1ec-1f1f1","🇬🇮":"1f1ec-1f1ee","🇬🇭":"1f1ec-1f1ed","🇬🇬":"1f1ec-1f1ec","🇬🇫":"1f1ec-1f1eb","🇬🇪":"1f1ec-1f1ea","🇬🇩":"1f1ec-1f1e9","🇬🇧":"1f1ec-1f1e7","🇬🇦":"1f1ec-1f1e6","🇫🇷":"1f1eb-1f1f7","🇫🇴":"1f1eb-1f1f4","🇫🇲":"1f1eb-1f1f2","🇫🇰":"1f1eb-1f1f0","🇫🇯":"1f1eb-1f1ef","🇫🇮":"1f1eb-1f1ee","🇪🇺":"1f1ea-1f1fa","🇪🇹":"1f1ea-1f1f9","🇪🇸":"1f1ea-1f1f8","🇪🇷":"1f1ea-1f1f7","🇪🇭":"1f1ea-1f1ed","🇪🇬":"1f1ea-1f1ec","🇪🇪":"1f1ea-1f1ea","🇪🇨":"1f1ea-1f1e8","🇪🇦":"1f1ea-1f1e6","🇩🇿":"1f1e9-1f1ff","🇩🇴":"1f1e9-1f1f4","🇩🇲":"1f1e9-1f1f2","🇩🇰":"1f1e9-1f1f0","🇩🇯":"1f1e9-1f1ef","🇩🇬":"1f1e9-1f1ec","🇩🇪":"1f1e9-1f1ea","🇨🇿":"1f1e8-1f1ff","🇨🇾":"1f1e8-1f1fe","🇨🇽":"1f1e8-1f1fd","🇨🇼":"1f1e8-1f1fc","🇨🇻":"1f1e8-1f1fb","🇨🇺":"1f1e8-1f1fa","🇨🇷":"1f1e8-1f1f7","🇨🇵":"1f1e8-1f1f5","🇨🇴":"1f1e8-1f1f4","🇨🇳":"1f1e8-1f1f3","🇨🇲":"1f1e8-1f1f2","🇨🇱":"1f1e8-1f1f1","🇨🇰":"1f1e8-1f1f0","🇨🇮":"1f1e8-1f1ee","🇨🇭":"1f1e8-1f1ed","🇨🇬":"1f1e8-1f1ec","🇨🇫":"1f1e8-1f1eb","🇨🇩":"1f1e8-1f1e9","🇨🇨":"1f1e8-1f1e8","🇨🇦":"1f1e8-1f1e6","🇧🇿":"1f1e7-1f1ff","🇧🇾":"1f1e7-1f1fe","🇧🇼":"1f1e7-1f1fc","🇧🇻":"1f1e7-1f1fb","🇧🇹":"1f1e7-1f1f9","🇧🇸":"1f1e7-1f1f8","🇧🇷":"1f1e7-1f1f7","🇧🇶":"1f1e7-1f1f6","🇧🇴":"1f1e7-1f1f4","🇧🇳":"1f1e7-1f1f3","🇧🇲":"1f1e7-1f1f2","🇧🇱":"1f1e7-1f1f1","🇧🇯":"1f1e7-1f1ef","🇧🇮":"1f1e7-1f1ee","🇧🇭":"1f1e7-1f1ed","🇧🇬":"1f1e7-1f1ec","🇧🇫":"1f1e7-1f1eb","🇧🇪":"1f1e7-1f1ea","🇧🇩":"1f1e7-1f1e9","🇧🇧":"1f1e7-1f1e7","🇧🇦":"1f1e7-1f1e6","🇦🇿":"1f1e6-1f1ff","🇦🇽":"1f1e6-1f1fd","🇦🇼":"1f1e6-1f1fc","🇦🇺":"1f1e6-1f1fa","🇦🇹":"1f1e6-1f1f9","🇦🇸":"1f1e6-1f1f8","🇦🇷":"1f1e6-1f1f7","🇦🇶":"1f1e6-1f1f6","🇦🇴":"1f1e6-1f1f4","🇦🇲":"1f1e6-1f1f2","🇦🇱":"1f1e6-1f1f1","🇦🇮":"1f1e6-1f1ee","🇦🇬":"1f1e6-1f1ec","🇦🇫":"1f1e6-1f1eb","🇦🇪":"1f1e6-1f1ea","🇦🇩":"1f1e6-1f1e9","🇦🇨":"1f1e6-1f1e8","🀄️":"1f004","🅿️":"1f17f","🈂️":"1f202","🈚️":"1f21a","🈯️":"1f22f","🈷️":"1f237","🎞️":"1f39e","🎟️":"1f39f","🏋️":"1f3cb","🏌️":"1f3cc","🏍️":"1f3cd","🏎️":"1f3ce","🎖️":"1f396","🎗️":"1f397","🌶️":"1f336","🌧️":"1f327","🌨️":"1f328","🌩️":"1f329","🌪️":"1f32a","🌫️":"1f32b","🌬️":"1f32c","🐿️":"1f43f","🕷️":"1f577","🕸️":"1f578","🌡️":"1f321","🎙️":"1f399","🎚️":"1f39a","🎛️":"1f39b","🏳️":"1f3f3","🏵️":"1f3f5","🏷️":"1f3f7","📽️":"1f4fd","🕉️":"1f549","🕊️":"1f54a","🕯️":"1f56f","🕰️":"1f570","🕳️":"1f573","🕶️":"1f576","🕹️":"1f579","🖇️":"1f587","🖊️":"1f58a","🖋️":"1f58b","🖌️":"1f58c","🖍️":"1f58d","🖥️":"1f5a5","🖨️":"1f5a8","🖲️":"1f5b2","🖼️":"1f5bc","🗂️":"1f5c2","🗃️":"1f5c3","🗄️":"1f5c4","🗑️":"1f5d1","🗒️":"1f5d2","🗓️":"1f5d3","🗜️":"1f5dc","🗝️":"1f5dd","🗞️":"1f5de","🗡️":"1f5e1","🗣️":"1f5e3","🗯️":"1f5ef","🗳️":"1f5f3","🗺️":"1f5fa","🛠️":"1f6e0","🛡️":"1f6e1","🛢️":"1f6e2","🛰️":"1f6f0","🍽️":"1f37d","👁️":"1f441","🕴️":"1f574","🕵️":"1f575","🖐️":"1f590","🏔️":"1f3d4","🏕️":"1f3d5","🏖️":"1f3d6","🏗️":"1f3d7","🏘️":"1f3d8","🏙️":"1f3d9","🏚️":"1f3da","🏛️":"1f3db","🏜️":"1f3dc","🏝️":"1f3dd","🏞️":"1f3de","🏟️":"1f3df","🛋️":"1f6cb","🛍️":"1f6cd","🛎️":"1f6ce","🛏️":"1f6cf","🛣️":"1f6e3","🛤️":"1f6e4","🛥️":"1f6e5","🛩️":"1f6e9","🛳️":"1f6f3","🌤️":"1f324","🌥️":"1f325","🌦️":"1f326","🖱️":"1f5b1","☝🏻":"261d-1f3fb","☝🏼":"261d-1f3fc","☝🏽":"261d-1f3fd","☝🏾":"261d-1f3fe","©️":"00a9","®️":"00ae","‼️":"203c","⁉️":"2049","™️":"2122","ℹ️":"2139","↔️":"2194","↕️":"2195","↖️":"2196","↗️":"2197","↘️":"2198","↙️":"2199","↩️":"21a9","↪️":"21aa","⌚️":"231a","⌛️":"231b","Ⓜ️":"24c2","▪️":"25aa","▫️":"25ab","▶️":"25b6","◀️":"25c0","◻️":"25fb","◼️":"25fc","◽️":"25fd","◾️":"25fe","☀️":"2600","☁️":"2601","☎️":"260e","☑️":"2611","☔️":"2614","☕️":"2615","☝️":"261d","☺️":"263a","♈️":"2648","♉️":"2649","♊️":"264a","♋️":"264b","♌️":"264c","♍️":"264d","♎️":"264e","♏️":"264f","♐️":"2650","♑️":"2651","♒️":"2652","♓️":"2653","♠️":"2660","♣️":"2663","♥️":"2665","♦️":"2666","♨️":"2668","♻️":"267b","♿️":"267f","⚓️":"2693","⚠️":"26a0","⚡️":"26a1","⚪️":"26aa","⚫️":"26ab","⚽️":"26bd","⚾️":"26be","⛄️":"26c4","⛅️":"26c5","⛔️":"26d4","⛪️":"26ea","⛲️":"26f2","⛳️":"26f3","⛵️":"26f5","⛺️":"26fa","⛽️":"26fd","✂️":"2702","✈️":"2708","✉️":"2709","✌️":"270c","✏️":"270f","✒️":"2712","✔️":"2714","✖️":"2716","✳️":"2733","✴️":"2734","❄️":"2744","❇️":"2747","❗️":"2757","❤️":"2764","➡️":"27a1","⤴️":"2934","⤵️":"2935","⬅️":"2b05","⬆️":"2b06","⬇️":"2b07","⬛️":"2b1b","⬜️":"2b1c","⭐️":"2b50","⭕️":"2b55","〰️":"3030","〽️":"303d","㊗️":"3297","㊙️":"3299","✝️":"271d","⌨️":"2328","✍️":"270d","⏭️":"23ed","⏮️":"23ee","⏯️":"23ef","⏱️":"23f1","⏲️":"23f2","⏸️":"23f8","⏹️":"23f9","⏺️":"23fa","☂️":"2602","☃️":"2603","☄️":"2604","☘️":"2618","☠️":"2620","☢️":"2622","☣️":"2623","☦️":"2626","☪️":"262a","☮️":"262e","☯️":"262f","☸️":"2638","☹️":"2639","⚒️":"2692","⚔️":"2694","⚖️":"2696","⚗️":"2697","⚙️":"2699","⚛️":"269b","⚜️":"269c","⚰️":"26b0","⚱️":"26b1","⛈️":"26c8","⛏️":"26cf","⛑️":"26d1","⛓️":"26d3","⛩️":"26e9","⛰️":"26f0","⛱️":"26f1","⛴️":"26f4","⛷️":"26f7","⛸️":"26f8","⛹️":"26f9","✡️":"2721","❣️":"2763","🃏":"1f0cf","🅰":"1f170","🅱":"1f171","🅾":"1f17e","🆎":"1f18e","🆑":"1f191","🆒":"1f192","🆓":"1f193","🆔":"1f194","🆕":"1f195","🆖":"1f196","🆗":"1f197","🆘":"1f198","🆙":"1f199","🆚":"1f19a","🈁":"1f201","🈲":"1f232","🈳":"1f233","🈴":"1f234","🈵":"1f235","🈶":"1f236","🈸":"1f238","🈹":"1f239","🈺":"1f23a","🉐":"1f250","🉑":"1f251","🌀":"1f300","🌁":"1f301","🌂":"1f302","🌃":"1f303","🌄":"1f304","🌅":"1f305","🌆":"1f306","🌇":"1f307","🌈":"1f308","🌉":"1f309","🌊":"1f30a","🌋":"1f30b","🌌":"1f30c","🌏":"1f30f","🌑":"1f311","🌓":"1f313","🌔":"1f314","🌕":"1f315","🌙":"1f319","🌛":"1f31b","🌟":"1f31f","🌠":"1f320","🌰":"1f330","🌱":"1f331","🌴":"1f334","🌵":"1f335","🌷":"1f337","🌸":"1f338","🌹":"1f339","🌺":"1f33a","🌻":"1f33b","🌼":"1f33c","🌽":"1f33d","🌾":"1f33e","🌿":"1f33f","🍀":"1f340","🍁":"1f341","🍂":"1f342","🍃":"1f343","🍄":"1f344","🍅":"1f345","🍆":"1f346","🍇":"1f347","🍈":"1f348","🍉":"1f349","🍊":"1f34a","🍌":"1f34c","🍍":"1f34d","🍎":"1f34e","🍏":"1f34f","🍑":"1f351","🍒":"1f352","🍓":"1f353","🍔":"1f354","🍕":"1f355","🍖":"1f356","🍗":"1f357","🍘":"1f358","🍙":"1f359","🍚":"1f35a","🍛":"1f35b","🍜":"1f35c","🍝":"1f35d","🍞":"1f35e","🍟":"1f35f","🍠":"1f360","🍡":"1f361","🍢":"1f362","🍣":"1f363","🍤":"1f364","🍥":"1f365","🍦":"1f366","🍧":"1f367","🍨":"1f368","🍩":"1f369","🍪":"1f36a","🍫":"1f36b","🍬":"1f36c","🍭":"1f36d","🍮":"1f36e","🍯":"1f36f","🍰":"1f370","🍱":"1f371","🍲":"1f372","🍳":"1f373","🍴":"1f374","🍵":"1f375","🍶":"1f376","🍷":"1f377","🍸":"1f378","🍹":"1f379","🍺":"1f37a","🍻":"1f37b","🎀":"1f380","🎁":"1f381","🎂":"1f382","🎃":"1f383","🎄":"1f384","🎅":"1f385","🎆":"1f386","🎇":"1f387","🎈":"1f388","🎉":"1f389","🎊":"1f38a","🎋":"1f38b","🎌":"1f38c","🎍":"1f38d","🎎":"1f38e","🎏":"1f38f","🎐":"1f390","🎑":"1f391","🎒":"1f392","🎓":"1f393","🎠":"1f3a0","🎡":"1f3a1","🎢":"1f3a2","🎣":"1f3a3","🎤":"1f3a4","🎥":"1f3a5","🎦":"1f3a6","🎧":"1f3a7","🎨":"1f3a8","🎩":"1f3a9","🎪":"1f3aa","🎫":"1f3ab","🎬":"1f3ac","🎭":"1f3ad","🎮":"1f3ae","🎯":"1f3af","🎰":"1f3b0","🎱":"1f3b1","🎲":"1f3b2","🎳":"1f3b3","🎴":"1f3b4","🎵":"1f3b5","🎶":"1f3b6","🎷":"1f3b7","🎸":"1f3b8","🎹":"1f3b9","🎺":"1f3ba","🎻":"1f3bb","🎼":"1f3bc","🎽":"1f3bd","🎾":"1f3be","🎿":"1f3bf","🏀":"1f3c0","🏁":"1f3c1","🏂":"1f3c2","🏃":"1f3c3","🏄":"1f3c4","🏆":"1f3c6","🏈":"1f3c8","🏊":"1f3ca","🏠":"1f3e0","🏡":"1f3e1","🏢":"1f3e2","🏣":"1f3e3","🏥":"1f3e5","🏦":"1f3e6","🏧":"1f3e7","🏨":"1f3e8","🏩":"1f3e9","🏪":"1f3ea","🏫":"1f3eb","🏬":"1f3ec","🏭":"1f3ed","🏮":"1f3ee","🏯":"1f3ef","🏰":"1f3f0","🐌":"1f40c","🐍":"1f40d","🐎":"1f40e","🐑":"1f411","🐒":"1f412","🐔":"1f414","🐗":"1f417","🐘":"1f418","🐙":"1f419","🐚":"1f41a","🐛":"1f41b","🐜":"1f41c","🐝":"1f41d","🐞":"1f41e","🐟":"1f41f","🐠":"1f420","🐡":"1f421","🐢":"1f422","🐣":"1f423","🐤":"1f424","🐥":"1f425","🐦":"1f426","🐧":"1f427","🐨":"1f428","🐩":"1f429","🐫":"1f42b","🐬":"1f42c","🐭":"1f42d","🐮":"1f42e","🐯":"1f42f","🐰":"1f430","🐱":"1f431","🐲":"1f432","🐳":"1f433","🐴":"1f434","🐵":"1f435","🐶":"1f436","🐷":"1f437","🐸":"1f438","🐹":"1f439","🐺":"1f43a","🐻":"1f43b","🐼":"1f43c","🐽":"1f43d","🐾":"1f43e","👀":"1f440","👂":"1f442","👃":"1f443","👄":"1f444","👅":"1f445","👆":"1f446","👇":"1f447","👈":"1f448","👉":"1f449","👊":"1f44a","👋":"1f44b","👌":"1f44c","👍":"1f44d","👎":"1f44e","👏":"1f44f","👐":"1f450","👑":"1f451","👒":"1f452","👓":"1f453","👔":"1f454","👕":"1f455","👖":"1f456","👗":"1f457","👘":"1f458","👙":"1f459","👚":"1f45a","👛":"1f45b","👜":"1f45c","👝":"1f45d","👞":"1f45e","👟":"1f45f","👠":"1f460","👡":"1f461","👢":"1f462","👣":"1f463","👤":"1f464","👦":"1f466","👧":"1f467","👨":"1f468","👩":"1f469","👪":"1f46a","👫":"1f46b","👮":"1f46e","👯":"1f46f","👰":"1f470","👱":"1f471","👲":"1f472","👳":"1f473","👴":"1f474","👵":"1f475","👶":"1f476","👷":"1f477","👸":"1f478","👹":"1f479","👺":"1f47a","👻":"1f47b","👼":"1f47c","👽":"1f47d","👾":"1f47e","👿":"1f47f","💀":"1f480","📇":"1f4c7","💁":"1f481","💂":"1f482","💃":"1f483","💄":"1f484","💅":"1f485","📒":"1f4d2","💆":"1f486","📓":"1f4d3","💇":"1f487","📔":"1f4d4","💈":"1f488","📕":"1f4d5","💉":"1f489","📖":"1f4d6","💊":"1f48a","📗":"1f4d7","💋":"1f48b","📘":"1f4d8","💌":"1f48c","📙":"1f4d9","💍":"1f48d","📚":"1f4da","💎":"1f48e","📛":"1f4db","💏":"1f48f","📜":"1f4dc","💐":"1f490","📝":"1f4dd","💑":"1f491","📞":"1f4de","💒":"1f492","📟":"1f4df","📠":"1f4e0","💓":"1f493","📡":"1f4e1","📢":"1f4e2","💔":"1f494","📣":"1f4e3","📤":"1f4e4","💕":"1f495","📥":"1f4e5","📦":"1f4e6","💖":"1f496","📧":"1f4e7","📨":"1f4e8","💗":"1f497","📩":"1f4e9","📪":"1f4ea","💘":"1f498","📫":"1f4eb","📮":"1f4ee","💙":"1f499","📰":"1f4f0","📱":"1f4f1","💚":"1f49a","📲":"1f4f2","📳":"1f4f3","💛":"1f49b","📴":"1f4f4","📶":"1f4f6","💜":"1f49c","📷":"1f4f7","📹":"1f4f9","💝":"1f49d","📺":"1f4fa","📻":"1f4fb","💞":"1f49e","📼":"1f4fc","🔃":"1f503","💟":"1f49f","🔊":"1f50a","🔋":"1f50b","💠":"1f4a0","🔌":"1f50c","🔍":"1f50d","💡":"1f4a1","🔎":"1f50e","🔏":"1f50f","💢":"1f4a2","🔐":"1f510","🔑":"1f511","💣":"1f4a3","🔒":"1f512","🔓":"1f513","💤":"1f4a4","🔔":"1f514","🔖":"1f516","💥":"1f4a5","🔗":"1f517","🔘":"1f518","💦":"1f4a6","🔙":"1f519","🔚":"1f51a","💧":"1f4a7","🔛":"1f51b","🔜":"1f51c","💨":"1f4a8","🔝":"1f51d","🔞":"1f51e","💩":"1f4a9","🔟":"1f51f","💪":"1f4aa","🔠":"1f520","🔡":"1f521","💫":"1f4ab","🔢":"1f522","🔣":"1f523","💬":"1f4ac","🔤":"1f524","🔥":"1f525","💮":"1f4ae","🔦":"1f526","🔧":"1f527","💯":"1f4af","🔨":"1f528","🔩":"1f529","💰":"1f4b0","🔪":"1f52a","🔫":"1f52b","💱":"1f4b1","🔮":"1f52e","💲":"1f4b2","🔯":"1f52f","💳":"1f4b3","🔰":"1f530","🔱":"1f531","💴":"1f4b4","🔲":"1f532","🔳":"1f533","💵":"1f4b5","🔴":"1f534","🔵":"1f535","💸":"1f4b8","🔶":"1f536","🔷":"1f537","💹":"1f4b9","🔸":"1f538","🔹":"1f539","💺":"1f4ba","🔺":"1f53a","🔻":"1f53b","💻":"1f4bb","🔼":"1f53c","💼":"1f4bc","🔽":"1f53d","🕐":"1f550","💽":"1f4bd","🕑":"1f551","💾":"1f4be","🕒":"1f552","💿":"1f4bf","🕓":"1f553","📀":"1f4c0","🕔":"1f554","🕕":"1f555","📁":"1f4c1","🕖":"1f556","🕗":"1f557","📂":"1f4c2","🕘":"1f558","🕙":"1f559","📃":"1f4c3","🕚":"1f55a","🕛":"1f55b","📄":"1f4c4","🗻":"1f5fb","🗼":"1f5fc","📅":"1f4c5","🗽":"1f5fd","🗾":"1f5fe","📆":"1f4c6","🗿":"1f5ff","😁":"1f601","😂":"1f602","😃":"1f603","📈":"1f4c8","😄":"1f604","😅":"1f605","📉":"1f4c9","😆":"1f606","😉":"1f609","📊":"1f4ca","😊":"1f60a","😋":"1f60b","📋":"1f4cb","😌":"1f60c","😍":"1f60d","📌":"1f4cc","😏":"1f60f","😒":"1f612","📍":"1f4cd","😓":"1f613","😔":"1f614","📎":"1f4ce","😖":"1f616","😘":"1f618","📏":"1f4cf","😚":"1f61a","😜":"1f61c","📐":"1f4d0","😝":"1f61d","😞":"1f61e","📑":"1f4d1","😠":"1f620","😡":"1f621","😢":"1f622","😣":"1f623","😤":"1f624","😥":"1f625","😨":"1f628","😩":"1f629","😪":"1f62a","😫":"1f62b","😭":"1f62d","😰":"1f630","😱":"1f631","😲":"1f632","😳":"1f633","😵":"1f635","😷":"1f637","😸":"1f638","😹":"1f639","😺":"1f63a","😻":"1f63b","😼":"1f63c","😽":"1f63d","😾":"1f63e","😿":"1f63f","🙀":"1f640","🙅":"1f645","🙆":"1f646","🙇":"1f647","🙈":"1f648","🙉":"1f649","🙊":"1f64a","🙋":"1f64b","🙌":"1f64c","🙍":"1f64d","🙎":"1f64e","🙏":"1f64f","🚀":"1f680","🚃":"1f683","🚄":"1f684","🚅":"1f685","🚇":"1f687","🚉":"1f689","🚌":"1f68c","🚏":"1f68f","🚑":"1f691","🚒":"1f692","🚓":"1f693","🚕":"1f695","🚗":"1f697","🚙":"1f699","🚚":"1f69a","🚢":"1f6a2","🚤":"1f6a4","🚥":"1f6a5","🚧":"1f6a7","🚨":"1f6a8","🚩":"1f6a9","🚪":"1f6aa","🚫":"1f6ab","🚬":"1f6ac","🚭":"1f6ad","🚲":"1f6b2","🚶":"1f6b6","🚹":"1f6b9","🚺":"1f6ba","🚻":"1f6bb","🚼":"1f6bc","🚽":"1f6bd","🚾":"1f6be","🛀":"1f6c0","🤘":"1f918","😀":"1f600","😇":"1f607","😈":"1f608","😎":"1f60e","😐":"1f610","😑":"1f611","😕":"1f615","😗":"1f617","😙":"1f619","😛":"1f61b","😟":"1f61f","😦":"1f626","😧":"1f627","😬":"1f62c","😮":"1f62e","😯":"1f62f","😴":"1f634","😶":"1f636","🚁":"1f681","🚂":"1f682","🚆":"1f686","🚈":"1f688","🚊":"1f68a","🚍":"1f68d","🚎":"1f68e","🚐":"1f690","🚔":"1f694","🚖":"1f696","🚘":"1f698","🚛":"1f69b","🚜":"1f69c","🚝":"1f69d","🚞":"1f69e","🚟":"1f69f","🚠":"1f6a0","🚡":"1f6a1","🚣":"1f6a3","🚦":"1f6a6","🚮":"1f6ae","🚯":"1f6af","🚰":"1f6b0","🚱":"1f6b1","🚳":"1f6b3","🚴":"1f6b4","🚵":"1f6b5","🚷":"1f6b7","🚸":"1f6b8","🚿":"1f6bf","🛁":"1f6c1","🛂":"1f6c2","🛃":"1f6c3","🛄":"1f6c4","🛅":"1f6c5","🌍":"1f30d","🌎":"1f30e","🌐":"1f310","🌒":"1f312","🌖":"1f316","🌗":"1f317","🌘":"1f318","🌚":"1f31a","🌜":"1f31c","🌝":"1f31d","🌞":"1f31e","🌲":"1f332","🌳":"1f333","🍋":"1f34b","🍐":"1f350","🍼":"1f37c","🏇":"1f3c7","🏉":"1f3c9","🏤":"1f3e4","🐀":"1f400","🐁":"1f401","🐂":"1f402","🐃":"1f403","🐄":"1f404","🐅":"1f405","🐆":"1f406","🐇":"1f407","🐈":"1f408","🐉":"1f409","🐊":"1f40a","🐋":"1f40b","🐏":"1f40f","🐐":"1f410","🐓":"1f413","🐕":"1f415","🐖":"1f416","🐪":"1f42a","👥":"1f465","👬":"1f46c","👭":"1f46d","💭":"1f4ad","💶":"1f4b6","💷":"1f4b7","📬":"1f4ec","📭":"1f4ed","📯":"1f4ef","📵":"1f4f5","🔀":"1f500","🔁":"1f501","🔂":"1f502","🔄":"1f504","🔅":"1f505","🔆":"1f506","🔇":"1f507","🔉":"1f509","🔕":"1f515","🔬":"1f52c","🔭":"1f52d","🕜":"1f55c","🕝":"1f55d","🕞":"1f55e","🕟":"1f55f","🕠":"1f560","🕡":"1f561","🕢":"1f562","🕣":"1f563","🕤":"1f564","🕥":"1f565","🕦":"1f566","🕧":"1f567","🔈":"1f508","🚋":"1f68b","🏅":"1f3c5","🏴":"1f3f4","📸":"1f4f8","🛌":"1f6cc","🖕":"1f595","🖖":"1f596","🙁":"1f641","🙂":"1f642","🛫":"1f6eb","🛬":"1f6ec","🏻":"1f3fb","🏼":"1f3fc","🏽":"1f3fd","🏾":"1f3fe","🏿":"1f3ff","🙃":"1f643","🤑":"1f911","🤓":"1f913","🤗":"1f917","🙄":"1f644","🤔":"1f914","🤐":"1f910","🤒":"1f912","🤕":"1f915","🤖":"1f916","🦁":"1f981","🦄":"1f984","🦂":"1f982","🦀":"1f980","🦃":"1f983","🧀":"1f9c0","🌭":"1f32d","🌮":"1f32e","🌯":"1f32f","🍿":"1f37f","🍾":"1f37e","🏹":"1f3f9","🏺":"1f3fa","🛐":"1f6d0","🕋":"1f54b","🕌":"1f54c","🕍":"1f54d","🕎":"1f54e","📿":"1f4ff","🏏":"1f3cf","🏐":"1f3d0","🏑":"1f3d1","🏒":"1f3d2","🏓":"1f3d3","🏸":"1f3f8","⏩":"23e9","⏪":"23ea","⏫":"23eb","⏬":"23ec","⏰":"23f0","⏳":"23f3","⛎":"26ce","✅":"2705","✊":"270a","✋":"270b","✨":"2728","❌":"274c","❎":"274e","❓":"2753","❔":"2754","❕":"2755","➕":"2795","➖":"2796","➗":"2797","➰":"27b0","➿":"27bf","©":"00a9","®":"00ae","‼":"203c","⁉":"2049","™":"2122","ℹ":"2139","↔":"2194","↕":"2195","↖":"2196","↗":"2197","↘":"2198","↙":"2199","↩":"21a9","↪":"21aa","⌚":"231a","⌛":"231b","Ⓜ":"24c2","▪":"25aa","▫":"25ab","▶":"25b6","◀":"25c0","◻":"25fb","◼":"25fc","◽":"25fd","◾":"25fe","☀":"2600","☁":"2601","☎":"260e","☑":"2611","☔":"2614","☕":"2615","☝":"261d","☺":"263a","♈":"2648","♉":"2649","♊":"264a","♋":"264b","♌":"264c","♍":"264d","♎":"264e","♏":"264f","♐":"2650","♑":"2651","♒":"2652","♓":"2653","♠":"2660","♣":"2663","♥":"2665","♦":"2666","♨":"2668","♻":"267b","♿":"267f","⚓":"2693","⚠":"26a0","⚡":"26a1","⚪":"26aa","⚫":"26ab","⚽":"26bd","⚾":"26be","⛄":"26c4","⛅":"26c5","⛔":"26d4","⛪":"26ea","⛲":"26f2","⛳":"26f3","⛵":"26f5","⛺":"26fa","⛽":"26fd","✂":"2702","✈":"2708","✉":"2709","✌":"270c","✏":"270f","✒":"2712","✔":"2714","✖":"2716","✳":"2733","✴":"2734","❄":"2744","❇":"2747","❗":"2757","❤":"2764","➡":"27a1","⤴":"2934","⤵":"2935","⬅":"2b05","⬆":"2b06","⬇":"2b07","⬛":"2b1b","⬜":"2b1c","⭐":"2b50","⭕":"2b55","〰":"3030","〽":"303d","㊗":"3297","㊙":"3299","🀄":"1f004","🅿":"1f17f","🈂":"1f202","🈚":"1f21a","🈯":"1f22f","🈷":"1f237","🎞":"1f39e","🎟":"1f39f","🏋":"1f3cb","🏌":"1f3cc","🏍":"1f3cd","🏎":"1f3ce","🎖":"1f396","🎗":"1f397","🌶":"1f336","🌧":"1f327","🌨":"1f328","🌩":"1f329","🌪":"1f32a","🌫":"1f32b","🌬":"1f32c","🐿":"1f43f","🕷":"1f577","🕸":"1f578","🌡":"1f321","🎙":"1f399","🎚":"1f39a","🎛":"1f39b","🏳":"1f3f3","🏵":"1f3f5","🏷":"1f3f7","📽":"1f4fd","✝":"271d","🕉":"1f549","🕊":"1f54a","🕯":"1f56f","🕰":"1f570","🕳":"1f573","🕶":"1f576","🕹":"1f579","🖇":"1f587","🖊":"1f58a","🖋":"1f58b","🖌":"1f58c","🖍":"1f58d","🖥":"1f5a5","🖨":"1f5a8","⌨":"2328","🖲":"1f5b2","🖼":"1f5bc","🗂":"1f5c2","🗃":"1f5c3","🗄":"1f5c4","🗑":"1f5d1","🗒":"1f5d2","🗓":"1f5d3","🗜":"1f5dc","🗝":"1f5dd","🗞":"1f5de","🗡":"1f5e1","🗣":"1f5e3","🗯":"1f5ef","🗳":"1f5f3","🗺":"1f5fa","🛠":"1f6e0","🛡":"1f6e1","🛢":"1f6e2","🛰":"1f6f0","🍽":"1f37d","👁":"1f441","🕴":"1f574","🕵":"1f575","✍":"270d","🖐":"1f590","🏔":"1f3d4","🏕":"1f3d5","🏖":"1f3d6","🏗":"1f3d7","🏘":"1f3d8","🏙":"1f3d9","🏚":"1f3da","🏛":"1f3db","🏜":"1f3dc","🏝":"1f3dd","🏞":"1f3de","🏟":"1f3df","🛋":"1f6cb","🛍":"1f6cd","🛎":"1f6ce","🛏":"1f6cf","🛣":"1f6e3","🛤":"1f6e4","🛥":"1f6e5","🛩":"1f6e9","🛳":"1f6f3","⏭":"23ed","⏮":"23ee","⏯":"23ef","⏱":"23f1","⏲":"23f2","⏸":"23f8","⏹":"23f9","⏺":"23fa","☂":"2602","☃":"2603","☄":"2604","☘":"2618","☠":"2620","☢":"2622","☣":"2623","☦":"2626","☪":"262a","☮":"262e","☯":"262f","☸":"2638","☹":"2639","⚒":"2692","⚔":"2694","⚖":"2696","⚗":"2697","⚙":"2699","⚛":"269b","⚜":"269c","⚰":"26b0","⚱":"26b1","⛈":"26c8","⛏":"26cf","⛑":"26d1","⛓":"26d3","⛩":"26e9","⛰":"26f0","⛱":"26f1","⛴":"26f4","⛷":"26f7","⛸":"26f8","⛹":"26f9","✡":"2721","❣":"2763","🌤":"1f324","🌥":"1f325","🌦":"1f326","🖱":"1f5b1"},e.imagePathPNG="//cdn.jsdelivr.net/emojione/assets/png/",e.imagePathSVG="//cdn.jsdelivr.net/emojione/assets/svg/",e.imagePathSVGSprites="./../assets/sprites/emojione.sprites.svg",e.imageType="png",e.sprites=!1,e.unicodeAlt=!0,e.ascii=!1,e.cacheBustParam="?v=2.1.1",e.regShortNames=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+e.shortnames+")","gi"),e.regAscii=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|((\\s|^)"+e.asciiRegexp+"(?=\\s|$|[!,.?]))","g"),e.regUnicode=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+e.unicodeRegexp+")","gi"),e.toImage=function(t){return t=e.unicodeToImage(t),t=e.shortnameToImage(t)},e.unifyUnicode=function(t){return t=e.toShort(t),t=e.shortnameToUnicode(t)},e.shortnameToAscii=function(t){var i,n=e.objectFlip(e.asciiList);return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(i=e.emojioneList[t][e.emojioneList[t].length-1],"undefined"!=typeof n[i]?n[i]:t):t})},e.shortnameToUnicode=function(t){var i;return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(i=e.emojioneList[t][0].toUpperCase(),e.convert(i)):t}),e.ascii&&(t=t.replace(e.regAscii,function(t,n,s,o){return void 0!==o&&""!==o&&e.unescapeHTML(o)in e.asciiList?(o=e.unescapeHTML(o),i=e.asciiList[o].toUpperCase(),s+e.convert(i)):t})),t},e.shortnameToImage=function(t){var i,n,s;return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(n=e.emojioneList[t][e.emojioneList[t].length-1],s=e.unicodeAlt?e.convert(n.toUpperCase()):t,i="png"===e.imageType?e.sprites?'<span class="emojione-'+n+'" title="'+t+'">'+s+"</span>":'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':'<object class="emojione" data="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'" type="image/svg+xml" standby="'+s+'">'+s+"</object>"):t}),e.ascii&&(t=t.replace(e.regAscii,function(t,o,a,r){return void 0!==r&&""!==r&&e.unescapeHTML(r)in e.asciiList?(r=e.unescapeHTML(r),n=e.asciiList[r],s=e.unicodeAlt?e.convert(n.toUpperCase()):e.escapeHTML(r),i="png"===e.imageType?e.sprites?a+'<span class="emojione-'+n+'" title="'+e.escapeHTML(r)+'">'+s+"</span>":a+'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':a+'<object class="emojione" data="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'" type="image/svg+xml" standby="'+s+'">'+s+"</object>"):t})),t},e.unicodeToImage=function(t){var i,n,s;if(!e.unicodeAlt||e.sprites)var o=e.mapShortToUnicode();return t=t.replace(e.regUnicode,function(t){return void 0!==t&&""!==t&&t in e.jsEscapeMap?(n=e.jsEscapeMap[t],s=e.unicodeAlt?e.convert(n.toUpperCase()):o[n],i="png"===e.imageType?e.sprites?'<span class="emojione-'+n+'" title="'+o[n]+'">'+s+"</span>":'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':'<img class="emojione" alt="'+s+'" src="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'"/>'):t})},e.toShort=function(t){
for(var i in e.emojioneList)if(e.emojioneList.hasOwnProperty(i))for(var n=0,s=e.emojioneList[i].length;s>n;n++){var o=e.emojioneList[i][n];t=e.replaceAll(t,e.convert(o.toUpperCase()),i)}return t},e.convert=function(e){if(e.indexOf("-")>-1){for(var t=[],i=e.split("-"),n=0;n<i.length;n++){var s=parseInt(i[n],16);if(s>=65536&&1114111>=s){var o=Math.floor((s-65536)/1024)+55296,a=(s-65536)%1024+56320;s=String.fromCharCode(o)+String.fromCharCode(a)}else s=String.fromCharCode(s);t.push(s)}return t.join("")}var i=parseInt(e,16);if(i>=65536&&1114111>=i){var o=Math.floor((i-65536)/1024)+55296,a=(i-65536)%1024+56320;return String.fromCharCode(o)+String.fromCharCode(a)}return String.fromCharCode(i)},e.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},e.unescapeHTML=function(e){var t={"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3C;":"<","&gt;":">","&#62;":">","&#x3E;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'"};return e.replace(/&(?:amp|#38|#x26|lt|#60|#x3C|gt|#62|#x3E|apos|#39|#x27|quot|#34|#x22);/gi,function(e){return t[e]})},e.mapShortToUnicode=function(){var t={};for(var i in e.emojioneList)if(e.emojioneList.hasOwnProperty(i))for(var n=0,s=e.emojioneList[i].length;s>n;n++)t[e.emojioneList[i][n]]=i;return t},e.objectFlip=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[e[t]]=t);return i},e.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,;:&\\^$|#\s]/g,"\\$&")},e.replaceAll=function(t,i,n){var s=e.escapeRegExp(i),o=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+s+")","gi"),a=function(e,t){return void 0===t||""===t?e:n};return t.replace(o,a)}}(this.emojione=this.emojione||{}),"object"==typeof module&&(module.exports=this.emojione),define("libs/emojione.min",function(){}),define("skins/default/profile/action/link",["config/main","mustache","static/utils","lib/tools","lib/helpers/popup","lib/helpers/inline_loader","lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s,o,a,r){var l=null,d=function(){return null===l&&(l=e.data.visitor.trusted),l},u=function(e,t,i,n,s){if(void 0!==e){this.link=e,this.setAction(t,i,n,s),this.enabled=!0,this.posting=!1,this.error_popup=!1;var o=this;e.on("click",function(e){return e.preventDefault(),o.trigger()})}};return u.prototype={validate:null,getPost:function(){return{}},onSuccess:null,setAction:function(e,t,i,n){this.url_or_callback=e,this.confirm=t,this.is_confirmed=!t,this.check_trusted=!!i,this.csrf_token=n||!1},setLoadingMessage:function(e){this.loading_msg=e},_is_confirmed:function(e){if(this.is_confirmed)return void e();var t="string"==typeof this.confirm?this.confirm:a.__("misc.are_you_sure"),n=this;r.confirm(i.unescape(t),function(){n.is_confirmed=!0,e()})},_is_trusted:function(){if(!this.check_trusted)return!0;if(!d()){this.clearError(),this.disable();var t=this;return n.executeRecaptcha(e.data.recaptcha_key,"istrusted",function(e){t.enable(),t.trigger(e)}),!1}return!0},enable:function(){this.enabled||this.posting||(this.enabled=!0,this.link.removeClass("disabled"))},disable:function(){this.enabled&&(this.enabled=!1,this.link.addClass("disabled"))},toggle:function(e){e?this.enable():this.disable()},showError:function(e){var t=this,i="profile-action-link-popup"+(this.aCustomPopClass&&this.aCustomPopClass.length?" "+this.aCustomPopClass.join(" "):"");this.error_popup?(this.error_popup.setContent("<strong>"+e+"</strong>"),this.error_popup.open()):(this.error_popup=new s(this.link,"<strong>"+e+"</strong>",{trigger:!1,autoclose:!1,closebtn:!0,popup_class:i}),this.error_popup.open(),this.error_popup.popup.on("click",function(){t.error_popup.close()}))},addCustomPopClass:function(e){this.aCustomPopClass||(this.aCustomPopClass=[]),this.aCustomPopClass.push(e)},clearError:function(){this.error_popup&&this.error_popup.close()},trigger:function(e){if(this.enabled&&!this.posting){var t=this;this._is_confirmed(function(){if(("function"!=typeof t.validate||t.validate())&&("string"==typeof e||t._is_trusted())){t.clearError(),t.posting=!0,t.disable();var i=t.link.html(),n=o.get("after","undefined"==typeof t.loading_msg?a.__("loading.in_progress"):t.loading_msg).appendTo(t.link.empty()),s=t.getPost();"string"==typeof e&&(s["g-recaptcha-response"]=e),t.csrf_token&&(s.csrf=t.csrf_token);var r=function(e){return n.remove(),t.link.html(i),t.posting=!1,t.enable(),e.result?void("function"==typeof t.onSuccess&&t.onSuccess(e)):900===e.code?void require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e.data.action_need_verified_email).show()}):void t.showError("string"==typeof e.message?e.message:a.__("misc.error_please_retry"))},l=function(){n.remove(),t.link.html(i),t.posting=!1,t.enable(),t.showError(a.__("misc.error_please_retry"))};"string"==typeof t.url_or_callback?$.post(t.url_or_callback,s,r,"json").fail(l):"function"==typeof t.url_or_callback&&t.url_or_callback(r)}})}}},u}),define("skins/common/thread/ui/node",["jquery","mustache","static/utils","lib/helpers/inline_loader","lib/helpers/popup","text!./node.mustache","text!./children.mustache","text!./message.mustache","text!./friend_button.mustache","lib/i18n!front","jquery.textcomplete.min","libs/emojione.min"],function(e,t,i,n,s,o,a,r,l,d){emojione.sprites=!0,emojione.ascii=!0;var u=function(e,t){void 0!==e&&(this.id_post=e,this.logic_node=t,this.node=null,this.children_node=null,this.bChildrenAnimated=!0,this.nb_children=0,this.children_open=!1,this.has_next=0,this.next_is_last=!0,this.rendered=!1,this.form_node=null,this.pending_delete=!1,this.edit=null,this.edit_timer=null,this.edit_remaining=0,this["delete"]=null,this.undelete=null,this.report=null,emojione.sprites=!0,emojione.ascii=!0,this.createNode())};return u.prototype={createChild:function(e,t){return new u(e,t)},setNbChildren:function(e){this.nb_children=e,this.children_show_label.html(d.__(this.getMessageKey("show_"+(e>1?"replies":"reply")),{"%nb%":e.toFixed(0)},e>1?"Show %nb% answers":"Show 1 answer")),this.renderChildren(),this.renderPostBtn()},getTemplate:function(){return o},getTemplateVars:function(){return{has_profile:!0,default_img:this.getDefaultPictureUrl(),lbl_load_all:d.__(this.getMessageKey("load_all_replies"),{},"Load all replies"),lbl_reply:d.__(this.getMessageKey("reply"),{},"Reply"),lbl_delete:d.__(this.getMessageKey("delete"),{},"Delete"),lbl_undelete:d.__(this.getMessageKey("restore"),{},"Restore"),lbl_hide_replies:d.__(this.getMessageKey("hide_replies"),{},"Hide replies"),lbl_post_reply:d.__(this.getMessageKey("post_reply"),{},"Reply"),lbl_report:d.__(this.getMessageKey("report"),{},"Report")}},getTemplatePartials:function(){return{children:a}},getMessageKey:function(e){switch(e){case"node_loading":case"children_loading":return"loading.loading";case"node_error":case"children_error":return"loading.error";case"node_error_retry":case"children_error_retry":return"loading.failed_retry";case"user_profile_picture":return"profile.user_profile_picture";case"anonymous":return"misc.anonymous";case"delete":return"misc.delete";case"restore":return"misc.restore";case"edit":return"misc.edit";case"show_reply":return"misc.show_one_reply";case"show_replies":return"misc.show_nb_replies";case"hide_replies":return"misc.hide_replies";case"load_next_nb_replies":return"misc.load_next_nb_replies";case"load_last_reply":return"misc.load_last_reply";case"load_last_nb_replies":return"misc.load_last_nb_replies";case"load_all_replies":return"misc.load_all_replies";case"reply":case"post_reply":return"misc.reply";case"one_reply_before":return"misc.one_reply_before";case"nb_replies_before":return"misc.nb_replies_before";case"one_reply_between":return"misc.one_reply_between";case"nb_replies_between":return"misc.nb_replies_between";case"one_reply_after":return"misc.one_reply_after";case"nb_replies_after":return"misc.nb_replies_after";case"already_friends":return"profile.friends.already_friends";case"friend_req_asked":return"profile.friends.you_asked_friends";case"add_to_friends":return"profile.friends.add_to_friends";case"report":return"report_form.report";case"report_this_post":return"report_form.report_comment";case"report_thanks":return"report_form.thanks"}return e},getDefaultPictureUrl:function(){return i.getStaticDomain()+"/v3/img/skins/default/profile_default_medium.jpg"},createNode:function(){this.node||(this.node=e(t.render(this.getTemplate(),this.getTemplateVars(),this.getTemplatePartials())),this.getNodes(),this.getFormNodes(),this.getChildrenNodes())},getNodes:function(){this.loader=this.node.find(".thread-node-loader").append(n.getSafe("after",d.__(this.getMessageKey("node_loading"),{},"Loading...")).getHtml()),this.nb_hidden_before=this.node.find(".thread-node-nb-before"),this.nb_hidden_after=this.node.find(".thread-node-nb-after"),this.error=this.node.find(".thread-node-error"),this.picture=this.node.find(".thread-node-picture"),this.content=this.node.find(".thread-node-content"),this.flag=this.node.find(".flag-small"),this.poster=this.node.find(".thread-node-poster-name"),this.message=this.node.find(".thread-node-message");var e=this;this.metadata=this.node.find(".thread-node-metadata"),this.date=this.node.find(".thread-node-date");var t=this.node.find(".thread-node-nb-votes");this.votes_count_good=t.filter(".votes-up"),this.votes_count_bad=t.filter(".votes-down"),this.thumb_up=this.node.find(".icon-f.icf-thumb-up").on("click",function(){e.pending_delete||e.logic_node.vote("GOOD")}),this.thumb_down=this.node.find(".icon-f.icf-thumb-down").on("click",function(){e.pending_delete||e.logic_node.vote("BAD")}),this.edit=this.node.find(".thread-node-btn-edit").on("click",function(){e.pending_delete||(e.form_node?(e.form_node.ui_node.node.insertAfter(e.message),e.form_node.open()):(e.form_node=e.logic_node.getForm(),e.form_node&&(e.poster.addClass("hidden"),e.message.addClass("hidden").after(e.form_node.ui_node.node),e.form_node.open(),e.logic_node.canLoadChildren()&&e.logic_node.loadChildren())),e.form_node.setEditMode(e.logic_node.edit_text,e.logic_node.edit_user,e.logic_node.edit_csrf))}),this["delete"]=this.node.find(".thread-node-btn-delete").on("click",function(){e.pending_delete||e.logic_node["delete"]()}),this.undelete=this.node.find(".thread-node-btn-restore").on("click",function(){e.pending_delete&&e.logic_node.undelete()}),this.report=this.node.find(".thread-node-btn-report").on("click",function(){e.logic_node.report()})},getFormNodes:function(){var t=this,i=this.node.find(".thread-node-btn-post").on("click",function(e){e.preventDefault(),t.createFormNodes()});this.btn_post_in_next=e(),this.btn_post_other=e(),i.each(function(){e(this).parents(".thread-node-children-load-next").length>0?t.btn_post_in_next=t.btn_post_in_next.add(this):t.btn_post_other=t.btn_post_other.add(this)})},createFormNodes:function(){this.form_node?(this.content.append(this.form_node.ui_node.node),this.form_node.open()):(this.form_node=this.logic_node.getForm(),this.form_node&&(this.content.append(this.form_node.ui_node.node),this.form_node.open(),this.logic_node.canLoadChildren()&&this.logic_node.loadChildren()))},getChildrenNodes:function(){this.children_loader=this.node.find(".thread-node-children-loader").append(n.getSafe("after",d.__(this.getMessageKey("children_loading"),{},"Loading...")).getHtml()),this.children_error=this.node.find(".thread-node-children-error");var e=this;this.children=this.node.find(".thread-node-children"),this.children_show=this.node.find(".thread-node-children-show"),this.children_show_label=this.children_show.children("span").on("click",function(){if(e.logic_node.canLoadChildren())return void e.logic_node.loadChildren();e.toggleChildren(!0)}),this.children_hide=this.node.find(".thread-node-children-hide"),this.children_hide.children("span").on("click",function(){e.toggleChildren(!1)}),this.children_node=this.node.find(".thread-node-children-nodes"),this.children_load_next=this.node.find(".thread-node-children-load-next"),this.children_load_next_btn=this.children_load_next.find(".thread-node-children-load-next-btn").on("click",function(t){t.preventDefault(),e.children_load_next_btn.addClass("hidden"),e.children_load_all_btn.addClass("hidden"),e.logic_node.loadChildren()}),this.children_load_all_btn=this.children_load_next.find(".thread-node-children-load-all-btn").on("click",function(t){t.preventDefault(),e.children_load_next_btn.addClass("hidden"),e.children_load_all_btn.addClass("hidden"),e.logic_node.loadChildren(!0)})},render:function(i){this.pending_delete=!!i.pending_delete,this.node.toggleClass("pending-delete",this.pending_delete);var n="number"==typeof i.nb_hidden_before&&i.nb_hidden_before>0,s="number"==typeof i.nb_hidden_between&&i.nb_hidden_between>0,o="number"==typeof i.nb_hidden_after&&i.nb_hidden_after>0;this.nb_hidden_before.toggleClass("hidden",!n&&!s),this.nb_hidden_after.toggleClass("hidden",!o),n&&(1===i.nb_hidden_before?this.nb_hidden_before.html("-- "+d.__(this.getMessageKey("one_reply_before"),{},"1 reply before")+" --"):this.nb_hidden_before.html("-- "+d.__(this.getMessageKey("nb_replies_before"),{"%nb%":i.nb_hidden_before.toString()},"%nb% replies before")+" --")),s&&(1===i.nb_hidden_between?this.nb_hidden_before.html("-- "+d.__(this.getMessageKey("one_reply_between"),{},"1 reply between")+" --"):this.nb_hidden_before.html("-- "+d.__(this.getMessageKey("nb_replies_between"),{"%nb%":i.nb_hidden_between.toString()},"%nb% replies between")+" --")),o&&(1===i.nb_hidden_after?this.nb_hidden_after.html("-- "+d.__(this.getMessageKey("one_reply_after"),{},"1 reply after")+" --"):this.nb_hidden_after.html("-- "+d.__(this.getMessageKey("nb_replies_after"),{"%nb%":i.nb_hidden_after.toString()},"%nb% replies after")+" --"));var a=i.name;if(a||(a=d.__(this.getMessageKey("anonymous"),{},"Anonymous")),i.url&&(a=e("<a>"+a+"</a>").prop("href",i.url)),this.picture.length>0){var r=this.getDefaultPictureUrl(),u=e("<img />");if(i.pic?u.on("error",function(){e(this).off("error").prop("src",r)}).prop("src",i.pic):u.prop("src",r),i.name&&u.prop("title",d.__(this.getMessageKey("user_profile_picture"),{"%name%":i.name},"%name% profile picture")),i.url&&(u=e("<a></a>").prop("href",i.url).append(u)),this.picture.children("a,img").remove(),this.picture.prepend(u),this.picture.removeClass("has-bottom").find(".thread-node-pic-bottom").remove(),(i.is_friend||i.friend_req_asked||i.can_ask_friend)&&(this.picture.addClass("has-bottom").append(e(t.render(l,{is_friend:i.is_friend,friend_req_asked:!i.is_friend&&i.friend_req_asked,can_ask_friend:!i.is_friend&&!i.friend_req_asked&&i.can_ask_friend,lbl_already_friends:d.__(this.getMessageKey("already_friends"),{},"You are already friends"),lbl_friend_req_asked:d.__(this.getMessageKey("friend_req_asked"),{"%name%":i.name},"You asked %name% as friend"),lbl_add_to_friends:d.__(this.getMessageKey("add_to_friends"),{},"Add to friends")}))),!i.is_friend&&!i.friend_req_asked&&i.can_ask_friend)){var c=this.picture.find(".thread-node-friend-ask-btn");require(["skins/default/profile/action/link"],function(t){var n=new t(c,"/profiles/"+i.profile+"/friends/requests/ask",!1,!1,i.ask_req_csrf);c.addClass("init-ok"),n.setLoadingMessage(""),n.onSuccess=function(){e(this.link).replaceWith("<span class='icon-f icf-user-hourglass'></span>")}})}}i.country?this.flag.removeClass().addClass("flag-small flag-"+i.country.toLowerCase()).prop("title",i.country_name):this.flag.addClass("hidden"),this.poster.empty().append(a).toggleClass("poster-model",!0===i.model).toggleClass("poster-channel",!0===i.channel).toggleClass("poster-owner",!0===i.is_owner);var f=[];"number"==typeof i.nb_videos&&(i.nb_videos>1?f.push(d.__("misc.nb_videos",{"%count%":i.nb_videos_f},"%count% videos")):i.nb_videos>0&&f.push(d.__("misc.one_video",{"%count%":i.nb_videos_f},"%count% video"))),"number"==typeof i.nb_subs&&(i.nb_subs>1?f.push(d.__("profile.subscribers",{"%count%":i.nb_subs_f},"%count% subscribers")):i.nb_subs>0&&f.push(d.__("misc.sub_count_s",{"%count%":i.nb_subs_f},"%count% subscriber"))),f.length>0&&this.poster.append('<span class="poster-stats">('+f.join(" / ")+")</span>"),this.renderMessage(i.message),this.renderDate(i.time_diff,i.date),i.lang&&this.date.append('<em> (Debug: <span class="flag-small flag-'+i.lang_country.toLowerCase()+'"></span> '+i.lang+")</em>"),this.renderVotes(i.votes),this.setupEditBtn(i.edit,i.max_edit_time),this["delete"].toggleClass("hidden",!i["delete"]),this.undelete.toggleClass("hidden",!i.undelete),this.report.toggleClass("hidden",!i.report),this.content.removeClass("hidden"),this.rendered=!0,this.renderChildren(),this.renderPostBtn()},renderDate:function(e,t){this.date.html(e).prop("title",t)},renderMessage:function(i){if("string"==typeof i)return emojione&&this.logic_node.thread.show_emojis&&(i=emojione.toImage(i)),void this.message.html(i);var n=i.m;emojione&&this.logic_node.thread.show_emojis&&(n=emojione.toImage(n));for(var o in i.p){var a=i.p[o];a.is_video="v"===a.t,a.is_profile="p"===a.t,a.is_gallery="g"===a.t,a.is_playlist="f"===a.t,n=n.replace(new RegExp("##A"+a.x+"A##","g"),t.render(r,a))}this.message.html(n).find(".preview").each(function(){var t=e(this),i=t.data("thumb");if(i){var n=t.prev(".icon,.icon-f"),o=t.next(".icon,.icon-f");n=n.length>0&&"string"==typeof n[0].outerHTML?n[0].outerHTML+" ":"",o=o.length>0&&"string"==typeof o[0].outerHTML?" "+o[0].outerHTML:"";var a=e("<span>"+n+"<strong></strong>"+o+'<br><img src="'+i+'" /></span>');a.find("strong").text(t.text());var r=new s(t,a,{relative_to:this.node,trigger:"mouseenter",popup_class:"x-thread-node-link-preview-popup"});t.on("mouseleave",function(){r.close()})}})},renderChildren:function(){this.rendered&&(this.children.toggleClass("hidden",0===this.nb_children),this.toggleChildrenShowHide(!0),this.renderPostBtn())},toggleChildren:function(e){if("boolean"!=typeof e)e=!this.children_open;else if(e===this.children_open)return;e?this.bChildrenAnimated?this.children_node.slideDown("fast"):this.children_node.show():this.bChildrenAnimated?this.children_node.slideUp("fast"):this.children_node.hide(),this.children_open=e,this.children_load_next_btn.toggleClass("hidden",!this.has_next||!this.children_open),this.children_load_all_btn.toggleClass("hidden",!this.has_next||this.next_is_last||!this.children_open),this.toggleChildrenShowHide(!0),this.renderPostBtn()},disableChildrenAnimations:function(){this.bChildrenAnimated=!1},enableChildrenAnimations:function(){this.bChildrenAnimated=!0},toggleChildrenShowHide:function(e){this.children_show.toggleClass("hidden",!e||this.children_open||this.logic_node.thread.is_admin),this.children_hide.toggleClass("hidden",!e||!this.children_open||this.logic_node.thread.is_admin)},renderVotes:function(e){this.votes_count_good.html(e.nbf).toggleClass("hidden",0===e.nb||this.pending_delete),this.votes_count_bad.html(e.nbbf).toggleClass("hidden",0===e.nbb||this.pending_delete),this.thumb_up.toggleClass("active","GOOD"===e.user).toggleClass("hidden",this.pending_delete),this.thumb_down.toggleClass("active","BAD"===e.user).toggleClass("hidden",this.pending_delete)},setupEditBtn:function(e,t){if(this.edit_timer&&(clearInterval(this.edit_timer),this.edit_timer=null),this.edit.toggleClass("hidden",!e).html(d.__(this.getMessageKey("edit"),{},"Edit")),e&&(this.edit_remaining=t-Math.round((new Date).getTime()/1e3),!(this.edit_remaining<60))){var i=this;this.edit_timer=setInterval(function(){i.updateEditTimer()},1e3),this.updateEditTimer()}},updateEditTimer:function(){if(--this.edit_remaining<=0)return this.edit_timer&&(clearInterval(this.edit_timer),this.edit_timer=null),this.edit.addClass("hidden"),void(this.form_node&&"edit"===this.form_node.ui_node.mode&&this.form_node.close());var e=[],t=Math.floor(this.edit_remaining/60);t>0&&e.push(t+"m"),e.push(this.edit_remaining-60*t+"s"),this.edit.html(d.__(this.getMessageKey("edit"),{},"Edit")+" ("+e.join(" ")+")")},renderEditBtn:function(e){if(!this.edit)return!1;e&&(this.poster.removeClass("hidden"),this.message.removeClass("hidden")),this.edit.toggleClass("hidden",!this.logic_node.can_edit||this.edit_remaining<=0||this.logic_node.isFormOpened()||this.logic_node.isDeleting()||this.logic_node.isUndeleting())},renderPostBtn:function(){if(!this.logic_node.canPost())return this.btn_post_in_next.addClass("hidden"),void this.btn_post_other.addClass("hidden");this.btn_post_in_next.toggleClass("hidden",this.logic_node.canLoadChildren()||this.logic_node.isFormOpened()||!this.children_open||this.logic_node.isDeleting()||this.logic_node.isUndeleting()),this.btn_post_other.toggleClass("hidden",this.logic_node.isFormOpened()||this.children_open||this.logic_node.isDeleting()||this.logic_node.isUndeleting())},prependChild:function(e){this.children_node.prepend(e.node)},appendChild:function(e){this.children_node.append(e.node)},setNbNext:function(e,t){if(this.has_next=e>0,this.next_is_last=e<=t,this.children_load_next_btn.toggleClass("hidden",!this.has_next||!this.children_open),this.children_load_all_btn.toggleClass("hidden",!this.has_next||this.next_is_last||!this.children_open),e>0){var i;i=1===e?d.__(this.getMessageKey("load_last_reply"),{},"Load last reply"):e<=t?d.__(this.getMessageKey("load_last_nb_replies"),{"%nb%":e.toFixed(0)},"Load last %nb% replies"):d.__(this.getMessageKey("load_next_nb_replies"),{"%nb%":t.toFixed(0)},"Load next %nb% replies"),this.children_load_next_btn.html(i)}},destroy:function(){this.node.remove(),this.form_node&&delete this.form_node},show:function(){this.node.show()},hide:function(){this.node.hide()},showLoader:function(){this.loader.removeClass("hidden"),this.content.addClass("hidden")},hideLoader:function(){this.loader.addClass("hidden")},showError:function(t,i){var n=this.error.empty().removeClass("hidden");if(!t)var s="node_error",o="Loading failed!";i&&(n=e("<a></a>").appendTo(this.error).on("click",function(e){e.preventDefault(),i()}),t||(s="node_error_retry",o="Loading failed! Please click here to retry.")),n.html(t||d.__(this.getMessageKey(s),{},o)),this.content.addClass("hidden")},hideError:function(){this.error.addClass("hidden")},showChildrenLoader:function(){this.children_loader.removeClass("hidden"),this["delete"]&&this["delete"].addClass("hidden"),this.undelete&&this.undelete.addClass("hidden"),this.children_load_next_btn.addClass("hidden"),this.children_load_all_btn.addClass("hidden")},hideChildrenLoader:function(){this.children_loader.addClass("hidden"),this["delete"]&&this["delete"].toggleClass("hidden",!this.logic_node.can_delete),this.undelete&&this.undelete.toggleClass("hidden",!this.logic_node.can_undelete)},showChildrenError:function(t,i){var n=this.children_error.empty().removeClass("hidden");if(!t)var s="children_error",o="Loading failed!";i&&(n=e("<a></a>").appendTo(this.children_error).on("click",function(e){e.preventDefault(),i()}),t||(s="children_error_retry",o="Loading failed! Please click here to retry.")),n.html(t||d.__(this.getMessageKey(s),{},o))},hideChildrenError:function(){this.children_error.addClass("hidden")},setDeleteError:function(e){this["delete"].html(e).addClass("has-error");var t=this;window.setTimeout(function(){t["delete"].html(d.__(t.getMessageKey("delete"),{},"Delete")).removeClass("has-error")},3e4)},setUndeleteError:function(e){this.undelete.html(e).addClass("has-error");var t=this;window.setTimeout(function(){t.undelete.html(d.__(t.getMessageKey("restore"),{},"Restore")).removeClass("has-error")},3e4)},disableReport:function(){this.report.addClass("success").html(d.__(this.getMessageKey("report_thanks"),{},"Thanks for your report!"))},toggleVotesDelete:function(e){this.metadata.toggleClass("votes-disabled",!e),this["delete"].toggleClass("hidden",!e||!this.logic_node.can_delete),this.undelete.toggleClass("hidden",!e||!this.logic_node.can_undelete),this.report.toggleClass("hidden",!e||!this.logic_node.can_report)}},u}),define("text!skins/common/thread/ui/root.mustache",[],function(){return'<div class="x-thread thread-{{ type }}">\r\n\t<div class="thread-header">\r\n\t\t<span class="thread-title"></span>\r\n\t\t<span class="thread-node-children-count"></span>\r\n\t\t<a href="#" class="thread-node-btn thread-node-btn-sort mobile-only-show-inline hidden"><span class="icon-f icf-sliders"></span></a>\r\n\t\t<span class="thread-sort mobile-only-hide hidden">{{{ lbl_sort_by }}}</span>\r\n\t\t<a href="#" class="thread-node-btn thread-node-btn-post hidden">{{{ lbl_post_reply }}}</a>\r\n\t</div>\r\n\t<div class="thread-form hidden"></div>\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t{{> children}}\r\n</div>'}),define("text!skins/common/thread/ui/sort_popup.mustache",[],function(){return'<ul>\n\t<li><a href="#" class="top{{#active_top}} active{{/active_top}}">{{{ lbl_top }}}</a></li>\n\t<li><a href="#" class="new{{#active_new}} active{{/active_new}}">{{{ lbl_new }}}</a></li>\n\t<li><a href="#" class="author{{#active_author}} active{{/active_author}}">{{{ lbl_author }}}</a></li>\n</ul>'}),define("skins/common/thread/ui/root",["mustache","lib/helpers/popup","./node","text!./root.mustache","text!./sort_popup.mustache","lib/i18n!front"],function(e,t,i,n,s,o){var a=function(e,t,n,s){void 0!==e&&(this.type=e,this.title=t,this.id_related=n,this.sort=null,i.apply(this,[0,null]),s.empty().append(this.node))};return a.prototype=new i,a.prototype.getTemplate=function(){return n},a.prototype.getTemplateVars=function(){var e=i.prototype.getTemplateVars.apply(this,[]);return e.type=this.type,e.lbl_sort_by=o.__(this.getMessageKey("sort_by"),{"%start_top%":'<a class="top">',"%end_top%":"</a>","%start_new%":'<a class="new">',"%end_new%":"</a>","%start_author%":'<a class="author">',"%end_author%":"</a>"},"Sort by %start_top%Top%end_top% / %start_new%New%end_new% / %start_author%Author%end_author%"),e},a.prototype.getMessageKey=function(e){return"sort_by"===e?"misc.sort_by_top_new_author":"reply"===e||"post_reply"===e?"misc.post_message":"sort_by_top"===e?"misc.top":"sort_by_new"===e?"misc.new":"sort_by_author"===e?"misc.author":"one_reply_before"===e?"misc.one_message_before":"nb_replies_before"===e?"misc.nb_messages_before":"one_reply_between"===e?"misc.one_message_between":"nb_replies_between"===e?"misc.nb_messages_between":"one_reply_after"===e?"misc.one_message_after":"nb_replies_after"===e?"misc.nb_messages_after":i.prototype.getMessageKey.apply(this,[e])},a.prototype.setNbChildren=function(e,t){i.prototype.setNbChildren.apply(this,[e]),this.sort_btn.toggleClass("hidden",0===e),this.sort_links.toggleClass("hidden",0===e),!1!==t&&this.children_count.text(e)},a.prototype.render=function(){this.rendered=!0,this.renderChildren()},a.prototype.getNodes=function(){this.content=this.node,this.node.find(".thread-title").html(this.title);var e=this;this.sort_links=this.node.find(".thread-sort"),this.sort_link_top=this.sort_links.find(".top").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("top")}),this.sort_link_new=this.sort_links.find(".new").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("new")}),this.sort_link_author=this.sort_links.find(".author").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("author")}),this.sort_btn=this.node.find(".thread-node-btn-sort"),this.createPopup(),this.form=this.node.find(".thread-form")},a.prototype.getChildrenNodes=function(){i.prototype.getChildrenNodes.apply(this,[]),this.children_hide.remove(),this.children_show.remove(),this.children_count=this.node.find(".thread-node-children-count")},a.prototype.setSort=function(e){this.logic_node.thread.is_admin&&this.node.find(".thread-header").addClass("hidden"),this.sort=e,this.sort_link_top.toggleClass("active","top"===e),this.sort_link_new.toggleClass("active","new"===e),this.sort_link_author.toggleClass("active","author"===e),this.sort_popup&&(this.sort_top.toggleClass("active","top"===e),this.sort_new.toggleClass("active","new"===e),this.sort_author.toggleClass("active","author"===e))},a.prototype.renderPostBtn=function(){if(!this.logic_node.canPost())return this.btn_post_in_next.addClass("hidden"),void this.btn_post_other.addClass("hidden");this.btn_post_in_next.toggleClass("hidden",this.logic_node.canLoadChildren()||0===this.logic_node.getNbChildren()||this.logic_node.isFormOpened()),this.btn_post_other.toggleClass("hidden",this.logic_node.canLoadChildren())},a.prototype.createPopup=function(){var i=$(e.render(s,{lbl_top:o.__(this.getMessageKey("sort_by_top"),{},"Top"),lbl_new:o.__(this.getMessageKey("sort_by_new"),{},"New"),lbl_author:o.__(this.getMessageKey("sort_by_author"),{},"Author"),active_top:"top"===this.sort,active_new:"new"===this.sort,active_author:"author"===this.sort}));this.sort_popup=new t(this.sort_btn,i,{relative_to:this.node,position:{v:"below",h:"right"},closebtn:!0,popup_class:"thread-root-sort-popup"});var n=this;this.sort_top=i.find(".top").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("top"),n.sort_popup.close()}),this.sort_new=i.find(".new").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("new"),n.sort_popup.close()}),this.sort_author=i.find(".author").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("author"),n.sort_popup.close()})},a}),define("skins/common/thread/video_comments/ui/node",["../../ui/node"],function(e){var t=function(t,i){void 0!==i&&e.apply(this,[t,i])};return t.prototype=new e,t.prototype.createChild=function(e,i){return new t(e,i)},t.prototype.getMessageKey=function(t){switch(t){case"node_loading":return"video.loading_comment";case"children_loading":return"video.loading_replies";case"children_error":return"video.failed_loading_replies";case"children_error_retry":return"video.failed_loading_replies_retry"}return e.prototype.getMessageKey.apply(this,[t])},t}),define("skins/common/thread/video_comments/ui/root",["../../ui/root","./node","lib/i18n!front"],function(e,t,i){var n=function(t,n,s){void 0!==t&&e.apply(this,["video-comments","string"==typeof s?s:i.__("video.comments",{},"Comments"),t,n])};return n.prototype=new e,n.prototype.createChild=function(e,i){return new t(e,i)},n.prototype.getMessageKey=function(t){switch(t){case"sort_by":return"misc.sort_by_top_new";case"children_loading":return"video.loading_comments";case"children_error":return"video.failed_loading_comments";case"children_error_retry":return"video.failed_loading_comments_retry";case"load_next_nb_replies":return"video.load_next_nb_comments";case"load_last_reply":return"video.load_last_comment";case"load_last_nb_replies":return"video.load_last_nb_comments";case"load_all_replies":return"misc.load_all_comments";case"reply":case"post_reply":return"video.post_a_comment";case"one_reply_before":return"misc.one_comment_before";case"nb_replies_before":return"misc.nb_comments_before";case"one_reply_between":return"misc.one_comment_between";case"nb_replies_between":return"misc.nb_comments_between";case"one_reply_after":return"misc.one_comment_after";case"nb_replies_after":return"misc.nb_comments_after"}return e.prototype.getMessageKey.apply(this,[t])},n.prototype.createPopup=function(){e.prototype.createPopup.apply(this,[]),this.sort_author.remove()},n}),define("skins/common/player/quickies/comments/ui_root",["static/log","skins/common/thread/video_comments/ui/root"],function(e,t){var i=function(e,i,n,s){this.$countContainer=s,t.apply(this,[e,i,n])};return i.prototype=new t,i.prototype.setNbChildren=function(e){t.prototype.setNbChildren.apply(this,[e]),this.$countContainer.html(e)},i}),define("skins/common/player/quickies/comments",["static/log","skins/common/thread/root","./comments/ui_root","lib/i18n!front"],function(e,t,i,n){var s=function(){this.bCommentsInitialized=!1,this.iVideoId=null,this.$container=null,this.$countContainer=null};return s.prototype={setVideoId:function(e){this.iVideoId!==e&&(this.iVideoId=e,this.bCommentsInitialized=!1)},setContainer:function(e){this.$container=e,this.bCommentsInitialized=!1},
setCountContainer:function(e){this.$countContainer=e},init:function(){if(!this.bCommentsInitialized){this.bCommentsInitialized=!0;var e=new i(this.iVideoId,this.$container,'<span class="icon-f icf-comment-o"></span> '+n.__("video.comments",{},"Comments"),this.$countContainer);e.disableChildrenAnimations();var s=new t("video-comments",this.iVideoId,e,"skins/default/form/login");s.setLoginReloadWithHash(!0),s.load()}}},s}),define("text!skins/common/player/quickies/templates/playerBox.mustache",[],function(){return'<div class="quickies__container quickies__container--{{{ sOrientation }}}">\n\t<div class="quickies__player">\n\t\t<div class="quickies__player-bg">\n\t\t\t{{{ sLoader }}}\n\t\t</div>\n\t\t<video></video>\n\t\t<div class="quickies__player-bg--blur"></div>\n\t</div>\n\t<div class="quickies__progress">\n\t\t<div class="quickies__progress__bar"></div>\n\t\t<div class="quickies__progress__bar-back"></div>\n\t\t<div class="quickies__progress__holder"></div>\n\t</div>\n\t<div class="quickies__text">\n\t\t{{^bIsProfileLevel}}\n\t\t\t{{#sUploaderDisplay}}\n\t\t\t\t<div class="quickies__uploader">\n\t\t\t\t\t{{#sProfilePic}}<img class="quickies__profile-pic" src="{{{ sProfilePic }}}" onerror="this.src=\'{{{ sDefaultProfilePic }}}\'; this.onerror=null;" alt=""/>{{/sProfilePic}}\n\t\t\t\t\t{{^sProfilePic}}<span class="icon-f icf-user"></span>{{/sProfilePic}}\n\t\t\t\t\t<span class="name">{{{ sUploaderDisplay }}}</span>\n\t\t\t\t</div>\n\t\t\t{{/sUploaderDisplay}}\n\t\t{{/bIsProfileLevel}}\n\t\t<div class="quickies__title">\n\t\t\t<span class="name">{{{ sTitle }}}</span>\n\t\t</div>\n\t\t{{#sFullVideoPageUrl}}\n\t\t\t<div class="quickies__full-video-link">\n\t\t\t\t<a href="{{{ sFullVideoPageUrl }}}">{{{ sSeeFullVideo }}}</a>\n\t\t\t</div>\n\t\t{{/sFullVideoPageUrl}}\n\t</div>\n\t<div class="quickies__actions">\n\t\t{{#bCommentsAction}}\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--comments" title="{{{ sComments }}}">\n\t\t\t\t{{#sCommentsCount}}<span class="count">{{{ sCommentsCount }}}</span>{{/sCommentsCount}}\n\t\t\t\t<span class="icon-f icf-comment-o"></span>\n\t\t\t</div>\n\t\t{{/bCommentsAction}}\n\t\t{{#bLikeActions}}\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--like" title="{{{ sLike }}}"><span class="icon-f icf-thumb-up-o"></span>{{#sVoteGoodTotal}} <span class="count">{{{ sVoteGoodTotal }}}</span>{{/sVoteGoodTotal}}</div>\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--dislike" title="{{{ sDislike }}}"><span class="icon-f icf-thumb-down-o"></span>{{#sVoteBadTotal}} <span class="count">{{{ sVoteBadTotal }}}</span>{{/sVoteBadTotal}}</div>\n\t\t{{/bLikeActions}}\n\t\t{{#bShareBtn}}\n\t\t\t<a class="quickies__actions__btn quickies__actions__btn--share" title="{{{ sShare }}}" href="{{{ sVideoPageUrl }}}">\n\t\t\t\t<span class="icon-f icf-share copy-btn"></span>\n\t\t\t</a>\n\t\t{{/bShareBtn}}\n\t\t{{#bFullscreenAction}}\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--fullscreen" title="{{{ sFullscreen }}}"><span class="icon-full-screen"><span>{{! top }}</span><span>{{! bottom }}</span></span></div>\n\t\t{{/bFullscreenAction}}\n\t\t{{#bIsProfileLevel}}\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--prev" title="{{{ sPrev }}}"><span class="icon-f icf-angle-up-circle"></span></div>\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--next" title="{{{ sNext }}}"><span class="icon-f icf-angle-down-circle"></span></div>\n\t\t{{/bIsProfileLevel}}\n\t\t{{^bIsProfileLevel}}\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--prev" title="{{{ sPrev }}}"><span class="icon-f icf-angle-up-circle-o"></span></div>\n\t\t\t<div class="quickies__actions__btn quickies__actions__btn--next" title="{{{ sNext }}}"><span class="icon-f icf-angle-down-circle-o"></span></div>\n\t\t{{/bIsProfileLevel}}\n\t</div>\n\t<div class="quickies__menus"></div>\n\t{{#bCommentsAction}}\n\t\t<div class="quickies__comments">\n\t\t\t<div class="quickies__comments__close-container">\n\t\t\t\t<div class="quickies__comments__container-with-scrollable-content">\n\t\t\t\t\t<div class="quickies__comments__container"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{/bCommentsAction}}\n\t{{#bIsProfileLevel}}\n\t\t<div class="quickies__uploader-back">\n\t\t\t<div class="quickies__uploader">\n\t\t\t\t<span class="icon-f icf-chevron-left"></span>\n\t\t\t\t{{#sProfilePic}}<img class="quickies__profile-pic" src="{{{ sProfilePic }}}" onerror="this.src=\'{{{ sDefaultProfilePic }}}\'; this.onerror=null;" alt=""/>{{/sProfilePic}}\n\t\t\t\t{{^sProfilePic}}<span class="icon-f icf-user"></span>{{/sProfilePic}}\n\t\t\t\t<span class="name">{{{ sUploaderDisplay }}}</span>\n\t\t\t</div>\n\t\t</div>\n\t{{/bIsProfileLevel}}\n\t<div class="quickies__close"><span class="icon-f icf-close-thin"></span></div>}}\n\t{{{ sProfile }}}\n</div>'}),define("text!skins/common/player/quickies/templates/playerBoxVideoLinks.mustache",[],function(){return'<div class="quickies__menu quickies__video-links-menu">\n\t<a href="{{{ sVideoPageUrl }}}" class="quickies__menu-elem">\n\t\t<span class="icon-f icf-link"></span>\n\t\t<span class="text">{{{ sOpenVideo }}}</span>\n\t</a>\n\t<a href="{{{ sVideoPageUrl }}}" target="_blank" class="quickies__external-link quickies__menu-elem">\n\t\t<span class="icon-f icf-external-link"></span>\n\t\t<span class="text">{{{ sOpenVideoTab }}}</span>\n\t</a>\n</div>'}),define("text!skins/common/player/quickies/templates/profile.mustache",[],function(){return'<div class="quickies__uploader-profile">\n\t<div class="ban">\n\t\t{{#sUploaderUrl}}<a href="{{{ sUploaderUrl }}}"></a>{{/sUploaderUrl}}\n\t</div>\n\t<h2>\n\t\t{{#sUploaderUrl}}<a href="{{{ sUploaderUrl }}}" class="quickies__profile-pic-link">{{/sUploaderUrl}}\n\t\t\t{{#sProfilePic}}<img class="quickies__profile-pic" src="{{{ sProfilePic }}}" onerror="this.src=\'{{{ sDefaultProfilePic }}}\'; this.onerror=null;" alt=""/>{{/sProfilePic}}\n\t\t{{#sUploaderUrl}}</a>{{/sUploaderUrl}}\n\t\t{{#sUploaderDisplay}}\n\t\t\t<span class="profile-name">\n\t\t\t\t{{#sUploaderUrl}}<a href="{{{ sUploaderUrl }}}">{{/sUploaderUrl}}\n\t\t\t\t\t{{^sProfilePic}}<span class="icon-f icf-user"></span>{{/sProfilePic}}\n\t\t\t\t\t<span class="name">{{{ sUploaderDisplay }}}</span>\n\t\t\t\t{{#sUploaderUrl}}</a>{{/sUploaderUrl}}\n\t\t\t</span>\n\t\t{{/sUploaderDisplay}}\n\t\t{{#sProfileTitle}}<span class="title">{{{ sProfileTitle }}}</span>{{/sProfileTitle}}\n\t\t<span class="user-subscribe">\n\t\t\t<span class="count"></span>\n\t\t</span>\n\t</h2>\n\t{{#bIsDesktopDisplay}}\n\t\t<div class="quickies__uploader-profile__video-info">\n\t\t\t<h3 class="quickies__uploader-profile__video-title">\n\t\t\t\t{{{ sVideoTitle }}}\n\t\t\t</h3>\n\t\t\t<div class="quickies__uploader-profile__video-stats">\n\t\t\t\t<span class="quickies__uploader-profile__video-views"><span class="icon-f icf-eye"></span> <span class="quickies__uploader-profile__video-views-count">{{{ sVideoNbViews }}}</span></span>\n\t\t\t</div>\n\t\t\t<div class="quickies__uploader-profile__video-full-video-link{{#sFullVideoPageUrl}} has-link{{/sFullVideoPageUrl}}">\n\t\t\t\t{{#sFullVideoPageUrl}}<a href="{{{ sFullVideoPageUrl }}}">{{{ sSeeFullVideo }}}</a>{{/sFullVideoPageUrl}}\n\t\t\t</div>\n\t\t</div>\n\t{{/bIsDesktopDisplay}}\n\t<div class="scroll">\n\t\t<div class="quickies__uploader-profile__content">\n\t\t\t{{{ sLoader }}}\n\t\t</div>\n\t</div>\n\t{{^bIsDesktopDisplay}}\n\t\t<div class="back">\n\t\t\t<span class="icon-f icf-chevron-left"></span>\n\t\t\t{{{ sBack }}}\n\t\t\t<span class="icon-f icf-close-thin"></span>\n\t\t</div>\n\t{{/bIsDesktopDisplay}}\n\t{{#bIsDesktopDisplay}}\n\t\t<div class="quickies__close">\n\t\t\t<span class="icon-f icf-close-circle"></span>\n\t\t\t<span class="icon-f icf-close-circle-o"></span>\n\t\t</div>\n\t{{/bIsDesktopDisplay}}\n</div>'}),define("text!skins/common/player/quickies/templates/profileMozaiqueContainer.mustache",[],function(){return'<div class="quickies__uploader-profile__content">\n\t\x3c!--{ { #sTitle}}\n\t\t<p class="title">{ { { sTitle }}}</p>\n\t{ { /sTitle}}--\x3e\n\t<div class="quickies__uploader-profile__content__tab quickies__uploader-profile__content__tab--mozaique-{{{ sOrientation }}} mozaique" data-toggle="quickies">\n\t</div>\n</div>'}),define("text!skins/common/player/quickies/templates/playerBoxListElem.mustache",[],function(){return'<div class="quickies__list-elem quickies__list-elem--{{{ sOrientation }}}{{#bIsUnavailable}} {{sIsUnavailableClass}}{{/bIsUnavailable}}{{#bIsViewed}} is-viewed{{/bIsViewed}}{{#bIsError}} {{sIsErrorClass}}{{/bIsError}}" data-id="{{{ sId }}}">\n\t<div class="quickies__list-elem__thumb" style="background-image:url(\'{{{ sImgUrl }}}\');">\n\t{{#bIsVerifVid}}\n\t\t<span class="icon-f icf-video-camera-check fan-video" title="{{{ sVerifVidTitle }}}"></span>\n\t{{/bIsVerifVid}}\n\t\t<span class="icon-f icf-file-broken unavailable" title="{{{ sVerifVidTitle }}}"></span>\n\t</div>\n\t<div class="quickies__list-elem__back" style="background-image:url(\'{{{ sImgUrl }}}\');"></div>\n\t<div class="quickies__list-elem__infos">\n\t\t<div class="quickies__list-elem__title">{{{ sTitle }}}</div>\n\t</div>\n\t<div class="viewed-overlay">\n\t\t<span class="icon-f icf-eye"></span>\n\t</div>\n</div>'}),define("skins/common/video/tracking_quickies",["static/log","lib/tools"],function(e,t){var i=function(){this.bAllowTracking=!1,this.bDeclareSent=!1,this.oLastView=!1};return i.S_STORAGE_KEY="last_view_quickies",i.REFS={PROFILE:"P",RELATED:"R",SEARCH:"S"},i.prototype={register:function(t,n,s){if(this.storageAvailable()&&n&&s){var o=localStorage.getItem(i.S_STORAGE_KEY);if(o){var a=JSON.parse(o);a&&a.sId&&a.sRef&&a.sId!=n&&(this.oLastView=a,this.bAllowTracking=!0)}Object.values(i.REFS).includes(s)||e.warn("Unknown tracking ref",s),this.oCurrentView={},this.oCurrentView.sId=n,this.oCurrentView.sRef=s,this.declareLink(t),localStorage.setItem(i.S_STORAGE_KEY,JSON.stringify(this.oCurrentView))}},storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},declareLink:function(t){if(this.bDeclareSent)return void e.warn("Tried to reuse the same tracking_quickies instance");if(this.oLastView&&this.bAllowTracking){this.bDeclareSent=!0;var i={};i.gentime=t,i.source_id=this.oLastView.sId,i.source_ref=this.oLastView.sRef,i.current_id=this.oCurrentView.sId,i.current_ref=this.oCurrentView.sRef,e.debug("video-hit",i),$.post("/video-hit",i)}}},i}),define("skins/common/player/quickies/playerBox",["static/log","config/main","mustache","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/scrollbar","static/storage","static/utils","libs/hls-1.2.5.min","skins/common/tracker/videos_i_like","skins/default/profile/subscribe/btn","./constants","./settingsAction","./volumeControl","./comments","./sendLostViewDurations","text!./templates/playerBox.mustache","text!./templates/playerBoxVideoLinks.mustache","text!./templates/profile.mustache","text!./templates/profileMozaiqueContainer.mustache","text!./templates/playerBoxListElem.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D){var C={},w=function(e,t){this.oManager=e,this.bInitiated=!1,this.bIsPlaying=!1,this.bAutoStart=!1,this.bProfileLoaded=!1,this.$container=null,this.$playerContainer=null,this.$player=null,this.$playerBG=null,this.$progress=null,this.$progressBar=null,this.$progressHolder=null,this.$profileOverlay=null,this.$profileOverlayContainer=null,this.bProfileOverlayOpened=!1,this.iLastProgressBarPerc=0,this.oProgressInterval=null,this.iVolume=null,this.sPauseMethod=null,this.sPlayMethod=null,this.$close=null,this.$uploader=null,this.$title=null,this.$actionBtnLike=null,this.$actionBtnDislike=null,this.$actionBtnNext=null,this.$actionBtnPrev=null,this.$actionBtnComments=null,this.$actionBtnShare=null,this.$commentsContainer=null,this.$commentsContentContainer=null,this.bCommentsOpened=!1,this.bCanPlay=!1,this.bForcePlayAdded=!1,this.fLastCurrentTime=0,this.iPlayerPlayingStartTime=null,this.fViewDuration=0,this.bIsSeeking=!1,this.bTrackingSent=!1,this.$listElem=null,this.oListElemProf={},this.oMenus={},this.sOpenedMenu=null,this.oOpenMenuTimer=null,this.bIsProfileLevel=!!t.bIsProfileLevel,this.bFullProfileInfoSet=!1,this.sUploaderFullDisplay=null,this.sProfileTitle=null,this.sProfileBannerUrl=null,this.iCountProfileQuickiesVideos=0,this.oEventListeners={},this.iEventListenerCount=0;var i=1;if(this.bIsProfileLevel)for(var n in this.oManager.oProfileLevelPlayerBoxes)i++;else for(var s in this.oManager.oMainLevelPlayerBoxes)i++;this.iNPlayer=i,this.setInfo(t),$(window).on("resize",this,this.onResizeScreen),$(window).on(f.EVENT.MUTE_TOGGLE,this,this.onToggleMute).on(f.EVENT.VOLUME_UPDATE,this,this.onVolumeChange)};return w.I_BUFFER_TIMEOUT=1e4,w.I_PROGRESSBAR_INTERVAL=100,w.I_PERC_UNDER_SKIPED=20,w.I_OPEN_MENU_BEFORE_PAUSE=5e3,w.I_TRACKING_VIEW_DURATION=5e3,w.I_TRACKING_VIEW_PERCENT=95,w.I_TRANSITION_DURATION=300,w.S_OPEN_MENU_ID_START="openMenu-",w.S_CONTAINER_SELECTOR=".quickies__container",w.S_IS_UNAVAILABLE_CLASS="is-unavailable",w.S_IS_ERROR_CLASS="is-error",w.S_ORIENTATION_VERTICAL="vertical",w.S_ORIENTATION_HORIZONTAL="horizontal",w.A_VIDEOS_I_LIKE_CLEAR_ID=[],w.O_UPDT_VIDS_ILIKE={bCallOngoing:!1,bExecOngoing:!1,aCallbackStack:[],iLastUpdateCall:null,fnExecCallbackStack:function(){var e=w.O_UPDT_VIDS_ILIKE;if(!e.bCallOngoing&&!e.bExecOngoing){for(e.bExecOngoing=!0;e.aCallbackStack.length>0;){e.aCallbackStack.shift()()}e.bExecOngoing=!1}}},w.UPDATE_VIDEOS_I_LIKE_ID=function(t){var i=w.O_UPDT_VIDS_ILIKE;if("function"==typeof t&&i.aCallbackStack.push(t),!i.bCallOngoing){var n=(new Date).getTime();if("number"==typeof i.iLastUpdateCall&&n-i.iLastUpdateCall<5e3)return void i.fnExecCallbackStack();if(i.bCallOngoing=!0,i.iLastUpdateCall=n,xv.indexedDb&&xv.indexedDb.getDbIsSupported()){var s=function(){u.getIds().then(function(e){w.A_VIDEOS_I_LIKE_CLEAR_ID=e,Array.isArray(w.A_VIDEOS_I_LIKE_CLEAR_ID)||(w.A_VIDEOS_I_LIKE_CLEAR_ID=[]),i.bCallOngoing=!1,i.fnExecCallbackStack()})["catch"](function(t){e.error("PlayerBox oVideosILikeTester call error :",t),i.bCallOngoing=!1,i.fnExecCallbackStack()})};xv.indexedDb.manageTempStackAdd(s)}else w.A_VIDEOS_I_LIKE_CLEAR_ID=u.getIds(),Array.isArray(w.A_VIDEOS_I_LIKE_CLEAR_ID)||(w.A_VIDEOS_I_LIKE_CLEAR_ID=[]),i.bCallOngoing=!1,i.fnExecCallbackStack()}},w.UPDATE_VIDEOS_I_LIKE_ID(),w.SAVE_PROFILE_TAB_TOGGLE=function(e){"string"!=typeof e||"quickies"!==e&&"comments"!==e||r.set("profileTabChoice",e,"quickies")},w.GET_SAVED_PROFILE_TAB_TOGGLE=function(){var e=r.get("profileTabChoice","quickies");return"string"!=typeof e||"quickies"!==e&&"comments"!==e?null:e},w.GET_LOADER_HTML=function(){return $(s.getIcf()).addClass("loader").wrap("<div/>").parent().html()},w.SAVE_ENCODED_TO_ID=function(e,t){"undefined"==typeof C[e]&&(C[e]=t)},w.GET_ID_BY_ENCODED=function(e){return"undefined"!=typeof C[e]?C[e]:null},w.FORMAT_INFO_FROM_JSON=function(e){var t=function(e){return!0!==e.bIsUnavailable&&!0!==e.bIsError&&(null===e.sHlsVideoUrl||null===e.sVideoUrl)};if("undefined"!=typeof e.sId)return e.bNeedsInfoLoading=t(e),e;w.SAVE_ENCODED_TO_ID(e.encoded_id,e.id);var i={sId:e.encoded_id,iIdClear:e.id,bIsUnavailable:!!e.unavailable,bIsError:!1,bIsViewed:!1,sTitle:e.title||null,sVideoPageUrl:e.url||null,iNbViews:e.nb_views||"0",sUploaderUrl:e.profile_url||null,sUploaderDisplay:e.display_name||null,sProfilePic:e.profile_pic||null,iProfileId:e.user_id||"",sUserName:e.profile_name||"",sOrientation:"HORIZONTAL"===e.ratio?w.S_ORIENTATION_HORIZONTAL:w.S_ORIENTATION_VERTICAL,bIsVerifVid:e.is_verif_vid||null,sVideoUrl:e.mp4_url||null,iCdn:e.mp4_url_idcdn||null,sHlsVideoUrl:e.hls_url||null,iHlsCdn:e.mp4_url_idcdn||null,sImgUrl:e.thumb_url||null,sImgUrlVertical:e.thumb_url_vertical||null,sImgUrlFirst:e.thumb_url_first||null,sImgUrlVerticalFirst:e.thumb_url_vertical_first||null,bCommentsEnabled:e.comments_enabled||!1,iCommentsCount:e.comments_count||null,iVoteGoodTotal:e.like_good_count||null,sVoteGoodTotal:e.like_good_count_f||null,iVoteBadTotal:e.like_bad_count||null,sVoteBadTotal:e.like_bad_count_f||null,sUrlVoteGood:e.like_good_url||null,sUrlVoteBad:e.like_bad_url||null,sUrlUnVote:e.like_remove_url||null,sFullVideoPageUrl:e.sheer_full_video_uri||null,sFullVideoPageDuration:e.sheer_full_video_duration||null,bShareInSettingsMenu:!0};if(i.sVideoPageUrl){var n=document.createElement("a");n.href=i.sVideoPageUrl,i.sVideoStaticPageUrl=n.href}else i.sVideoStaticPageUrl=null;return"string"==typeof e.liked?(e.liked=e.liked.toLowerCase(),i.bLiked="good"===e.liked||"bad"!==e.liked&&null):i.bLiked=null,i.bLiked||w.UPDATE_VIDEOS_I_LIKE_ID(function(){-1!==w.A_VIDEOS_I_LIKE_CLEAR_ID.indexOf(i.iIdClear)&&(i.bLiked=!0)}),i.bNeedsInfoLoading=t(i),i},w.prototype={setInfo:function(i){if(!i.sId)return void e.error("%c\tPB ["+(this.bIsProfileLevel?"P-":"")+this.iNPlayer+"] setInfo ---- RETURN","color:greenyellow","info not formated => no sId");if(i.bIsUnavailable){for(var n in i)"bIsUnavailable"!==n&&(this[n]=i[n]);return this.setIsUnavailable(!0),void e.debug_("%c\tPB ["+(this.bIsProfileLevel?"P-":"")+this.iNPlayer+"] setInfo ---- RETURN","color:greenyellow","Unavailable video",this.getId())}if(!(i.bNeedsInfoLoading||t.dyn.login_info&&t.dyn.login_info.is_logged||"boolean"==typeof i.bLiked))if(xv.indexedDb&&xv.indexedDb.getDbIsSupported()){var s=this,o=function(){u.hasVideo(s.getClearId()).then(function(e){e&&(s.bInitialLike=e,s.bLiked=e,s.toggleLike(e))})};xv.indexedDb.manageTempStackAdd(o)}else u.hasVideo(this.getClearId())&&(i.bLiked=!0);i.bInitialLike=i.bLiked,this.sId!==i.sId&&this.pause();for(var n in i)"bIsViewed"===n&&!1===this[n]&&!0===i[n]&&this.setDisplayToViewed(),this[n]=i[n];this.bNeedsInfoLoading||(this.loadProfileInfo(null,!0),this.triggerEvent(f.EVENT.PLAYER_BOX.INFO_SET_FULL))},getBufferDuration:function(){return Math.round(this.getCanPlayTime()-this.getLoadStartTime())/1e3},getCanPlayTime:function(){return this.iPlayerCanPlayTime||null},getCDN:function(){return this.oManager.canIUseAnyHls()?this.iHlsCdn:this.iCdn},getId:function(){return this.sId},getEscapedTitle:function(){return l.escape(l.unescape(this.sTitle))},getEscapedProfile:function(){return l.escape(l.unescape(this.sUploaderDisplay))},getClearId:function(){return this.iIdClear},getProfileId:function(){return this.iProfileId},getCommentsCountStr:function(e){return this.iCommentsCount>0?this.iCommentsCount.toLocaleString(t.dyn.locale):!!e&&(0).toLocaleString(t.dyn.locale)},getProfileVideoCountStr:function(e){return this.iCountProfileQuickiesVideos>0?this.iCountProfileQuickiesVideos.toLocaleString(t.dyn.locale):!!e&&(0).toLocaleString(t.dyn.locale)},needsLoading:function(){return this.bNeedsInfoLoading},getOrientation:function(){return this.sOrientation},getListElem:function(){return this.$listElem&&this.$listElem.length?this.$listElem:(this.$listElem=this.makeListElem(),this.$listElem.on("click",this,this.onClickListElem),this.$listElem)},getListElemInProfile:function(e){"string"==typeof e&&e.length||(e="default");var t=this.oListElemProf[e];return void 0!==t?t.off().on("click",this,this.onClickListElemProfile):(t=this.makeListElem(),t.on("click",this,this.onClickListElemProfile),this.oListElemProf[e]=t,t)},makeListElem:function(){return $(i.render(D,{sOrientation:this.getOrientation(),sId:this.sId,sTitle:this.sTitle,sImgUrl:this.getOrientation()===w.S_ORIENTATION_VERTICAL&&this.sImgUrlVertical?this.sImgUrlVertical:this.sImgUrl,bIsVerifVid:this.bIsVerifVid,bIsViewed:this.bIsViewed,bIsUnavailable:this.isUnavailable(),sIsUnavailableClass:w.S_IS_UNAVAILABLE_CLASS,bIsError:this.isError(),sIsErrorClass:w.S_IS_ERROR_CLASS,sVerifVidTitle:n.__("video.xv_fan_video","XV Fan Video")}))},setDisplayToViewed:function(){for(var e in this.oListElemProf){var t=this.getListElemInProfile(e);t&&t.length&&t.addClass("is-viewed")}var i=this.getListElem();i&&i.addClass("is-viewed")},getLoadStartTime:function(){return this.iPlayerLoadStartTime||null},getPauseMethod:function(){return this.sPauseMethod},getPlayMethod:function(){return this.sPlayMethod},getPlayer:function(e){if(!this.$player||!this.$player.length){if(!0!==e)return!1;this.makeContainer()}return this.$player[0]},getPlayerCurrentTime:function(){var e=this.getPlayer();return e&&"number"==typeof e.currentTime?e.currentTime:null},getPlayerFullTime:function(){var e=this.getPlayer();return e.duration||console.error("%c\tPB ["+(this.bIsProfileLevel?"P-":"")+this.iNPlayer+"] getPlayerFullTime --- !$player.duration","color:greenyellow",e),e&&e.duration||null},getPlayerLeftTime:function(){var e=this.getPlayerFullTime(),t=this.getPlayerCurrentTime();return null!==e&&null!==t?e-t:null},getPlayedPerc:function(){var e=this.getPlayer();return e&&e.currentTime&&e.duration?Math.floor(e.currentTime/e.duration*100*100)/100:null},getVolume:function(){return this.iVolume},setIsError:function(e){if("boolean"!=typeof e&&(e=!0),this.bIsError!==e){this.bIsError=e,this.bIsError&&(this.bIsPlaying=!1,this.bNeedsInfoLoading=!1),this.$listElem&&this.$listElem.length&&this.$listElem.toggleClass(w.S_IS_ERROR_CLASS,this.bIsError);for(var t in this.oListElemProf){var i=this.oListElemProf[t];i&&i.length&&i.toggleClass(w.S_IS_ERROR_CLASS,this.bIsError)}this.oManager.setPlayerIsError(this.sId,this.bIsError)}},setIsUnavailable:function(e){if(this.bIsUnavailable!==e){this.bIsUnavailable=e,this.bNeedsInfoLoading=!1,this.bIsUnavailable&&this.setIsError(!0),this.$listElem&&this.$listElem.length&&this.$listElem.toggleClass(w.S_IS_UNAVAILABLE_CLASS,this.bIsUnavailable);for(var t in this.oListElemProf){var i=this.oListElemProf[t];i&&i.length&&i.toggleClass(w.S_IS_UNAVAILABLE_CLASS,this.bIsUnavailable)}}},isCurrentPlayBox:function(){return this.oManager.getCurrentVideoId()===this.getId()},isError:function(){return this.bIsError},isUnavailable:function(){return this.bIsUnavailable},isMuted:function(){return this.oManager.isMuted()},isProfileOverlayOpened:function(){return this.bProfileOverlayOpened},getViewDurationForMonitoring:function(){var e=Math.min(this.getPlayerFullTime(),((new Date).getTime()-this.iPlayerPlayingStartTime)/1e3);return this.fViewDuration>e?Math.round(e):Math.round(this.fViewDuration)},getContainer:function(e){return e||this.$container&&this.$container.length&&!this.isError()?(this.$container&&this.$container.length||this.makeContainer(),e&&this.setVideoSource(this.sVideoUrl,this.sHlsVideoUrl),this.$container):null},makeContainer:function(){if(!this.bInitiated){var e="";this.bIsProfileLevel||(e=i.render(v,this.getProfileInfoForTpl())),this.$container=$(i.render(m,{sOrientation:this.getOrientation(),sUploaderDisplay:this.sUploaderDisplay,sProfilePic:this.sProfilePic,sDefaultProfilePic:t.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",sTitle:this.sTitle,sVideoPageUrl:this.sVideoPageUrl,sFullVideoPageUrl:this.sFullVideoPageUrl,sSeeFullVideo:n.__("video.get_full_length_on",{"%duration%":this.sFullVideoPageDuration,"%site%":'XVideos<span class="icon-f icf-ticket-red icf-white-fill" title="RED"></span>'}),bCommentsAction:this.bCommentsEnabled,sCommentsCount:this.getCommentsCountStr(),sVideosCount:this.getProfileVideoCountStr(),sVoteGoodTotal:!!this.iVoteGoodTotal&&(this.iVoteGoodTotal<999?this.iVoteGoodTotal:this.sVoteGoodTotal),sVoteBadTotal:!!this.iVoteGoodTotal&&(this.iVoteBadTotal<999?this.iVoteBadTotal:this.sVoteBadTotal),bLikeActions:"string"==typeof this.sUrlVoteGood&&"string"==typeof this.sUrlVoteBad,sLike:n.__("misc.i_like"),sDislike:n.__("misc.i_dislike"),bShareBtn:!this.bShareInSettingsMenu,sShare:n.__("video.share_this"),sComments:n.__("video.comments"),sPrev:n.__("misc.previous"),sNext:n.__("misc.next"),bFullscreenAction:this.oManager.isFullscreenSupported(),sFullscreen:n.__("misc.fullscreen"),bIsProfileLevel:this.bIsProfileLevel,sProfile:e})),this.$uploader=this.$container.find(".quickies__uploader"),this.$uploader.on("click",this,this.onClickUploader),this.$title=this.$container.find(".quickies__title"),this.$title.on("click",this,this.onClickTitle),this.$playerContainer=this.$container.find(".quickies__player"),this.$playerContainer.on("click",this,this.onClickPlayer).on("contextmenu",this,this.onContextmenu),this.$player=this.$playerContainer.find("video"),this.$playerContainer.find(".quickies__player-bg--blur").css("background-image",'url("'+(this.getOrientation()===w.S_ORIENTATION_VERTICAL&&this.sImgUrlVerticalFirst?this.sImgUrlVerticalFirst:this.sImgUrlFirst)+'")'),this.$playerBG=this.$playerContainer.find(".quickies__player-bg"),this.$playerBG.css("background-image",'url("'+(this.getOrientation()===w.S_ORIENTATION_VERTICAL&&this.sImgUrlVerticalFirst?this.sImgUrlVerticalFirst:this.sImgUrlFirst)+'")'),this.$progress=this.$container.find(".quickies__progress"),this.$progressBar=this.$progress.find(".quickies__progress__bar"),this.$progressHolder=this.$progress.find(".quickies__progress__holder"),this.$progress.on("mousedown",this,this.onMouseDownProgressBar).on("touchstart",this,this.onTouchProgressBar).on("touchmove",this,this.onTouchProgressBar),this.$close=this.$container.find(".quickies__close"),this.$close.on("click",this,this.onClickClose),this.$sideActions=this.$container.find(".quickies__actions"),this.$menus=this.$container.find(".quickies__menus"),this.$menus.on("click",this,this.onClickMenusBack),this.$actionBtnDislike=this.$sideActions.find(".quickies__actions__btn--dislike"),this.$actionBtnDislikeCount=this.$actionBtnDislike.find(".count"),this.$actionBtnDislike.on("click",this,this.onClickDislike),this.$actionBtnLike=this.$sideActions.find(".quickies__actions__btn--like"),this.$actionBtnLikeCount=this.$actionBtnLike.find(".count"),this.$actionBtnLike.on("click",this,this.onClickLike),this.$actionBtnShare=this.$sideActions.find(".quickies__actions__btn--share"),this.$actionBtnShare.on("click",this,this.onClickShare),this.bCommentsEnabled&&(this.$actionBtnComments=this.$sideActions.find(".quickies__actions__btn--comments"),this.$actionBtnComments.on("click",this,this.onClickComments),this.$actionBtnCommentsCount=this.$actionBtnComments.find(".count"),this.$commentsContainer=this.$container.find(".quickies__comments"),this.$commentsContainer.on("click",this,this.onClickCommentsBack),this.$commentsContentContainer=this.$commentsContainer.find(".quickies__comments__container")),this.$actionBtnPrev=this.$sideActions.find(".quickies__actions__btn--prev"),this.$actionBtnPrev.on("click",this,this.onClickPrev),this.$actionBtnNext=this.$sideActions.find(".quickies__actions__btn--next"),this.$actionBtnNext.on("click",this,this.onClickNext),this.$actionBtnFullscreen=this.$sideActions.find(".quickies__actions__btn--fullscreen"),this.$actionBtnFullscreen.on("click",this,this.onClickFullscreen),this.toggleLike(this.bLiked),this.oVolumeControl=new p(this),this.$sideActions.prepend(this.oVolumeControl.getButton()),this.oSettingsAction=new h(this),this.$sideActions.append(this.oSettingsAction.getButton()),this.$profileOverlay=this.$container.find(".quickies__uploader-profile"),this.$profileOverlay.find(".back").on("click",this,this.onClickUploaderOverlayBack),this.$profileOverlayContainer=this.$profileOverlay.find(".quickies__uploader-profile__content"),this.$profileOverlayScroll=this.$profileOverlay.find(".scroll"),this.oManager.appendPlayer(this.$container,this.bIsProfileLevel?f.DISPLAY_LEVEL.PROFILE_VIDEO:f.DISPLAY_LEVEL.MAIN);var s=this;this.oProfileContentScroll=new a({oOptions:{$Container:this.$profileOverlayScroll,sMode:a.S_MODE_VERTICAL},oListeners:{fnOnScroll:function(e){s.onScrollUploaderOverlay(e)}}}),this.bAutoStart=!1,this.pause();var o=this.getPlayer();if(!o)return void console.error("%c\tPB ["+(this.bIsProfileLevel?"P-":"")+this.iNPlayer+"]","color:mediumseagreen","creating player didn't work");$(o).off().prop("controls",!1).prop("autoplay",!1).prop("poster",this.getOrientation()===w.S_ORIENTATION_VERTICAL&&this.sImgUrlVerticalFirst?this.sImgUrlVerticalFirst:this.sImgUrlFirst).attr("disablePictureInPicture","true").attr("playsinline","").attr("preload","auto").on("contextmenu",this,this.onContextmenu).on("abort",this,this.onPlayerAbort).on("canplay",this,this.onPlayerCanPlay).on("ended",this,this.onPlayerEnded).on("error",this,this.onPlayerError).on("loadstart",this,this.onPlayerLoadStart).on("playing",this,this.onPlayerPlaying).on("seeked",this,this.onPlayerSeeked).on("timeupdate",this,this.onPlayerTimeUpdate).on("paused",this,this.onPlayerPaused),this.toggleLike(this.bLiked),this.setVolume(),this.bInitiated=!0}},getProfileInfoForTpl:function(){return{sUploaderDisplay:this.sUploaderFullDisplay?this.sUploaderFullDisplay:this.sUploaderDisplay,sProfileTitle:!!this.sProfileTitle&&this.sProfileTitle,sProfileBannerUrl:!!this.sProfileBannerUrl&&this.sProfileBannerUrl,sUploaderUrl:this.sUploaderUrl,bIsUploaderPage:"object"==typeof t.data&&"profile"===t.data.action&&t.data.user.id_user.toString()===this.iProfileId.toString(),sProfilePic:this.sProfilePic,sDefaultProfilePic:t.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",sVideoTitle:this.sTitle,sCommentsCount:this.getCommentsCountStr(),sVideosCount:this.getProfileVideoCountStr(),sVideoNbViews:this.iNbViews.toLocaleString(t.dyn.locale),sFullVideoPageUrl:this.sFullVideoPageUrl,sSeeFullVideo:n.__("video.get_full_length_on",{"%duration%":this.sFullVideoPageDuration,"%site%":'XVideos<span class="icon-f icf-ticket-red icf-white-fill" title="RED"></span>'}),sOpenInTab:n.__("quickies.open_in_tab"),sOpenPage:n.__("quickies.open_page"),sBack:n.__("misc.back"),sLoader:w.GET_LOADER_HTML()}},closeContainer:function(){this.bInitiated&&(this.bIsProfileLevel||this.closeMenus({bNoHash:!0}),this.oBufferTimer&&(clearTimeout(this.oBufferTimer),this.oBufferTimer=null),this.pause(),this.killAndRemovePlayer(),this.$container&&this.$container.length&&this.$container.detach(),this.sSrcSet=null,this.$container=null,this.bInitiated=!1)},updateSideActions:function(){if(this.oSideActionsTimer&&(clearTimeout(this.oSideActionsTimer),this.oSideActionsTimer=null),this.$sideActions&&this.$sideActions.length){var e=this.getContainer();if(e&&e.length){e.removeClass("quickies--actions-3cols");var t=this;this.oSideActionsTimer=setTimeout(function(){t.$sideActions.outerHeight()<t.$sideActions[0].scrollHeight&&e.addClass("quickies--actions-3cols")},0)}}},updateVideoRatioFit:function(){var e=this.getPlayer();if(e){e=$(e);var t=this;setTimeout(function(){var i=e.outerWidth(),n=e.outerHeight(),s=n/i,o=t.getContainer();if(o&&o.length){var a=o.width(),r=o.height(),l=r/a;t.getOrientation(),s<l?e.css({height:"auto",width:"100%"}):e.css({height:"100%",width:"auto"}),setTimeout(function(){t.oManager.isProfileInfoContainerVisible()?t.$progress.css({top:"calc(50% + "+Math.floor(e.outerHeight())/2+"px)",width:Math.floor(e.outerWidth())}):t.$progress.css({top:"100%",width:"100%"}),t.$playerBG.css({height:Math.floor(e.outerHeight()),width:Math.floor(e.outerWidth()),"padding-bottom":0,"padding-right":0})},0)}},0)}},toggleLike:function(i){if(!this.bIsVoting&&this.$actionBtnLike&&this.$actionBtnLike.length&&this.$actionBtnDislike&&this.$actionBtnDislike.length){if(this.bIsVoting=!0,void 0===i&&(i=!this.bLike),this.bLiked===i)return this.bIsVoting=!1,this.$actionBtnLike.toggleClass("is-liked",!0===i),void this.$actionBtnDislike.toggleClass("is-disliked",!1===i);var n=!0===i?this.sUrlVoteGood:!1===i?this.sUrlVoteBad:this.sUrlUnVote,s=this;s.$actionBtnLike.toggleClass("is-liked is-animated",!0===i),s.$actionBtnDislike.toggleClass("is-disliked is-animated",!1===i),s.$actionBtnLikeCount&&s.iVoteGoodTotal<999&&(!0===i?s.$actionBtnLikeCount.html(s.iVoteGoodTotal+(!0===s.bInitialLike?0:1)):!0===s.bLiked&&s.$actionBtnLikeCount.html(s.iVoteGoodTotal-(!0===s.bInitialLike?1:0))),s.$actionBtnDislikeCount&&s.iVoteBadTotal<999&&(!1===i?s.$actionBtnDislikeCount.html(s.iVoteBadTotal+(!1===s.bInitialLike?0:1)):!1===s.bLiked&&s.$actionBtnDislikeCount.html(s.iVoteBadTotal-(!1===s.bInitialLike?1:0))),$.post({url:n,
dataType:"json",success:function(o){if(e.debug_("%c\tPB ["+(s.bIsProfileLevel?"P-":"")+s.iNPlayer+"] toggleLike","color:greenyellow",{sUrl:n,oPostData:"[no data sent]",oReceivedData:o}),o.result&&(s.bLiked=i,t.dyn.login_info&&t.dyn.login_info.is_logged||(i?u.addVideo(s.getClearId()):u.removeVideo(s.getClearId())),!1===i)){var a=1e3*s.getPlayerLeftTime();setTimeout(function(){s.isCurrentPlayBox()&&(s.sendMonitoring(f.MONITORING.VIEW,'next - on "dislike"',!0),s.oManager.playNext())},Math.min(a,700))}},error:function(t,i,o){e.debug_("%c\tPB ["+(s.bIsProfileLevel?"P-":"")+s.iNPlayer+"] toggleLike --- ERROR","color:greenyellow",n,{status:i,error:o})},complete:function(){s.bIsVoting=!1}})}},toggleVideoLinksMenu:function(e){"boolean"!=typeof e&&(e="video-links"!==this.sOpenedMenu),e?(this.makeVideoLinksMenu(),this.openMenu("video-links")):this.closeMenus()},makeVideoLinksMenu:function(){this.hasMenu("video-links")||(this.makeContainer(),$videoLinks=$(i.render(b,{sVideoPageUrl:this.sVideoStaticPageUrl,sOpenVideoTab:n.__("quickies.open_video_tab"),sOpenVideo:n.__("quickies.open_video")})),this.appendMenu("video-links",$videoLinks))},canBeSwiped:function(){return!this.isCommentingOpened()},shareUrl:function(e){var t=this,i=l.escape(window.location.href),s=function(){require(["lib/helpers/overlay/contextual_popup"],function(e){var t=e.alert('<input type="text" value="'+i+'" class="quickies-popup-share__input"/>'),s=t.getNode(),a=s.find(".quickies-popup-share__input");a.focus(),a.select(),document.execCommand("copy"),new o(a,"<p>"+n.__("misc.copied_link")+"</p>",{relative_to:$("body"),popup_class:"quickies-popup-share--copied",trigger:!1,autoclose:!0,close_method:"close",mouseout_autoclose:1500,autoclose_on_same_level:"any_level",mouseout_autoclose_openevents:["click","no_event"],position:{h:"right",v:"above"}}).open()})};"undefined"!=typeof window.navigator&&"function"==typeof window.navigator.share?window.navigator.share({title:l.escape(this.sTitle),url:i})["catch"](function(e){e.toString().includes("AbortError")||s()}):window.navigator.clipboard?window.navigator.clipboard.writeText(i).then(function(){var i=t.getContainer();if(!i||!i.length)return void s();new o(e,"<p>"+n.__("misc.copied_link")+"</p>",{relative_to:i,popup_class:"quickies-popup-share--copied",trigger:!1,autoclose:!0,close_method:"close",mouseout_autoclose:3e3,autoclose_on_same_level:"any_level",mouseout_autoclose_openevents:["click","no_event"],position:{h:"right",v:"above"}}).open()})["catch"](function(){s()}):s()},getMenus:function(){return this.makeContainer(),this.$menus},appendMenu:function(e,t){var i=this.getMenus();this.oMenus[e]=t,i.append(t)},hasMenu:function(e){return"undefined"!=typeof this.oMenus[e]&&this.oMenus[e].length},isMenuOpened:function(){return"string"==typeof this.sOpenedMenu&&this.sOpenedMenu.length},menuOpenedPauseAtEnd:function(){this.setCurrentTimeToEnd(),this.bIsPlaying=!0,this.pause(w.S_OPEN_MENU_ID_START+this.sOpenedMenu)},openMenu:function(e){var t=!1;for(var i in this.oMenus)$menu=this.oMenus[i],i===e?($menu.show(),t=!0):$menu.hide();var n=this.getMenus();if(t){if(n.fadeIn(),this.sOpenedMenu=e,"volume"!==e){var s=this;this.oOpenMenuTimer=setTimeout(function(){s.oOpenMenuTimer=null,s.pause(w.S_OPEN_MENU_ID_START+e)},w.I_OPEN_MENU_BEFORE_PAUSE)}}else n.fadeOut(),this.oOpenMenuTimer&&(clearTimeout(this.oOpenMenuTimer),this.oOpenMenuTimer=null),this.play(w.S_OPEN_MENU_ID_START+this.sOpenedMenu),this.sOpenedMenu=null},closeMenus:function(e){this.openMenu(""),this.closeComments(!0),this.oVolumeControl&&this.oVolumeControl.closeSlider(),e&&"object"==typeof e&&e.bDontCloseProfileOverlay||this.closeProfileOverlay(e&&"object"==typeof e&&"boolean"==typeof e.bNoHash?e.bNoHash:null)},isCommentingOpened:function(){return!!this.bCommentsOpened},openComments:function(){this.toggleComments(!0)},closeComments:function(e){this.toggleComments(!1,e)},toggleComments:function(e,t){if(this.bCommentsEnabled){if("boolean"!=typeof e)e=!this.bCommentsOpened;else if(e===this.bCommentsOpened)return;if(e){if(this.bCommentsOpened=!0,"function"==typeof this.fnUseAlternativeCommentsContainer&&this.fnUseAlternativeCommentsContainer())return this.toggleComments(!1,t);this.reinitComments(),this.$commentsContainer.addClass("is-open"),this.bCommentsOpeningWhilePlaying=this.bIsPlaying,this.bCommentsOpeningWhilePlaying&&this.pause()}else t?(this.$commentsContainer.removeClass("is-open"),this.bCommentsOpened=!1,this.oCommentContentScroll&&this.oCommentContentScroll.destroy(),this.bCommentsOpeningWhilePlaying&&this.play()):this.closeMenus();this.oManager.setHash()}},reinitComments:function(){if(this.bCommentsEnabled){var e=new _;this.oCommentContentScroll&&this.oCommentContentScroll.destroy(),this.$commentsContentContainer.empty(),e.setVideoId(this.getClearId()),e.setContainer(this.$commentsContentContainer),e.setCountContainer(this.$actionBtnCommentsCount),e.init(),this.oCommentContentScroll=new a({oOptions:{$Container:this.$commentsContentContainer,sMode:a.S_MODE_VERTICAL}})}},toggleProfileOverlay:function(e,t){if("boolean"!=typeof e&&(e=!this.bProfileOverlayOpened),this.bProfileOverlayOpened!==e){if(this.bIsProfileLevel)return void this.close();this.closeMenus({bDontCloseProfileOverlay:e}),this.bProfileOverlayOpened=e;if(this.getContainer().addClass("profile-overlay-is-opened"),e){this.pause(),this.$profileOverlay.stop().animate({left:0},w.I_TRANSITION_DURATION),this.oManager.setProfileOverlayState(!0,t);var i=this;this.loadProfileInfo(function(e){i.makeProfileOverlay(e)})}else this.play()}},closeProfileOverlay:function(e){if(!this.bIsProfileLevel){this.$profileOverlay&&this.$profileOverlay.stop().animate({left:"100%"},w.I_TRANSITION_DURATION),this.bProfileOverlayOpened=!1;var t=this.getContainer();t&&t.removeClass("profile-overlay-is-opened"),this.oManager.setProfileOverlayState(!1,e)}},loadProfileInfo:function(e,t){var i=this;!this.iProfileId||t&&!this.oManager.isProfileInfoInit(this.iProfileId)||this.oManager.loadProfileInfo(this.iProfileId,function(t){i.updateFullProfileInfo(t),"function"==typeof e&&e(t)})},updateFullProfileInfo:function(e){this.bFullProfileInfoSet||this.iProfileId===e.iId&&(this.bFullProfileInfoSet=!0,this.sUploaderFullDisplay=e.sFullDisplayName,this.sProfileTitle=e.sTitle,this.sProfileBannerUrl=e.sBanner,this.iCountProfileQuickiesVideos=e.iCountQuickiesVideos||0)},initProfileOverlayHeader:function(e){if(!e||!e.length){if(!this.isProfileOverlayOpened()||!this.$profileOverlay||!this.$profileOverlay.length)return;e=this.$profileOverlay}var t=this.getProfileInfoForTpl();e.find("h2 .name").html(t.sUploaderDisplay),t.sProfileBannerUrl&&(e.find(".ban").css({"background-image":"url("+t.sProfileBannerUrl+")"}).addClass("has-banner"),e.find(".ban a").css({"background-image":"url("+t.sProfileBannerUrl+")"})),new c(e.find(".user-subscribe"),this.sUserName,this.iProfileId,null,null,null,{subed_icf:!1,unsubed_text:n.__("subscriptions.subscribe"),subed_text:n.__("profile.subscribed"),tooltip_class:"no-arrow"})},makeProfileOverlay:function(e){this.removeProfileOverlayLoader();var t=$(i.render(y,{sOrientation:this.oManager.getOrientation()}));this.bProfileOverlayMade||(this.initProfileOverlayHeader(this.$profileOverlay),this.bProfileOverlayMade=!0),this.$profileOverlayContainer.replaceWith(t),this.$profileOverlayContainer=t,this.updateProfileOverlayMoz(e),this.oProfileContentScroll&&this.oProfileContentScroll.forceUpdateView(!0)},simulateProfileContainerScroll:function(){this.oProfileContentScroll&&this.oProfileContentScroll.onScrollCallback(!0)},getProfileOverlay:function(){return this.$profileOverlayContainer&&this.$profileOverlayContainer.length?this.$profileOverlayContainer:null},getProfileOverlayMoz:function(e){if(!e||!e.length){if(!this.isProfileOverlayOpened()||!this.$profileOverlayContainer||!this.$profileOverlayContainer.length)return null;e=this.$profileOverlayContainer}if(!e||!e.length)return null;var t=e.find(".mozaique");return t&&t.length?t:null},updateProfileOverlayMoz:function(e,t,i){var n=this.getProfileOverlayMoz(t);if(n&&n.length){n.empty();for(var s in e.aVideoIds){var o=this.oManager.getPlayerBox(e.aVideoIds[s],f.DISPLAY_LEVEL.PROFILE_VIDEO);if(o&&!o.isError()&&!o.isUnavailable()){var a=o.getListElemInProfile(i);this.oManager.isVideoViewed(o.getId())&&a.addClass("is-viewed"),o.getId()===this.getId()?a.addClass("is-current"):a.removeClass("is-current"),n.append(a)}}this.simulateProfileContainerScroll();var r=this;setTimeout(function(){r.simulateProfileContainerScroll()},50)}},setProfileInfoVideoInfo:function(e){if(e&&e.length){e.find(".quickies__uploader-profile__video-title").html(this.sTitle),e.find(".quickies__uploader-profile__video-views-count").html(this.iNbViews.toLocaleString(t.dyn.locale)),e.find(".quickies__uploader-profile__content__btn--comments .quickies__uploader-profile__content__btn__count").html(this.getCommentsCountStr()),e.find(".quickies__uploader-profile__content__btn--quickies .quickies__uploader-profile__content__btn__count").html(this.getProfileVideoCountStr());var i=e.find(".quickies__uploader-profile__video-full-video-link");this.sFullVideoPageUrl?(i.html('<a href="'+this.sFullVideoPageUrl+'">'+n.__("video.get_full_length_on",{"%duration%":this.sFullVideoPageDuration,"%site%":'XVideos<span class="icon-f icf-ticket-red icf-white-fill" title="RED"></span>'})+"</a>"),i.addClass("has-link")):(i.html(""),i.removeClass("has-link"));var s=e.find(".mozaique .quickies__list-elem");s.filter(".is-current").each(function(){$(this).removeClass("is-current")}),s.filter("[data-id="+this.getId()+"]").addClass("is-current")}},initToggleProfileTabs:function(e,t,i){var n=!1;if(!t||!t.length){if(!this.isProfileOverlayOpened()||!this.$profileOverlayContainer||!this.$profileOverlayContainer.length)return;t=this.$profileOverlayContainer,n=!0}var s=t.find(".quickies__uploader-profile__content__tabs .quickies__uploader-profile__content__btn"),o=this;s.off("click").on("click",function(e){e.preventDefault(),o.toggleProfileTabs($(this).data("toggle"),t,null,n,i)}),this.fnUseAlternativeCommentsContainer=function(){return!(!o.oManager.isProfileInfoContainerVisible()||!o.initProfileTabComments(t))&&(o.toggleProfileTabs("comments",t,null,n,i),!0)},this.toggleProfileTabs(e,t,null,n,i)},toggleProfileTabs:function(e,t,i,n,s){if("boolean"!=typeof n&&(n=!1),!t||!t.length){if(!this.isProfileOverlayOpened()||!this.$profileOverlayContainer||!this.$profileOverlayContainer.length)return;t=this.$profileOverlayContainer,n=!0}"comments"!==e&&"quickies"!==e?this.iCommentsCount<1?e="quickies":"comments"!==(e=w.GET_SAVED_PROFILE_TAB_TOGGLE())&&"quickies"!==e&&(e=n?"quickies":"comments"):!0!==i&&w.SAVE_PROFILE_TAB_TOGGLE(e);var o=t.find(".quickies__uploader-profile__content__tabs .quickies__uploader-profile__content__btn"),a=t.find(".quickies__uploader-profile__content__tab");o.removeClass("is-active").filter("[data-toggle="+e+"]").addClass("is-active"),a.hide().filter("[data-toggle="+e+"]").show(),"comments"===e&&this.initProfileTabComments(t,!0),"function"==typeof s&&s(e)},initProfileTabComments:function(e,t,i){var n=e.find(".quickies__uploader-profile__content__tab[data-toggle=comments]");if(!n.length||!0!==i&&n.data("is-init")===this.getId()||!0!==t&&!this.oManager.isProfileInfoContainerVisible()&&(!0!==i||n.data("is-init")!==this.getId()))return n.data("is-init")===this.getId();n.empty();var s=new _,o=e.find(".quickies__uploader-profile__content__tabs .quickies__uploader-profile__content__btn[data-toggle=comments] .quickies__uploader-profile__content__btn__count");return s.setVideoId(this.getClearId()),s.setContainer(n),o.length&&s.setCountContainer(o),s.init(),n.data("is-init",this.getId()),!0},addPlayerLoader:function(){if(this.$playerBG&&this.$playerBG.length&&!this.$playerBG.children(".loader").length){var e=$(w.GET_LOADER_HTML());e.hide(),this.$playerBG.append(e),setTimeout(function(){e&&e.length&&e.fadeIn("slow")},1e3)}},removePlayerLoader:function(){this.$playerBG&&this.$playerBG.length&&this.$playerBG.children(".loader").remove()},addProfileOverlayMozLoader:function(e){var t=this.getProfileOverlayMoz(e);if(t&&t.length&&!t.children(".loader").length){var i=$(w.GET_LOADER_HTML());i.hide(),t.append(i),setTimeout(function(){i&&i.length&&i.fadeIn("slow")},10)}},removeProfileOverlayMozLoader:function(e){var t=this.getProfileOverlayMoz(e);t&&t.length&&t.children(".loader").remove()},removeProfileOverlayLoader:function(){this.$profileOverlayContainer&&this.$profileOverlayContainer.length&&this.$profileOverlayContainer.children(".loader").remove()},close:function(){this.bIsProfileLevel?this.oManager.setToProfileVideoLevel(!1):this.oManager.closeContainer()},play:function(e){if(!this.bIsPlaying&&this.isCurrentPlayBox()&&this.oManager.isOpened()){var t=this.oManager.getCurrentLevel();if(!(this.bIsProfileLevel&&t===f.DISPLAY_LEVEL.MAIN||!this.bIsProfileLevel&&t===f.DISPLAY_LEVEL.PROFILE||"string"==typeof e&&e.substring(0,w.S_OPEN_MENU_ID_START.length)===w.S_OPEN_MENU_ID_START&&this.sPauseMethod!==e||this.isCommentingOpened())){this.makeContainer();var i=this.getPlayer(!0);if(this.setVideoSource(this.sVideoUrl,this.sHlsVideoUrl),!this.bCanPlay){if(!(i.readyState>=i.HAVE_FUTURE_DATA))return void(this.bAutoStart=!0);this.bCanPlay=!0,this.removePlayerLoader()}this.bIsPlaying=!0,"clickPlayer"!==e&&"spaceKey"!==e||this.animatePlay();var n=i.play(),s=this;this.setVolume(),s.bForcePlayAdded&&(s.$container.find(".quickies__force-play").detach(),s.bForcePlayAdded=!1),n!==undefined&&n["catch"](function(e){if(s.bForcePlayAdded)return void console.error("%c\tPB ["+(s.bIsProfileLevel?"P-":"")+s.iNPlayer+"] promise ERROR --- ForcePlayBtn added already","color:greenyellow;");console.error("%c\tPB ["+(s.bIsProfileLevel?"P-":"")+s.iNPlayer+"] promise ERROR","color:greenyellow;",e);var t=$('<span class="quickies__force-play icon-f icf-player-play-circle-o"></span>');s.bIsPlaying=!1,s.oManager.pause(),t.on("click",s,s.onClickForcePlay),s.$container.append(t),s.removePlayerLoader(),s.bForcePlayAdded=!0}),s.sPauseMethod=null,s.sPlayMethod="string"==typeof e?e:null,s.clearProgressInterval(),s.updateVideoRatioFit(),s.updateSideActions(),s.oProgressInterval=setInterval(function(){s.updateProgressBar()},w.I_PROGRESSBAR_INTERVAL)}}},replay:function(){this.setCurrentTime(0),this.play()},pause:function(e){if(this.bIsPlaying&&("string"!=typeof e||e.substring(0,w.S_OPEN_MENU_ID_START.length)!==w.S_OPEN_MENU_ID_START||w.S_OPEN_MENU_ID_START+this.sOpenedMenu===e)){var t=this.getPlayer();this.bAutoStart=!1,this.bIsPlaying=!1,"clickPlayer"!==e&&"spaceKey"!==e||this.animatePause(),t&&t.pause(),this.sPauseMethod="string"==typeof e?e:null,this.sPlayMethod=null,this.clearProgressInterval()}},setVideoSource:function(e,t){if("string"==typeof t||"string"==typeof e){if("string"==typeof this.sSrcSet)if(this.oManager.canIUseAnyHls()&&t.length){if(this.sSrcSet===t)return}else if(this.sSrcSet===e)return;var i=this.getPlayer(!0);this.bCanPlay=!1,this.bIsPlaying=!1,i.pause();var n=document.createElement("video");if("undefined"!=typeof n.canPlayType&&""!==n.canPlayType("application/vnd.apple.mpegURL")&&(xv.console.log("Support Native HLS","Player"),this.support_native_hls=!0),this.oManager.canIUseHlsJs()&&t&&t.length){this.oHls&&this.oHls.destroy();var s=this,o={startFragPrefetch:!0,lowLatencyMode:!1,abrBandWidthFactor:.6,abrBandWidthUpFactor:.5,maxBufferLength:30,maxMaxBufferLength:30,maxBufferSize:1e3*(this.oManager.isSmallDevice?25:50)*1e3,autoStartLoad:!0,capLevelToPlayerSize:!1,maxBufferHole:.3,liveSyncDurationCount:3,liveMaxLatencyDurationCount:10,enableWorker:!0,enableSoftwareAES:!0,fragLoadingTimeOut:3e4,manifestLoadingTimeOut:1e4,levelLoadingTimeOut:1e4,fragLoadingMaxRetry:3,manifestLoadingMaxRetry:3,levelLoadingMaxRetry:3,fragLoadingRetryDelay:500,manifestLoadingRetryDelay:500,levelLoadingRetryDelay:500,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3};this.oHls=new d(o),this.oHls.on(d.Events.MEDIA_ATTACHED,function(){s.oHls.loadSource(t)}),this.oHls.attachMedia($(i)[0]),this.oHls.on(d.Events.MANIFEST_LOADED,function(e,t){var i=1;if(s.oHls.bandwidthEstimate)for(var n=0;n<s.oHls.levels.length&&1.8*s.oHls.levels[n].bitrate/1e3<s.oHls.bandwidthEstimate;n++)i=n;s.oHls.startLevel=i,s.oHls.nextLoadLevel=i,s.oHls.currentLevel=i,s.oHls.currentLevel=-1}),this.oHls.on(d.Events.ERROR,function(e,t){t.fatal&&s.onPlayerError({data:s})}),this.sSrcSet=t}else this.oManager.canIUseNativeHls()&&t&&t.length?($(i).prop("src",t),this.sSrcSet=t):($(i).prop("src",e),this.sSrcSet=e);this.addPlayerLoader(),i.load(),this.setCurrentTime(0)}},killAndRemovePlayer:function(){var e=this.getPlayer();e&&($(e).off().attr("src","").load().remove(),this.$player=null,this.oHls&&this.oHls.destroy())},updateViewDuration:function(){var e=this,i=this.getPlayerCurrentTime();if(i){var n=i-this.fLastCurrentTime;this.fLastCurrentTime=i,!this.bIsSeeking&&this.bIsPlaying&&(n<=0||(this.fViewDuration+=n,this.oManager.isVideoViewed(this.getId())||g.save(e.getId(),e.getViewDurationForMonitoring(),!1,e.getCDN()),this.canSendTracking()&&(require(["skins/common/video/tracking_quickies"],function(i){var n=i.REFS.RELATED;"profile"===t.data.action&&(n=i.REFS.PROFILE);var s=(new Date).getTime()-e.oManager.iManagerInitTime;(new i).register(s,e.sId,n)}),this.bTrackingSent=!0)))}},canSendTracking:function(){return!this.bTrackingSent&&(this.fViewDuration>=w.I_TRACKING_VIEW_DURATION/1e3||this.fViewDuration>=this.getPlayer().duration*(w.I_TRACKING_VIEW_PERCENT/100))},setCurrentTime:function(e,t){var i=this.getPlayer(!0);t&&(e=Math.floor(i.duration*e*100)/100),this.updateViewDuration(),this.bIsPlaying&&(this.bIsSeeking=!0),i.currentTime=e,this.updateProgressBar()},setCurrentTimeToEnd:function(){var e=this.getPlayer(!0),t=e.duration-1;this.setCurrentTime(t)},setCurrentTimeByProgressBar:function(e){var t=this.$progress.outerWidth(),i=this.$progress.offset();if(!(e<i.left||e>i.left+t)){var n=Math.round((e-i.left)/t*1e3)/1e3;this.setCurrentTime(n,!0)}},clearProgressInterval:function(){this.oProgressInterval&&clearInterval(this.oProgressInterval),this.oProgressInterval=null},updateProgressBar:function(){if(this.$progressBar&&this.$progressBar.length){var e=this.getPlayedPerc();this.$progressBar.stop(),this.$progressHolder.stop(),Math.abs(e-this.iLastProgressBarPerc)>1||this.bIsSeeking||!this.bIsPlaying?(this.$progressBar.stop().css("width",e+"%"),this.$progressHolder.stop().css("left",e+"%")):(this.$progressBar.stop().animate({width:e+"%"},w.I_PROGRESSBAR_INTERVAL-2),this.$progressHolder.stop().animate({left:e+"%"},w.I_PROGRESSBAR_INTERVAL-2)),this.iLastProgressBarPerc=e}},setVolume:function(e){if("number"!=typeof e){!0===p.GET_SAVED_MUTE()?e=0:"number"!=typeof(e=p.GET_SAVED_VOLUME())&&(e=1)}else this.oVolumeControl&&this.oVolumeControl.setVolume(this.iVolume,!0);var t=this.getPlayer();t&&(t.muted=0===e,t.volume=e,this.iVolume=e)},animatePause:function(){this.animateCenteredFadeOut($('<span class="icon-f icf-player-pause-circle-o"></span>'))},animatePlay:function(){this.animateCenteredFadeOut($('<span class="icon-f icf-player-play-circle-o"></span>'))},animateCenteredFadeOut:function(e){e.addClass("quickies--anim-c-fadeout").hide().appendTo(this.$container),setTimeout(function(){e.show().addClass("quickies--anim-go")},10),setTimeout(function(){e.remove()},1e3)},sendMonitoring:function(e,t,i){this.oManager.sendMonitoring(e,t,!0===i?this.getId():null)},settingHasShareUrl:function(){return this.bShareInSettingsMenu},settingsHasMobileNavBtn:function(){return this.oManager.isFullscreenDisplay()&&this.oManager.canIUseTouchSwipe()&&!this.oManager.isProfileInfoContainerVisible()},onEvent:function(e,t,i,n){if(!this.isValidEvent(e))throw new Error('onEvent "'+e+'" not a valide Event.');"undefined"==typeof this.oEventListeners[e]&&(this.oEventListeners[e]={}),this.iEventListenerCount++,"string"==typeof i&&i.length||(i="callback_"+this.iEventListenerCount),this.oEventListeners[e][i]={fnCallback:t,bClearWhenCalled:!!n}},isValidEvent:function(e){return f.isValidObjectOption(f.EVENT.PLAYER_BOX,e)},removeEvent:function(e,t){"undefined"!=typeof this.oEventListeners[e]&&"undefined"!=typeof this.oEventListeners[e][t]&&delete this.oEventListeners[e][t]},triggerEvent:function(e,t){if("undefined"!=typeof this.oEventListeners[e])for(var i in this.oEventListeners[e])void 0!==t?this.oEventListeners[e][i].fnCallback(this,t):this.oEventListeners[e][i].fnCallback(this),this.oEventListeners[e][i].bClearWhenCalled&&this.removeEvent(e,i)},onClickClose:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.pause(),t.sendMonitoring(f.MONITORING.VIEW,'close - on "click" event on "x"'),t.oManager.closeCurrentLevel()},onClickComments:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oManager.isSliding()||t.openComments()},onClickCommentsBack:function(e){if($(e.target).hasClass("quickies__comments")||$(e.target).hasClass("quickies__comments__close-container")){e.preventDefault(),e.stopPropagation();e.data.closeComments()}},onClickDislike:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oManager.isSliding()||t.toggleLike(!1===t.bLiked&&null)},onClickExternalLink:function(e){e.data.pause()},onClickForcePlay:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oManager.isSliding()||(t.play(),t.bForcePlayAdded&&(t.$container.find(".quickies__force-play").detach(),t.bForcePlayAdded=!1))},onClickFullscreen:function(e){e.preventDefault(),e.data.oManager.toggleForcedFullscreenDisplay()},onClickListElem:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oManager.isSliding()||(t.isError()?t.isUnavailable()&&t.oManager.openRequestedVideoUnavailableAlert([t.getId()]):(t.sendMonitoring(f.MONITORING.VIEW,"opening new video from ListElem : "+t.getId()),t.oManager.setCurrentVideoId(t.getId()),t.oManager.openAndPlay()))},onClickListElemProfile:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.oManager.isSliding())if(t.isError())t.isUnavailable()&&t.oManager.openRequestedVideoUnavailableAlert([t.getId()]);else{if(t.sendMonitoring(f.MONITORING.VIEW,"opening new video from ListElemProfile : "+t.getId()),t.oManager.pause(),!t.oManager.isFullProfileNavigation()){if(t.oManager.isProfileInfoContainerVisible()){var i=t.oManager.getPlayerBox(t.oManager.getCurrentVideoId(f.DISPLAY_LEVEL.MAIN),f.DISPLAY_LEVEL.MAIN);i.toggleProfileOverlay(!0,!0)}t.oManager.openProfileVideoLevel(!0)}t.oManager.setCurrentVideoId(t.getId()),t.oManager.openAndPlay()}},onClickLike:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oManager.isSliding()||t.toggleLike(!0!==t.bLiked||null)},onClickMenusBack:function(e){if($(e.target).hasClass("quickies__menus")||$(e.target).hasClass("quickies__menu")){e.preventDefault(),e.stopPropagation();e.data.closeMenus()}},onClickNext:function(e){e.preventDefault();var t=e.data;t.sendMonitoring(f.MONITORING.VIEW,'next - on "onClickNext"'),t.oManager.playNext()},onClickPlayer:function(e){e.preventDefault();var t=e.data;if(!t.oManager.isSwiping())return t.bForcePlayAdded?void t.onClickForcePlay(e):void(t.bIsPlaying||"touchStartTimer"===t.sPauseMethod||"clickDragStartTimer"===t.sPauseMethod?t.pause("clickPlayer"):t.play("clickPlayer"))},onClickPrev:function(e){e.preventDefault();var t=e.data;t.sendMonitoring(f.MONITORING.VIEW,'next - on "playPrev"'),t.oManager.playPrev()},onClickShare:function(e){e.preventDefault();var t=e.data;t.shareUrl(t.$actionBtnShare)},onClickTitle:function(e){e.preventDefault(),e.data.toggleVideoLinksMenu(!0)},onClickUploader:function(e){e.preventDefault(),e.data.toggleProfileOverlay(!0)},onClickUploaderOverlayBack:function(e){e.preventDefault(),e.stopPropagation(),e.data.toggleProfileOverlay(!1)},onContextmenu:function(e){e.preventDefault(),e.stopPropagation()},onMouseDownProgressBar:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.setCurrentTimeByProgressBar(e.pageX),$(this).on("mousemove",t,t.onMouseMoveProgressBar).on("mouseup",t,t.onMouseUpProgressBar).on("mouseout",t,t.onMouseUpProgressBar)},onMouseUpProgressBar:function(e){var t=e.data;if("mouseout"===e.type){var i=e.relatedTarget?$(e.relatedTarget):null;if(i&&i.length&&(i.hasClass("quickies__progress")||i.parents(".quickies__progress").length))return}$(this).off("mousemove",t.onMouseMoveProgressBar).off("mouseup",t.onMouseUpProgressBar).off("mouseout",t.onMouseUpProgressBar)},onMouseMoveProgressBar:function(e){e.data.setCurrentTimeByProgressBar(e.pageX)},onResizeScreen:function(e){var t=e.data;t.updateVideoRatioFit(),t.updateSideActions()},onScrollUploaderOverlay:function(e){if(e&&e.oVertical){var t=e.$scrollableContent.find(".quickies__list-elem").last();if(e.oVertical.iScrollInvert<t.outerHeight()){var i=this;this.addProfileOverlayMozLoader();var n=this.oManager.loadMoreVideoIfNeeded(!0,f.DISPLAY_LEVEL.PROFILE_VIDEO,function(){i.removeProfileOverlayMozLoader()});if(n===f.LOAD_MORE.NO_MORE)return void i.removeProfileOverlayMozLoader();n!==f.LOAD_MORE.LOADING||this.bOnScrollUploaderOverlayCantBeAdded||(this.bOnScrollUploaderOverlayCantBeAdded=!0,this.oManager.addProfileAnyInfoLoadedCallBack(function(){i.bOnScrollUploaderOverlayCantBeAdded=!1,i.onScrollUploaderOverlay()}))}}},onToggleMute:function(e){e.data.setVolume()},onTouchProgressBar:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$progress&&t.$progress.length&&(t.$progressRemoveClassTimer&&clearTimeout(t.$progressRemoveClassTimer),t.$progress.addClass("is-touched"),t.$progressRemoveClassTimer=setTimeout(function(){t.$progress.removeClass("is-touched")},1e3)),t.setCurrentTimeByProgressBar(e.originalEvent.touches[0].pageX)},onVolumeChange:function(e){e.data.setVolume()},onPlayerAbort:function(e){e.data.oManager.playNext()},onPlayerCanPlay:function(e){var t=e.data;t.bCanPlay||(t.bCanPlay=!0,t.iPlayerCanPlayTime=(new Date).getTime(),t.sendMonitoring(f.MONITORING.BUFFERED,'on "canplay" event',!0),t.oBufferTimer&&(clearTimeout(t.oBufferTimer),t.oBufferTimer=null),t.bAutoStart&&t.play(),t.removePlayerLoader())},onPlayerEnded:function(e){var t=e.data;t.bIsPlaying=!1,h.GET_SAVED_SETTING("autoNext")?t.isMenuOpened()?t.menuOpenedPauseAtEnd():(t.sendMonitoring(f.MONITORING.VIEW,'next - on "ended" event on the player',!0),t.oManager.playNext()):(t.updateViewDuration(),t.fViewDuration+.1>=t.getPlayerFullTime()&&t.sendMonitoring(f.MONITORING.VIEW,'replay - on "ended" event on the player',!0),t.replay())},onPlayerError:function(e){var t=e.data;console.error("%c\tPB ["+(t.bIsProfileLevel?"P-":"")+t.iNPlayer+"] onPlayerError","color:greenyellow;font-weight:bold;font-size:1.1em;",e),t.setIsError(),t.oBufferTimer&&(clearTimeout(t.oBufferTimer),t.oBufferTimer=null),t.sendMonitoring(f.MONITORING.ERROR,'next - on "error" event on the player',!0),$(window).trigger(f.EVENT.UPDATE_LIST),t.oManager.setSlideEndedCallback(function(){t.closeContainer()})},onPlayerLoadStart:function(e){var t=e.data;t.iPlayerLoadStartTime=(new Date).getTime(),t.bCanPlay||(t.oBufferTimer=setTimeout(function(){t.bCanPlay||t.isCurrentPlayBox()&&(console.error("%c\tPB ["+(t.bIsProfileLevel?"P-":"")+t.iNPlayer+"] buffer timeout","color:greenyellow;font-weight:bold;font-size:1.1em;"),t.sendMonitoring(f.MONITORING.BUFFERTIMEOUT,"next - trying to load for over "+w.I_BUFFER_TIMEOUT/1e3+" seconds",!0),t.oManager.playNext(),t.oBufferTimer&&(clearTimeout(t.oBufferTimer),t.oBufferTimer=null))},w.I_BUFFER_TIMEOUT)),t.sendMonitoring(f.MONITORING.START_LOADING,'on "loadstart" event on the player',!0)},onPlayerPaused:function(e){e.data.bIsPlaying=!1},onPlayerPlaying:function(e){var t=e.data,i=(new Date).getTime();if(t.fLastCurrentTime=t.getPlayerCurrentTime()||0,!(!t.iPlayerLoadStartTime||t.iPlayerLoadStartTime>i||t.iPlayerPlayingStartTime&&t.iPlayerPlayingStartTime>t.iPlayerLoadStartTime)){t.bIsPlaying=!0;var n=$(t.getPlayer());n&&n.length&&n.css("opacity","1"),t.iPlayerPlayingStartTime=i,t.sendMonitoring(f.MONITORING.PLAYING,'on "playing" event on the player',!0)}},onPlayerSeeked:function(e){var t=e.data;t.fLastCurrentTime=t.getPlayerCurrentTime(),t.bIsSeeking=!1},onPlayerTimeUpdate:function(e){e.data.updateViewDuration()}},w}),define("skins/common/player/quickies/hashManager",["static/log","config/main","lib/tools","lib/history","./constants"],function(e,t,i,n,s){var o=function(e){this.oManager=e||null,this.sSavedHash="";var t=this;n.registerAllHashesExcept("no-quickies",function(e){t.onPathChange({data:t,sHash:e})})};return o.S_HASH_BEGIN="quickies/",o.S_HASH_PROFILE="/profile",o.S_HASH_COMMENTS="/comments",o.prototype={setManager:function(e){this.oManager=e||null},setHash:function(){if(this.oManager){var e=this.oManager.getCurrentVideoId(s.DISPLAY_LEVEL.MAIN),t=n.getHash(),i=(this.getHashProfileVideoId(t)?s.DISPLAY_LEVEL.PROFILE_VIDEO:this.isHashProfileOpened(t)?s.DISPLAY_LEVEL.PROFILE:s.DISPLAY_LEVEL.MAIN,this.getHashBeginning()),a=i+e,r=this.oManager.getCurrentLevel(),l=this.isHashOpened(t);if((r===s.DISPLAY_LEVEL.PROFILE||r===s.DISPLAY_LEVEL.PROFILE_VIDEO)&&(a+=o.S_HASH_PROFILE,r===s.DISPLAY_LEVEL.PROFILE_VIDEO)){var d=this.oManager.getCurrentVideoId();d&&(a+="/"+d)}this.oManager.isCommentingOpened()&&(a+=o.S_HASH_COMMENTS),t!==a&&n.setUrlHash(a,null,l)}},getHashSimpleBeginning:function(){return o.S_HASH_BEGIN},getHashBeginning:function(){var e=this.oManager?this.oManager.getOrientation().substring(0,1):"a";return this.getHashSimpleBeginning()+e+"/"},getHashOrientation:function(e){if("string"!=typeof e&&(e=n.getHash()),e.substring(0,o.S_HASH_BEGIN.length)!==o.S_HASH_BEGIN)return null;var t=e.substring(o.S_HASH_BEGIN.length,o.S_HASH_BEGIN.length+1);return"v"===t?"vertical":"h"===t?"horizontal":"a"===t?"all":null},getHashVideoEncodedId:function(e){if("string"!=typeof e&&(e=n.getHash()),!e)return!1;var t=this.getHashBeginning();if(e.substring(0,t.length)!==t)return!1;var i=new RegExp(t+"([a-z0-9]+)"),s=e.match(i);return!(s&&2!==s.length||!s[1].length)&&s[1]},getHashProfileVideoId:function(e){if("string"!=typeof e&&(e=n.getHash()),!e)return!1;var t=this.getHashBeginning();if(e.substring(0,t.length)!==t)return!1;var i=new RegExp(t+"[a-z0-9]+"+o.S_HASH_PROFILE+"/([a-z0-9]+)("+o.S_HASH_COMMENTS+")?"),s=e.match(i);return!(!s||3!==s.length||!s[1].length)&&s[1]},saveHash:function(e){this.isHashOpened(e)||(this.sSavedHash="string"==typeof e?e:i.getUrlHash())},setSavedHash:function(){n.setUrlHash(this.sSavedHash,null,!1,!0)},openWithHash:function(){var e=n.getHash();if(this.isHashOpened(e)){var t=this.getHashVideoEncodedId(),i=this.isHashProfileOpened(e),s=i?this.getHashProfileVideoId():null,o=this.isHashCommentsOpened();if(!this.oManager)return;this.oManager.openAndPlay({sId:t,bProfileOverlay:i,sProfileVideoEncodedId:s,bRemoveHashIfNotLoadable:!0,bIsCommentingOpened:o,bNoHash:!0})}},isHashOpened:function(e){"string"!=typeof e&&(e=n.getHash());var t=this.oManager?this.getHashBeginning():this.getHashSimpleBeginning();return e.substring(0,t.length)===t},isHashProfileOpened:function(e){"string"!=typeof e&&(e=n.getHash());var t=this.getHashBeginning(),i=new RegExp(t+"[a-z0-9]+("+o.S_HASH_PROFILE+")"),s=e.match(i);return!(!s||2!==s.length||s[1]!==o.S_HASH_PROFILE)},isHashCommentsOpened:function(e){"string"!=typeof e&&(e=n.getHash());var t=this.getHashBeginning(),i=new RegExp(t+"[a-z0-9]+("+o.S_HASH_PROFILE+"/[a-z0-9]+)?("+o.S_HASH_COMMENTS+")"),s=e.match(i);return!(!s||3!==s.length||s[2]!==o.S_HASH_COMMENTS)},onPathChange:function(e){var t=e.data,i=e.sHash;if(t.oManager)if(t.isHashOpened(i)){var n=t.getHashVideoEncodedId(),s=t.isHashProfileOpened(i),o=s?t.getHashProfileVideoId():null;t.oManager.openAndPlay({sId:n,bProfileOverlay:s,sProfileVideoEncodedId:o,bNoHash:!0})}else t.oManager.closeContainer(!0)}},o}),define("text!skins/common/player/quickies/templates/manager.mustache",[],function(){
return'<div class="quickies__main-container quickies--{{{ sOrientation }}}">\n\t<div class="quickies__players quickies__players--main-level"></div>\n\t<div class="quickies__players quickies__players--profile-level-container"><div class="quickies__players quickies__players--profile-level"></div></div>\n\t<div class="quickies__sub-players"></div>\n\n\t\x3c!--<div class="quickies__prev"><span class="icon-f main-nav icf-angle-up-circle-o"></span></div>\n\t<div class="quickies__next"><span class="icon-f main-nav icf-angle-down-circle-o"></span></div>--\x3e\n\n\t<div class="quickies__desktop-profile-info">\n\t\t{{{ sProfile }}}\n\t</div>\n\n\t<div class="quickies__close-swipe quickies__close-swipe--prev"><span class="icon-f main-nav icf-close-thin"></span></div>\n\t<div class="quickies__close-swipe quickies__close-swipe--next"><span class="icon-f main-nav icf-close-thin"></span></div>\n</div>'}),define("text!skins/common/player/quickies/templates/profileCommentAndMozaiqueContainer.mustache",[],function(){return'<div class="quickies__uploader-profile__content">\n\t\x3c!--{ { #sTitle}}\n\t\t<p class="title">{ { { sTitle }}}</p>\n\t{ { /sTitle}}--\x3e\n\t<ul class="quickies__uploader-profile__content__tabs">\n\t\t<li>\n\t\t\t<a class="quickies__uploader-profile__content__btn quickies__uploader-profile__content__btn--quickies" data-toggle="quickies">\n\t\t\t\t<span class="quickies__uploader-profile__content__btn__text"><span class="icon-f icf-bolt"></span> {{{ sQuickies }}}</span>\n\t\t\t\t<span class="quickies__uploader-profile__content__btn__count">{{#sVideosCount}}{{{ sVideosCount }}}{{/sVideosCount}}</span>\n\t\t\t</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a class="quickies__uploader-profile__content__btn quickies__uploader-profile__content__btn--comments" data-toggle="comments">\n\t\t\t\t<span class="quickies__uploader-profile__content__btn__text"><span class="icon-f icf-comment-o"></span> {{{ sComments }}}</span>\n\t\t\t\t<span class="quickies__uploader-profile__content__btn__count">{{#sCommentsCount}}{{{ sCommentsCount }}}{{/sCommentsCount}}</span>\n\t\t\t</a>\n\t\t</li>\n\t</ul>\n\t<div class="quickies__uploader-profile__content__tab quickies__uploader-profile__content__tab--mozaique-{{{ sOrientation }}} mozaique " data-toggle="quickies">\n\t</div>\n\t<div class="quickies__uploader-profile__content__tab" data-toggle="comments">\n\t</div>\n</div>'}),define("text!skins/common/help_wizard/help_wizard_container.mustache",[],function(){return'<div class="help-wizard-cover">\n\t<div class="help-wizard-skip{{{ skip_class }}}"><span class="icon-f icf-angle-double-right"></span> {{{ skip }}}</div>\n</div>'}),define("text!skins/common/help_wizard/help_wizard_mask.mustache",[],function(){return'<div class="help-wizard-mask">\r\n\t<div class="help-wizard-focus">\r\n\t\t<div class="help-wizard-description">\r\n\t\t\t<div class="help-wizard-description-content"></div>\r\n\t\t\t<p class="help-wizard-next"><button class="btn btn-primary">{{{ next }}}</button></p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="help-wizard-layer"></div>\r\n</div>'}),define("text!skins/common/help_wizard/help_wizard_loading.mustache",[],function(){return'<div class="help-wizard-mask">\r\n\t<div class="help-wizard-layer loader-layer"></div>\r\n\t<span class="help-wizard-loading icon-f icf-spinner icf-anim-pulse"></span>\r\n</div>'}),define("text!skins/common/help_wizard/help_wizard_cursor.mustache",[],function(){return'<div class="help-wizard-cursor">\r\n\t<span class="icon-f icf-hand-pointer-o"></span>\r\n\t<span class="icon-f icf-hand-pointer"></span>\r\n</div>'}),define("skins/common/help_wizard/help_wizard",["config/main","lib/i18n!front","static/dom","mustache","skins/common/history/one_info_tracker","text!./help_wizard_container.mustache","text!./help_wizard_mask.mustache","text!./help_wizard_loading.mustache","text!./help_wizard_cursor.mustache"],function(e,t,i,n,s,o,a,r,l){var d=function(e,t,i,n){this.oWizard=e,this.$ToHighlight=t,this.$ToCursorPoint=!1,this.$Description=void 0!==i&&!1!==i&&(this.isValidSelector(i)?$(i):$("<p>"+i+"</p>")),"object"!=typeof n&&(n={}),this.setEndFunction(n.fnEnd),this.oOptions=n};d.prototype={show:function(){if(!0!==this.bShowOK){this.bShowOK=!0,this.bClosed=!1;var e=this;this.setToHighlight(this.$ToHighlight,function(){e.showStep2()})}},showStep2:function(){if(!0!==this.bShowStep2OK){if(this.bShowStep2OK=!0,this.create(),this.setShowCursorAnimOn(this.oOptions.$showCursorAnimOn),this.position(),!this.$ToHighlight&&!this.$Description)return void this.close();"undefined"!=typeof this.oOptions.oSkipPosition&&this.oWizard.setSkinBtnPosition(this.oOptions.oSkipPosition);var e=this;this.$Mask.css({opacity:"1",display:"none"}).fadeIn(function(){e.stopShowDesc(),e.resetCursorAnimation(),e.tShowDesc=setTimeout(function(){e.$MaskDescription.fadeIn("slow",function(){"undefined"!=typeof e.oOptions.iAutoNext&&e.setAutoNextWizard(e.oOptions.iAutoNext),"undefined"!=typeof e.oOptions.iHideCoverTimer&&e.oWizard.hideMask(e.oOptions.iHideCoverTimer)})},250)}),this.eWindowResize=function(){!1!==e.tWindowResize&&(clearTimeout(e.tWindowResize),e.tWindowResize=!1),e.$Mask.stop().hide(),e.tWindowResize=setTimeout(function(){e.tWindowResize=!1,e.setToHighlight(e.$ToHighlight,function(){e.position(),e.resetCursorAnimation(),e.$Mask.fadeIn()})},200)},"function"==typeof this.oOptions.fnAfterShow&&this.oOptions.fnAfterShow(this),$(window).on("resize",this.eWindowResize)}},create:function(){if("undefined"==typeof this.$Mask&&!1!==this.$Mask){this.$Mask=$(n.render(a,{next:t.__("misc.got_it")})),this.shouldHaveCursor()&&(this.$Cursor=$(n.render(l)),this.$Mask.append(this.$Cursor));var e=this;this.eNextClick=function(t){t.stopPropagation(),t.preventDefault(),e.close()},this.eSkipAllClick=function(t){t.stopPropagation(),t.preventDefault(),e.oWizard.skipAll()},this.$MaskLayer=this.$Mask.children(".help-wizard-layer"),this.$MaskFocus=this.$Mask.children(".help-wizard-focus"),this.$MaskDescription=this.$MaskFocus.find(".help-wizard-description"),this.$MaskNextBtn=this.$Mask.find(".help-wizard-next button"),this.$MaskDescriptionContent=this.$MaskDescription.find(".help-wizard-description-content"),this.$MaskNextBtn.on("click",this.eNextClick),this.$MaskFocus.on("click",this.eNextClick),this.$MaskLayer.on("click",this.eSkipAllClick),!1!==this.$Description&&this.$Description.length>0?this.$MaskDescriptionContent.append(this.$Description):(this.$MaskDescriptionContent.hide(),this.$MaskDescription.addClass("no-text"))}},setToHighlight:function(e,t,n){if(n="boolean"!=typeof n||n,"string"==typeof e&&!this.isValidSelector(e))return this.$ToHighlight=null,this.oOptions.bSkipInstructionIfNoZone?this.close():"function"==typeof t&&t(),!1;var s=$(e);if(!s||0===s.length||!s.is(":visible"))return this.$ToHighlight=!1,this.oOptions.bSkipInstructionIfNoZone?this.close():"function"==typeof t&&t(),!1;if(this.$ToHighlight=s.first(),!n||i.isElementInView(this.$ToHighlight,!0))return"function"==typeof t&&t(),!0;var o=this.$ToHighlight.offset(),a=$("html, body").scrollTop(),r=Math.max(o.top-50,0);if(o.top>a){var l=$(window).height(),d=this.$ToHighlight.outerHeight();r=Math.min(r,o.top-l+d+50)}return $("html, body").animate({scrollTop:r},function(){"function"==typeof t&&t()}),!0},setShowCursorAnimOn:function(e,t){if(this.$ToCursorPoint=e,"string"!=typeof e||this.isValidSelector(e)){var i=$(e).first();this.$ToCursorPoint=!!(i.length>0&&i.is(":visible"))&&i}else this.$ToCursorPoint=!1;"function"==typeof t&&t(!1)},resetCursorAnimation:function(){if(this.stopCursorAnimation(),!this.hasCursor())return!1;this.$Cursor.stop(),this.iCursorAnimationPlayed=0;var e=this,t=function(){if(e.iCursorAnimationPlayed>=10)return e.stopCursorAnimation(),!1;e.$Cursor.stop().css({display:"none",top:e.iCursorTopStart,left:e.iCursorLeftStart}).fadeIn(200).animate({top:e.iCursorTopEnd,left:e.iCursorLeftEnd},400).delay(250).animate({top:e.iCursorTopEnd+3},100,function(){e.$Cursor.addClass("click-pulse").animate({top:e.iCursorTopEnd},100).fadeOut(500,function(){e.iCursorAnimationPlayed++,(!0===e.oOptions.iAutoNextAfterCursorAnim||"number"==typeof e.oOptions.iAutoNextAfterCursorAnim&&e.oOptions.iAutoNextAfterCursorAnim<=e.iCursorAnimationPlayed)&&e.close(),e.$Cursor.removeClass("click-pulse")})})};t(),this.tCursorInterval=setInterval(t,2500)},stopCursorAnimation:function(){"undefined"!=typeof this.tCursorInterval&&!1!==this.tCursorInterval&&(clearInterval(this.tCursorInterval),this.tCursorInterval=!1)},setEndFunction:function(e){if("function"!=typeof e){var t=this;return void(this.fEnd=function(){t.showNextWizard()})}this.fEnd=e},setAutoNextWizard:function(e){if(this.stopAutoNextWizard(),!1===e)return void(this.oOptions.iAutoNext=!1);this.oOptions.iAutoNext="number"==typeof e?e:5e3;var t=this;this.tAutoNextWizard=setTimeout(function(){t.close()},this.oOptions.iAutoNext),this.$MaskNextBtn&&this.$MaskNextBtn.length>0&&this.$MaskNextBtn.css("transition-duration",this.oOptions.iAutoNext+"ms").addClass("auto-next")},stopAutoNextWizard:function(){"undefined"!=typeof this.tAutoNextWizard&&!1!==this.tAutoNextWizard&&(clearTimeout(this.tAutoNextWizard),this.tAutoNextWizard=!1),this.$MaskNextBtn&&this.$MaskNextBtn.length>0&&this.$MaskNextBtn.removeClass("auto-next").css("transition-duration","0")},stopShowDesc:function(){"undefined"!=typeof this.tShowDesc&&!1!==this.tShowDesc&&(clearTimeout(this.tShowDesc),this.tShowDesc=!1)},shouldHaveCursor:function(){return"undefined"!=typeof this.oOptions.$showCursorAnimOn&&!1!==this.oOptions.$showCursorAnimOn},hasCursor:function(){return this.shouldHaveCursor()&&!1!==this.$ToCursorPoint&&this.$ToCursorPoint.length&&"function"==typeof this.$ToCursorPoint.is&&this.$ToCursorPoint.is(":visible")&&"undefined"!=typeof this.$Cursor&&this.$Cursor.length>0},position:function(){if(!0!==this.bClosed&&"undefined"!=typeof this.$Mask){var e=this.oWizard.getContainer();if("object"==typeof e&&0!==e.length){e.is(this.$Mask.parent())||e.append(this.$Mask);var t=!(!this.$ToHighlight||0===this.$ToHighlight.length||!this.$ToHighlight.is(":visible"))&&this.$ToHighlight,i=$(window).height(),n=$(window).width(),s=$("html, body").scrollTop(),o=$("html, body").prop("scrollHeight");this.$Mask.css({bottom:"0",height:o+"px",left:"0",right:"0",top:"0",width:n+"px"});var a,r,l,d,u,c;if(!1!==t){var f=t.offset();u=Math.min(t.outerHeight()+30,o),c=Math.min(t.outerWidth()+30,n),a=Math.max(f.top-15,0),r=Math.max(f.left-15,0),l=a+u,d=r+c}else u=0,c=n,a=0,r=0,l=0,d=n;this.$MaskFocus.css({top:a+"px",left:r+"px",height:u+"px",width:c+"px"});var h=u>i,p=a-s>i-l+s,_=r>n-d,g={},m=!1!==this.$Description&&this.$Description.length>0?300:10,b=500;if(h?(g.bottom="auto",g.top="15px"):p?(g.top="auto",g.bottom=u+15+"px"):(g.bottom="auto",g.top=u+15+"px"),_){var v=Math.max(n-d,15),y=n-d>15?15:15-(n-d);g.left="auto",g.right=y+"px",b=Math.min(b,n-v-15,Math.max(c,m,c+.5*r))}else{var D=Math.max(r,15),C=r>15?15:30-D;g.right="auto",g.left=C+"px",b=Math.min(b,n-D-15,Math.max(c,m,c+.5*(n-d)))}if(m=Math.min(m,b),g["max-width"]=b+"px",g["min-width"]=m+"px",this.$MaskDescription.css(g),this.hasCursor()){var w=this.$ToCursorPoint.offset(),S=this.$ToCursorPoint.innerHeight(),k=this.$ToCursorPoint.innerWidth();this.iCursorTopEnd=w.top+S/2,this.iCursorLeftEnd=w.left+k/2,this.iCursorTopStart=i/2+s>this.iCursorTopEnd?this.iCursorTopEnd+i/6:this.iCursorTopEnd-i/6,this.iCursorLeftStart=n/2>this.iCursorLeftEnd?this.iCursorLeftEnd+n/6:this.iCursorLeftEnd-n/6}}}},showNextWizard:function(){this.oWizard.showNext()},close:function(){if(this.stopAutoNextWizard(),this.stopCursorAnimation(),this.stopShowDesc(),!0!==this.bClosed){if(this.bClosed=!0,this.bShowOK=!1,this.bShowStep2OK=!1,"undefined"==typeof this.$Mask)return this.$Mask=!1,void this.fEnd(this);this.eWindowResize&&$(window).off("resize",this.eWindowResize),this.eNextClick&&(this.$MaskNextBtn.off("click",this.eNextClick),this.$MaskFocus.off("click",this.eNextClick)),this.eSkipAllClick&&this.$MaskLayer.off("click",this.eSkipAllClick);var e=this;this.$Mask.fadeOut("fast",function(){e.$Mask.remove(),e.$Mask=!1,e.oWizard.isEndindOrEnded()||e.fEnd(e)})}},isValidSelector:function(e){if("string"!=typeof e)return!1;try{if(0===$(e).length)return!1}catch(t){return!1}return!0}};var u=function(e,t,i){if("undefined"==typeof e[t])return!1;var n=e[t];if(this.aInstructions=[],this.sId=n.sFeatureId,!0!==i&&this.wasViewed())return!1;if(this.fBeforeEnd="function"==typeof n.fnBeforeEnd&&n.fnBeforeEnd,this.fEnd="function"==typeof n.fnEnd&&n.fnEnd,this.sEndRedirect="string"==typeof n.sEndRedirect&&n.sEndRedirect,this.oSkipPosition="undefined"!=typeof n.oSkipPosition&&n.oSkipPosition,this.bSkipRemove="boolean"==typeof n.bSkipRemove&&n.bSkipRemove,this.bSaveViewed="boolean"!=typeof n.bSaveViewed||n.bSaveViewed,"object"==typeof n.aInstructions&&n.aInstructions.length>0)for(var s in n.aInstructions)this.addInstruction(n.aInstructions[s].zone,n.aInstructions[s].desc,n.aInstructions[s].options);("boolean"!=typeof n.bAutoLaunch||n.bAutoLaunch)&&this.launch()};return u.prototype={addInstruction:function(e,t,i){var n=new d(this,e,t,i);return this.aInstructions.push(n),n},launch:function(){if(0!==this.aInstructions.length){var e=this,i=("string"==typeof this.sSkipVPosition?" "+this.sSkipVPosition:"")+("string"===this.sSkipHPosition?" "+this.sSkipHPosition:"");this.$Container=$(n.render(o,{skip:t.__("misc.skip_all"),skip_class:i})),this.$Skip=this.$Container.find(".help-wizard-skip"),this.bSkipRemove?this.$Skip&&this.$Skip.length>0&&this.$Skip.remove():this.$Skip.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.skipAll()}),this.eEscapeKey=function(t){27===t.which&&e.skipAll()},$("body").append(this.$Container).on("keyup",this.eEscapeKey),this.showNext()}},wasViewed:function(){var t=s.get("helpWizard_viewed");return t||(t=[]),-1!==t.indexOf(this.sId)||e.dyn.donewizs&&-1!==e.dyn.donewizs.indexOf(this.sId)},setViewed:function(t,i){if((i="boolean"!=typeof i||i)===this.wasViewed())return"function"==typeof t&&t(),!1;e.dyn.donewizs||(e.dyn.donewizs=[]);var n=s.get("helpWizard_viewed");if(n||(n=[]),!0===i)-1===e.dyn.donewizs.indexOf(this.sId)&&e.dyn.donewizs.push(this.sId),-1===n.indexOf(this.sId)&&n.push(this.sId);else{var o=e.dyn.donewizs.indexOf(this.sId);-1!==o&&e.dyn.donewizs.splice(o,1),o=n.indexOf(this.sId),-1!==n&&n.splice(o,1)}s.set("helpWizard_viewed",n),i&&$.post({url:"/account/wizard-done",data:{wizardid:this.sId},success:function(e){e.result||console.log("%cERROR : wizard not saved as "+(!0===i?"viewed":"unviewed"),"color:deeppink;"),"function"==typeof t&&t()},error:function(e){console.log("%cERROR : ajax error","color:deeppink;",e),"function"==typeof t&&t()},dataType:"json"})},showNext:function(e){if(!this.isEndindOrEnded()&&0!==this.aInstructions.length){if("number"==typeof e&&e<=this.aInstructions.length)this.iCurrentIndex1=e;else if("undefined"==typeof this.iCurrentIndex1)this.iCurrentIndex1=1;else if(++this.iCurrentIndex1>this.aInstructions.length)return this.iCurrentIndex1=0,void this.end();this.setSkinBtnPosition();this.aInstructions[this.iCurrentIndex1-1].show()}},skipAll:function(){this.sEndRedirect=!1,this.end()},getContainer:function(){return this.$Container},setSkinBtnPosition:function(e){if(void 0===e&&(e=this.oSkipPosition),!1===e||"undefined"==typeof this.$Skip||0===this.$Skip.length)return!1;if("object"==typeof e){if(!e.v||!e.h||"bottom"!==e.v&&"top"!==e.v||"right"!==e.h&&"left"!==e.h)return!1;this.sSkipVPosition=e.v,this.sSkipHPosition=e.h}else{if(e=e.split(" "),2!==e.length||"bottom"!==e[0]&&"top"!==e[0]||"right"!==e[1]&&"left"!==e[1])return!1;this.sSkipVPosition=e[0],this.sSkipHPosition=e[1]}return"top"===this.sSkipVPosition?(this.$Skip.addClass("top"),this.$Skip.removeClass("bottom")):(this.$Skip.removeClass("top"),this.$Skip.addClass("bottom")),"left"===this.sSkipHPosition?(this.$Skip.addClass("left"),this.$Skip.removeClass("right")):(this.$Skip.removeClass("left"),this.$Skip.addClass("right")),!0},killCurrentInstruction:function(){if(this.iCurrentIndex1&&this.iCurrentIndex1>0){this.aInstructions[this.iCurrentIndex1-1].close()}},hideMask:function(e){this.stopAutoHideMask();var t=this,i=this.getContainer(),n=function(){"object"==typeof i&&0!==i.length&&(i.removeClass("help-wizard-no-mask help-wizard-hiding-mask").addClass("help-wizard-hiding-mask"),t.tAutoHideMask=setTimeout(function(){i.addClass("help-wizard-no-mask").removeClass("help-wizard-hiding-mask")},500))};"number"==typeof e?this.tAutoHideMask=setTimeout(n,e):!1===e?function(){"object"==typeof i&&0!==i.length&&i.removeClass("help-wizard-no-mask help-wizard-hiding-mask")}():n()},stopAutoHideMask:function(){"undefined"!=typeof this.tAutoHideMask&&!1!==this.tAutoHideMask&&(clearTimeout(this.tAutoHideMask),this.tAutoHideMask=!1)},isEndindOrEnded:function(){return!0===this.bClosed||!0===this.bClosing},end:function(){if(!0!==this.bClosed){if(!0===this.bClosing)return void this.endStep2();this.bClosing=!0,this.killCurrentInstruction();var e=this;if("function"==typeof this.fBeforeEnd)return void this.fBeforeEnd(function(){e.endStep2()});e.endStep2()}},endStep2:function(){if(!1===this.bSaveViewed)return void this.endStep3();var e=this;this.setViewed(function(){e.endStep3()})},endStep3:function(){if("string"==typeof this.sEndRedirect)return void this.redirect(this.sEndRedirect);this.bClosed=!0;var e=this,t=$("body");this.eEscapeKey&&t.off("keyup",this.eEscapeKey),t.click(),this.$Container.fadeOut(function(){e.$Container.remove(),"function"==typeof e.fEnd&&e.fEnd()})},redirect:function(e){this.$Skip&&this.$Skip.length>0&&this.$Skip.remove();var t=$(n.render(r));this.$Container.append(t),t.css({opacity:"1",display:"none"}).fadeIn("fast",function(){window.location.href=e})}},u}),define("skins/common/help_wizard/wizard_info",[],function(){return{quickies_next_btn:{sFeatureId:1001..toString(),bSkipRemove:!0,aInstructions:[{zone:".quickies__container.is-current .quickies__actions__btns--next",desc:!1,options:{$showCursorAnimOn:".quickies__next",iAutoNextAfterCursorAnim:!0}}]},quickies_prev_btn:{sFeatureId:1002..toString(),bSkipRemove:!0,aInstructions:[{zone:".quickies__container.is-current .quickies__actions__btns--prev",desc:!1,options:{$showCursorAnimOn:".quickies__prev",iAutoNextAfterCursorAnim:!0}}]}}}),define("skins/common/player/quickies/manager",["static/log","config/main","mustache","lib/i18n!front","lib/tools","lib/helpers/scrollbar","static/storage","libs/hls-1.2.5.min","skins/common/history/page_view_history","./constants","./playerBox","./hashManager","./settingsAction","./sendLostViewDurations","text!./templates/manager.mustache","text!./templates/profile.mustache","text!./templates/profileCommentAndMozaiqueContainer.mustache"],function(e,t,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m){var b=null,v=null,y=0,D=function(e,t,i){y++,this.iManagerCount=y,this.sSource=t,this.oOptions=i&&"object"==typeof i?i:{},this.oOptions.sViewDurationStorageKey="view_duration","undefined"!=typeof this.oOptions.oHashManager?(this.oHashManager=this.oOptions.oHashManager,this.oHashManager.setManager(this)):this.oHashManager=new f(this),this.bIsHLSLoaded=!1,this.aOnLoadedFuncs=[],this.oVideosInfo={},this.aVideoViewedIds=[],this.aVideoErrorIds=[],this.aVideoFullyLoadedIds=[],this.aVideoIdsNeedingMoreLoad=[],this.aMainLevelVideoIds=[],this.sMainLevelCurrentId=null,this.iProfileIdNav=null,this.sProfileNavPageLoaded=null,this.oProfilesInfo={},this.sProfileLevelCurrentId=null,this.iCurrentProfileInfoId=null,this.bEndOfMainLevelAutoLoad=!1,this.oAvailableOrientations=null,this.setAvailableOrientations(this.oOptions.oAvailableOrientations),this.sSortFilter=D.S_DEFAULT_SORT_FILTER_KEY,this.iSavedScrollTop=null,this.iSavedScrollLeft=null,this.sOriginPageTitle=null,this.bOpened=!1,this.bInitiated=!1,this.bFirstLoad=!0,this.bTouchStarted=!1,this.bTouchMoveOK=!1,this.bIsSwiping=!1,this.bIsSliding=!1,this.bIsProfileOverlayOpened=!1,this.bIsProfileLevelVideos=!1,this.bMobileNavBtn=!!h.GET_SAVED_SETTING("mobileNavBtn"),this.bCanOrientationLock="object"==typeof window.screen&&"object"==typeof window.screen.orientation&&"function"==typeof window.screen.orientation.lock&&null,this.bFullscreenSupport=null,this.bAutoFullscreenActive=null,this.bIsFullscreenOpen=!1,this.bIsForcedFullscreenDisplay=!1,this.oAllPlayerBox={},this.oMainLevelPlayerBoxes={},this.oProfileLevelPlayerBoxes={},this.oMainLevelPlayerBoxPrev=null,this.oMainLevelPlayerBoxCurr=null,this.oMainLevelPlayerBoxNext=null,this.oProfileLevelPlayerBoxPrev=null,this.oProfileLevelPlayerBoxCurr=null,this.oProfileLevelPlayerBoxNext=null,this.bIsPlaying=!1,this.$mainContainer=null,this.$mainLevelPlayersContainer=null,this.$profileLevelPlayersContainerContainer=null,this.$profileLevelPlayersContainer=null,this.$profileInfoContainer=null,this.iManagerInitTime=(new Date).getTime(),this.oTouchTimer=null,this.iTouchStartX=null,this.iTouchStartY=null,this.iTouchStartTime=null,this.iTouchCurrX=null,this.iTouchCurrY=null,this.sMoveEdgeCloseLoadCSSVar="--quickies-close-load",this.iMoveEdgeCloseLoadCSSVar=0,this.oMoveEdgeCloseLoadInterval=null,this.oMoveEdgeCloseLoadTimeout=null,this.iMoveEdgeCloseLoadWait=300,this.iMoveEdgeCloseLoadWaitMinInterval=20,this.bMoveEdgeCloseEdgeReached=!1,this.bMoveEdgeCloseWaitEnd=!1,this.sMoveEdgeCloseLastStart=null,this.iDeltaXPerc=0,this.iDeltaYPerc=0,this.iForcedCountVideosToLoad=null,this.oEventListeners={},this.iEventListenerCount=0,$(window).on("resize",this,this.onResizeScreen),$(window).on("unload",this,this.onUnload),$(window).on(u.EVENT.SETTING_UPDATE,this,this.onUpdateSetting);var n=this;e||this.setOnLoaded(function(){n.openWithHash()}),"function"==typeof l&&(n.bIsHLSLoaded=!0,n.onFullyLoaded())};return D.I_CLICK_ALLOWED_TIME=150,D.I_COUNT_BEFORE_LOAD_MORE=5,D.I_SCROLL_ALLOWED_TIME=1e3,D.I_SMALL_DEVICE_LIMIT=800,D.I_TOUCH_PAUSE_TIME=50,D.I_TOUCH_STATIC_THRESHOLD_X=30,D.I_TOUCH_STATIC_THRESHOLD_Y=30,D.I_TOUCH_END_SWIPED_TO_NEXT=15,D.I_TOUCH_END_SWIPED_TO_PROFILE=15,D.I_TOUCH_SWIPE_EDGE_LIMIT=20,D.I_TOUCH_SWIPE_THRESHOLD_X=50,D.I_TOUCH_SWIPE_THRESHOLD_Y=100,D.I_TOUCH_SWIPE_ALLOWED_TIME=300,D.I_TRANSITION_DURATION=300,D.S_HASH_BEGIN="quickies/",D.S_HASH_PROFILE="/profile",D.S_ORIENTATION_VERTICAL=c.S_ORIENTATION_VERTICAL,D.S_ORIENTATION_HORIZONTAL=c.S_ORIENTATION_HORIZONTAL,D.S_ORIENTATION_ALL="all",D.SAVE_ORIENTATION=function(e){"string"!=typeof e||e!==D.S_ORIENTATION_VERTICAL&&e!==D.S_ORIENTATION_HORIZONTAL&&e!==D.S_ORIENTATION_ALL||r.set("orientation"+$(window).outerHeight()+"x"+$(window).outerWidth(),e,"quickies")},D.GET_SAVED_ORIENTATION=function(){var e=r.get("orientation"+$(window).outerHeight()+"x"+$(window).outerWidth(),"quickies");return"string"!=typeof e||e!==D.S_ORIENTATION_VERTICAL&&e!==D.S_ORIENTATION_HORIZONTAL&&e!==D.S_ORIENTATION_ALL?null:e},D.SAVE_ORDER=function(e){r.set("orderFilter",e,"quickies")},D.GET_SAVED_ORDER=function(){return r.get("orderFilter","quickies")},D.S_DEFAULT_SORT_FILTER_KEY="best",D.O_AVAILABLE_SORT_FILTERS={"new":{sKey:"new",sLabel:s.__("misc.new"),sUrlKey:"N"},best:{sKey:"best",sLabel:s.__("videos.watch_recently"),sUrlKey:"B"},rating:{sKey:"rating",sLabel:s.__("videos.most_viewed"),sUrlKey:"R"},comments:{sKey:"comments",sLabel:s.__("videos.most_commented"),sUrlKey:"C"},"new-asc":{sKey:"new-asc",sLabel:s.__("video.favs.order.recent"),sUrlKey:"N"},"new-desc":{sKey:"new-desc",sLabel:s.__("video.favs.order.oldest"),sUrlKey:"O"}},D.O_AVAILABLE_ORIENTATIONS={bHorizontal:!0,bVertical:!0,bAll:!0},D.I_MAX_LOAD_PROFILE_ERROR_COUNT=2,D.GET_SORT_FILTER_URL_KEY=function(e){return"undefined"==typeof D.O_AVAILABLE_SORT_FILTERS[e]&&(e=D.S_DEFAULT_SORT_FILTER_KEY),D.O_AVAILABLE_SORT_FILTERS[e].sUrlKey},D.prototype={getUrl:function(e,i){"object"!=typeof i&&(i={});var n=!1,s="trans"===t.dyn.page_main_cat?"shemale":t.dyn.page_main_cat;if(e!==u.URL_MODE.LOAD_HOME_VIDEOS&&e!==u.URL_MODE.LOAD_PROFILE_VIDEOS||!("undefined"!=typeof i.aIdsToLoad&&i.aIdsToLoad.length>0||"undefined"!=typeof i.aForceEncodedIdToLoad&&i.aForceEncodedIdToLoad.length>0)){if(e===u.URL_MODE.LOAD_HOME_VIDEOS)n="/quickies-api/homevideos/"+this.getOrientation()+"/"+s,"string"==typeof this.sSource&&this.sSource.length>0&&(n+="/"+this.sSource);else if(e===u.URL_MODE.LOAD_PROFILE)n="/quickies-api/profileinfos/"+this.getOrientation()+"/"+s+"/"+D.GET_SORT_FILTER_URL_KEY(this.sSortFilter)+"/"+i.iProfileId;else if(e===u.URL_MODE.LOAD_PROFILE_VIDEOS)"profile"===t.data.action&&!1===t.data.main_cat&&(s="none"),n="/quickies-api/profilevideos/"+this.getOrientation()+"/"+s+"/"+D.GET_SORT_FILTER_URL_KEY(this.sSortFilter)+"/"+i.iProfileId+"/"+i.iPage;else if(e===u.URL_MODE.MONITORING){var o=this.getPlayerBox(i.sId);if(n="/quickies-api/"+i.sEvent+"/"+i.sId+"/"+o.getCDN(),i.sEvent===u.MONITORING.BUFFERED)n+="/"+o.getBufferDuration();else if(i.sEvent===u.MONITORING.VIEW){var a=o.getViewDurationForMonitoring();if(!a)return"";n+="/"+a}}}else n="undefined"!=typeof i.aForceEncodedIdToLoad&&i.aForceEncodedIdToLoad.length?"/quickies-api/load/"+i.aForceEncodedIdToLoad.join(","):"/quickies-api/load/"+i.aIdsToLoad.join(","),"string"==typeof this.sSource&&this.sSource.length>0&&(n+="/"+this.sSource);return n},getCurrentVideoId:function(e){return e===u.DISPLAY_LEVEL.MAIN||e!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()?this.sMainLevelCurrentId:this.sProfileLevelCurrentId},setCurrentVideoId:function(t,i,n){var s=this.getPlayerBox(t,n);return!s||s.isError()||s.isUnavailable()?(s&&this.isPlayerUnavailable(s.getId(),n),e.error("%c M "+this.iManagerCount+" --- setCurrentVideoId --- RETURN","color:deepskyblue;font-size:1.4em;"),!1):(n===u.DISPLAY_LEVEL.MAIN||n!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()?this.sMainLevelCurrentId=t:this.sProfileLevelCurrentId=t,i||this.setHash(s,n),!0)},getVideoIdsList:function(e){if(e===u.DISPLAY_LEVEL.MAIN||!this.isItProfileVideoLevel()&&e!==u.DISPLAY_LEVEL.PROFILE_VIDEO)return this.aMainLevelVideoIds;var t=this.getCurrentProfile();return t&&"object"==typeof t&&t.aVideoIds&&t.aVideoIds.length?t.aVideoIds:[]},getNextVideoId:function(e){var t=null;"string"!=typeof e&&(e=this.getCurrentVideoId());var i=this.getVideoIdsList(),n=i.indexOf(e);return n+1<i.length&&(t=i[n+1]),this.isPlayerError(t)?this.getNextVideoId(t):t},getPrevVideoId:function(e){var t=null;void 0===e&&(e=this.getCurrentVideoId());var i=this.getVideoIdsList(),n=i.indexOf(e);return n>0&&(t=i[n-1]),this.isPlayerError(t)?this.getPrevVideoId(t):t},getLoadedVideoIds:function(e){var t=[],i=this.getVideoIdsList(e);for(var n in i){var s=i[n];-1===t.indexOf(s)&&this.getVideoInfo(s)&&t.push(s)}return t},getUsableVideoIds:function(e){var t=this.getLoadedVideoIds(e),i=[];for(var n in t){var s=t[n];this.isPlayerError(s)||this.isPlayerUnavailable(s,null,!1)||i.push(s)}return i},countUsableVideoIds:function(e){return this.getUsableVideoIds(e).length},getUnviewedVideoIds:function(e){var t=this.getUsableVideoIds(e),i=[];for(var n in t){var s=t[n];-1===this.aVideoViewedIds.indexOf(s)&&i.push(s)}return i},isVideoViewed:function(e){return-1!==this.aVideoViewedIds.indexOf(e)},getVideoInfo:function(e){return!(!e||"undefined"==typeof this.oVideosInfo[e])&&this.oVideosInfo[e]},saveVideoInfo:function(e){var t=c.FORMAT_INFO_FROM_JSON(e),i=t.sId;if("undefined"==typeof this.oVideosInfo[i])this.oVideosInfo[i]=t;else if(JSON.stringify(t)!==JSON.stringify(this.oVideosInfo[i])){var n=this.oVideosInfo[i].bIsError,s=this.oVideosInfo[i].bIsUnavailable;this.oVideosInfo[i]=Object.assign(this.oVideosInfo[i],t),n&&(this.oVideosInfo[i].bIsError=n),s&&(this.oVideosInfo[i].bIsUnavailable=s)}return t.bNeedsInfoLoading&&-1===this.aVideoIdsNeedingMoreLoad.indexOf(i)&&this.aVideoIdsNeedingMoreLoad.push(i),this.updateAllPlayerBoxInfos(t.sId),i},isVideoLoaded:function(e,t){var i=this.getVideoInfo(e);return!!i&&(!!i.bIsUnavailable||(!t||!i.bNeedsInfoLoading))},loadVideoList:function(t,i){if(this.bIsLoading)return u.LOAD_MORE.LOADING;this.bIsLoading=!0;var n={};i&&"object"==typeof i||(i={}),"string"!=typeof i.sSortFilter&&(i.sSortFilter=this.sSortFilter);var s;if("undefined"!=typeof i.aIdsToLoad&&0!==i.aIdsToLoad.length||"undefined"!=typeof i.aForceEncodedIdToLoad&&0!==i.aForceEncodedIdToLoad.length)"undefined"!=typeof i.aIdsToLoad&&i.aIdsToLoad.length&&(i.aIdsToLoad=this.clearListWithLoadedVideos(i.aIdsToLoad));else{var o=this.getLoadedVideoIds();o.length>0&&(n.ids_loaded=o)}this.isFullProfileNavigation()?(i.iProfileId=this.getFullProfileNavigation(),i.iPage=null===this.sProfileNavPageLoaded?0:this.sProfileNavPageLoaded+1,s=this.getUrl(u.URL_MODE.LOAD_PROFILE_VIDEOS,i)):(!this.bFirstLoad||this.isSmallDevice()||this.getOrientation()!==D.S_ORIENTATION_VERTICAL&&this.getOrientation()!==D.S_ORIENTATION_ALL||(n.nb_videos=9),s=this.getUrl(u.URL_MODE.LOAD_HOME_VIDEOS,i)),"number"==typeof this.iForcedCountVideosToLoad?n.nb_videos=this.iForcedCountVideosToLoad:i.aIdsToLoad&&i.aIdsToLoad.length&&(n.nb_videos=i.aIdsToLoad.length);var a=this;$.post({url:s,dataType:"json",data:n,success:function(o){if(a.bIsLoading=!1,e.debug_("%c M "+a.iManagerCount+" --- loadVideoList (videos) --- POST results :","color:cornflowerblue;",{sUrl:s,oPostData:n,oReceivedData:o}),o.result){if(o.videos&&o.videos.length&&!1!==o.hasMoreVideos||a.setEndOfAutoLoad(),i.aForceEncodedIdToLoad&&i.aForceEncodedIdToLoad.length){var r=[];for(var l in i.aForceEncodedIdToLoad){var d=i.aForceEncodedIdToLoad[l],u=!1;for(var c in o.videos)o.videos[c].encoded_id===d&&(u=!0);u||(e.error(" M --- loadVideoList (videos) --- on POST results --- Missing id needed to work :",d),r.push(d))}if(r.length)return void a.openRequestedVideoUnavailableAlert(r)}if(a.addToVideoList(o.videos,t,!0),a.isFullProfileNavigation()){a.sProfileNavPageLoaded=i.iPage,a.callProfileAnyInfoLoadedCallBack(i.iProfileId);var f=a.getProfileInfo(i.iProfileId);f&&f.aVideoIds&&f.aVideoIds.length&&a.reorderVideosIds(f.aVideoIds),a.reorderVideosIds(o.orderedIds)}a.bFirstLoad=!1}},error:function(t,i,n){a.bIsLoading=!1,e.error("%c M "+a.iManagerCount+" --- loadVideoList (videos) --- error","color:cornflowerblue",{xhr:t,status:i,error:n})}})},openRequestedVideoUnavailableAlert:function(t){if(e.debug_("%c M --- openRequestedVideoUnavailableAlert :","color:mediumslateblue;font-size:1.1em;",t),!this.bRequestedUnavailablePopOpened){this.bRequestedUnavailablePopOpened=!0;var i=this;require(["lib/helpers/overlay/contextual_popup"],function(e){e.alert(s.__("video.requested_unavailable"),function(){i.bRequestedUnavailablePopOpened=!1;var e=i.getCurrentVideoId();if(e){var t=i.getPlayerBox(e);t&&!t.isError()||i.closeCurrentLevel()}})})}},setVideoListCountToLoad:function(e){this.iForcedCountVideosToLoad="number"==typeof e&&e>0?e:null},loadMoreVideoIfNeeded:function(e,t,i){if(t="string"==typeof t?t:this.getCurrentLevel(),this.bIsLoading&&t===u.DISPLAY_LEVEL.MAIN||this.bIsLoadingProfileVideoList&&t!==u.DISPLAY_LEVEL.MAIN)return u.LOAD_MORE.LOADING;if(!this.canAutoLoadMore())return u.LOAD_MORE.NO_MORE;if(!0!==e){var n=this.getUnviewedVideoIds(),s=n.indexOf(this.getCurrentVideoId());if(-1!==s){if(s+D.I_COUNT_BEFORE_LOAD_MORE<n.length)return u.LOAD_MORE.NOT_ENOUGHT_FOR_MORE}else if(n.length>D.I_COUNT_BEFORE_LOAD_MORE)return u.LOAD_MORE.NOT_ENOUGHT_FOR_MORE}var o;if("string"==typeof(o=t!==u.DISPLAY_LEVEL.MAIN?this.loadProfileVideoList(null,i):this.loadVideoList(i)))for(var a in u.LOAD_MORE)if(u.LOAD_MORE[a]===o)return o;return!0},setEndOfAutoLoad:function(e){if(void 0===e&&!this.isItProfileVideoLevel())return void(this.bEndOfMainLevelAutoLoad=!0);var t=e?this.getProfileInfo(e):this.getCurrentProfile();"object"==typeof t&&(t.bEndOfAutoLoad=!0)},canAutoLoadMore:function(){if(this.oOptions.bNoAutoLoad)return!1;if(!this.isItProfileVideoLevel())return!this.bEndOfMainLevelAutoLoad;var e=this.getCurrentProfile();return"object"==typeof e&&!e.bEndOfAutoLoad},clearListWithLoadedVideos:function(e){var t=[];for(var i in e){var n=e[i];this.isVideoLoaded(n,!0)||t.push(n)}return t},addToVideoList:function(e,t,i){for(var n in e){var s=this.saveVideoInfo(e[n]),o=this.getVideoInfo(s);-1!==this.aMainLevelVideoIds.indexOf(s)||e[n].bIsUnavailable||(this.aMainLevelVideoIds.push(s),
this.addVideoIdsToProfile(o.iProfileId,[s]))}this.updatePlayerBoxes(),"function"==typeof t&&t(),!0!==i&&$(window).trigger(u.EVENT.UPDATE_LIST)},reorderVideosIds:function(e){var t=e&&e.length>0?e.length:0;if(!(t<2)){for(var i=!1,n=1;n<t;n++){var s=e[n],o=this.aMainLevelVideoIds.indexOf(s);if(-1!==o){for(var a=n,r=null,l=-1;a>0&&-1===l;)a--,r=e[a],l=this.aMainLevelVideoIds.indexOf(r);if(-1!==l){if(o-l==1)continue;this.aMainLevelVideoIds.splice(o,1),l=this.aMainLevelVideoIds.indexOf(r),this.aMainLevelVideoIds.splice(l+1,0,s),i=!0}}}i&&(this.updatePlayerBoxes(),this.loadMoreVideoIfNeeded())}},getCurrentLevel:function(){return this.isProfileOverlayOpened()?this.bIsProfileLevelVideos?u.DISPLAY_LEVEL.PROFILE_VIDEO:u.DISPLAY_LEVEL.PROFILE:u.DISPLAY_LEVEL.MAIN},setSortFilter:function(e){"string"==typeof e&&"undefined"!==D.O_AVAILABLE_SORT_FILTERS[e]&&(this.sSortFilter=e)},getSortFilter:function(){return this.sSortFilter},initOrientation:function(){var e=this.oHashManager.getHashOrientation(),i="string"==typeof e?e:D.GET_SAVED_ORIENTATION();this.setOrientation("string"==typeof i?i:t.dyn.is_desktop?D.S_ORIENTATION_ALL:$(window).outerHeight()>$(window).outerWidth()?D.S_ORIENTATION_VERTICAL:D.S_ORIENTATION_HORIZONTAL)},getOrientation:function(){return this.sOrientation},setOrientation:function(e){if(this.sOrientation=e,this.sOrientation===D.S_ORIENTATION_VERTICAL){if(this.oAvailableOrientations.bVertical)return;this.oAvailableOrientations.bHorizontal?this.sOrientation=D.S_ORIENTATION_HORIZONTAL:this.oAvailableOrientations.bAll?this.sOrientation=D.S_ORIENTATION_ALL:this.sOrientation="none"}else if(this.sOrientation===D.S_ORIENTATION_HORIZONTAL){if(this.oAvailableOrientations.bHorizontal)return;this.oAvailableOrientations.bVertical?this.sOrientation=D.S_ORIENTATION_VERTICAL:this.oAvailableOrientations.bAll?this.sOrientation=D.S_ORIENTATION_ALL:this.sOrientation="none"}else if(this.sOrientation===D.S_ORIENTATION_ALL&&this.oAvailableOrientations.bAll)return;this.oAvailableOrientations.bVertical?this.sOrientation=D.S_ORIENTATION_VERTICAL:this.oAvailableOrientations.bHorizontal?this.sOrientation=D.S_ORIENTATION_HORIZONTAL:this.oAvailableOrientations.bAll?this.sOrientation=D.S_ORIENTATION_ALL:this.sOrientation="none"},setAvailableOrientations:function(e){var t=null===this.oAvailableOrientations;"object"!=typeof e||null===e||"boolean"!=typeof e.bHorizontal||"boolean"!=typeof e.bVertical||"boolean"!=typeof e.bAll?this.oAvailableOrientations=D.O_AVAILABLE_ORIENTATIONS:this.oAvailableOrientations=e,t?this.initOrientation():this.setOrientation(this.getOrientation())},canOrientationLock:function(){return this.bCanOrientationLock},getOrientationLockMode:function(){return this.sOrientation===D.S_ORIENTATION_VERTICAL?"portrait":this.sOrientation===D.S_ORIENTATION_HORIZONTAL?"landscape":$(window).outerHeight()>$(window).outerWidth()?"portrait":"landscape"},canIUseTouch:function(){return!$("html").hasClass("notouch")},canIUseTouchSwipe:function(){return this.canIUseTouch()},canIUseAnyHls:function(){return this.canIUseHlsJs()||this.canIUseNativeHls()},canIUseHlsJs:function(){return null===v&&(v="undefined"!=typeof window.MediaSource&&"undefined"!=typeof window.MediaSource.isTypeSupported&&(void 0!==l&&l.isSupported())),v},canIUseNativeHls:function(){if(null===b){var e=document.createElement("video");b="undefined"!=typeof e.canPlayType&&""!==e.canPlayType("application/vnd.apple.mpegURL")}return b},isOpened:function(){return this.bOpened},isPlaying:function(){return this.bIsPlaying},isSliding:function(){return this.bIsSliding},isSmallDevice:function(){var e=$(window),t=e.outerWidth(),i=e.outerHeight();return t<=D.I_SMALL_DEVICE_LIMIT||i<=D.I_SMALL_DEVICE_LIMIT},isCommentingOpened:function(){var e=this.getPlayerBoxCurrent();return!(!e||!e.isCommentingOpened())},openWithHash:function(){this.oHashManager.openWithHash()},setHash:function(e,t){this.isOpened()||this.oHashManager.saveHash(),this.oHashManager.setHash(),this.setCurrentQuickiesPageTitle(e,t)},savePageTitle:function(){this.sOriginPageTitle&&this.sOriginPageTitle.length||(this.sOriginPageTitle=document.title)},setPageTitle:function(e){if(!e||!e.length)return void this.resetPageTitle();this.sOriginPageTitle&&this.sOriginPageTitle.length||this.savePageTitle(),document.title=e},resetPageTitle:function(){this.sOriginPageTitle&&this.sOriginPageTitle.length&&(this.setPageTitle(this.sOriginPageTitle),this.sOriginPageTitle=null)},setCurrentQuickiesPageTitle:function(e,t){if(e||(e=this.getPlayerBoxCurrent(t)),e){var i,n=t===u.DISPLAY_LEVEL.MAIN||t!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel(),s=this.getProfileOverlayState();i=n?s?e.getEscapedProfile():e.getEscapedTitle():e.getEscapedProfile()+" / "+e.getEscapedTitle(),this.setPageTitle(i)}},setFullNavigationToProfile:function(e){this.iProfileIdNav="string"==typeof e||"number"==typeof e?e:null},getFullProfileNavigation:function(){return this.iProfileIdNav},isFullProfileNavigation:function(){var e=this.getFullProfileNavigation();return"null"!==e&&null!==e},isProfileOverlayOpened:function(){var e=this.getCurrentVideoId(u.DISPLAY_LEVEL.MAIN),t=this.getPlayerBox(e,u.DISPLAY_LEVEL.MAIN);return!(!e||!t||!t.isProfileOverlayOpened())},toggleProfileOverlay:function(e,t){if(!this.isItProfileVideoLevel()){var i=this.getCurrentVideoId(),n=this.getPlayerBox(i);return void 0===e&&(e=!this.isProfileOverlayOpened()),n.toggleProfileOverlay(e,t),e}},setProfileOverlayState:function(e,t){this.bIsProfileOverlayOpened=e,t||this.setHash(),this.updateNextPrev()},getProfileOverlayState:function(){return this.bIsProfileOverlayOpened},closeProfileOverlay:function(e){this.toggleProfileOverlay(!1,e)},openProfileOverlay:function(e){this.toggleProfileOverlay(!0,e)},getCurrentProfile:function(){var e=this.getCurrentVideoId(u.DISPLAY_LEVEL.MAIN);if(!e)return null;var t=this.getVideoInfo(e);return t&&t.iProfileId?this.getProfileInfo(t.iProfileId):null},getProfileInfo:function(e){return"undefined"==typeof this.oProfilesInfo[e]?null:this.oProfilesInfo[e]},getOrCreateProfileInfo:function(e){return"undefined"==typeof this.oProfilesInfo[e]&&(this.oProfilesInfo[e]={iId:e,bIsLoadSuccess:!1,bIsLoadErrorExceeded:!1,iIsLoadErrorCount:0,aVideoIds:[],aProfileAnyInfoLoadedCallBacks:[],aProfileAnyInfoLoadedErrorCallBacks:[]}),this.oProfilesInfo[e]},addVideoIdsToProfile:function(e,t){if(e&&t&&t.length){var i=this.getOrCreateProfileInfo(e);for(var n in t){var s=t[n];-1===i.aVideoIds.indexOf(s)&&i.aVideoIds.push(s)}}},hasProfileAnyInfoLoadedCallBack:function(e){var t=this.oProfilesInfo[e];return void 0!==t&&t.aProfileAnyInfoLoadedCallBacks.length>0},addProfileAnyInfoLoadedCallBack:function(e,t){if("function"==typeof t){this.getOrCreateProfileInfo(e).aProfileAnyInfoLoadedCallBacks.push(t)}},callProfileAnyInfoLoadedCallBack:function(e,t){if(this.addProfileAnyInfoLoadedCallBack(e,t),this.hasProfileAnyInfoLoadedCallBack(e)){for(var i=this.getOrCreateProfileInfo(e);i.aProfileAnyInfoLoadedCallBacks.length;){i.aProfileAnyInfoLoadedCallBacks.shift()(i)}i.aProfileAnyInfoLoadedCallBacks=[],i.aProfileAnyInfoLoadedErrorCallBacks=[]}},hasProfileAnyInfoLoadedErrorCallBack:function(e){var t=this.oProfilesInfo[e];return void 0!==t&&t.aProfileAnyInfoLoadedErrorCallBacks.length>0},addProfileAnyInfoLoadedErrorCallBack:function(e,t){if("function"==typeof t){this.getOrCreateProfileInfo(e).aProfileAnyInfoLoadedErrorCallBacks.push(t)}},callProfileAnyInfoLoadedErrorCallBack:function(e,t){if(this.addProfileAnyInfoLoadedErrorCallBack(e,t),this.hasProfileAnyInfoLoadedErrorCallBack(e)){var i=this.getOrCreateProfileInfo(e);for(var n in i.aProfileAnyInfoLoadedErrorCallBacks)i.aProfileAnyInfoLoadedErrorCallBacks[n](i);i.aProfileAnyInfoLoadedCallBacks=[],i.aProfileAnyInfoLoadedErrorCallBacks=[]}},isProfileInfoInit:function(e){return"object"==typeof this.oProfilesInfo[e]&&(!0===this.oProfilesInfo[e].bIsLoadSuccess||!0===this.oProfilesInfo[e].bIsLoadErrorExceeded)},loadProfileInfo:function(t,i,n){if(this.isProfileInfoInit(t))return void this.callProfileAnyInfoLoadedCallBack(t,i);this.addProfileAnyInfoLoadedCallBack(t,i),this.addProfileAnyInfoLoadedErrorCallBack(t,n);var s=this,o=this.getUrl(u.URL_MODE.LOAD_PROFILE,{iProfileId:t,sSortFilter:this.sSortFilter});$.post({url:o,dataType:"json",success:function(i){e.debug_("%c M "+s.iManagerCount+" --- loadProfileInfo (profile) --- POST results :","color:cornflowerblue",{sUrl:o,oPostData:"[no data sent]",oReceivedData:i});var n=s.getOrCreateProfileInfo(t);if(!i.result)return e.error("%c M "+s.iManagerCount+" --- loadProfileInfo (profile) --- POST results : error","color:cornflowerblue",i),n.iIsLoadErrorCount++,n.iIsLoadErrorCount>=D.I_MAX_LOAD_PROFILE_ERROR_COUNT&&(e.error("%c M "+s.iManagerCount+" --- loadProfileInfo (profile) --- POST results : LOAD ERROR EXCEEDED","color:cornflowerblue",n.iIsLoadErrorCount),n.bIsLoadErrorExceeded=!0),void s.callProfileAnyInfoLoadedErrorCallBack(t);var a=parseInt(i.user.verified)>0,r=i.user.is_channel&&!i.user.is_model,l="",d=i.user.country_code.toString().toLowerCase(),u=i.user.secondary_country_code.toString().toLowerCase();d&&(l+='<span class="flag flag-'+d+'"></span>'),u&&(l+='<span class="flag flag-'+u+'"></span>'),l+=i.user.display_name,n.bIsLoadSuccess=!0,n.sDisplay=i.user.display_name,n.sFullDisplayName=l,n.sUserName=i.user.profile_name,n.sTitle=i.user.title,n.sUrl=i.user.url||null,n.sPic=i.user.profile_pic||null,n.sBanner=i.user.banner_url||null,n.sCountryCode=d,n.sCountryName=i.user.country_name.toString(),n.sSecondaryCountryCode=u,n.bIsVerified=a,n.bIsModel=i.user.is_model,n.bIsChannel=i.user.is_channel,n.bIsChannelOnly=r,n.bIsGay=i.user.is_gay,n.bIsTrans=i.user.is_shemale,n.bEndOfAutoLoad=!1,n.iVideoPageLoaded=null,n.iCountQuickiesVideos=i.user.nb_quickies,s.addVideoIdsToProfile(t,i.video_ids_e),s.loadProfileVideoList(t);var c=s.getPlayerBox(t);if(c)c.updateFullProfileInfo(n),c.initProfileOverlayHeader(s.$profileInfoContainer);else{var f=s.getPlayerBoxCurrent();f&&(f.updateFullProfileInfo(n),f.initProfileOverlayHeader(s.$profileInfoContainer))}},error:function(i,n,o){e.error("%c M "+s.iManagerCount+" --- loadProfileInfo (profile) --- error","color:cornflowerblue",{xhr:i,status:n,error:o});var a=s.getOrCreateProfileInfo(t);a.iIsLoadErrorCount++,a.iIsLoadErrorCount>=D.I_MAX_LOAD_PROFILE_ERROR_COUNT&&(e.error("%c M "+s.iManagerCount+" --- loadProfileInfo (profile) --- error : LOAD ERROR EXCEEDED","color:cornflowerblue",a.iIsLoadErrorCount),a.bIsLoadErrorExceeded=!0),s.callProfileAnyInfoLoadedErrorCallBack(t)}})},loadProfileVideoList:function(t,n){this.bIsLoadingProfileVideoList=!0;var s=t?this.getProfileInfo(t):this.getCurrentProfile();if(!s||!s.iId)return this.bIsLoadingProfileVideoList=!1,u.LOAD_MORE.NO_PROFILE;if(s.bEndOfAutoLoad)return this.bIsLoadingProfileVideoList=!1,u.LOAD_MORE.NO_MORE;t=s.iId;var o=this.getUrl(u.URL_MODE.LOAD_PROFILE_VIDEOS,{iProfileId:t,iPage:"number"==typeof s.iVideoPageLoaded?s.iVideoPageLoaded+1:0,sSortFilter:this.sSortFilter}),a=this,r={ids_loaded:this.getLoadedVideoIds()},l=a.getPlayerBoxCurrent(u.DISPLAY_LEVEL.MAIN);return l?(l.addProfileOverlayMozLoader(l.getProfileOverlay()),a.$profileInfoContainer&&a.$profileInfoContainer.length&&l.addProfileOverlayMozLoader(a.$profileInfoContainer),$.post({url:o,dataType:"json",data:r,success:function(l){if(e.debug_("%c M "+a.iManagerCount+" --- loadProfileVideoList (profile videos) --- POST results :","color:cornflowerblue;",{sUrl:o,oPostData:r,oReceivedData:l}),a.bIsLoadingProfileVideoList=!1,!l.result)return void a.callProfileAnyInfoLoadedErrorCallBack(t);if(s.iVideoPageLoaded="number"==typeof s.iVideoPageLoaded?s.iVideoPageLoaded+1:0,l.videos&&l.videos.length){for(i in l.videos)a.saveVideoInfo(l.videos[i]);var d=a.getPlayerBoxCurrent(u.DISPLAY_LEVEL.MAIN);if(d&&"function"==typeof d.updateProfileOverlayMoz){var c=d.getProfileOverlay();d.updateProfileOverlayMoz(s,c),d.removeProfileOverlayMozLoader(c),a.$profileInfoContainer&&a.$profileInfoContainer.length&&(d.updateProfileOverlayMoz(s,a.$profileInfoContainer,"fullProfileInfo"),d.removeProfileOverlayMozLoader(a.$profileInfoContainer)),a.simulateProfileInfoContainerScroll()}}!1===l.hasMoreVideos&&a.setEndOfAutoLoad(t),a.isFullProfileNavigation()&&(a.addToVideoList(l.videos,n),s.aVideoIds.length&&a.reorderVideosIds(s.aVideoIds),a.reorderVideosIds(l.orderedIds)),a.callProfileAnyInfoLoadedCallBack(t)},error:function(i,n,s){e.error("%c M "+a.iManagerCount+" --- loadProfileVideoList (profile videos) --- error","color:cornflowerblue",{xhr:i,status:n,error:s}),a.bIsLoadingProfileVideoList=!1,a.callProfileAnyInfoLoadedErrorCallBack(t)}})):void e.error("loadProfileVideoList : no current PlayerBox")},loadVideoNeedingLoading:function(e,t){var i=this.getVideoIdsNeedingLoading(t||null),n=this;this.loadVideoList(function(){n.removeIdsFromIdsToLoad(i),"function"==typeof e&&e()},{aIdsToLoad:i})},getVideoIdsNeedingLoading:function(e){if("string"==typeof e){var t=this.getPlayerBox(e);!t||!t.needsLoading()||this.aVideoIdsNeedingMoreLoad.length&&-1!==this.aVideoIdsNeedingMoreLoad.indexOf(e)||this.aVideoIdsNeedingMoreLoad.push(e)}if(!this.aVideoIdsNeedingMoreLoad.length)return[];if("number"!=typeof this.iForcedCountVideosToLoad||this.aVideoIdsNeedingMoreLoad.length<=this.iForcedCountVideosToLoad)return this.aVideoIdsNeedingMoreLoad.slice();var i,n,s=[],o=[];if("string"==typeof e){var a=this.aVideoIdsNeedingMoreLoad.indexOf(e);if(-1!==a)for(s.push(e),i=a+1;i<this.aVideoIdsNeedingMoreLoad.length;i++)n=this.aVideoIdsNeedingMoreLoad[i],-1===o.indexOf(n)&&o.push(n)}var r=this.getCurrentVideoId(),l=this.getNextVideoId("string"==typeof e?e:r),d=this.getPrevVideoId("string"==typeof e?e:r),u=this.aVideoIdsNeedingMoreLoad.indexOf(r),c=this.aVideoIdsNeedingMoreLoad.indexOf(l),f=this.aVideoIdsNeedingMoreLoad.indexOf(d);if(-1!==u)for(s.push(r),i=u+1;i<this.aVideoIdsNeedingMoreLoad.length&&i<=this.iForcedCountVideosToLoad+u-o.length;i++)n=this.aVideoIdsNeedingMoreLoad[i],-1===o.indexOf(n)&&o.push(n);if(-1!==c)for(s.push(l),i=c+1;i<this.aVideoIdsNeedingMoreLoad.length&&i<=this.iForcedCountVideosToLoad+c-o.length;i++)n=this.aVideoIdsNeedingMoreLoad[i],-1===o.indexOf(n)&&o.push(n);if(-1!==f&&s.push(d),s.length<this.iForcedCountVideosToLoad){if(o.length)for(i=0;s.length<this.iForcedCountVideosToLoad&&i<o.length;)n=o[i],-1===s.indexOf(n)&&s.push(n),i++;if(s.length<this.iForcedCountVideosToLoad)for(i=0;s.length<this.iForcedCountVideosToLoad&&i<this.aVideoIdsNeedingMoreLoad.length;)n=this.aVideoIdsNeedingMoreLoad[i],-1===s.indexOf(n)&&s.push(n),i++}else s.length>this.iForcedCountVideosToLoad&&s.splice(this.iForcedCountVideosToLoad);return s},needsVideoLoading:function(e){return!!this.aVideoIdsNeedingMoreLoad.length&&("string"==typeof e&&-1!==this.aVideoIdsNeedingMoreLoad.indexOf(e)&&!this.isPlayerError(e)||(-1!==this.aVideoIdsNeedingMoreLoad.indexOf(this.getCurrentVideoId())||(-1!==this.aVideoIdsNeedingMoreLoad.indexOf(this.getNextVideoId("string"==typeof e?e:null))||-1!==this.aVideoIdsNeedingMoreLoad.indexOf(this.getPrevVideoId("string"==typeof e?e:null)))))},removeIdsFromIdsToLoad:function(e){var t,i=[];for(t in e){var n=e[t];this.isVideoLoaded(n,!0)&&i.push(n)}for(t in i){var s=this.aVideoIdsNeedingMoreLoad.indexOf(i[t]);-1!==s&&this.aVideoIdsNeedingMoreLoad.splice(s,1)}},isItProfileVideoLevel:function(){return this.bIsProfileLevelVideos},setToProfileVideoLevel:function(e,t){if("boolean"!=typeof e&&(e=!0),e!==this.bIsProfileLevelVideos){this.bIsProfileLevelVideos=e,this.$profileLevelPlayersContainerContainer.stop(),this.$profileLevelPlayersContainer.stop();var i=this;this.$mainContainer.toggleClass("quickies--profile-level-is-opened",e),e?this.$profileLevelPlayersContainerContainer.show(0,function(){i.$profileLevelPlayersContainer.animate({left:"0%"},D.I_TRANSITION_DURATION)}):(this.$profileLevelPlayersContainer.animate({left:"100%"},D.I_TRANSITION_DURATION,function(){i.killProfileVideoLevel()}),this.isProfileInfoContainerVisible()&&this.toggleProfileOverlay(!1));var n=this.getPlayerBox(this.getCurrentVideoId());t||this.setHash(n),this.updateNextPrev(),this.updateProfileInfoContainer(n)}},closeProfileVideoLevel:function(e){this.setToProfileVideoLevel(!1,e)},openProfileVideoLevel:function(e){this.setToProfileVideoLevel(!0,e)},killProfileVideoLevel:function(){this.$profileLevelPlayersContainerContainer.hide(0);for(i in this.oProfileLevelPlayerBoxes){this.oProfileLevelPlayerBoxes[i].closeContainer()}this.oProfileLevelPlayerBoxPrev=null,this.oProfileLevelPlayerBoxCurr=null,this.oProfileLevelPlayerBoxNext=null,this.setToProfileVideoLevel(!1,!0)},updateProfileInfoContainer:function(e,t){if(e){var i=e.getProfileId(),s=e.getId();if(i===this.iCurrentProfileInfoId&&!t)return e.setProfileInfoVideoInfo(this.$profileInfoContainer),void e.initToggleProfileTabs(null,this.$profileInfoContainer);if(this.makeContainer(),null!==this.$profileInfoContainer&&this.$profileInfoContainer.length){this.iCurrentProfileInfoId=i;var o=e.getProfileInfoForTpl();o.bIsDesktopDisplay=!0,this.$profileInfoContainer.empty().append($(n.render(g,o))),this.$profileInfoContainer.find(".quickies__close").on("click",this,this.onClickClose);var a=this;this.loadProfileInfo(i,function(e){a.updateFullProfileInfoContainer(e,s)},function(e){a.updateFullProfileInfoContainer(e,s)})}}},isProfileInfoContainerVisible:function(){return!!(this.$profileInfoContainer&&this.$profileInfoContainer.length&&this.$profileInfoContainer.is(":visible"))},simulateProfileInfoContainerScroll:function(){this.oProfileContentScroll&&this.oProfileContentScroll.onScrollCallback()},updateFullProfileInfoContainer:function(e,t){var i="string"==typeof t?this.getPlayerBox(t):this.getPlayerBoxCurrent();if(i){i.updateFullProfileInfo(e),i.initProfileOverlayHeader(this.$profileInfoContainer),this.$profileInfoContainer.find(".quickies__uploader-profile__content").replaceWith($(n.render(m,{sComments:s.__("video.comments"),sQuickies:"QUICKIES",sCommentsCount:i.getCommentsCountStr(),sVideosCount:i.getProfileVideoCountStr(),sOrientation:this.getOrientation()}))),i.updateProfileOverlayMoz(e,this.$profileInfoContainer,"fullProfileInfo"),this.oProfileContentScroll&&this.oProfileContentScroll.destroy(),this.oProfileContentScroll=new a({oOptions:{$Container:this.$profileInfoContainer.find(".scroll"),sMode:a.S_MODE_VERTICAL},oListeners:{fnOnScroll:function(e){i.onScrollUploaderOverlay(e)}}});var o=this;i.initToggleProfileTabs(null,this.$profileInfoContainer,function(){o.oProfileContentScroll&&(o.oProfileContentScroll.forceUpdateView(!0),o.oProfileContentScroll.scrollTop(0))})}},openContainer:function(){this.isOpened()||(this.iSavedScrollTop=$("html, body").scrollTop(),this.iSavedScrollLeft=$("html, body").scrollLeft(),this.makeContainer(),$("body").on("keyup",this,this.onKeyUp).append(this.$mainContainer),this.isAutoFullscreenActivated()&&this.openFullscreen(),this.$mainContainer.toggleClass("quickies--mob-nav-btn",this.bMobileNavBtn),this.bOpened=!0,this.updateHTMLClass(),this.triggerEvent(u.EVENT.MANAGER.OPEN))},makeContainer:function(){if(!this.$mainContainer){var e=n.render(g,{sUploaderDisplay:this.sUploaderDisplay,sUploaderUrl:"",bIsUploaderPage:this.isFullProfileNavigation()&&"object"==typeof t.data&&"profile"===t.data.action&&t.data.user.id_user.toString()===this.iProfileIdNav.toString(),bIsDesktopDisplay:!0,sProfilePic:t.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",sDefaultProfilePic:t.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",sOpenInTab:s.__("quickies.open_in_tab"),sOpenPage:s.__("quickies.open_page"),sBack:s.__("misc.back"),sLoader:c.GET_LOADER_HTML()});this.$mainContainer=$(n.render(_,{sPrev:s.__("misc.previous"),sNext:s.__("misc.next"),sOrientation:this.getOrientation(),sProfile:e,sLike:s.__("misc.i_like"),sDislike:s.__("misc.i_dislike")})),this.$mainContainer.on("click",this,this.onClickMainContainer),this.$mainLevelPlayersContainer=this.$mainContainer.find(".quickies__players--main-level"),this.$mainLevelPlayersContainer.on("click",this,this.onClickPlayersContainer).on("wheel",this,this.onWheelMainContainer),this.$profileLevelPlayersContainerContainer=this.$mainContainer.find(".quickies__players--profile-level-container"),this.$profileLevelPlayersContainerContainer.on("click",this,this.onClickPlayersContainer).on("wheel",this,this.onWheelMainContainer),this.$profileLevelPlayersContainer=this.$mainContainer.find(".quickies__players--profile-level"),this.$profileInfoContainer=this.$mainContainer.find(".quickies__desktop-profile-info"),this.$profileInfoContainer.find(".quickies__close").on("click",this,this.onClickClose),this.canIUseTouch()?(this.$mainLevelPlayersContainer.on("touchstart",this,this.onTouchStart).on("touchmove",this,this.onTouchMove).on("touchend",this,this.onTouchEnd).on("touchcancel",this,this.onTouchEnd),this.$profileLevelPlayersContainerContainer.on("touchstart",this,this.onTouchStart).on("touchmove",this,this.onTouchMove).on("touchend",this,this.onTouchEnd).on("touchcancel",this,this.onTouchEnd)):(this.$mainLevelPlayersContainer.on("mousedown",this,this.onMouseDown).on("mouseup",this,this.onMouseUp).on("mouseout",this,this.onMouseUp),this.$profileLevelPlayersContainerContainer.on("mousedown",this,this.onMouseDown).on("mouseup",this,this.onMouseUp).on("mouseout",this,this.onMouseUp)),this.canIUseTouchSwipe()||this.$mainContainer.addClass("quickies--cant-swipe"),this.$closeSwipePrev=this.$mainContainer.find(".quickies__close-swipe--prev"),this.$closeSwipePrevIcf=this.$closeSwipePrev.find(".icon-f"),this.$closeSwipeNext=this.$mainContainer.find(".quickies__close-swipe--next"),this.$closeSwipeNextIcf=this.$closeSwipeNext.find(".icon-f")}},closeCurrentLevel:function(e){switch(this.getCurrentLevel()){case u.DISPLAY_LEVEL.PROFILE_VIDEO:this.iDeltaYPerc=0,this.$closeSwipePrevIcf.css({background:"none"}),this.$closeSwipePrev.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible"),this.$closeSwipeNextIcf.css({background:"none"}),this.$closeSwipeNext.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible"),this.closeProfileVideoLevel(e);break;case u.DISPLAY_LEVEL.PROFILE:this.closeProfileOverlay(e);break;default:this.closeContainer(e)}},closeContainer:function(e){if(this.isOpened()){var t,i;for(t in this.oMainLevelPlayerBoxes)i=this.oMainLevelPlayerBoxes[t],i.closeContainer();this.killProfileVideoLevel(),this.oMainLevelPlayerBoxPrev=null,this.oMainLevelPlayerBoxCurr=null,this.oMainLevelPlayerBoxNext=null,this.$mainContainer&&(this.isFullscreenSupported()&&this.exitFullscreen(),this.$mainContainer.detach()),$("body").off("keyup",this.onKeyUp),this.bOpened=!1,this.updateHTMLClass(!0),this.triggerEvent(u.EVENT.MANAGER.CLOSE),e||this.oHashManager.setSavedHash(),"number"==typeof this.iSavedScrollTop&&$("html, body").scrollTop(this.iSavedScrollTop),"number"==typeof this.iSavedScrollLeft&&$("html, body").scrollLeft(this.iSavedScrollLeft),this.resetPageTitle()}},appendPlayer:function(e,t){t===u.DISPLAY_LEVEL.MAIN?this.$mainLevelPlayersContainer&&this.$mainLevelPlayersContainer.length&&this.$mainLevelPlayersContainer.append(e):this.$profileLevelPlayersContainer&&this.$profileLevelPlayersContainer.length&&this.$profileLevelPlayersContainer.append(e)},openAndPlay:function(e){e&&"object"==typeof e||(e={});var t="boolean"==typeof e.bNoHash?e.bNoHash:null,i=this.getCurrentLevel(),n=this,s=[];if("string"==typeof e.sId&&s.push(e.sId),"string"==typeof e.sProfileVideoEncodedId&&s.push(e.sProfileVideoEncodedId),s.length)for(var o=0;o<s.length;)this.isVideoLoaded(s[o],!0)?s.splice(o,1):o++;if(s.length)return void this.loadVideoList(function(){n.openAndPlay(e)},{aForceEncodedIdToLoad:s});if(this.needsVideoLoading(e.sId||null))return void this.loadVideoNeedingLoading(function(){n.openAndPlay(e)},e.sId||null);if("undefined"!=typeof e.sId){if(e.sId!==this.getCurrentVideoId(u.DISPLAY_LEVEL.MAIN)&&this.setCurrentVideoId(e.sId,!0,u.DISPLAY_LEVEL.MAIN),e.bProfileOverlay===this.isProfileOverlayOpened()&&this.isOpened()&&(!e.sProfileVideoEncodedId||i===u.DISPLAY_LEVEL.PROFILE_VIDEO&&e.sProfileVideoEncodedId===this.getCurrentVideoId()))return void(e.sProfileVideoEncodedId||i!==u.DISPLAY_LEVEL.PROFILE_VIDEO?(this.updatePlayerBoxes(),this.play()):this.setToProfileVideoLevel(!1,t));if(!this.getVideoInfo(e.sId)){var a=[e.sId];e.sProfileVideoEncodedId&&!this.getVideoInfo(e.sProfileVideoEncodedId)&&a.push(e.sProfileVideoEncodedId);return void(this.clearListWithLoadedVideos(a).length&&this.loadVideoList(function(){n.openAndPlay(e)},{aIdsToLoad:a}))}if(e.sProfileVideoEncodedId&&!this.getVideoInfo(e.sProfileVideoEncodedId)){return void(this.clearListWithLoadedVideos([e.sProfileVideoEncodedId]).length?this.loadVideoList(function(){n.openAndPlay(e)},{aIdsToLoad:[e.sProfileVideoEncodedId]}):(e.sProfileVideoEncodedId=null,this.openAndPlay(e)))}if(!this.setCurrentVideoId(e.sId,t,u.DISPLAY_LEVEL.MAIN))return this.isPlayerUnavailable(e.sId),void("function"==typeof e.fnCompleteCallback&&e.fnCompleteCallback())}var r=this.getCurrentVideoId();if(!(r||(r=this.getNextVideoId())&&this.setCurrentVideoId(r,t,u.DISPLAY_LEVEL.MAIN)))return this.closeContainer(),void("function"==typeof e.fnCompleteCallback&&e.fnCompleteCallback());if(this.isOpened()||(this.oHashManager.saveHash(),this.openContainer()),this.updatePlayerBoxes(),e.bProfileOverlay&&this.oMainLevelPlayerBoxCurr&&!this.oMainLevelPlayerBoxCurr.isError()?(e.sProfileVideoEncodedId||"undefined"==typeof e.sProfileVideoEncodedId||this.setToProfileVideoLevel(!1,t),this.oMainLevelPlayerBoxCurr.toggleProfileOverlay(!0,t),e.sProfileVideoEncodedId&&(this.setToProfileVideoLevel(!0,t),this.setCurrentVideoId(e.sProfileVideoEncodedId,t,u.DISPLAY_LEVEL.PROFILE_VIDEO),this.updatePlayerBoxes(),this.play("openAndPlay"))):(i!==u.DISPLAY_LEVEL.PROFILE_VIDEO||e.sProfileVideoEncodedId||"undefined"==typeof e.sProfileVideoEncodedId||this.setToProfileVideoLevel(!1,t),this.play("openAndPlay")),"function"==typeof e.fnCompleteCallback&&e.fnCompleteCallback(),"boolean"==typeof e.bIsCommentingOpened&&!0===e.bIsCommentingOpened){var l=this.getPlayerBoxCurrent();l&&l.openComments()}},play:function(e){var t=this.getCurrentVideoId();if(!this.isPlayerUnavailable(t)){if(this.isPlayerError(t))return void this.openRequestedVideoUnavailableAlert([t]);var i=this.getPlayerBoxCurrent(null);if(i&&!this.isPlayerUnavailable(i.getId())){if(i.needsLoading()){var n=this;return void this.loadVideoNeedingLoading(function(){n.play()},i.getId())}this.loadMoreVideoIfNeeded(),this.closeProfileOverlay(),i.play(e),this.bIsPlaying=!0}}},pause:function(e){var t=this.getPlayerBoxCurrent();t&&(t.pause(e),this.bIsPlaying=!1)},togglePlayPause:function(e){this.bIsPlaying?this.pause(e):this.play(e)},playNext:function(){if(!this.isSliding()){this.closeProfileOverlay();var e=this.getNextVideoId();if(this.setCurrentVideoId(e),!e)return void this.playReplace("backAfterSwiping");this.needsVideoLoading(e)&&this.loadVideoNeedingLoading(null,e),this.slidePlayers("next")}},playPrev:function(){if(!this.isSliding()){this.closeProfileOverlay();var e=this.getPrevVideoId();if(this.setCurrentVideoId(e),!e)return void this.playReplace("backAfterSwiping");this.slidePlayers("prev")}},playReplace:function(e){this.isSliding()||this.slidePlayers("reset",e)},playIdNext:function(e,t){var i=this.getCurrentLevel();i===u.DISPLAY_LEVEL.PROFILE_VIDEO&&this.updatePlayerBoxes();var n=this.getPlayerBoxCurrent();if(this.isSliding()||!n)return void("object"==typeof t&&"function"==typeof t.fnCompleteCallback&&t.fnCompleteCallback());this.getCurrentVideoId()!==e&&this.setCurrentVideoId(e),i===u.DISPLAY_LEVEL.PROFILE_VIDEO?n.play():n.getId()!==e?(this.setPlayerBoxNext(this.getPlayerBox(e)),this.slidePlayers("next","playIdNext")):"object"==typeof t&&!t.bProfileOverlay&&n.isProfileOverlayOpened()&&n.toggleProfileOverlay(!1,"boolean"==typeof t.bNoHash?t.bNoHash:null),"object"==typeof t&&t.bProfileOverlay&&!n.isProfileOverlayOpened()&&n.toggleProfileOverlay(!0,"boolean"==typeof t.bNoHash?t.bNoHash:null),"object"==typeof t&&"function"==typeof t.fnCompleteCallback&&t.fnCompleteCallback()},slidePlayers:function(e,t){if(!this.isSliding()){"next"!==e&&"prev"!==e&&(e="reset");var i="number"==typeof this.iDeltaYPerc?this.iDeltaYPerc:0,n="next"===e?-100:"prev"===e?100:0,s=D.I_TRANSITION_DURATION,o=this.getPlayerBoxCurrent(),a="clickPrevent"!==t&&"sideSwipe"!==t,r="clickPrevent"!==t&&"sideSwipe"!==t||o&&("touchStartTimer"===o.getPauseMethod()||"clickDragStartTimer"===o.getPauseMethod());if(i===n)return void(r&&this.play("slideNoChange"));var l=this.getPlayerBoxPrevious(),d=this.getPlayerBoxNext(),u=l?l.getContainer(!0):null,c=o?o.getContainer(!0):null,f=d?d.getContainer(!0):null,h=this;a&&(this.bIsSliding=!0,this.$mainContainer&&this.$mainContainer.addClass("quickies--sliding"),this.pause("sliding")),this.iDeltaYPerc=0,u&&u.css({top:i-100+"%",bottom:""}),c&&c.css({top:i+"%",bottom:""}),f&&f.css({top:"",bottom:i+100+"%"}),$({iDeltaYPerc:100*i}).animate({iDeltaYPerc:100*n},{duration:s,step:function(){var e=Math.round(this.iDeltaYPerc)/100;u&&u.css({top:e-100+"%",bottom:""}),c&&c.css({top:e+"%",bottom:""}),f&&f.css({top:e+100+"%",bottom:""}),e>0?u||(h.$closeSwipePrevIcf.css({background:"none"}),h.$closeSwipePrev.css({opacity:e*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)/100,transform:"scale("+(Math.floor(Math.abs(e*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100*2+1)+")"}).addClass("is-visible")):f||(e=Math.abs(e),h.$closeSwipeNextIcf.css({background:"none"}),h.$closeSwipeNext.css({opacity:e*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)/100,transform:"scale("+(Math.floor(Math.abs(e*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100*2+1)+")"}).addClass("is-visible"))},complete:function(){u&&u.css({top:n-100+"%",bottom:""}),c&&c.css({top:n+"%",bottom:""}),f&&f.css({top:n+100+"%",bottom:""}),h.$closeSwipePrevIcf.css({background:"none"}),h.$closeSwipePrev.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible"),h.$closeSwipeNextIcf.css({background:"none"}),h.$closeSwipeNext.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible"),h.updatePlayerBoxes(),r&&"sideSwipe"!==t&&h.play("slidePlayersEnded"),h.bIsSliding=!1,h.$mainContainer&&h.$mainContainer.removeClass("quickies--sliding"),h.slideEndedCallback()}})}},setSlideEndedCallback:function(e){this.isSliding()?this.fnSlideEndedCallback=e:e()},slideEndedCallback:function(){"function"==typeof this.fnSlideEndedCallback&&(this.fnSlideEndedCallback(),this.fnSlideEndedCallback=null)},isSwiping:function(){return this.bIsSwiping},setIsSwiping:function(e){this.bIsSwiping="boolean"!=typeof e||e},clearTouchTimer:function(){this.oTouchTimer&&clearTimeout(this.oTouchTimer),this.oTouchTimer=null},updateHTMLClass:function(e){var t=this.isOpened();if(t||e){var i=$(window).innerWidth(),n=$(window).innerHeight(),s=this.isFullscreenSupported(),o=this.isFullscreenDisplay(i,n),a={"qucks-opened":t,"qucks-full-screen-display":o,"qucks-side-panel-display":!o,"qucks-can-force-full-screen-display":s&&(!o||o&&this.bIsForcedFullscreenDisplay),"qucks-small-height":n<=u.SIZE.MEDIA_XSMALL_MAX_HEIGHT},r=[],l=[];for(var d in a)t&&a[d]?r.push(d):l.push(d);$("html").addClass(r.join(" ")).removeClass(l.join(" "))}},startMoveEdgeReachedCloseTimer:function(e){if(!this.bMoveEdgeCloseEdgeReached||this.sMoveEdgeCloseLastStart!==e){this.clearMoveEdgeCloseTimers(),this.bMoveEdgeCloseEdgeReached=!0,this.sMoveEdgeCloseLastStart=e,this.bMoveEdgeCloseWaitEnd=!1,this.iMoveEdgeCloseLoadCSSVar=0,this.updateMoveEdgeCloseLoadCSSVar();var t=this,i=Math.max(this.iMoveEdgeCloseLoadWaitMinInterval,this.iMoveEdgeCloseLoadWait/100),n=Math.ceil(100/(this.iMoveEdgeCloseLoadWait/i));this.oMoveEdgeCloseLoadInterval=setInterval(function(){t.iMoveEdgeCloseLoadCSSVar+=n,t.iMoveEdgeCloseLoadCSSVar>=100&&(t.iMoveEdgeCloseLoadCSSVar=100,t.updateMoveEdgeCloseLoadCSSVar(),t.bMoveEdgeCloseWaitEnd=!0,t.clearMoveEdgeCloseTimers(!0,!1)),t.updateMoveEdgeCloseLoadCSSVar()},i),this.oMoveEdgeCloseLoadTimeout=setTimeout(function(){t.bMoveEdgeCloseWaitEnd=!0},i)}},stopMoveEdgeReachedCloseTimer:function(e){
this.bMoveEdgeCloseEdgeReached&&("string"==typeof e&&this.sMoveEdgeCloseLastStart!==e||(this.clearMoveEdgeCloseTimers(),this.bMoveEdgeCloseEdgeReached=!1,this.sMoveEdgeCloseLastStart=null,this.bMoveEdgeCloseWaitEnd=!1,this.iMoveEdgeCloseLoadCSSVar=0,this.updateMoveEdgeCloseLoadCSSVar()))},clearMoveEdgeCloseTimers:function(e,t){!1!==e&&this.oMoveEdgeCloseLoadInterval&&(clearInterval(this.oMoveEdgeCloseLoadInterval),this.oMoveEdgeCloseLoadInterval=null),!1!==t&&this.oMoveEdgeCloseLoadTimeout&&(clearTimeout(this.oMoveEdgeCloseLoadTimeout),this.oMoveEdgeCloseLoadTimeout=null)},updateMoveEdgeCloseLoadCSSVar:function(){document.documentElement.style.setProperty(this.sMoveEdgeCloseLoadCSSVar,this.iMoveEdgeCloseLoadCSSVar.toString(10)+"%")},isFullscreenDisplay:function(e,t){("number"!=typeof e||isNaN(e))&&(e=$(window).innerWidth()),("number"!=typeof t||isNaN(t))&&(t=$(window).innerHeight());var i=this.isMediaFullscreenDisplay(e,t);return i||!i&&this.bIsForcedFullscreenDisplay},isMediaFullscreenDisplay:function(e,t){return("number"!=typeof e||isNaN(e))&&(e=$(window).innerWidth()),("number"!=typeof t||isNaN(t))&&(t=$(window).innerHeight()),e<=u.SIZE.MEDIA_SMALL_MAX_WIDTH_BIG&&t<=u.SIZE.MEDIA_SMALL_MAX_HEIGHT||e<=u.SIZE.MEDIA_SMALL_MAX_WIDTH},toggleForcedFullscreenDisplay:function(t,i){if((t="boolean"==typeof t?t:!this.bIsForcedFullscreenDisplay)===this.bIsForcedFullscreenDisplay)return void e.info_("%c M "+this.iManagerCount+" --- toggleForcedFullscreenDisplay","color:cornflowerblue","no change:",t);this.bIsForcedFullscreenDisplay=t,e.info_("%c M "+this.iManagerCount+" --- toggleForcedFullscreenDisplay","color:cornflowerblue","change to :",t),this.updateHTMLClass(),i||(this.bIsForcedFullscreenDisplay?this.openFullscreen():this.exitFullscreen())},reinitForcedFullscreenDisplayIfNeeded:function(){this.bIsForcedFullscreenDisplay&&this.isMediaFullscreenDisplay()&&this.toggleForcedFullscreenDisplay(!1,!0)},isAutoFullscreenActivated:function(){return null===this.bAutoFullscreenActive&&(this.isFullscreenSupported()&&!t.dyn.is_desktop?this.bAutoFullscreenActive=!0:this.bAutoFullscreenActive=!1),this.bAutoFullscreenActive},isFullscreenSupported:function(){if(null===this.bFullscreenSupport)if((document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&!/XXXAndroidApp/.test(navigator.userAgent)){var e=document.createElement("div");this.bFullscreenSupport="function"==typeof e.requestFullscreen||"function"==typeof e.webkitRequestFullscreen||"function"==typeof e.mozRequestFullScreen||"function"==typeof e.msRequestFullscreen}else this.bFullscreenSupport=!1;return this.bFullscreenSupport||(this.bIsFullscreenOpen=!1),this.bFullscreenSupport},isFullscreenOpen:function(){return this.bIsFullscreenOpen},openFullscreen:function(){if(this.$mainContainer){if(!this.isFullscreenSupported())return!1;var t,i=this,n=$("body")[0];if("function"==typeof n.requestFullscreen)t=n.requestFullscreen();else if("function"==typeof n.webkitRequestFullscreen)t=n.webkitRequestFullscreen();else if("function"==typeof n.mozRequestFullScreen)t=n.mozRequestFullScreen();else{if("function"!=typeof n.msRequestFullscreen)return e.error("%c M "+this.iManagerCount+" --- openFullscreen","color:cornflowerblue","Fullscreen Not supported"),!1;t=n.msRequestFullscreen()}if(!t||"object"!=typeof t)return e.error("%c M "+this.iManagerCount+" --- openFullscreen","color:cornflowerblue","Fullscreen Not supported / oPromiseFS (requestFullscreen) not an object"),!1;if(t["catch"](function(t){i.bAutoFullscreenActive=!1,i.bFullscreenSupport=!1,i.bIsFullscreenOpen=!1,e.error("%c M "+i.iManagerCount+" --- openFullscreen : CAN'T Open Fullscreen","color:cornflowerblue",t)}),this.bIsFullscreenOpen=!0,!1!==this.bCanOrientationLock){window.screen.orientation.lock(this.getOrientationLockMode()).then(function(){i.bCanOrientationLock=!0})["catch"](function(t){i.bCanOrientationLock=!1,e.error("%c M "+i.iManagerCount+" --- openFullscreen : CAN'T LOCK ORIENTATION","color:cornflowerblue",t)})}}},exitFullscreen:function(){var t;if("function"==typeof document.exitFullscreen?t=document.exitFullscreen():"function"==typeof document.cancelFullScreen?t=document.cancelFullScreen():"function"==typeof document.mozCancelFullScreen?t=document.mozCancelFullScreen():"function"==typeof document.webkitCancelFullScreen?t=document.webkitCancelFullScreen():"function"==typeof document.msExitFullscreen&&(t=document.msExitFullscreen()),this.bIsFullscreenOpen=!1,!t||"object"!=typeof t)return!1;var i=this;t.then(function(){"number"==typeof i.iSavedScrollTop&&$("html, body").scrollTop(i.iSavedScrollTop),"number"==typeof i.iSavedScrollLeft&&$("html, body").scrollLeft(i.iSavedScrollLeft)})["catch"](function(t){e.warn("%c M "+i.iManagerCount+" --- exitFullscreen : CAN'T EXIT Fullscreen","color:cornflowerblue",t)}),"object"==typeof window.screen&&"object"==typeof window.screen.orientation&&"function"==typeof window.screen.orientation.unlock&&window.screen.orientation.unlock()},updatePlayerBoxes:function(){var e=this.getCurrentVideoId(),t=this.getPlayerBox(e);if(t){var i=this.getPrevVideoId(),n=this.getNextVideoId(),s=this.getPlayerBoxPrevious();if(s){var o=s.getId();o!==e&&(o!==i&&o!==n?s.closeContainer():(s.closeMenus(),s.pause()))}if(t=this.getPlayerBoxCurrent()){var a=t.getId();a!==e&&(a!==i&&a!==n?t.closeContainer():(t.closeMenus(),t.pause()))}var r=this.getPlayerBoxNext();if(r){var l=r.getId();l!==e&&(l!==i&&l!==n?r.closeContainer():(r.closeMenus(),r.pause()))}if(this.setPlayerBoxPrevious(this.getPlayerBox(i)),this.setPlayerBoxCurrent(this.getPlayerBox(e)),this.setPlayerBoxNext(this.getPlayerBox(n)),s=this.getPlayerBoxPrevious(),t=this.getPlayerBoxCurrent(),r=this.getPlayerBoxNext(),$(c.S_CONTAINER_SELECTOR).removeClass("is-current"),s){var d=s.getContainer(!0);d&&d.css({top:"-100%",bottom:""})}if(t){var u=t.getContainer(!0);u&&u.addClass("is-current").css({top:"0",bottom:""})}if(r){var f=r.getContainer(!0);f&&f.css({top:"100%",bottom:""})}this.updateNextPrev()}},updateNextPrev:function(){var e=this.$previous&&this.$previous.length,t=this.$next&&this.$next.length,i=e&&this.$previous.is(":visible"),n=t&&this.$next.is(":visible"),s=this.getCurrentLevel()===u.DISPLAY_LEVEL.PROFILE||this.isFullscreenDisplay()&&this.canIUseTouchSwipe()&&!this.getSavedMobileNavBtn()&&!this.isProfileInfoContainerVisible(),o=!s&&!!this.getPlayerBoxPrevious(),a=!s&&!!this.getPlayerBoxNext();this.$mainContainer&&(this.$mainContainer.toggleClass("quickies--with-nav-prev",o),this.$mainContainer.toggleClass("quickies--with-nav-next",a)),e&&(o?i||this.$previous.fadeIn():i&&this.$previous.fadeOut()),t&&(a?n||this.$next.fadeIn():n&&this.$next.fadeOut())},getPlayerBox:function(e,t){if(!e)return!1;var i;if(t===u.DISPLAY_LEVEL.MAIN||t!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()){if("undefined"==typeof this.oMainLevelPlayerBoxes[e]){if(!this.isVideoLoaded(e))return!1;i=new c(this,this.getVideoInfo(e)),this.savePlayerBox(i,u.DISPLAY_LEVEL.MAIN),this.triggerEvent(u.EVENT.MANAGER.NEW_PLAYER_BOX,{oPlayerBox:i,sLevel:u.DISPLAY_LEVEL.MAIN})}return this.oMainLevelPlayerBoxes[e]}if("undefined"==typeof this.oProfileLevelPlayerBoxes[e]){if(!this.isVideoLoaded(e))return!1;var n=JSON.parse(JSON.stringify(this.getVideoInfo(e)));n.bIsProfileLevel=!0,i=new c(this,n),this.savePlayerBox(i,u.DISPLAY_LEVEL.PROFILE_VIDEO),this.triggerEvent(u.EVENT.MANAGER.NEW_PLAYER_BOX,{oPlayerBox:i,sLevel:u.DISPLAY_LEVEL.PROFILE_VIDEO})}return this.oProfileLevelPlayerBoxes[e]},savePlayerBox:function(t,i){var n=t&&"function"==typeof t.getId?t.getId():null;if(!n)return void e.error("%c M "+this.iManagerCount+" --- savePlayerBox","color:cornflowerblue","there is an issue with the playerbox being saved :",t);i===u.DISPLAY_LEVEL.MAIN?this.oMainLevelPlayerBoxes[n]=t:i===u.DISPLAY_LEVEL.PROFILE_VIDEO&&(this.oProfileLevelPlayerBoxes[n]=t),"undefined"==typeof this.oAllPlayerBox[n]&&(this.oAllPlayerBox[n]=[]),this.oAllPlayerBox[n].push(t)},updateAllPlayerBoxInfos:function(e){if("undefined"!=typeof this.oAllPlayerBox[e]&&"undefined"!=typeof this.oVideosInfo[e]){var t=this.oVideosInfo[e];for(var i in this.oAllPlayerBox[e]){var n=this.oAllPlayerBox[e][i];n&&n.setInfo(t)}}},getPlayerBoxPrevious:function(e){return e===u.DISPLAY_LEVEL.MAIN||e!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()?this.oMainLevelPlayerBoxPrev&&!this.oMainLevelPlayerBoxPrev.isError()?this.oMainLevelPlayerBoxPrev:null:this.oProfileLevelPlayerBoxPrev&&!this.oProfileLevelPlayerBoxPrev.isError()?this.oProfileLevelPlayerBoxPrev:null},getPlayerBoxCurrent:function(e){return e===u.DISPLAY_LEVEL.MAIN||e!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()?this.oMainLevelPlayerBoxCurr&&!this.oMainLevelPlayerBoxCurr.isError()?this.oMainLevelPlayerBoxCurr:null:this.oProfileLevelPlayerBoxCurr&&!this.oProfileLevelPlayerBoxCurr.isError()?this.oProfileLevelPlayerBoxCurr:null},getPlayerBoxNext:function(e){return e===u.DISPLAY_LEVEL.MAIN||e!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()?this.oMainLevelPlayerBoxNext&&!this.oMainLevelPlayerBoxNext.isError()?this.oMainLevelPlayerBoxNext:null:this.oProfileLevelPlayerBoxNext&&!this.oProfileLevelPlayerBoxNext.isError()?this.oProfileLevelPlayerBoxNext:null},setPlayerBoxPrevious:function(e,t){if(t===u.DISPLAY_LEVEL.MAIN||t!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()){if(this.oMainLevelPlayerBoxPrev&&e&&this.oMainLevelPlayerBoxPrev.getId()===e.getId())return;this.oMainLevelPlayerBoxPrev=e,this.oMainLevelPlayerBoxPrev&&this.oMainLevelPlayerBoxPrev.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_PREV,{sLevel:u.DISPLAY_LEVEL.MAIN})}else{if(this.oProfileLevelPlayerBoxPrev&&e&&this.oProfileLevelPlayerBoxPrev.getId()===e.getId())return;this.oProfileLevelPlayerBoxPrev=e,this.oProfileLevelPlayerBoxPrev&&this.oProfileLevelPlayerBoxPrev.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_PREV,{sLevel:u.DISPLAY_LEVEL.PROFILE_VIDEO})}},setPlayerBoxCurrent:function(e,t){if(t===u.DISPLAY_LEVEL.MAIN||t!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()){if(this.oMainLevelPlayerBoxCurr&&e&&this.oMainLevelPlayerBoxCurr.getId()===e.getId())return;this.oMainLevelPlayerBoxCurr=e,this.oMainLevelPlayerBoxCurr&&this.oMainLevelPlayerBoxCurr.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_CURR,{sLevel:u.DISPLAY_LEVEL.MAIN})}else{if(this.oProfileLevelPlayerBoxCurr&&e&&this.oProfileLevelPlayerBoxCurr.getId()===e.getId())return;this.oProfileLevelPlayerBoxCurr=e,this.oProfileLevelPlayerBoxCurr&&this.oProfileLevelPlayerBoxCurr.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_CURR,{sLevel:u.DISPLAY_LEVEL.PROFILE_VIDEO})}this.updateProfileInfoContainer(e)},setPlayerBoxNext:function(e,t){if(t===u.DISPLAY_LEVEL.MAIN||t!==u.DISPLAY_LEVEL.PROFILE_VIDEO&&!this.isItProfileVideoLevel()){if(this.oMainLevelPlayerBoxNext&&e&&this.oMainLevelPlayerBoxNext.getId()===e.getId())return;this.oMainLevelPlayerBoxNext=e,this.oMainLevelPlayerBoxNext&&this.oMainLevelPlayerBoxNext.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_NEXT,{sLevel:u.DISPLAY_LEVEL.MAIN})}else{if(this.oProfileLevelPlayerBoxNext&&e&&this.oProfileLevelPlayerBoxNext.getId()===e.getId())return;this.oProfileLevelPlayerBoxNext=e,this.oProfileLevelPlayerBoxNext&&this.oProfileLevelPlayerBoxNext.triggerEvent(u.EVENT.PLAYER_BOX.SET_AS_NEXT,{sLevel:u.DISPLAY_LEVEL.PROFILE_VIDEO})}},setPlayerIsViewed:function(e,t){var i=this.aVideoViewedIds.indexOf(e);if(t="boolean"!=typeof t||t){var n=this.getPlayerBox(e);n.getPlayedPerc()>c.I_PERC_UNDER_SKIPED&&d.addId("video",c.GET_ID_BY_ENCODED(e)),-1===i&&this.aVideoViewedIds.push(e),p["delete"](n.getId())}else-1!==i&&this.aVideoViewedIds.splice(i,1);"undefined"!=typeof this.oVideosInfo[e]&&(this.oVideosInfo[e].bIsViewed=t),this.updateAllPlayerBoxInfos(e)},setPlayerIsError:function(t,i){var n=this.aVideoErrorIds.indexOf(t);e.info_("%c M "+this.iManagerCount+" --- setPlayerIsError","color:cornflowerblue",t,i),i="boolean"!=typeof i||i,i?-1===n&&(this.aVideoErrorIds.push(t),this.removeIdsFromIdsToLoad([t]),$(window).trigger(u.EVENT.UPDATE_LIST)):-1!==n&&(this.aVideoErrorIds.splice(n,1),$(window).trigger(u.EVENT.UPDATE_LIST)),"undefined"!=typeof this.oVideosInfo[t]&&(this.oVideosInfo[t].bIsError=!0)},isPlayerError:function(e){return-1!==this.aVideoErrorIds.indexOf(e)},isPlayerUnavailable:function(t,i,n){var s=this.getPlayerBox(t,i);return!s||!(!s.isUnavailable()&&!s.isError())&&(!1!==n&&(e.debug_(" M --- isPlayerUnavailable --- opening unavailable video alert :",[s.getId()]),this.openRequestedVideoUnavailableAlert([s.getId()])),!0)},toggleMobileNavBtn:function(e){if("boolean"!=typeof e)e=!this.bMobileNavBtn;else if(e===this.bMobileNavBtn)return;this.bMobileNavBtn=e,this.$mainContainer&&this.$mainContainer.length&&this.$mainContainer.toggleClass("quickies--mob-nav-btn",this.bMobileNavBtn)},getSavedMobileNavBtn:function(){return!!h.GET_SAVED_SETTING("mobileNavBtn")},updateWithSavedMobileNavBtn:function(){this.toggleMobileNavBtn(this.getSavedMobileNavBtn())},sendMonitoring:function(e,t,i){if(p.verif(),!i){var n=this.getPlayerBoxCurrent();i=!!n&&n.getId()}if(i&&(e!==u.MONITORING.VIEW||!this.isVideoViewed(i))){var s=this.getUrl(u.URL_MODE.MONITORING,{sId:i,sEvent:e});"string"==typeof s&&s.length&&(e===u.MONITORING.VIEW&&(this.setPlayerIsViewed(i,!0),$(window).trigger(u.EVENT.VIEW)),$.get(s))}},setOnLoaded:function(e){"function"==typeof e&&this.aOnLoadedFuncs.push(e),this.bIsHLSLoaded&&this.onFullyLoaded()},onFullyLoaded:function(){if(this.bIsHLSLoaded)for(;this.aOnLoadedFuncs.length;){var e=this.aOnLoadedFuncs.splice(0,1);e[0]()}},onEvent:function(e,t,i,n){if(!this.isValidEvent(e))throw new Error('onEvent "'+e+'" not a valide Event.');"undefined"==typeof this.oEventListeners[e]&&(this.oEventListeners[e]={}),this.iEventListenerCount++,"string"==typeof i&&i.length||(i="callback_"+this.iEventListenerCount),this.oEventListeners[e][i]={fnCallback:t,bClearWhenCalled:!!n}},isValidEvent:function(e){return u.isValidObjectOption(u.EVENT.MANAGER,e)},removeEvent:function(e,t){"undefined"!=typeof this.oEventListeners[e]&&"undefined"!=typeof this.oEventListeners[e][t]&&delete this.oEventListeners[e][t]},triggerEvent:function(e,t){if("undefined"!=typeof this.oEventListeners[e])for(var i in this.oEventListeners[e])void 0!==t?this.oEventListeners[e][i].fnCallback(this,t):this.oEventListeners[e][i].fnCallback(this),this.oEventListeners[e][i].bClearWhenCalled&&this.removeEvent(e,i)},onClickClose:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.pause(),t.sendMonitoring(u.MONITORING.VIEW,'close - on "click" event on "x"'),t.closeCurrentLevel()},onClickMainContainer:function(e){var t=e.data;if($(e.target).hasClass("quickies__main-container")&&!t.isSwiping()){var i=t.getPlayerBoxCurrent();i&&"clickDragStartTimer"===i.getPauseMethod()||(t.sendMonitoring(u.MONITORING.VIEW,'close - on "click" event on the main container'),t.closeCurrentLevel())}},onClickPlayersContainer:function(e){var t=e.data;$(e.target).hasClass("quickies__players")&&(t.sendMonitoring(u.MONITORING.VIEW,'close - on "click" event on the quickies container'),t.closeCurrentLevel())},onKeyUp:function(e){var t=e.data,i=t.getPlayerBoxCurrent();if(i&&i.canBeSwiped())switch(e.which){case 37:e.preventDefault(),t.getPrevVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "keyup" event "left"'),t.playPrev());break;case 38:e.preventDefault(),t.getPrevVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "keyup" event "up"'),t.playPrev());break;case 39:e.preventDefault(),t.getNextVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'next - on "keyup" event "right"'),t.playNext());break;case 40:e.preventDefault(),t.getNextVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'next - on "keyup" event "down"'),t.playNext());break;case 27:e.preventDefault(),t.sendMonitoring(u.MONITORING.VIEW,'close - on "keyup" event "escape"'),t.closeCurrentLevel();break;case 32:e.preventDefault(),t.togglePlayPause("spaceKey")}},onResizeScreen:function(e){var t=e.data,i=t.isProfileInfoContainerVisible();t.$mainContainer&&t.$mainContainer.length&&t.$mainContainer.toggleClass("quickies--profile-info-cont-visible",i),i&&(t.oCloseDesktopProfileOverlayTimer&&clearTimeout(t.oCloseDesktopProfileOverlayTimer),t.oCloseDesktopProfileOverlayTimer=setTimeout(function(){t.isProfileInfoContainerVisible()&&t.getCurrentLevel()===u.DISPLAY_LEVEL.PROFILE&&t.toggleProfileOverlay(!1)},500)),t.updateNextPrev(),t.reinitForcedFullscreenDisplayIfNeeded(),t.updateHTMLClass()},onTouchStart:function(e){var t=e.data;if(!t.isSliding()){var i=t.getPlayerBoxCurrent();i&&i.canBeSwiped()&&(t.bTouchStarted=!0,t.bTouchMoveOK=!1,t.iTouchStartX=t.iTouchCurrX=e.originalEvent.touches[0].pageX,t.iTouchStartY=t.iTouchCurrY=e.originalEvent.touches[0].pageY,t.iTouchStartTime=(new Date).getTime(),t.canIUseTouchSwipe()&&(t.clearTouchTimer(),t.oTouchTimer=setTimeout(function(){t.pause("touchStartTimer")},D.I_TOUCH_PAUSE_TIME)))}},onMouseDown:function(e){var t=e.data;if(!t.isSliding()){var i=t.getPlayerBoxCurrent();if(i&&i.canBeSwiped()){t.$mainContainer.on("mousemove",t,t.onMouseMove),t.bTouchStarted=!0,t.bTouchMoveOK=!1;var n=t.canIUseTouch();t.iTouchStartX=t.iTouchCurrX=n?e.originalEvent.touches[0].pageX:e.pageX,t.iTouchStartY=t.iTouchCurrY=n?e.originalEvent.touches[0].pageY:e.pageY,t.iTouchStartTime=(new Date).getTime(),t.clearTouchTimer(),t.oTouchTimer=setTimeout(function(){t.pause("clickDragStartTimer")},D.I_TOUCH_PAUSE_TIME)}}},onTouchMove:function(e){var t=e.data;if(t.isSliding())return void e.preventDefault();if(!t.bTouchStarted)return!0;if("string"!=typeof t.sTouchOrientation){var i=Math.abs(t.iTouchStartX-e.originalEvent.touches[0].pageX),n=Math.abs(t.iTouchStartY-e.originalEvent.touches[0].pageY);t.sTouchOrientation=i>n?D.S_ORIENTATION_HORIZONTAL:D.S_ORIENTATION_VERTICAL}if(!t.bTouchMoveOK){if(t.sTouchOrientation===D.S_ORIENTATION_VERTICAL&&t.getCurrentLevel()===u.DISPLAY_LEVEL.PROFILE)return t.bTouchStarted=!1,!0;t.bTouchMoveOK=!0}if(t.sTouchOrientation===D.S_ORIENTATION_HORIZONTAL)return t.iTouchCurrX=e.originalEvent.touches[0].pageX,!0;if(t.iTouchCurrY=e.originalEvent.touches[0].pageY,t.canIUseTouchSwipe()){e.preventDefault();var s=t.iTouchCurrY-t.iTouchStartY,o=t.getPlayerBoxPrevious(),a=t.getPlayerBoxCurrent(),r=t.getPlayerBoxNext(),l=o?o.getContainer(!0):null,d=a.getContainer(!0),c=r?r.getContainer(!0):null,f=$(window).outerHeight(),h=Math.round(s/f*100*100)/100;if(null===l&&h>D.I_TOUCH_SWIPE_EDGE_LIMIT?(h=D.I_TOUCH_SWIPE_EDGE_LIMIT,t.startMoveEdgeReachedCloseTimer("touchTop")):t.stopMoveEdgeReachedCloseTimer("touchTop"),null===c&&h<-D.I_TOUCH_SWIPE_EDGE_LIMIT?(h=-D.I_TOUCH_SWIPE_EDGE_LIMIT,t.startMoveEdgeReachedCloseTimer("touchBottom")):t.stopMoveEdgeReachedCloseTimer("touchBottom"),l)l.css({top:h-100+"%",bottom:""}),t.$closeSwipePrevIcf.css({background:"none"}),t.$closeSwipePrev.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible");else if(h>=0||!t.bPrevDeltaPercNull){var p=h>=0?h:0,_=Math.floor(Math.abs(p*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100;t.$closeSwipePrevIcf.css({background:1===_?"":"none"}),t.$closeSwipePrev.css({opacity:_,transform:"scale("+(Math.floor(p*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT))/100*2+1)+")"}).addClass("is-visible"),t.bPrevDeltaPercNull=0===p}if(d.css({top:h+"%",bottom:""}),c)c.css({top:h+100+"%",bottom:""}),t.$closeSwipeNextIcf.css({background:"none"}),t.$closeSwipeNext.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible");else if(h<=0||!this.bNextDeltaPercNull){var g=h<=0?h:0,m=Math.floor(Math.abs(g*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100;t.$closeSwipeNextIcf.css({background:1===m?"":"none"}),t.$closeSwipeNext.css({opacity:m,transform:"scale("+(Math.floor(Math.abs(g*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100*2+1)+")"}).addClass("is-visible"),this.bNextDeltaPercNull=0===g}t.iDeltaYPerc=h,t.isPlaying()||t.isSwiping()||t.setIsSwiping()}},onMouseMove:function(e){var t=e.data;if(t.isSliding())return void e.preventDefault();if(!t.bTouchStarted)return!0;e.preventDefault();var i=t.canIUseTouch();if("string"!=typeof t.sTouchOrientation){var n=Math.abs(t.iTouchStartX-(i?e.originalEvent.touches[0].pageX:e.pageX)),s=Math.abs(t.iTouchStartY-(i?e.originalEvent.touches[0].pageY:e.pageY));t.sTouchOrientation=n>s?D.S_ORIENTATION_HORIZONTAL:D.S_ORIENTATION_VERTICAL}if(!t.bTouchMoveOK){if(t.sTouchOrientation===D.S_ORIENTATION_VERTICAL&&t.getCurrentLevel()===u.DISPLAY_LEVEL.PROFILE)return void(t.bTouchStarted=!1);t.bTouchMoveOK=!0}if(t.sTouchOrientation===D.S_ORIENTATION_HORIZONTAL)return void(t.iTouchCurrX=i?e.originalEvent.touches[0].pageX:e.pageX);t.iTouchCurrY=i?e.originalEvent.touches[0].pageY:e.pageY;var o=t.iTouchCurrY-t.iTouchStartY,a=t.getPlayerBoxPrevious(),r=t.getPlayerBoxCurrent(),l=t.getPlayerBoxNext(),d=a?a.getContainer(!0):null,c=r.getContainer(!0),f=l?l.getContainer(!0):null,h=$(window).outerHeight(),p=Math.round(o/h*100*100)/100;if(null===d&&p>D.I_TOUCH_SWIPE_EDGE_LIMIT?(p=D.I_TOUCH_SWIPE_EDGE_LIMIT,t.startMoveEdgeReachedCloseTimer("mouseTop")):t.stopMoveEdgeReachedCloseTimer("mouseTop"),null===f&&p<-D.I_TOUCH_SWIPE_EDGE_LIMIT?(p=-D.I_TOUCH_SWIPE_EDGE_LIMIT,t.startMoveEdgeReachedCloseTimer("mouseBottom")):t.stopMoveEdgeReachedCloseTimer("mouseBottom"),d)d.css({top:p-100+"%",bottom:""}),t.$closeSwipePrevIcf.css({background:"none"}),t.$closeSwipePrev.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible");else if(p>=0||!t.bPrevDeltaPercNull){var _=p>=0?p:0,g=Math.floor(Math.abs(_*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100;t.$closeSwipePrevIcf.css({background:1===g?"":"none"}),t.$closeSwipePrev.css({opacity:g,transform:"scale("+(Math.floor(_*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT))/100*2+1)+")"}).addClass("is-visible"),t.bPrevDeltaPercNull=0===_}if(c.css({top:p+"%",bottom:""}),f)f.css({top:p+100+"%",bottom:""}),t.$closeSwipeNextIcf.css({background:"none"}),t.$closeSwipeNext.css({opacity:"",transform:"scale(1)"}).removeClass("is-visible");else if(p<=0||!this.bNextDeltaPercNull){var m=p<=0?p:0,b=Math.floor(Math.abs(m*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100;t.$closeSwipeNextIcf.css({background:1===b?"":"none"}),t.$closeSwipeNext.css({opacity:b,transform:"scale("+(Math.floor(Math.abs(m*(100/D.I_TOUCH_SWIPE_EDGE_LIMIT)))/100*2+1)+")"}).addClass("is-visible"),this.bNextDeltaPercNull=0===m}t.iDeltaYPerc=p,t.isPlaying()||t.isSwiping()||t.setIsSwiping()},onTouchEnd:function(e){var t=e.data;if(t.clearTouchTimer(),!t.isSliding()&&t.bTouchStarted){t.bTouchStarted=!1,t.bTouchMoveOK=!1,t.sTouchOrientation=null;var i=(new Date).getTime();if(Math.abs(t.iTouchStartX-t.iTouchCurrX)<D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)<D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_CLICK_ALLOWED_TIME){if(!t.canIUseTouchSwipe())return;return t.setIsSwiping(!1),void t.playReplace("clickPrevent")}if(Math.abs(t.iTouchStartX-t.iTouchCurrX)<D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)>D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_TOUCH_SWIPE_ALLOWED_TIME){e.preventDefault(),e.stopPropagation();var n=t.iTouchStartY-t.iTouchCurrY<0?"down":"up";return t.canIUseTouchSwipe()?(t.setIsSwiping(!1),void("up"===n?(t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, swipe bottom to top'),t.playNext()):(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, swipe top to bottom'),t.playPrev()))):void require(["skins/common/help_wizard/help_wizard","skins/common/help_wizard/wizard_info"],function(e,t){new e(t,"up"===n?"quickies_next_btn":"quickies_prev_btn",!0)})}if(Math.abs(t.iTouchStartX-t.iTouchCurrX)>D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)<D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_TOUCH_SWIPE_ALLOWED_TIME){e.preventDefault(),e.stopPropagation(),t.setIsSwiping(!1);var s=t.iTouchStartX-t.iTouchCurrX<0?"toRight":"toLeft";return t.playReplace("sideSwipe"),void("toLeft"===s?t.openProfileOverlay():t.getCurrentLevel()!==u.DISPLAY_LEVEL.MAIN&&t.closeCurrentLevel())}if(t.canIUseTouchSwipe())if(t.isSwiping()){e.preventDefault(),e.stopPropagation(),t.setIsSwiping(!1);var o=t.getPlayerBoxPrevious(),a=t.getPlayerBoxNext();if(t.iDeltaYPerc>D.I_TOUCH_END_SWIPED_TO_NEXT||!o&&t.iDeltaYPerc>=D.I_TOUCH_SWIPE_EDGE_LIMIT){if(t.iDeltaYPerc<-D.I_TOUCH_END_SWIPED_TO_NEXT)t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, over '+D.I_TOUCH_END_SWIPED_TO_NEXT+"% was swiped");else if(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, edge limit reached'),t.bMoveEdgeCloseWaitEnd)return void t.closeCurrentLevel();t.playPrev()}else if(t.iDeltaYPerc<-D.I_TOUCH_END_SWIPED_TO_NEXT||!a&&t.iDeltaYPerc<=-D.I_TOUCH_SWIPE_EDGE_LIMIT){if(t.iDeltaYPerc>D.I_TOUCH_END_SWIPED_TO_NEXT)t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, over '+D.I_TOUCH_END_SWIPED_TO_NEXT+"% was swiped");else if(t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, edge limit reached'),t.bMoveEdgeCloseWaitEnd)return void t.closeCurrentLevel();t.playNext()}else t.playReplace("backAfterSwiping")}else t.playReplace("default")}},onMouseUp:function(e){var t=e.data;if(t.clearTouchTimer(),!t.isSliding()&&t.bTouchStarted){"mouseup"===e.type&&e.preventDefault(),t.$mainContainer.off("mousemove",t.onMouseMove),t.bTouchStarted=!1,t.bTouchMoveOK=!1,t.sTouchOrientation=null;var i=(new Date).getTime();if(Math.abs(t.iTouchStartX-t.iTouchCurrX)<D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)<D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_CLICK_ALLOWED_TIME)return t.setIsSwiping(!1),void t.playReplace("clickPrevent");if(Math.abs(t.iTouchStartX-t.iTouchCurrX)<D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)>D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_TOUCH_SWIPE_ALLOWED_TIME){e.preventDefault(),e.stopPropagation();var n=t.iTouchStartY-t.iTouchCurrY<0?"down":"up";return t.setIsSwiping(!1),void("up"===n?(t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, swipe bottom to top'),t.playNext()):(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, swipe top to bottom'),t.playPrev()))}if(Math.abs(t.iTouchStartX-t.iTouchCurrX)>D.I_TOUCH_SWIPE_THRESHOLD_X&&Math.abs(t.iTouchStartY-t.iTouchCurrY)<D.I_TOUCH_SWIPE_THRESHOLD_Y&&Math.abs(t.iTouchStartTime-i)<D.I_TOUCH_SWIPE_ALLOWED_TIME){e.preventDefault(),e.stopPropagation(),t.setIsSwiping(!1);var s=t.iTouchStartX-t.iTouchCurrX<0?"toRight":"toLeft";return t.playReplace("sideSwipe"),void("toLeft"===s?t.openProfileOverlay():t.getCurrentLevel()!==u.DISPLAY_LEVEL.MAIN&&t.closeCurrentLevel())}if(t.isSwiping()){e.preventDefault(),e.stopPropagation(),t.setIsSwiping(!1);var o=t.getPlayerBoxPrevious(),a=t.getPlayerBoxNext();if(t.iDeltaYPerc>D.I_TOUCH_END_SWIPED_TO_NEXT||!o&&t.iDeltaYPerc>=D.I_TOUCH_SWIPE_EDGE_LIMIT){if(t.iDeltaYPerc>D.I_TOUCH_END_SWIPED_TO_NEXT)t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, over '+D.I_TOUCH_END_SWIPED_TO_NEXT+"% was swiped");else if(t.sendMonitoring(u.MONITORING.VIEW,'previous - on "touchend" event, edge limit reached'),t.bMoveEdgeCloseWaitEnd)return void t.closeCurrentLevel();t.playPrev()}else if(t.iDeltaYPerc<-D.I_TOUCH_END_SWIPED_TO_NEXT||!a&&t.iDeltaYPerc<=-D.I_TOUCH_SWIPE_EDGE_LIMIT){if(t.iDeltaYPerc>D.I_TOUCH_END_SWIPED_TO_NEXT)t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, over '+D.I_TOUCH_END_SWIPED_TO_NEXT+"% was swiped");else if(t.sendMonitoring(u.MONITORING.VIEW,'next - on "touchend" event, edge limit reached'),t.bMoveEdgeCloseWaitEnd)return void t.closeCurrentLevel();t.playNext()}else t.playReplace("backAfterSwiping")}else t.playReplace("default")}},onUpdateSetting:function(e,t){if(t&&"object"==typeof t&&"mobileNavBtn"===t.setting){e.data.updateWithSavedMobileNavBtn()}},onWheelMainContainer:function(e){var t=e.data;if(!t.isSliding()){var i=t.getPlayerBoxCurrent();if(i&&i.canBeSwiped()){var n=(new Date).getTime();if(!(Math.abs(t.iLastScrollTime-n)<D.I_SCROLL_ALLOWED_TIME)){t.iLastScrollTime=n;var s=t.getCurrentLevel();if(s===u.DISPLAY_LEVEL.MAIN){if(e.originalEvent.deltaX>0)return void t.openProfileOverlay()}else{if(e.originalEvent.deltaX<0)return void t.closeCurrentLevel();if(s===u.DISPLAY_LEVEL.PROFILE)return}e.preventDefault(),e.originalEvent.deltaY>0?t.getNextVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'next - on "wheel" event "down"'),t.playNext()):e.originalEvent.deltaY<0&&t.getPrevVideoId()&&(t.sendMonitoring(u.MONITORING.VIEW,'prev - on "wheel" event "up"'),t.playPrev())}}}},onUnload:function(e){var t=e.data,i=t.getPlayerBoxCurrent();i&&!t.isVideoViewed(i.getId())&&p.save(i.getId(),i.getViewDurationForMonitoring(),!0,i.getCDN())}},D}),define("skins/common/global_feed/post/post_generator",["static/log","config/main","mustache","static/thumbs","static/utils","static/dom","lib/i18n!front","lib/tools","lib/helpers/popup","lib/helpers/viewer/lightgallery-generic-manager","lib/helpers/scrollbar","lib/helpers/popup/tooltip","skins/common/design/text","skins/common/global_feed/user","text!./tpls/post_base.mustache","text!./tpls/post_head.mustache","text!./tpls/post_metadata.mustache","text!./tpls/post_gallery.mustache","text!./tpls/post_gallery_frame.mustache","text!./tpls/post_thumb.mustache","text!./tpls/post_pic.mustache","text!./tpls/post_pic_gallery.mustache","text!./tpls/post_allgallery.mustache","text!./tpls/post_comment.mustache","text!./tpls/post_mobile_comment.mustache","text!./tpls/post_frame_head.mustache","text!./tpls/post_frame_foot.mustache","text!./tpls/post_user_link.mustache","text!./tpls/post_user_info.mustache","text!./tpls/post_update.mustache","text!./tpls/post_content_locked.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D,C,w,S,k,T,E,P,I,F){var x=function(e){r.initParams(this,e,x.GET_DEFAULT_OPTIONS());var t=this;Object.entries(this.oOptions).forEach(function(e){t[e[0]]=e[1]}),this.sTitle=this.oPost.sTitle,this.sComment=this.oPost.sComment,this.sShowMoreLabel=a.__(this.oTranslations.show_more),this.sShowLessLabel=a.__(this.oTranslations.show_less),this.sShowMoreLabel=a.__(this.oTranslations.show_more),this.sShowLessLabel=a.__(this.oTranslations.show_less),this.sPreviewLabel=a.__(this.oTranslations.preview_click),this.bFakeText=!1,this.sComment||this.oPost.sTitle||!this.bAlwaysDisplayText||(this.bFakeText=!0,this.oPost.setComment(" ")),this.sPostId=this.oPost.sId,this.sDate=this.getDateDisplay(),this.bRed=this.isRedPost(),this.bSmallText=this.sComment&&this.sComment.length<60,this.sHtmlGallery="",this.bShortComment=this.sComment&&this.sComment.length<90,this.bLongComment=this.sComment&&this.sComment.length>100,this.sCommentShort=!1===this.bLongComment?this.sComment:s.escape(s.unescape(this.sComment).substring(0,100)),this.sCommentRest=!1===this.bLongComment?null:s.escape(s.unescape(this.sComment).substring(150)),this.bHasTitle=!!this.sTitle,this.bTitleOnly=!1,this.sSmallTextCenter=this.bShortComment?"small-text-center":"",this.sBigTextLeft=this.bShortComment?"":"big-text-left"};return x.DEFAULT_OPTIONS={oOptions:{oPost:undefined,oUploader:undefined,iTopPosition:undefined,iLeftPosition:undefined,oModel:undefined,bEnableUsernamePopup:!0,iMaxPostAgeMonthsDateDisplay:3,bEnableUserThumbPopup:!1,bAlwaysDisplayText:!0,bExtendVideoFrames:!1,bDisableTextLink:!1,aClasses:[],iNbMaxContent:12,iNbPicturesGallery2colsDesktop:12,iNbPicturesGalleryDesktop:5,iNbPicturesGalleryTablet:2,iNbVideoMobilePreviews:4,iNbPicturesVideoDesktop:6,iNbPicturesVideoTablet:6,iNbPicturesVideo2colsDesktop:3,iNbVideosPlaylist2colsDesktop:4,iNbVideosPlaylistDesktop:7,iNbVideosPlaylistTablet:7,iFontSizeMaxDesktop:18,iFontSizeMaxMobile:15,iTitleFontSizeMaxDesktop:23,iFontSizeMaxTitleDesktop:25,iFontSizeMaxTitleMobile:18,iDelayTextClickRedirect:400,iViewPostDuration:3e3,iMainViewCheckInterval:1e3,iViewingCheckInterval:100,mobile_max_width:599},oTranslations:{published_video:"global_feed.published_video",published_videos:"global_feed.published_videos",published_picture:"global_feed.published_picture",published_pictures:"global_feed.published_pictures",published_post:"global_feed.published_post",
user_uploaded_ago:"global_feed.user_uploaded_ago",nb_elements_picto:"global_feed.nb_elements_picto",preview_click:"global_feed.video_preview_click",show_more:"misc.show_more",show_less:"misc.show_less",featuring:"global_feed.featuring",featuring_model:"global_feed.featuring_model",direct_purchase:"premium.direct_purchase",added_video_to_playlist:"global_feed.added_video_to_playlist",added_videos_to_playlist:"global_feed.added_videos_to_playlist",filter_this_channel:"global_feed.filter_this_channel",filter_this_model:"global_feed.filter_this_model",filter_this_profile:"global_feed.filter_this_profile",content_locked_ppv:"global_feed.content_locked_ppv",content_locked_membership:"global_feed.content_locked_membership",content_locked_ppv_membership:"global_feed.content_locked_ppv_membership",membership_only:"global_feed.membership_only"},oListeners:{onSub:undefined,onUnsub:undefined,onReady:undefined,onUserFilter:undefined,onLightGalleryOpen:undefined,onLightGalleryClose:undefined,onQuickiesOpen:undefined,onQuickiesClose:undefined,onResize:undefined},oTrackers:{tracker_ppv:undefined,tracker_membership:undefined},oFunctions:{init_desktop_channel_videos:undefined},oState:{oPopups:{},oPopupsAdded:{},iViewingPostStartTime:undefined,bViewDataRegistered:!1,aOnResize:[],bViewingText:!1},oTemplates:{sTplPost:p,sTplHead:_,sTplMetadata:g,sTplGallery:m,sTplFrame:b,sTplThumb:v,sTplPic:y,sTplHiddenPic:D,sTplAllGallery:C,sTplComment:w,sTplMobileComment:S,sTplFrameHead:k,sTplFrameFoot:T,sTplUser:E,sTplUserInfo:P,sTplUpdate:I,sTplContentLocked:F}},x.GET_DEFAULT_OPTIONS=function(){return x.DEFAULT_OPTIONS},x.prototype={init:function(){var e=this;this.getPostHtml();for(var t=0;t<this.oOptions.aClasses.length;t++)this.$post[0].classList.add(this.oOptions.aClasses[t]);this.$head=this.$post[0].querySelector(".p-head"),this.$metadata=this.$head.querySelector(".p-metadata"),this.$gallery=this.$post[0].querySelector(".p-gallery"),this.$pics=this.$post[0].querySelector(".p-pics"),this.$mobileComment=this.$post[0].querySelector(".p-mobile-comment"),this.$mobileCommentExtend=this.$post[0].querySelector(".p-mobile-extend-container"),this.$moreButton=this.$post[0].querySelector(".p-show-more-button"),this.addVideoContentIndicators(),this.initContentLockedTooltip(),this.initContentLockedTooltipMobile(),this.initPicturesContentLockedFormLink(),this.initVideosContentLockedFormLink(),this.initRedTicketsFormLink();var i=this.oPost.hasVideo()?this.oPost.aVideos[0].u:undefined;this.fnLinkDown=function(){e.iLinkTime=Date.now()},this.fnLinkUp=function(){i&&(Date.now()-e.iLinkTime>e.oOptions.iDelayTextClickRedirect||(window.location.href=i))},this.onReady()},onReady:function(){var e=this;"function"==typeof this.oFunctions.init_desktop_channel_videos&&this.oFunctions.init_desktop_channel_videos(this.$post[0]),this.addLightGallery(),this.addUserPopup(e.oUploader),e.oModel&&this.addUserPopup(e.oModel),this.$gallery.querySelectorAll(".p-postcomment .p-formatted-text").forEach(function(t){e.handleCommentResizeListener(t)}),this.$gallery.querySelectorAll(".p-postcomment .p-posttitle").forEach(function(t){e.handleTitleResizeListener(t)}),this.handleCommentHeadResizeListener(),this.handleMoreButtonClickListener(),this.handleProfilePictureClickListener(),this.handleFullGalleryClickListener(),this.handleQuickiesClickListener(),this.handleViewListener(),this.handleMobileCommentExtendListener(),"function"==typeof this.oListeners.onReady&&this.oListeners.onReady(this)},getTextContent:function(){return this.sComment},getTitleContent:function(){if(this.sTitle){return this.sTitle}},getDateDisplay:function(){if(this.oOptions.iMaxPostAgeMonthsDateDisplay){var e=Math.floor(Date.now()/1e3)-this.oPost.iTimestamp;if(r.getNbTimesInDuration(e,r.DURATION_TIMES.MONTHS)>this.oOptions.iMaxPostAgeMonthsDateDisplay)return""}return r.formatDuration(Date.now()/1e3-this.oPost.iTimestamp,r.formatDurationMethods.diff)},getPostHtml:function(){if("undefined"==typeof this.$post){this.sUpdateText=this.getUpdateText(),this.sHtmlUploaderNoContent=this.getUpdateHtml(),this.sHtmlUploader=this.getUpdateHtml(),this.sHtmlMetadata=this.getMetadataHtml(),this.sHtmlMobileComment=this.getMobileCommentHtml(),this.sFrameHead=this.getFrameHeadHtml(),this.sFrameFoot=this.getFrameFootHtml();var e=this.getListGalleryContent();this.iUploaderId=this.oUploader.sId,this.sPremium=this.bRed?"p-red":"",this.sFakeText=this.bFakeText?"p-faketext":"",this.sVideos=this.oPost.hasVideo()?"p-videos":"",this.sPictures=this.oPost.hasPicture()?"p-pictures":"",this.sNoExtend=this.isNoExtend()?"p-noextend":"",this.sReducedMobile=this.isReducedMobile()?"p-reduced-mobile":"",this.sSmallText=!this.bTextOnly&&this.bSmallText?"p-small-text":"",this.sHtmlGallery=this.getGalleryHtml(e),this.sHtmlAllGallery=this.getAllGalleryHtml(),this.sHead=this.getHeadHtml(this.hasText()),this.$post=$(i.render(p,this))}},getVideoThumbBlock:function(e,t,i,s,o,a){var r="",l={};l.post_date_diff=this.sDate,l.show_uploader=e.pn,e.i=e.ip,e.is_quickies_unlocked=this.isQuickies(e,!0),r+=n.get_thumb_block_html(e,"post-video",l).html,r=r.replace("thumb-block post-elem","thumb-block post-elem"+(s||this.isVideoHidden(this.oPost.aVideos[0])?" red-cache":"")+" p-frame p-frame-"+t+(i?" p-frame-gallery":"")+(o?" p-frame-preview":"")+(a?" p-main-frame":"")+(!0===e.pm&&this.oPost.isContentLocked()?" p-content-locked":""));var d=this.oPost.aVideos.length,u=[["p-playlist-more-tablet",this.getVideoNbMore(d,this.oOptions.iNbVideosPlaylistTablet+1)],["p-playlist-more-desktop",this.getVideoNbMore(d,this.oOptions.iNbVideosPlaylistDesktop+1)],["p-playlist-more-desktop-col-2",this.getVideoNbMore(d,this.oOptions.iNbVideosPlaylist2colsDesktop+1)]],c=u.reduce(function(e,t){return e+=t[1]>0?'<div class="p-playlist-seemore '+t[0]+'">+'+t[1]+"</div>":""},"");return r=r.replace('<div class="thumb-inside">','<div class="thumb-inside">'+c)},setTopPosition:function(e){this.$post[0].style.position="absolute",this.$post[0].style.top=e+"px"},setLeftPosition:function(e){this.$post[0].style.position="absolute",this.$post[0].style.left=e+"px"},addVideoContentIndicators:function(){var e=this;$(this.$pics).find(".thumb-block.post-elem.p-frame").each(function(t){var i=e.oOptions.oPost.aVideos[t],n=e.getVideoDurationIcon(i),s=$('<div class="thumb-top-right"></div>'),o=$('<div class="contents-indicator with-bg">'+n+"</div>");s.append(o),$(this).find(".thumb-inside").append(s)})},addPictureContentIndicators:function(){var e=this;$(this.$pics).find(".pic.p-frame.p-frame-gallery").each(function(t){var i=e.getPictureIcon();$(this).find(".fit-image").append($('<div class="contents-indicator">'+i+"</div>"))})},getPictureThumbBlock:function(e,t){var n=this.getPictureNbMore(this.oOptions.iNbPicturesGalleryTablet),s=this.getPictureNbMore(this.oOptions.iNbPicturesGalleryDesktop),o=this.getPictureNbMore(this.oOptions.iNbPicturesGallery2colsDesktop),a=this.getPictureNbMore(this.oOptions.iNbPicturesVideoTablet),r=this.getPictureNbMore(this.oOptions.iNbPicturesVideoDesktop),l=this.getPictureNbMore(this.oOptions.iNbPicturesVideo2colsDesktop),d={sSrc:e.small,sFull:e.full,iNb:t,sNbGalleryMoreTablet:n,sNbGalleryMoreDesktop:s,sNbGalleryMoreDesktop2cols:o,sNbVideoMoreTablet:a,sNbVideoMoreDesktop:r,sNbVideoMoreDesktop2cols:l,sRedCache:e.bRedCache!==undefined&&e.bRedCache?"red-cache":"",sLocked:e.bLocked!==undefined&&e.bLocked?"p-locked":"",sGallery:e.bGallery!==undefined&&e.bGallery?"pic-gallery":"",sPreview:e.bPreview!==undefined&&e.bPreview?"p-frame-preview":"",sHiddenGallery:e.bHiddenGallery!==undefined&&e.bHiddenGallery?"p-frame-gallery":"",sExtendView:e.bExtendView!==undefined&&e.bExtendView?"p-extend-view":"",sImgLink:e.sLink!==undefined&&e.sLink?e.sLink:"#",bFilling:!!e.bFilling,sPreviewTooltip:this.sPreviewLabel,sTopRightTag:e.sTopRightTag};return o>0&&(d.sWithDesktop2cols="with-desktop-2cols"),i.render(e.tpl,d)},getPictureNbMore:function(e){return this.getNbAvailablePictures()-(!this.getTextContent()||this.bFakeText?e-1:e)+this.getNbRedPicturesShown(e)},getVideoNbMore:function(e,t){return e-(!this.getTextContent()||this.bFakeText?t-1:t)},getHidenGalleryPicture:function(e){return i.render(D,{sFull:e.full})},getEmptyThumbBlock:function(e){return i.render(b,{iNb:e})},getUpdateHtml:function(){var e=this.oUploader.sDisplayName?i.render(this.oTemplates.sTplUser,this.oUploader):undefined,t=this.oOptions.oModel?i.render(this.oTemplates.sTplUser,this.oOptions.oModel):undefined,n="";return e?n=t?a.__(this.oTranslations.featuring,{"%uploader%":e,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>","%model%":t}):e:t&&(n=a.__(this.oTranslations.featuring_model,{"%model%":t,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>"})),i.render(this.oTemplates.sTplUpdate,{sTicket:this.bRed?"<span class='icon-f icf-white-fill icf-ticket-red'></span>":"",sUploader:n,sInfo:this.getUpdateInfo()})},getUpdateInfo:function(){return this.getUpdateText()+(this.getUpdateText()?" | ":"")+this.sDate},getVideoDurationIcon:function(e,t){return t=t===undefined?"":t,a.__(this.oTranslations.nb_elements_picto,{"%nb%":t,"%element_picto%":"","%duration%":e.d})},getUpdateVideoText:function(){return this.oPost.aVideos.length>1?sNb=this.oPost.aVideos.length:sDuration=this.oPost.aVideos[0].d,sDuration=this.oPost.aVideos[0].d,getVideoDurationIcon(sDuration,sNb)},getPictureIcon:function(e){e=e===undefined?"":e;return a.__(this.oTranslations.nb_elements_picto,{"%nb%":e,"%element_picto%":'<span class="icon-f icf-image"></span>',"%duration%":""})},getUpdatePictureText:function(){var e=this.oPost.aPictures.length.toString();return 0!==this.oPost.aVideos.length||this.getTextContent()&&!this.bFakeText||(e=this.oPost.aPictures.length>1?a.__(this.oTranslations.published_pictures,{"%nb%":e}):a.__(this.oTranslations.published_picture)),this.getPictureIcon(e)},getUpdateText:function(){var e=new r.bitwise_enum(["video","picture"]);e.toggleElement(1,this.oPost.hasVideo()),e.toggleElement(2,this.oPost.hasPicture());var t=[];return 0===e.getValue()&&t.push(a.__(this.oTranslations.published_post)),t.join(" + ")},getUserInfoHtml:function(e){return i.render(this.oTemplates.sTplUserInfo,{user:e,view_posts_user:a.__(this.getUserTypeTranslationFilter(e))})},getUserTypeTranslationFilter:function(e){switch(e.getType()){case h.TYPE.CHANNEL:return this.oTranslations.filter_this_channel;case h.TYPE.MODEL:return this.oTranslations.filter_this_model;default:return this.oTranslations.filter_this_profile}},getCommentThumbBlock:function(e){return i.render(this.oTemplates.sTplComment,{sHtmlUploaderNoContent:this.sHtmlUploaderNoContent,sComment:this.getTextContent(),sTitle:this.getTitleContent(),sShowMoreLabel:this.sShowMoreLabel,bSmallText:this.bSmallText,sBigTextLeft:this.sBigTextLeft,bTitleOnly:this.bTitleOnly,bHasTitle:this.bHasTitle,sFrameHead:this.sFrameHead,sFrameFoot:this.sFrameFoot,iNb:e,oUser:this.oUploader,bIsQuickies:this.oPost.isQuickies()})},getListGalleryContent:function(){var e=[],t=0,i=0,n=this.oPost.aVideos[0]&&this.isVideoHidden(this.oPost.aVideos[0]);(this.bAlwaysDisplayText||this.getTextContent())&&e.push(this.getCommentThumbBlock(++t));for(var s=0,o=0;o<this.oPost.aVideos.length&&t<this.iNbMaxContent;o++)if(this.oPost.aVideos[o].ip){++t;var a=this.hasText()?2:1,r=this.oPost.hasVideoThumbMobilePreview()&&s<this.iNbVideoMobilePreviews&&t<=(this.hasText()?6:5),l=!r&&t!=a;r&&t!=a&&s++,e.push(this.getVideoThumbBlock(this.oPost.aVideos[o],t,l,undefined,r,t===(this.bAlwaysDisplayText||this.getTextContent()?2:1)))}for(var d=0;d<this.oPost.aPictures.length&&t<this.iNbMaxContent;d++){var u=this.oPost.aPictures[d],c=this.getImageBestResolution(u,"picture"),f=this.getImageWorstResolution(u,"picture"),h=!1;++t;var p={tpl:this.oTemplates.sTplPic,small:this.isImageFull(t)&&!u.ig?c:f,full:c,bHiddenGallery:this.getTextContent()||this.bAlwaysDisplayText?2!=t:1!=t,bGallery:!0,bExtendView:this.isExtendView(t),bLocked:h,bRedCache:n||!this.isPictureAvailable(u),iNbPicture:d+1,bFilling:!1};e.push(this.getPictureThumbBlock(p,t)),p.bExtendView&&i++}if(this.oPost.hasVideo()){for(var _=this.oPost.aVideos[0],h=this.isVideoHidden(_),o=0;o<_.bi.length&&t<this.iNbMaxContent;o++){var g=s<this.iNbVideoMobilePreviews&&!this.oPost.isQuickies(),c=this.getImageBestResolution(_.bi[o],"thumb"),f=this.getImageWorstResolution(_.bi[o],"thumb");++t;var p={tpl:this.oTemplates.sTplThumb,small:this.isImageFull(t)?c:f,full:c,bPreview:g,bHiddenGallery:!g&&(this.getTextContent()||this.bAlwaysDisplayText?2!=t:1!=t),bExtendView:this.bExtendVideoFrames&&this.isExtendView(t),sLink:_.u,bLocked:!1,bRedCache:n,bFilling:!0,bGallery:!0};e.push(this.getPictureThumbBlock(p,t)),s++,p.bExtendView&&i++}for(;s<this.iNbVideoMobilePreviews&&o<_.bi.length&&!this.oPost.isQuickies();){var c=this.getImageBestResolution(_.bi[o],"thumb"),f=this.getImageWorstResolution(_.bi[o],"thumb");e.push(this.getPictureThumbBlock({tpl:this.oTemplates.sTplThumb,small:this.isImageFull(t+1)?c:f,full:c,bPreview:!0,bHiddenFull:!0,bHiddenGallery:!1,sLink:_.u,bLocked:!1,bRedCache:n,bFilling:!0},++t)),s++,o++}s++,e.push(this.getHidenGalleryPicture({full:_.ip},++t))}for(;d<this.oPost.aPictures.length;d++){var u=this.oPost.aPictures[d];this.isPictureAvailable(u)&&e.push(this.getHidenGalleryPicture({full:this.getImageBestResolution(u,"picture")},++t))}return this.iNbExtendView=i,e},isNoExtend:function(){return 0===this.iNbExtendView},updateNoExtend:function(e){var t=this.$post[0],i=this.iNbExtendView<=(e?1:0),n=t.classList.contains("p-noextend");i&&!n?(t.classList.add("p-noextend"),this.listenerOnResize(!0)):!i&&n&&(t.classList.remove("p-noextend"),this.listenerOnResize(!0))},isReducedMobile:function(){return!this.oPost.aPictures.some(function(e){return!e.ip})&&this.oPost.hasVideo()},isExtendView:function(e){return e>(this.getTextContent()||this.bAlwaysDisplayText?2:1)&&e<=(this.getTextContent()?11:10)},isRedPost:function(){if("undefined"!=typeof this.oPost.isPaid)return this.oPost.isPaid;for(var e=!1,t=0;t<this.oPost.aVideos.length;t++)if(this.isVideoRed(this.oPost.aVideos[t])){e=!0;break}return e},isVideoRed:function(e){return e.pm||e.pms||e.pmf||e.pmp},isVideoHidden:function(e){return!e.pun&&e.th},isQuickies:function(e,t){return e.iq&&(!t||!e.pm||e.pun)},isPictureHidden:function(e){return!e.pun&&e.th},getImageBestResolution:function(e,t){if("picture"===t){if(e.tf)return e.tf;if(e.tl)return e.tl;if(e.t)return e.t}if("thumb"===t){if(e.ip)return e.ip;if(e["if"])return e["if"];if(e.il)return e.il;if(e.i)return e.i}return""},getImageWorstResolution:function(e,t){if("picture"===t){if(e.t,e.tl)return e.tl;if(e.tf)return e.tf}if("thumb"===t){if(e.i,e.il)return e.il;if(e["if"])return e["if"];if(e.ip)return e.ip}return""},isImageFull:function(e){return this.oPost.hasVideo()?e<=1:this.oPost.aPictures.length<=(this.getTextContent()?5:6)||e===(this.getTextContent()?2:1)},isPictureAvailable:function(e){return!(e.ip&&this.oPost.isPaid&&!this.oPost.isPurchased)},getNbAvailablePictures:function(){if("undefined"!=typeof this.mem_getNbAvailablePictures)return this.mem_getNbAvailablePictures;var e=this;return this.mem_getNbAvailablePictures=this.oPost.aPictures?this.oPost.aPictures.reduce(function(t,i){return t+(e.isPictureAvailable(i)?1:0)},0):0,this.mem_getNbAvailablePictures},getNbRedPicturesShown:function(e){var t=this;return this.oPost.aPictures?this.oPost.aPictures.reduce(function(i,n,s){return s>=e?i:i+(t.isPictureAvailable(n)?0:1)},0):0},addLightGallery:function(){var e=this.$post[0].querySelectorAll(".p-pics > .pic-gallery:not(.red-cache):not(.p-locked) [data-src]");0!==e.length&&this.createLightGallery(this.$post[0].querySelector(".p-gallery"),e)},createLightGallery:function(t,i){var n=this,s={hideBarsDelay:1e3,stretchEnabled:!0,fnBeforeOpen:function(){e.debug("Trigger view data from lightgallery"),n.triggerViewData(),window.location.hash="gallery",window.tmpX=window.pageXOffset||document.documentElement.scrollLeft,window.tmpY=window.pageYOffset||document.documentElement.scrollTop,window.tmponscroll=window.onscroll,window.onscroll=function(){window.scrollTo(tmpX,tmpY)},setTimeout(function(){window.scrollTo(tmpX,tmpY)},300),"function"==typeof n.oListeners.onLightGalleryOpen&&n.oListeners.onLightGalleryOpen()},fnOnClose:function(){window.onscroll=window.tmponscroll,window.scrollTo(tmpX,tmpY),"function"==typeof n.oListeners.onLightGalleryClose&&n.oListeners.onLightGalleryClose()}};this.oOptions.oPost.hasPicture()&&(s.onGalleryLink=function(){n.toggleFullGallery(!0)}),new d(t,i,s)},addUserPopup:function(e){var t=this,i=this.getUserInfoHtml(e),n=function(n){t.oState.oPopups[e.sId]=new l(n,i,{relative_to:$(n).parentElement,popup_class:"uploader-info-popup",autoclose:!0,mouseout_autoclose:300,open_close_cooldown:1e3,close_after_cooldown:!1,autoclose_on_same_level:"any_level",mouseover_open:200,mouseout_autoclose_openevents:["click","mouseover_btn_timer","no_event"],position:{v:"below",h:"left"}}),t.initUserHover(t.oState.oPopups[e.sId],e)};this.bEnableUsernamePopup&&this.$post[0].querySelectorAll('.p-user[user-id="'+e.sId+'"]').forEach(n),this.bEnableUserThumbPopup&&this.$post[0].querySelectorAll('.p-profile-picture[user-id="'+e.sId+'"] > img').forEach(n)},getMetadataHtml:function(){return i.render(this.oTemplates.sTplMetadata,this)},getMobileCommentHtml:function(){return this.sMobileCommentClasses=[],this.sMobileTitle=this.getTitleContent(),this.sMobileComment=this.getTextContent(),this.sMobileTitle||(this.sMobileTitle=this.sMobileComment,this.sMobileComment=""),this.sMobileComment&&this.sMobileCommentClasses.push("title-one-line"),i.render(this.oTemplates.sTplMobileComment,this)},getFrameHeadHtml:function(){return i.render(this.oTemplates.sTplFrameHead,this)},getFrameFootHtml:function(){return i.render(this.oTemplates.sTplFrameFoot,{})},getHeadHtml:function(e){return this.bCommentHead=e,i.render(this.oTemplates.sTplHead,this)},getGalleryHtml:function(e){var t=[this.getPostTypeClass()];return this.oPost.aPictures.length<=4&&t.push("p-realcenter"),i.render(this.oTemplates.sTplGallery,{sHead:this.sHead,sHtml:e.join(""),sPostTypeClass:t.join(" ")})},getAllGalleryHtml:function(){return i.render(this.oTemplates.sTplAllGallery,{sHtmlPics:this.getAllGalleryContentHtml()})},getAllGalleryContentHtml:function(){var e=this;return e.oPost.aPictures.reduce(function(t,i){return e.isPictureAvailable(i)?(t.push(e.getHidenGalleryPicture({full:e.getImageBestResolution(i,"picture")})),t):t},[]).join("")},getPostTypeClass:function(){var e=[];return e.push(this.hasText()?"post-text":"post-notext"),e.push(this.bAlwaysDisplayText?"always-text":""),e.push(this.oPost.hasVideo()?"post-videos":"post-novideos"),e.push(this.oPost.hasPicture()?"post-pictures post-nb-pic-"+Math.min(this.iNbMaxContent-(this.getTextContent()?1:0),this.getNbAvailablePictures()):"post-nopictures"),this.iNbExtendView>0&&e.push("post-nb-extend-"+this.iNbExtendView),this.iNbExtendView%2!=0&&e.push("post-extend-odd"),!this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesGalleryTablet&&e.push("post-gallery-more-tablet"),!this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesGalleryDesktop&&e.push("post-gallery-more-desktop"),!this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesGallery2colsDesktop&&e.push("post-gallery-more-desktop-col-2"),this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesVideoTablet&&e.push("post-gallery-more-video-tablet"),this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesVideoDesktop&&e.push("post-gallery-more-video-desktop"),this.oPost.hasVideo()&&this.getNbAvailablePictures()>this.oOptions.iNbPicturesVideo2colsDesktop&&e.push("post-gallery-more-video-desktop-col-2"),this.oPost.isPlaylist()&&this.oPost.aVideos.length>this.oOptions.iNbVideosPlaylistTablet&&e.push("post-playlist-more-tablet"),this.oPost.isPlaylist()&&this.oPost.aVideos.length>this.oOptions.iNbVideosPlaylistDesktop&&e.push("post-playlist-more-desktop"),this.oPost.isPlaylist()&&this.oPost.aVideos.length>this.oOptions.iNbVideosPlaylist2colsDesktop&&e.push("post-playlist-more-desktop-col-2"),e.join(" ")},hasText:function(){return this.getTextContent()||this.getTitleContent()||this.oPost.isPlaylist()},initUserHover:function(i,n){var s=this,o=n;i&&(i.onOpen=function(){if(o&&!s.oState.oPopupsAdded[o.sId]){var a={user_id:o.sId,user_name:o.sUsername},r=i;e.debug("selfPop",r);var l=r.getPopup();if(e.debug("$popContent",l),l&&l[0]){require(["skins/"+t.sitename+"/profile/subscribe/btns_controler"],function(e){new e({uploader:a,elts:{sub_btn:l[0].querySelector(".user-subscribe"),counter:l[0].querySelector(".user-subscribe > .count"),tooltip:!1,btn_display:"block"},listeners:{onSub:function(){"function"==typeof s.oListeners.onSub&&s.oListeners.onSub(s)},onUnsub:function(){"function"==typeof s.oListeners.onUnsub&&s.oListeners.onUnsub(s)}}})});var d=l[0].querySelector(".user-filter");d&&d.addEventListener("click",function(){"function"==typeof s.oListeners.onUserFilter&&s.oListeners.onUserFilter(n),i.forceClose()}),s.oState.oPopupsAdded[n.sId]=!0}}})},onResize:function(e){e&&(this.bSideBySideChecked=!1),$(this.$gallery).find(".p-postcomment").each(function(){var e=$(this),t=f.isOverflowingWhere(this).vertical;e.toggleClass("overflowing",t)}),this.checkMobileCommentExtend(),this.checkMobilePicturesSideBySide();for(var t=0;t<this.oState.aOnResize.length;t++)"function"==typeof this.oState.aOnResize[t]&&this.oState.aOnResize[t]()},listenerOnResize:function(e){"function"==typeof this.oListeners.onResize&&this.oListeners.onResize(e)},checkMobileCommentExtend:function(){var e=f.isClamped(this.$mobileComment.querySelector(".p-mobile-comment-title")),t=f.isClamped(this.$mobileComment.querySelector(".p-mobile-comment-comment")),i=e||t;this.bMobileCommentOpen||i?this.$mobileComment.classList.add("show-extend"):this.$mobileComment.classList.remove("show-extend"),i?this.$mobileComment.classList.add("p-dim-down"):this.$mobileComment.classList.remove("p-dim-down")},checkMobilePicturesSideBySide:function(){if(this.$post.is(":visible")&&!this.bSideBySideChecked&&!(window.innerWidth>this.oOptions.mobile_max_width||this.oPost.aPictures.length<2)){var e=this.$gallery.querySelectorAll(".p-frame.pic");if(!(e.length<2)){var t=e[0].querySelector("img"),i=e[1].querySelector("img");if(t&&i){if(!t.complete){var n=this;return void t.addEventListener("load",function(){n.checkMobilePicturesSideBySide()})}if(!i.complete){var n=this;return i.loading="",void i.addEventListener("load",function(){n.checkMobilePicturesSideBySide()})}this.bSideBySideChecked=!0,this.unsetSideBySide(e[0],e[1]);var s=this.$gallery.offsetWidth,o=this.$gallery.offsetHeight;e[0].style.display="block",e[1].style.display="block",this.checkMobilePicturesSideBySideHorizontal(s,e[0],e[1],t,i)||this.checkMobilePicturesSideBySideVertical(o,e[0],e[1],t,i),e[0].style.display="",e[1].style.display=""}}}},checkMobilePicturesSideBySideHorizontal:function(e,t,i,n,s){n.style.width="fit-content",s.style.width="fit-content",t.style.width="100%",i.style.width="100%";var o=n.offsetWidth,a=s.offsetWidth;n.style.width="",s.style.width="",t.style.width="",i.style.width="";var r=e-(o+a);return r>0?(this.setSideBySide(r,t,i),!0):(this.unsetSideBySide(t,i),!1)},checkMobilePicturesSideBySideVertical:function(e,t,i,n,s){n.style.height="fit-content",s.style.height="fit-content";var o=n.offsetHeight,a=s.offsetHeight;n.style.height="",s.style.height="";var r=e-(o+a);return r>0?(this.setSideBySide(r,t,i),!0):(this.unsetSideBySide(t,i),!1)},setSideBySide:function(e,t,i){var n=Math.floor(e/3);this.$pics.classList.add("side-by-side"),t.style.setProperty("margin-right",n+"px"),t.classList.add("side-by-side"),i.classList.add("side-by-side"),this.iNbExtendView%2==1?this.$pics.classList.remove("post-extend-odd"):this.$pics.classList.add("post-extend-odd"),this.updateNoExtend(!0)},unsetSideBySide:function(e,t){this.$pics.classList.remove("side-by-side"),this.$pics.style.removeProperty("margin-right"),e.classList.remove("side-by-side"),t.classList.remove("side-by-side"),this.iNbExtendView%2==0?this.$pics.classList.remove("post-extend-odd"):this.$pics.classList.add("post-extend-odd"),this.updateNoExtend(!1)},toggleMobileCommentExtend:function(){this.bMobileCommentOpen=!this.bMobileCommentOpen,this.bMobileCommentOpen?this.$mobileComment.classList.add("open"):this.$mobileComment.classList.remove("open"),this.checkMobileCommentExtend(),this.listenerOnResize(!0)},handleTitleResizeListener:function(e){if(e){var t=this.$post[0].querySelector(".p-head .p-show-more");t&&(t.style.display="none");var i={bParagraph:!0,sText:this.oPost.sComment,sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iTitleFontSizeMaxDesktop,bClampText:!1,bProcessInvisible:!0,bReapplyOnResize:!1,bSyncLineHeight:!0,fnCallback:this.fnResizeCallback};this.oState.aOnResize.push(function(){f.resizeToFitHorizontal(e,i)})}},handleCommentResizeListener:function(e){if(e){var t=this,i=e.parentElement,n=this.$post.find(".p-extend-container"),s=this.$post.find(".p-head .p-show-more")[0];s&&(s.style.display="none");var o=i.querySelector(".p-show-more");this.fnResizeCallback=function(){var a=f.isOverflowingWhere(i,2).vertical;t.updateDimClampedText(e,a),n&&(a||t.oState.bViewingText?n.css("display","block"):n.css("display","none")),o&&(window.innerWidth>t.oOptions.mobile_max_width?$(o).removeClass("p-comment-preview"):($(o).addClass("p-comment-preview"),s&&a&&(s.style.display="block")),o.style.display=a?"block":"none")};var a={bParagraph:!0,sText:this.getTextContent(),sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxDesktop,bClampText:!1,bProcessInvisible:!0,bReapplyOnResize:!1,fnCallback:this.fnResizeCallback,bSyncLineHeight:!0};this.oState.aOnResize.push(function(){f.resizeToFitHorizontal(e,a)})}},handleCommentHeadResizeListener:function(){var e=this.$post[0].querySelector(".p-postcomment.p-display-less .p-formatted-text");if(e){var t=$(this.$head).find(".p-extend-container"),i=this,n=e.parentElement.parentElement,s=n.parentElement,o=s.parentElement,a=o.querySelector(".p-show-more");this.fnCallbackMinHeader=function(){var n=f.isOverflowingWhere(e).vertical;i.updateDimClampedText(e,n),t&&(n||i.oState.bViewingText?t.css("display","block"):t.css("display","none")),a&&(window.innerWidth>i.oOptions.mobile_max_width?a.style.display="none":a.style.display=n?"block":"none")},i.updateDimClampedText(e,!0);var r={bParagraph:!0,sText:this.getTextContent(),sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxMobile,bClampText:!1,bProcessInvisible:!0,bReapplyOnResize:!1,fnCallback:this.fnCallbackMinHeader};this.oState.aOnResize.push(function(){f.resizeToFitHorizontal(e,r)})}},updateTextLink:function(){if(!this.oOptions.bDisableTextLink){var e=this.$gallery.querySelector(".p-postcomment > .p-formatted-text");this.$gallery.querySelector(".p-postcomment").classList.contains("p-dim-down")?(e.removeEventListener("mousedown",this.fnLinkDown),e.removeEventListener("mouseup",this.fnLinkUp)):(e.addEventListener("mousedown",this.fnLinkDown),e.addEventListener("mouseup",this.fnLinkUp))}},updateDimClampedText:function(e,t){var i=e.classList.contains("p-dim-down");t&&!i&&$(e).addClass("p-dim-down"),!t&&i&&$(e).removeClass("p-dim-down"),this.updateTextLink()},toggleExpandContent:function(e){var t=this,i=t.$moreButton.children[0],n="boolean"==typeof e?e:i.className.includes("icf-angle-down");i.className=n?"icon-f icf-angle-up":"icon-f icf-angle-down",t.$post[0].querySelectorAll(".p-extend-view").forEach(function(e){n||window.innerWidth>t.oOptions.mobile_max_width?e.style.display="flex":e.style.display="none"}),t.$post[0].querySelectorAll(".p-frame-preview").forEach(function(e){$(e).toggleClass("p-frame-preview-extend",n)}),n||scrollTo({top:t.$metadata.getBoundingClientRect().top-document.body.getBoundingClientRect().top-50}),this.bSideBySideChecked=!1,"function"==typeof t.oListeners.onResize&&t.oListeners.onResize(!0)},addMoreButtonClickListener:function(){if(this.$moreButton){var e=this;this.$moreButton.addEventListener("click",function(){e.toggleExpandContent()})}},toggleExpandCommentFrame:function(e,t,i){e&&(t?(i||(e.style.minHeight="100px",e.style.height="fit-content"),e.style.overflow="unset",e.style.aspectRatio="unset"):(i||(e.style.height="100px"),e.style.overflow="hidden",e.style.aspectRatio="1.777"),self.oState.bViewingText=t)},isPostClosed:function(){return!$(this.$pics).hasClass("post-viewing-text")},toggleExpandTextOnlyPost:function(e){if(e){var t=this,i=e.parentElement.parentElement.parentElement,n=t.isPostClosed(),s=i.querySelector(".p-postcomment"),o=s.querySelector(".p-formatted-text");if(this.toggleExpandCommentFrame(i,n,!0),$(t.$pics).toggleClass("post-viewing-text",n),n)o.innerHTML=t.getTextContent(),s.style.minHeight="75px";else{var a={sText:t.getTextContent(),sHTMLAttribute:"innerHTML",bParagraph:!0,sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxDesktop,bClampText:!1,bReapplyOnResize:!1};f.resizeToFitHorizontal(o,a)}t.oState.bViewingText=n,t.updateDimClampedText(s,!n)}},toggleExpandInFramePost:function(e){if(e){var t=this,i=e.parentElement.parentElement.querySelector(".p-postcomment"),n=i.querySelector(".p-formatted-text"),s=t.$gallery.querySelector(".p-frame-2"),o=s?s.querySelector(".fit-image"):undefined,a=o?o.querySelector("img"):undefined,r=a&&!this.bTextOnly&&!this.oPost.hasVideo();if(t.oState.bViewingText=!t.oState.bViewingText,t.oState.bViewingText)n.innerHTML=t.getTextContent(),$(t.$pics).toggleClass("post-viewing-text",!0),$(i).toggleClass("p-dim-down",!1),i.style.overflow="auto",r&&(a.style.maxWidth="100%",a.style.maxHeight="100%",s.style.height="100%");else{if($(t.$pics).toggleClass("post-viewing-text",!1),$(i).toggleClass("p-dim-down",!0),i.style.overflow="unset",r){s.style.height="fit-content";var l=$(s).height();a.style.maxWidth=l+"px",a.style.maxHeight=l+"px"}var d={bParagraph:!0,sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxDesktop,bClampText:!1,bReapplyOnResize:!1,fnCallback:this.fnResizeCallback,sText:t.getTextContent()};f.resizeToFitHorizontal(i.querySelector(".p-formatted-text"),d)}t.updateTextLink()}},addFrameMoreButtonClickListener:function(e){if(e){var t=this;this.sSizeCommentFrame=window.getComputedStyle(e.parentElement.parentElement).height;var i=function(i){t.bTextOnly?t.toggleExpandTextOnlyPost(e):t.toggleExpandInFramePost(e)};e.addEventListener("click",i)}},handleMoreButtonClickListener:function(){this.addMoreButtonClickListener(),this.addFrameMoreButtonClickListener(this.$gallery.querySelector(".p-extend-container"))},handleProfilePictureClickListener:function(){var e=this;this.$post[0].querySelectorAll(".p-profile-picture > img").forEach(function(t){t.addEventListener("click",function(){window.location.href=e.oUploader.sUrl})})},toggleFullGallery:function(e){var t=this;e="boolean"==typeof e?e:!$(t.$post).hasClass("post-view-full-gallery"),t.addedFullLightGallery||(t.createLightGallery(t.$post[0].querySelector(".p-allgallery"),t.$post[0].querySelectorAll(".p-allgallery img[data-src]")),t.addedFullLightGallery=!0),t.$post[0].querySelectorAll(".p-gallery-data .fit-image img").forEach(function(e){e.getAttribute("data-src")&&e.setAttribute("src",e.getAttribute("data-src"))}),$(t.$post).toggleClass("post-view-full-gallery",e),$("body").toggleClass("post-view-noscroll",e),window.dispatchEvent(new Event("resize")),e?"function"==typeof t.oListeners.onLightGalleryOpen&&t.oListeners.onLightGalleryOpen():"function"==typeof t.oListeners.onLightGalleryClose&&t.oListeners.onLightGalleryClose(),t.addedScroll||(new u({oOptions:{$Container:t.$post[0].querySelector(".p-allgallery-pics"),sMode:u.S_MODE_VERTICAL,iAutoHideDelayMs:100,iBarMarginPx:0,bCanMouseGrabToScroll:!0}}),t.addedScroll=!0)},handleFullGalleryClickListener:function(){var e=this
;this.$post[0].querySelectorAll(".p-gallery-seemore, .p-playlist-seemore, .p-allgallery-exit").forEach(function(t){t.addEventListener("click",function(){e.toggleFullGallery()})}),this.$post[0].querySelectorAll(".p-allgallery-back").forEach(function(t){t.addEventListener("click",function(t){$(t.target).hasClass("p-allgallery-back")&&e.toggleFullGallery()})})},handleQuickiesClickListener:function(){var e=this;this.$post[0].querySelectorAll(".p-quickies-u").forEach(function(t){t.addEventListener("click",function(t){if(t.stopPropagation(),t.preventDefault(),!e.openQuickies($(t.currentTarget).data("eid"),e.oPost.isPlaylist()?null:e.oPost.sUserId)){var i=$(t.currentTarget).find("a").attr("href");"string"==typeof i&&i.length&&(window.location.href=i)}})})},openQuickies:function(t,i){if(e.debug("openQuickies",t,i),this.oQuickiesManager)return this.oQuickiesManager.setCurrentVideoId(t),this.oQuickiesManager.openAndPlay(),!0;var n=[];for(var s in this.oPost.aVideos){var o=this.oPost.aVideos[s];this.isQuickies(o,!0)&&n.push(this.oPost.aVideos[s].eid)}if(!n.length)return e.debug("openQuickies --- RETURN no quickies to load",this.oPost.aVideos),!1;var a=this;return require(["skins/common/player/quickies/manager","skins/common/player/quickies/constants"],function(e,s){a.oQuickiesManager=new e(!0,"search",{aSortFilters:["best"],bNoAutoLoad:!0,oAvailableOrientations:{bAll:!0}}),i&&a.oQuickiesManager.setFullNavigationToProfile(i),"function"==typeof a.oListeners.onQuickiesOpen&&a.oQuickiesManager.onEvent(s.EVENT.MANAGER.OPEN,function(){a.oListeners.onQuickiesOpen()}),"function"==typeof a.oListeners.onQuickiesClose&&a.oQuickiesManager.onEvent(s.EVENT.MANAGER.CLOSE,function(){a.oListeners.onQuickiesClose()}),a.oQuickiesManager.loadVideoList(function(){a.oQuickiesManager.setCurrentVideoId(t),a.oQuickiesManager.openAndPlay()},{aForceEncodedIdToLoad:n})}),!0},isPostInView:function(){return o.isElementInView(this.$post[0],!0)},handleViewListener:function(){var t=this;if(this.oPost.hasViewData()){var i=function(){if(!t.oState.bViewDataRegistered){var n=t.isPostInView(),s=t.oOptions.iMainViewCheckInterval;if("undefined"==typeof t.oState.iViewingPostStartTime)n&&(t.oState.iViewingPostStartTime=Date.now(),s=t.oOptions.iViewingCheckInterval);else if(n){if(Date.now()-t.oState.iViewingPostStartTime>t.oOptions.iViewPostDuration)return e.debug("Trigger view data from view listener"),void t.triggerViewData();s=t.oOptions.iViewingCheckInterval}else t.oState.iViewingPostStartTime=undefined;setTimeout(i,s)}};i()}},handleMobileCommentExtendListener:function(){var e=this;this.$mobileCommentExtend&&this.$mobileCommentExtend.addEventListener("click",function(){e.toggleMobileCommentExtend(),e.onResize()})},triggerViewData:function(){var t=this;this.oState.bViewDataRegistered||this.oPost.hasViewData()&&(e.debug("Registering view data",this.oPost.sViewData),$.ajax({url:"/fanclub-post/view",type:"POST",data:{data:this.oPost.sViewData},success:function(){t.oState.bViewDataRegistered=!0},error:function(){e.error("Error registering view data",this.oPost)}}))},insertContentLocked:function(){var t=this.$post[0].querySelector(".p-gallery .p-content .update-container .uploader");if(!t)return e.warn("Cannot add Content Locked on post because it is missing a comment frame."),!1;var i=this.getContentLockedHtml();return!!i&&(e.debug("Inserting content locked on post",this.oPost),t.prepend($(i)[0]),!0)},insertContentLockedMobile:function(){var t=this.$post[0].querySelector(".p-head .update-container .uploader");if(!t)return e.warn("Cannot add Content Locked on post (mobile) because it is missing the head."),!1;var i=this.getContentLockedHtml();return!!i&&(e.debug("Inserting content locked on post",this.oPost),t.prepend($(i)[0]),!0)},getContentLockedHtml:function(){if(!this.oPost.isContentLocked())return e.error("Called getContentLockedHtml on a post that is not content locked",this.oPost),"";var t=this.getContentLockedText();return t?i.render(this.oTemplates.sTplContentLocked,{sContentLockedText:t}):""},isUserWithPremiumContent:function(){return(t.dyn.login_info.has_member_area||t.dyn.premium)&&t.dyn.login_info.is_logged},getContentLockedText:function(){return this.oPost.isPPV?this.isUserWithPremiumContent()?this.oPost.sPPVPrice:a.__(this.oTranslations.direct_purchase):!this.oPost.isPPV&&this.oPost.isMembership?a.__(this.oTranslations.membership_only):void e.error("Unknown price tag for post",this.oPost)},getContentLockedTooltipContents:function(){return a.__(this.getContentLockedTooltipTranslation(),{"%link_start%":'<a class="open_form">',"%link_end%":"</a>"})},getContentLockedTooltipTranslation:function(){return this.oPost.isBothPPVMembership()?this.oTranslations.content_locked_ppv_membership:this.oPost.isPPV?this.oTranslations.content_locked_ppv:this.oPost.isMembership?this.oTranslations.content_locked_membership:(e.error("No content locked string found for post",this.oPost),"")},initContentLockedTooltip:function(){if(this.oPost.isContentLocked()&&this.insertContentLocked()){var e=this,t=e.sPostId+"-content-locked-tooltip",i=this.$post[0].querySelector(".p-gallery .content-locked");if(i){var n=new c;n.create(this.getContentLockedTooltipContents(),i,{popup_class:t,autoclose_timer:1500}),n.oTooltip.onOpen=function(){var i=function(){var n=document.querySelector("."+t+" .open_form");n?e.initContentLockedButton(n):setTimeout(function(){i()},10)};i()};var s=!1;i.addEventListener("click",function(){s=!s,s?n.open():n.close()})}}},initContentLockedTooltipMobile:function(){if(this.oPost.isContentLocked()&&this.insertContentLockedMobile()){var e=this,t=e.sPostId+"-content-locked-tooltip-mobile",i=this.$post[0].querySelector(".p-head .content-locked");if(i){var n=new c;n.create(this.getContentLockedTooltipContents(),i,{popup_class:t,autoclose_timer:1500}),n.oTooltip.onOpen=function(){var i=function(){var n=document.querySelector("."+t+" .open_form");n?e.initContentLockedButton(n):setTimeout(function(){i()},10)};i()};var s=!1;i.addEventListener("click",function(){s=!s,s?n.open():n.close()})}}},initContentLockedButton:function(t){if(this.oPost.isContentLocked()&&!(!this.oPost.aVideos.length>0)){if(!t)return void e.error('Could not find "here" link. Cannot init purchase form.');var i=this;t.addEventListener("click",function(){i.openPremiumForm()})}},initPicturesContentLockedFormLink:function(){var e=this.$post[0].querySelectorAll(".pic.p-locked");if(e.length){var t=this;e.forEach(function(e){e.addEventListener("click",function(){t.openPremiumForm()})})}},initVideosContentLockedFormLink:function(){var t=this.$post[0].querySelectorAll(".thumb-block.p-content-locked");if(t.length){var i=this;t.forEach(function(t){var n=t.getAttribute("id"),s=i.oPost.aVideos.find(function(e){return n.includes(e.id)});if(!s)return void e.error("Could not find video for locked content",t,i.oPost.aVideos);s.pm&&s.pms&&!s.pmp&&!s.pmf||t.addEventListener("click",function(e){e.preventDefault(),i.openPremiumForm()})})}},initRedTicketsFormLink:function(){var e=this.$post[0].querySelectorAll(".pic.red-cache");if(e.length){var t=this;e.forEach(function(e){e.addEventListener("click",function(){t.openPremiumForm()})})}},openPremiumForm:function(){if(!(this.oPost.aVideos.length<=0)){var e=this,t=e.oPost.aVideos[0].id,i=e.oPost.sUserId;require(["skins/common/form/login/premium"],function(n){n=e.oPost.isPPV?new n(undefined,t):new n(i,t),n.setOpenCloseModes("signup",!0,!0),n.open(null,{sThisOpenOnlyOrigin:e.oPost.isPPV?e.oTrackers.tracker_ppv:e.oTrackers.tracker_membership})})}}},x}),define("skins/common/global_feed/post/post_video/post_video",["../post_generator","mustache","lib/tools"],function(e,t,i){var n=function(t){var s={};i.initParams(s,t,n.GET_DEFAULT_OPTIONS()),e.apply(this,[s])};return n.DEFAULT_OPTIONS={},n.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,n.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n}),define("skins/common/global_feed/post/post_gallery/post_gallery",["lib/i18n!front","../post_generator","../post","mustache","lib/tools"],function(e,t,i,n,s){var o=function(e){var i={};s.initParams(i,e,o.GET_DEFAULT_OPTIONS()),t.apply(this,[i])};return o.DEFAULT_OPTIONS={oTranslations:{x_added_y_new_photos_to_z:"feed.x_added_y_new_photos_to_z",x_added_a_new_photo_to_z:"feed.x_added_a_new_photo_to_z"}},o.GET_DEFAULT_OPTIONS=function(){var e={};return s.initParams(e,o.DEFAULT_OPTIONS,t.GET_DEFAULT_OPTIONS()),e},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.getTextContent=function(){return this.oOptions.oPost.sType===i.POST_TYPE.GALLERY_PICTURES?this.getGalleryPicturesText():t.prototype.getTextContent.call(this)},o.prototype.getGalleryPicturesText=function(){var t=this.oTranslations.x_added_a_new_photo_to_z,i=this.oOptions.oPost.aPictures.length,n={"%x%":this.oOptions.oUploader.sDisplayName,"%z%":'<a href="'+this.oOptions.oPost.sLink+'">'+this.oOptions.oPost.sComment+"</a>"};return i>1&&(n["%y%"]=i.toString(),t=this.oTranslations.x_added_y_new_photos_to_z),e.__(t,n)},o}),define("skins/common/global_feed/post/post_text/post_text",["../post_generator","mustache","lib/tools","skins/common/design/text"],function(e,t,i,n){var s=function(t){var n={};i.initParams(n,t,s.GET_DEFAULT_OPTIONS()),n.oOptions.aClasses.push("p-textonly"),this.bTextOnly=!0,e.apply(this,[n])};return s.DEFAULT_OPTIONS={oOptions:{aClasses:[],iTitleFontSizeMaxDesktop:18}},s.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,s.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.handleCommentResizeListener=function(e){if(e){var t=this,i=e.parentElement,s=this.$post.find(".p-extend-container"),o=this.$post[0].querySelector(".p-head .p-show-more");o&&(o.style.display="none");var a=i.querySelector(".p-show-more"),r=function(i){var o=n.isOverflowing(i.$element);t.updateDimClampedText(e,o),s&&(o?s.css("display","block"):s.css("display","none")),a&&(a.style.display=o?"block":"none"),t.onResize()},l={bParagraph:!0,sText:this.oPost.sComment,sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxDesktop,bClampText:!1,bProcessInvisible:!0,fnCallback:r,bSyncLineHeight:!0};n.resizeToFitHorizontal(e,l)}},s.prototype.toggleExpandInFramePost=function(e){if(e){var t=this,i=e.parentElement.parentElement.querySelector(".p-postcomment"),s=i.querySelector(".p-formatted-text");if(t.bPostTextFrameOpen=!t.bPostTextFrameOpen,t.bPostTextFrameOpen)s.innerHTML=t.oPost.sComment,$(t.$pics).toggleClass("post-viewing-text",!0),$(i).toggleClass("p-dim-down",!1);else{$(t.$pics).toggleClass("post-viewing-text",!1),$(i).toggleClass("p-dim-down",!0);var o={bParagraph:!0,sHTMLAttribute:"innerHTML",sUnit:"px",iFontSizeMin:14,iFontSizeMax:this.oOptions.iFontSizeMaxDesktop,bClampText:!1,bReapplyOnResize:!1,sText:t.oPost.sComment};n.resizeToFitHorizontal(i.querySelector(".p-formatted-text"),o)}t.updateTextLink()}},s}),define("skins/common/global_feed/post/post_playlist/post_playlist",["../post_generator","mustache","lib/tools","lib/i18n!front"],function(e,t,i,n){var s=function(t){var n={};i.initParams(n,t,s.GET_DEFAULT_OPTIONS()),n.oOptions.aClasses.push("p-playlist"),e.apply(this,[n]),this.sTitle=this.getTitle(),delete this.sComment};return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,s.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},s.prototype.getTitleLink=function(){return'<a href="'+this.oOptions.oPost.sLink+'">'+this.sTitle+"</a>"},s.prototype.getTitle=function(){var e={"%uploader%":this.oOptions.oUploader.sDisplayName,"%title%":this.getTitleLink(),"%count%":this.oOptions.oPost.sNbVideosPlaylist},t=this.oTranslations.added_video_to_playlist;return this.oOptions.oPost.aVideos.length>1&&(t=this.oTranslations.added_videos_to_playlist),n.__(t,e)},s.prototype.getAllGalleryContentHtml=function(){var e=this;return e.oPost.aVideos.map(function(t){return e.getVideoThumbBlock(t,0,!1)}).join("")},s}),define("skins/common/global_feed/post/post_views_achieved/post_views_achieved",["lib/i18n!front","../post_generator","../post_text/post_text","mustache","lib/tools"],function(e,t,i,n,s){var o=function(e){var t={};s.initParams(t,e,o.GET_DEFAULT_OPTIONS()),t.oOptions.aClasses.push("p-views-achieved"),i.apply(this,[t])};return o.DEFAULT_OPTIONS={oOptions:{aClasses:[],iFontSizeMaxDesktop:60},oTranslations:{video_views:"video_views",new_achievement_for_user:"new_achievement_for_user"}},o.GET_DEFAULT_OPTIONS=function(){var e={};return s.initParams(e,o.DEFAULT_OPTIONS,i.GET_DEFAULT_OPTIONS()),e},o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.getTitleContent=function(){return this.oUploader?e.__(this.oTranslations.new_achievement_for_user,{"%username%":'<a href="'+this.oUploader.sUrl+'">'+this.oUploader.sDisplayName+"</a>"}):""},o.prototype.getTextContent=function(){return'<span class="p-nb-video-views">'+this.oPost.sNbViews+"</span> "+e.__(this.oTranslations.video_views)},o}),define("skins/common/global_feed/post/post_banner/post_banner_new_uploads",["static/log","../post_generator","mustache","lib/tools","lib/i18n!front"],function(e,t,i,n,s){var o=function(e){var i={};n.initParams(i,e,o.GET_DEFAULT_OPTIONS()),i.oOptions.aClasses.push("p-banner-new-uploads"),i.oOptions.bDisableTextLink=!0,t.apply(this,[i])};return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.GET_DEFAULT_OPTIONS=function(){var e={};return n.initParams(e,o.DEFAULT_OPTIONS,t.GET_DEFAULT_OPTIONS()),e},o.prototype.init=function(){t.prototype.init.call(this),this.initREDTabLink()},o.prototype.getTextContent=function(){var e=t.prototype.getTextContent.call(this);return e=e.replace("%premium%",'<span class="icon-f icf-white-fill icf-ticket-red active"></span>')},o.prototype.initREDTabLink=function(){var e=$(".p-postcomment .p-formatted-text");e.on("click",function(e){e.preventDefault(),e.stopPropagation(),$("#tab-videos-red").click()}),e.addClass("p-red-link")},o.prototype.getUpdateText=function(){return""},o.prototype.getUpdateInfo=function(){if(!this.oPost.aVideos||0===this.oPost.aVideos.length)return"";var t=this.oPost.aVideos[0];return t.ir?t.utf?t.utf:(e.error("Missing formatted date for video",t),""):""},o}),define("skins/common/global_feed/post/post_banner/post_banner_new_associated",["../post_generator","mustache","lib/tools","lib/i18n!front"],function(e,t,i,n){var s=function(t){var n={};i.initParams(n,t,s.GET_DEFAULT_OPTIONS()),n.oOptions.aClasses.push("p-banner-new-associated"),e.apply(this,[n])};return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,s.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},s.prototype.getTextContent=function(){var t=e.prototype.getTextContent.call(this);return t=t.replace("%premium%",'<span class="icon-f icf-white-fill icf-ticket-red active"></span>')},s.prototype.getUpdateHtml=function(){var e=this,i=t.render(this.oTemplates.sTplUser,this.oOptions.oUploader),s=this.oOptions.aOtherUsers.reduce(function(i,n){return i+t.render(e.oTemplates.sTplUser,n)},""),o="";return s?o=i?n.__(this.oTranslations.featuring,{"%uploader%":s,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>","%model%":i}):s:i&&(o=n.__(this.oTranslations.featuring_model,{"%model%":i,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>"})),t.render(this.oTemplates.sTplUpdate,{sTicket:this.bRed?"<span class='icon-f icf-white-fill icf-ticket-red'></span>":"",sUploader:o,sInfo:this.sUpdateText+(this.sUpdateText?" | ":"")+this.sDate})},s.prototype.getUpdateText=function(){return""},s.prototype.getUpdateInfo=function(){return""},s}),define("skins/common/global_feed/post/post_banner/post_banner_recently_watched",["../post_generator","mustache","lib/tools","lib/i18n!front"],function(e,t,i,n){var s=function(t){var n={};i.initParams(n,t,s.GET_DEFAULT_OPTIONS()),n.oOptions.aClasses.push("p-banner-recently-watched"),e.apply(this,[n])};return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,s.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},s.prototype.getTextContent=function(){var t=e.prototype.getTextContent.call(this);return t=t.replace("%premium%",'<span class="icon-f icf-white-fill icf-ticket-red active"></span>')},s.prototype.getUpdateText=function(){return""},s.prototype.getUpdateInfo=function(){return""},s}),define("skins/common/global_feed/post/post_banner/post_banner_recently_watched_assoc",["../post_generator","mustache","lib/tools","lib/i18n!front"],function(e,t,i,n){var s=function(t){var n={};i.initParams(n,t,s.GET_DEFAULT_OPTIONS()),n.oOptions.aClasses.push("p-banner-recently-watched-assoc"),e.apply(this,[n])};return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.GET_DEFAULT_OPTIONS=function(){var t={};return i.initParams(t,s.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},s.prototype.getTextContent=function(){var t=e.prototype.getTextContent.call(this);return t=t.replace("%premium%",'<span class="icon-f icf-white-fill icf-ticket-red active"></span>')},s.prototype.getUpdateHtml=function(){var e=this,i=t.render(this.oTemplates.sTplUser,this.oOptions.oUploader),s=this.oOptions.aOtherUsers.reduce(function(i,n){return i+t.render(e.oTemplates.sTplUser,n)},""),o="";return s?o=i?n.__(this.oTranslations.featuring,{"%uploader%":s,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>","%model%":i}):s:i&&(o=n.__(this.oTranslations.featuring_model,{"%model%":i,"%span_start%":'<span class="feat-model">',"%span_end%":"</span>"})),t.render(this.oTemplates.sTplUpdate,{sTicket:this.bRed?"<span class='icon-f icf-white-fill icf-ticket-red'></span>":"",sUploader:o,sInfo:this.sUpdateText+(this.sUpdateText?" | ":"")+this.sDate})},s.prototype.getUpdateText=function(){return""},s.prototype.getUpdateInfo=function(){return""},s}),define("skins/common/global_feed/feed_content/feed_content",["static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/history","text!skins/common/global_feed/no_more_posts.mustache","text!skins/common/global_feed/cover_invalid_filters.mustache","text!skins/common/global_feed/cover_internal_error.mustache","text!skins/common/global_feed/cover_server_message.mustache","text!skins/common/global_feed/scroll_to_top.mustache","lib/helpers/inline_loader","skins/common/global_feed/user","skins/common/global_feed/post/post","skins/common/global_feed/post/post_preview_generator","skins/common/global_feed/post/post_video/post_video","skins/common/global_feed/post/post_gallery/post_gallery","skins/common/global_feed/post/post_text/post_text","skins/common/global_feed/post/post_playlist/post_playlist","skins/common/global_feed/post/post_views_achieved/post_views_achieved","skins/common/global_feed/post/post_banner/post_banner_new_uploads","skins/common/global_feed/post/post_banner/post_banner_new_associated","skins/common/global_feed/post/post_banner/post_banner_recently_watched","skins/common/global_feed/post/post_banner/post_banner_recently_watched_assoc"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D,C,w){var S=function(e){n.initParams(this,e,S.DEFAULT_OPTIONS)};return S.DEFAULT_OPTIONS={oOptions:{oController:undefined,$container:undefined,nb_posts_page:3,nb_page_buffer:6,page_load_cooldown:700,check_visibility_interval:100,visibility_range:1e3,nb_posts_before_add_page:3,nb_default_group_post:1,nb_max_group_post:5,scroll_to_top_show_y:1e3,mobile_max_width:599,post_separation_desktop:25,post_separation_mobile:20,posts_fadeout_on_unsub:!0},oTrackers:{tracker_ppv:undefined,tracker_membership:undefined},oTemplates:{scroll_to_top:u,no_more_posts:a,cover_invalid_filters:r,cover_server_message:d,cover_internal_error:l},oClasses:{post:"post-block",invalid_filters:"invalid-filters",loading_posts:"loading-posts",loading_feed:"loading-feed",scroll_to_top:"scroll-to-top",show_scroll_to_top:"show-scroll-to-top",id_global_feed_content:"global-feed-content",post_force_display_time:1500},oTranslations:{no_more_posts:"global_feed.no_more_posts",no_more_posts_filters:"global_feed.no_more_posts_filters",back_to_top:"misc.back_to_top",no_match:"global_feed.no_content_filter",reset_filters:"search.reset_filters",internal_error:"misc.internal_error",retry:"misc.retry"},oListeners:{emitDisplayNoSubs:undefined,emitDisplayNoSubsCheckedContent:undefined,onNoContent:undefined,onUserFilter:undefined,onLightGalleryOpen:undefined,onLightGalleryClose:undefined},oTempState:{displayNextPageTimeout:null,iMaxFeedHeight:0,iLastViewportWidth:undefined,bDisabledFeed:!1,bNoSubs:!1,bDisableResize:!1,aPostNodes:[],oForcedPostDisplay:{}},oFunctions:{}},S.LOADING={NONE:0,PAGE:1,FEED:2},S.GET_DEFAULT_OPTIONS=function(){return S.DEFAULT_OPTIONS},S.prototype={init:function(){var t=this;if(this.aPostGenerators=[],!this.getController())return void e.error("FeedContent: missing controller. Aborting.");if(!this.getContainer())return void e.error("FeedContent: missing container. Aborting.");this.initXVAspectRatio(),this.initInfinitScrollObservers(),this.$loader=$('<p class="loader">'+c.getIcf()+"</p>"),"string"==typeof this.getState().sCurrentPost&&(this.sPostToFocusWhenAdded=this.getState().sCurrentPost,this.sGroupToDeployWhenAdded=this.getState().sCurrentGroup);for(var i=Math.max(1,this.getState().iCurrentPage),n=0;n<i;n++)this.getState().setCurrentPage(n),this.displayNextPage(1);t.oTempState.iLastScrollLazyUnloaded,setInterval(function(){var e=window.innerHeight+window.pageYOffset>=document.body.offsetHeight;(window.scrollY!==t.oTempState.iLastScrollLazyUnloaded||e)&&(t.oTempState.iLastScrollLazyUnloaded=window.scrollY,t.handleLazyUnloading())},this.oOptions.check_visibility_interval),o.getHashListener().onLeaveHash("gallery",function(){$("button.lg-close.lg-icon").click()}),this.initScrollToTop(),$(window).on("resize",this,function(){t.onResize()}),this.onResize()},initScrollToTop:function(){$("body").append(i.render(this.oTemplates.scroll_to_top,{sScrollToTop:s.__(this.oTranslations.back_to_top)})),this.$scrollToTop=$("."+this.oClasses.scroll_to_top),this.handleScrollToTopListener()},initInfinitScrollObservers:function(){var t=this;this.oLastPostObserver=new IntersectionObserver(function(i){e.info("observer",i);for(var n=0;n<i.length;n++){var s=i[n];if(!0===s.isIntersecting)return t.bLoadingFeed=!s.target.silent,void setTimeout(function(){t.displayNextPage(2,s.target)},50)}},{threshold:[.1]}),this.oFocusedPostObserver=new IntersectionObserver(function(e){for(var i=undefined,n=undefined,s=0;s<5&&s<e.length;s++)!0===e[s].isIntersecting&&(i=e[s].target.attributes["data-post"].value,e[s].target.attributes["data-group"]&&(n=e[s].target.attributes["data-group"].value));i&&i!==t.getState().sCurrentPost&&(t.getController().changeState("sCurrentPost",i,!1),t.getController().changeState("sCurrentGroup",n))},{threshold:[1]})},displayPosts:function(t,i,n,s){var o=this;s=s===undefined?0:s;var a=t,r=Math.min(i,o.getContent().length);for(a;a<r;a++){var l=o.getContent()[a];l?o.appendPost(h.buildFromJSON(l)):e.error("Missing post data at index",a)}return o.setLoading(n),o.onResize(),o.tryFocusPreviousPost(),new Promise(function(r,l){var d=o.getContent().length;if(o.getContent().length<i&&!1!==o.getController().hasMoreEvents()&&s<o.getController().oOptions.nb_empty_pages_before_crash&&a<i){e.debug("Not enough content, trying to load... ("+o.getContent().length+"/"+i+")");o.getController().fetchContent().then(function(l){return l?(e.debug("display posts takes fetch"),s+=o.getContent().length===d?1:0,d=o.getContent().length,s>=o.getController().oOptions.nb_empty_pages_before_crash?(o.fnHandleNoContent(),void r(!1)):(e.debug("Displayed from "+t+" to "+a),void o.displayPosts(a,i,n,s).then(function(e){r(e)})["catch"](function(t){r(!1),e.error("Error while displaying posts",t)}))):void r(!1)})["catch"](function(t){r(!1),e.error("Error while fetching content",t)})}else r(!0)})},appendPost:function(t,i,n,s){if(!t)throw t;e.debug("append post",t);var o=this,a=this.getUsers()[t.sUserId];if(n=n===undefined?this.oOptions.nb_default_group_post:n,n=Math.min(t.aGroupPosts.length+1,n),!a)return void e.error("Missing user with id",t.sUserId);var r=a?f.buildFromJSON(a):undefined;if(!(r.sDisplayName||t.sOtherUserId&&r&&r.sDisplayName))return void console.error("Missing display name for user with id",t.sUserId," and no model was provided");for(var l=0;l<n;l++){var d=0===l?t:t.aGroupPosts.shift();i=this.createPost(d,r,i,s)}if(t.aGroupPosts.length>0){var u=Math.min(t.aGroupPosts.length,this.oOptions.nb_max_group_post);s||(s=t.sId),new p({oOptions:{aPosts:t.aGroupPosts.slice(0,u),sUser:r.sDisplayName,$container:i.$post[0],nb_total_remaining:t.aGroupPosts.length,oListeners:{afterReady:function(e){s!==undefined&&s===o.sGroupToDeployWhenAdded&&e.handleClick(),o.updateAllNodeInfos(i.$post[0].getAttribute("data-pos"))},afterClick:function(e){if(0!==t.aGroupPosts.length){var n=t.aGroupPosts.shift();n.aGroupPosts=t.aGroupPosts,o.appendPost(n,i,u,s),o.updateAllNodeInfos(i.$post[0].getAttribute("data-pos"))}}}}})}s&&o.onResize(i.$post)},findNodePosition:function(e){return this.getNodeInfos().reduce(function(t,i,n){return-1!==t?t:i.node===e?n:-1},-1)},createPost:function(t,i,n,s){var o=this,a=t.sOtherUserId&&o.getUsers()[t.sOtherUserId]?f.buildFromJSON(o.getUsers()[t.sOtherUserId]):undefined;t.sOtherUserId&&!a&&e.error("Missing model with id",t.sOtherUserId,"on post",t),a&&!a.sDisplayName&&(e.error("Model with id",t.sOtherUserId,"is missing sDisplayName",a),a=undefined);var r=t.aOtherUserIds.map(function(i){return o.getUsers()[i]?f.buildFromJSON(o.getUsers()[i]):void e.error("Missing user with id",i,"on post",t)}),l=this.getNodeInfos(),d=l.length;n&&(d=this.findNodePosition(n.$post)+1);var u,c=this.getNextPostPosition(d),p={oOptions:{oPost:t,$resume:n?n.$post:undefined,oUploader:i,aOtherUsers:r,oModel:a,iTopPosition:c.y,iLeftPosition:c.x,mobile_max_width:this.oOptions.mobile_max_width},oTrackers:{tracker_ppv:this.oTrackers.tracker_ppv,tracker_membership:this.oTrackers.tracker_membership},oListeners:{onUnsub:function(e){if(o.oOptions.posts_fadeout_on_unsub){o.getController().oFeedDataContent.setContent(o.getContent().filter(function(e){return e.u!==i.sId})),o.oTempState.aPostNodes=o.oTempState.aPostNodes.filter(function(e){return e.node.data("channel")!==i.sId}),$('div[data-channel="'+i.sId+'"]').fadeOut(300),setTimeout(function(){document.querySelectorAll('div[data-channel="'+i.sId+'"]').forEach(function(e){e.remove()}),o.onResize(undefined,!0)},300);var t=o.getController().oSubscriptionsController;t||(t.removeSubscription(i.sId),o.getState().aCurrentChannelFilters.includes(i.sId)&&(o.getController().changeState("aCurrentChannelFilters",o.getState().aCurrentChannelFilters.filter(function(e){return e!==i.sId})),o.getController().resetContent(),t.resetContent()))}},onReady:function(e){o.oFocusedPostObserver.observe(e.$post[0]),e.oPost.hasVideo()&&o.oFunctions.onVideoAdd(e.$post[0]),s&&e.$post[0].setAttribute("data-group",s),e.oOptions.$resume?(e.oOptions.$resume.after(e.$post[0]),e.$post=$(".post-block[data-post="+e.sPostId+"]")):o.getContainer()[0]&&(e.$post=$(o.getContainer()[0].appendChild(e.$post[0])));var t=e.$post,i={node:t,top:t[0].offsetTop,bottom:t[0].offsetTop+t[0].offsetHeight,left:t[0].offsetLeft,right:t[0].offsetLeft+t[0].offsetWidth};if(n){var a=o.findNodePosition(n.$post)+1;if(-1!==a){o.getNodeInfos().splice(a,0,i),t.attr("data-pos",a);for(var r=a+1;r<o.getNodeInfos().length;r++)o.getNodeInfos()[r].node.attr("data-pos",r)}}else o.getNodeInfos().push(i),t.attr("data-pos",o.getNodeInfos().length-1);o.updateAllNodeInfos(d)},onUserFilter:function(e){o.oListeners.onUserFilter&&o.oListeners.onUserFilter(e)},onLightGalleryOpen:function(){o.oListeners.onLightGalleryOpen&&o.oListeners.onLightGalleryOpen()},onLightGalleryClose:function(){o.oListeners.onLightGalleryClose&&o.oListeners.onLightGalleryClose()},onQuickiesOpen:function(){o.oListeners.onQuickiesOpen&&o.oListeners.onQuickiesOpen()},onQuickiesClose:function(){o.oListeners.onQuickiesClose&&o.oListeners.onQuickiesClose()},onResize:function(e){o.onResize(undefined,e)}},oFunctions:{init_desktop_channel_videos:o.oFunctions.init_desktop_channel_videos}};switch(t.getGenerator()){case h.POST_GENERATOR.VIDEO:u=new _(p);break;case h.POST_GENERATOR.GALLERY:u=new g(p);break;case h.POST_GENERATOR.TEXT:u=new m(p);break;case h.POST_GENERATOR.PLAYLIST:u=new b(p);break;case h.POST_GENERATOR.VIEWS_ACHIEVED:u=new v(p);break;case h.POST_GENERATOR.BANNER_NEW_UPLOADS:u=new y(p);break;case h.POST_GENERATOR.BANNER_NEW_ASSOC:u=new D(p);break;case h.POST_GENERATOR.BANNER_RECENTLY_WATCHED:u=new C(p);break;case h.POST_GENERATOR.BANNER_RECENTLY_WATCHED_ASSOC:u=new w(p);break;default:return void e.error("Invalid post generator",t.getGenerator(),t)}return this.aPostGenerators.push(u),u.init(),u.onResize(),this.oTempState.bVideoContainerMessage&&(this.oTempState.bVideoContainerMessage=!1,this.oTempState.$videoContainerMessage.remove()),this.oTempState.bHasCreatedPosts=!0,u},setLoading:function(e){this.toggleLoadingPosts(e===S.LOADING.PAGE),$("#"+this.oClasses.id_global_feed_content).toggleClass(this.oClasses.loading_feed,e===S.LOADING.FEED)},setNodePosition:function(e,t,i){e.css("top")===t+"px"&&e.css("left")===i+"px"||(e.css("top",t+"px"),e.css("left",i+"px"))},getNextPostPosition:function(e){if(0===e)return{x:0,y:0};var t=this.getController().is2ColsMode()?2:1,i=this.getNodeInfos()[e-1],n=i.bottom;if(t>1&&e>1){var s=this.getNodeInfos()[e-2];n=Math.max(i.bottom,s.bottom)}return{x:e%t>0?i.right:0,y:e%t>0?i.top:n+this.getPostSeparation()}},focusPostById:function(e){var t=this.getContainer()[0].querySelector("[data-post="+e+"]");return!!t&&(window.scrollTo({top:t.offsetTop+window.innerHeight/2,behavior:"instant"}),!0)},tryFocusPreviousPost:function(){this.sPostToFocusWhenAdded&&this.focusPostById(this.sPostToFocusWhenAdded)&&(delete this.sPostToFocusWhenAdded,delete this.sGroupToDeployWhenAdded)},getNbPostsPerPage:function(){var e=this.oOptions.nb_posts_page;return this.getController().is2ColsMode()&&(e*=2),e},toggleLoadingPosts:function(e){this.$loader.remove(),e&&$("#"+this.oClasses.id_global_feed_content).append(this.$loader),$("#"+this.oClasses.id_global_feed_content).toggleClass(this.oClasses.loading_posts,e)},resetContent:function(){this.removeNextPageObservers(),this.oTempState.aPostNodes=[],this.aPostGenerators=[],this.oOptions.$container.empty(),this.oTempState.iMaxFeedHeight=0},getContainer:function(){return this.oOptions.$container},getContainerBounds:function(){if(this.oTempState.oContainerBounds)return this.oTempState.oContainerBounds;var e=this.getContainer()[0].getBoundingClientRect();return this.oTempState.oContainerBounds={top:e.top+window.scrollY,bottom:e.bottom+window.scrollY},this.oTempState.oContainerBounds},getPostSeparation:function(){return window.innerWidth<=this.oOptions.mobile_max_width?this.oOptions.post_separation_mobile:this.oOptions.post_separation_desktop},onResize:function(t,i){if(!this.oTempState.bDisableResize){clearTimeout(this.iOnResizeUpdate),i=void 0!==i&&i,delete this.oTempState.oContainerBounds,delete this.oTempState.iLastScrollLazyUnloaded;var n=this,s=window.innerWidth!==this.oTempState.iLastViewportWidth;(i||s)&&(this.oTempState.iLastViewportWidth=window.innerWidth,this.oTempState.iMaxFeedHeight=0),t=t===undefined?$("body"):$(t),t.find(".post-pictures.post-novideos .fit-image > img").each(function(){n.resizeGalleryImage($(this))}),n.bNeedsApplyAR&&t.find(n.sXVARquery).each(function(){n.applyAspectRatio($(this))}),(i||s)&&this.updateAllNodeInfos(),this.updateFeedHeight(),this.aPostGenerators.forEach(function(e){e.onResize(s)}),clearTimeout(this.iAfterResize);var n=this;this.oTempState.bViewportChanged=this.oTempState.bViewportChanged||s,
this.iAfterResize=setTimeout(function(){var t=n.getState().sCurrentPost;t&&n.oTempState.bViewportChanged&&window.scrollY>0&&(n.updateAllNodeInfos(undefined,!1),e.debug("Focusing post "+t),n.forceShowPost(t),n.focusPostById(t)),delete n.oTempState.bViewportChanged},50)}},initXVAspectRatio:function(){var e=this;e.sXVARquery=".p-frame",e.sXVARquery+=", .p-pics",e.bNeedsApplyAR=!1;try{e.bNeedsApplyAR=!CSS.supports("aspect-ratio: 1/1")}catch(t){e.bNeedsApplyAR=!0}},addNextPageObservers:function(){e.debug("Adding next page observers");var t=$("#"+this.oClasses.id_global_feed_content)[0];if(!t.lastChild)return void e.error("No last child to add next page observers");if(this.isElementAPost(t.lastChild))this.$LastElement=t.lastChild;else{if(!this.isElementAPost(t.lastChild.previousElementSibling))return e.error("Unable to add next page observers"),void this.removeNextPageObservers();this.$LastElement=t.lastChild.previousElementSibling}if(this.$LastElement.silent=!1,this.oLastPostObserver.observe(this.$LastElement),e.info("Added observer on last post",this.$LastElement),this.$ObservedElement=undefined,this.oOptions.nb_posts_before_add_page>1&&this.oOptions.nb_posts_before_add_page<t.children.length){if(this.$ObservedElement=t.children[t.children.length-this.oOptions.nb_posts_before_add_page],!this.isElementAPost(this.$ObservedElement))return;this.$ObservedElement.silent=!0,this.oLastPostObserver.observe(this.$ObservedElement),e.info("Added observer on post",this.$ObservedElement)}},removeNextPageObservers:function(){this.$ObservedElement&&this.isElementAPost(this.$ObservedElement)&&(this.oLastPostObserver.unobserve(this.$ObservedElement),e.info("Removed observer on post",this.$ObservedElement),this.$ObservedElement=undefined),this.$LastElement&&this.isElementAPost(this.$LastElement)&&(this.oLastPostObserver.unobserve(this.$LastElement),e.info("Removed observer on last post",this.$LastElement),this.$LastElement=undefined)},isElementAPost:function(e){return!!e&&("DIV"===e.tagName&&$(e).hasClass("post-block"))},getController:function(){return this.oOptions.oController},getState:function(){return this.getController().getState()},getContent:function(){return this.getController().oFeedDataContent.getContent()},getUsers:function(){return this.getController().oFeedDataContent.getUsers()},displayNextPage:function(t,i){var n=this;return new Promise(function(s,o){e.info("Trying to display the next page");var a=function(){n.removeNextPageObservers(),n.getController().changeState("iCurrentPage",n.getState().iCurrentPage+1,!1),n.setLoading(t),n.onResize();var o=n.getState().iCurrentPage*n.getNbPostsPerPage(),a=o-n.getNbPostsPerPage();if(e.info("Loading page",n.getState().iCurrentPage),i)var r=window.scrollY-(window.scrollY+i.getBoundingClientRect().top);n.displayPosts(a,o,t).then(function(t){n.getState().iLastPageLoad=Date.now(),i&&scrollTo(0,window.scrollY+i.getBoundingClientRect().top+r),n.setLoading(S.LOADING.NONE),n.onResize();var a=n.getController().hasMoreEvents()||o<n.getContent().length;if(a||(e.info("No more events"),n.oTempState.bHasCreatedPosts?$(".feed-main-message.cover-invalid-filters").length||n.appendNoMorePosts():("function"==typeof n.oListeners.emitDisplayNoSubs&&n.oListeners.emitDisplayNoSubs(!0),"function"==typeof n.oListeners.emitDisplayNoSubsCheckedContent&&n.oListeners.emitDisplayNoSubsCheckedContent(!0))),!t)return void s(!1);if(a&&n.addNextPageObservers(),!n.getController().hasMoreEvents())return void s(!0);var l=o+n.oOptions.nb_page_buffer*n.getNbPostsPerPage();n.oOptions.oController.loadAdditionalContent(l).then(function(){s(!0)})["catch"](function(t){s(!1),e.error("Error while loading additional content",t)})})["catch"](function(t){s(!1),e.error("Error while displaying posts",t)})};if(n.oOptions.page_load_cooldown&&n.getState().iLastPageLoad){var r=Date.now()-n.oOptions.page_load_cooldown,l=n.getState().iLastPageLoad-r;if(l>0)return n.oTempState.displayNextPageTimeout?void e.debug("Page load cooldown already in progress, cancel."):(e.debug("Page load cooldown, waiting for "+l+"ms"),void(n.oTempState.displayNextPageTimeout=setTimeout(function(){n.oTempState.displayNextPageTimeout=null,a()},l)))}a()})},updateFeedHeight:function(){if(this.oTempState.bNoSubs)return void($("#"+this.oClasses.id_global_feed_content)[0].style.height="");var t=this.getNodeInfos(),i=0;t.length>0&&(i=t[t.length-1].bottom),this.oTempState.iMaxFeedHeight=i,i+=40,$("#"+this.oClasses.id_global_feed_content).height(i),e.debug("Feed height updated to",i)},getNodeInfos:function(){return this.oTempState.aPostNodes},appendNoMorePosts:function(){!0!==this.getState().bNoMorePosts&&(this.getController().changeState("bNoMorePosts",!0,!1),this.getContainer()[0].appendChild($(i.render(this.oTemplates.no_more_posts,{sNoMorePosts:this.getNoMorePostsMessage()}))[0]),xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds())},getNoMorePostsMessage:function(){return this.getController().hasMaxFilters()?s.__(this.oTranslations.no_more_posts):s.__(this.oTranslations.no_more_posts_filters)},appendInternalError:function(){var e=this,t=$(i.render(this.oTemplates.cover_internal_error,{sInternalError:s.__(this.oTranslations.internal_error),sRetry:s.__(this.oTranslations.retry)}));t.find("input").on("click",function(){e.resetContent()}),this.getContainer().append(t)},setVideosContainerTo:function(e,t){this.setLoading(S.LOADING.NONE),this.getContainer().empty(),this.getContainer().append(e).toggleClass(t,!0),this.oTempState.bVideoContainerMessage=!0,this.oTempState.$videoContainerMessage=e},setVideosContainerToServerMessage:function(e){this.setVideosContainerTo($(i.render(this.oTemplates.cover_server_message,{sServerMessage:e})),"server-message")},setVideosContainerToInvalidFilters:function(){this.setVideosContainerTo($(i.render(this.oTemplates.cover_invalid_filters,{sNoMatchFilters:s.__(this.oTranslations.no_match),sResetFilters:s.__(this.oTranslations.reset_filters)})),this.oClasses.invalid_filters);var e=this;$(".filter-reset-btn > input")[0].addEventListener("click",function(){e.getController().resetFilters(),e.resetContent()})},unsetVideosContainerInvalidFilters:function(){this.$VideosContainerInvalidFilters&&this.$VideosContainerInvalidFilters.remove(),this.getContainer().toggleClass(this.oClasses.invalid_filters,!1)},handleScrollToTopListener:function(){var e=this;window.addEventListener("scroll",function(){window.scrollY>e.oOptions.scroll_to_top_show_y?e.$scrollToTop.toggleClass(e.oClasses.show_scroll_to_top,!0):e.$scrollToTop.toggleClass(e.oClasses.show_scroll_to_top,!1)}),e.$scrollToTop[0].addEventListener("click",function(){scrollTo({behavior:"smooth",top:0})})},forceShowPost:function(e){var t=this.getNodeInfos().find(function(t){return t.node.data("post")===e});if(!t)return!1;this.oTempState.oForcedPostDisplay[e]=Date.now(),this.addPostBackToDOM(t.node)},addPostBackToDOM:function(e){e[0].setAttribute("data-hidden",0);var t=this.getContainer().children(),i=0;for(i=0;i<t.length;i++)if(t[i].getAttribute("data-pos")>e[0].getAttribute("data-pos")){e.insertBefore(t[i]);break}0!==t.length.length&&i!==t.length||this.getContainer().append(e)},findIndicesNearScroll:function(){var e=window.scrollY-this.getContainerBounds().top,t=this.getNodeInfos();if(t.length<=0)return[];var i=Math.floor(t.length/2),n=0,s=t.length-1,o={};do{var a=t[i],r=0;if(a.bottom-e<-this.oOptions.visibility_range?r=1:a.top-e>this.oOptions.visibility_range&&(r=-1),-1===r?s=i:1===r&&(n=i),i=Math.floor(n+(s-n)/2),o[i])break;o[i]=!0}while(0!==r);for(var l=[],d=Math.max(0,i-10);d<=Math.min(t.length-1,i+10);d++)l.push(d);return l},addVisiblePostsNotInIndices:function(e){for(var t=this.getContainer().children(),i=e.reduce(function(e,t){return e[t]=!0,e},{}),n=0;n<t.length;n++){var s=parseInt(t[n].getAttribute("data-pos"));"number"!=typeof s||isNaN(s)||(i[s.toString()]=!0)}return Object.keys(i).map(function(e){return parseInt(e)})},handleLazyUnloading:function(){var e=this.findIndicesNearScroll();e=this.addVisiblePostsNotInIndices(e);for(var t=0;t<e.length;t++){var i=e[t],n=this.getNodeInfos()[i],s=n.node[0],o="1"!==s.getAttribute("data-hidden"),a=n.top+this.getContainerBounds().top-window.scrollY,r=n.bottom+this.getContainerBounds().top-window.scrollY,l=r<-this.oOptions.visibility_range||a>window.innerHeight+this.oOptions.visibility_range;if(l&&o){var d=this.oTempState.oForcedPostDisplay[s.getAttribute("data-post")];if(d){if(Date.now()-d<this.oOptions.post_force_display_time)continue;delete this.oTempState.oForcedPostDisplay[s.getAttribute("data-post")]}s.setAttribute("data-hidden",1),n.node=n.node.detach()}else l||o||this.addPostBackToDOM(n.node)}},updateAllNodeInfos:function(t,i){var n,s,o=this.getNodeInfos(),a=this.getController().is2ColsMode();i=void 0===i||i,t>0&&(n=o[t-1]),t>1&&(s=o[t-2]);for(var r=void 0===t?0:t;r<o.length;r++){var l=o[r],d=l.node[0],u=!i&&"1"===d.getAttribute("data-hidden"),c=0;n&&(c=n.bottom),s&&a&&(c=Math.max(c,s.bottom)),u&&(d.setAttribute("data-hidden",0),this.getContainer().append(d));var f=d.offsetHeight,h=d.offsetWidth;"1"===d.getAttribute("data-hidden")&&i&&t!==r&&(f=l.bottom-l.top,h=l.right-l.left);var p=a&&r%2==1;l.top=p?n.top:c+(0===r?0:this.getPostSeparation()),l.bottom=l.top+f,l.left=p?n.right:0,l.right=l.left+h,u&&(d.setAttribute("data-hidden",1),o[r].node=l.node.detach()),this.setNodePosition(l.node,l.top,l.left),s=n,n=l}this.updateFeedHeight(),e.debug("Updated all nodes info",o)},fitImgToVect:function(t,i,n){var s=t[0].naturalWidth/t[0].naturalHeight,o=i.width/s,a=i.width,r=i.height;o>i.height?a=i.height*s:r=i.width/s,t.css("width",a),t.css("height",r),n&&n.length&&(n.css("width",a),n.css("height",r),e.debug("Resized frame to",a,r,n))},resizeGalleryImage:function(e){var t=this;e.css("visibility","hidden");var i=function(){var i=e.parents(".p-frame"),n=i.height(),s=n;if("1"===window.getComputedStyle(i[0]).getPropertyValue("--fit-img")){var o=i.parents(".p-gallery"),a=o.find(".p-frame-1"),r=o.width()-a.width(),l=o.height();t.fitImgToVect(e,{width:r,height:l},i),s=r}window.innerWidth>=t.oOptions.mobile_max_width?(e.css("max-height",n+"px"),e.css("max-width",s+"px")):(e.css("max-height","unset"),e.css("max-width","unset")),e.css("visibility","")};if(e[0].naturalWidth>0)return void i();e.on("load",i)},applyAspectRatio:function(e){var t=window.getComputedStyle(e[0]).getPropertyValue("--xvaspectratio");if(t&&"unset"!==t){var i=Function("'use strict'; return ("+t+")")().toFixed(4),n=e[0].getBoundingClientRect(),s=(n.width/n.height).toFixed(4);s&&i!==s&&e.css("height",n.width/i)}},toggle2Columns:function(t){void 0===t&&(this.getController().oFeedFilters||e.error("No feed filters to determine the 2 columns state"),t=this.getController().is2ColsOptionEnabled()),$("#"+this.oClasses.id_global_feed_content).toggleClass("cols-2",t),window.dispatchEvent(new Event("resize"))},fnHandleNoContent:function(){this.oTempState.bDisabledFeed||(this.setLoading(S.LOADING.PAGE),0===this.getContent().length?this.setVideosContainerToInvalidFilters():(e.info("No content received after "+this.oOptions.nb_empty_pages_before_crash+" requests"),this.appendNoMorePosts()),"function"==typeof this.oListeners.onNoContent&&this.oListeners.onNoContent())},toggleFeedSizeLocked:function(e){e===undefined&&(e=!this.oTempState.bDisableResize),this.oTempState.bDisableResize=e}},S}),define("skins/common/global_feed/feed_controller/feed_state",["static/log"],function(e){var t=function(){Object.assign(this,t.DEFAULT_STATE)};return t.DEFAULT_STATE={iCurrentPage:0,sCurrentPost:undefined,sCurrentGroup:undefined,aCurrentChannelFilters:[],bDisplayingTrimmedPrompt:!1,iDisplayOptions:0,iLastPageLoad:0,bDisplayPremium:!1,bNoMorePosts:!1,iNbAccountsAdded:undefined,iNbAccountsRejected:undefined},t.buildFromIndexedDb=function(i){var n=(new t).setCurrentPage(i.State.iCurrentPage).setCurrentPost(i.State.sCurrentPost).setCurrentGroup(i.State.sCurrentGroup).setCurrentChannelFilters(i.State.aCurrentChannelFilters).setDisplayingTrimmedPrompt(i.State.bDisplayingTrimmedPrompt).setDisplayOptions(i.State.iDisplayOptions).setLastPageLoad(i.State.iLastPageLoad).setNbAccountsAdded(i.State.iNbAccountsAdded).setNbAccountsRejected(i.State.iNbAccountsRejected).setDisplayPremium(i.State.bDisplayPremium).setNoMorePosts(i.State.bNoMorePosts);return e.debug("FeedState.buildFromIndexedDb: built from indexed db",n),n},t.prototype={getSetterNameFromKey:function(e){return"set"+e.charAt(1).toUpperCase()+e.slice(2)},setFromKey:function(t,i){var n=this.getSetterNameFromKey(t);if("function"!=typeof this[n])return void e.error("FeedState.setFromKey: setter function not found for key",t);this[n](i)},setCurrentPage:function(e){return this.iCurrentPage=e,this},getCurrentPage:function(){return this.iCurrentPage},setCurrentPost:function(e){return this.sCurrentPost=e,this},getCurrentPost:function(){return this.sCurrentPost},setCurrentGroup:function(e){return this.sCurrentGroup=e,this},getCurrentGroup:function(){return this.sCurrentGroup},setCurrentChannelFilters:function(e){return this.aCurrentChannelFilters=e,this},getCurrentChannelFilters:function(){return this.aCurrentChannelFilters},setDisplayingTrimmedPrompt:function(e){return this.bDisplayingTrimmedPrompt=e,this},getDisplayingTrimmedPrompt:function(){return this.bDisplayingTrimmedPrompt},setDisplayOptions:function(e){return this.iDisplayOptions=e,this},getDisplayOptions:function(){return this.iDisplayOptions},setLastPageLoad:function(e){return this.iLastPageLoad=e,this},getLastPageLoad:function(){return this.iLastPageLoad},setNbAccountsAdded:function(e){return this.iNbAccountsAdded=e,this},getNbAccountsAdded:function(){return this.iNbAccountsAdded},setNbAccountsRejected:function(e){return this.iNbAccountsRejected=e,this},getNbAccountsRejected:function(){return this.iNbAccountsRejected},setDisplayPremium:function(e){return this.bDisplayPremium=e,this},getDisplayPremium:function(){return this.bDisplayPremium},setNoMorePosts:function(e){return this.bNoMorePosts=e,this},getNoMorePosts:function(){return this.bNoMorePosts},getDataForIndexedDb:function(){return[{key:"State",value:this}]},getDataForSharedIndexedDb:function(){return[{key:"State",value:{iDisplayOptions:this.iDisplayOptions}}]},isFeedFilteringUser:function(){return this.aCurrentChannelFilters&&this.aCurrentChannelFilters.length>0}},t}),define("skins/common/global_feed/feed_data/feed_data_content",["static/log","config/main"],function(e,t){var i=function(){this.resetContent()};return i.buildFromJSON=function(e){return(new i).setFeedSettings(e.metadata.feedSettings).setHasMoreEvents(e.metadata.hasMoreEvents).setDisplayPremium(e.metadata.displayPremium).setLastEventTime(e.metadata.lastEventTime).setContent(e.data.content).setUsers(e.data.users)},i.buildFromIndexedDb=function(e){return(new i).setFeedSettings(e.Metadata.feedSettings).setHasMoreEvents(e.Metadata.hasMoreEvents).setDisplayPremium(e.Metadata.displayPremium).setLastEventTime(e.Metadata.lastEventTime).setContent(e.Content).setUsers(e.Users)},i.concatFeedDataContent=function(e,t){var n=(new i).setFeedSettings(t.feedSettings).setHasMoreEvents(t.hasMoreEvents).setLastEventTime(t.lastEventTime).setDisplayPremium(t.displayPremium).setContent(JSON.parse(JSON.stringify(e.getContent()))).setUsers(JSON.parse(JSON.stringify(e.getUsers())));return n.setContent(n.getContent().concat(JSON.parse(JSON.stringify(t.getContent())))).setUsers(Object.assign(n.getUsers(),JSON.parse(JSON.stringify(t.getUsers())))),n},i.mergeFeedDataContent=function(e,t){var n=i.concatFeedDataContent(e,t);e.setFeedSettings(n.getFeedSettings()).setHasMoreEvents(n.getHasMoreEvents()).setLastEventTime(n.getLastEventTime()).setDisplayPremium(n.getDisplayPremium()).setContent(n.getContent()).setUsers(n.getUsers())},i.prototype={resetContent:function(){this.feedSettings=t.data.feedSettings?JSON.parse(JSON.stringify(t.data.feedSettings)):{},this.users={},this.content=[],delete this.hasMoreEvents,delete this.lastEventTime,delete this.displayPremium},setFeedSettings:function(e){return this.feedSettings=e,this},setHasMoreEvents:function(e){return this.hasMoreEvents=e,this},setDisplayPremium:function(e){return this.displayPremium=e,this},setLastEventTime:function(e){return this.lastEventTime=e,this},setContent:function(e){return this.content=e,this},setUsers:function(e){return this.users=e,this},getFeedSettings:function(){return this.feedSettings},getHasMoreEvents:function(){return this.hasMoreEvents},getDisplayPremium:function(){return this.displayPremium},getLastEventTime:function(){return this.lastEventTime},getContent:function(){return this.content},getUsers:function(){return this.users},getDataForIndexedDb:function(){return[{key:"Content",value:this.getContent()},{key:"Users",value:this.getUsers()},{key:"Metadata",value:{feedSettings:this.getFeedSettings(),hasMoreEvents:this.getHasMoreEvents(),displayPremium:this.getDisplayPremium(),lastEventTime:this.getLastEventTime()}}]}},i}),define("skins/common/global_feed/feed_data/feed_data_cache",["static/log","static/idb_storage","lib/tools"],function(e,t,i){var n=function(e){this.iFirstSaveTimestamp=undefined,this.oCache={},i.initParams(this,e,n.DEFAULT_OPTIONS),this.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.NONE};return n.INDEXED_DB_INIT_STATUS={FAILED:-1,NONE:0,CREATING:1,CREATED:2},n.DEFAULT_OPTIONS={oOptions:{indexed_db_key:undefined,shared_indexed_db_key:"global-feed-shared",indexed_db_store_create_timeout:1e3}},n.GET_DEFAULT_OPTIONS=function(){return n.DEFAULT_OPTIONS},n.prototype={init:function(){if(!this.oOptions.indexed_db_key)return void e.error("No indexed db key provided")},getCache:function(){return this.oCache},get:function(e){return this.oCache[e]},firstIndexedDbSetup:function(i){var s=this;if(e.debug("Global feed -- firstIndexedDbSetup"),!xv.indexedDb||!xv.indexedDb.getDbIsSupported())return this.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.FAILED,!1;this.firstIndexedDbSetupShared(),this.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.CREATING,t.getOrCreateStore(this.oOptions.indexed_db_key,!1,[{index:"data",unique:!0,multiEntry:!0}]).then(function(){e.debug("Global feed store created"),s.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.CREATED,i()})["catch"](function(){s.iIndexedDbStatus>=n.INDEXED_DB_INIT_STATUS.CREATED||(e.error("Error while trying to create store in indexed db"),s.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.FAILED,i())})},firstIndexedDbSetupShared:function(){if(!xv.indexedDb||!xv.indexedDb.getDbIsSupported())return!1;var t={store_name:this.oOptions.shared_indexed_db_key,callback_store_created:function(){e.debug("Shared feed store created")}};xv.indexedDb.getStoreExist(t)||(t.store_index=[{index:"data",unique:!0,multiEntry:!0}],xv.indexedDb.storeCreate(t))},chainIndexedDbGet:function(e,t){this.chainIndexedDbGetRec(e,t,{})},chainIndexedDbGetRec:function(t,i,n){var s=this,o=this.oOptions.indexed_db_key,a=t[0];a.startsWith("Shared_")&&(o=this.oOptions.shared_indexed_db_key,a=a.replace("Shared_","")),n=void 0===n?{}:n,xv.indexedDb.get(a,o,!0,!0).then(function(o){if(o&&o.target&&o.target.result)if(e.info("INDEXED DB GET",a,o.target.result),"undefined"==typeof n[a])n[a]=o.target.result;else for(var r=Object.entries(o.target.result),l=0;l<r.length;l++){var d=r[l];n[a][d[0]]=d[1]}else e.warn("Failed to get data from indexed db",a,o);t.length>1?s.chainIndexedDbGetRec(t.slice(1),i,n):i(n)})["catch"](function(t){e.debug('Failed to get data from indexed db "'+a+'"\n',t),i(n)})},saveToDb:function(e,t,i){var n=this.oOptions.indexed_db_key;i&&(n=this.oOptions.shared_indexed_db_key),t.data=e,this.doWhenDbReady(function(){xv.indexedDb.remove(e,n),xv.indexedDb.set(t,n)})},deleteFromDb:function(e,t){var i=this.oOptions.indexed_db_key;t&&(i=this.oOptions.shared_indexed_db_key),this.doWhenDbReady(function(){xv.indexedDb.remove(e,i)})},doWhenDbReady:function(t,i){if(this.iIndexedDbStatus===n.INDEXED_DB_INIT_STATUS.FAILED)return e.error("Indexed db failed to initialize, not performing action."),-1;try{return this.iIndexedDbStatus<n.INDEXED_DB_INIT_STATUS.CREATED?void this.handleDbDelay(t,i):void t()}catch(s){return e.error(s),-1}},handleDbDelay:function(t,i){var s=this;if(i||e.debug("Delaying action to idb while store is creating."),this.iFirstSaveTimestamp){if(this.iFirstSaveTimestamp+this.oOptions.indexed_db_store_create_timeout<Date.now())return void e.error("Timeout while saving to indexed db. No response from store creation.")}else this.iFirstSaveTimestamp=Date.now();xv.indexedDb.getStoreExist({store_name:this.oOptions.indexed_db_key})&&(this.iIndexedDbStatus=n.INDEXED_DB_INIT_STATUS.CREATED),setTimeout(function(){s.doWhenDbReady(t,!0)},20)}},n}),define("skins/common/global_feed/feed_data/feed_data_service",["static/log","lib/tools","skins/common/global_feed/feed_data/feed_data_content"],function(e,t,i){var n=function(e){e=void 0===e?{}:e,t.initParams(this,e,n.GET_DEFAULT_OPTIONS())};return n.DEFAULT_OPTIONS={oOptions:{FeedDataContent:i},oTempState:{oAlreadyFetchedPosts:{}}},n.GET_DEFAULT_OPTIONS=function(){return n.DEFAULT_OPTIONS},n.prototype={getContent:function(t){if(!t.oFeedSettings)return void e.error("FeedDataService.getContent: missing feed settings");var i=this,n=this.getUrl(t),s=this.getPostData(t);return new Promise(function(o,a){if(i.oCurrentRequest)return void setTimeout(function(){e.warn("Request already in progress, retrying..."),i.getContent(t).then(o)["catch"](a)},500);i.oCurrentRequest=$.post({url:n,data:s,complete:function(){delete i.oCurrentRequest},success:function(t){t.result||(e.error("Error while getting global feed content",t),a(t)),e.debug("FeedDataService.getContent success: ",t),t=i.filterAlreadyFetchedPosts(t),o(i.oOptions.FeedDataContent.buildFromJSON(t))},error:function(t){if(200===t.status)try{var n=JSON.parse(t.responseText.substring(t.responseText.indexOf("{")));if(n)return e.warn("PHP warning in response, ignoring them"),e.debug(n),void o(i.oOptions.FeedDataContent.buildFromJSON(n))}catch(s){}"abort"!==t.statusText&&e.error("Error while getting global feed content",t),a(t)}})})},getPostData:function(e){var t={feedSettings:e.oFeedSettings};return e.sIds&&(t.ids=e.sIds),t},getUrl:function(e){var t="/my-feed/content";return e.sChannelFilter&&(t="/my-feed/user-content/"+e.sChannelFilter),"number"==typeof e.iTimestamp&&(t+="/"+e.iTimestamp),t},resetCurrentCall:function(){this.oCurrentRequest&&"function"==typeof this.oCurrentRequest.abort&&(e.debug("Aborting current request"),this.oCurrentRequest.abort(),delete this.oCurrentRequest)},filterAlreadyFetchedPosts:function(t){var i=this;if(!t.data)return t;if(!t.data.content)return t;for(var n=[],s=function(t){var t=JSON.parse(JSON.stringify(t));if(!i.oTempState.oAlreadyFetchedPosts[t.i])return n.push(t),void(i.oTempState.oAlreadyFetchedPosts[t.i]=!0);if(e.debug("filterAlreadyFetchedPosts - Post already fetched --- skipping",t.i),t.g&&t.g.length>0){var o=t.g,a=o.shift();a.g=o,e.debug("filterAlreadyFetchedPosts - Post has a group --- adding next post",a.i),s(a)}},o=0;o<t.data.content.length;o++)s(t.data.content[o]);return t.data.content=n,t}},n}),define("text!skins/common/global_feed/simple_dropdown_menu.mustache",[],function(){return'<div class="simple-dropdown global-feed-filters">\n\t{{#filters}}\n\n\t\t\t<div class="niv1{{#list.length}} with-niv2{{/list.length}} {{{ sClass }}}">\n\t\t\t\t<span class="show-niv2{{#is_reset}} is-reset{{/is_reset}}{{#is_button}} is-button{{/is_button}}">\n\t\t\t\t\t<span class="label" data-filter="{{{ filter }}}">{{#forced_label}}{{{ forced_label }}}{{/forced_label}}{{^forced_label}}{{#list}}{{#active}}{{#label}}{{{ label }}}{{/label}}{{^label}}{{{ name }}}{{/label}}{{/active}}{{/list}}{{/forced_label}}</span>\n\t\t\t\t\t{{#is_list}}<span class="icon-f icf-caret-down"></span>{{/is_list}}\n\t\t\t\t</span>\n\t\t\t\t{{#list.length}}\n\t\t\t\t\t<div class="niv2 global-feed-filters">\n\t\t\t\t\t\t<div class="uls">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{{#list}}\n\t\t\t\t\t\t\t\t\t<li><a href="{{{ href }}}"{{#active}} class="current"{{/active}} data-filter="{{{ filter }}}" data-value="{{{ value }}}">{{{ name }}}</a></li>\n\t\t\t\t\t\t\t\t{{/list}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{{/list.length}}\n\t\t\t</div>\n\n\t{{/filters}}\n</div>'}),define("skins/common/global_feed/feed_filters/feed_filters",["static/log","config/main","mustache","lib/tools","lib/i18n!front","skins/common/mozaique/simple_dropdown","text!skins/common/global_feed/simple_dropdown_menu.mustache"],function(e,t,i,n,s,o,a){var r=function(e){n.initParams(this,e,r.DEFAULT_OPTIONS)};return r.DEFAULT_OPTIONS={oOptions:{$container:undefined,oController:undefined,dropdown_delay_ms:1500},oTemplates:{simple_dropdown:a},oClasses:{hide_filter:"hide-filter",dropdown_error:"p-dropdown-error",popup_error:"p-popup-error"},oTranslations:{invalid_selection:"form.required_selection",all_content:"misc.all_content",no_content:"global_feed.no_content_selected",videos:"misc.videos",photos:"misc.photos",text:"misc.text",free:"misc.free",uploaded_by:"videos.uploaded_by",regular_uploaders:"global_feed.regular_uploaders",channels:"profile.channels",models:"profile.models",reset_filters:"search.reset_filters",reset_sub_filter:"search.reset_sub_filter",display_options:"global_feed.display_options"},oIcons:{reset_filters_button:"icf-close-thin"},oFilters:{contentType:{name:"display_content",option_key:"contentType",non_zero:!0,"default":7,"enum":{0:{id:"displayVideos",translation:"misc.videos",weight:1},1:{id:"displayPhotos",translation:"misc.photos",weight:2},2:{id:"displayTextOnly",translation:"misc.text",weight:4}},is_list:!0},showFreePremium:{name:"display_showfree",option_key:"showFreePremium",non_zero:!0,"default":15,"enum":{0:{id:"displayFree",translation:"misc.free",weight:1},1:{id:"displayRed",label:"RED",weights:[2,4,8],weight_mode:"OR"}},is_list:!0},displayOptions:{name:"display_options",option_key:"displayOptions",state_key:"iDisplayOptions","default":0,"enum":{0:{id:"displayTwoColumn",translation:"global_feed.two_column",weight:1,onEnable:function(){this.getContent().toggle2Columns(!0)},onDisable:function(){this.getContent().toggle2Columns(!1)}}},is_list:!0,resettable:!1},resetSubFilter:{name:"reset_sub_filter",sClass:"reset-sub-filter",sActionSelector:".reset-sub-filter",fnAction:function(){this.resetSubscriptionsFilter(),this.updateFeedSettings(this.oFeedSettings),this.resetContent()},is_reset:!0,is_list:!1},reset:{name:"reset",is_reset:!0,is_list:!1}}},r.GET_DEFAULT_OPTIONS=function(){return r.DEFAULT_OPTIONS},r.prototype={init:function(){var i=this;this.oSimpleDropdown=new o,this.oFiltersLabels=[],!1===t.data.feedDisplayPremium&&delete this.oFilters.showFreePremium,this.oEnumFilters=this.filterEnumFilters(this.oFilters),this.oDisplaySettingsOptions=Object.values(this.oEnumFilters).reduce(function(e,t){return e[t.option_key]=new n.bitwise_enum(Object.values(t["enum"]).reduce(function(e,t){return t.weight?e.push(t.id):t.weights&&t.weights.forEach(function(i){e.push(t.id+"_"+i)}),e},[]),t["default"]),e[t.option_key].non_zero=t.non_zero,e},{}),t.data.feedSettings||e.error("Missing feed settings data, please set manually"),this.oDefaultFeedSettings=this.getDefaultFeedSettings(!1),this.oFeedSettings=Object.values(this.oEnumFilters).reduce(function(i,n){return t.data.feedSettings[n.option_key]?i[n.option_key]=t.data.feedSettings[n.option_key]:n.state_key||e.error('Undefined option key in feed settings data "'+n.option_key+'"'),i},{}),this.getController().addStateChangeListener("bDisplayPremium",function(e,t){$(".label[data-filter=display_showfree]").parent().parent().toggleClass(i.oClasses.hide_filter,!t)}),this.oFeedSettings[this.oFilters.displayOptions.option_key]=this.getState().getDisplayOptions(),this.appendFilters(),this.initVideoFilters(),this.updateFeedSettings(this.oFeedSettings,!1)},getController:function(){return this.oOptions.oController},getState:function(){return this.getController().getState()},getContent:function(){return this.getController().getContent()},appendFilters:function(){this.oOptions.$container.html(this.renderFilters())},filterEnumFilters:function(e){return Object.values(e).reduce(function(e,t){return t["enum"]&&(e[t.option_key]=t),e},{})},removeEnumFilter:function(e,i){var n=Object.entries(this.oFilters[e]["enum"]).find(function(e){return e[1].id===i});this.oFilters[e]["default"]&=~n[1].weight,delete this.oFilters[e]["enum"][n[0]],t.data.feedSettings&&(t.data.feedSettings[e]&=~n[1].weight)},canResetFeedSettings:function(){for(var e=Object.keys(this.oFeedSettings),t=0;t<e.length;t++){var i=e[t];if(!1!==this.oEnumFilters[i].resettable&&this.oFeedSettings[i]!==this.oDefaultFeedSettings[i])return!0}return!1},getDefaultFeedSettings:function(e,t){var i=this;return Object.values(this.oEnumFilters).reduce(function(n,s){return n[s.option_key]=s["default"],(e||t&&!1===s.resettable)&&"undefined"!=typeof s.state_key&&"undefined"!=typeof i.getState()[s.state_key]&&(n[s.option_key]=i.getState()[s.state_key]),n},{})},resetSubscriptionsFilter:function(){this.getController().changeState("aCurrentChannelFilters",[]),this.getController().oSubscriptionsController&&this.getController().oSubscriptionsController.resetContent()},applyDropdownError:function(e){e.toggleClass(this.oClasses.popup_error,!0),e[0].appendChild($('<div class="'+this.oClasses.dropdown_error+'">'+s.__(this.oTranslations.invalid_selection)+"</div>")[0])},removeDropdownError:function(e){e.toggleClass(this.oClasses.popup_error,!1);var t=e[0].querySelector("."+this.oClasses.dropdown_error);t&&t.remove()},getFeedSettings:function(){var e={};return this.oDisplaySettingsOptions.contentType&&(e.contentType=this.oDisplaySettingsOptions.contentType.getValue()),this.oDisplaySettingsOptions.showFreePremium&&(e.showFreePremium=this.oDisplaySettingsOptions.showFreePremium.getValue()),e},getDisplayOptions:function(){return this.oDisplaySettingsOptions.displayOptions.getValue()},isFeedSettingsDefault:function(){for(var e=Object.keys(this.oFeedSettings),t=0;t<e.length;t++){var i=e[t];if(this.oFeedSettings[i]!==this.oDefaultFeedSettings[i])return!1}return!0},isFeedSettingsMax:function(){for(var e=Object.keys(this.oFeedSettings),t=0;t<e.length;t++){var i=e[t];if("displayOptions"!==i){if(this.oFeedSettings[i]!==this.oDisplaySettingsOptions[i].getMaxValue())return!1}}return!0},getUpdatedFilterLabel:function(e){var t=this,i=e.param.name;if(this.oFilters.contentType&&this.oFilters.contentType.name===i){var n=this.oDisplaySettingsOptions.contentType;return 0===n.getValue()?s.__(this.oTranslations.no_content):n.getValue()===n.getMaxValue()?s.__(this.oTranslations.all_content):Object.values(e.param["enum"]).filter(function(e){return n.isElementOn(e.weight)}).map(function(e){return t.getEnumLabel(e)}).join(" / ")}return this.oFilters.showFreePremium&&this.oFilters.showFreePremium.name===i?'<span class="free">'+this.getEnumLabel(Object.values(e.param["enum"])[0])+'</span><span class="sep">/</span><span class="icon-f icf-white-fill icf-ticket-red"></span>':this.oFilters.displayOptions&&this.oFilters.displayOptions.name===i?s.__(this.oTranslations.display_options):"reset_sub_filter"===i?'<span class="icon-f '+this.oIcons.reset_filters_button+'"></span> '+s.__(this.oTranslations.reset_sub_filter):"reset"===i?'<span class="icon-f '+this.oIcons.reset_filters_button+'"></span> '+s.__(this.oTranslations.reset_filters):undefined},updateFilterLabel:function(t){var i=this.getUpdatedFilterLabel(t),n=$("span[data-filter="+t.param.name+"]"),s=Object.values(t.param["enum"]),o=t.param.name;if(this.oFilters.contentType&&this.oFilters.contentType.name===o)n[0].innerHTML=i,n.toggleClass("active",0===this.oDisplaySettingsOptions.contentType.getValue());else if(this.oFilters.showFreePremium&&this.oFilters.showFreePremium.name===o){var a=s.find(function(e){return"displayRed"===e.id}),r=s.find(function(e){return"displayFree"===e.id});if(!a||!r)return void e.error("Missing filter options FREE and RED")
;var l=this.oDisplaySettingsOptions.showFreePremium.isAnyElementOn(this.getEnumValue(r)),d=this.oDisplaySettingsOptions.showFreePremium.isAnyElementOn(this.getEnumValue(a));e.info("RED",d,a),e.info("FREE",l,r),n.find(".free").toggleClass("active",l),n.find(".icf-ticket-red").toggleClass("active",d)}},isEnumActive:function(e,t){return t.weight?this.oDisplaySettingsOptions[e.option_key].isElementOn(t.weight):!!t.weights&&this.testEnumWeights(e,t)},toggleEnumValue:function(t,i,n){var s=this.oDisplaySettingsOptions[t.param.option_key],o=!s.isAnyElementOn(n);return i.weight?s.toggleElement(n,o):i.weights&&i.weights.forEach(function(e){s.toggleElement(e,o)}),this.getController().oFeedDataContent?this.getController().oFeedDataContent.feedSettings=this.getFeedSettings():e.error("No feed data content to update feed settings"),!1},onEnumUpdate:function(e){var t=this;Object.values(e["enum"]).forEach(function(i){"function"==typeof i.onEnable&&t.isEnumActive(e,i)&&i.onEnable.call(t),"function"!=typeof i.onDisable||t.isEnumActive(e,i)||i.onDisable.call(t)})},reduceTotal:function(e){return e.reduce(function(e,t){return e+t},0)},getEnumValues:function(e){return Object.values(e).map(function(e){return e.id})},getEnumValue:function(e){return e.weight?e.weight:e.weights?this.reduceTotal(e.weights):0},getEnumLabel:function(e){return e.label?e.label:e.translation?(e.label=s.__(e.translation),e.label):""},testEnumWeights:function(e,t){var i=this;return t.weights.reduce(function(n,s){var o=i.oDisplaySettingsOptions[e.option_key].isElementOn(s);return"AND"===t.weight_mode?n&&o:n||o},!1)},getFilterEnumList:function(e){var t=this;return e["enum"]?Object.values(e["enum"]).reduce(function(i,n){var s=e.name+"-"+n.id,o=t.isEnumActive(e,n),a=t.getEnumLabel(n);return i.push({name:t.getFilterToggleHTML(o)+a,text:a,filter:e.name,value:t.getEnumValue(n),id:n.id,href:"#"+s,"class":s,active:o}),i},[]):undefined},getFilterFromParam:function(e){var t=this.getFilterEnumList(e),i={param:e,filter:e.name};t&&t.length>0&&(i.list=t);var n=this.getUpdatedFilterLabel(i);return n&&(i.forced_label=n),e.is_reset&&(i.is_reset=!0),i.is_reset=e.is_reset,i.is_list=e.is_list,i.is_button=e.is_button,i.sActionSelector=e.sActionSelector,i.fnAction=e.fnAction,i.sClass=e.sClass,i},renderFilters:function(){var e=this;return e.oPageFilters={},Object.values(e.oFilters).map(function(t){var i=e.getFilterFromParam(t);e.oPageFilters[t.name]=i}),i.render(e.oTemplates.simple_dropdown,{filters:Object.values(e.oPageFilters)})},getFilterToggleHTML:function(e){return'<span class="checkbox toggle no-label w-28"><input type="checkbox"'+(e?' checked="checked"':"")+"><label></label></span> "},initVideoFilters:function(){this.$Filters=this.oOptions.$container.find(".simple-dropdown .show-niv2 .label"),this.$FiltersLinks=this.oOptions.$container.find(".simple-dropdown a");var e=this.getFilterSelectLabel("reset"),t=this;this.$FiltersLinks.on("click",function(e){e.preventDefault(),t.filterLinkClick($(this))}),e.parents(".show-niv2").on("click",function(){t.resetFilters(),t.resetSubscriptionsFilter(),t.resetContent()}).addClass("init-ok"),Object.values(this.oPageFilters).map(function(e){"function"==typeof e.fnAction&&$(e.sActionSelector).on("click",function(){e.fnAction.call(t)})}),this.oSimpleDropdown.init(this.oOptions.$container)},resetContent:function(){this.getController().resetContent()},updateFeedSettings:function(e,t){var i=this;this.oFeedSettings=e?Object.assign(this.oFeedSettings,e):this.getDefaultFeedSettings(t,!0),Object.keys(this.oFeedSettings).forEach(function(e){i.oDisplaySettingsOptions[e]&&i.oDisplaySettingsOptions[e].setWithValue(i.oFeedSettings[e])}),Object.values(i.oFilters).forEach(function(e){e["enum"]&&i.updateFilterSelect(e.name,undefined)})},resetFilters:function(){this.isFeedSettingsDefault()||this.updateFeedSettings(undefined,!1)},getFilterSelectLabel:function(e){return"undefined"==typeof this.oFiltersLabels["f-"+e]&&(this.oFiltersLabels["f-"+e]=this.$Filters.filter("[data-filter="+e+"]")),this.oFiltersLabels["f-"+e]},hasFeedSettingZero:function(){return Object.values(this.oDisplaySettingsOptions).some(function(e){return e.non_zero&&0===e.getValue()})},filterLinkClick:function(e){var t=this,i=e.data("filter"),n=e.data("value"),s=e.parents(".global-feed-filters").parent();this.updateFilterSelect(i,n),this.getController().oFeedDataService.resetCurrentCall(),this.oRefreshTimeout&&clearTimeout(this.oRefreshTimeout),t.getController().setLoadingPage(),t.removeDropdownError(s),this.oRefreshTimeout=setTimeout(function(){if(t.hasFeedSettingZero())return t.getContent().setVideosContainerToInvalidFilters(),void t.applyDropdownError(s);"display_uploader"===i&&t.resetSubscriptionsFilter(),t.resetContent(),t.oSimpleDropdown.close_all()},this.oOptions.dropdown_delay_ms)},updateFilterEnumDisplay:function(e){var t=this;Object.values(e.param["enum"]).forEach(function(i){var n=t.getEnumValue(i);t.$FiltersLinks.filter("[data-filter="+e.param.name+"][data-value="+n+"]").find("input").prop("checked",t.isEnumActive(e.param,i))})},updateFilterEnum:function(t,i){var n=this;if(this.onEnumUpdate(t.param),i&&t.param["enum"]){var s=Object.values(t.param["enum"]).find(function(e){return n.getEnumValue(e)===i});if(s){n.toggleEnumValue(t,s,i);var o=n.oDisplaySettingsOptions[t.param.option_key].getValue();"undefined"!=typeof t.param.state_key&&n.getController().changeState(t.param.state_key,o),n.oFeedSettings[t.param.option_key]=o,e.info(t,s,i)}}},updateFilterSelect:function(t,i){e.info("updateFilterSelect: ",t,i);var n=this.oPageFilters[t];n&&(this.updateFilterEnum(n,i),this.updateFilterEnumDisplay(n),this.updateFilterLabel(n),$("[data-filter=reset]").toggle(this.canResetFeedSettings()),$(".reset-sub-filter").toggle(this.getState().isFeedFilteringUser()))},checkDisplayOptions:function(){var e=!1,t=$('.global-feed-filters [data-filter="display_options"]').parents(".niv1.with-niv2"),i=t.find('[href="#display_options-displayTwoColumn"]');window.innerWidth<this.getController().oOptions.minimum_width_for_2_columns?i.toggle(!1):(i.toggle(!0),e=!0),e?t.toggle(!0):t.toggle(!1)}},r}),define("lib/helpers/scroll_buttons",["lib/tools"],function(e){var t={oOptions:{$container:undefined,$scrollContainer:undefined,iAnimationTimeMs:500,fnGetPageSize:function(e){return Math.floor(e.oOptions.$container.clientWidth-2*parseInt(e.oStyles.iButtonAreaWidth+"px"))},iCheckButtonsHideIntervalMs:1e3},oStyles:{iButtonAreaWidth:40,iButtonAreaHeight:undefined,fButtonAreaHeightPercent:.68,sLeftIcon:"icf-angle-double-left",sRightIcon:"icf-angle-double-right",iSideFadeWidth:15},oListeners:{onClick:undefined}},i=function(i){e.initParams(this,i,t);var n=this.checkParams();if(n)return void console.error("Missing "+n+" in xScrollButtons");this.oOptions.$scrollContainer||(this.oOptions.$scrollContainer=this.oOptions.$container),this.init()};return i.prototype={checkParams:function(){for(var e=this,t=["$container"],i=0;i<t.length;i++){var n=t[i];if(!e.oOptions[n])return n}},init:function(){var e=this;this.insertButtons(),setInterval(function(){e.checkButtonsHide()},this.oOptions.iCheckButtonsHideIntervalMs)},getPagesInfo:function(){return{iNbPages:Math.ceil(this.iScrollWidth/this.iPageSize)-1,iCurrentPage:Math.floor($(this.oOptions.$scrollContainer).scrollLeft()/this.iPageSize)+1,iEventPage:this.iEventPosition?Math.floor(this.iEventPosition/this.iPageSize)+1:undefined}},updateMeasures:function(){this.iContainerWidth=this.oOptions.$container.clientWidth,this.iContainerHeight=this.oOptions.$container.clientHeight,this.iScrollWidth=this.oOptions.$scrollContainer.scrollWidth,this.iScrollHeight=this.oOptions.$scrollContainer.scrollHeight,this.sButtonsHeight=this.oStyles.iButtonAreaHeight!==undefined?this.oStyles.iButtonAreaHeight+"px":Math.floor(this.iContainerHeight*this.oStyles.fButtonAreaHeightPercent)+"px",this.iPageSize=this.oOptions.fnGetPageSize(this)},updateStyles:function(){this.$leftButton.css({width:this.oStyles.iButtonAreaWidth+"px",height:this.sButtonsHeight}),this.$rightButton.css({width:this.oStyles.iButtonAreaWidth+"px",height:this.sButtonsHeight}),this.$leftFade.css({width:this.oStyles.iSideFadeWidth+"px",height:this.iScrollHeight}),this.$rightFade.css({width:this.oStyles.iSideFadeWidth+"px",height:this.iScrollHeight})},insertButtons:function(){var e=this;this.$leftButton=$('<div class="xscroll-buttons xscroll-buttons-left"></div>'),this.$rightButton=$('<div class="xscroll-buttons xscroll-buttons-right"></div>'),this.$leftButton.append($('<span class="icon-f '+this.oStyles.sLeftIcon+'"></span>')),this.$rightButton.append($('<span class="icon-f '+this.oStyles.sRightIcon+'"></span>')),this.$leftFade=$('<div class="xscroll-buttons-dim xscroll-buttons-dim-left"></div>'),this.$rightFade=$('<div class="xscroll-buttons-dim xscroll-buttons-dim-right"></div>'),this.updateMeasures(),this.updateStyles(),this.$leftButton[0].addEventListener("click",function(){e.handleButtonClick(!0)}),this.$rightButton[0].addEventListener("click",function(){e.handleButtonClick(!1)}),$(this.oOptions.$container).append(this.$leftButton),$(this.oOptions.$container).append(this.$rightButton),$(this.oOptions.$container).append(this.$leftFade),$(this.oOptions.$container).append(this.$rightFade)},handleButtonClick:function(e){this.updateMeasures();var t=(e?"-":"+")+"="+this.iPageSize;this.iEventPosition=$(this.oOptions.$scrollContainer).scrollLeft()+this.iPageSize,$(this.oOptions.$scrollContainer).stop(!1,!0).animate({scrollLeft:t},this.oOptions.iAnimationTimeMs),this.oListeners.onClick&&this.oListeners.onClick(this)},checkButtonsHide:function(){var e=$(this.oOptions.$scrollContainer).scrollLeft(),t=this.oOptions.$scrollContainer.scrollWidth-this.oOptions.$scrollContainer.clientWidth;this.$leftButton.toggleClass("xscroll-buttons-hide",0===e),this.$rightButton.toggleClass("xscroll-buttons-hide",e===t)}},i}),define("lib/helpers/thumbs/wall",["./engine_creator"],function(e){var t=function(e,t){this.wall=e,this.thumb=$(t),this.playing=!1,this.max_nb_play=10,this.initEngine()};t.prototype={initEngine:function(){var t=this,i=function(e){t.engine=new e(t),t.checkPreview()};e.create(i)},shouldPlay:function(){return!!this.wall.playing&&this.wall.isInView(this.thumb,!0)},checkPreview:function(){if(this.engine)return this.shouldPlay()?void(this.playing||(this.playing=!0,this.engine.startVideoPic(this.thumb))):(this.engine.stop(),void(this.playing=!1))},stop:function(){}};var i=function(e){this.container=e,this.thumbs=[],this.playing=!0;var t=this,i=!1,n=null,s=null;this.container.on("scroll",function(){t.playing&&(i||t.start(),!0!==i&&(n=setTimeout(function(){i=!0},100)),clearTimeout(s),s=setTimeout(function(){clearTimeout(n),i=!1,t.start()},200))}),this.container.find(".thumb-block .thumb img,.wall-autoplay").each(function(){t.addThumb(this)})};return i.prototype={addThumb:function(e){for(var i in this.thumbs)if(this.thumbs[i].thumb.is(e))return;var n=new t(this,e);this.thumbs.push(n),n.checkPreview()},clear:function(){var e=this.playing;this.playing=!1;for(var t in this.thumbs)this.thumbs[t].checkPreview(),delete this.thumbs[t];this.thumbs=[],this.playing=e},isInView:function(e,t){var i=this.container.height(),n=e.offset().top-this.container.offset().top,s=n+e.height();return n>=0&&s<=i||!!t&&(n<0&&s>0||n>0&&n<=i)},start:function(){this.playing=!0;var e=0;for(var t in this.thumbs)this.thumbs[t].checkPreview(),this.thumbs[t].playing&&e++},stop:function(){this.playing=!1;for(var e in this.thumbs)this.thumbs[e].checkPreview()}},i}),define("text!skins/common/global_feed/subscriptions/channel_preview/tpls/channel_preview.mustache",[],function(){return'<div class="account-preview-header{{#oMembershipInfo.nb_videos}} with-membership-info{{/oMembershipInfo.nb_videos}}">\n\t<div class="prof-pic-n-page-link{{#user.sThumb}} with-pic{{/user.sThumb}}">\n\t\t{{#user.sThumb}}\n\t\t\t<div class="profile-pic">\n\t\t\t\t<img src="{{{ user.sThumb }}}" alt="" />\n\t\t\t</div>\n\t\t{{/user.sThumb}}\n\t</div>\n\n\t<div class="account-preview-info">\n\t\t<div class="account-preview-title">\n\t\t\t{{#user.sCountryCode}}\n\t\t\t\t<div class="account-preview-flag">\n\t\t\t\t\t<span class="flag flag-{{ user.sCountryCodeLower }}"></span>\n\t\t\t\t</div>\n\t\t\t{{/user.sCountryCode}}\n\t\t\t<h2 class="label">{{{ user.sDisplayName }}}</h2>\n\t\t</div>\n\t\t{{#oMembershipInfo.nb_videos}}\n\t\t\t<div class="membership-info">\n\t\t\t\t<span class="icon-f icf-bar-chart"></span>\n\t\t\t\t<div class="membership-info-videos">\n\t\t\t\t\t<p><span class="icon-f icf-crown"></span> <span class="nb-videos">{{{oMembershipInfo.nb_videos}}}</span></p>\n\t\t\t\t\t<p><span class="icon-f icf-lock"></span> <span class="no-access">{{{oMembershipInfo.nb_videos_no_access}}}</span></p>\n\t\t\t\t</div>\n\t\t\t\t<div class="membership-info-other">\n\t\t\t\t\t<p><span class="icon-f icf-play-square-o"></span> {{{oMembershipInfo.last_update}}}</p>\n\t\t\t\t\t<p><span class="icon-f icf-comments-o"></span> {{{oMembershipInfo.last_chat}}}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="membership-info-detail">\n\t\t\t\t\t<span class="icon-f icf-question-circle-o info"></span>\n\t\t\t\t\t<div class="membership-info-detail-hover">\n\t\t\t\t\t\t<span class="icon-f icf-close-thin close"></span>\n\t\t\t\t\t\t<p><span class="icon-f icf-crown"></span> <span class="membership-info-detail-videos">{{{oMembershipInfo.detail_videos}}}</span></p>\n\t\t\t\t\t\t<p><span class="icon-f icf-lock"></span> <span class="membership-info-detail-no-access">{{{oMembershipInfo.detail_no_access}}}</span></p>\n\t\t\t\t\t\t<p><span class="icon-f icf-play-square-o"></span> {{{oMembershipInfo.detail_last_update}}}</p>\n\t\t\t\t\t\t<p><span class="icon-f icf-comments-o"></span> {{{oMembershipInfo.detail_last_chat}}}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{/oMembershipInfo.nb_videos}}\n\n\t\t<div class="account-actions">\n\t\t\t<button class="btn btn-default" x-filter type="button">\n\t\t\t\t<span class="icon-f icf-filter"></span>\n\t\t\t\t<span class="btn-text">{{{ filter_this_channel }}}</span>\n\t\t\t</button>\n\t\t\t{{#user.sUrl}}\n\t\t\t\t<a class="btn btn-default" href="{{ user.sUrl }}" target="_blank" type="button">\n\t\t\t\t\t<span class="icon-f icf-external-link"></span>\n\t\t\t\t\t<span class="btn-text">{{{ visit_channel }}}</span>\n\t\t\t\t</a>\n\t\t\t{{/user.sUrl}}\n\t\t</div>\n\t</div>\n</div>\n\n<div class="mozaique thumbs-2-cols">\n\t{{{ mozaique }}}\n\t{{{ cover_loader }}}\n</div>'}),define("text!skins/common/global_feed/subscriptions/channel_preview/tpls/channel_preview_mozaique_tbs.mustache",[],function(){return'{{#video_list}}\n\t<div id="video_{{{ id }}}_channel_preview" data-id="{{{ id }}}" class="thumb-block">\n\t\t<div class="thumb-inside">\n\t\t\t<div class="thumb">\n\t\t\t\t<a href="{{{ url }}}" target="_blank">\n\t\t\t\t\t<img src="{{{ img }}}{{{ thumb }}}" data-idcdn="10" data-videoid="{{{ id }}}" id="pic_{{{ id }}}" />\n\t\t\t\t\t<span class="video-title">{{{ title }}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/video_list}}'}),define("text!skins/common/design/cover_loader.mustache",[],function(){return"<div class=\"cover-loader\"><span class='icon-f icf-spinner icf-anim-pulse'></span></div>"}),define("skins/common/global_feed/subscriptions/channel_preview/channel_preview",["static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/inline_loader","lib/helpers/thumbs/wall","skins/common/global_feed/user","text!skins/common/global_feed/subscriptions/channel_preview/tpls/channel_preview.mustache","text!skins/common/global_feed/subscriptions/channel_preview/tpls/channel_preview_mozaique_tbs.mustache","text!skins/common/design/cover_loader.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f={oOptions:{oChannel:null,sDataUri:"/my-feed/accounts/preview/%id%/%page%"},oState:{bLoading:!1,iPreviewPageToLoad:0},oTemplates:{sTplChannelPreview:d,sTplChannelPreviewMozaiqueThumbs:u,sTplCoverLoader:c},oTranslations:{page:{channel:"profile.channel_page",model:"profile.model_page",profile:"profile.profile_page"},filter:{channel:"global_feed.filter_this_channel",model:"global_feed.filter_this_model",profile:"global_feed.filter_this_profile"}},oListeners:{onUserFilter:undefined},oFunctions:{init_desktop_channel_videos:undefined}},h=function(e){n.initParams(this,e,f)};return h.prototype={getContentHTML:function(){return e.debug_("%c getContentHTML","color: red;",this.oOptions.oChannel,this.oOptions.oChannel.aSimpleVideoList),i.render(this.oTemplates.sTplChannelPreview,{user:this.oOptions.oChannel,mozaique:i.render(this.oTemplates.sTplChannelPreviewMozaiqueThumbs,{video_list:this.oOptions.oChannel.aSimpleVideoList}),cover_loader:i.render(this.oTemplates.sTplCoverLoader),filter_this_channel:s.__(this.getUserTypeTranslationFilter()),visit_channel:s.__(this.getUserTypeTranslationPage())})},getUserTypeTranslationPage:function(){switch(this.oOptions.oChannel.getType()){case l.TYPE.CHANNEL:return this.oTranslations.page.channel;case l.TYPE.MODEL:return this.oTranslations.page.model;default:return this.oTranslations.page.profile}},getUserTypeTranslationFilter:function(){switch(this.oOptions.oChannel.getType()){case l.TYPE.CHANNEL:return this.oTranslations.filter.channel;case l.TYPE.MODEL:return this.oTranslations.filter.model;default:return this.oTranslations.filter.profile}},open:function(){var e=$(this.getContentHTML()),t=o.get($("body"),!0,"close");t.setContent(e),t.setCanReposition(!1),t.setOverlayClosable(!0),t.setEscapeClosable(!0),t.addClass("x-overlay-fullscreen auto-width-popup global-feed-channel-preview-pop"),this.$Mozaique=e.filter(".mozaique"),this.oWall=!1;var i=this;t.onClose=function(){i.oWall&&i.oWall.stop()},t.show("auto"),$(".account-actions [x-filter]").on("click",function(){"function"==typeof i.oListeners.onUserFilter&&(i.oListeners.onUserFilter(),t.close())}),this.$Mozaique.on("scroll",function(){"number"==typeof i.oState.iPreviewPageToLoad&&i.$Mozaique[0].scrollHeight-20<=i.$Mozaique.scrollTop()+i.$Mozaique.height()&&i.loadMoreVideos()}),this.loadMoreVideos()},loadMoreVideos:function(){var e=this;if(!0!==this.oState.bLoading){this.oState.bLoading=!0,this.$Loader=$('<p class="loader">'+a.getIcf()+"</p>"),this.$Mozaique.append(this.$Loader);var t=this.oOptions.sDataUri.replaceAll("%id%",this.oOptions.oChannel.sId).replaceAll("%page%",this.oState.iPreviewPageToLoad);$.get(t,function(t){e.handleMoreVideos(t)},"json")}},handleMoreVideos:function(e){var n=this;if(this.$Loader.remove(),e.result){var s=$(i.render(n.oTemplates.sTplChannelPreviewMozaiqueThumbs,{video_list:e.data.videos}));0===n.oState.iPreviewPageToLoad&&n.$Mozaique.empty(),n.$Mozaique.append(s),t.dyn.is_desktop?n.oFunctions.init_desktop_channel_videos(n.$Mozaique):0===n.oState.iPreviewPageToLoad?n.oWall=new r(n.$Mozaique):s.find(".thumb img").each(function(){n.oWall.addThumb(this)}),e.metadata.nbRemaining>0?n.oState.iPreviewPageToLoad++:n.oState.iPreviewPageToLoad=!1,n.oState.bLoading=!1,setTimeout(function(){n.$Mozaique.scroll()},1e3)}}},h}),define("text!skins/common/global_feed/subscriptions/tpls/subscription.mustache",[],function(){return'<div class="subscription" user-id="{{{ user.sId }}}">\n\t<div class="subscription-thumb">\n\t\t<div class="subscription-hoverselect">\n\t\t\t{{! Text version (desktop) }}\n\t\t\t<div class=\'select-filter\'>\n\t\t\t\t<div class=\'select-text\'>{{{ sFilter }}}</div>\n\t\t\t</div>\n\t\t\t{{! Icons version }}\n\t\t\t{{! <div class=\'select-filter\'>\n\t\t\t\t<div class=\'select-text\'><div class=\'icon-f icf-filter\'></div></div>\n\t\t\t</div> }}\n\t\t\t{{! <div class=\'select-overlay\'>\n\t\t\t\t<div class=\'select-text\'><div class=\'icon-f icf-eye\'></div></div>\n\t\t\t</div> }}\n\t\t</div>\n\t\t{{#user.bIsPornstar}}\n\t\t\t<div class="subscription-indicator pornstar">\n\t\t\t\t<div class=\'icon-f icf-star-o\'></div>\n\t\t\t</div>\n\t\t{{/user.bIsPornstar}}\n\t\t{{#user.bIsChannel}}\n\t\t\t<div class="subscription-indicator channel">\n\t\t\t\t<div class=\'icon-f icf-device-tv-v2\'></div>\n\t\t\t</div>\n\t\t{{/user.bIsChannel}}\n\t\t<div class="subscription-hovericon select">\n\t\t\t<div class=\'icon-f icf-check\'></div>\n\t\t</div>\n\t\t<div class="subscription-hovericon unselect">\n\t\t\t<div class=\'icon-f icf-close-thin\'></div>\n\t\t</div>\n\n\t\t<img loading="lazy" src="{{{ user.sThumb }}}" onerror="this.src=\'{{ sDefaultProfilPic }}\'; this.onerror=null;"/>\n\t</div>\n\t<div class="subscription-thumb-under">\n\t\t<div class="subscription-username-container" title="{{{ user.sDisplayName }}}">\n\t\t\t<span class="subscription-username">\n\t\t\t\t{{{ user.sDisplayName }}}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="subscription-preview-button">\n\t\t\t<span class="subscription-preview-text">\n\t\t\t\t{{{ sVisit }}}\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>'}),define("skins/common/global_feed/subscriptions/subscription_generator",["config/main","mustache","lib/i18n!front","lib/tools","skins/common/global_feed/subscriptions/channel_preview/channel_preview","text!./tpls/subscription.mustache"],function(e,t,i,n,s,o){var a={oOptions:{oUser:undefined,$resume:undefined,$container:undefined},oListeners:{onFilter:undefined,onReady:undefined,onUserFilter:undefined},oTranslations:{subscribers:"profile.subscribers_low",filter:"filter",visit:"misc.visit"},oTemplates:{sTplSubscription:o},oFunctions:{init_desktop_channel_videos:undefined}},r=function(e){n.initParams(this,e,a);this.init()};return r.prototype={init:function(){var e=$(this.getHtml())[0];this.oOptions.$resume?(this.oOptions.$resume.after(e),this.$mainDiv=$(".subscription[user-id="+this.oOptions.oUser.sId+"]")[0]):this.oOptions.$container&&(this.$mainDiv=this.oOptions.$container.appendChild(e)),this.addClickListeners(this.$mainDiv),this.oListeners.onReady&&this.oListeners.onReady(this)},select:function(e){e!==undefined?$(this.$mainDiv).toggleClass("selected",e):$(this.$mainDiv).toggleClass("selected")},doFilterUser:function(){this.select(),this.oListeners.onUserFilter&&this.oListeners.onUserFilter(this)},openPreviewOverlay:function(){var e=this;new s({oOptions:{oChannel:this.oOptions.oUser},oFunctions:{init_desktop_channel_videos:this.oFunctions.init_desktop_channel_videos},oListeners:{onUserFilter:function(){e.doFilterUser()}}}).open()},getHtml:function(){if(!this.sCachedHtml){Object.assign({},this.oOptions.oUser).sSubscribers=i.__(this.oTranslations.subscribers),this.sCachedHtml=t.render(this.oTemplates.sTplSubscription,{user:this.oOptions.oUser,sFilter:i.__(this.oTranslations.filter),sVisit:i.__(this.oTranslations.visit),sDefaultProfilPic:e.domains["static"]+"/v3/img/skins/default/profile_default_big.jpg"})}return this.sCachedHtml},getDiv:function(){return this.$mainDiv},getId:function(){return this.oOptions.oUser.sId},addClickListeners:function(e){var t=this;$("html").hasClass("is-desktop")?$(e).find(".subscription-hoverselect .select-filter, .subscription-hovericon.select, .subscription-hovericon.unselect").on("click",function(e){t.doFilterUser()}):$(e).on("click",function(){t.doFilterUser()}),$(e).find(".subscription-preview-button").on("click",function(e){$(".x-overlay-box.global-feed-account-preview-pop").is(":visible")||t.openPreviewOverlay()})}},r}),define("text!skins/common/global_feed/subscriptions/full_view/tpls/added_removed.mustache",[],function(){return'<h3 id="sub-suggests-title" class="sub-suggests-title wrap">\n\t<span class="added-removed">{{{ sAddedRemovedTotal }}}</span>\n</h3>'}),define("text!skins/common/global_feed/subscriptions/full_view/tpls/create_profile_popup.mustache",[],function(){return'<p class="create-profile-popup-text">{{{ sCreateProfile }}}</p>\n<a class="create-profile-popup-link" href="/account/create-profile">{{{ sCreateProfileLink }}}</a>'}),define("text!skins/account/social/friends_list/action_btn_desktop.mustache",[],function(){return'<button class="action-desktop-btn btn btn-default" title="{{{ title }}}">\n\t<span class="icon-f icf-user"></span>\n\t<span class="icon-f icf-{{ icf }} small-icf"></span>\n</button>\n'}),define("text!skins/account/social/friends_list/action_btn_mobile.mustache",[],function(){return'<button class="action-mobile-btn btn btn-default btn-xs" title="{{{ title }}}">\n\t<span class="icon-f icf-{{ icf }}"></span>\n\t<span class="text">{{{ title }}}</span>\n</button>\n'}),define("text!skins/account/social/friends_list/action_success.mustache",[],function(){return'<strong class="success-message text-success"><span class="icon-f icf-check"></span> {{{ message }}}</strong>'}),define("skins/account/social/friends_list_base",["config/main","mustache","skins/default/profile/action/link","lib/i18n!front","text!./friends_list/action_btn_desktop.mustache","text!./friends_list/action_btn_mobile.mustache","text!./friends_list/action_success.mustache"],function(e,t,i,n,s,o,a){var r=function(t,i,n,s,o,a){if(a||e.data.profiles){var r,l,d,u;a&&void 0!==a?(r=a.oProfiles,u=a.iNbProfiles,l=a.sType,d=$(".overlay-subs").find("h1")):(r=e.data.profiles,u=e.data.nb_profiles,l=e.data.action,d=$("#account-content-block").find("h1"));var c=u,f=[];if(("fnSubscribe"===i||"fnUnsubscribe"===i||"fnUnreject"===i)&&e.dyn.login_info&&e.dyn.login_info.profile){var h=this;require(["skins/common/profile/sub_actions"],function(p){for(var _ in r){var g=r[_];g.id&&(f.push(g.id),p.setUserIdByName(g.id,_))}f.length?p.loadSubInfoListUsers(e.dyn.login_info.profile,f,function(){h.initProfiles(t,i,n,s,o,a,r,l,d,u,c)}):h.initProfiles(t,i,n,s,o,a,r,l,d,u,c)})}else this.initProfiles(t,i,n,s,o,a,r,l,d,u,c)}};return r.prototype={initProfiles:function(a,r,l,d,u,c,f,h,p,_,g){for(var m in f)!function(){var b=m,v=$("#profile_"+b);if(!(v.length<1)){var y=$(t.render(e.dyn.is_desktop?s:o,{title:n.__(a),icf:l}));v.append(y);var D={};D[String(u)]=f[b].display;var C=function(){e.dyn.is_desktop?y.remove():y.off("click").prop("disabled",!0),delete f[b],g--;var t="";switch(a){case"profile.unfriend":t=g<1?n.__("profile.friends.no_yet"):1===g?n.__("profile.friends.my_friend"):n.__("profile.friends.my_nb",{"%count%":g.toString()});break;case"profile.unlike":t=g<1?n.__("profile.like.no_yet"):1===g?n.__("profile.like.my_like"):n.__("profile.like.my_nb",{"%count%":g.toString()});break;case"subscriptions.unsubscribe":if("social_subscriptions_models"===h||"models"===h){t=g<1?n.__("profile.subscription.no_models_yet"):1===g?n.__("profile.subscription.my_model_subscription"):n.__("profile.subscription.my_models_nb",{"%count%":g.toString()});break}if("xnxx"===e.sitename){t=g<1?n.__("profile.subscription.no_uploader_yet"):1===g?n.__("profile.subscription.my_followed"):n.__("profile.subscription.my_uploaders_nb",{"%count%":g.toString()});break}if("social_subscriptions_channels"===h||"channels"===h){t=g<1?n.__("profile.subscription.no_chan_yet"):1===g?n.__("profile.subscription.my_chan_subscription"):n.__("profile.subscription.my_chan_nb",{"%count%":g.toString()});break}t=g<1?n.__("profile.subscription.no_yet"):1===g?n.__("profile.subscription.my_subscription"):n.__("profile.subscription.my_nb",{"%count%":g.toString()});break;case"misc.cancel_not_interested":if("social_subscriptions_models_rejected"===h){t=g<1?n.__("profile.subscription.no_model_not_interested"):1===g?n.__("profile.subscription.one_model_not_interested"):n.__("profile.subscription.nb_models_not_interested",{"%count%":g.toString()});break}t=g<1?n.__("profile.subscription.no_chan_not_interesting"):1===g?n.__("profile.subscription.one_chan_not_interesting"):n.__("profile.subscription.nb_chan_not_interesting",{"%count%":g.toString()});break;case"subscriptions.subscribe":if("social_subscriptions_models_rejected"===h){t=g<1?n.__("profile.subscription.no_model_not_interested"):1===g?n.__("profile.subscription.one_model_not_interested"):n.__("profile.subscription.nb_models_not_interested",{"%count%":g.toString()});break}t=g<1?n.__("xnxx"===e.sitename?"profile.subscription.no_uploaders_not_interesting":"profile.subscription.no_chan_not_interesting"):1===g?n.__("xnxx"===e.sitename?"profile.subscription.one_uploader_not_interesting":"profile.subscription.one_chan_not_interesting"):n.__("xnxx"===e.sitename?"profile.subscription.nb_uploaders_not_interesting":"profile.subscription.nb_chan_not_interesting",{"%count%":g.toString()});break;case"profile.actions.block":t=g<1?n.__("profile.liked.no_yet"):1===g?n.__("profile.liked.my_like"):n.__("profile.liked.my_nb",{"%count%":g.toString()});break;case"profile.actions.unblock":t=g<1?n.__("profile.blocked.no_yet"):1===g?n.__("profile.blocked.one_account"):n.__("profile.blocked.nb_accounts",{"%count%":g.toString()})}v.fadeOut(),p.html(t),void 0!==c&&"function"==typeof c.fnCallbackOnchange&&_!==g&&c.fnCallbackOnchange({iInitialNbItem:_,iNewNbItem:g})};if("fnSubscribe"===r||"fnUnsubscribe"===r||"fnUnreject"===r){var w={user_name:b,csrf:f[b].csrf},S={},k={confirm_unfollow:!1,confirm_unreject:!1,sub:!1,reject:!1,ignore:!1,is_sub:!1,is_rejected:!1,is_ignored:!1},T={tooltip:!1,btn_display:!1,btn_class:!1};"fnSubscribe"===r?(w.is_follower=!1,T.sub_btn=y,S.onSub=C):"fnUnsubscribe"===r?(w.is_follower=!0,w.is_rejected=!1,T.sub_btn=y,d&&u&&(k.confirm_unfollow=n.__(d,D)),S.onUnsub=C):"fnUnreject"===r&&(w.is_follower=!1,w.is_rejected=!0,T.reject_btn=y,T.reject_btn_only=!0,d&&u&&(k.confirm_unreject=n.__(d,D)),S.onUnsub=C),require(["skins/"+e.sitename+"/profile/subscribe/btns_controler"],function(e){new e({uploader:w,texts:k,icons:{is_rejected:!1,is_sub:!1,reject:!1,sub:!1},elts:T,listeners:S})})}else{new i(y,"/profiles/"+b+r,!(!d||!u)&&n.__(d,D),!1,f[b].csrf).onSuccess=C}}}();e.dyn.is_desktop&&setTimeout(function(){$(".action-desktop-btn").addClass("read")},2e3)}},r}),define("skins/common/profile/sub_overlay",["static/log","lib/tools","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/inline_loader","skins/account/social/friends_list_base","skins/default/pagination"],function(e,t,i,n,s,o,a){var r=function(){this._init()};return r.prototype={_init:function(){this.oOverlay=!1,this.iInitNbItems=null,this.iNbItems=null,this.sUrl=null,this.fnCallbackOnListUpdate=null},setOverlay:function(e){if(this.sUrl=e.sUrl,this.fnCallbackOnListUpdate=e.fnOnListUpdate,!this.oOverlay){var t=this;this.oOverlay=new n("body",!0,"hide"),this.oOverlay.onHide=function(){t.iInitNbItems!==t.iNbItems&&(t.fnCallbackOnListUpdate(),t.iInitNbItems=null,t.iNbItems=null)},this.oOverlay.addClass("overlay-subs")}this.oOverlay.setContent($('<p class="text-center">'+s.getSafeIcf("after",i.__("loading.loading")).getHtml()+"</p>")),e.bDontShow||(this.showOverlay(),this.loadContentOverlay())},showOverlay:function(){if(!this.oOverlay)return!1;this.oOverlay.show()},loadContentOverlay:function(t,n){var s=this,o={"no-layout":1};void 0===t&&(t=this.sUrl);var a=function(t,n){e.error("subOverlay --- loadContentOverlay --- ajax ERROR",t),require(["static/utils"],function(e){"string"!=typeof n&&(n=i.__("misc.internal_error_retry")),s.oOverlay.setContent($('<p class="alert alert-danger">'+e.escape(e.unescape(n))+"</p>"))})};$.ajax({method:"POST",url:t,data:o,dataType:"json",success:function(i){e.debug_("%c subOverlay --- loadContentOverlay --- ajax SUCCESS","color:yellow;",{sUrl:t,oPostData:o,oReturnedData:i}),n&&"function"==typeof n?n(t,i):s.handleCallbackData(t,i)},error:function(e){a(e)}})},handleCallbackData:function(e,i){var n=this,s=e.split("/"),o=s[s.length-1],r=!1;if("models"===o&&(r=!0,"not-interested"===s[s.length-2]&&(o="not-interested")),i.html&&i.html.length){var l=$(t.replaceThumbcast(i.html));l&&l.length&&n.oOverlay.setContent(l)}a.add_all_in(".x-content"),$(".x-content").find(".pagination a").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||n.loadContentOverlay($(this).attr("href"))});var d={oProfiles:i.profiles,iNbProfiles:i.nb_profiles,sType:o,bIsModel:r,fnCallbackOnchange:function(e){n.iInitNbItems=e.iInitialNbItem,n.iNbItems=e.iNewNbItem}};n.setBtn(d)},setBtn:function(e){var t,i,n,s;"followed"===e.sType||"models"===e.sType||"channels"===e.sType?(t="subscriptions.unsubscribe",i="fnUnsubscribe",n="close-circle",
s="subscriptions.confirm_unsubscribe"):(t=e.bIsModel?"subscriptions.unignore":"misc.cancel_not_interested",i="fnUnreject",n="plus-circle",s=e.bIsModel?"subscriptions.confirm_stop_ignoring":"misc.confirm_cancel_not_interested"),new o(t,i,n,s,"%user%",e)}},new r}),define("skins/common/global_feed/subscriptions/full_view/subscriptions_full_view_generator",["config/main","mustache","lib/tools","lib/i18n!front","text!./tpls/added_removed.mustache","text!./tpls/create_profile_popup.mustache","skins/common/profile/sub_overlay","lib/helpers/overlay/box"],function(e,t,i,n,s,o,a,r){var l={oOptions:{$container:undefined,bDisplayTotal:!1},oState:{oAddedChannels:{count:undefined,"class":"feed-nb-channels-added"},oRejectedChannels:{count:undefined,"class":"feed-nb-channels-rejected"},oTotalChannels:{count:undefined,"class":"feed-nb-channels-total"}},oTranslations:{channels_added_removed_total:"premium_feed.channels_added_removed_total",channels_added_removed:"premium_feed.uploaders_added_removed",create_profile_to_save:"global_feed.create_profile_to_save",create_profile_to_save_link:"global_feed.create_profile_to_save_link"},oForcedTranslations:{channels_added_removed_total:"",channels_added_removed:""},oUrls:{account_subscriptions:"/account/subscriptions",account_not_interested:"/account/subscriptions/not-interested"},oListeners:{onOverlayHideChanged:function(){},onCountAddedLoaded:function(){}},oTemplates:{sTplAddedRemoved:s,sTplCreateProfilePopup:o}},d=function(e){i.initParams(this,e,l);var t=this.checkParams();if(t)return void console.error("Missing "+t+" in SubscriptionsController");this.init()};return d.COUNTS={ADDED:"oAddedChannels",REJECTED:"oRejectedChannels",TOTAL:"oTotalChannels"},d.prototype={checkParams:function(){for(var e=this,t=["$container"],i=0;i<t.length;i++){var n=t[i];if(!e.oOptions[n])return n}},init:function(){this.setAddedRemovedElement()},setChannelsCount:function(e,t){this.oState[e].count=t,$("."+this.oState[e]["class"]).html(t===undefined?"-":t),e===d.COUNTS.ADDED&&(void 0===t||"function"!=typeof this.oListeners.onCountAddedLoaded||this.oState.bOnCountAddedLoadedCalled||(this.oState.bOnCountAddedLoadedCalled=!0,this.oListeners.onCountAddedLoaded(t)))},setAddedRemovedElement:function(){var t=this;this.$addedRemovedContainer=$(this.getAddedRemovedHTML()),$(this.oOptions.$container).append(this.$addedRemovedContainer),Object.values(d.COUNTS).map(function(e){t.setChannelsCount(e,t.oState[e].count)}),this.$addedRemovedContainer.find(".added-removed a").each(function(){var i=$(this);a.setOverlay({sUrl:i.attr("href"),fnOnListUpdate:function(){t.oListeners.onOverlayHideChanged()},bDontShow:!0}),i.on("click",function(n){return n.preventDefault(),e.dyn.login_info.is_logged?e.dyn.login_info.profile?void a.loadContentOverlay(i.attr("href"),function(e,t){a.handleCallbackData(e,t),a.showOverlay()}):void t.openCreateProfilePopup():void require(["skins/default/form/login"],function(e){e.open()})})})},getDisplayText:function(){var e={"%link_added%":'<a data-name="'+d.COUNTS.ADDED+'" href="'+this.oUrls.account_subscriptions+'">',"%link_removed%":'<a data-name="'+d.COUNTS.REJECTED+'" href="'+this.oUrls.account_not_interested+'">',"%link_end%":"</a>","%nb_added%":'<strong class="'+this.oState.oAddedChannels["class"]+'"></strong>',"%nb_removed%":'<strong class="'+this.oState.oRejectedChannels["class"]+'"></strong>'},t=this.oTranslations.channels_added_removed,i=this.oForcedTranslations.channels_added_removed;return this.oOptions.bDisplayTotal&&(e["%nb_total%"]='<strong class="'+this.oState.oTotalChannels["class"]+'"></strong>',t=this.oTranslations.channels_added_removed_total,i=this.oForcedTranslations.channels_added_removed_total),n.__(t,e,i)},getAddedRemovedHTML:function(){return this.sCachedAddedRemovedHtml||(this.sCachedAddedRemovedHtml=t.render(this.oTemplates.sTplAddedRemoved,{sAddedRemovedTotal:this.getDisplayText()})),this.sCachedAddedRemovedHtml},openCreateProfilePopup:function(){oPopup=r.get($("body"),!0,"close"),oPopup.setContent(t.render(this.oTemplates.sTplCreateProfilePopup,{sCreateProfile:n.__(this.oTranslations.create_profile_to_save),sCreateProfileLink:n.__(this.oTranslations.create_profile_to_save_link)})),oPopup.addClass("create-profile-popup"),oPopup.setCanReposition(!1),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.show("auto")}},d}),define("skins/common/global_feed/subscriptions/full_view/subscriptions_full_view",["lib/tools","skins/common/global_feed/subscriptions/full_view/subscriptions_full_view_generator"],function(e,t){var i={oOptions:{$container:undefined,oGeneratorParams:{}}},n=function(t){e.initParams(this,t,i);var n=this.checkParams();if(n)return void console.error("Missing "+n+" in SubscriptionsController");this.init()};return n.COUNTS=t.COUNTS,n.prototype={checkParams:function(){for(var e=this,t=["$container"],i=0;i<t.length;i++){var n=t[i];if(!e.oOptions[n])return n}this.oOptions.oGeneratorParams||(this.oOptions.oGeneratorParams={}),this.oOptions.oGeneratorParams.oOptions||(this.oOptions.oGeneratorParams.oOptions={}),this.oOptions.oGeneratorParams.oOptions.$container||(this.oOptions.oGeneratorParams.oOptions.$container=this.oOptions.$container)},setChannelsCount:function(e,t){this.oGenerator.setChannelsCount(e,t)},init:function(){this.oGenerator=new t(this.oOptions.oGeneratorParams)}},n}),define("text!skins/common/global_feed/subscriptions/tpls/subscriptions_container.mustache",[],function(){return'<div class="subscriptions-selection-container">\n\t<div class="subscriptions-selection"></div>\n</div>'}),define("text!skins/common/global_feed/subscriptions/tpls/subscriptions_selected.mustache",[],function(){return'<div class="subscriptions-selected-container">\n\t<div class="subscriptions-selected"></div>\n</div>'}),define("text!skins/common/global_feed/subscriptions/tpls/floating_indicator.mustache",[],function(){return'<div class="floating-indicator">\n\t<span class="icon-f icf-angle-double-down">\n</div>'}),define("skins/common/global_feed/subscriptions/subscriptions_controller",["static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/scrollbar","lib/helpers/scroll_buttons","skins/common/tracker/video_subs","skins/common/global_feed/user","skins/common/global_feed/subscriptions/subscription_generator","skins/common/global_feed/subscriptions/full_view/subscriptions_full_view","text!./tpls/subscriptions_container.mustache","text!./tpls/subscriptions_selected.mustache","text!./tpls/floating_indicator.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h){var p={oOptions:{$container:undefined,oFeedSettings:undefined,iNbSubsPerPage:2,iLimitEmptyRequests:10,iNextPageBuffer:1,iMaxSelected:1,iMinimumSubsDisplay:2,bWrapSuggestsTitleWhenNoSelector:!0,iMinimumSubsSelectionDisplay:2,iMinimumSubsOverlayDisplay:2,bEnableSubsFloat:!1,iFloatHideDelay:1e3,iShowFloatingSubsDistance:50,iFloatHideDistance:1500,iDefaultPreventFloatingSubsDuration:1e3},oState:{oSubscriptions:{},oSelected:{},oSubscriptionGenerators:{},bRedrawSelection:!1,iCurrentPage:1,iDisplayedSubs:0,bFloatDisabled:!1,bHasMoreSubscriptions:undefined,iEmptyRequests:0,aSelectedQueue:[],bHasSelected:!1,iNbAccountsAdded:undefined,iNbAccountsRejected:undefined,bListHidden:!1},oTemplates:{sTplSubscriptionContainer:c,sTplSubscriptionSelected:f,sTplFloatingIndicator:h},oListeners:{onUserFilter:undefined,onOverlayHideChanged:undefined,onChangeSyncedState:undefined,onHasSelectedChanged:undefined,onCountAddedLoaded:undefined},oFunctions:{init_desktop_channel_videos:undefined}},_=function(e){n.initParams(this,e,p);var t=this.checkParams();if(t)return void console.error("Missing "+t+" in SubscriptionsController");this.init()};return _.prototype={checkParams:function(){for(var e=this,t=["$container","oFeedSettings"],i=0;i<t.length;i++){var n=t[i];if(!e.oOptions[n])return n}},init:function(){var e=this;this.oSubscriptionsFullViewController=new u({oOptions:{$container:this.oOptions.$container,oGeneratorParams:{oListeners:{onOverlayHideChanged:this.oListeners.onOverlayHideChanged,onCountAddedLoaded:this.oListeners.onCountAddedLoaded}}}}),this.$wrapper=this.oOptions.$container.appendChild($('<div class="selection-wrapper" style="display:none"></div>')[0]);var t=$(this.getSelectedHtml())[0];this.$selectedContainer=$(this.$wrapper.appendChild(t)),this.$selectedContent=this.$selectedContainer.find(".subscriptions-selected");var n=$(this.getSelectionHtml())[0];this.$selectionContainer=$(this.$wrapper.appendChild(n)),this.$selectionContent=this.$selectionContainer.find(".subscriptions-selection");var s=i.render(this.oTemplates.sTplFloatingIndicator,{});this.$floatingIndicator=$(this.$wrapper.appendChild($(s)[0])),Object.values(this.oState.oSelected).forEach(function(e){this.oState.aSelectedQueue.push(e)}),this.loadCurrentPage(),this.initScrollbar(),this.initScrollButtons(),this.initObserver(),this.initSyncedState(),this.iInitialWrapperPosY=$(this.$wrapper).offset().top,$("html.is-desktop").length&&(addEventListener("mousemove",function(t){e.checkSubsDisplayOnTop(t)}),addEventListener("click",function(){setTimeout(function(){e.checkSubsDisplayOnTop()},100)}),addEventListener("scroll",function(t){e.checkSubsEnableOnTop(t)}))},initScrollbar:function(){new o({oOptions:{$Container:this.$selectionContent,sMode:o.S_MODE_HORIZONTAL,iAutoHideDelayMs:100,iBarMarginPx:0,bCanMouseGrabToScroll:!0}}),new o({oOptions:{$Container:this.$selectedContent,sMode:o.S_MODE_HORIZONTAL,iAutoHideDelayMs:100,iBarMarginPx:0}}),this.$scrollSelection=this.$selectionContent.parent()[0],this.$scrollSelected=this.$selectedContent.parent()[0]},initScrollButtons:function(){this.oScrollButtonsSelection=new a({oOptions:{$container:this.$selectionContainer[0],$scrollContainer:this.$scrollSelection}}),this.oScrollButtonsSelected=new a({oOptions:{$container:this.$selectedContainer[0],$scrollContainer:this.$scrollSelected}})},initObserver:function(){var e=this;this.oObserved={},this.oLastSubObserver=new IntersectionObserver(function(t){!0===t[0].isIntersecting&&e.loadNextPage()},{threshold:[1]})},initSyncedState:function(){this.oState.iNbAccountsAdded!==undefined&&(e.info("cache ADDED",this.oState.iNbAccountsAdded),this.oSubscriptionsFullViewController.setChannelsCount(u.COUNTS.ADDED,this.oState.iNbAccountsAdded)),this.oState.iNbAccountsRejected!==undefined&&(e.info("cache REJECTED",this.oState.iNbAccountsAdded),this.oSubscriptionsFullViewController.setChannelsCount(u.COUNTS.REJECTED,this.oState.iNbAccountsRejected))},resetObserver:function(){var e=this;Object.values(e.oObserved).forEach(function(t){e.oLastSubObserver.unobserve(t)}),e.oObserved={}},addObserver:function(e){var t=this;t.oObserved[e.getId()]=e.getDiv(),t.oLastSubObserver.observe(t.oObserved[e.getId()])},resetContent:function(){this.oState=Object.assign(this.oState,p.oState),this.oState.oSubscriptions={},this.oState.oSubscriptionGenerators={},this.oState.oSelected={},this.oState.aSelectedQueue=[],this.oState.bRedrawSelection=!0,this.oState.iNbAccountsAdded=undefined,this.oState.iNbAccountsRejected=undefined,delete this.oState.bHasMoreSubscriptions,this.onHasSelectedChanged(!1),this.loadCurrentPage()},getSelectionHtml:function(){return this.sCachedSelectionHtml||(this.sCachedSelectionHtml=i.render(this.oTemplates.sTplSubscriptionContainer,{})),this.sCachedSelectionHtml},getSelectedHtml:function(){return this.sCachedSelectedHtml||(this.sCachedSelectedHtml=i.render(this.oTemplates.sTplSubscriptionSelected,{})),this.sCachedSelectedHtml},toggleSelected:function(t,i,n){var s=this;n=n===undefined||n;var o=s.$scrollSelection.clientWidth;i=i===undefined?!s.oState.oSelected[t]:i,s.oState.oSelected[t]=i;var a=s.oState.oSubscriptionGenerators[t];if(a.select(i),i){if(s.oState.aSelectedQueue.push(t),s.oOptions.iMaxSelected!==undefined&&s.oState.aSelectedQueue.length>s.oOptions.iMaxSelected&&s.toggleSelected(s.oState.aSelectedQueue.shift(),!1,n),o=s.$scrollSelection.clientWidth,s.oState.bRedrawSelection||0===$(s.$selectedContent.find("[user-id="+t+"]")).length){var r=$(a.getDiv()).clone().appendTo(s.$selectedContent);r.find(".subscription-thumb").on("click",function(){s.subscriptionClickHandler(a)}),a.addClickListeners(r)}}else s.oState.aSelectedQueue=s.oState.aSelectedQueue.filter(function(e){return e!==t}),$(s.$selectedContent).find("[user-id="+t+"]").remove(0);if(e.debug("selected queue",s.oState.aSelectedQueue),n){var l=o-s.$scrollSelection.clientWidth;$(s.$scrollSelection).scrollLeft(s.$scrollSelection.scrollLeft+l)}return this.handleSelectedStateChange(),i},handleSelectedStateChange:function(){var e=this.oState.aSelectedQueue.length>0;e!==this.oState.bHasSelected&&(this.oState.bHasSelected=e,this.onHasSelectedChanged(this.oState.bHasSelected),"function"==typeof this.oListeners.onHasSelectedChanged&&this.oListeners.onHasSelectedChanged(this.oState.bHasSelected))},onHasSelectedChanged:function(e){$(this.$wrapper).toggleClass("has-selected",e)},getSubscriptions:function(){return this.oState.oSubscriptions},getSelectedSubscriptions:function(){return this.oState.aSelectedQueue},subscriptionClickHandler:function(e){this.toggleSelected(e.getId()),this.disableFloatDisplaySubs(),"function"==typeof this.oListeners.onUserFilter&&this.oListeners.onUserFilter()},appendSubscription:function(e,t){var i=this;if(i.oState.oSubscriptionGenerators[e.sId]){var n=i.oState.oSubscriptionGenerators[e.sId];$(n.getDiv()).appendTo(i.$selectionContent),i.oState.oSelected[e.sId]&&i.toggleSelected(e.sId,!0,!1),t&&i.addObserver(n)}else i.oState.oSubscriptionGenerators[e.sId]=new d({oOptions:{oUser:e,$container:i.$selectionContent[0]},oListeners:{onUserFilter:function(e){i.subscriptionClickHandler(e)},onReady:function(e){t&&i.addObserver(e)}},oFunctions:{init_desktop_channel_videos:i.oFunctions.init_desktop_channel_videos}})},redrawSubscriptions:function(){e.time("Redrawing");var t=this,i=Object.keys(t.oState.oSubscriptions),n=this.oOptions.iNbSubsPerPage*this.oState.iCurrentPage;if(n=Math.min(n,i.length-1),i.length<this.oOptions.iMinimumSubsDisplay)return e.debug("== No subscriptions to display =="),void this.hideSubscriptions();this.oState.bListHidden||this.showSubscriptions(),t.resetObserver(),t.oState.bRedrawSelection&&(e.debug("== Redrawing subscriptions =="),t.$selectedContent.empty(),t.$selectionContent.empty(),t.oState.bRedrawSelection=!1,t.oState.iDisplayedSubs=0);for(var s=t.oState.iDisplayedSubs;s<=n;s++){var o=i[s],a=t.oState.oSubscriptions[o],r=s===i-1||s===n;r=r||s===n-5,t.appendSubscription(a,r),t.oState.iDisplayedSubs++}t.oState.iDisplayedSubs<t.oOptions.iMinimumSubsSelectionDisplay?t.$selectedContainer.hide():t.$selectedContainer.show(),e.timeEnd("Redrawing")},hideSubscriptions:function(){this.oState.bListHidden=!0,$("#global-feed-subscriptions .selection-wrapper").hide(),this.oOptions.bWrapSuggestsTitleWhenNoSelector&&$("#sub-suggests-title").addClass("wrap")},showSubscriptions:function(){$("#global-feed-subscriptions .selection-wrapper").show(),$("#sub-suggests-title").removeClass("wrap"),this.oScrollButtonsSelection.updateMeasures(),this.oScrollButtonsSelected.updateMeasures(),this.oScrollButtonsSelection.updateStyles(),this.oScrollButtonsSelected.updateStyles()},loadNextPage:function(){this.oState.iCurrentPage++,this.loadCurrentPage()},loadCurrentPage:function(){var e=this;e.loadEnoughContentForCurrentPage(function(t){t&&(e.redrawSubscriptions(),e.loadEnoughContentForCurrentPage(undefined,e.oOptions.iNextPageBuffer)),!e.oState.bHasMoreSubscriptions&&Object.keys(e.oState.oSubscriptions).length<e.oOptions.iMinimumSubsOverlayDisplay&&$("#global-feed-subscriptions > div").css("height","0px")},0)},loadEnoughContentForCurrentPage:function(t,i){var n=this,s=this.oOptions.iNbSubsPerPage*(this.oState.iCurrentPage+i),o=Object.keys(n.oState.oSubscriptions);!1!==n.oState.bHasMoreSubscriptions&&o.length<s?(e.debug("Requiring more subscriptions:",o.length,"/",s),this.getNextSubscriptions().then(function(e){if(!e)return void("function"==typeof t&&t(!1));n.handleDataChannelsCount(e,"nbAccountsAdded",u.COUNTS.ADDED),n.handleDataChannelsCount(e,"nbAccountsRejected",u.COUNTS.REJECTED),e.data.loadedAccounts.forEach(function(e){var t=l.buildFromJSON(e);n.oState.oSubscriptions[t.sId]=t}),n.oState.bHasMoreSubscriptions=e.metadata.hasMoreAccounts,n.loadEnoughContentForCurrentPage(t,i)})):"function"==typeof t&&t(!0)},handleDataChannelsCount:function(e,t,i){e.metadata[t]>=0&&(this.oState[t]=e.metadata[t],this.oListeners.onChangeSyncedState("i"+t.charAt(0).toUpperCase()+t.slice(1),e.metadata[t]),this.oSubscriptionsFullViewController.setChannelsCount(i,e.metadata[t]))},getNextSubscriptions:function(){var t=this,i=this.getNextSubscriptionsPostData(),n=function(t,i,n){t(!1),n&&"abort"===n.statusText||e.error("%c Loading subscriptions - Ajax ERROR")};return new Promise(function(e,s){t.oCurrentPostRequest=$.post({url:"/my-feed/accounts",data:i,success:function(i){if(!i.result)return void(i.message||n(e,0,i));if(0===i.data.loadedAccounts.length||i.data.loadedAccounts.length===Object.keys(t.oState.oSubscriptions).length){if(++t.oState.iEmptyRequests>=t.oOptions.iLimitEmptyRequests)return void n(e,0,i)}else t.oState.iEmptyRequests=0;e(i)},complete:function(){delete t.oCurrentPostRequest},error:function(t){n(e,0,t)},dataType:"json"})})},getNextSubscriptionsPostData:function(){var e=this,i={feedSettings:{},lds:Object.keys(this.oState.oSubscriptions).join(",")};return Object.keys(this.oOptions.oFeedSettings).forEach(function(t){i.feedSettings[t]=e.oOptions.oFeedSettings[t].getValue()}),t.dyn.login_info.is_logged&&t.dyn.login_info.profile||r.isTracking()&&(i.ids=r.getIds().join(",")),i},removeSubscription:function(e){this.oState.oSelected[e]&&this.toggleSelected(e,!1),delete this.oState.oSubscriptions[e],this.oState.bRedrawSelection=!0,this.redrawSubscriptions()},setUserAsSelected:function(e){this.oState.oSubscriptions[e.sId]=e,this.oState.oSubscriptionGenerators[e.sId]||(this.appendSubscription(e,!1),this.oState.iDisplayedSubs++),this.toggleSelected(e.sId,!0)},isInitialWrapperFullyVisible:function(){return window.scrollY<=this.iInitialWrapperPosY},enableFloat:function(){this.bFloatDisabled=!1},disableFloat:function(){this.bFloatDisabled=!0},checkSubsEnableOnTop:function(){if(this.oOptions.bEnableSubsFloat){var e=!1;this.isInitialWrapperFullyVisible()||(e=!0),this.bFloatDisabled&&(e=!1),e?this.enableFloatDisplaySubs():(this.disableFloatDisplaySubs(),this.isInitialWrapperFullyVisible()&&($(".selection-wrapper").width(""),this.bScrollEndedOnce=!1)),this.updateFloatSubsRestPosition()}},enableFloatDisplaySubs:function(){this.bSubsFloatActive||(e.debug("Enabling floating subs bar"),this.bSubsFloatActive=!0,this.bSubsFloatActiveAnimationCancel=!0,$(this.oOptions.$container).height($(this.oOptions.$container).height()+"px"),$(this.$wrapper).width($(this.$wrapper).width()),$(this.$wrapper).addClass("floating"),this.hideFloatSubsAnimation())},hideFloatSubsAnimation:function(){var t=this;this.fProgressiveHideBar&&clearTimeout(this.fProgressiveHideBar),this.bhideFloatSubsAnimation=!0,this.fProgressiveHideBar=setTimeout(function(){t.bhideFloatSubsAnimation=!1,t.bScrollEndedOnce=!0,t.isInitialWrapperFullyVisible()||t.bSubsFloatShown||(e.debug("Auto hide"),$(t.$wrapper).css("transition","transform 300ms linear"),$(t.$wrapper).css("transform","translateX(-50%) translateY(-101%)"),t.hideFloatDisplaySubs())},this.oOptions.iFloatHideDelay)},disableFloatDisplaySubs:function(){this.bSubsFloatShown&&this.hideFloatDisplaySubs(),this.bSubsFloatActive&&(e.debug("Disabling floating subs bar"),this.bSubsFloatActive=!1,$(this.$wrapper).removeClass("floating"))},updateFloatSubsRestPosition:function(){if(this.isInitialWrapperFullyVisible())return $(this.$wrapper).css("transition","none"),void $(this.$wrapper).css("transform","");var t=0;window.scrollY>this.iInitialWrapperPosY&&(window.scrollY>this.iInitialWrapperPosY+this.oOptions.iFloatHideDistance?(t=101,this.bScrollEndedOnce=!0):t=(window.scrollY-this.iInitialWrapperPosY)/this.oOptions.iFloatHideDistance*100),this.bSubsFloatShown?($(this.$wrapper).css("transform","translateX(-50%)"),$(this.$wrapper).css("transition","transform 300ms ease-in-out 0s")):this.bSubsFloatActive&&!this.bScrollEndedOnce?(e.info("Wrapper transform:","translateY(-"+t+"%)"),$(this.$wrapper).css("transform","translateX(-50%) translateY(-"+t+"%)"),this.bSubsFloatActiveAnimationCancel?($(this.$wrapper).css("transition","none"),this.bSubsFloatActiveAnimationCancel=!1):$(this.$wrapper).css("transition","transform 300ms linear"),this.hideFloatSubsAnimation()):($(this.$wrapper).css("transform","translateX(-50%) translateY(-101%)"),$(this.$wrapper).css("transition","transform 300ms linear"))},checkSubsDisplayOnTop:function(t){if(this.oOptions.bEnableSubsFloat){t?this.checkSubsDisplayOnTopLastEvent=t:t=this.checkSubsDisplayOnTopLastEvent;var i=!1;if(t.clientY<=$(this.$wrapper).height()&&(i=!0),!this.bSubsFloatShown&&t.clientY>this.oOptions.iShowFloatingSubsDistance&&(i=!1),$(".x-overlay-box.global-feed-account-preview-pop").is(":visible")&&(i=!1),$(".x-overlay-box.opened.purchase-form").is(":visible")&&(i=!1),i){if(this.iPreventSubsFloatDisplayStart){if(this.iPreventSubsFloatDisplayStart+this.iPreventSubsFloatDisplayDuration>Date.now())return void e.debug("Cannot open floating subs, remaining cooldown:",this.iPreventSubsFloatDisplayStart+this.iPreventSubsFloatDisplayDuration-Date.now());this.iPreventSubsFloatDisplayStart=undefined,this.iPreventSubsFloatDisplayDuration=undefined}this.showFloatDisplaySubs()}else this.bSubsFloatActive&&this.hideFloatDisplaySubs();this.updateFloatSubsRestPosition()}},preventSubsFloatDisplayTimeout:function(t){t=void 0===t?this.oOptions.iDefaultPreventFloatingSubsDuration:t,e.debug("preventSubsFloatDisplayTimeout",t),this.iPreventSubsFloatDisplayStart=Date.now(),this.iPreventSubsFloatDisplayDuration=t},showFloatDisplaySubs:function(){this.bSubsFloatShown||this.bSubsFloatActive&&(e.debug("Showing floating subs bar"),this.bSubsFloatShown=!0,$(this.$wrapper).addClass("float-displayed"))},hideFloatDisplaySubs:function(){this.bSubsFloatShown&&(this.bhideFloatSubsAnimation&&(clearTimeout(this.fProgressiveHideBar),this.bhideFloatSubsAnimation=!1,this.bScrollEndedOnce=!0),e.debug("Hiding floating subs bar"),this.bSubsFloatShown=!1,$(this.$wrapper).removeClass("float-displayed"))}},_}),define("skins/common/global_feed/feed_controller/feed_controller",["static/log","config/main","mustache","lib/tools","lib/i18n!front","skins/common/global_feed/user","skins/common/global_feed/post/post","skins/common/global_feed/feed_content/feed_content","skins/common/global_feed/feed_controller/feed_state","skins/common/global_feed/feed_data/feed_data_content","skins/common/global_feed/feed_data/feed_data_cache","skins/common/global_feed/feed_data/feed_data_service","skins/common/global_feed/feed_filters/feed_filters"],function(e,t,i,n,s,o,a,r,l,d,u,c,f){var h=function(e){n.initParams(this,e,h.GET_DEFAULT_OPTIONS())};return h.DEFAULT_OPTIONS={oOptions:{$container:undefined,oFeedContent:undefined,oFeedState:undefined,oFeedDataContent:undefined,oFeedDataService:undefined,oFeedDataCache:undefined,oFeedFilters:undefined,enable_subscriptions:!1,use_indexed_db:!0,indexed_db_key:"global-feed",minimum_width_for_2_columns:1600,nb_empty_pages_before_crash:10,nb_pages_before_load_next:4,cache_jump_to_post:!0,cache_back_forward_only:!0,cache_preserve_filters:!0,use_session_settings:!1,session_settings_timeout:288e5,use_feed_display_premium:!0},oTrackers:{tracker_ppv:undefined,tracker_membership:undefined},oClasses:{id_global_feed_content:"global-feed-content"},oTempState:{},oListeners:{onReady:undefined,emitDisplayNoSubs:undefined,emitDisplayNoSubsCheckedContent:undefined,emitDisplayNoSubsCheckedSubs:undefined,emitHasSubscriptions:undefined,onNoContent:undefined},oFunctions:{},oFilters:{}},h.GET_DEFAULT_OPTIONS=function(){return h.DEFAULT_OPTIONS},h.prototype={init:function(){var i=this;if(!this.oOptions.$container)return void e.error("No container provided");this.oStateChangeListeners={},this.oOptions.$container.empty(),this.prepareFeedComponents(),this.appendFeedComponents(),this.initCache(function(){i.initFeedComponents(),i.changeState("bDisplayPremium",t.data.displayPremium,!1),i.onReady(),$(window).on("resize",this,function(){i.onResize()}),i.onResize()})},tryRemoveGalleryHash:function(){"#gallery"===window.location.hash&&n.removeUrlHash()},getContainer:function(){return this.oOptions.$container},getContentContainer:function(){return this.oFeedContent.getContainer()},prepareFeedComponents:function(){this.oFeedContent=this.oOptions.oFeedContent?this.oOptions.oFeedContent:new r,this.oFeedState=this.oOptions.oFeedState?this.oOptions.oFeedState:new l,this.oFeedDataContent=this.oOptions.oFeedDataContent?this.oOptions.oFeedDataContent:new d,this.oFeedDataService=this.oOptions.oFeedDataService?this.oOptions.oFeedDataService:new c({oOptions:{FeedDataContent:d}}),this.oFeedDataCache=this.oOptions.oFeedDataCache?this.oOptions.oFeedDataCache:new u,this.oFeedFilters=this.oOptions.oFeedFilters||null===this.oOptions.oFeedFilters?this.oOptions.oFeedFilters:new f},appendFeedComponents:function(){this.oOptions.enable_subscriptions&&this.appendSubscriptions(),this.oFeedFilters&&this.appendFilters(),this.appendContent()},appendSubscriptions:function(){var t=this,i=$('<div id="global-feed-subscriptions"></div>');this.getContainer().append(i),require(["skins/common/global_feed/subscriptions/subscriptions_controller"],function(n){t.oSubscriptionsController=new n({oOptions:{$container:i[0],oFeedSettings:t.oFilters,bEnableSubsFloat:!0},oListeners:{onOverlayHideChanged:function(){t.resetContent()},onChangeSyncedState:function(i,n){e.debug(i,n),t.changeState(i,n)},onUserFilter:function(){t.changeState("aCurrentChannelFilters",t.oSubscriptionsController.getSelectedSubscriptions()),t.resetContent()},onCountAddedLoaded:function(e){"function"==typeof t.oListeners.emitDisplayNoSubsCheckedSubs&&t.oListeners.emitDisplayNoSubsCheckedSubs(!0),0===e?"function"==typeof t.oListeners.emitDisplayNoSubs&&t.oListeners.emitDisplayNoSubs(!0):"function"==typeof t.oListeners.emitHasSubscriptions&&t.oListeners.emitHasSubscriptions(!0)}},oState:{iNbAccountsAdded:t.getState().iNbAccountsAdded,iNbAccountsRejected:t.getState().iNbAccountsRejected},oFunctions:{init_desktop_channel_videos:t.oFunctions.init_desktop_channel_videos}})})},appendFilters:function(){var e=$('<div id="global-feed-video-filters"></div>');this.getContainer().append(e),this.oFeedFilters.oOptions.$container=e,this.oFeedFilters.oOptions.oController=this},appendContent:function(){var e=this,t=$('<div id="'+this.oClasses.id_global_feed_content+'"></div>');this.getContainer().append(t),this.oFeedContent.oOptions.$container=t,this.oFeedContent.oOptions.oController=this,this.oFeedContent.oTrackers.tracker_ppv=this.oTrackers.tracker_ppv,this.oFeedContent.oTrackers.tracker_membership=this.oTrackers.tracker_membership,Object.keys(this.oListeners).forEach(function(t){e.oFeedContent.oListeners[t]||(e.oFeedContent.oListeners[t]=e.oListeners[t])}),Object.keys(this.oFunctions).forEach(function(t){e.oFeedContent.oFunctions[t]||(e.oFeedContent.oFunctions[t]=e.oFunctions[t])}),this.oFeedContent.oListeners.onUserFilter=function(t){e.changeState("aCurrentChannelFilters",[t.sId]),e.oSubscriptionsController&&e.oSubscriptionsController.setUserAsSelected(t),e.resetContent()};var i=function(){e.getContent().toggleFeedSizeLocked(!0),e.oSubscriptionsController&&(e.oSubscriptionsController.disableFloat(),e.oSubscriptionsController.checkSubsEnableOnTop())},n=function(){e.oSubscriptionsController&&(e.oSubscriptionsController.enableFloat(),e.oSubscriptionsController.preventSubsFloatDisplayTimeout(),e.oSubscriptionsController.checkSubsEnableOnTop()),e.getContent().toggleFeedSizeLocked(!1)};this.oFeedContent.oListeners.onLightGalleryOpen=i,this.oFeedContent.oListeners.onLightGalleryClose=n,this.oFeedContent.oListeners.onQuickiesOpen=i,this.oFeedContent.oListeners.onQuickiesClose=n},initFeedComponents:function(){this.oFeedDataCache.init(),this.oFeedFilters.init(),this.oFeedContent.init()},getState:function(){return this.oFeedState},getContent:function(){return this.oFeedContent},getDataContent:function(){return this.oFeedDataContent.getContent()},getUsers:function(){return this.oFeedDataContent.getUsers()},hasMoreEvents:function(){return this.oFeedDataContent.getHasMoreEvents()},onReady:function(){"function"==typeof this.oListeners.onReady&&this.oListeners.onReady(this)},is2ColsOptionEnabled:function(){if(this.oFeedFilters){var e=Object.values(this.oFeedFilters.oFilters.displayOptions["enum"]).find(function(e){return"displayTwoColumn"===e.id});return this.oFeedFilters.oDisplaySettingsOptions.displayOptions.isElementOn(e)}return 0!=(1&this.getState().getDisplayOptions())},is2ColsMode:function(){return!(window.innerWidth<this.oOptions.minimum_width_for_2_columns)&&this.is2ColsOptionEnabled()},initCache:function(t){var i=this;if(!this.oOptions.use_indexed_db)return void t();this.oFeedDataCache.oOptions.indexed_db_key=this.oOptions.indexed_db_key;try{this.oFeedDataCache.firstIndexedDbSetup(function(){if(i.oOptions.cache_back_forward_only&&!i.oOptions.cache_preserve_filters&&!i.isBackForwardNavigation())return i.bDbInit=!0,void t();if(i.oOptions.use_indexed_db)try{if(-1!==i.injectCache(t))return}catch(n){return e.error("Unable to init index db cache (during cache injection)"),e.error(n),i.oOptions.use_indexed_db=!1,void t()}t()})}catch(n){return e.error("Unable to init index db cache (during indexed db setup)"),e.error(n),this.oOptions.use_indexed_db=!1,void t()}},injectCache:function(i){e.info("Injecting cache");var n,s=this,o=["State","Shared_State","Users","Content","Metadata"];"function"==typeof this.oFeedDataContent.getSessionSettingsKey&&(n=this.oFeedDataContent.getSessionSettingsKey(),o.push(n)),this.oFeedDataCache.chainIndexedDbGet(o,function(o){if(e.info("Cache data retrieved",o),o.State){var a=l.buildFromIndexedDb(o);s.injectCacheAlways(a)}s.isDefaultCacheEnabled()&&(o.State&&s.injectCacheRegular(a),o.Content&&d.mergeFeedDataContent(s.oFeedDataContent,d.buildFromIndexedDb(o))),s.oOptions.use_session_settings&&(o[n]?(t.data.feedSettings=s.getSessionSettings(o[n]),s.oFeedDataContent.setFeedSettings(t.data.feedSettings)):t.data.feedSettings=s.getDefaultSessionSettings(),s.oFeedDataContent.resetContent()),i()})},injectCacheAlways:function(e){this.getState().setDisplayOptions(e.getDisplayOptions())},injectCacheRegular:function(e){this.getState().setCurrentPage(e.getCurrentPage()),this.getState().setDisplayPremium(e.getDisplayPremium()),this.oOptions.cache_jump_to_post&&e.getCurrentPost()!==undefined&&(this.getState().setCurrentPost(e.getCurrentPost()),this.getState().setCurrentGroup(e.getCurrentGroup()))},getSessionSettings:function(e,t){if(t=void 0===t||t,!e||!e.feedSettings||"object"!=typeof e.feedSettings||!Object.keys(e.feedSettings).length>0)return this.getDefaultSessionSettings();if(t){var i=(new Date).getTime()-this.oOptions.session_settings_timeout;if(!e.t||e.t<i)return this.getDefaultSessionSettings()}return e.feedSettings},getDefaultSessionSettings:function(){var e={};return e.contentType=7,e.showFreePremium=15,!1!==t.data.feedShowPremiumVideos&&!1!==t.data.feedDisplayPremium||(e.showFreePremium=1),e},isDefaultCacheEnabled:function(){return!this.oOptions.cache_back_forward_only||this.isBackForwardNavigation()},isBackForwardNavigation:function(){var e=window.performance.getEntriesByType("navigation");return 0===e.length?!!window.performance&&(!!window.performance.navigation&&2===window.performance.navigation):"back_forward"===e[0].type},checkIfDefaultSessionSettings:function(e){var t=this.getDefaultSessionSettings();return e.contentType===t.contentType&&e.showFreePremium===t.showFreePremium},saveFeedDataToCache:function(){if(this.saveDataToCache(this.oFeedDataContent))return void e.info("Feed data saved",this.oFeedDataContent)},saveStateToCache:function(){if(this.saveDataToCache(this.getState()))return void e.info("State saved",this.getState())},
saveDataToCache:function(t){if(!this.oOptions.use_indexed_db)return!1;for(var i=!1,n=["getDataForIndexedDb","getDataForSharedIndexedDb"],s=0;s<n.length;s++){var o=n[s];if("function"==typeof t[o]){var a=t[o]();if(!a||a.length<1)e.warn("No data to save",t);else for(var r=0;r<a.length;r++){var l=a[r];l.key?l.value?"SessionSettings"===l.key&&this.checkIfDefaultSessionSettings(l.value.feedSettings)?this.oFeedDataCache.deleteFromDb("SessionSettings"):(this.oFeedDataCache.saveToDb(l.key,l.value,1===s),i=!0):e.warn("No value for item",l):e.warn("No key for item",l)}}}return i},onResize:function(){this.oFeedFilters.checkDisplayOptions()},resetCurrentCall:function(){delete this.oTempState.oFetching,this.oFeedDataService.resetCurrentCall()},fetchContent:function(){var t=this;if(this.oTempState.oFetching)return this.oTempState.oFetching;var i={oFeedSettings:this.oFeedDataContent.feedSettings};return"number"==typeof this.oFeedDataContent.getLastEventTime()&&(i.iTimestamp=this.oFeedDataContent.getLastEventTime()),this.getState().aCurrentChannelFilters.length>0&&(i.sChannelFilter=this.getState().aCurrentChannelFilters[0]),"function"==typeof this.oListeners.beforeFetchContent&&this.oListeners.beforeFetchContent(this,i),t.oTempState.oFetching=new Promise(function(n,s){e.debug("Fetching content type : ",i.oFeedSettings.contentType),t.oFeedDataService.getContent(i).then(function(e){t.onPostSuccess(n,e,i)})["catch"](function(i){if("abort"!==i.statusText&&e.error("Error while fetching content",i),i.responseText){var n=JSON.parse(i.responseText);n.message?t.oFeedContent.setVideosContainerToServerMessage(n.message):t.oFeedContent.appendInternalError()}s(i)})["finally"](function(){delete t.oTempState.oFetching})}),t.oTempState.oFetching},onPostSuccess:function(t,i,n){var s=this;if(e.debug("post response:",i),e.info("content: ",i.getContent().length),e.info("users: ",Object.keys(i.getUsers()).length),"function"==typeof s.oListeners.onPostSuccess){if(s.oListeners.onPostSuccess(s,t,i,n))return}s.handleContentResponse(i),t(!0)},handleContentResponse:function(e){d.mergeFeedDataContent(this.oFeedDataContent,e);var t=this.oFeedDataContent.getFeedSettings();"object"==typeof t?this.applyFeedSettings(t):this.saveFeedDataToCache(),void 0!==this.oFeedDataContent.getDisplayPremium()&&this.changeState("bDisplayPremium",this.oFeedDataContent.getDisplayPremium(),!1),0===this.getDataContent().length&&this.oFeedContent.fnHandleNoContent()},applyFeedSettings:function(e){var t=Object.keys(this.oFeedFilters.oFeedSettings).reduce(function(t,i){return e[i]?(t[i]=e[i],t):t},{});this.oFeedFilters.updateFeedSettings(t,!0),this.saveFeedDataToCache()},setLoadingPage:function(){this.oFeedContent.setLoading(r.LOADING.PAGE)},resetContent:function(){this.resetCurrentCall(),this.oFeedDataContent.resetContent(),this.oFeedDataContent.feedSettings=this.oFeedFilters.oFeedSettings,this.oFeedContent.resetContent(),$("#"+this.oClasses.id_global_feed_content).height(0),this.changeState("iCurrentPage",0,!1),this.changeState("bNoMorePosts",undefined,!1),this.changeState("bDisplayPremium",t.data.displayPremium,!1),this.oFeedContent.displayNextPage(1)},resetFilters:function(){this.oFeedFilters&&this.oFeedFilters.resetFilters(),this.resetContent()},loadAdditionalContent:function(t,i){var n=this;return this.oOptions.nb_pages_before_load_next!==undefined&&this.oOptions.nb_pages_before_load_next>0&&this.getState().getCurrentPage()<this.oOptions.nb_pages_before_load_next?(e.debug("Throttled loading of additional content, page "+this.getState().getCurrentPage()+" / "+this.oOptions.nb_pages_before_load_next),new Promise(function(e){e(!0)})):(i=i===undefined?0:i,new Promise(function(s,o){var a=n.getDataContent().length;if(n.getDataContent().length>=t)return void s(!0);e.debug("Load more ("+n.getDataContent().length+"/"+t+")");var r=n.fetchContent();if(null===r)return void s(!1);n.oTempState.oFetchingAdditionalContent=r,r.then(function(e){return e?(n.oTempState.oFetchingAdditionalContent=null,i+=n.getDataContent().length===a?1:0,a=n.getDataContent().length,i>=n.oOptions.nb_empty_pages_before_crash?void s(!1):!1!==n.hasMoreEvents()?void s(n.loadAdditionalContent(t,i)):void s(!0)):void s(!1)})["catch"](function(){s(!1)})}))},hasMaxFilters:function(){return!this.oFeedFilters||this.oFeedFilters.isFeedSettingsMax()},addStateChangeListener:function(e,t,i){i="before"===i||"after"===i?i:"after","string"==typeof e&&"function"==typeof t&&(this.oStateChangeListeners[e]===undefined&&(this.oStateChangeListeners[e]={before:[],after:[]}),this.oStateChangeListeners[e][i].push(t))},triggerStateChangeListener:function(e,t,i,n){this.oStateChangeListeners[e]!==undefined&&this.oStateChangeListeners[e][t].map(function(e){e(i,n)})},changeState:function(t,i,n){e.debug("State change:",t,i),n=void 0===n||n;var s=this.getState()[t];this.triggerStateChangeListener(t,"before",s,i),this.getState().setFromKey(t,i),this.triggerStateChangeListener(t,"after",s,i),n&&this.oOptions.use_indexed_db&&this.saveStateToCache()},handleHideFeed:function(){e.debug("FeedController - Hide feed"),this.oFeedContent&&this.oFeedContent.$scrollToTop&&this.oFeedContent.$scrollToTop.remove()},handleShowFeed:function(){e.debug("FeedController - Show feed"),this.oFeedContent.initScrollToTop(),this.oFeedContent.onResize(undefined,!0),xv.sda&&"function"==typeof xv.sda.disableFooterAds&&!this.getState().getNoMorePosts()&&xv.sda.disableFooterAds()}},h}),define("text!skins/common/global_feed/no_subs/tpls/cover.mustache",[],function(){return'<div class="no-subs">\n\t<div class="tutorial-section">\n\t\t<p class="sub-more-text">{{{ sSubsText }}}</p>\n\t</div>\n\t<div class="tutorial-section">\n\t\t<p>{{{ sNoAccountDescription }}}</p>\n\t\t{{{ sDescription }}}\n\t</div>\n\t{{{ sTutorial }}}\n</div>'}),define("text!skins/common/global_feed/no_subs/tpls/tutorial.mustache",[],function(){return'<div class="tutorial-section">\n\t<h3 class="text-danger text-center">{{{ sHowToSubscribe }}}</h3>\n\t<div class="mobile-col size-{{ iNbImages }}">\n\t\t<div class="tutorial-thumb">\n\t\t\t<div class="legend">{{{ sMySubsThumbVideoPage }}}</div>\n\t\t\t<img\n\t\t\t\tsrc="{{{ sImgPath }}}assets/subscribe2024-1-thumb.jpg"\n\t\t\t\tdata-src="{{{ sImgPath }}}assets/subscribe2024-1.jpg"\n\t\t\t\ttitle="{{{ sMySubsThumbVideoPage }}}"\n\t\t\t\tclass="img-responsive"\n\t\t\t/>\n\t\t</div>\n\t\t<div class="tutorial-thumb">\n\t\t\t<div class="legend">{{{ sMySubsThumbProfile }}}</div>\n\t\t\t<img\n\t\t\t\tsrc="{{{ sImgPath }}}assets/subscribe2024-2-thumb.jpg"\n\t\t\t\tdata-src="{{{ sImgPath }}}assets/subscribe2024-2.jpg"\n\t\t\t\ttitle="{{{ sMySubsThumbProfile }}}"\n\t\t\t\tclass="img-responsive"\n\t\t\t/>\n\t\t</div>\n\t\t<div class="tutorial-thumb">\n\t\t\t<div class="legend">{{{ sModelAndChannelListings }}}</div>\n\t\t\t<img\n\t\t\t\tsrc="{{{ sImgPath }}}assets/subscribe2024-3-thumb.jpg"\n\t\t\t\tdata-src="{{{ sImgPath }}}assets/subscribe2024-3.jpg"\n\t\t\t\ttitle="{{{ sModelAndChannelListings }}}"\n\t\t\t\tclass="img-responsive"\n\t\t\t/>\n\t\t</div>\n\t\t<div class="tutorial-thumb">\n\t\t\t<div class="legend">{{{ sInThumbMenu }}}</div>\n\t\t\t<img\n\t\t\t\tsrc="{{{ sImgPath }}}assets/subscribe2024-5-thumb.jpg"\n\t\t\t\tdata-src="{{{ sImgPath }}}assets/subscribe2024-5.jpg"\n\t\t\t\ttitle="{{{ sInThumbMenu }}}"\n\t\t\t\tclass="img-responsive"\n\t\t\t/>\n\t\t</div>\n\t\t{{#bSubsribeWithStar}}\n\t\t<div class="tutorial-thumb">\n\t\t\t<div class="legend">{{{ sSubsribeWithStar }}}</div>\n\t\t\t<img\n\t\t\t\tsrc="{{{ sImgPath }}}assets/subscribe2024-4-red-thumb.jpg"\n\t\t\t\tdata-src="{{{ sImgPath }}}assets/subscribe2024-4-red.jpg"\n\t\t\t\ttitle="{{{ sSubsribeWithStar }}}"\n\t\t\t\tclass="img-responsive"\n\t\t\t/>\n\t\t</div>\n\t\t{{/bSubsribeWithStar}}\n\t</div>\n</div>\n<div class="tutorial-section">\n\t<div id="bottom-buttons">\n\t\t{{#bSubscribeWithCookies}}\n\t\t\t<p class="text-center">{{{ sVideoCookieClear }}}</p>\n\t\t{{/bSubscribeWithCookies}}\n\t\t<div class="buttons mobile-col">\n\t\t\t{{#bSubscribeWithCookies}}\n\t\t\t<button type="button" class="btn btn-xs btn-danger" id="toggle-tracking">{{{ sTrackingText }}}</button>\n\t\t\t{{/bSubscribeWithCookies}}\n\t\t\t<a href="{{{ sInfoDomain }}}/contact/?subject=feedback" target="_blank" class="btn btn-xs btn-default">{{{ sSendFeedbackPage }}}</a>\n\t\t</div>\n\t</div>\n</div>'}),define("skins/common/global_feed/no_subs/no_subs",["config/main","static/utils","mustache","lib/i18n!front","lib/tools","skins/common/tracker/video_subs","lib/helpers/viewer/lightgallery-generic-manager","text!skins/common/global_feed/no_subs/tpls/cover.mustache","text!skins/common/global_feed/no_subs/tpls/tutorial.mustache"],function(e,t,i,n,s,o,a,r,l){var d={oOptions:{bHasSubscriptions:!1},oTemplates:{no_subs_cover:r,no_subs_tutorial:l},oTranslations:{howtosubscribe:n.__("howtosubscribe"),model_and_channel_listings:n.__("my_subs_thumb.model_and_channel_listings"),video_page:n.__("my_subs_thumb.video_page"),end_video:n.__("my_subs_thumb.end_video"),profile:n.__("my_subs_thumb.profile"),with_star:n.__("my_subs_thumb.with_star"),in_thumb_menu:n.__("my_subs_thumb.in_thumb_menu"),login_to_save:n.__("my_subs.login_to_save",{"%start_login%":'<a href="/account" id="login-link">',"%end_login%":"</a>"}),create_profile_to_save:n.__("my_subs.create_profile_to_save",{"%start_create%":'<a href="/account/create_profile">',"%end_create%":"</a>"}),no_account_description:n.__("my_subs.no_account_description"),video_cookie_clear:n.__("my_subs.video_cookie_clear"),send_feedback_page:n.__("send_feedback_page"),stop_tracking:n.__("profile.tracking.stop_subs_and_del"),start_tracking:n.__("profile.tracking.store_subs"),are_you_sure:n.__("misc.are_you_sure"),device_not_compatible:n.__("misc.device_not_compatible"),sub_more:n.__("my_subs.sub_more"),no_subs_yet:n.__("my_subs.no_subs_yet")}},u=function(e){s.initParams(this,e,d)};return u.prototype={appendTo:function(t){var n=!!e.dyn.premium,s=n?5:4,o=$(i.render(this.oTemplates.no_subs_cover,{sTutorial:i.render(this.oTemplates.no_subs_tutorial,{sHowToSubscribe:this.oTranslations.howtosubscribe,sMySubsThumbVideoPage:this.oTranslations.video_page,sMySubsThumbProfile:this.oTranslations.profile,sModelAndChannelListings:this.oTranslations.model_and_channel_listings,sInThumbMenu:this.oTranslations.in_thumb_menu,sImgPath:e.domains["static"]+"/v3/img/skins/default/",sVideoCookieClear:this.oTranslations.video_cookie_clear,sTrackingText:this.getCurrentTrackingText(),sSendFeedbackPage:this.oTranslations.send_feedback_page,sInfoDomain:e.domains.info,bSubscribeWithCookies:!e.dyn.login_info.is_logged||!e.dyn.login_info.profile,iNbImages:s,bSubsribeWithStar:n,sSubsribeWithStar:this.oTranslations.with_star}),sSubsText:this.oOptions.bHasSubscriptions?this.oTranslations.sub_more:this.oTranslations.no_subs_yet,sDescription:this.getDescription(),sNoAccountDescription:this.oTranslations.no_account_description}));t.append(o),this.initLoginLink(),this.initToggleTracking(),this.initLightGallery()},initLoginLink:function(){$("#login-link").on("click",function(e){e.preventDefault(),require(["skins/default/form/login"],function(e){e.open()})})},getDescription:function(){var t=!!e.dyn.login_info.is_logged,i=!!e.dyn.login_info.profile;return t?i?"":"<p>"+this.oTranslations.create_profile_to_save+"</p>":"<p>"+this.oTranslations.login_to_save+"</p>"},initToggleTracking:function(){$("#toggle-tracking").on("click",this.updateTracking.bind(this))},getCurrentTrackingText:function(){return o.isTracking()?this.oTranslations.stop_tracking:this.oTranslations.start_tracking},updateTrackingText:function(){$("#toggle-tracking").text(this.getCurrentTrackingText())},updateTracking:function(){if(o.isTracking())window.confirm(t.unescape(this.oTranslations.are_you_sure))&&(o.stopTracking(),window.location.reload());else{if(!o.canTrack())return void window.alert(t.unescape(this.oTranslations.device_not_compatible));o.startTracking()}this.updateTrackingText()},initLightGallery:function(){new a($(".tutorial-section"),$("[data-src]"))}},u}),define("skins/common/global_feed",["static/log","config/main","mustache","lib/tools","lib/i18n!front","skins/common/tracker/video_subs","skins/common/global_feed/feed_controller/feed_controller","skins/common/global_feed/no_subs/no_subs"],function(e,t,i,n,s,o,a,r){var l={oTemplates:{},oClasses:{id_global_feed:"page-videos-content"},oTempState:{bDisplayNoSubs:!1,bHasSubscriptions:!1,bDisplayNoSubsCheckedSubs:!1,bDisplayNoSubsCheckedContent:!1,bHasAppendedNoSubs:!1},oFunctions:{onVideoAdd:function(e){},init_desktop_channel_videos:undefined}},d=function(e){n.initParams(this,e,l),this.oController=new a({oOptions:{$container:$("#"+this.oClasses.id_global_feed),enable_subscriptions:!0},oTrackers:{tracker_ppv:"global_feed_ppv",tracker_membership:"global_feed_membership"},oListeners:this.getControllerListeners(),oFunctions:this.oFunctions}),this.oController.tryRemoveGalleryHash(),this.init()};return d.prototype={init:function(){$("body").addClass("with-global-feed"),this.oController.init()},getControllerListeners:function(){var i=this;return{emitDisplayNoSubsCheckedContent:function(t){e.debug("emitDisplayNoSubsCheckedContent",t),i.oTempState.bDisplayNoSubsCheckedContent=t,i.tryExecAppendNoSubs()},emitDisplayNoSubsCheckedSubs:function(t){e.debug("emitDisplayNoSubsCheckedSubs",t),i.oTempState.bDisplayNoSubsCheckedSubs=t,i.tryExecAppendNoSubs()},emitHasSubscriptions:function(t){e.debug("emitHasSubscriptions",t),i.oTempState.bHasSubscriptions=t,i.tryExecAppendNoSubs()},emitDisplayNoSubs:function(t){e.debug("emitDisplayNoSubs",t),i.oTempState.bDisplayNoSubs=t,i.tryExecAppendNoSubs()},onNoContent:function(){e.debug("onNoContent"),i.tryExecAppendNoSubs()},onPostSuccess:function(e,t,i,n){return window.xv.conf.is_dev,!1},beforeFetchContent:function(e,n){e.getState().aCurrentChannelFilters.length>0||t.dyn.login_info.is_logged||t.dyn.login_info.profile||(o.isTracking()&&(n.sIds=o.getIds().join(",")),n.sIds||(e.oListeners.emitDisplayNoSubs(!0),e.oListeners.emitDisplayNoSubsCheckedContent(!0),i.tryExecAppendNoSubs()))}}},canDisplayNoSubs:function(){return!this.oController.oFeedFilters.canResetFeedSettings()&&!this.oController.getState().isFeedFilteringUser()},tryExecAppendNoSubs:function(){if(!this.oTempState.bHasAppendedNoSubs&&this.oTempState.bDisplayNoSubsCheckedContent&&this.oTempState.bDisplayNoSubsCheckedSubs&&this.oTempState.bDisplayNoSubs){if(!this.canDisplayNoSubs())return void this.oController.oFeedContent.appendNoMorePosts();this.oTempState.bHasAppendedNoSubs=!0,$("#global-feed-video-filters").addClass("disabled"),this.oController.getContentContainer().empty(),new r({oOptions:{bHasSubscriptions:this.oTempState.bHasSubscriptions}}).appendTo(this.oController.getContentContainer()),this.oController.oSubscriptionsController.hideSubscriptions(),this.oController.oFeedContent.oTempState.bDisabledFeed=!0,this.oController.oFeedContent.oTempState.bNoSubs=!0,this.oController.oFeedContent.updateFeedHeight()}}},d}),define("skins/common/access/need_verified_email",["config/main","skins/common/email_verification/email_verification_modal"],function(e,t){if(e.data.action_need_verified_email){var i=function(){new t(e.data.action_need_verified_email).show()};i(),$(".display-popup-verified-email-needed").click(function(e){e.preventDefault(),i()})}}),define("skins/default/global_feed",["config/main","skins/common/global_feed","skins/default/mozaique/thumb_block_common_init","skins/default/mozaique/thumb_block_menu","skins/default/header/header"],function(e,t,i,n){new t({oFunctions:{onVideoAdd:function(e){i.init_listing(e,{rotator:!1,oBtnOptions:{oOptions:{bPreventScrollToTop:!0}}})},init_desktop_channel_videos:function(e){i.init_listing(e,{tb_menu:!1,purchase_form:!1})}}}),n.addEntryToDefaultOrder("report"),e.data.action_need_verified_email&&require(["skins/common/access/need_verified_email"])}),define("skins/default/http_status",["./header/header"],function(){}),define("lib/helpers/suggest_tracker",["static/log","static/cookies","config/main","skins/common/basic_feature"],function(e,t,i,n){var s=function(){this.thumb_list=!1,this.view_list={},this.view_list.t=[],this.view_list.s=[],this.view_list.p=[],this.view_list.r=[],this.cookie_name="pending_thumb",this.iCookieExpires=108e5,n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)?this.init_tracking():this.saveCookie(1)};return s.prototype={init_tracking:function(){i.dyn.is_premium?this.thumb_list=$(".thumb-block").not(".thumb-block-premium-feed-account"):this.thumb_list=$(".video-suggest");var n=t.get(this.cookie_name);if(n){var s=JSON.parse(n);s&&(this.view_list=s)}e.debug("suggest_tracker --- init_tracking",{thumb_list:this.thumb_list});var o=2e3;i.dyn.is_desktop&&(o=6e3);var a=this;setInterval(function(){i.dyn.is_premium?a.thumb_list=$(".thumb-block").not(":hidden").not(".thumb-block-premium-feed-account"):a.thumb_list=$(".video-suggest").not(":hidden"),a.checkViewed()},o),a.checkViewed(),window.addEventListener("beforeunload",function(){a.saveCookie()})},checkViewed:function(){if(!this.thumb_list)return void e.error("Suggest : No video detected");var t=this;this.thumb_list=jQuery.grep(this.thumb_list,function(n){if(!n.getBoundingClientRect)return e.error("Failed for ",n),!1;var s=n.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight;if(s.top<0)return e.info("suggest_tracker --- checkViewed --- return true","rect.top < 0"),n.last_seen=0,!0;if(s.left<0)return e.info("suggest_tracker --- checkViewed --- return true","rect.left < 0"),n.last_seen=0,!0;if(s.top>o-s.height)return e.info("suggest_tracker --- checkViewed --- return true","rect.top >  (windowsHeight - rect.height)"),n.last_seen=0,!0;if(!n.last_seen)return e.info("suggest_tracker --- checkViewed --- return true","!thumb.last_seen"),n.last_seen=(new Date).getTime(),!0;if((new Date).getTime()-n.last_seen<900)return e.info("suggest_tracker --- checkViewed --- return true","skip"),!0;n.setAttribute("data-seen","true");var a=n.getAttribute("data-id"),r=n.getAttribute("data-sub");return a?(!t.view_list.t.includes(a)&&t.view_list.t.length<50&&t.view_list.t.push(a),$(n).hasClass("suggest-subscribed")&&(t.view_list.s.includes(a+"-"+r)||t.view_list.s.push(a+"-"+r)),($(n).hasClass("suggest-premium")||i.dyn.is_premium)&&t.view_list.p.length<50&&(t.view_list.p.includes(a)||t.view_list.p.push(a)),$(n).hasClass("suggest-regular")&&(t.view_list.r.includes(a)||t.view_list.r.push(a)),e.info("suggest_tracker --- checkViewed --- return false","remove at end"),!1):(e.error("Bad thumb id",n.id),!1)})},saveCookie:function(i){e.debug("suggest_tracker --- saveCookie",{view_list:JSON.stringify(this.view_list)}),t.setLocal(this.cookie_name,JSON.stringify(this.view_list),"number"==typeof i?i:this.iCookieExpires,"/")}},new s}),define("skins/common/listing/dates_link_pagination",["config/main","static/cookies"],function(e,t){var i=$("#best-months,#date-links-pagination");if(0!==i.length){var n=i.find(".hidden"),s=i.find(".view-more"),o=!1;s.on("click",function(){o=!o,s.html(o?"-":"+"),n.toggleClass("hidden",!o)}),t.get("hexavid_"+e.data.moz_type)&&(s.click(),t.setLocal("hexavid_"+e.data.moz_type,"",1e3,"/"))}}),define("skins/common/mozaique/vids_list_by_uploader",["lib/i18n!front","lib/tools","lib/helpers/inline_loader","skins/default/profile/subscribe/btn","skins/common/history/one_info_tracker","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s,o){var a=function(){this.scroll_to_profile_shortcut($(".profiles-shortcuts a")),$(".eventslist .header .user-subscribe").each(function(){new n($(this),$(this).data("user-profile"),$(this).data("user-id")),$(this).css("display","inline-block")});var e=this;if($(".eventslist a.more").on("click",function(t){t.preventDefault(),e.show_more($(this))}).each(function(){e.update_show_more_count($(this))}),$(".eventslist a.less").on("click",function(t){t.preventDefault(),e.show_less_min($(this))}),s.canTrack("channVids_scrollPos")){s.get("channVids_pageId")!==this.get_page_identifier()?(s.unset("channVids_scrollPos"),s.set("channVids_pageId",this.get_page_identifier())):this.scroll_to_profile(s.get("channVids_scrollPos"));var t=!1;$(window).on("scroll",function(){!1!==t&&(clearTimeout(t),t=!1),t=setTimeout(function(){var t=!1,i=!1,n=$(window).scrollTop()+e.get_mobile_header_marge();$(".eventslist .activity-event").each(function(){i||($(this).offset().top-n>0?i=!0:t=this)}),$(t).length>0&&s.set("channVids_scrollPos",$(t).data("profile"))},500)})}var i=!1;$(window).on("resize",function(){!1!==i&&(clearTimeout(i),i=!1),i=setTimeout(function(){$(".eventslist a.more").each(function(){e.update_show_more_count($(this))})},500)})};return a.prototype={get_page_identifier:function(){return xv.conf.data.premium_listing_timerange+"_"+xv.conf.data.premium_listing_current_page},get_mobile_header_marge:function(){return xv.header.is_mobile()?48:8},scroll_to_profile:function(e){if("string"==typeof e&&e.length>0){var t=$(".eventslist .activity-event[data-profile="+e+"]").first(),i=this;t.length>0&&$("html, body").scrollTop(t.offset().top-i.get_mobile_header_marge())}},scroll_to_profile_shortcut:function(e){var t=this;e.each(function(){$(this).data("profile")&&$(this).on("click",function(e){e.preventDefault(),t.scroll_to_profile($(this).data("profile"))})})},show_more:function(n){var s=n.data("next-page"),a=n.parents(".activity-event"),r=!n.hasClass("first-load")&&a.hasClass("show-less");if(!s||r)return this.show_more_min(n),!1;var l=i.getSafe("after"," "+e.__("loading.loading")).getNode().insertAfter(n),d=this;$.post(s,function(i){if(!i.result)return void o.alert('<strong class="text-danger">'+e.__("misc.loading_failed")+"</strong>");if(i.result){var s=$(t.replaceThumbcast(i.html.replace(/\\'/gi,"'")));a.find(".mozaique").children(".thumb-block").not(".show-more-less-vids").last().after(s),t.executePendingPrepare(a.find(".thumb-block")),s.addClass("extra-thumb-block")}n.removeClass("first-load"),i.next_page?n.data("next-page",i.next_page):n.data("next-page",!1).addClass("no-more-to-load").off("click").on("click",function(e){e.preventDefault(),d.show_more_min($(this))}),a.removeClass("show-less");var r=parseInt(a.data("total-count"));n.find(".count").html(r-a.find(".thumb-block:visible").not(".show-more-less-vids").length),d.update_show_more_count(n)},"json").fail(function(){o.alert('<strong class="text-danger">'+e.__("misc.loading_failed")+"</strong>")}).always(function(){l.remove()})},show_more_min:function(e){e.parents(".activity-event").removeClass("show-less"),this.update_show_more_count(e)},show_less_min:function(e){var t=e.parents(".activity-event").addClass("show-less"),i=Math.min(100,$(window).height()/4),n=$("html, body").scrollTop(),s=$(window).innerHeight(),o=t.offset().top;(o<n||o>n+s)&&$("html, body").scrollTop(t.offset().top-i),this.update_show_more_count(t.find("a.more"))},update_show_more_count:function(e){var t=e.parents(".activity-event"),i=parseInt(t.data("total-count"));e.find(".count").html("("+(i-t.find(".thumb-block:visible").not(".show-more-less-vids").length)+")")}},new a}),define("skins/common/mozaique/premium_tab_listing",["config/main","static/cookies","skins/common/history/one_info_tracker"],function(e,t,i){var n=function(){if(this.scroll_to_profile_shortcut($(".profiles-shortcuts a")),i.canTrack()){var e=this;this.bIncreased=!1,this.oProfCount={},this.aProfList=[],$(".eventslist .activity-event[data-profile]").each(function(){var t=$(this).data("order-id");e.oProfCount[t]=0,e.aProfList.push(t),$(this).find(".thumb-block a[href]").on("click",function(i){if(!0===e.bIncreased)return void(window.location.href=$(this).prop("href"));i.preventDefault(),e.bIncreased=!0,e.increase_profile_count_cookie(t),$(this).trigger("click")})})}};return n.prototype={get_mobile_header_marge:function(){return xv.header.is_mobile()?"xnxx"===e.sitename?62:48:8},scroll_to_profile:function(e){if("string"==typeof e&&e.length>0){var t=$(".eventslist .activity-event[data-profile="+e+"]").first(),i=this;t.length>0&&$("html, body").scrollTop(t.offset().top-i.get_mobile_header_marge())}},scroll_to_profile_shortcut:function(e){var t=this;e.each(function(){$(this).data("profile")&&$(this).on("click",function(e){e.preventDefault(),t.scroll_to_profile($(this).data("profile"))})})},increase_profile_count_cookie:function(e){var n=i.get("premiumSuggestPageOrder");for($.isArray(n)||(n=[]),n.unshift(e);n.length>50;)n.pop();i.set("premiumSuggestPageOrder",n);for(var s in n)e=n[s],"undefined"==typeof this.oProfCount[e]&&(this.oProfCount[e]=0,this.aProfList.push(e)),this.oProfCount[e]++;var o=this;this.aProfList.sort(function(e,t){return Math.round((o.oProfCount[t]-o.oProfCount[e])/10)}),t.setLocal("premiumSuggestPageOrder",this.aProfList.join(","),432e5,"/")}},new n}),define("skins/common/mozaique/vids_list_by_channel",["config/main","skins/common/profile/sub_actions","skins/common/tracker/video_subs","skins/default/profile/subscribe/btn"],function(e,t,i,n){var s=function(){this.channels={},this.update_channels_infos_in_tb($(".mozaique"))};return s.prototype={update_channels_infos_in_tb:function(n){var s=this;if($(".thumb-block .thumb-over .sub",n).each(function(){var e=$(this).data("user-id");e&&(s.channels[e]||(s.channels[e]={sub_btn:$(this),profile:$(this).data("profile"),csrf:null,is_follower:null,is_owner:null}))}),e.dyn.login_info.is_logged&&e.dyn.login_info.profile)t.loadSubInfoListUsers(e.dyn.login_info.profile,Object.keys(this.channels),function(t){if(t.result&&t.users){for(var i in t.users)"undefined"!=typeof s.channels[i]&&(s.channels[i].is_owner=i===e.dyn.login_info.id,s.channels[i].is_follower=t.users[i].is_follower,s.channels[i].csrf=t.users[i].csrf);s.update_channels_indic_in_tb()}});else if(i.isTracking()){var o=i.getIds();for(var a in this.channels)this.channels[a].is_follower=-1!==o.indexOf(a);this.update_channels_indic_in_tb()}},update_channels_indic_in_tb:function(){for(var e in this.channels)if(this.channels[e].is_follower){var t=this;!function(){var i=e;new n($('.thumb-block .thumb-over .sub[data-user-id="'+i+'"]'),t.channels[i].profile,i,t.channels[i].csrf,t.channels[i].is_follower,t.channels[i].is_owner,{subed_icf:!1,btn_display:!1,tooltip_class:"no-arrow",end_function:function(){t.channels[i].sub_btn.removeClass("sub-checked"),setTimeout(function(){t.channels[i].sub_btn.hide()},500)}})}()}}},new s}),define("skins/default/mozaique",["lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","./header/header","skins/common/listing/dates_link_pagination"],function(){xv.conf.data.premium_listing_timerange&&require(["lib/tools","skins/default/mozaique/thumb_block_common_init","skins/common/mozaique/vids_list_by_uploader"],function(e,t){e.addPendingPrepareList(function(e){t.init_listing(e,{is_thumb_list:!0,rotator:!1})})}),xv.conf.dyn.premium_tab_listing&&require(["skins/common/mozaique/premium_tab_listing"]),$(".mozaique .thumb-block .thumb-over a .name").length>0&&require(["skins/common/mozaique/vids_list_by_channel"])}),define("skins/default/lang",["./mozaique"],function(){}),define("skins/default/langidx",["./header/header"],function(){}),define("skins/common/main_regional",["config/main","lib/tools","lib/helpers/thumbs_rotator"],function(e,t,i){if(e.data.id_regional){var n=$(document),s=$("#content .mozaique"),o=1,a=!1,r=s.children().last(),l=r.offset().top,d=function(e){if($.trim(e).length<200)return void(o=!1);o++,s.append(t.replaceThumbcast(e.replace(/\\'/gi,"'"))),t.executePendingPrepare(s.find(".thumb-block")),i(r.nextAll(),!0),r=s.children().last(),l=r.offset().top},u=function(){a||!1===o||n.scrollTop()+2.5*$(window).height()<l||(a=!0,$.get("/regional-home/"+e.data.id_regional+"/"+o,d,"html").always(function(){a=!1,u()}))};$(window).on("scroll",u).on("resize",function(){l=r.offset().top,u()})}}),define("text!skins/common/player/quickies/templates/latList.mustache",[],function(){return'<div class="quickies-lat quickies-lat--{{{ sOrientation }}}{{#bIsExpandedListing}} quickies-lat--expanded-view{{/bIsExpandedListing}}">\n\t<p class="quickies-lat__title">\n\t\t<span class="icon-f icf-bolt"></span> {{{ sTitle }}}\n\t\t{{#bCanRotate}}\n\t\t\t<span class="quickies-lat__rotate-btn">\n\t\t\t\t<span class="icon-f icf-screen-rotation"></span>\n\t\t\t\t<span class="icon-f icf-screen-both-orientation"></span>\n\t\t\t</span>\n\t\t{{/bCanRotate}}\n\t\t{{#sQuickiesCount}}<span class="quickies-lat__title-count">{{{ sQuickiesCount }}}</span>{{/sQuickiesCount}}\n\t\t{{#bHasFilters}}<button class="quickies-lat__filter-btn" type="button"><span class="quickies-lat__filter-btn__label">{{{ sFilter }}}</span> <span class="icon-f icf-caret-down"></span></button>{{/bHasFilters}}\n\t\t{{^bHasFilters}}{{^bIsExpandedListing}}<button class="quickies-lat__expand-btn" type="button"><span class="quickies-lat__filter-btn__label">{{{ sExpand }}}</span> <span class="icon-f icf-angle-down"></span></button>{{/bIsExpandedListing}}{{/bHasFilters}}\n\t\t{{#bIsExpandedListing}}\n\t\t\t<button type="button" class="btn btn-default quickies-lat__shrink-btn"><span class="quickies-lat__filter-btn__label">{{{ sShrink }}}</span> <span class="icon-f icf-angle-up"></span></button>\n\t\t{{/bIsExpandedListing}}\n\t</p>\n\t<div class="quickies-lat__list mozaique cust-nb-cols"></div>\n\t{{#bIsExpandedListing}}\n\t\t<div class="quickies-lat__load-more-btn-container">\n\t\t\t<button type="button" class="btn btn-default quickies-lat__load-more-btn"><span class="icon-f icf-plus"></span> {{{ sLoadMore }}}</button>\n\t\t\t<button type="button" class="btn btn-default quickies-lat__shrink-btn"><span class="quickies-lat__filter-btn__label">{{{ sShrink }}}</span> <span class="icon-f icf-bolt"></span> <span class="icon-f icf-angle-up"></span></button>\n\t\t</div>\n\t{{/bIsExpandedListing}}\n\t<div class="quickies-lat__loader">{{{ sLoader }}}</div>\n</div>'}),define("text!skins/common/player/quickies/templates/latListFilters.mustache",[],function(){return'<div class="quickies-lat__filters">\n\t{{#aFilters}}<button class="quickies-lat__filters__filter{{#bActive}} quickies-lat__filters__filter-current{{/bActive}}" type="button" data-key="{{{ sKey }}}"{{#bActive}} class="is-current"{{/bActive}}>{{{ sLabel }}}</button>{{/aFilters}}\n</div>'}),define("skins/common/player/quickies/latList",["static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/scrollbar","lib/helpers/popup","lib/helpers/inline_loader","./constants","./manager","text!./templates/latList.mustache","text!./templates/latListFilters.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=function(e,t){this.setMainContainer(e),this.oOptions={},n.initParams(this.oOptions,t,h);var i=new d(!0),s=[];if("object"==typeof this.oOptions.aSortFilters&&this.oOptions.aSortFilters.length){var o=null,a="string"==typeof this.oOptions.sSortFilter&&-1!==this.oOptions.aSortFilters.indexOf(this.oOptions.sSortFilter)?this.oOptions.sSortFilter:d.GET_SAVED_ORDER();for(var r in this.oOptions.aSortFilters){var u=this.oOptions.aSortFilters[r],c=d.O_AVAILABLE_SORT_FILTERS[u];void 0!==c&&(c=JSON.parse(JSON.stringify(c)),a&&c.sKey===a?(null!==o&&(o.bActive=!1),o=c,c.bActive=!0):null===o?(o=c,c.bActive=!0):c.bActive=!1,s.push(c))}o&&i.setSortFilter(o.sKey)}this.oOptions.aSortFilters=s,this.initAvailableOrientations(this.oOptions.oAvailableOrientations,i,this.oOptions.oPreloadedVideos),this.initOrientation(this.oOptions.sOrientation,i),this.initPreloadedVideosData(this.oOptions.oPreloadedVideos,i,i.getSortFilter()),this.initManagerEvents(i),this.oManagers={},null!==this.oOptions.iFullNavProfileId&&i.setFullNavigationToProfile(this.oOptions.iFullNavProfileId),this.bIsExpandedMaxLoaded=!1,this.oOptions.bIsExpandedListing?i.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoadExtended):i.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoad),this.fnOnExpandedViewChangeCallback=null,"mozaique"===this.oOptions.sContainerMode&&(this.$mozTbs=this.$mainContainer.find(".thumb-block")),this.oContainers={},this.oLists={},this.oSideScrollBars={},this.oContainersAdded={},this.$containerToReplace=null,
this.sContainerToReplaceKey=null,this.oManagers[this.getCurrentElementKey()]=i,this.aLoadedIds=[],this.aAddedIds=[],$(window).on("resize",this,this.onResizeScreen),$(window).on(l.EVENT.UPDATE_LIST,this,this.onUpdateList).on("col-changed",this,this.onColChanged),i.setOnLoaded(function(){i.openWithHash()})},h={iFullNavProfileId:null,iVideoCountInLatList:16,bInfiniteLatListLoad:!0,iForcedCountVideosToLoad:null,iForcedCountVideosToLoadExtended:50,bIsExpandedListing:!1,sContainerMode:"simpleContainer",iMozLineBefore:1,sOrientation:null,aSortFilters:[],sSortFilter:d.S_DEFAULT_SORT_FILTER_KEY,oPreloadedVideos:{},oAvailableOrientations:{bHorizontal:null,bVertical:null,bAll:null},oCountByOrientations:{iHorizontal:0,iVertical:0,iAll:0}};return h.oPreloadedVideos[d.S_ORIENTATION_VERTICAL]=!1,h.oPreloadedVideos[d.S_ORIENTATION_HORIZONTAL]=!1,f.prototype={initAvailableOrientations:function(e,t,i){if("object"!=typeof e||null===e||"boolean"!=typeof e.bHorizontal||"boolean"!=typeof e.bVertical||"boolean"!=typeof e.bAll)if("object"==typeof i&&"object"==typeof i[d.S_ORIENTATION_VERTICAL]&&"object"==typeof i[d.S_ORIENTATION_HORIZONTAL]){var n=i[d.S_ORIENTATION_VERTICAL].length,s=i[d.S_ORIENTATION_HORIZONTAL].length;this.oAvailableOrientations={bHorizontal:s,bVertical:n,bAll:s&&n}}else this.oAvailableOrientations=d.O_AVAILABLE_ORIENTATIONS;else this.oAvailableOrientations=e;t.setAvailableOrientations(this.oAvailableOrientations)},initOrientation:function(e,t){"string"==typeof e&&t.setOrientation(e),this.sOrientation=t.getOrientation(),this.sOriginalOrientation=this.sOrientation},initPreloadedVideosData:function(e,t,i){if("object"!=typeof this.aPreloadedVideosData&&(this.aPreloadedVideosData={}),"object"!=typeof this.aPreloadedVideosData[i]&&(this.aPreloadedVideosData[i]={}),"object"!=typeof e||"object"!=typeof e[d.S_ORIENTATION_VERTICAL]||"object"!=typeof e[d.S_ORIENTATION_HORIZONTAL])return this.aPreloadedVideosData[i][d.S_ORIENTATION_VERTICAL]=[],void(this.aPreloadedVideosData[i][d.S_ORIENTATION_HORIZONTAL]=[]);this.aPreloadedVideosData[i]=e,this.setPreloadedVideosToManager(t)},setPreloadedVideosToManager:function(e){var t=e.getSortFilter();if("undefined"!=typeof this.aPreloadedVideosData[t]){var i=e.getOrientation(),n=this.aPreloadedVideosData[t][d.S_ORIENTATION_VERTICAL].length,s=n?this.aPreloadedVideosData[t][d.S_ORIENTATION_VERTICAL]:[],o=this.aPreloadedVideosData[t][d.S_ORIENTATION_HORIZONTAL].length,a=o?this.aPreloadedVideosData[t][d.S_ORIENTATION_HORIZONTAL]:[];if(i===d.S_ORIENTATION_VERTICAL)e.addToVideoList(s);else if(i===d.S_ORIENTATION_HORIZONTAL)e.addToVideoList(a);else if(i===d.S_ORIENTATION_ALL)if(o)if(n){for(var r=Math.max(s.length,a.length),l=[],u=0;u<r;u++)"undefined"!=typeof a[u]&&l.push(a[u]),"undefined"!=typeof s[u]&&l.push(s[u]);e.addToVideoList(l)}else e.addToVideoList(a);else e.addToVideoList(s)}},setVideoListCountToLoad:function(e){if(this.oOptions.iForcedCountVideosToLoad="number"==typeof e&&e>0?e:null,!this.isExpandedView())for(var t in this.oManagers){var i=this.oManagers[t];i.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoad)}},initContainerWithLoadedContent:function(){this.getContainer(),this.updateView()},loadAndInit:function(){this.getContainer();var e=this.getManager(),t=this;e.loadVideoList(function(){var e=t.getList();t.isExpandedView()||(t.getSideScrollBar(e),t.updateCurrentSideScrollBar()),t.updateView()}),this.updateView()},setMainContainer:function(e){this.$mainContainer=e},getCurrentElementKey:function(){var e=this.getCurrentSortFilter();return this.sOrientation+(null!==e?"-"+e.sKey:"")},getExpandedKey:function(e){return"boolean"!=typeof e&&(e=this.isExpandedView()),e?"e":"c"},getCurrentSortFilter:function(){if(!this.oOptions.aSortFilters.length)return null;for(var e in this.oOptions.aSortFilters){var t=this.oOptions.aSortFilters[e];if(t.bActive)return t}return null},getContainer:function(){var e=this.getCurrentElementKey(),t=this.getExpandedKey();if("undefined"!=typeof this.oContainers[e]&&"undefined"!=typeof this.oContainers[e][t])return this.oContainers[e][t];var n=this.getOrientationCount(this.sOrientation),o={sOrientation:this.sOrientation,sQuickiesCount:!!n&&"("+s.__(1===n?"misc.one_video":"misc.nb_videos",{"%count%":this.getOrientationCount(this.sOrientation,!0)})+")",sLoader:r.getIcf(),sTitle:"QUICKIES",sFilter:"",bCanRotate:this.canRotate(),sLoadMore:s.__("listing.load_more_vid"),sExpand:s.__("listing.expand"),sShrink:s.__("listing.collapse"),bIsExpandedListing:this.isExpandedView()};if(this.oOptions.aSortFilters.length>1){o.bHasFilters=!0;for(var l in this.oOptions.aSortFilters)this.oOptions.aSortFilters[l].bActive&&(o.sFilter=this.oOptions.aSortFilters[l].sLabel)}var d=$(i.render(u,o)),f=d.find(".quickies-lat__list"),h=d.find(".quickies-lat__title"),p=(d.find(".quickies-lat__title-count"),h.find(".quickies-lat__rotate-btn")),_=h.find(".quickies-lat__filter-btn"),g=d.find(".quickies-lat__expand-btn"),m=d.find(".quickies-lat__shrink-btn"),b=d.find(".quickies-lat__load-more-btn"),v=this;if("undefined"==typeof this.oLists[e]&&(this.oLists[e]={}),"undefined"==typeof this.oContainers[e]&&(this.oContainers[e]={}),this.oLists[e][t]=f,this.oContainers[e][t]=d,p.on("click",this,this.onClickRotate),_.length){var y=new a(_,i.render(c,{aFilters:this.oOptions.aSortFilters}),{popup_class:"quickies-lat__filter__popup",position:{v:"below",h:"right"},autoclose:!0,mouseout_autoclose:5e3});this.oFilterPopup=y,this.oFilterPopup.onOpen=function(){v.oFilterPopup=y;var e=v.oFilterPopup.getPopup();e.length&&e.find("button").on("click",v,v.onClickFilter)}}if(g.length&&g.on("click",this,this.onClickExpand),m.length&&m.on("click",this,this.onClickShrink),b.length&&b.on("click",this,this.onClickLoadMore),"undefined"!=typeof this.oOptions.iFullNavProfileId){var D=this.getManager();D.countUsableVideoIds()<this.oOptions.iVideoCountInLatList&&D.addProfileAnyInfoLoadedCallBack(this.oOptions.iFullNavProfileId,function(){v.setContainerToLoadDisplay(!1,d)})}return this.oContainers[e][t]},getList:function(){var e=this.getCurrentElementKey(),t=this.getExpandedKey();if("undefined"==typeof this.oLists[e]||"undefined"==typeof this.oLists[e][t]){if("undefined"!=typeof this.oContainers[e]&&"undefined"!=typeof this.oContainers[e][t])return $();this.getContainer()}return this.oLists[e][t]},triggerLoadOnRightScrollInfo:function(e){if(e.oHorizontal.iSize>0&&e.oHorizontal.iScrollInvert<200){var t=this.getManager(),i=t.countUsableVideoIds(),n=this;i>=this.oOptions.iVideoCountInLatList?(this.setContainerToLoadDisplay(!0),this.oOptions.iVideoCountInLatList+=10,this.updateViewIfContainerAdded(),setTimeout(function(){n.setContainerToLoadDisplay(!1)},500)):!0===t.loadMoreVideoIfNeeded(!0,null,function(){n.updateViewIfContainerAdded(),n.setContainerToLoadDisplay(!1)})&&this.setContainerToLoadDisplay(!0)}},getSideScrollBar:function(e){var t=this.getCurrentElementKey();if("undefined"==typeof this.oSideScrollBars[t]){void 0===e&&(e=this.getList());var i=this,n={oOptions:{$Container:e,sMode:o.S_MODE_HORIZONTAL,bCanMouseGrabToScroll:!0},oListeners:{}};this.oOptions.bInfiniteLatListLoad&&(n.oListeners.fnOnScroll=function(e){i.triggerLoadOnRightScrollInfo(e)}),this.oSideScrollBars[t]=new o(n)}return this.oSideScrollBars[t]},updateHTMLList:function(){var e=this.getIdList();if(!e.length)return void this.removeContainer();var t=this.getManager(),i=this.getList();this.getContainer(),i.toggleClass("mozaique cust-nb-cols",this.isExpandedView()),i.children("*").detach();for(var n=0;n<e.length;n++){var s=t.getPlayerBox(e[n]);if(s){var o=s.getListElem();if(this.isExpandedView()){var a=$('<div class="thumb-block"></div>');a.append(o),i.append(a)}else i.append(o)}}},getIdList:function(){var e,t;if(this.aAddedIds.length<this.oOptions.iVideoCountInLatList){var i=this.getManager(),n=i.getUsableVideoIds(l.DISPLAY_LEVEL.MAIN);if(n.length===this.aLoadedIds.length&&i.canAutoLoadMore()){var s=this;i.loadMoreVideoIfNeeded(!0,null,function(){s.isContainerAdded()&&s.updateView()})}for(e in n)t=n[e],this.addIdToLoadedList(t)}if(this.isExpandedView())return this.aLoadedIds;if(this.aAddedIds.length===this.aLoadedIds.length)return this.aAddedIds;for(e in this.aLoadedIds){if(this.aAddedIds.length>=this.oOptions.iVideoCountInLatList)break;t=this.aLoadedIds[e],this.addIdToAddedList(t)}return this.aAddedIds},addIdToLoadedList:function(t){return-1===this.aLoadedIds.indexOf(t)&&(this.aLoadedIds.push(t),e.info_("%c L --- addIdToLoadedList","color:red",t,this.aLoadedIds.length),!0)},addIdToAddedList:function(t){return-1===this.aAddedIds.indexOf(t)&&(this.aAddedIds.push(t),e.info_("%c L --- addIdToAddedList","color:red",t,this.aAddedIds.length),!0)},initManagerEvents:function(e){var t=this;e.onEvent(l.EVENT.MANAGER.NEW_PLAYER_BOX,function(e,i){if(i&&"object"==typeof i.oPlayerBox&&(i.sLevel===l.DISPLAY_LEVEL.MAIN||e.isFullProfileNavigation()&&i.sLevel===l.DISPLAY_LEVEL.PROFILE_VIDEO)){var n=function(e,i){var n=e.getId();t.addIdToLoadedList(n),t.addIdToAddedList(n)&&t.aAddedIds.length>=t.oOptions.iVideoCountInLatList&&t.oOptions.iVideoCountInLatList++,t.updateView()};i.oPlayerBox.onEvent(l.EVENT.PLAYER_BOX.SET_AS_PREV,n),i.oPlayerBox.onEvent(l.EVENT.PLAYER_BOX.SET_AS_NEXT,n),i.oPlayerBox.onEvent(l.EVENT.PLAYER_BOX.SET_AS_CURR,n)}})},getManager:function(){var e=this.getCurrentElementKey();if("undefined"==typeof this.oManagers[e]){var t=new d(!0);t.setAvailableOrientations(this.oAvailableOrientations),t.setOrientation(this.sOrientation),this.initManagerEvents(t),"undefined"!=typeof this.oOptions.iFullNavProfileId&&t.setFullNavigationToProfile(this.oOptions.iFullNavProfileId),this.isExpandedView()?t.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoadExtended):t.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoad);var i=this.getCurrentSortFilter();null!==i&&t.setSortFilter(i.sKey),this.oManagers[e]=t,this.setPreloadedVideosToManager(t)}return this.oManagers[e]},setFilter:function(e){if("undefined"!=typeof d.O_AVAILABLE_SORT_FILTERS[e]){var t=this.isContainerAdded();this.prepareContainerToBeReplaced();for(var i in this.oOptions.aSortFilters){var n=this.oOptions.aSortFilters[i];n.bActive=n.sKey===e}d.SAVE_ORDER(e),this.getContainer(),t&&this.updateView()}},canRotate:function(){return this.oAvailableOrientations.bVertical&&this.oAvailableOrientations.bHorizontal||this.oAvailableOrientations.bVertical&&this.oAvailableOrientations.bAll||this.oAvailableOrientations.bAll&&this.oAvailableOrientations.bHorizontal},setOrientation:function(e){if((e=e===d.S_ORIENTATION_VERTICAL||e===d.S_ORIENTATION_HORIZONTAL||e===d.S_ORIENTATION_ALL?e:d.S_ORIENTATION_VERTICAL)!==this.sOrientation){var t=this.isContainerAdded();this.prepareContainerToBeReplaced(),this.sOrientation=e,d.SAVE_ORIENTATION(e),this.getContainer(),t&&this.updateView()}},getOrientationCount:function(e,i){var n=0;return e===d.S_ORIENTATION_VERTICAL?n=this.oOptions.oCountByOrientations.iVertical:e===d.S_ORIENTATION_HORIZONTAL?n=this.oOptions.oCountByOrientations.iHorizontal:e===d.S_ORIENTATION_ALL&&(n=this.oOptions.oCountByOrientations.iAll),!("number"!=typeof n||n<1||isNaN(n))&&(i?n.toLocaleString(t.dyn.locale):n)},isContainerAdded:function(e,t){"string"!=typeof e&&(e=this.getCurrentElementKey());var i=this.getExpandedKey(t);return"undefined"!=typeof this.oContainersAdded[e]&&(this.oContainersAdded[e][i]||!1)},setContainerAdded:function(e,t,i){"string"!=typeof t&&(t=this.getCurrentElementKey()),"undefined"==typeof this.oContainersAdded[t]&&(this.oContainersAdded[t]={});var n=this.getExpandedKey(i);this.oContainersAdded[t][n]=e},prepareContainerToBeReplaced:function(){if(this.isContainerAdded()){var e=this.getContainer();this.setContainerToLoadDisplay(!0,e),this.$containerToReplace=e,this.sContainerToReplaceKey=this.getCurrentElementKey()}},removeContainer:function(e,t){if("string"!=typeof e&&(e=this.getCurrentElementKey()),this.isContainerAdded(e,t)){var i=this.getExpandedKey(t);this.oContainers[e][i].detach(),this.setContainerAdded(!1)}},updateCurrentSideScrollBar:function(){if(!this.isExpandedView()){var e=this.getSideScrollBar();setTimeout(function(){e.forceUpdateView()},50)}},setContainerToLoadDisplay:function(e,t){"boolean"!=typeof e&&(e=!0),t&&t.length||(t=this.getContainer());var i=t.find(".quickies-lat__loader");e?i.hasClass("quickies-lat__loader--is-visible")||i.fadeIn(500,function(){i.addClass("quickies-lat__loader--is-visible"),i.css("opacity",!1)}):(i.stop(),i.removeClass("quickies-lat__loader--is-visible"),i.hide())},updateViewIfContainerAdded:function(){this.isContainerAdded()&&this.updateView()},updateView:function(){if(!this.getIdList().length){var e=this.getManager(),t=this;if(!0===e.loadMoreVideoIfNeeded(!1,null,function(){t.updateView()}))return;return void this.removeContainer()}var i=this.getContainer();if(null!==this.$containerToReplace&&this.$containerToReplace.length&&"string"==typeof this.sContainerToReplaceKey){if(this.setContainerToLoadDisplay(!1,this.$containerToReplace),this.$containerToReplace.is(i))return this.$containerToReplace=null,void(this.sContainerToReplaceKey=null);i.insertBefore(this.$containerToReplace),this.$containerToReplace.detach(),this.setContainerAdded(!1,this.sContainerToReplaceKey),this.$containerToReplace=null,this.sContainerToReplaceKey=null}else if("simpleContainer"===this.oOptions.sContainerMode||"mozaique"===this.oOptions.sContainerMode&&0===this.oOptions.iMozLineBefore){if(this.$mainContainer.children().first().is(i))return void this.updateHTMLList();this.$mainContainer.prepend(i)}else if("mozaique"===this.oOptions.sContainerMode){var n=this.$mozTbs&&this.$mozTbs.length?this.oOptions.iMozLineBefore*Math.round(Math.ceil(this.$mainContainer.innerWidth())/Math.floor(this.$mozTbs.first(":visible").outerWidth())):0;if(n>0&&n<this.$mozTbs.length){var s=$(this.$mozTbs[n-1]);i.prev().is(s)||i.insertAfter(s)}else this.$mainContainer.children().last().is(i)||this.$mainContainer.append(i)}var e=this.getManager(),o=i.find(".quickies-lat__load-more-btn");if(e.canAutoLoadMore()?o.show():o.hide(),this.updateHTMLList(),this.updateCurrentSideScrollBar(),this.setContainerAdded(!0),this.oOptions.bInfiniteLatListLoad&&!this.isExpandedView()){var a=this.getSideScrollBar();a&&this.triggerLoadOnRightScrollInfo(a.getCurrentScrollState())}},isExpandedView:function(){return this.oOptions.bIsExpandedListing},setToExpandedView:function(e,t){if("boolean"!=typeof e&&(e=!0),"boolean"!=typeof t&&(t=!0),this.isExpandedView()!==e){var i=this.isContainerAdded();if(this.removeContainer(),this.oOptions.bIsExpandedListing=e,i){for(var n in this.oManagers){var s=this.oManagers[n];this.isExpandedView()?s.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoadExtended):s.setVideoListCountToLoad(this.oOptions.iForcedCountVideosToLoad)}this.getContainer(),this.updateView(),t&&"function"==typeof this.fnOnExpandedViewChangeCallback&&this.fnOnExpandedViewChangeCallback(this.isExpandedView())}}},setOnExpandedViewChangeCallback:function(e){"function"!=typeof e&&null!==e||(this.fnOnExpandedViewChangeCallback=e)},onClickExpand:function(e){e.preventDefault(),e.data.setToExpandedView(!0)},onClickFilter:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.oFilterPopup.close(),t.setFilter($(this).data("key"))},onClickLoadMore:function(e){e.preventDefault();var t=e.data;if(t.isExpandedView()){var i=t.getManager();if(i){var n=t.getContainer();if(t.bIsExpandedMaxLoaded)return void(i.canAutoLoadMore()||n.find(".quickies-lat__load-more-btn").hide());"number"==typeof t.oOptions.iFullNavProfileId&&(t.setContainerToLoadDisplay(!0,n),i.addProfileAnyInfoLoadedCallBack(t.oOptions.iFullNavProfileId,function(){t.setContainerToLoadDisplay(!1,n),t.updateViewIfContainerAdded(),i.canAutoLoadMore()||n.find(".quickies-lat__load-more-btn").hide()}));i.loadMoreVideoIfNeeded(!0,l.DISPLAY_LEVEL.MAIN,function(){t.setContainerToLoadDisplay(!1,n),t.updateViewIfContainerAdded()})===l.LOAD_MORE.NO_MORE&&(t.bIsExpandedMaxLoaded=!0,t.setContainerToLoadDisplay(!1,n),n.find(".quickies-lat__load-more-btn").hide())}}},onClickRotate:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.setOrientation(t.sOrientation===d.S_ORIENTATION_VERTICAL?t.sOriginalOrientation===d.S_ORIENTATION_HORIZONTAL&&t.oAvailableOrientations.bAll?d.S_ORIENTATION_ALL:t.oAvailableOrientations.bHorizontal?d.S_ORIENTATION_HORIZONTAL:t.sOriginalOrientation!==d.S_ORIENTATION_HORIZONTAL&&t.oAvailableOrientations.bAll?d.S_ORIENTATION_ALL:d.S_ORIENTATION_VERTICAL:t.sOrientation===d.S_ORIENTATION_HORIZONTAL?t.sOriginalOrientation!==d.S_ORIENTATION_HORIZONTAL&&t.oAvailableOrientations.bAll?d.S_ORIENTATION_ALL:t.oAvailableOrientations.bVertical?d.S_ORIENTATION_VERTICAL:t.sOriginalOrientation!==d.S_ORIENTATION_VERTICAL&&t.oAvailableOrientations.bAll?d.S_ORIENTATION_ALL:d.S_ORIENTATION_HORIZONTAL:t.sOriginalOrientation===d.S_ORIENTATION_VERTICAL&&t.oAvailableOrientations.bVertical?d.S_ORIENTATION_VERTICAL:t.sOriginalOrientation===d.S_ORIENTATION_HORIZONTAL&&t.oAvailableOrientations.bHorizontal?d.S_ORIENTATION_HORIZONTAL:t.oAvailableOrientations.bVertical?d.S_ORIENTATION_VERTICAL:t.oAvailableOrientations.bHorizontal?d.S_ORIENTATION_HORIZONTAL:d.S_ORIENTATION_ALL)},onClickShrink:function(e){e.preventDefault(),e.data.setToExpandedView(!1)},onColChanged:function(e){e.data.updateViewIfContainerAdded()},onResizeScreen:function(e){var t=e.data;t.oTimerOnResize?clearTimeout(t.oTimerOnResize):t.updateViewIfContainerAdded(),t.oTimerOnResize=setTimeout(function(){t.updateViewIfContainerAdded(),t.oTimerOnResize=null},500)},onUpdateList:function(e){var t=e.data;t.setContainerToLoadDisplay(!1),t.updateViewIfContainerAdded()}},f}),define("skins/default/main",["static/cookies","lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","./header/header","skins/common/main_regional"],function(e){var t=$("#show-more-best");t.length>0&&t.on("click",function(){e.setLocal("hexavid_bestall","1",3e4,"/")}),require(["config/main","lib/tools","static/dom","skins/common/player/quickies/manager","skins/common/player/quickies/latList"],function(e,t,i,n,s){if(e.dyn.allowQuickies&&e.data.quickies){var o=e.data.quickies.videos||!1;if(o){var a={};a[n.S_ORIENTATION_VERTICAL]=o.V,a[n.S_ORIENTATION_HORIZONTAL]=o.H;var r=new s($("#quickies-home"),{sSortFilter:"best",oPreloadedVideos:a,bInfiniteLatListLoad:!0,iForcedCountVideosToLoad:5});r.setOnExpandedViewChangeCallback(function(e){var n=r.getContainer();e||i.isElementInView(n)||t.scrollTo(n,100)}),r.initContainerWithLoadedContent(),xv.oQL=r}}})}),define("skins/common/sub_suggestions/suggestBlock",["static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/popup/tooltip","lib/helpers/overlay/box","lib/helpers/thumbs/wall","lib/helpers/inline_loader","lib/helpers/scrollbar"],function(e,t,i,n,s,o,a,r,l,d){var u=function(e){this.oOptions={},n.initParams(this.oOptions,e,u.GET_DEFAULT_OPTIONS()),this.oEventListeners={},this.iEventListenerCount=0};return u.DEFAULT_OPTIONS={iCancelTimeout:3e3,oTemplates:{sTplThumbBlock:null,sTplPopPreview:null,sTplPopPreviewThumb:null},oUrls:{fnPopPreviewVideos:function(e,t){throw new Error('Function "oDefaultOptions.oUrls.fnPopPreviewVideos" not implemented.')},fnCustomSetUrl:null},oFunctions:{getDisplayNameWithPicto:function(e){return e.getDisplayName()}}},u.GET_DEFAULT_OPTIONS=function(){return u.DEFAULT_OPTIONS},u.SUGGEST_TYPE={MODEL_VIDEO:"model_video",CHANNEL_SUB:"channel",MEMBERSHIP:"membership",CATEGORY:"category"},u.REVIEW={UNREVIEWED:"ur",ADDED:"a",REJECTED:"r"},u.EVENT={REVIEW_UPDATE:"r",REVIEW_UPDATE_VALIDATED:"r_ok"},u.ACTION={SUBSCRIBE:"s",REJECT:"r"},u.buildFromJSON=function(e,t,i){return void 0===t&&(t=new u(i)),t.setId(e.i).setUserName(e.u).setDisplayName(e.d).setUrl(e.url).setCountryCode(e.c).setThumb(e.th).setUserPic(e.thp).setCsrf(e.sc).setIsPicListingTypeProfile("profile"===e.tht).setNbVideos(e.cnt.v).setNbVideosFree(e.cnt.f).setNbVideosPremium(e.cnt.m).setVideos(e.vis)},u.isValidObjectOption=function(e,t){return!!Object.keys(e).find(function(i){return e[i]===t})},u.prototype={getTplThumb:function(){if(null===this.oOptions.oTemplates.sTplThumbBlock)throw new Error('Function "sTplThumbBlock" not set');return this.oOptions.oTemplates.sTplThumbBlock},getTplPopPreview:function(){if(null===this.oOptions.oTemplates.sTplPopPreview)throw new Error('Function "sTplPopPreview" not set');return this.oOptions.oTemplates.sTplPopPreview},getTplPopPreviewThumb:function(){if(null===this.oOptions.oTemplates.sTplPopPreviewThumb)throw new Error('Function "sTplPopPreviewThumb" not set');return this.oOptions.oTemplates.sTplPopPreviewThumb},getPopPreviewData:function(){throw new Error('Function "getPopPreviewData" not implemented.')},getPopPreviewClass:function(){return["auto-width-popup","suggest-account-preview-pop"]},initThumbEvents:function(){throw new Error('Function "initThumbEvents" not implemented.')},setId:function(e){return this.iId=e,this},setUserName:function(e){return this.sUserName=e,this},setDisplayName:function(e){return this.sDisplayName=e,this},setUrl:function(e){return"string"==typeof e&&"function"==typeof this.oOptions.oUrls.fnCustomSetUrl&&(e=this.oOptions.oUrls.fnCustomSetUrl(e)),this.sUrl=e,this},setCountryCode:function(e){return this.sCountryCode=e,this.sCountryCodeLower=e?e.toLowerCase():"",this},setThumb:function(e){return this.sThumb=e,this},setUserPic:function(e){return this.sUserPic=e,this},setDisplayType:function(e){return this.sDisplayType=e,this},setReview:function(e){return this.sReview=e,this},setNbSubscribers:function(e){return this.iNbSubscribers=e,this},setNbSubscribersFormatted:function(e){return this.sNbSubscribersFormatted=e,this},setCsrf:function(e){return this.sCsrf=e,this},setIsPicListingTypeProfile:function(e){return this.bIsPicListingTypeProfile=e,this},setNbVideos:function(e){return this.iNbVideos=e,isNaN(this.iNbVideos)&&(this.iNbVideos=0),this},setNbVideosFree:function(e){return this.iNbVideosFree=e,isNaN(this.iNbVideosFree)&&(this.iNbVideosFree=0),this},setNbVideosPremium:function(e){return this.iNbVideosPremium=e,isNaN(this.iNbVideosPremium)&&(this.iNbVideosPremium=0),this},setVideos:function(e){return this.aVideos=e,this},openPopPreview:function(){var n=$(i.render(this.getTplPopPreview(),this.getPopPreviewData())),o=a.get($("body"),!0,"close");o.setContent(n),o.setScrollAndResizeReposition("auto"),o.setOverlayClosable(!0),o.setEscapeClosable(!0),o.setCanReposition(!1),o.addClass(this.getPopPreviewClass().join(" "));var u=n.find(".mozaique"),c=u.find(".cover-loader"),f=!1,h=this;o.onClose=function(){f&&f.stop()},o.show("auto");var p=0,_=!1,g=!1,m=function(o){if(!0!==_&&!0!==g){_=!0;var a=null;p>0&&(a=$('<p class="loader">'+l.getIcf()+"</p>"),u.append(a));var d=function(t,i){g=!0,a&&a.remove(),e.error("SuggestBlock openPopPreview --- fnOnError",t),require(["static/utils"],function(e){"string"!=typeof i&&(i=s.__("misc.internal_error_retry")),0===p&&u.empty();var t=$('<div class="error-message"></div>'),n=$('<p class="alert alert-danger"></p>');n.append(document.createTextNode(e.escape(e.unescape(i)))),t.append(n);var o=p;if("number"==typeof o){var r=$('<button class="btn btn-primary">'+s.__("misc.retry")+"</button>");r.on("click",function(e){e.preventDefault(),t.remove(),a=$('<p class="loader with-space">'+l.getIcf()+"</p>"),u.append(a),setTimeout(function(){a&&a.remove(),g=!1,p=o,m()},250)}),t.append(r)}p=null,u.append(t)})},c=h.oOptions.oUrls.fnPopPreviewVideos(h,p);$.ajax({method:"GET",url:c,dataType:"json",success:function(s){if(e.debug_("%c SuggestBlock openPopPreview --- fnLoadMoreVideos --- AJAX success","color:palegreen;",{sUrl:c,oReturnedData:s}),_=!1,a&&a.remove(),!s.result)return e.debug_("%c SuggestBlock openPopPreview --- fnLoadMoreVideos --- RETURN","color:palegreen;","!oData.result"),void d(s);h.onPopPreviewLoadedMore(s,n,o);var l=$(i.render(h.getTplPopPreviewThumb(),{video_list:s.videos}));0===p&&u.empty(),u.append(l),t.dyn.is_desktop?"default"!==t.sitename&&"xnxx"!==t.sitename||require(["skins/"+t.sitename+"/mozaique/thumb_block_common_init"],function(e){"default"===t.sitename&&e.init_listing(u,{tb_menu:!1}),"xnxx"===t.sitename&&e.init_listing(u,{tb_menu:!1,premium_redirect_alert:!1})}):f?l.find(".thumb img").each(function(){f.addThumb(this)}):f=new r(u),s.nb_remaining>0?p++:p=null},error:function(t){e.debug_("%c SuggestBlock openPopPreview --- fnLoadMoreVideos --- AJAX ERROR","color:palegreen;",{sUrl:c,oError:t}),_=!1,d(t)}})}};this.initPopPreviewActions(o,n),m(!0),new d({oOptions:{$Container:u,sMode:d.S_MODE_VERTICAL},oListeners:{fnOnScroll:function(e){c&&c.length&&c.css("top",e.oVertical.iScroll),"number"==typeof p&&e.oVertical.iScrollInvert<20&&!g&&m()}}})},initPopPreviewActions:function(e,t){var i=t.find(".account-actions"),n=i.find(".sub"),s=i.find(".reject"),o=this;n.on("click",function(){e.close(),o.$addBtn.click()}),s.on("click",function(){e.close(),o.$rejectBtn.click()})},onPopPreviewLoadedMore:function(e,t,i){},getId:function(){return this.iId},getReview:function(){return this.sReview},getDisplayName:function(){return this.sDisplayName},getUrl:function(){return this.sUrl},renderThumb:function(){return this.$render?this.$render:(this.$render=$(i.render(this.getTplThumb(),this.getTplData())),this.$addBtn=this.$render.find(".sub"),this.$addBtn&&this.$addBtn.length&&(this.$addBtnLabel=this.$addBtn.find(".label")),this.$rejectBtn=this.$render.find(".reject"),this.$rejectBtn&&this.$rejectBtn.length&&(this.$rejectBtnLabel=this.$rejectBtn.find(".label")),this.initThumbEvents(),this.$render)},initThumbMainLink:function(){var e=this;this.$renderThumbLink=this.$render.find(".thumb a"),this.$renderThumbLink.off("click").on("click",function(t){e.onThumbLinkClick(t)})},onThumbLinkClick:function(e){e.preventDefault(),this.openPopPreview()},getTplData:function(){return{sUserName:this.sUserName,sDisplayName:this.getSiteVersionedFunction("getDisplayNameWithPicto")(this),sUrl:this.sUrl,sThumb:this.sThumb,sUserPic:this.sUserPic,bIsPicListingTypeProfile:this.bIsPicListingTypeProfile,sNbVideosVal:this.iNbVideosPremium?s.__(1===this.iNbVideosPremium?"misc.one_video":"misc.nb_videos",{"%count%":this.iNbVideosPremium.toLocaleString(t.dyn.locale)}):null,sNbVideosValShort:this.iNbVideosPremium?this.iNbVideosPremium.toLocaleString(t.dyn.locale):null,sDefaultThumbPic:t.domains["static"]+(this.bIsPicListingTypeProfile?"/v3/img/skins/default/profile_default_big.jpg":"/v3/img/skins/"+("xnxx"===t.sitename?"xnxx":"default")+"/channel-default-thumb.png"),sDefaultProfilPic:t.domains["static"]+"/v3/img/skins/default/profile_default_big.jpg",sClickPreview:s.__("misc.click_preview"),sSubscribe:s.__("subscriptions.subscribe"),sNotInterested:s.__("misc.not_interested"),sAdd:s.__("misc.add"),sRemove:s.__("misc.actions.remove")}},setTooltip:function(e,t){t="string"==typeof t&&t.length?t:s.__("misc.internal_error_retry"),this.oTooltip?(this.oTooltip.setButton(e),this.oTooltip.setContent(t)):(this.oTooltip=new o,this.oTooltip.create(t,e,{})),this.oTooltip.open()},getSiteVersionedElem:function(e,i,n){if("object"!=typeof this.oOptions[e])return null;var s=this.oOptions[e]["xnxx"===t.sitename?"oXNXX":"oDefault"];return"object"==typeof s&&typeof s[i]===n?s[i]:typeof this.oOptions[e][i]===n?this.oOptions[e][i]:null},getSiteVersionedFunction:function(e){var t=this.getSiteVersionedElem("oFunctions",e,"function");return t||function(){throw new Error('getSiteVersionedFunction "'+e+'" not a defined function.')}},getSiteVersionedTrad:function(e,t){var i=this.getSiteVersionedElem("oTranslations",e,"string");return i?"object"==typeof t?s.__(i,t):s.__(i):e},onEvent:function(e,t,i){if(!u.isValidObjectOption(u.EVENT,e))throw new Error('onEvent "'+e+'" not a valide Event.');"undefined"==typeof this.oEventListeners[e]&&(this.oEventListeners[e]={}),this.iEventListenerCount++,"string"==typeof i&&i.length||(i="callback_"+this.iEventListenerCount),this.oEventListeners[e][i]=t},removeEvent:function(e,t){"undefined"!=typeof this.oEventListeners[e]&&"undefined"!=typeof this.oEventListeners[e][t]&&delete this.oEventListeners[e][t]},triggerEvent:function(e){if("undefined"!=typeof this.oEventListeners[e])for(var t in this.oEventListeners[e])this.oEventListeners[e][t](this)}},u}),define("text!skins/common/sub_suggestions/suggestList/tpls/suggestListVisibilityButton.mustache",[],function(){return'<button class="suggest-list-visibility-btn btn btn-clear">[ <span>{{{ sVisibilityToggleLabel }}}</span> ]</button>'}),define("skins/common/sub_suggestions/suggestList",["./suggestBlock","static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/scrollbar","text!./suggestList/tpls/suggestListVisibilityButton.mustache","text!skins/common/design/cover_loader.mustache"],function(e,t,i,n,s,o,a,r,l){var d=function(e){this.initAndCleanOptions(e),this.setMozaiqueDivClass(""),this.bIsLoadMaxReached=!1,this.bIsLoadError=!1,this.iDisplayedPage=1,this.iMaxDisplayablePage=999999,this.iLoadErrorCount=0,this.bIsScrollDisplay=!1,this.oInfiniteScroll=null,this.iSuggestRenderAdded=0,this.iCurrentSuggestPointer=-1,this.aSuggests=[],this.iMozChannelLoadedIdsSent=0,this.oEventListeners={},this.iEventListenerCount=0,this.sLastReview=null,this.iLastReviewedId=null,this.sLastValidatedReview=null,this.iLastValidatedReviewedId=null,this.sLastScrollKey=""};return d.DEFAULT_OPTIONS={bInfiniteScroll:!1,bDisplay2RowsWhenReview:!1,bAutoLoadMoreOnScrollDisplay:!0,bListVisibilityToggleBtn:!1,bReloadSuggestPagin:!1,bIsVisible:!0,oFunctions:{getListDisplayName:function(){return o.__("suggest.your_suggestions")}},oUrls:{sLoad:"/feed/channels",fnCustomSetBlockUrl:null},oTranslations:{sHideSuggests:"premium_feed.hide_suggests",sShowSuggests:"premium_feed.show_suggests"},oTemplates:{sTplList:null,sTplThumbBlock:null,sTplPopPreview:null,sTplPopPreviewThumb:null},oThumbsCount:{640:{iMinWidth:0,iMaxWidth:640,iColsCount:2,bCanDisplay2Rows:!0},767:{iMinWidth:641,iMaxWidth:767,iColsCount:3,bCanDisplay2Rows:!0},1023:{iMinWidth:768,iMaxWidth:1023,iColsCount:4},1339:{iMinWidth:1024,iMaxWidth:1339,iColsCount:5},1899:{iMinWidth:1340,iMaxWidth:1899,iColsCount:6},"default":{iMinWidth:1900,iColsCount:7},infinite:{iColsCount:20}}},d.EVENT={LOADED:"l_ok",REVIEW_UPDATE:"r",REVIEW_ADDED_UPDATE:"r_a",REVIEW_REJECTED_UPDATE:"r_r",REVIEW_UNREVIEWED_UPDATE:"r_u",REVIEW_UPDATE_VALIDATED:"r_ok",REVIEW_ADDED_UPDATE_VALIDATED:"r_a_ok",REVIEW_REJECTED_UPDATE_VALIDATED:"r_r_ok",REVIEW_UNREVIEWED_UPDATE_VALIDATED:"r_u_ok",VISIBILITY_TOGGLED:"m_h"},d.GET_DEFAULT_OPTIONS=function(){return d.DEFAULT_OPTIONS},d.S_DEFAULT_MOZAIQUE_DIV_CLASS="suggest-list mozaique suggest-hide-item thumbs-5-cols",d.prototype={debug:function(e,i,n,s,o){var a="color:lightgreen;",r="string"==typeof this.constructor.name?this.constructor.name:"SuggestList";"SuggestListChannel"===r&&(a="color:plum;"),"SuggestListModel"===r&&(a="color:deeppink;"),"SuggestListMembership"===r&&(a="color:deepskyblue;");var l="%c SL/"+r+" "+e+(i&&i.length?" --- "+i:"");n?s?o?t.debug_(l,a,n,s,o):t.debug_(l,a,n,s):t.debug_(l,a,n):t.debug_(l,a)},initAndCleanOptions:function(e){this.oOptions={},s.initParams(this.oOptions,e,d.GET_DEFAULT_OPTIONS()),this.oOptions.bReloadSuggestPagin&&this.oOptions.bInfiniteScroll&&(this.oOptions.bReloadSuggestPagin=!1)},getSuggest:function(e){for(var t in this.aSuggests){var i=this.aSuggests[t];if(i.getId()===e)return i}return null},addSuggest:function(t){this.aSuggests.push(t);var i=this;return t.onEvent(e.EVENT.REVIEW_UPDATE_VALIDATED,function(e){i.onSuggestBlockReviewValidated(e)}),t.onEvent(e.EVENT.REVIEW_UPDATE,function(e){i.onSuggestBlockReviewUpdate(e)}),t},getLoadedSuggestIds:function(){var e=[];for(var t in this.aSuggests){var i=this.aSuggests[t];e.push(i.getId())}return e},getLastReviewedId:function(){return this.iLastReviewedId},getLastValidatedReviewedId:function(){return this.iLastValidatedReviewedId},load:function(e){var t=this,i=this.getLoadedSuggestIds();"function"==typeof e&&this.onEvent(d.EVENT.LOADED,e,null,!0);var n=i.reduce(function(e,t){return e+t},0);if(this.isMozaiqueToLoading()){
if(this.iMozChannelLoadedIdsSent===n)return;"undefined"!=typeof this.xChannelCall&&"function"==typeof this.xChannelCall.abort&&this.xChannelCall.abort()}this.iMozChannelLoadedIdsSent=n,this.setMozaiqueToLoading();var s=this.getSiteVersionedUrl("sLoad"),o=this.getLoadAjaxData();this.xChannelCall=$.post({url:s,data:o,complete:function(){t.unsetMozaiqueToLoading()},success:function(e){t.debug("load","AJAX success",{sUrl:s,oPostData:o,oReceivedData:e}),e.result&&(e.data&&"object"==typeof e.data?t.onMainDataLoad(e.data):t.setMozaiqueToLoadError(),t.triggerEvent(d.EVENT.LOADED))},error:function(e){if(!e||"abort"!==e.statusText){t.iLoadErrorCount++,t.debug("load","Loading channels - Ajax ERROR","iLoadErrorCount : "+t.iLoadErrorCount,e);t.iLoadErrorCount<2?(t.debug("load","Trying again"),setTimeout(function(){t.load()},500)):(t.setMozaiqueToLoadError(),t.debug("load","Loading channels - Too many Ajax ERROR",2))}},dataType:"json"})},getLoadAjaxData:function(){return{ids:this.getLoadedSuggestIds()}},resetAndLoad:function(e){this.aSuggests=[],this.emptySuggestToMozaique();var t=this;this.load(function(){t.fillMozaique(),"function"==typeof e&&e()})},canLoadMore:function(){return!this.bIsLoadMaxReached&&!this.bIsLoadError},onMainDataLoad:function(e){throw new Error('Function "onMainDataLoad" not implemented.')},buildSuggestFromJSON:function(t,i,n){if(i||"object"==typeof i||(i={}),this.oOptions.oTemplates){"object"!=typeof i.oTemplates&&(i.oTemplates={});for(var s in this.oOptions.oTemplates)null!==this.oOptions.oTemplates[s]&&(i.oTemplates[s]=this.oOptions.oTemplates[s])}return this.oOptions.oUrls&&this.oOptions.oUrls.fnCustomSetBlockUrl&&("object"!=typeof i.oUrls&&(i.oUrls={}),i.oUrls.fnCustomSetUrl=this.oOptions.oUrls.fnCustomSetBlockUrl),void 0===n&&(n=e),n.buildFromJSON(t,i)},getTplList:function(){return null===this.oOptions.oTemplates.sTplList?$("<div></div>"):this.oOptions.oTemplates.sTplList},getRenderOptions:function(){return{sVisibilityButton:this.getRenderVisibilityButton()}},getRenderVisibilityButton:function(){return n.render(r,{sVisibilityToggleLabel:this.getListVisibilityButtonText()})},render:function(){if(this.$render)return this.updateVisibilityDisplay(),this.$render;this.oOptions.bInfiniteScroll?this.setMozaiqueCountLimit(this.getMozaiqueInfiniteCountLimit()):this.setMozaiqueCountLimit(this.getMozaiqueCurrentSizeCountLimit()),this.$render=$(n.render(this.getTplList(),this.getRenderOptions()));var e=this.renderMozaique();if(this.$render.append(e),this.oOptions.bInfiniteScroll){var t=this,i={oOptions:{$Container:e,sMode:a.S_MODE_HORIZONTAL,bCanMouseGrabToScroll:!0}};this.oOptions.bAutoLoadMoreOnScrollDisplay&&(i.oListeners={fnOnScroll:function(e){if(t.isDisplayed()){var i=e.oHorizontal.iScrollSize+"-"+e.oHorizontal.iScroll+"-"+e.oHorizontal.iScrollInvert;t.sLastScrollKey!==i&&(e.oHorizontal.iSize>20&&e.oHorizontal.iScrollInvert<20&&!t.bFillMozaiqueRequested&&t.loadAndFillMozaique(),t.sLastScrollKey=i)}}}),this.oInfiniteScroll=new a(i),this.bIsScrollDisplay=!0}return this.renderEnd(),this.$render},renderEnd:function(){var e=this;this.oOptions.bReloadSuggestPagin&&(this.$listReloadLeftBtn=this.$render.find(".suggest-list-reload-left"),this.$listReloadRightBtn=this.$render.find(".suggest-list-reload-right"),this.$listReloadLeftBtn.addClass("nav-hide"),this.$listReloadRightBtn.addClass("nav-hide"),this.$listReloadLeftBtn.on("click",function(){e.reloadPagin("prev")}),this.$listReloadRightBtn.on("click",function(){e.reloadPagin("next")})),this.oOptions.bListVisibilityToggleBtn&&(this.$listVisibilityToggleBtn=this.$render.find(".suggest-list-visibility-btn"),this.$listVisibilityToggleBtn.on("click",function(t){t.preventDefault(),e.toggleVisibility()})),this.updateVisibilityDisplay()},renderMozaique:function(){if(this.$mozaique)return this.$mozaique;var e=this.getMozaiqueDivClass();return e=e&&e.length?" class='"+e+"'":"",this.$mozaique=$("<div"+e+"></div>"),this.fillMozaique(),this.$mozaique},setRender2Rows:function(){if(this.oOptions.bDisplay2RowsWhenReview&&this.canCurrentWidthHave2Rows()&&!this.bIs2RowsDisplayed){this.bIs2RowsDisplayed=!0;var e=this.renderMozaique(),t=2*(e.outerHeight()+1);e.css({height:t,"max-height":t}),e.addClass("suggest-list-2-rows");var i=this.getMozaiqueCurrentSizeConfig();(!this.bIsScrollDisplay||this.iColsCountLimit<2*i.iColsCount)&&(this.setMozaiqueCountLimit(2*i.iColsCount),this.fillMozaique())}},fillMozaique:function(){if(this.canLoadMore()){if(!this.hasNextSuggestLoaded())return void this.loadAndFillMozaique();for(this.oOptions.bAutoLoadMoreOnScrollDisplay&&this.bIsScrollDisplay&&this.iSuggestRenderAdded>=this.iColsCountLimit&&(this.iSuggestRenderAdded=0);this.iSuggestRenderAdded<this.iColsCountLimit*this.iDisplayedPage;){var e=this.getNextSuggest();if(null===e)return void this.loadAndFillMozaique();var t=e.renderThumb();t&&t.length&&this.appendSuggestToMozaique(t)}this.updateVisibilityDisplay()}},loadAndFillMozaique:function(){if(!this.bFillMozaiqueRequested){this.bFillMozaiqueRequested=!0;var e=this;this.load(function(){e.bFillMozaiqueRequested=!1,e.fillMozaique()})}},appendSuggestToMozaique:function(e){this.$mozaique.append(e),this.iSuggestRenderAdded++},removeSuggestToMozaique:function(e){e.remove(),this.iSuggestRenderAdded--},emptySuggestToMozaique:function(){this.$mozaique.empty(),this.iSuggestRenderAdded=0},updatePageDisplayInMozaique:function(){if(this.$mozaique&&this.$mozaique.length){var e=this.$mozaique.children(".thumb-block"),t=(this.iDisplayedPage-1)*this.iColsCountLimit+1,i=this.iDisplayedPage*this.iColsCountLimit,n=0;e.each(function(){n++;var e=n>=t&&n<=i;$(this).toggleClass("nav-hide",!e)})}},setMozaiqueCountLimit:function(e){this.iColsCountLimit="number"==typeof e&&e>0?e:null},getMozaiqueCurrentSizeCountLimit:function(){return this.getMozaiqueCurrentSizeConfig().iColsCount},getMozaiqueInfiniteCountLimit:function(){return this.oOptions.oThumbsCount.infinite.iColsCount},canCurrentWidthHave2Rows:function(){return!!this.getMozaiqueCurrentSizeConfig().bCanDisplay2Rows},getMozaiqueCurrentSizeConfig:function(){var e=null,t=$(window).outerWidth();for(var i in this.oOptions.oThumbsCount){var n=this.oOptions.oThumbsCount[i];"infinite"!==i&&("number"!=typeof n.iMaxWidth||t<=n.iMaxWidth)&&("number"!=typeof n.iMinWidth||t>=n.iMinWidth)&&(e=i)}return this.oOptions.oThumbsCount[null!==e?e:"default"]},getMozaiqueDivClass:function(){return"undefined"!=typeof this.sMozaiqueDivClass?this.sMozaiqueDivClass:d.S_DEFAULT_MOZAIQUE_DIV_CLASS},setMozaiqueDivClass:function(e,t){"string"==typeof e?(this.sMozaiqueDivClass=e.trim(),!0!==t&&(this.sMozaiqueDivClass+=" "+d.S_DEFAULT_MOZAIQUE_DIV_CLASS)):this.sMozaiqueDivClass=!0===t?"":d.S_DEFAULT_MOZAIQUE_DIV_CLASS,this.sMozaiqueDivClass=this.sMozaiqueDivClass.trim()},isMozaiqueToLoading:function(){return!0===this.bMozaiqueIsLoading},setMozaiqueToLoading:function(){this.isMozaiqueToLoading()||(this.bMozaiqueIsLoading=!0,this.$mozaique&&(this.$mozaiqueLoader||(this.$mozaiqueLoader=this.getALoader()),this.$mozaique.append(this.$mozaiqueLoader)))},unsetMozaiqueToLoading:function(){this.isMozaiqueToLoading()&&(this.bMozaiqueIsLoading=!1,this.$mozaiqueLoader&&this.$mozaiqueLoader.remove())},getMozaiqueErrorMessage:function(){return o.__("loading.error")},setMozaiqueToLoadError:function(){this.bIsLoadError||(this.bIsLoadError=!0,this.$mozaique&&this.$mozaique.length&&this.$mozaique.append($('<p class="suggest-list-error">'+this.getMozaiqueErrorMessage()+"</p>")),this.updateVisibilityDisplay())},getALoader:function(){return $(n.render(l))},getNextSuggest:function(e){if(!this.hasNextSuggestLoaded()){if("function"==typeof e)if(this.canLoadMore()){var t=this;this.load(function(){e(t.getNextSuggest())})}else e(null);else this.canLoadMore()&&this.load();return null}this.iCurrentSuggestPointer++;var i=this.aSuggests[this.iCurrentSuggestPointer];return"function"==typeof e&&e(i),i},hasNextSuggestLoaded:function(){return!!this.aSuggests.length&&this.iCurrentSuggestPointer+1<this.aSuggests.length},countRemainingSuggests:function(e){var t=this.aSuggests.length;return e?t.toLocaleString(i.dyn.locale):t},replaceUserRender:function(t,i){var n=t.renderThumb();if(i instanceof e){var s=i.renderThumb();n.replaceWith(s)}else this.removeSuggestToMozaique($render)},getSiteVersionedElem:function(e,t,n){if("object"!=typeof this.oOptions[e])return null;var s=this.oOptions[e]["xnxx"===i.sitename?"oXNXX":"oDefault"];if("object"==typeof s){if("object"==typeof s.oGender&&"string"==typeof this.oOptions.sGender){var o=s.oGender[this.oOptions.sGender];if("object"==typeof o&&typeof o[t]===n)return o[t]}if(typeof s[t]===n)return s[t]}if("object"==typeof this.oOptions[e].oGender&&"string"==typeof this.oOptions.sGender){var a=this.oOptions[e].oGender[this.oOptions.sGender];if(typeof a[t]===n)return a[t]}return typeof this.oOptions[e][t]===n?this.oOptions[e][t]:null},getSiteVersionedFunction:function(e){var t=this.getSiteVersionedElem("oFunctions",e,"function");return t||function(){throw new Error('getSiteVersionedFunction "'+e+'" not a defined function.')}},getSiteVersionedUrl:function(e){var t=this.getSiteVersionedElem("oUrls",e,"string");return t||""},getSiteVersionedTrad:function(e,t){var i=this.getSiteVersionedElem("oTranslations",e,"string"),n=this.getSiteVersionedElem("oForcedTranslations",e,"string");return"string"!=typeof i?e:("object"!=typeof t&&(t={}),"string"!=typeof n&&(n=""),o.__(i,t,n))},toggleVisibility:function(e,t){"boolean"!=typeof e&&(e=!this.isDisplayed()),e!==this.isDisplayed()&&(this.oOptions.bIsVisible=e,!0!==t&&this.triggerEvent(d.EVENT.VISIBILITY_TOGGLED),this.updateVisibilityDisplay())},isDisplayed:function(){return this.oOptions.bIsVisible},updateObjVisibilityDisplay:function(e,t){e&&e.length&&(this.isDisplayed()?e.is(":visible")?"function"==typeof t&&t():e.removeClass("hidden").css("opacity","0").animate({opacity:"1"},"fast",t):(e.addClass("hidden"),"function"==typeof t&&t()))},hideCompletely:function(){this.$render&&this.$render.length&&this.$render.addClass("suggest-visibility-full-hidden")},updateVisibilityDisplay:function(){if(this.$render&&this.$render.length){if(this.$render.toggleClass("suggest-visibility-hidden",!this.isDisplayed()),this.isDisplayed()&&this.$render.removeClass("suggest-visibility-full-hidden"),this.updateObjVisibilityDisplay(this.$render.find(".suggest-hide-item")),this.oInfiniteScroll){var e=this;this.updateObjVisibilityDisplay(this.oInfiniteScroll.getContainer(),function(){e.oInfiniteScroll.updateView()})}this.updatePageDisplayInMozaique(),this.updateReloadPaginVisibility(),this.$listVisibilityToggleBtn&&this.$listVisibilityToggleBtn.length&&this.$listVisibilityToggleBtn.find(">:first-child").text(this.getListVisibilityButtonText())}},getListVisibilityButtonText:function(){return this.getSiteVersionedTrad(this.isDisplayed()?"sHideSuggests":"sShowSuggests")},reloadPagin:function(e){"next"===e&&this.iDisplayedPage++,"prev"===e&&this.iDisplayedPage--,this.debug("reloadPagin",null,e,"new displayed Page :",this.iDisplayedPage),this.updateReloadPagin(),this.fillMozaique()},updateReloadPagin:function(){this.oOptions.bReloadSuggestPagin&&((this.bIsLoadMaxReached||this.bIsLoadError)&&(this.iMaxDisplayablePage=Math.ceil(this.countRemainingSuggests()/this.iColsCountLimit)),this.iDisplayedPage>this.iMaxDisplayablePage&&(this.iDisplayedPage=this.iMaxDisplayablePage),this.iDisplayedPage<1&&(this.iDisplayedPage=1))},updateReloadPaginVisibility:function(){this.oOptions.bReloadSuggestPagin&&this.$listReloadLeftBtn&&this.$listReloadLeftBtn.length&&(this.updateReloadPagin(),this.$listReloadLeftBtn.toggleClass("nav-hide",1===this.iDisplayedPage),this.$listReloadRightBtn.toggleClass("nav-hide",this.iDisplayedPage>=this.iMaxDisplayablePage))},onEvent:function(e,t,i,n){if(!this.isValidEvent(e))throw new Error('onEvent "'+e+'" not a valide Event.');"undefined"==typeof this.oEventListeners[e]&&(this.oEventListeners[e]={}),this.iEventListenerCount++,"string"==typeof i&&i.length||(i="callback_"+this.iEventListenerCount),this.oEventListeners[e][i]={fnCallback:t,bClearWhenCalled:!!n}},isValidEvent:function(t){return e.isValidObjectOption(d.EVENT,t)},removeEvent:function(e,t){"undefined"!=typeof this.oEventListeners[e]&&"undefined"!=typeof this.oEventListeners[e][t]&&delete this.oEventListeners[e][t]},triggerEvent:function(e){if("undefined"!=typeof this.oEventListeners[e])for(var t in this.oEventListeners[e])this.oEventListeners[e][t].fnCallback(this),this.oEventListeners[e][t].bClearWhenCalled&&this.removeEvent(e,t)},onSuggestBlockReviewUpdate:function(t){this.sLastReview=t.getReview(),this.iLastReviewedId=t.getId(),this.sLastReview===e.REVIEW.ADDED?this.triggerEvent(d.EVENT.REVIEW_ADDED_UPDATE):this.sLastReview===e.REVIEW.REJECTED?this.triggerEvent(d.EVENT.REVIEW_REJECTED_UPDATE):this.sLastReview===e.REVIEW.UNREVIEWED&&this.triggerEvent(d.EVENT.REVIEW_UNREVIEWED_UPDATE),this.triggerEvent(d.EVENT.REVIEW_UPDATE)},onSuggestBlockReviewValidated:function(t){this.sLastValidatedReview=t.getReview(),this.iLastValidatedReviewedId=t.getId(),this.sLastValidatedReview===e.REVIEW.ADDED?this.triggerEvent(d.EVENT.REVIEW_ADDED_UPDATE_VALIDATED):this.sLastValidatedReview===e.REVIEW.REJECTED?this.triggerEvent(d.EVENT.REVIEW_REJECTED_UPDATE_VALIDATED):this.sLastValidatedReview===e.REVIEW.UNREVIEWED&&this.triggerEvent(d.EVENT.REVIEW_UNREVIEWED_UPDATE_VALIDATED),this.triggerEvent(d.EVENT.REVIEW_UPDATE_VALIDATED)}},d}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/thumb_block/channel.mustache",[],function(){return'<div id="profile_{{ sUserName }}" class="thumb-block thumb-block-premium-feed-account">\n\t<div class="thumb-inside">\n\t\t<div class="thumb">\n\t\t\t<a href="{{ sUrl }}">\n\t\t\t\t<img src="{{ sThumb }}" id="pic_{{ sUserName }}"{{#bIsPicListingTypeProfile}} class="profile-pic"{{/bIsPicListingTypeProfile}} onerror="this.src=\'{{ sDefaultThumbPic }}\'; this.onerror=null;"/>\n\t\t\t\t<span class="profile-name">{{{ sDisplayName }}}</span>\n\t\t\t\t{{#sNbVideosVal}}\n\t\t\t\t\t<span class="profile-counts">{{{ sNbVideosVal }}}</span>\n\t\t\t\t{{/sNbVideosVal}}\n\t\t\t\t<span class="profile-hover">\n                    <span class="label">\n\t                    <span class="icon-f icf-eye"></span>\n\t                    {{{ sClickPreview }}}\n                    </span>\n                </span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div class="thumb-under">\n\t\t{{#sUserPic}}\n\t\t\t<div class="profile-pic">\n\t\t\t\t<img src="{{ sUserPic }}" onerror="this.src=\'{{ sDefaultProfilPic }}\'; this.onerror=null;" />\n\t\t\t</div>\n\t\t{{/sUserPic}}\n\t\t<p class="account-actions">\n\t\t\t<button class="btn btn-ticket sub" type="button">\n\t\t\t\t<span class="icf-ticket-left-side"><span class="icon-f icf-ticket-wide"></span></span>\n\t\t\t\t<span class="icf-ticket-right-side"><span class="icon-f icf-ticket-wide"></span></span>\n\t\t\t\t<span class="label">{{{ sSubscribe }}}</span>\n\t\t\t</button>\n\t\t\t<button class="btn btn-default reject" type="button">\n\t\t\t\t<span class="label"><span class="icon-f icf-ban mobile-only-hide"></span> {{{ sNotInterested }}}</span>\n\t\t\t\t<span class="ticket-rip"></span>\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</div>'}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/account_preview/account_pop.mustache",[],function(){return'<div class="account-preview-header{{#bHasModelInfo}} with-model-info{{/bHasModelInfo}}{{#oMembershipInfo.nb_videos}} with-membership-info{{/oMembershipInfo.nb_videos}}{{#sChannelPicSrc}} with-pic{{/sChannelPicSrc}}">\n\t<div class="prof-pic-n-page-link{{#sChannelPicSrc}} with-pic{{/sChannelPicSrc}}">\n\t\t{{#sChannelPicSrc}}\n\t\t\t<div class="profile-pic">\n\t\t\t\t{{#sHref}}<a href="{{{ sHref }}}" title="{{{ sChannelPageTitle }}}" target="_blank">{{/sHref}}\n\t\t\t\t\t<img src="{{{ sChannelPicSrc }}}" alt="" />\n\t\t\t\t{{#sHref}}</a>{{/sHref}}\n\t\t\t</div>\n\t\t{{/sChannelPicSrc}}\n\t\t{{#sHref}}\n\t\t\t<a href="{{{ sHref }}}" title="{{{ sChannelPageTitle }}}" class="btn btn-default page-link" target="_blank">{{{ sChannelPage }}}</a>\n\t\t{{/sHref}}\n\t</div>\n\n\t<h2>\n\t\t<span class="label">{{{ sChannelTitle }}}</span>\n\t</h2>\n\n\t{{#bHasModelInfo}}\n\t\t<div class="model-info">\n\t\t\t{{#aModelInfo}}\n\t\t\t\t<p><span>{{{ sLabel }}}: </span> <strong>{{{ sValue }}}</strong></p>\n\t\t\t{{/aModelInfo}}\n\t\t</div>\n\t{{/bHasModelInfo}}\n\n\t{{#oMembershipInfo.nb_videos}}\n\t\t<div class="membership-info">\n\t\t\t<span class="icon-f icf-bar-chart"></span>\n\t\t\t<div class="membership-info-videos">\n\t\t\t\t<p><span class="icon-f icf-crown"></span> <span class="nb-videos">{{{oMembershipInfo.nb_videos}}}</span></p>\n\t\t\t\t<p><span class="icon-f icf-lock"></span> <span class="no-access">{{{oMembershipInfo.nb_videos_no_access}}}</span></p>\n\t\t\t</div>\n\t\t\t<div class="membership-info-other">\n\t\t\t\t<p><span class="icon-f icf-play-square-o"></span> {{{oMembershipInfo.last_update}}}</p>\n\t\t\t\t<p><span class="icon-f icf-comments-o"></span> {{{oMembershipInfo.last_chat}}}</p>\n\t\t\t</div>\n\t\t\t<div class="membership-info-detail">\n\t\t\t\t<span class="icon-f icf-question-circle-o info"></span>\n\t\t\t\t<div class="membership-info-detail-hover">\n\t\t\t\t\t<span class="icon-f icf-close-thin close"></span>\n\t\t\t\t\t<p><span class="icon-f icf-crown"></span> <span class="membership-info-detail-videos">{{{oMembershipInfo.detail_videos}}}</span></p>\n\t\t\t\t\t<p><span class="icon-f icf-lock"></span> <span class="membership-info-detail-no-access">{{{oMembershipInfo.detail_no_access}}}</span></p>\n\t\t\t\t\t<p><span class="icon-f icf-play-square-o"></span> {{{oMembershipInfo.detail_last_update}}}</p>\n\t\t\t\t\t<p><span class="icon-f icf-comments-o"></span> {{{oMembershipInfo.detail_last_chat}}}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{/oMembershipInfo.nb_videos}}\n\n\t<p class="account-actions">\n\t\t<button class="{{{ sSubBtnClass }}}" type="button">{{{ sSubBtn }}}</button>\n\t\t<button class="{{{ sRejectBtnClass }}}" type="button">{{{ sRejectBtn }}}</button>\n\t</p>\n</div>\n\n<div class="mozaique-container{{#bHasModelInfo}} with-model-info{{/bHasModelInfo}}{{#oMembershipInfo.nb_videos}} with-membership-info{{/oMembershipInfo.nb_videos}}">\n\t<div class="mozaique thumbs-2-cols">\n\t\t{{{ sMozaique }}}\n\t\t{{{ sCoverLoader }}}\n\t</div>\n</div>'}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/account_preview/thumb_block_list.mustache",[],function(){return'{{#video_list}}\n\t<div id="video_{{{ id }}}_channel_preview" data-id="{{{ id }}}" class="thumb-block">\n\t\t<div class="thumb-inside">\n\t\t\t<div class="thumb">\n\t\t\t\t<a href="{{{ url }}}" target="_blank">\n\t\t\t\t\t<img src="{{{ img }}}{{{ thumb }}}" data-idcdn="10" data-videoid="{{{ id }}}" id="pic_{{{ id }}}" />\n\t\t\t\t\t<span class="video-title">{{{ title }}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/video_list}}'}),define("skins/common/sub_suggestions/suggestBlock/suggestChannel",["../suggestBlock","static/log","mustache","lib/tools","lib/i18n!front","lib/helpers/scrollbar","skins/common/profile/sub_actions","text!./tpls/thumb_block/channel.mustache","text!./tpls/account_preview/account_pop.mustache","text!./tpls/account_preview/thumb_block_list.mustache","text!skins/common/design/cover_loader.mustache"],function(e,t,i,n,s,o,a,r,l,d,u){var c=function(t){var i={};n.initParams(i,t,c.GET_DEFAULT_OPTIONS()),e.apply(this,[i])};return c.DEFAULT_OPTIONS={oTemplates:{sTplThumbBlock:r,sTplPopPreview:l,sTplPopPreviewThumb:d},oUrls:{fnPopPreviewVideos:function(e,t){return"/feed/channels/"+e.getId()+"/videos/"+t}},oTranslations:{oDefault:{sPageTitle:"profile.channel_page"},oXNXX:{sPageTitle:"profile.uploader_page"}},oFunctions:{oDefault:{getDisplayNameWithPicto:function(e){return'<span class="icon-f icf-device-tv-v2"></span> '+e.getDisplayName()}}}},c.GET_DEFAULT_OPTIONS=function(){var t={};return n.initParams(t,c.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.buildFromJSON=function(t,i){var n=e.buildFromJSON(t,new c(i),i);return n.setNbSubscribers(t.cnt.s).setNbSubscribersFormatted(t.cnt.sf),n},c.prototype.getPopPreviewData=function(){return{sChannelPicSrc:this.sUserPic,sChannelTitle:this.getSiteVersionedFunction("getDisplayNameWithPicto")(this),sMozaique:i.render(this.getTplPopPreviewThumb(),{video_list:this.aVideos}),sCoverLoader:i.render(u),sHref:this.sUrl,sSubBtnClass:this.$addBtn.prop("class"),sRejectBtnClass:this.$rejectBtn.prop("class"),sSubBtn:this.$addBtn.html(),sRejectBtn:this.$rejectBtn.html(),sChannelPageTitle:this.getSiteVersionedTrad("sPageTitle"),sChannelPage:this.getSiteVersionedTrad("sPageTitle")}},c.prototype.getPopPreviewClass=function(){var t=e.prototype.getPopPreviewClass.apply(this,[]);return t.push("is-channel"),t},c.prototype.initThumbEvents=function(){this.tCancelTimeout&&(clearTimeout(this.tCancelTimeout),this.tCancelTimeout=null),this.sSubBtnLabelSave&&(this.$addBtnLabel.html(this.sSubBtnLabelSave),this.sSubBtnLabelSave=!1),this.sRejectBtnLabelSave&&(this.$rejectBtnLabel.html(this.sRejectBtnLabelSave),this.sRejectBtnLabelSave=!1);var e=this;this.$addBtn.off("click").removeClass("loading").css("opacity","1").on("click",function(t){t.preventDefault(),e.sub()}),this.$rejectBtn.off("click").removeClass("loading").css("opacity","1").on("click",function(t){t.preventDefault(),e.reject()}),this.initThumbMainLink()},c.prototype.sub=function(){var t=this,i=function(e){t.setTooltip(t.$addBtn,e.message)};a.follow(t.sUserName,t.sCsrf,function(){t.setReview(e.REVIEW.ADDED),t.triggerEvent(e.EVENT.REVIEW_UPDATE),t.setChannelActionsCancel(e.ACTION.SUBSCRIBE)},i)},c.prototype.reject=function(){var t=this,i=function(e){t.setTooltip(t.$rejectBtn,e.message)};a.reject(t.sUserName,t.sCsrf,function(){t.setReview(e.REVIEW.REJECTED),t.triggerEvent(e.EVENT.REVIEW_UPDATE),t.setChannelActionsCancel(e.ACTION.REJECT)},i)},c.prototype.setChannelActionsCancel=function(t){if(this.sCancellableAction=t,this.$addBtn&&0!==this.$addBtn.length&&this.$rejectBtn&&0!==this.$rejectBtn.length){this.$renderThumbLink.off("click").on("click",function(e){e.preventDefault()});var i,n,o;this.sCancellableAction===e.ACTION.SUBSCRIBE?(this.sSubBtnLabelSave=this.$addBtnLabel.html(),i=this.$addBtn,n=this.$addBtnLabel,o=this.$rejectBtn):(this.sRejectBtnLabelSave=this.$rejectBtnLabel.html(),i=this.$rejectBtn,n=this.$rejectBtnLabel,o=this.$addBtn),o.off("click").css({opacity:"0.5"}),n.html(s.__("misc.cancel"));var r=this;i.addClass("loading").off("click").on("click",function(){r.setReview(e.REVIEW.UNREVIEWED),r.triggerEvent(e.EVENT.REVIEW_UPDATE),a.unfollow(r.sUserName,r.sCsrf,function(){r.initThumbEvents()})}),this.tCancelTimeout=setTimeout(function(){r.tCancelTimeout=null,r.triggerEvent(e.EVENT.REVIEW_UPDATE_VALIDATED)},this.oOptions.iCancelTimeout)}},c}),define("text!skins/common/sub_suggestions/suggestList/tpls/suggestList.mustache",[],function(){return'<div class="suggest-list-block">\n\t{{#bHasSuggestsHeader}}\n\t\t<div class="suggest-list-header flex-desktop-row flex-mobile-row">\n\t\t\t{{#bHasSuggestsTitle}}\n\t\t\t\t<div class="suggest-list-header-title flex-desktop-row flex-mobile-column">\n\t\t\t\t\t{{#sSuggestsTitle}}\n\t\t\t\t\t\t<span class="title suggest-hide-item">{{#bHasToggleSuggestListBtn}}<span class="suggest-list-toggle btn btn-default">{{{ sCurrentListName }}} <span class="icon-f icf-caret-down"></span></span><span class="sep"></span>{{/bHasToggleSuggestListBtn}}{{{ sSuggestsTitle }}}</span>\n\t\t\t\t\t{{/sSuggestsTitle}}\n\t\t\t\t\t{{#sAddedRemovedTotal}}\n\t\t\t\t\t\t<div class="flex-mobile-row">\n\t\t\t\t\t\t\t<span class="added-removed suggest-hide-item">\n\t\t\t\t\t\t\t\t<span{{#sAddedRemovedTotalMobile}} class="mobile-hide-inline"{{/sAddedRemovedTotalMobile}}>{{{ sAddedRemovedTotal }}}</span>\n\t\t\t\t\t\t\t\t{{#sAddedRemovedTotalMobile}}<span class="mobile-show-inline">{{{ sAddedRemovedTotalMobile }}}</span>{{/sAddedRemovedTotalMobile}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{#bListVisibilityToggleBtn}}\n\t\t\t\t\t\t\t\t<div class="mobile-show">\n\t\t\t\t\t\t\t\t\t{{{ sVisibilityButton }}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{/bListVisibilityToggleBtn}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/sAddedRemovedTotal}}\n\t\t\t\t</div>\n\t\t\t{{/bHasSuggestsTitle}}\n\t\t\t{{#bReloadSuggestPagin}}\n\t\t\t\t<button class="suggest-list-reload-left btn btn-clear suggest-hide-item"><span class="icon-f icf-chevron-left"></span></button>\n\t\t\t\t<button class="suggest-list-reload-right btn btn-clear suggest-hide-item"><span class="icon-f icf-chevron-right"></span></button>\n\t\t\t{{/bReloadSuggestPagin}}\n\t\t\t{{#bListVisibilityToggleBtn}}\n\t\t\t\t{{#bHasSuggestsTitle}}{{#sAddedRemovedTotal}}\n\t\t\t\t\t<div class="mobile-hide">\n\t\t\t\t{{/sAddedRemovedTotal}}{{/bHasSuggestsTitle}}\n\t\t\t\t\t{{{ sVisibilityButton }}}\n\t\t\t\t{{#bHasSuggestsTitle}}{{#sAddedRemovedTotal}}\n\t\t\t\t\t</div>\n\t\t\t\t{{/sAddedRemovedTotal}}{{/bHasSuggestsTitle}}\n\t\t\t{{/bListVisibilityToggleBtn}}\n\t\t</div>\n\t{{/bHasSuggestsHeader}}\n\t{{! mozaique }}\n</div>'}),define("skins/common/sub_suggestions/suggestList/suggestListChannel",["../suggestList","../suggestBlock","../suggestBlock/suggestChannel","static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/popup","skins/common/profile/sub_overlay","text!./tpls/suggestList.mustache"],function(e,t,i,n,s,o,a,r,l,d,u){var c=function(i){var n={};a.initParams(n,i,c.GET_DEFAULT_OPTIONS()),e.apply(this,[n]),this.oSuggestsReview={},this.oSuggestsCount={};for(var s in t.REVIEW)this.oSuggestsCount[t.REVIEW[s]]=0};return c.DEFAULT_OPTIONS={bListVisibilityToggleBtn:!0,bShowTitleAndCounters:!0,bUseAnimations:!0,bDisplay2RowsWhenReview:!0,aToggleSuggestListList:[],oFunctions:{oDefault:{getDisplayDefaultPicto:function(){return"device-tv-v2"},getDisplayDefaultName:function(){return r.__("profile.channels")}},oXNXX:{getDisplayDefaultPicto:function(){return null},getDisplayDefaultName:function(){return r.__("profile.uploaders")}}},oTemplates:{sTplList:u,sTplProfileVideoListLine:null},oUrls:{sLoad:"/feed/channels",oDefault:{sListAdded:"/account/subscriptions/channels",sListRejected:"/account/subscriptions/not-interested"},oXNXX:{sListAdded:"/account/followed",sListRejected:"/account/followed/not-interested"}},oTranslations:{sSuggestions:"video.suggestions",oDefault:{sLeftToReview:"premium_feed.channels_left_to_review",sLoadingError:"loading.channels_suggests_error",sSomeYouMayLike:"premium_feed.here_some_channels",sChannelsAddedRemovedTotal:"premium_feed.channels_added_removed_total",sChannelsAddedRemovedTotalMobile:""},oXNXX:{sLeftToReview:"premium_feed.uploaders_left_to_review",sLoadingError:"loading.uploaders_suggests_error",sSomeYouMayLike:"premium_feed.here_some_uploaders",sChannelsAddedRemovedTotal:""}},oForcedTranslations:{oDefault:{sChannelsAddedRemovedTotalMobile:"%link_added%<span class='icon-f icf-plus-square'></span> %nb_added%%link_end% / %link_removed%%nb_removed% <span class='icon-f icf-minus-square'></span>%link_end%"},oXNXX:{sChannelsAddedRemovedTotal:"%link_added%<span class='icon-f icf-plus-circle'></span> %nb_added%%link_end% / %link_removed%<span class='icon-f icf-minus-circle'></span> %nb_removed%%link_end%"}}},c.GET_DEFAULT_OPTIONS=function(){var t={};return a.initParams(t,c.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},c.EVENT={LIST_TOGGLED:"chanlis_l_ok"},c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.onMainDataLoad=function(e){if(this.onMainDataLoadSetReviewsCount(e),this.updateReviewRenderCounts(),e.subs&&e.subs.length)for(var t in e.subs)this.addSuggest(this.buildSuggestFromJSON(e.subs[t]));else this.bIsLoadMaxReached=!0},c.prototype.onMainDataLoadSetReviewsCount=function(e){this.setReviewCount(t.REVIEW.ADDED,"number"==typeof e.nb_chans_added?e.nb_chans_added:0),this.setReviewCount(t.REVIEW.REJECTED,"number"==typeof e.nb_chans_rejected?e.nb_chans_rejected:0),this.setReviewCount(t.REVIEW.UNREVIEWED,"number"==typeof e.nb_chans_disp?e.nb_chans_disp:0)},c.prototype.buildSuggestFromJSON=function(n,s){var o=e.prototype.buildSuggestFromJSON.apply(this,[n,s,i]);return o.setReview(t.REVIEW.UNREVIEWED),o},c.prototype.addSuggest=function(t){return this.updateReviewCounts(t),e.prototype.addSuggest.apply(this,[t])},c.prototype.updateReviewCounts=function(e){var t=this.oSuggestsReview[e.getId()],i=e.getReview();if(!this.isValidReview(i))throw new Error('SuggestListChannel updateReviewCounts "'+i+'" not a valide Review State.');if("string"==typeof t){if(t===i)return;this.oSuggestsCount[t]--,this.oSuggestsCount[i]++}this.oSuggestsReview[e.getId()]=i},c.prototype.getRenderOptions=function(){var t=this.oOptions.bShowTitleAndCounters,i=t?0===this.countUnreviewed()?this.getSiteVersionedTrad("sSomeYouMayLike"):this.getSiteVersionedTrad("sLeftToReview",{"%count%":'<strong class="feed-nb-channels-unreviewed">'+this.countUnreviewed(!0)+"</strong>"}):"",n=t?this.getSiteVersionedTrad("sChannelsAddedRemovedTotal",{"%link_added%":'<a href="'+this.getSiteVersionedUrl("sListAdded")+'" class="suggest-list-added">',"%link_removed%":'<a href="'+this.getSiteVersionedUrl("sListRejected")+'" class="suggest-list-rejected">',"%link_end%":"</a>","%nb_added%":'<strong class="suggest-list-added-count">'+this.countAdded(!0)+"</strong>","%nb_removed%":'<strong class="suggest-list-rejected-count">'+this.countRejected(!0)+"</strong>","%nb_total%":'<strong class="suggest-list-total-count">'+this.countTotal(!0)+"</strong>"}):"",s=t?this.getSiteVersionedTrad("sChannelsAddedRemovedTotalMobile",{"%link_added%":'<a href="'+this.getSiteVersionedUrl("sListAdded")+'" class="suggest-list-added">',"%link_removed%":'<a href="'+this.getSiteVersionedUrl("sListRejected")+'" class="suggest-list-rejected">',"%link_end%":"</a>","%nb_added%":'<strong class="suggest-list-added-count">'+this.countAdded(!0)+"</strong>","%nb_removed%":'<strong class="suggest-list-rejected-count">'+this.countRejected(!0)+"</strong>","%nb_total%":'<strong class="suggest-list-total-count">'+this.countTotal(!0)+"</strong>"}):"";"sChannelsAddedRemovedTotalMobile"===s&&(s=!1);var o=e.prototype.getRenderOptions.apply(this);return o.bHasSuggestsHeader=t||this.oOptions.bListVisibilityToggleBtn,o.bHasSuggestsTitle=t,o.bListVisibilityToggleBtn=this.oOptions.bListVisibilityToggleBtn,o.bReloadSuggestPagin=this.oOptions.bReloadSuggestPagin,o.bHasToggleSuggestListBtn=this.oOptions.aToggleSuggestListList.length>0,o.sCurrentListName=this.getListDisplayName(),o.sSuggestsTitle=i,o.sAddedRemovedTotal=n,o.sAddedRemovedTotalMobile=s,o},c.prototype.renderEnd=function(){e.prototype.renderEnd.apply(this),this.$headerTitle=this.$render.find(".suggest-list-header-title"),this.$addedChannels=this.$render.find(".suggest-list-added"),this.$rejectedChannels=this.$render.find(".suggest-list-rejected");var t=this;this.$addedChannels&&this.$addedChannels.length&&this.$addedChannels.on("click",function(e){e.preventDefault(),d.setOverlay({sUrl:t.getSiteVersionedUrl("sListAdded"),fnOnListUpdate:function(){t.resetAndLoad()}})}),this.$rejectedChannels&&this.$rejectedChannels.length&&this.$rejectedChannels.on("click",function(e){e.preventDefault(),d.setOverlay({sUrl:t.getSiteVersionedUrl("sListRejected"),fnOnListUpdate:function(){t.resetAndLoad()}})}),this.$countAddedChannels=this.$render.find(".suggest-list-added-count"),this.$countRejectedChannels=this.$render.find(".suggest-list-rejected-count"),this.$countUnreviewedChannels=this.$render.find(".feed-nb-channels-unreviewed"),this.$countTotalChannels=this.$render.find(".suggest-list-total-count");var i=this.$render.find(".suggest-list-toggle");this.oToggleSuggestListListPop=new l(i,this.getOtherSuggestListList(),{popup_class:"suggest-list-toggle-pop",autoclose:!0,mouseout_autoclose:200,autoclose_on_same_level:"any_level",mouseout_autoclose_openevents:["click","mouseover_btn_timer","no_event"],position:{h:"left",v:"below"}}),this.onEvent(e.EVENT.REVIEW_UPDATE_VALIDATED,function(){
t.updateReviewRenderCounts()},"callback_updateRenderReviewCount")},c.prototype.updateReviewRenderCounts=function(){this.$countAddedChannels&&this.$countAddedChannels.length&&this.$countAddedChannels.html(this.countAdded()),this.$countRejectedChannels&&this.$countRejectedChannels.length&&this.$countRejectedChannels.html(this.countRejected()),this.$countUnreviewedChannels&&this.$countUnreviewedChannels.length&&this.$countUnreviewedChannels.html(this.countUnreviewed()),this.$countTotalChannels&&this.$countTotalChannels.length&&this.$countTotalChannels.html(this.countTotal())},c.prototype.setOnListUpdate=function(e){this.fnOnListUpdate="function"==typeof e?e:null},c.prototype.addSuggestListToToggleList=function(e){this.oOptions.aToggleSuggestListList.push(e)},c.prototype.setReviewCount=function(e,t){if(!this.isValidReview(e))throw new Error('SuggestListChannel setReviewCount "'+e+'" not a valide Review State.');this.oSuggestsCount[e]=t},c.prototype.countAdded=function(e){var i=this.oSuggestsCount[t.REVIEW.ADDED];return e?i.toLocaleString(s.dyn.locale):i},c.prototype.countRejected=function(e){var i=this.oSuggestsCount[t.REVIEW.REJECTED];return e?i.toLocaleString(s.dyn.locale):i},c.prototype.countUnreviewed=function(e){var i=this.oSuggestsCount[t.REVIEW.UNREVIEWED];return e?i.toLocaleString(s.dyn.locale):i},c.prototype.countRemainingSuggests=function(e){return this.countUnreviewed(e)},c.prototype.countTotal=function(e){var t=0;for(var i in this.oSuggestsCount)t+=this.oSuggestsCount[i];return e?t.toLocaleString(s.dyn.locale):t},c.prototype.isValidReview=function(e){return t.isValidObjectOption(t.REVIEW,e)},c.prototype.isValidEvent=function(i){return t.isValidObjectOption(c.EVENT,i)||e.prototype.isValidEvent.apply(this,[i])},c.prototype.getOtherSuggestListList=function(){if(this.$otherSuggestListList&&this.$otherSuggestListList.length)return this.$otherSuggestListList;this.$otherSuggestListList=$("<ul></ul>");var t=this;for(var i in this.oOptions.aToggleSuggestListList){var n=this.oOptions.aToggleSuggestListList[i];if(!(!n instanceof e)){var s=$("<li></li>"),o=$('<a href="#">'+n.getListDisplayName()+"</a>");!function(){var e=n;o.on("click",function(i){i.preventDefault(),t.toggleCurrentListWith(e)})}(),s.append(o),this.$otherSuggestListList.append(s)}}return this.$otherSuggestListList},c.prototype.toggleCurrentListWith=function(e){var t=this;this.setMozaiqueToLoading(),e.load(function(){t.unsetMozaiqueToLoading();var i=t.render();e.render().insertBefore(i),i.detach(),e.triggerEvent(c.EVENT.LIST_TOGGLED)}),this.closeToggleSuggestListListPop()},c.prototype.closeToggleSuggestListListPop=function(){this.oToggleSuggestListListPop&&this.oToggleSuggestListListPop.close()},c.prototype.getListDisplayName=function(){var e=this.getDisplayNamePicto();return(e?'<span class="icon-f icf-'+e+'"></span> ':"")+'<span class="name">'+this.getDisplayName()+"</span>"},c.prototype.getDisplayName=function(){return this.getSiteVersionedFunction("getDisplayDefaultName")(this)},c.prototype.getDisplayNamePicto=function(){return this.getSiteVersionedFunction("getDisplayDefaultPicto")(this)},c.prototype.getMozaiqueErrorMessage=function(){return this.getSiteVersionedTrad("sLoadingError")},c.prototype.replaceUserRender=function(i,n,s){if(!this.oOptions.bShowTitleAndCounters||!this.oOptions.bUseAnimations)return e.prototype.replaceUserRender.apply(this,[i,n]);var o=i.renderThumb();o.find("*").off("click");var a=this,r=function(){a.removeSuggestToMozaique(o),"function"==typeof s&&s()};if(n instanceof t){var l=n.renderThumb();r=function(){l.css("opacity","0"),o.replaceWith(l),l.animate({opacity:1}),"function"==typeof s&&s()}}var d=i.getReview()===t.REVIEW.ADDED?this.$countAddedChannels:this.$countRejectedChannels,u=d.offset(),c=o.offset(),f=Math.round(u.left+d.outerWidth()/2-(c.left+o.outerWidth()/2)),h=Math.round(u.top+d.outerHeight()/2-(c.top+o.outerHeight()/2));o.stop().delay(200).css({position:"relative","transform-origin":"50% 50%","z-index":"2"}).animate({"data-Evol":1},{duration:500,step:function(e,t){$(this).css("transform","translate("+Math.round(f*e)+"px,"+Math.round(h*e)+"px) scale("+(1-e+.1*e)+")")},complete:r})},c.prototype.onSuggestBlockReviewUpdate=function(t){this.updateReviewCounts(t),e.prototype.onSuggestBlockReviewUpdate.apply(this,[t])},c.prototype.onSuggestBlockReviewValidated=function(t){this.updateReviewCounts(t),e.prototype.onSuggestBlockReviewValidated.apply(this,[t]);var i=this;this.getNextSuggest(function(e){i.replaceUserRender(t,e,function(){i.setRender2Rows()})})},c.prototype.getLastValidatedReview=function(){return this.sLastValidatedReview},c}),define("skins/common/sub_suggestions/suggestBlock/suggestModel",["../suggestBlock","./suggestChannel","static/log","lib/tools","lib/i18n!front"],function(e,t,i,n,s){var o=function(e){var i={};n.initParams(i,e,o.GET_DEFAULT_OPTIONS()),t.apply(this,[i])};return o.DEFAULT_OPTIONS={oUrls:{fnPopPreviewVideos:function(e,t){return"/feed/models/"+e.getId()+"/videos/"+t}},oTranslations:{oDefault:{sPageTitle:"profile.model_page"},oXNXX:{sPageTitle:"profile.pornstar_page"}},oClass:{oDefault:{sPopPreviewIsModel:"is-model"},oXNXX:{sPopPreviewIsModel:!1}},oPicto:{oGender:{Man:"sexe-man-v2",Woman:"sexe-woman-v2",Transsexual:"sexe-trans-v2"}},oFunctions:{oDefault:{getDisplayNameWithPicto:function(e){return'<span class="icon-f icf-'+e.getDisplayNamePicto()+'"></span> '+e.getDisplayName()},getDisplayDefaultPicto:function(){return"star-o"}},oXNXX:{getDisplayNameWithPicto:function(e){return'<span class="icon-f icf-'+e.getDisplayNamePicto()+'"></span> '+e.getDisplayName()},getDisplayDefaultPicto:function(){return"star-full"}}}},o.GET_DEFAULT_OPTIONS=function(){var e={};return n.initParams(e,o.DEFAULT_OPTIONS,t.GET_DEFAULT_OPTIONS()),e},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.buildFromJSON=function(t,i){var n=e.buildFromJSON(t,new o(i),i);return n.setSex(t.s).setSexPicto(t.g).setNbSubscribers(t.cnt.s).setNbSubscribersFormatted(t.cnt.sf),n},o.prototype.setSex=function(e){return this.sSex=e,this},o.prototype.setSexPicto=function(e){return this.sSexPicto="undefined"!=typeof this.oOptions.oPicto.oGender[e]?this.oOptions.oPicto.oGender[e]:null,this},o.prototype.getDisplayNamePicto=function(){return this.getSiteVersionedFunction("getDisplayDefaultPicto")(this)},o.prototype.getTplData=function(){var e=t.prototype.getTplData.apply(this);return e.sNotInterested=s.__("misc.ignore"),e},o.prototype.getPopPreviewData=function(){var e=t.prototype.getPopPreviewData.apply(this,[]);return"string"==typeof this.sSex&&(e.bHasModelInfo=!0,e.aModelInfo=[{sLabel:s.__("profile.gender"),sValue:this.sSex,sPicto:this.sSexPicto}]),e},o.prototype.getPopPreviewClass=function(){var t=e.prototype.getPopPreviewClass.apply(this,[]),i=this.getSiteVersionedElem("oClass","sPopPreviewIsModel","string");return i&&t.push(i),t},o}),define("skins/common/sub_suggestions/suggestList/suggestListModel",["../suggestList","./suggestListChannel","../suggestBlock","../suggestBlock/suggestModel","static/log","lib/tools","lib/i18n!front"],function(e,t,i,n,s,o,a){var r=function(e){var i={};o.initParams(i,e,r.GET_DEFAULT_OPTIONS()),"string"==typeof i.sGender&&!0!==i.oAvailableGenders[i.sGender]&&(s.debug('oOption sGender "'+i.sGender+'" not an available gender : ',i.oAvailableGenders),i.sGender=null),t.apply(this,[i])};return r.DEFAULT_OPTIONS={sGender:null,oAvailableGenders:{men:!0,women:!0,trans:!0},oPicto:{oGender:{men:"sexe-man-v2",women:"sexe-woman-v2",trans:"sexe-trans-v2"}},oName:{oGender:{men:a.__("gender.men"),women:a.__("gender.women"),trans:a.__("gender.transsexuals")}},oFunctions:{oDefault:{getDisplayDefaultPicto:function(){return"star-o"},getDisplayDefaultName:function(){return a.__("profile.models")}},oXNXX:{getDisplayDefaultPicto:function(){return"star-full"},getDisplayDefaultName:function(){return a.__("profile.pornstars")}}},oUrls:{sLoad:"/feed/models",oGender:{men:{sLoad:"/feed/models/men"},women:{sLoad:"/feed/models/women"},trans:{sLoad:"/feed/models/trans"}},oDefault:{sListAdded:"/account/subscriptions/models",sListRejected:"/account/subscriptions/not-interested/models"},oXNXX:{sListAdded:"/account/followed/models",sListRejected:"/account/followed/not-interested/models"}},oTranslations:{oDefault:{sLeftToReview:"premium_feed.models_left_to_review",sLoadingError:"loading.models_suggests_error",sSomeYouMayLike:"premium_feed.here_some_models"},oXNXX:{sLeftToReview:"premium_feed.pornstars_left_to_review",sLoadingError:"loading.pornstars_suggests_error",sSomeYouMayLike:"premium_feed.here_some_pornstars"}}},r.GET_DEFAULT_OPTIONS=function(){var e={};return o.initParams(e,r.DEFAULT_OPTIONS,t.GET_DEFAULT_OPTIONS()),e},r.EVENT={},r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.onMainDataLoadSetReviewsCount=function(e){var t="nb_";"string"==typeof this.oOptions.sGender&&(t+=this.oOptions.sGender+"_"),t+="models",this.setReviewCount(i.REVIEW.ADDED,"number"==typeof e[t+"_added"]?e[t+"_added"]:0),this.setReviewCount(i.REVIEW.REJECTED,"number"==typeof e[t+"_rejected"]?e[t+"_rejected"]:0),this.setReviewCount(i.REVIEW.UNREVIEWED,"number"==typeof e[t+"_disp"]?e[t+"_disp"]:0)},r.prototype.buildSuggestFromJSON=function(t,s){var o=e.prototype.buildSuggestFromJSON.apply(this,[t,s,n]);return o.setReview(i.REVIEW.UNREVIEWED),o},r.prototype.getDisplayName=function(){return"string"==typeof this.oOptions.sGender&&"undefined"!=typeof this.oOptions.oPicto.oGender[this.oOptions.sGender]?this.oOptions.oName.oGender[this.oOptions.sGender]:this.getSiteVersionedFunction("getDisplayDefaultName")(this)},r.prototype.getDisplayNamePicto=function(){return"string"==typeof this.oOptions.sGender&&"undefined"!=typeof this.oOptions.oPicto.oGender[this.oOptions.sGender]?this.oOptions.oPicto.oGender[this.oOptions.sGender]:this.getSiteVersionedFunction("getDisplayDefaultPicto")(this)},r}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/thumb_block/membership.mustache",[],function(){return'<div id="profile_{{ sUserName }}" class="thumb-block thumb-block-premium-feed-account is-membership">\n\t<div class="thumb-inside">\n\t\t<div class="thumb">\n\t\t\t<a href="{{ sUrl }}">\n\t\t\t\t<img src="{{ sThumb }}" id="pic_{{ sUserName }}"{{#bIsPicListingTypeProfile}} class="profile-pic"{{/bIsPicListingTypeProfile}} onerror="this.src=\'{{ sDefaultThumbPic }}\'; this.onerror=null;"/>\n\t\t\t\t<span class="profile-name">{{{ sDisplayName }}}</span>\n\t\t\t\t{{#sNbVideosVal}}\n\t\t\t\t\t<span class="profile-counts">{{{ sNbVideosVal }}}</span>\n\t\t\t\t{{/sNbVideosVal}}\n\t\t\t\t<span class="top-right-tags"><span class="is-membership-mark icon-f icf-crown"></span></span>\n\t\t\t\t<span class="profile-hover">\n                    <span class="label">\n\t                    <span class="icon-f icf-eye"></span>\n\t                    {{{ sClickPreview }}}\n                    </span>\n                </span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div class="thumb-under">\n\t\t{{#sUserPic}}\n\t\t\t<div class="profile-pic">\n\t\t\t\t<img src="{{ sUserPic }}" onerror="this.src=\'{{ sDefaultProfilPic }}\'; this.onerror=null;" />\n\t\t\t</div>\n\t\t{{/sUserPic}}\n\t\t<p class="account-actions">\n\t\t\t<button class="btn btn-primary sub" type="button">\n\t\t\t\t<span class="label">\n\t\t\t\t\t<span class="is-membership-mark icon-f icf-crown"></span>\n\t\t\t\t\t{{ sMonthPrice }}<sup>/{{ sMonth }}</sup>\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<button class="btn btn-default reject" type="button">\n\t\t\t\t<span class="label"><span class="icon-f icf-ban mobile-only-hide"></span> {{{ sNotInterested }}}</span>\n\t\t\t\t<span class="ticket-rip"></span>\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</div>'}),define("skins/common/sub_suggestions/suggestBlock/suggestMembership",["../suggestBlock","static/log","config/main","mustache","lib/tools","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/thumbs/wall","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","skins/common/profile/sub_actions","text!./tpls/thumb_block/membership.mustache","text!./tpls/account_preview/account_pop.mustache","text!./tpls/account_preview/thumb_block_list.mustache","text!skins/common/design/cover_loader.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p){var _=function(t){var i={};s.initParams(i,t,_.GET_DEFAULT_OPTIONS()),e.apply(this,[i])};return _.DEFAULT_OPTIONS={sPurchaseOrigin:null,oTemplates:{sTplThumbBlock:c,sTplPopPreview:f,sTplPopPreviewThumb:h},oUrls:{fnPopPreviewVideos:function(e,t){return"/feed/channels/"+e.iId+"/membership-videos/"+t}}},_.GET_DEFAULT_OPTIONS=function(){var t={};return s.initParams(t,_.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},_.prototype=Object.create(e.prototype),_.prototype.constructor=_,_.buildFromJSON=function(t,i){var n=e.buildFromJSON(t,new _(i),i);return n.setPrice(t.mbp).setDisplayPrice(t.mbpf).setNbVideosMembership(t.cnt.b),n},_.prototype.setPrice=function(e){return this.iPrice="number"==typeof e?e:0,this},_.prototype.setDisplayPrice=function(e){return this.sDisplayPrice=e,this},_.prototype.setNbVideosMembership=function(e){return this.iNbVideosMembership="number"==typeof e?e:0,this},_.prototype.setNbVideosMembershipNoAccess=function(e){return this.iNbVideosMembershipNoAccess="number"==typeof e?e:0,this},_.prototype.setLastUpdate=function(e){return this.sLastUpdate=e,this},_.prototype.setLastChatUpdate=function(e){return this.sLastChatUpdate=e,this},_.prototype.getTplData=function(){var t=e.prototype.getTplData.apply(this);return t.sNbVideosVal=this.iNbVideosMembership?o.__(1===this.iNbVideosMembership?"misc.one_video":"misc.nb_videos",{"%count%":this.iNbVideosMembership.toLocaleString(i.dyn.locale)}):null,t.sNbVideosValShort=this.iNbVideosMembership?this.iNbVideosMembership.toLocaleString(i.dyn.locale):null,t.sMonthPrice=this.sDisplayPrice,t.sMonth=o.__("misc.month_l"),t},_.prototype.onPopPreviewLoadedMore=function(e,t,n){if(n){this.setLastUpdate(e.last_update),this.setLastChatUpdate(e.last_chat_activity),this.setNbVideosMembershipNoAccess(e.nb_videos_no_access),t.find(".last-update-ago").html(this.sLastUpdate),t.find(".last-chat-act-ago").html(this.sLastChatUpdate),t.find(".membership-info-videos .nb-videos").html(o.__((this.iNbVideosMembership,"misc.nb_videos"),{"%count%":"<strong>"+this.iNbVideosMembership.toLocaleString(i.dyn.locale)+"</strong>"})),t.find(".membership-info-videos .no-access").html(o.__((this.iNbVideosMembershipNoAccess,"misc.nb_videos"),{"%count%":"<strong>"+this.iNbVideosMembershipNoAccess.toLocaleString(i.dyn.locale)+"</strong>"})),t.find(".membership-info-detail-videos").html(this.iNbVideosMembership>1?o.__("video.nb_included",{"%count%":"<strong>"+this.iNbVideosMembership.toLocaleString(i.dyn.locale)+"</strong>"}):o.__("video.one_included")),t.find(".membership-info-detail-no-access").html(this.iNbVideosMembershipNoAccess>1?o.__("video.nb_not_access",{"%count%":"<strong>"+this.iNbVideosMembershipNoAccess.toLocaleString(i.dyn.locale)+"</strong>"}):1===this.iNbVideosMembershipNoAccess?o.__("video.one_not_access"):o.__("video.none_access"));var s=t.find(".membership-info-detail-hover"),a=t.find(".membership-info-detail .info"),r=null,l=null,d=function(){s.addClass("is-opened"),s.on("mouseover",function(){r&&(clearTimeout(r),r=null),l&&(clearTimeout(l),l=null)}),s.on("mouseout",function(){r&&clearTimeout(r),l&&(clearTimeout(l),l=null),r=setTimeout(function(){r=null,u()},2e3)})},u=function(){s.removeClass("is-opened"),r&&(clearTimeout(r),r=null),l&&(clearTimeout(l),l=null),s.off("mouseout mouseover")};a.on("mouseover",function(e){e.preventDefault(),l&&clearTimeout(l),l=setTimeout(function(){d()},1e3)}),a.on("mouseout",function(e){l&&(clearTimeout(l),l=null)}),a.on("click",function(e){e.preventDefault(),d()}),t.find(".membership-info-detail .close").on("click",function(e){e.preventDefault(),u()})}},_.prototype.getPopPreviewData=function(){return{sChannelPicSrc:this.sUserPic,sChannelTitle:this.sDisplayName,sMozaique:n.render(this.getTplPopPreviewThumb(),{video_list:this.aVideos}),sCoverLoader:n.render(p),sHref:this.sUrl,sSubBtnClass:this.$addBtn.prop("class"),sRejectBtnClass:this.$rejectBtn.prop("class"),sSubBtn:this.$addBtn.html(),sRejectBtn:this.$rejectBtn.html(),sChannelPageTitle:o.__("profile.channel_page"),sChannelPage:o.__("profile.channel_page"),oMembershipInfo:{nb_videos:o.__("misc.nb_videos",{"%count%":"<strong>...</strong>"}),nb_videos_no_access:o.__("misc.nb_videos",{"%count%":"<strong>...</strong>"}),last_update:'<span class="last-update-ago">...</span>',last_chat:'<span class="last-chat-act-ago">...</span>',detail_videos:o.__("misc.nb_included",{"%count%":"<strong>...</strong>"}),detail_no_access:o.__("video.nb_not_access",{"%count%":"<strong>...</strong>"}),detail_last_update:o.__("misc.last_update")+' : <strong class="last-update-ago">...</strong>',detail_last_chat:o.__("profile.last_chat_activity")+' : <strong class="last-chat-act-ago">...</strong>'}}},_.prototype.initThumbEvents=function(){this.tCancelTimeout&&(clearTimeout(this.tCancelTimeout),this.tCancelTimeout=null),this.sSubBtnLabelSave&&(this.$addBtnLabel.html(this.sSubBtnLabelSave),this.sSubBtnLabelSave=!1),this.sRejectBtnLabelSave&&(this.$rejectBtnLabel.html(this.sRejectBtnLabelSave),this.sRejectBtnLabelSave=!1);var e=this;this.$addBtn.off("click").removeClass("loading").css("opacity","1").on("click",function(t){t.preventDefault(),e.membershipSub()}),this.$rejectBtn.off("click").removeClass("loading").css("opacity","1").on("click",function(t){t.preventDefault(),e.reject()}),this.initThumbMainLink()},_.prototype.membershipSub=function(){this.$addBtn.off("click"),this.$rejectBtn.off("click");var e=d.loading(),t=this;require(["skins/common/purchase_form/purchase_pop"],function(i){var n=new i;n.setUserId(t.getId()),"string"==typeof t.oOptions.sPurchaseOrigin&&n.setOrigin(t.oOptions.sPurchaseOrigin),n.setOnFormLoadedEnd(function(){e.close(),$(".premium-popup-form #premium-form-membership-channel").submit()}),n.setOnCloseCallback(function(){t.initThumbEvents()}),n.open()})},_.prototype.reject=function(){var t=this,i=function(e){t.setTooltip(t.$rejectBtn,e.message)};u.rejectMembership(t.sUserName,t.sCsrf,function(){t.setReview(e.REVIEW.REJECTED),t.triggerEvent(e.EVENT.REVIEW_UPDATE),t.setChannelActionsCancel(e.ACTION.REJECT)},i)},_.prototype.setChannelActionsCancel=function(t){if(this.sCancellableAction=t,this.$addBtn&&0!==this.$addBtn.length&&this.$rejectBtn&&0!==this.$rejectBtn.length){this.$renderThumbLink.off("click").on("click",function(e){e.preventDefault()});var i,n,s;this.sCancellableAction===e.ACTION.SUBSCRIBE?(this.sSubBtnLabelSave=this.$addBtnLabel.html(),i=this.$addBtn,n=this.$addBtnLabel,s=this.$rejectBtn):(this.sRejectBtnLabelSave=this.$rejectBtnLabel.html(),i=this.$rejectBtn,n=this.$rejectBtnLabel,s=this.$addBtn),s.off("click").css({opacity:"0.5"}),n.html(o.__("misc.cancel"));var a=this;i.addClass("loading").off("click").on("click",function(){a.setReview(e.REVIEW.UNREVIEWED),a.triggerEvent(e.EVENT.REVIEW_UPDATE),u.unfollowMembership(a.sUserName,a.sCsrf,function(){a.initThumbEvents()})}),this.tCancelTimeout=setTimeout(function(){a.tCancelTimeout=null,a.triggerEvent(e.EVENT.REVIEW_UPDATE_VALIDATED)},this.oOptions.iCancelTimeout)}},_}),define("skins/common/sub_suggestions/suggestList/suggestListMembership",["../suggestList","../suggestBlock","../suggestBlock/suggestMembership","config/main","mustache","lib/tools","lib/i18n!front","text!./tpls/suggestList.mustache"],function(e,t,i,n,s,o,a,r){var l=function(t){var i={};o.initParams(i,t,l.GET_DEFAULT_OPTIONS()),e.apply(this,[i])};return l.DEFAULT_OPTIONS={bListVisibilityToggleBtn:!0,bUseAnimations:!0,sPurchaseOrigin:null,oTemplates:{sTplList:r},oUrls:{sLoad:"/feed/memberships"}},l.GET_DEFAULT_OPTIONS=function(){var t={};return o.initParams(t,l.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},l.EVENT={},l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.prototype.getRenderOptions=function(){var t=e.prototype.getRenderOptions.apply(this);return t.bHasSuggestsHeader=this.oOptions.bListVisibilityToggleBtn,t.bHasSuggestsTitle=!1,t.bReloadSuggestPagin=this.oOptions.bReloadSuggestPagin,t.bListVisibilityToggleBtn=this.oOptions.bListVisibilityToggleBtn,t},l.prototype.getLoadAjaxData=function(){return{mids:this.getLoadedSuggestIds()}},l.prototype.onMainDataLoad=function(e){if(e.memberships&&e.memberships.length)for(var t in e.memberships)this.addSuggest(this.buildSuggestFromJSON(e.memberships[t]));else this.bIsLoadMaxReached=!0},l.prototype.buildSuggestFromJSON=function(t,n){return n||"object"==typeof n||(n={}),"string"==typeof this.oOptions.sPurchaseOrigin&&(n.sPurchaseOrigin=this.oOptions.sPurchaseOrigin),e.prototype.buildSuggestFromJSON.apply(this,[t,n,i])},l.prototype.setOnListUpdate=function(e){this.fnOnListUpdate="function"==typeof e?e:null},l.prototype.getMozaiqueErrorMessage=function(){return a.__("loading.membership_suggests_error")},l.prototype.onSuggestBlockReviewValidated=function(t){e.prototype.onSuggestBlockReviewValidated.apply(this,[t]);var i=this;this.getNextSuggest(function(e){i.replaceUserRender(t,e,function(){i.canCurrentWidthHave2Rows()&&i.setRender2Rows()})})},l.prototype.replaceUserRender=function(i,n){if(!this.oOptions.bUseAnimations)return e.prototype.replaceUserRender.apply(this,[i,n]);var s=i.renderThumb(),o=this;s.find("*").off("click"),s.animate({opacity:0},function(){if(n instanceof t){var e=n.renderThumb();e.css("opacity","0"),s.replaceWith(e),e.animate({opacity:1},function(){o.setRender2Rows()})}else o.removeSuggestToMozaique(s)})},l}),define("text!skins/common/premium_feed/profile_video_list_line.mustache",[],function(){return'<div class="profile-video-list-block activity-event">\n\t<div class="header"><h4>{{{ sTitle }}}</h4></div>\n\t<div class="mozaique thumbs-5-cols"></div>\n</div>'}),define("text!skins/common/premium_feed/profile_video_list_line_more.mustache",[],function(){return'<div class="thumb-block thumb-block-big-button thumb-block-big-button-arrow-right profile-video-list-thumb-block-big-button thumb-block-pagin-next no-rotate">\n\t<div class="thumb-inside">\n\t\t<div class="big-button-container">\n\t\t\t<a href="{{ sUrl }}" class="pagin-next"><span>{{{ sMore }}}</span></a>\n\t\t</div>\n\t</div>\n\t<div class="thumb-under">\n\t\t<p class="title"><a href="{{ sUrl }}"><strong>{{{ sDisplayName }}}</strong></a></p>\n\t\t{{#sNbPremium}}\n\t\t\t<p class="metadata"><span class="bg">{{{ sNbPremium }}}</span></p>\n\t\t{{/sNbPremium}}\n\t\t{{#sNbFree}}\n\t\t\t<p class="metadata"><span class="bg">{{{ sNbFree }}}</span></p>\n\t\t{{/sNbFree}}\n\t</div>\n</div>'}),define("text!skins/common/premium_feed/categories_filter_resume.mustache",[],function(){return'<div class="categories-filter-resume">\n\t<h3>{{{ title }}} <button type="button" class="btn btn-default reset"><span class="icon-f icf-close"></span> {{{ reset }}}</button></h3>\n\t<div class="row cat-list">\n\t\t<div class="col-xs-6">\n\t\t\t<button type="button" class="btn btn-lg btn-default add"><span class="icon-f icf-plus-square icf-white-fill"></span></button>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<button type="button" class="btn btn-lg btn-default exclude"><span class="icon-f icf-minus-square icf-white-fill"></span></button>\n\t\t</div>\n\t\t{{^empty_list_text}}\n\t\t\t<div class="col-xs-6">\n\t\t\t\t{{#add_list}}\n\t\t\t\t\t<p data-id="{{{ id }}}">\n\t\t\t\t\t\t<button type="button" class="btn btn-default remove" data-id="{{{ id }}}"><span class="icon-f icf-close"></span></button>\n\t\t\t\t\t\t<span class="label">{{{ name }}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t{{/add_list}}\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t{{#exclude_list}}\n\t\t\t\t\t<p data-id="{{{ id }}}">\n\t\t\t\t\t\t<button type="button" class="btn btn-default remove" data-id="{{{ id }}}"><span class="icon-f icf-close"></span></button>\n\t\t\t\t\t\t<span class="label">{{{ name }}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t{{/exclude_list}}\n\t\t\t</div>\n\t\t{{/empty_list_text}}\n\t\t{{#empty_list_text}}\n\t\t\t<p class="empty">{{{ empty_list_text }}}</p>\n\t\t{{/empty_list_text}}\n\t</div>\n\t<p class="close"><button type="button" class="btn btn-primary">{{{ ok }}}</button></p>\n</div>'}),define("text!skins/common/premium_feed/categories_filter_update_list.mustache",[],function(){return'<div class="categories-filter-update-list {{{ list_id }}}">\n\t<h3><span class="icon-f icf-minus-square icf-white-fill"></span><span class="icon-f icf-plus-square icf-white-fill"></span> {{{ title }}}</h3>\n\t<div class="row cat-list mobile-hide">\n\t\t{{#lists_3_cols}}\n\t\t<div class="col-xs-4">\n\t\t\t{{#list}}\n\t\t\t\t<p data-id="{{{ id }}}" class="{{{ status }}}">\n\t\t\t\t\t<button type="button" class="btn btn-default action" data-id="{{{ id }}}"><span class="icon-f icf-square"></span><span class="icon-f icf-minus-square"></span><span class="icon-f icf-plus-square"></span> <span class="label">{{{ name }}}</span></button>\n\t\t\t\t</p>\n\t\t\t{{/list}}\n\t\t</div>\n\t\t{{/lists_3_cols}}\n\t</div>\n\t<div class="row cat-list mobile-show">\n\t\t{{#lists_2_cols}}\n\t\t<div class="col-xs-6">\n\t\t\t{{#list}}\n\t\t\t\t<p data-id="{{{ id }}}" class="{{{ status }}}">\n\t\t\t\t\t<button type="button" class="btn btn-default action" data-id="{{{ id }}}"><span class="icon-f icf-square"></span><span class="icon-f icf-minus-square"></span><span class="icon-f icf-plus-square"></span> <span class="label">{{{ name }}}</span></button>\n\t\t\t\t</p>\n\t\t\t{{/list}}\n\t\t</div>\n\t\t{{/lists_2_cols}}\n\t</div>\n\t<p class="close"><button type="button" class="btn btn-primary">{{{ ok }}}</button></p>\n</div>'}),define("text!skins/common/premium_feed/categories_review.mustache",[],function(){return'<div class="categories-review">\n\t<h2>{{{ title }}}</h2>\n\n\t<div class="cats-row">\n\t\t{{#cols}}\n\t\t\t<div class="cats-col">\n\t\t\t\t<h3>{{{ col_title }}}</h3>\n\t\t\t\t<div class="cats{{^col_cats}} empty{{/col_cats}}">\n\t\t\t\t\t{{#col_cats}}\n\t\t\t\t\t\t<p data-id="{{{ id }}}">{{{ name }}}</p>\n\t\t\t\t\t{{/col_cats}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{/cols}}\n\t</div>\n\n\t<button type="button" class="btn btn-primary ok">{{{ ok }}}</button>\n</div>'}),define("text!skins/common/premium_feed/category_review.mustache",[],function(){return'<div class="category-review">\n\t<h2>\n\t\t<a href="{{{ href }}}" title="{{{ category_page }}}" class="btn btn-default" target="_blank">{{{ category_page }}}</a>\n\t\t<span class="label">{{{ category_title }}}</span>\n\t</h2>\n\n\t<div class="category-actions">\n\t\t<p>\n\t\t\t<button class="btn btn-primary sub" type="button">{{{ sub_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ sub_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-primary sub-in-chan" type="button">{{{ sub_in_chan_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ sub_in_chan_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-default unsub" type="button">{{{ unsub_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ unsub_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-default reject" type="button">{{{ reject_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ reject_desc }}}</span>\n\t\t</p>\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/containers.mustache",[],function(){return'\n<button id="expand-memberships" class="expand-memberships">\n\t<span class="expand-memberships-label">{{{ expand_membership }}}</span>\n\t<span class="icon-f icf-angle-down"></span>\n</button>\n<div class="clearfix"></div>\n\n<div id="feed-videos-filters">\n\t<p>{{{ showing_x_vids }}}{{{ new_videos_channels }}}</p>\n\t{{{ filters }}}\n</div>\n<div id="feed-videos"></div>\n\n<div class="clearfix"></div>'}),define("text!skins/common/premium_feed/free_search.mustache",[],function(){return'<div class="free-search-filter">\n\t<h3>\n\t\t<span class="icon-f icf-search"></span> {{{ title }}}\n\t</h3>\n\t<div class="input-group">\n\t\t<input type="text" class="form-control" placeholder="{{{ placeholder }}}"{{#value}} value="{{{ value }}}"{{/value}}/>\n\t\t<span class="input-group-btn">\n            <button class="btn btn-primary ok" type="button">{{{ ok }}}</button>\n        </span>\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-default clear"><span class="icon-f icf-trash"></span> {{{ clear }}}</button>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/min_length_filter.mustache",[],function(){return'<div class="free-min-length-filter">\n\t<h3>\n\t\t<span class="icon-f icf-clock"></span> {{{ title }}}\n\t</h3>\n\t<div class="form-range">\n\t\t<span class="min">{{ min_label }}</span>\n\t\t<span class="max">{{ max_label }}</span>\n\t\t<input type="range" min="{{ min }}" max="{{ max }}" value="{{ value }}" step="1" />\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-primary ok">{{{ ok }}}</button>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/other_suggest.mustache",[],function(){return'<div id="{{{ id }}}" class="thumb-block thumb-block-premium-feed-account thumb-block-premium-feed-other-suggest">\n\t<div class="thumb-inside">\n\t\t<div class="big-button-container">\n\t\t\t<a href="{{ href }}" class="more" target="_blank">\n\t\t\t\t<span>\n\t\t\t\t\t<span class="cat">{{{ category }}}</span>\n\t\t\t\t\t{{{ name }}}\n\t\t\t\t\t<span class="thumbs"><span class="icon-f icf-thumb-up"></span> / <span class="icon-f icf-thumb-down"></span></span>\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>'}),define("text!skins/common/premium_feed/simple_dropdown_menu.mustache",[],function(){return'<div class="simple-dropdown premium-feed-filters">\n\t{{#filters}}\n\n\t\t\t<div class="niv1{{#list.length}} with-niv2{{/list.length}}">\n\t\t\t\t<span class="show-niv2{{#is_reset}} is-reset{{/is_reset}}">\n\t\t\t\t\t{{^is_reset}}<span class="icon-f icf-caret-down"></span>{{/is_reset}}\n\t\t\t\t\t<span class="label" data-filter="{{{ filter }}}">{{#forced_label}}{{{ forced_label }}}{{/forced_label}}{{^forced_label}}{{#list}}{{#active}}{{#label}}{{{ label }}}{{/label}}{{^label}}{{{ name }}}{{/label}}{{/active}}{{/list}}{{/forced_label}}</span>\n\t\t\t\t</span>\n\t\t\t\t{{#list.length}}\n\t\t\t\t\t<div class="niv2 premium-feed-filters">\n\t\t\t\t\t\t<div class="uls">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{{#list}}\n\t\t\t\t\t\t\t\t\t<li><a href="{{{ href }}}"{{#active}} class="current"{{/active}} data-filter="{{{ filter }}}" data-value="{{{ value }}}">{{{ name }}}</a></li>\n\t\t\t\t\t\t\t\t{{/list}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{{/list.length}}\n\t\t\t</div>\n\n\t{{/filters}}\n</div>'}),
define("skins/common/premium_feed",["static/log","config/main","mustache","lib/tools","static/utils","static/dom","static/storage","static/thumbs","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/thumbs/wall","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","lib/helpers/popup/tooltip","lib/helpers/scrollbar","skins/common/profile/sub_actions","skins/common/profile/sub_overlay","skins/common/mozaique/simple_dropdown","skins/common/history/page_view_history","skins/common/history/one_info_tracker","skins/common/basic_feature","skins/common/main_cats/switcher","skins/common/sub_suggestions/suggestList","skins/common/sub_suggestions/suggestList/suggestListChannel","skins/common/sub_suggestions/suggestList/suggestListModel","skins/common/sub_suggestions/suggestList/suggestListMembership","skins/common/sub_suggestions/suggestBlock","text!skins/common/premium_feed/profile_video_list_line.mustache","text!skins/common/premium_feed/profile_video_list_line_more.mustache","text!skins/common/premium_feed/categories_filter_resume.mustache","text!skins/common/premium_feed/categories_filter_update_list.mustache","text!skins/common/premium_feed/categories_review.mustache","text!skins/common/premium_feed/category_review.mustache","text!skins/common/premium_feed/containers.mustache","text!skins/common/design/cover_loader.mustache","text!skins/common/premium_feed/free_search.mustache","text!skins/common/premium_feed/min_length_filter.mustache","text!skins/common/premium_feed/other_suggest.mustache","text!skins/common/premium_feed/simple_dropdown_menu.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D,C,w,S,k,T,E,P,I,F,x,L,O,M,A,V,N,R){var B={sort:{sKey:"sort",bIsSimpleToggle:!0,sSimpleToggleVar:"iFilterSort",aValues:{newest_added:{sKey:"newest_added",iVal:4,sHref:"#add-date",sNameTradKey:"recent_videos_in_premium"},oldest_added:{sKey:"oldest_added",iVal:5,sHref:"#add-date-old",sNameTradKey:"older_videos_in_premium"},newest:{sKey:"newest",iVal:0,sHref:"#recent",sNameTradKey:"recent_videos"},oldest:{sKey:"oldest",iVal:1,sHref:"#old",sNameTradKey:"older_videos"},random:{sKey:"random",iVal:2,sHref:"#random",sNameTradKey:"random_order",sSelectedNameTradKey:"randomize_again"},sub_date:{sKey:"sub_date",iVal:3,sHref:"#sub-addition-date",sNameTradKey:"subscription_date"}}},view_mode:{sKey:"view_mode",bIsSimpleToggle:!0,sSimpleToggleVar:"iFilterViewMode",aValues:{see_all:{sKey:"see_all",iVal:0,sHref:"#see-all",sNameTradKey:"see_all"},watched:{sKey:"watched",iVal:1,sHref:"#watched",sIcon:"eye",sNameTradKey:"watched_videos_only"},unwatched:{sKey:"unwatched",iVal:2,sHref:"#unwatched",sIcon:"eye-blocked",sNameTradKey:"unwatched_videos_only"}}},sources:{sKey:"sources",bIsBitwise:!0,aValues:{models:{sKey:"models",sSuggestListKey:"models",iVal:2,sHref:"#models",sNameTradKey:"models",sSubscribeAlertTradKey:"sub_to_models_to_use_filter",sConfHasSubs:"hasSubsModels",sIcon:"star-o"},channels:{sKey:"channels",sSuggestListKey:"channels",iVal:1,sHref:"#channels",sNameTradKey:"channels",sSubscribeAlertTradKey:"sub_to_channels_to_use_filter",sConfHasSubs:"hasSubsChannels",sIcon:"device-tv-v2"}}},show_free:{sKey:"show_free",bIsBitwise:!0,aValues:{membership:{sKey:"membership",iVal:4,sHref:"#membership",sNameTradKey:"membership"},premium:{sKey:"premium",iVal:2,sHref:"#premium",sNameTradKey:"premium_videos"},ppv:{sKey:"ppv",iVal:8,sHref:"#direct-purchase",sNameTradKey:"direct_purchase"},free:{sKey:"free",iVal:1,sHref:"#free",sNameTradKey:"free_videos"}}},min_length:{sKey:"min_length",aValues:{premium_min_length:{sKey:"premium_min_length",sHref:"#premium-min-length",sClass:"premium-min-length",sFilterVar:"iFilterMinLengthPremium",sNameFunc:"getMinLengthPremiumFilterLabelText",sTitleTradKey:"min_length_title_premium"},free_min_length:{sKey:"free_min_length",sHref:"#free-min-length",sClass:"free-min-length",sFilterVar:"iFilterMinLengthFree",sNameFunc:"getMinLengthFreeFilterLabelText",sTitleTradKey:"min_length_title_free"}}},quality:{sKey:"quality",bIsSimpleToggle:!0,sSimpleToggleVar:"sFilterQuality",aValues:{"360P":{sKey:"360P",sHref:"#360P",sIcon:"resolution",sNameTradKey:"all_qualities"},"480P":{sKey:"480P",sHref:"#480P",sName:"480p+"},"720P":{sKey:"720P",sHref:"#720P",sName:"720p+"},"1080P":{sKey:"1080P",sHref:"#1080P",sName:"1080p+"},"1440P":{sKey:"1440P",sHref:"#1440P",sName:"1440p+"},"4K":{sKey:"4K",sHref:"#4K",sName:"4K"}}},categories:{sKey:"categories",sNameFunc:"getCategoriesFilterLabelText"},free_search:{sKey:"free_search",sNameFunc:"getFreeSearchFilterLabelText"},reset_library:{sKey:"reset_library",bIsReset:!0,sIcon:"close-thin",sNameTradKey:"reset_library_filter"},reset_memberships:{sKey:"reset_memberships",bIsReset:!0,sIcon:"close-thin",sNameTradKey:"reset_memberships_filter"},reset:{sKey:"reset",bIsReset:!0,sIcon:"close-thin",sNameTradKey:"reset_filters"}},U={NORMAL:"NORMAL",LIBRARY:"LIBRARY",MEMBERSHIP:"MEMBERSHIP"},H={channels:1,models:2},j={categories_filter_resume:I,categories_filter_update:F,categories_review:x,category_review:L,suggest_list:null,channel_thumb:null,channel_preview:null,channel_preview_thumb_list:null,membership_thumb:null,profile_video_list_line:E,profile_video_list_line_more:P,containers:O,cover_loader:M,free_search_filter:A,min_length_filter:V,other_suggest:N,simple_dropdown:R},q={premium_name:"RED"},z={add_exclude_cats_to_result:"premium_feed.add_exclude_cats_to_result",all:"misc.all",all_content:"misc.all_content",all_qualities:"listing.all_qualities",cancel:"misc.cancel",cat_content_no_longer_offered:"premium_feed.cat_content_no_longer_offered",cat_no_longer_offered:"premium_feed.cat_no_longer_offered",categories:"video.categories",category:"category",categories_added:"premium_feed.categories.added",categories_added_in_channels:"premium_feed.categories.added_in_channels",categories_ignored:"premium_feed.categories.ignored",categories_rejected:"premium_feed.categories.rejected",categories_unreviewed:"premium_feed.categories.unreviewed",category_page:"video.category_page",category_dont_show_it_again:"video.category.dont_show_it_again",channels:"profile.channels",channel_page:"profile.channel_page",channels_left_to_review:"premium_feed.channels_left_to_review",clear:"search.clear",direct_purchase:"premium.direct_purchase",direct_purchase_short:"premium.direct_purchase",duration_minutes_min:"video.duration_minutes_min",filter_add_categories:"premium_feed.filter_add_categories",filter_exclude_categories:"premium_feed.filter_exclude_categories",filters_restrict_results:"search.filters_restrict_results",free:"misc.free",free_only:"videos.free_vids",free_videos:"videos.free_vids",free_videos_short:"misc.free",here_some_channels:"premium_feed.here_some_channels",hide_suggests:"premium_feed.hide_suggests",expand_membership:"listing.expand",collapse_membership:"listing.collapse",membership:"profile.membership",membership_short:"profile.membership",min_length_title_free:"premium_feed.minimum_duration_of_free_videos",min_length_title_premium:"premium_feed.minimum_duration_of_site_videos",minimum_duration:"video.duration",models:"profile.models",nb_mins_long:"misc.nb_mins_long",new_channel_added_since_last_visit:"premium_feed.new_channel_added_since_last_visit",new_channels_added_since_last_visit:"premium_feed.new_channels_added_since_last_visit",new_video_added_since_last_visit:"premium_feed.new_video_added_since_last_visit",new_video_channel_added_since_last_visit:"premium_feed.new_video_channel_added_since_last_visit",new_video_channels_added_since_last_visit:"premium_feed.new_video_channels_added_since_last_visit",new_videos_added_since_last_visit:"premium_feed.new_videos_added_since_last_visit",new_videos_channel_added_since_last_visit:"premium_feed.new_videos_channel_added_since_last_visit",new_videos_channels_added_since_last_visit:"premium_feed.new_videos_channels_added_since_last_visit",not_interested:"misc.not_interested",not_selected:"misc.not_selected",ok:"misc.OK",older_videos:"order.oldest_original_date",older_videos_in_premium:"order.oldest_date_added",premium_videos:"videos.premium",premium_videos_short:"premium.premium",random_order:"order.random_order",randomize_again:"order.randomize_again",recent_videos:"order.newest_original_date",recent_videos_in_premium:"order.newest_date_added",red_and_free:"premium_feed.red_and_free",red_only:"videos.red_vids",reset_filters:"search.reset_filters",reset_library_filter:"search.reset_library_filter",reset_memberships_filter:"search.reset_memberships_filter",reset_selection:"misc.reset_selection",search:"search",search_for:"search.for",see_all:"misc.see_all",show_suggests:"premium_feed.show_suggests",showing_x_vids:"listing.showing_nb_vids",sub_to_cat_global:"premium_feed.sub_to_cat_global",sub_to_cat_in_subbed_channels:"premium_feed.sub_to_cat_in_subbed_channels",sub_to_channels_to_populate:"premium_feed.sub_to_channels_to_populate",sub_to_channels_to_use_filter:"premium_feed.sub_to_channels_to_use_filter",sub_to_models_to_populate:"premium_feed.sub_to_models_to_populate",sub_to_models_to_use_filter:"premium_feed.sub_to_models_to_use_filter",subscribe:"subscriptions.subscribe",subscribe_in_channel:"premium_feed.category.subscribe_in_channel",subscription_date:"premium_feed.subscription_date",unwatched_videos_only:"listing.unwatched_videos_only",watched_videos_only:"listing.watched_videos_only",welcome:"legal.disclaimer.vpn_detect.welcome",welcome_content:"premium_feed.welcome_to_custom_homepage"},W={reject_cat:"ban",sub_cat:!1,sub_cat_in_chan:!1,unsub_cat:"eye-blocked"},G={account_subscriptions:"/account/subscriptions/channels",account_not_interested:"/account/subscriptions/not-interested",hash_red:"#red",hash_red_and_free:"#red-and-free"},Y={use_indexed_db:!0,indexed_db_key:"premium-feed",iMaxSubbedProfileVideoListLines:10},K={page_init_end:function(e){},get_channel_top_title:function(e){},append_channel_videos:function(e,t){},init_videos_list:function(e){},init_desktop_channel_videos:function(e){},add_pagination:function(e){},suggest_launch_wizard:function(){},fnMakePremiumPageUrl:function(e){return e},fnMakeMembershipPageUrl:function(e){return e},fnGetChannelPicto:function(){return null},fnGetModelPicto:function(e){return null}},X=function(i){var s=this;if(this.bNoCatSuggests=!0,t.data.user_cats=[],this.$PageContainer=$("#page-videos-content"),this.$PremiumSwitchPageRow=$(".premium-switch-page-dropdown"),this.$ExpandMembershipBtn=$("#expand-memberships"),$(window).resize(function(){s.resizeTO&&(clearTimeout(s.resizeTO),s.resizeTO=null),s.resizeTO=setTimeout(function(){s.$VideoFilters.length&&(s.appendMembershipsBtn(),s.updateSuggestLists())},300)}),0===this.$PageContainer.length)return!1;if(this.oOptions=Y,this.oTexts=q,this.oTranslations=z,this.oIcfs=W,this.oTemplates=j,this.oUrls=G,this.oFunctions=K,void 0!==i){if("undefined"!=typeof i.options)for(var o in i.options)"undefined"!=typeof this.oOptions[o]&&(this.oOptions[o]=i.options[o]);if("undefined"!=typeof i.texts)for(var a in i.texts)"undefined"!=typeof this.oTexts[a]&&(this.oTexts[a]=i.texts[a]);if("undefined"!=typeof i.translations)for(var r in i.translations)"undefined"!=typeof this.oTranslations[r]&&(this.oTranslations[r]=i.translations[r]);if("undefined"!=typeof i.icfs)for(var d in i.icon_f)"undefined"!=typeof this.oIcfs[d]&&(this.oIcfs[d]=i.icon_f[d]);if("undefined"!=typeof i.templates)for(var u in i.templates)"undefined"!=typeof this.oTemplates[u]&&(this.oTemplates[u]=i.templates[u]);if("undefined"!=typeof i.urls)for(var c in i.urls)"undefined"!=typeof this.oUrls[c]&&(this.oUrls[c]=i.urls[c]);if("undefined"!=typeof i.functions)for(var h in i.functions)"undefined"!=typeof this.oFunctions[h]&&(this.oFunctions[h]=i.functions[h])}this.iCancelTimeout=3e3,this.iTooFewChannelsLimit=2,this.iAjaxErrorsCount=0,this.oFeatureSuggestOpened=new y(y.S_F_PREMIUM_FEED_CHANNELS),this.oFeatureSuggestOpened.activateLoadingPopup(!1),this.oFeatureSuggestOpened.activateErrorPopup(!1);var p={bIsVisible:this.oFeatureSuggestOpened.isEnabled(),sGender:null,oTemplates:{},oUrls:{fnCustomSetBlockUrl:this.oFunctions.fnMakePremiumPageUrl}},_={bIsVisible:this.oFeatureSuggestOpened.isEnabled(),bReloadSuggestPagin:!0,sPurchaseOrigin:"custom_home_membership",oTemplates:{},oUrls:{fnCustomSetBlockUrl:this.oFunctions.fnMakeMembershipPageUrl}};null!==this.oTemplates.suggest_list&&(p.oTemplates.sTplList=this.oTemplates.suggest_list,_.oTemplates.sTplList=this.oTemplates.suggest_list),null!==this.oTemplates.channel_thumb&&(p.oTemplates.sTplThumbBlock=this.oTemplates.channel_thumb),null!==this.oTemplates.membership_thumb&&(_.oTemplates.sTplThumbBlock=this.oTemplates.membership_thumb),null!==this.oTemplates.channel_preview&&(p.oTemplates.sTplPopPreview=this.oTemplates.channel_preview,_.oTemplates.sTplPopPreview=this.oTemplates.channel_preview),null!==this.oTemplates.channel_preview_thumb_list&&(p.oTemplates.sTplPopPreviewThumb=this.oTemplates.channel_preview_thumb_list,_.oTemplates.sTplPopPreviewThumb=this.oTemplates.channel_preview_thumb_list);var g={},D={},T={};n.initParams(g,{sGender:"women"},p),n.initParams(D,{sGender:"men"},p),n.initParams(T,{sGender:"trans"},p),this.oMainSuggestLists={},this.oSecondarySuggestLists={};this.oMainSuggestLists.channels={oSuggestList:new w(p),bLoaded:!1,sName:"channels",bDisplayed:!1},this.oMainSuggestLists.women={oSuggestList:new S(g),bLoaded:!1,sName:"women",bDisplayed:!1},this.oMainSuggestLists.men={oSuggestList:new S(D),bLoaded:!1,sName:"men",bDisplayed:!1},this.oMainSuggestLists.trans={oSuggestList:new S(T),bLoaded:!1,sName:"trans",bDisplayed:!1};for(var E in this.oMainSuggestLists)!function(e){s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.REVIEW_ADDED_UPDATE_VALIDATED,function(){s.loadVideos()}),s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.REVIEW_ADDED_UPDATE,function(){s.oMainSuggestLists[e].oSuggestList.countAdded()<=1||s.addProfileVideoListLine(s.oMainSuggestLists[e].oSuggestList.getLastReviewedId(),e)}),s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.REVIEW_UNREVIEWED_UPDATE,function(){s.removeProfileVideoListLine(s.oMainSuggestLists[e].oSuggestList.getLastReviewedId())}),s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.REVIEW_UNREVIEWED_UPDATE_VALIDATED,function(){s.removeProfileVideoListLine(s.oMainSuggestLists[e].oSuggestList.getLastValidatedReviewedId())}),s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.LOADED,function(){s.oMainSuggestLists[e].bLoaded=!0,s.isMainSuggestListDisplayed()&&(s.bMainSuggestListWizardDisplayed||(s.bMainSuggestListWizardDisplayed=!0,s.oFunctions.suggest_launch_wizard()))}),s.oMainSuggestLists[e].oSuggestList.onEvent(w.EVENT.LIST_TOGGLED,function(){s.toggleActiveMainSuggestList(e)}),s.oMainSuggestLists[e].oSuggestList.onEvent(C.EVENT.VISIBILITY_TOGGLED,function(){s.updateSuggestListsVisibility(s.oMainSuggestLists[e].oSuggestList.isDisplayed())})}(E);this.initActiveMainSuggestList();var P;P="gay"===t.dyn.user_main_cat?["channels","men","trans","women"]:"shemale"===t.dyn.user_main_cat?["channels","trans","women","men"]:["channels","women","men","trans"];for(var I in P){var E=P[I];for(var F in P){var x=P[F];E!==x&&this.oMainSuggestLists[E].oSuggestList.addSuggestListToToggleList(this.oMainSuggestLists[x].oSuggestList)}}this.oSecondarySuggestLists.memberships={oSuggestList:new k(_),bLoaded:!1,sName:"memberships",bDisplayed:!1},this.oSecondarySuggestLists.memberships.oSuggestList.onEvent(C.EVENT.LOADED,function(){s.oSecondarySuggestLists.memberships.bLoaded=!0}),this.oSecondarySuggestLists.memberships.oSuggestList.onEvent(C.EVENT.VISIBILITY_TOGGLED,function(){s.updateSuggestListsVisibility(s.oSecondarySuggestLists.memberships.oSuggestList.isDisplayed())}),this.initActiveSecondarySuggestList(),this.sFilterType=U.NORMAL,this.bIsSavingFilters=!1,this.aLoadedSuggests=[],this.aVisibleSuggests=[],this.oFiltersLabels=[],this.iFilterViewMode="undefined"!=typeof t.data[B.view_mode.sKey]?t.data[B.view_mode.sKey]:0,this.iFilterSort="undefined"!=typeof t.data[B.sort.sKey]?t.data[B.sort.sKey]:B.sort.aValues.newest.iVal,this.iFilterSortRandomize=!1,this.iFilterMinLengthPremium="undefined"!=typeof t.data[B.min_length.aValues.premium_min_length.sKey]?t.data[B.min_length.aValues.premium_min_length.sKey]:0,this.iFilterMinLengthFree="undefined"!=typeof t.data[B.min_length.aValues.free_min_length.sKey]?t.data[B.min_length.aValues.free_min_length.sKey]:0,this.sFilterQuality="undefined"!=typeof t.data[B.quality.sKey]?t.data[B.quality.sKey]:B.quality.aValues["360p"].sKey,this.oFilterCategories={cats:[],excats:[]},this.aChannelsId=[],this.aSourcesFilters=[B.sources.aValues.models.sKey,B.sources.aValues.channels.sKey],this.iFilterSources=0,this.iDefaultFilterSources=0;var L=!1;"undefined"!=typeof t.data.displayModels&&t.data.displayModels&&(this.iFilterSources+=B.sources.aValues.models.iVal,this.hasAddedInSource(B.sources.aValues.models)&&(L=!0)),"undefined"!=typeof t.data.displayChannels&&t.data.displayChannels&&(this.iFilterSources+=B.sources.aValues.channels.iVal,this.hasAddedInSource(B.sources.aValues.channels)&&(L=!0));for(var O in B.sources.aValues)-1!==this.aSourcesFilters.indexOf(B.sources.aValues[O].sKey)&&(this.iDefaultFilterSources+=B.sources.aValues[O].iVal);L||(e.debug_("%c oPremiumFeedPage --- __constructor","color:orange;","updating iFilterSources with default because current configuration has no content",{iFilterSources:this.iFilterSources}),this.iFilterSources=this.iDefaultFilterSources),this.aShowFreeAvailableFilters=[],this.iDefaultFilterShowFree=0,!t.dyn.login_info.has_ppv_videos||"default"!==t.sitename&&"xnxx"!==t.sitename||(this.aShowFreeAvailableFilters.push(B.show_free.aValues.ppv.sKey),this.iDefaultFilterShowFree+=B.show_free.aValues.ppv.iVal),!t.dyn.login_info.has_memberships||"default"!==t.sitename&&"xnxx"!==t.sitename||(this.aShowFreeAvailableFilters.push(B.show_free.aValues.membership.sKey),this.iDefaultFilterShowFree+=B.show_free.aValues.membership.iVal),t.dyn.login_info.is_premium&&(this.aShowFreeAvailableFilters.push(B.show_free.aValues.premium.sKey),this.iDefaultFilterShowFree+=B.show_free.aValues.premium.iVal),this.aShowFreeAvailableFilters.push(B.show_free.aValues.free.sKey),0===this.iDefaultFilterShowFree&&(this.iDefaultFilterShowFree=B.show_free.aValues.free.iVal),this.iFilterShowFree="undefined"!=typeof t.data[B.show_free.sKey]?t.data[B.show_free.sKey]:this.iDefaultFilterShowFree;var M=v.get("premiumFeed_lastFreeSearchFilter");this.sFilterFreeSearch=M||!1;var A=v.get("premiumFeed_lastCatFilter");if(A&&A.cats&&t.data[B.categories.sKey]&&t.data[B.categories.sKey].length>0)for(var I in t.data[B.categories.sKey]){var V=t.data[B.categories.sKey][I];-1!==A.cats.indexOf(V.id)?this.oFilterCategories.cats.push(V.id):-1!==A.excats.indexOf(V.id)&&this.oFilterCategories.excats.push(V.id)}this.bIsLibraryFilterBtnActive=!1,this.bIsMembershipFilterBtnCurrent=!1,this.bIsMembershipFilterDropdownActive=!1,this.bHasTooFewVideos=!1,this.bIsMembershipsExpand=!1,this.bIsSuggestBtnPlaced=!1,this.fPrimaryButtonWidth=0,this.oSimpleDropdown=new m,this.aProfilesVideoListLineAdded=[];var N=v.get("premiumFeed_lastPage")||null;this.iFilterViewMode===B.view_mode.aValues.see_all.iVal||this.isViewModeAvailable()?this.loadVideos(N):f.confirm(l.__("premium_feed.filter_based_on_history_enabling"),function(){b.startTracking(function(){s.loadVideos(N)})},function(){b.startTracking(function(){s.updateFilterSelect(B.view_mode.sKey,B.view_mode.aValues.see_all.iVal),s.loadVideos(N)})}),t.data.isFirstVisit&&s.openWelcomePopup()};return X.prototype={createContainers:function(){var e=this;if("undefined"==typeof this.$VideosContainer){if(this.$PageContainer.empty(),this.$PageContainer.append($(i.render(this.oTemplates.containers,{expand_membership:l.__(this.bIsMembershipsExpand?this.oTranslations.collapse_membership:this.oTranslations.expand_membership),showing_x_vids:l.__(this.oTranslations.showing_x_vids,{"%nb_videos%":'<strong id="feed-nb-videos"></strong>'}),new_videos_channels:t.data.new_videos||t.data.new_channels?" "+l.__(this.oTranslations["new"+(t.data.new_videos>0?t.data.new_videos>1?"_videos":"_video":"")+(t.data.new_channels>0?t.data.new_channels>1?"_channels":"_channel":"")+"_added_since_last_visit"],{"%videos_count%":t.data.new_videos?"<strong>"+t.data.new_videos.toString()+"</strong>":"","%channels_count%":t.data.new_channels?"<strong>"+t.data.new_channels.toString()+"</strong>":""}):"",filters:this.getFiltersHTML()}))),this.$VideosContainer=$("#feed-videos"),this.$CountVideos=this.$PageContainer.find("#feed-nb-videos"),this.$VideoFilters=this.$PageContainer.find("#feed-videos-filters"),this.initVideoFilters(),this.oOptions.use_indexed_db)try{this.firstIndexedDbSetup()}catch(s){console.error("Unable to init index db"),console.error(s),this.oOptions.use_indexed_db=!1}if(this.oOptions.use_indexed_db)try{if(-1!==this.loadSaveFilters())return!0}catch(s){console.error("Unable to init index db"),console.error(s),this.oOptions.use_indexed_db=!1}this.$ExpandMembershipBtn.length&&(this.$ExpandMembershipBtn.appendTo(this.$PremiumSwitchPageRow),this.$ExpandMembershipBtn.on("click",function(){e.expandMembershipsContainer()})),e.initLibraryFilterBtn(),e.initMembershipsFilterBtn(),e.initUnsubMembershipBtn(),e.appendMembershipsBtn(),e.updateSuggestLists();var n=this.explodeShowFreeFilterValue(this.iFilterShowFree);(!n[B.show_free.aValues.ppv.sKey]||n[B.show_free.aValues.membership.sKey]||n[B.show_free.aValues.premium.sKey]||n[B.show_free.aValues.free.sKey])&&($("body").css("position","relative"),this.restoreProfileVideoListLineStorage())}},getVideosContainer:function(){return this.createContainers(),this.$VideosContainer},setVideosContainerToLoading:function(){if(!0!==this.bVideosContainerIsLoading){this.bVideosContainerIsLoading=!0,this.$VideosContainerLoader||(this.$VideosContainerLoader=$(i.render(this.oTemplates.cover_loader)));this.getVideosContainer().append(this.$VideosContainerLoader).addClass("loading")}},unsetVideosContainerToLoading:function(){if(!0===this.bVideosContainerIsLoading){this.bVideosContainerIsLoading=!1,this.$VideosContainerLoader&&this.$VideosContainerLoader.remove();this.getVideosContainer().removeClass("loading")}},loadVideos:function(i){i="string"==typeof i?i:"/feed/0","undefined"!=typeof this.xVideoCall&&"function"==typeof this.xVideoCall.abort&&this.xVideoCall.abort(),this.setVideosContainerToLoading();var n=this,s=this.getVideoLoadData();this.xVideoCall=$.post({url:i,data:s,complete:function(){n.unsetVideosContainerToLoading()},success:function(o){if(e.debug_("%c oPremiumFeedPage --- loadVideos --- Récupérer les vidéos","color:orange;",{sUrl:i,oReceivedData:o,oPostData:s}),o.result){v.set("premiumFeed_lastCatFilter",n.oFilterCategories),v.set("premiumFeed_lastFreeSearchFilter",n.sFilterFreeSearch),v.set("premiumFeed_lastPage",i);var a=n.getVideosContainer();a.empty(),"number"!=typeof o.nb_videos_total&&(o.nb_videos_total=0),o.nb_videos_total<12?n.setTooFewVideos(!0):n.setTooFewVideos(!1),n.$CountVideos.text(o.nb_videos_total.toLocaleString(t.dyn.locale));var r=$(o.html);if(a.toggleClass("no-videos",0===r.length),n.updateSuggestLists(),0===o.nb_videos_total)return void(0===o.nb_channels&&0===o.nb_categories?n.$VideoFilters.hide():(n.$VideoFilters.show(),a.append('<p class="empty">'+l.__(n.oTranslations.filters_restrict_results)+"</p>")));n.$VideoFilters.show(),a.prepend(r),"undefined"!=typeof o[B.show_free.sKey]&&o[B.show_free.sKey]!==n.iFilterShowFree&&n.updateFilterSelect(B.show_free.sKey,o[B.show_free.sKey]),"undefined"!=typeof o[B.min_length.aValues.premium_min_length.sKey]&&o[B.min_length.aValues.premium_min_length.sKey]!==n.iFilterMinLengthPremium&&n.updateFilterSelect(B.min_length.aValues.premium_min_length.sKey,o[B.min_length.aValues.premium_min_length.sKey]),"undefined"!=typeof o[B.min_length.aValues.free_min_length.sKey]&&o[B.min_length.aValues.free_min_length.sKey]!==n.iFilterMinLengthFree&&n.updateFilterSelect(B.min_length.aValues.free_min_length.sKey,o[B.min_length.aValues.free_min_length.sKey]),"undefined"!=typeof o[B.view_mode.sKey]&&o[B.view_mode.sKey]!==n.iFilterViewMode&&n.updateFilterSelect(B.view_mode.sKey,o[B.view_mode.sKey]),n.iFilterSortRandomize=!1,"undefined"!=typeof o[B.sort.sKey]&&o[B.sort.sKey]!==n.iFilterSort&&n.updateFilterSelect(B.sort.sKey,o[B.sort.sKey]),"undefined"!=typeof o[B.quality.sKey]&&o[B.quality.sKey]!==n.sFilterQuality&&n.updateFilterSelect(B.quality.sKey,o[B.quality.sKey]),"undefined"!=typeof o[B.free_search.sKey]&&o[B.free_search.sKey]!==n.sFilterFreeSearch&&n.updateFilterSelect(B.free_search.sKey,o[B.free_search.sKey]),"undefined"!=typeof o.cats&&"undefined"!=typeof o.excats&&n.hasCategoriesFilterChanged(o)&&(n.oFilterCategories.cats=o.cats,n.oFilterCategories.excats=o.excats,n.updateCategoriesFilter()),n.iFilterSort===B.sort.aValues.sub_date.iVal&&n.initChannelShowMore(a),n.toggleSubbedProfilesVideoListLines(n.iFilterSort!==B.sort.aValues.sub_date.iVal),n.oFunctions.init_videos_list(a),n.oFunctions.add_pagination(a),a.find(".pagination a, .pagin-next").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||(n.scrollToVideos(),n.loadVideos("/feed/"+$(this).attr("href").substring(1)))})}},error:function(t){t&&"abort"===t.statusText||(e.debug("%c Loading videos - Ajax ERROR","color:lightcoral;",t),n.iAjaxErrorsCount++,n.iAjaxErrorsCount<2?(e.debug("Trying again"),setTimeout(function(){n.loadVideos(i)},500)):e.debug("%c Loading videos - Too many Ajax ERROR","color:lightcoral;"))},dataType:"json"})},scrollToVideos:function(e){if(void 0===e){if(e=this.getVideosContainer(),o.isElementInView(this.$VideoFilters,!1)&&o.isElementInView(e,!1))return}else if(o.isElementInView(e,!1))return;var t=Math.min(80,$(window).height()/8),i=e.offset().top-t;o.scrollToTop(i)},getVideoLoadData:function(){var e={cats:this.oFilterCategories.cats,excats:this.oFilterCategories.excats,channels:this.aChannelsId};return e[B.view_mode.sKey]=this.iFilterViewMode,e[B.sort.sKey]=this.iFilterSortRandomize?"randomize":this.iFilterSort,e[B.show_free.sKey]=this.iFilterShowFree,e[B.sources.sKey]=this.iFilterSources,e[B.quality.sKey]=this.sFilterQuality,e[B.min_length.aValues.premium_min_length.sKey]=this.iFilterMinLengthPremium,e[B.min_length.aValues.free_min_length.sKey]=this.iFilterMinLengthFree,"string"==typeof this.sFilterFreeSearch&&this.sFilterFreeSearch.length>0&&(e[B.free_search.sKey]=this.sFilterFreeSearch),e},initChannelShowMore:function(e){var t=this;$(".activity-event",e).each(function(){var e=$(this),i=e.find("a.more"),n=e.find("a.less");0!==i.length&&(e.data("loaded",e.find(".thumb-block").length<=10),e.data("page-loaded",0),n.on("click",function(i){i.preventDefault(),e.addClass("show-less"),t.scrollToVideos(t.oFunctions.get_channel_top_title(e))}),i.on("click",function(i){i.preventDefault(),t.showMoreChannelVideoClick(e)}))})},showMoreChannelVideoClick:function(t){if(t.data("loaded"))return void t.removeClass("show-less");if(t.hasClass("show-less")){if(!0===!t.find(".mozaique .thumb-block").not(".show-more-less-vids").last().is(":visible"))return void t.removeClass("show-less")}var i=this,s=$('<p class="loader">'+c.getIcf()+"</p>"),o=t.find(".mozaique"),a=t.data("id-profile"),r=t.data("page-loaded"),l=t.find("a.more");l.off("click"),o.append(s);var d="/feed/channel/"+a+"/"+(r+1),u=this.getVideoLoadData();$.post({url:d,data:u,complete:function(){s.remove()},success:function(s){if(e.debug_("%c oPremiumFeedPage --- showMoreChannelVideoClick","color:orange;",{sUrl:d,oReceivedData:s,oPostData:u}),s.result){t.removeClass("show-less").data("page-loaded",r+1);var a=$(n.replaceThumbcast(s.html.replace(/\\'/gi,"'"))).find(".thumb-block");n.executePendingPrepare(a),i.oFunctions.append_channel_videos(a,t),i.oFunctions.init_videos_list(o),a.addClass("extra-thumb-block"),l.on("click",function(e){e.preventDefault(),i.showMoreChannelVideoClick(t)}),s.nb_more||(t.data("loaded",!0),l.addClass("no-more-to-load"))}},error:function(n){i.iAjaxErrorsCount++,e.debug_("%c Loading SHOW MORE channel videos - Ajax ERROR","color:red;","iAjaxErrorsCount : "+i.iAjaxErrorsCount,n);i.iAjaxErrorsCount<2?(e.debug_("%c Trying again","color:red;"),setTimeout(function(){i.showMoreChannelVideoClick(t)},500)):e.debug_("%c Loading SHOW MORE channel videos - Too many Ajax ERROR","color:red;",2)},dataType:"json"})},setTooFewVideos:function(e){this.bHasTooFewVideos!==e&&(this.bHasTooFewVideos=e,this.updateSuggestLists())},getMainSuggestListObject:function(e){return"string"==typeof e&&"undefined"!=typeof this.oMainSuggestLists[e]||(e=this.sActiveMainSuggestList),this.oMainSuggestLists[e]},getSecondarySuggestListObject:function(e){return"string"==typeof e&&"undefined"!=typeof this.oSecondarySuggestLists[e]||(e=this.sActiveSecondarySuggestList),this.oSecondarySuggestLists[e]},getMainSuggestList:function(e){return this.getMainSuggestListObject(e).oSuggestList},getSecondarySuggestList:function(e){return this.getSecondarySuggestListObject(e).oSuggestList},isMainSuggestListLoaded:function(e){return this.getMainSuggestListObject(e).bLoaded},isSecondarySuggestListLoaded:function(e){return this.getSecondarySuggestListObject(e).bLoaded},getSuggestListRender:function(e){return e?e.render():null},getMainSuggestListRender:function(e){var t=this.getMainSuggestList(e);return this.getSuggestListRender(t)},countMainSuggestListAdded:function(e){var t=this.getMainSuggestList(e);return t?t.countAdded():null},getSecondarySuggestListRender:function(e){var t=this.getSecondarySuggestList(e);return this.getSuggestListRender(t)},isMainSuggestListDisplayed:function(e){return this.getMainSuggestListRender(e).is(":visible")},isSecondarySuggestListDisplayed:function(e){return this.getSecondarySuggestListRender(e).is(":visible")},updateSuggestLists:function(){var e=this.getMainSuggestList(),t=e.getLoadedSuggestIds(),i=t.length,n=e.countAdded()<this.iTooFewChannelsLimit,s=n&&this.bHasTooFewVideos,o=1,a=this;if(0===i&&e.canLoadMore())return void e.load(function(){a.updateSuggestLists()});o=0===i||s?2:1;var r=this.getSuggestListRender(this.getTopPageSuggestList()),d=this.getSuggestListRender(this.getBottomPageSuggestList());this.$PageContainer.prepend(r),1===o?this.$PageContainer.append(d):2===o&&d.detach(),this.isMainSuggestListDisplayed()&&this.isMainSuggestListLoaded()&&(this.bMainSuggestListWizardDisplayed||(this.bMainSuggestListWizardDisplayed=!0,this.oFunctions.suggest_launch_wizard())),n?(this.$HasTooFewChannelsAddedAlert&&this.$HasTooFewChannelsAddedAlert.length||(this.$HasTooFewChannelsAddedAlert=$('<p class="welcome-channel-sub-message">'+l.__(this.oTranslations.sub_to_channels_to_populate)+"</p>")),this.$PageContainer.prepend(this.$HasTooFewChannelsAddedAlert)):this.$HasTooFewChannelsAddedAlert&&this.$HasTooFewChannelsAddedAlert.length&&(this.$HasTooFewChannelsAddedAlert.remove(),this.$HasTooFewChannelsAddedAlert=null),this.updateSuggestListsVisibility(this.oFeatureSuggestOpened.isEnabled())},initActiveMainSuggestList:function(){var e=a.get("active_main_suggest_list","premium_feed");"string"==typeof e&&e.length&&"undefined"!=typeof this.oMainSuggestLists[e]||(e="channels"),this.toggleActiveMainSuggestList(e,!0)},initActiveSecondarySuggestList:function(){var e=a.get("active_secondary_suggest_list","premium_feed");"string"==typeof e&&e.length&&"undefined"!=typeof this.oSecondarySuggestLists[e]||(e="memberships"),this.toggleActiveSecondarySuggestList(e,!0)},getTopPageSuggestList:function(){return this.sFilterType===U.MEMBERSHIP?this.getSecondarySuggestList():this.getMainSuggestList()},getBottomPageSuggestList:function(){return this.sFilterType===U.MEMBERSHIP?this.getMainSuggestList():this.getSecondarySuggestList()},updateSuggestListsVisibility:function(e){this.oFeatureSuggestOpened.toggle(null,e);for(var t in this.oMainSuggestLists)this.oMainSuggestLists[t].oSuggestList.toggleVisibility(e,!0);for(var t in this.oSecondarySuggestLists)this.oSecondarySuggestLists[t].oSuggestList.toggleVisibility(e,!0);if(this.$suggestListsVisibilityButton&&this.$suggestListsVisibilityButton.length&&this.$suggestListsVisibilityButton.remove(),
this.appendMembershipsBtn(),!e&&this.$PremiumSwitchPageRow&&this.$PremiumSwitchPageRow.length){var i=this.getTopPageSuggestList();i.hideCompletely(),this.$suggestListsVisibilityButton=$(i.getRenderVisibilityButton()),this.$suggestListsVisibilityButton.on("click",function(e){e.preventDefault(),i.toggleVisibility(!0)}),this.$PremiumSwitchPageRow.append(this.$suggestListsVisibilityButton)}$("#main").toggleClass("with-active-suggests",e)},toggleActiveMainSuggestList:function(e,t){if("undefined"==typeof this.oMainSuggestLists[e])throw new Error('MainSuggestList "'+e+'" not existent.');this.sActiveMainSuggestList=e,t||a.set("active_main_suggest_list",e,"premium_feed"),this.updateSuggestLists()},toggleActiveSecondarySuggestList:function(e,t){if("undefined"==typeof this.oSecondarySuggestLists[e])throw new Error('SecondarySuggestList "'+e+'" not existent.');this.sActiveSecondarySuggestList=e,t||a.set("active_secondary_suggest_list",e,"premium_feed"),this.updateSuggestLists()},initProfileVideoListLineContainer:function(){this.$profileVideoListLines&&this.$profileVideoListLines.length||(this.$profileVideoListLines=$('<div class="profile-video-lists"></div>'));var e=this.getMainSuggestListRender();e.parents("body").length?this.$profileVideoListLines.insertAfter(e):this.$PageContainer.prepend(this.$profileVideoListLines)},addProfileVideoListLine:function(e,t){if(e){this.getMainSuggestList(t).getSuggest(e)&&(this.removeProfileVideoListLine(e),this.initProfileVideoListLineContainer(),this.createVideosListLine(e,t),this.toggleSubbedProfilesVideoListLines(this.iFilterSort!==B.sort.aValues.sub_date.iVal))}},createVideosListLine:function(e,n,s,o){var a=$(i.render(this.oTemplates.profile_video_list_line,{sTitle:l.__("profile.just_subscribed_to",{"%profile%":'<a href="#" class="profile-title-name"></a>'})}));this.aProfilesVideoListLineAdded.push({iUserId:e,sSuggestListName:n,iTimestamp:Date.now(),$list:a});var d=this;$.get("/feed/"+n+"/"+e+"/videos-full/0",function(u){if(o&&!u.isSubscribed)return void d.removeProfileVideoListLine(e);var c=d.oFunctions.fnMakePremiumPageUrl(u.url),f=u.displayName,h=a.find(".profile-title-name");if(h.attr("href",c),h.html(f),"channels"===n){var _=d.oFunctions.fnGetChannelPicto();_&&_.length&&_.insertBefore(h)}else if("models"===n){var g=d.oFunctions.fnGetModelPicto();g&&g.length&&g.insertBefore(h)}var m=a.find(".mozaique");new p({oOptions:{$Container:m,sMode:p.S_MODE_HORIZONTAL,bCanMouseGrabToScroll:!0}});for(var b in u.videos){var v=$(r.get_thumb_block_html(u.videos[b],"video").html);m.append(v)}if(u.nb_remaining){var y={sUrl:c,sDisplayName:f,sMore:l.__(1===u.nb_remaining?"video.plus_one_more":"video.plus_nb_more",{"%count%":u.nb_remaining.toLocaleString(t.dyn.locale)})};u.count.premium&&(y.sNbPremium=l.__("listing.count_premium_videos",{"%count%":u.count.premium.toLocaleString(t.dyn.locale)})),u.count.free&&(y.sNbFree=l.__("listing.count_free_videos",{"%count%":u.count.free.toLocaleString(t.dyn.locale)}));var D=$(i.render(d.oTemplates.profile_video_list_line_more,y));m.append(D)}if(d.$profileVideoListLines.prepend(a),"number"==typeof d.oOptions.iMaxSubbedProfileVideoListLines)for(;d.aProfilesVideoListLineAdded.length>d.oOptions.iMaxSubbedProfileVideoListLines;)d.removeProfileVideoListLine(d.aProfilesVideoListLineAdded[0].iUserId,!0);s||d.updateProfileVideoListLineStorage(),require(["skins/"+t.sitename+"/mozaique/thumb_block_common_init"],function(e){e.init_listing(m)})},"json")},removeProfileVideoListLine:function(e,t){for(var i in this.aProfilesVideoListLineAdded){var n=this.aProfilesVideoListLineAdded[i];if(n.iUserId===e){n.$list&&n.$list.length&&n.$list.remove(),this.aProfilesVideoListLineAdded.splice(i,1);break}}t||this.updateProfileVideoListLineStorage()},toggleSubbedProfilesVideoListLines:function(e){this.$profileVideoListLines&&this.$profileVideoListLines.length&&this.$profileVideoListLines.toggle(e)},updateProfileVideoListLineStorage:function(){var e=[];for(var t in this.aProfilesVideoListLineAdded){var i=this.aProfilesVideoListLineAdded[t];"undefined"!=typeof H[i.sSuggestListName]&&e.push([i.iUserId,H[i.sSuggestListName],i.iTimestamp])}e.length?a.set("subbed_vids_lines",JSON.stringify(e),"premium_feed"):a.remove("subbed_vids_lines","premium_feed")},restoreProfileVideoListLineStorage:function(){var e=a.get("subbed_vids_lines","premium_feed");if(!e)return void a.remove("subbed_vids_lines","premium_feed");var t=JSON.parse(e);if(!t||!t.length)return void a.remove("subbed_vids_lines","premium_feed");this.initProfileVideoListLineContainer();var i=!1;for(var n in t){var s,o,r,l=t[n];if(3===l.length){s=parseInt(l[0]),r=parseInt(l[2]);var d=parseInt(l[1]);for(var u in H)if(H[u]===d){o=u;break}if("undefined"==typeof H[o])continue}else 2===l.length&&(s=parseInt(l[0]),o="channel",r=parseInt(l[1]));!r||(Date.now()-r)/1e3/60>480?i=!0:this.createVideosListLine(s,o,!0,!0)}i&&this.updateProfileVideoListLineStorage(),this.toggleSubbedProfilesVideoListLines(this.iFilterSort!==B.sort.aValues.sub_date.iVal)},getFiltersHTML:function(){var e=[],t=[];for(var n in B.sort.aValues){var s=B.sort.aValues[n];t.push({name:l.__(this.oTranslations[s.sNameTradKey]),value:s.iVal+"",href:s.sHref,active:this.iFilterSort===s.iVal})}e.push({filter:B.sort.sKey,list:t});var o=[];for(var a in B.view_mode.aValues){var r=B.view_mode.aValues[a];o.push({name:(r.sIcon?'<span class="icon-f icf-'+r.sIcon+'"></span> ':"")+l.__(this.oTranslations[r.sNameTradKey]),value:r.iVal+"",href:r.sHref,active:this.iFilterViewMode===r.iVal})}e.push({filter:B.view_mode.sKey,list:o});var d=this.explodeSourcesFilterValue(this.iFilterSources),u=[];for(var c in B.sources.aValues){var f=B.sources.aValues[c];-1!==this.aSourcesFilters.indexOf(f.sKey)&&u.push({name:this.getFilterToggleHTML(!!d[f.sKey])+l.__(this.oTranslations[f.sNameTradKey]),value:f.iVal+"",href:f.sHref})}u.length>1&&e.push({filter:B.sources.sKey,forced_label:this.getSourcesFilterLabelText(),list:u});var h=this.explodeShowFreeFilterValue(this.iFilterShowFree),p=[];for(var _ in B.show_free.aValues){var g=B.show_free.aValues[_];-1!==this.aShowFreeAvailableFilters.indexOf(g.sKey)&&p.push({name:this.getFilterToggleHTML(!!h[g.sKey])+l.__(this.oTranslations[g.sNameTradKey]),value:g.iVal+"",href:g.sHref})}e.push({filter:B.show_free.sKey,forced_label:this.getShowFreeFilterLabelText(),list:p});var m=[];for(var b in B.min_length.aValues){var v=B.min_length.aValues[b];m.push({name:this[v.sNameFunc](),filter:v.sKey,value:"",href:v.sHref,"class":v.sClass,active:this[v.sFilterVar]>0})}e.push({filter:B.min_length.sKey,list:m,forced_label:this.getMinLengthFilterLabelText()});var y=[];for(var D in B.quality.aValues){var C=B.quality.aValues[D];y.push({name:(C.sIcon?'<span class="icon-f icf-'+C.sIcon+'"></span> ':"")+(C.sNameTradKey?l.__(this.oTranslations[C.sNameTradKey]):C.sName),value:C.sKey,href:C.sHref,active:this.sFilterQuality===C.sKey})}e.push({filter:B.quality.sKey,list:y});var w=[B.categories.sKey,B.free_search.sKey,B.reset_library.sKey,B.reset_memberships.sKey,B.reset.sKey];for(var S in w){var k=B[w[S]];k.bIsReset?e.push({filter:k.sKey,forced_label:(k.sIcon?'<span class="icon-f icf-'+k.sIcon+'"></span> ':"")+l.__(this.oTranslations[k.sNameTradKey]),is_reset:!0}):e.push({filter:k.sKey,forced_label:this[k.sNameFunc]()})}return i.render(this.oTemplates.simple_dropdown,{filters:e})},getFilterToggleHTML:function(e){return'<span class="checkbox toggle no-label w-28"><input type="checkbox"'+(e?' checked="checked"':"")+"><label></label></span> "},initVideoFilters:function(){this.$Filters=this.$PageContainer.find(".simple-dropdown .show-niv2 .label"),this.$FiltersLinks=this.$PageContainer.find(".simple-dropdown a");var e=this;this.$FiltersLinks.on("click",function(t){t.preventDefault(),e.filterLinkClick($(this))}),this.oSimpleDropdown.init(this.$PageContainer);var i=this.getFilterSelectLabel(B.categories.sKey),n=i.parents(".show-niv2");t.data[B.categories.sKey]&&t.data[B.categories.sKey].length>0?n.on("click",function(){e.openCategoriesFilterSelectNiv1()}).addClass("init-ok"):n.remove(),this.getFilterSelectLabel(B.free_search.sKey).parents(".show-niv2").on("click",function(){e.openFreeSearchFilter()}).addClass("init-ok");var s=this.getFilterSelectLabel(B.reset_library.sKey);this.$ResetLibraryFilters=s.parents(".niv1"),this.showHideResetLibraryBtn(),s.parents(".show-niv2").on("click",function(){e.sFilterType=U.NORMAL,e.loadSaveFilters()}).addClass("init-ok");var o=this.getFilterSelectLabel(B.reset_memberships.sKey);this.$ResetMembershipFilters=o.parents(".niv1"),this.showHideResetMembershipBtn(),o.parents(".show-niv2").on("click",function(){e.sFilterType=U.NORMAL,e.loadSaveFilters()}).addClass("init-ok");var a=this.getFilterSelectLabel(B.reset.sKey);this.$ResetFilters=a.parents(".niv1"),this.showHideResetBtn(),a.parents(".show-niv2").on("click",function(){e.sFilterType=U.NORMAL,e.resetFilters()}).addClass("init-ok");var r=this.explodeShowFreeFilterValue(this.iFilterShowFree);!r[B.show_free.aValues.ppv.sKey]||r[B.show_free.aValues.membership.sKey]||r[B.show_free.aValues.premium.sKey]||r[B.show_free.aValues.free.sKey]||this.toggleLibraryFilterBtn(!0)},resetFilters:function(){this.canResetFilters()&&(e.debug_("%c\t\t oPremiumFeedPage --- resetFilters","color:orange;"),this.updateFilterSelect(B.view_mode.sKey,B.view_mode.aValues.see_all.iVal),this.updateFilterSelect(B.show_free.sKey,this.iDefaultFilterShowFree),this.updateFilterSelect(B.min_length.aValues.premium_min_length.sKey,0),this.updateFilterSelect(B.min_length.aValues.free_min_length.sKey,0),this.updateFilterSelect(B.sources.sKey,this.iDefaultFilterSources),this.updateFilterSelect(B.quality.sKey,B.quality.aValues["360P"].sKey),this.updateFilterSelect(B.free_search.sKey,!1),this.oFilterCategories.cats=[],this.oFilterCategories.excats=[],this.updateCategoriesFilter(),this.showHideResetLibraryBtn(),this.showHideResetMembershipBtn(),this.saveFiltersState(),this.loadVideos())},canResetFilters:function(){return this.iFilterViewMode!==B.view_mode.aValues.see_all.iVal||this.iFilterShowFree!==this.iDefaultFilterShowFree||this.iFilterSources!==this.iDefaultFilterSources||0!==this.iFilterMinLengthPremium||0!==this.iFilterMinLengthFree||this.sFilterQuality!==B.quality.aValues["360P"].sKey||this.oFilterCategories.cats.length>0||this.oFilterCategories.excats.length>0||!1!==this.sFilterFreeSearch},showHideResetBtn:function(){this.canResetFilters()?this.$ResetFilters.show():this.$ResetFilters.hide()},isViewModeAvailable:function(){return b.isTracking()},getFilterSelectLabel:function(e){return"undefined"==typeof this.oFiltersLabels["f-"+e]&&(this.oFiltersLabels["f-"+e]=this.$Filters.filter("[data-filter="+e+"]")),this.oFiltersLabels["f-"+e]},filterLinkClick:function(e){var t=e.data("filter"),i=e.data("value");if(t===B.min_length.aValues.free_min_length.sKey||t===B.min_length.aValues.premium_min_length.sKey)return this.oSimpleDropdown.close_all(),void this.openMinLengthFilterSelect(t);if(t!==B.view_mode.sKey||this.isViewModeAvailable())return this.iFilterSortRandomize=this.iFilterSort===B.sort.aValues.random.iVal&&t===B.sort.sKey&&i===B.sort.aValues.random.iVal,this.oSimpleDropdown.close_all(),this.updateFilterSelect(t,i,!0),void this.loadVideos();var n=this;f.confirm(l.__("premium_feed.filter_based_on_history_enabling"),function(){b.startTracking(function(){n.iFilterSortRandomize=n.iFilterSort===B.sort.aValues.random.iVal&&t===B.sort.sKey&&i===B.sort.aValues.random.iVal,n.updateFilterSelect(t,i),n.loadVideos()})})},updateFilterSelect:function(e,t,i){var n,o=!1,a=B[e];if(a&&a.bIsSimpleToggle){this[a.sSimpleToggleVar]!==t&&(this[a.sSimpleToggleVar]=t,o=!0),this.$FiltersLinks.filter(".current[data-filter="+e+"]").removeClass("current");var r=this.$FiltersLinks.filter("[data-filter="+e+"][data-value="+t+"]");if(r.addClass("current"),n=r.html(),e===B.sort.sKey){var d=B.sort.aValues.random;t===d.iVal?(r.text(s.unescape(l.__(this.oTranslations[d.sSelectedNameTradKey]))),n=s.unescape(l.__(this.oTranslations[d.sNameTradKey]))):this.$FiltersLinks.filter("[data-filter="+e+'][data-value="'+d.iVal+'"]').text(s.unescape(l.__(this.oTranslations[d.sNameTradKey])))}this.updateFilterSelectLabel(e,n)}else switch(e){case B.min_length.aValues.premium_min_length.sKey:this.iFilterMinLengthPremium!==t&&(this.iFilterMinLengthPremium=t,o=this.isShowFreeFilterActive(B.show_free.aValues.premium.sKey)||this.isShowFreeFilterActive(B.show_free.aValues.membership.sKey)||this.isShowFreeFilterActive(B.show_free.aValues.ppv.sKey)),this.$FiltersLinks.filter("[data-filter="+B.min_length.aValues.premium_min_length.sKey+"]").toggleClass("current",o&&this.iFilterMinLengthPremium>1).html(this.getMinLengthPremiumFilterLabelText()),this.updateFilterSelectLabel(B.min_length.sKey,this.getMinLengthFilterLabelText());break;case B.min_length.aValues.free_min_length.sKey:this.iFilterMinLengthFree!==t&&(this.iFilterMinLengthFree=t,o=this.isShowFreeFilterActive(B.show_free.aValues.free.sKey)),this.$FiltersLinks.filter("[data-filter="+B.min_length.aValues.free_min_length.sKey+"]").toggleClass("current",this.isShowFreeFilterActive(B.show_free.aValues.free.sKey)&&this.iFilterMinLengthFree>1).html(this.getMinLengthFreeFilterLabelText()),this.updateFilterSelectLabel(B.min_length.sKey,this.getMinLengthFilterLabelText());break;case B.show_free.sKey:if(this.isLibraryFilterBtnActive())return this.toggleLibraryFilterBtn(!1),this.sFilterType=U.NORMAL,this.showHideResetLibraryBtn(),this.loadSaveFilters(t),o=!0;var u=i?this.toggleShowFreeFilter(t,this.iFilterShowFree):this.explodeShowFreeFilterValue(t),c=this.implodeShowFreeFilterValue(u);this.iFilterShowFree!==c&&(this.iFilterShowFree=c,o=!0),this.$FiltersLinks.filter('[data-filter="'+B.show_free.sKey+'"][data-value="'+B.show_free.aValues.ppv.iVal+'"]').find("input").prop("checked",u[B.show_free.aValues.ppv.sKey]),this.$FiltersLinks.filter('[data-filter="'+B.show_free.sKey+'"][data-value="'+B.show_free.aValues.membership.iVal+'"]').find("input").prop("checked",u[B.show_free.aValues.membership.sKey]),this.$FiltersLinks.filter('[data-filter="'+B.show_free.sKey+'"][data-value="'+B.show_free.aValues.premium.iVal+'"]').find("input").prop("checked",u[B.show_free.aValues.premium.sKey]),this.$FiltersLinks.filter('[data-filter="'+B.show_free.sKey+'"][data-value="'+B.show_free.aValues.free.iVal+'"]').find("input").prop("checked",u[B.show_free.aValues.free.sKey]),this.updateFilterSelectLabel(B.min_length.sKey,this.getMinLengthFilterLabelText()),n=this.getShowFreeFilterLabelText(),n.length&&this.updateFilterSelectLabel(B.show_free.sKey,n),this.sFilterType===U.LIBRARY&&(!u[B.show_free.aValues.ppv.sKey]||u[B.show_free.aValues.membership.sKey]||u[B.show_free.aValues.premium.sKey]||u[B.show_free.aValues.free.sKey]||this.hasMembershipFilterDropdownActive()||(this.toggleLibraryFilterBtn(!0),this.sFilterType=U.LIBRARY));break;case B.sources.sKey:var f=i?this.toggleSourcesFilter(t,this.iFilterSources):this.explodeSourcesFilterValue(t),h=this.implodeSourcesFilterValue(f);this.iFilterSources!==h&&(this.iFilterSources=h,o=!0),this.$FiltersLinks.filter('[data-filter="'+B.sources.sKey+'"][data-value="'+B.sources.aValues.models.iVal+'"]').find("input").prop("checked",f[B.sources.aValues.models.sKey]),this.$FiltersLinks.filter('[data-filter="'+B.sources.sKey+'"][data-value="'+B.sources.aValues.channels.iVal+'"]').find("input").prop("checked",f[B.sources.aValues.channels.sKey]),this.updateFilterSelectLabel(B.sources.sKey,this.getSourcesFilterLabelText());break;case B.free_search.sKey:"string"==typeof t&&0!==t.length||(t=!1),this.sFilterFreeSearch!==t&&(this.sFilterFreeSearch=t,o=!0),this.updateFilterSelectLabel(B.free_search.sKey,this.getFreeSearchFilterLabelText());break;default:return!1}return o&&this.saveFiltersState(),this.showHideResetBtn(),o},updateFilterSelectLabel:function(e,t){this.getFilterSelectLabel(e).html(t)},initMembershipsFilterBtn:function(){var e=$(".premium_feed .filter-membership"),i=this.getFilterSelectLabel(B.reset_memberships.sKey),n=this;this.initMembershipsFilterScrollbar(),this.appendMembershipsBtn(),e.on("click",function(){var e=parseInt($(this).data("id")),s=$('.membership-button[data-id="'+e+'"] .membership-dropdown');s.hasClass("active")?(n.toggleMembershipFilterBtn(!1),s.removeClass("active"),n.sFilterType=U.NORMAL,n.showHideResetMembershipBtn(),n.loadSaveFilters()):(n.isLibraryFilterBtnActive()&&(n.toggleLibraryFilterBtn(!1),n.showHideResetLibraryBtn()),n.hasMembershipFilterDropdownActive()&&(n.disableAnyMembershipFilterDropdown(),n.toggleMembershipFilterBtn(!1),n.showHideResetMembershipBtn()),n.aChannelsId.push(e),n.toggleMembershipFilterBtn(!0),n.enableMembershipFilterDropdown(s),n.sFilterType=U.MEMBERSHIP,n.resetFilters(),n.loadVideos(),n.$ResetMembershipFilters=i.parents(".niv1"),n.showHideResetBtn(),n.showHideResetMembershipBtn(),i.parents(".show-niv2").on("click",function(){n.toggleMembershipFilterBtn(!1),s.removeClass("active"),n.sFilterType=U.NORMAL,n.loadSaveFilters(),n.showHideResetMembershipBtn()}).addClass("init-ok")),n.updateSuggestLists(),"undefined"!=typeof t.popup.oSimpleDropdown&&"undefined"!=typeof t.popup.oSimpleDropdown.pageInit&&t.popup.oSimpleDropdown.pageInit.close_all()})},isMembershipFilterBtnCurrent:function(){return this.bIsMembershipFilterBtnCurrent},toggleMembershipFilterBtn:function(e){if("boolean"!=typeof e)e=!this.bIsMembershipFilterBtnCurrent;else if(e===this.bIsMembershipFilterBtnCurrent)return;this.bIsMembershipFilterBtnCurrent=e,$(".premium_feed .filter-membership").toggleClass("current",this.bIsMembershipFilterBtnCurrent)},hasMembershipFilterDropdownActive:function(){return this.bHasMembershipFilterDropdownActive},disableAnyMembershipFilterDropdown:function(){this.bHasMembershipFilterDropdownActive=!1,$(".premium_feed .membership-dropdown").removeClass("active")},enableMembershipFilterDropdown:function(e){this.bHasMembershipFilterDropdownActive=!0,e.addClass("active")},showHideResetMembershipBtn:function(){this.isMembershipFilterBtnCurrent()?this.$ResetMembershipFilters.show():(this.aChannelsId=[],this.$ResetMembershipFilters.hide())},initMembershipsFilterScrollbar:function(){var e=this;this.$selectionContent=this.$PremiumSwitchPageRow,this.$PremiumSwitchPageRow.find(".memberships").length>0&&new p({oOptions:{$Container:e.$selectionContent,sMode:p.S_MODE_HORIZONTAL,bCanMouseGrabToScroll:!0,iAutoHideDelayMs:100,iBarMarginPx:0}})},appendMembershipsBtn:function(){var e,t=$("#memberships-container"),i=$(".primary-premium-buttons"),n=this.$PremiumSwitchPageRow.find(".membership-button"),s=0,o=0,a=0,r=0,l=0,d=0,u=n.length>0,c=!1,f=this;this.$ExpandMembershipBtn.length||(f.$ExpandMembershipBtn=$("#expand-memberships"),f.$ExpandMembershipBtn.on("click",function(){f.expandMembershipsContainer()})),u?(this.$PremiumSwitchPageRow.removeClass("without-memberships"),d=this.$PremiumSwitchPageRow.outerWidth(!0),l=this.fnGetPrimaryBtnsWidth(),this.$ExpandMembershipBtn.length&&(r=parseFloat(this.$ExpandMembershipBtn.outerWidth(!0).toFixed(2))),n.each(function(){var n=$(this);n.show(),s=parseFloat(n.outerWidth(!0).toFixed(2)),n.hide(),window.innerWidth<768||document.documentElement.clientWidth<768||document.body.clientWidth<768?(t.length||(t=$('<div id="memberships-container"></div>'),f.$PremiumSwitchPageRow.append(t)),f.bIsMembershipsExpand?(t.append(n),t.append(f.$ExpandMembershipBtn),n.show()):s+o+l<=d?(o=s+o,i.append(n),n.show()):s+a<=d?(a+=s,n.show(),t.append(n),e=n,f.$ExpandMembershipBtn.hide(),c=!1):(c||(e&&e.length&&e.hide(),t.append(f.$ExpandMembershipBtn),f.$ExpandMembershipBtn.show(),c=!0),n.hide(),t.append(n))):(f.$PremiumSwitchPageRow.append(n),f.$PremiumSwitchPageRow.append(f.$ExpandMembershipBtn),f.bIsMembershipsExpand?n.show():o+s+r+l<=d?(o=s+o,n.show(),f.$ExpandMembershipBtn.hide()):(n.hide(),f.$ExpandMembershipBtn.show()))}),t.length&&0===t.children().length&&t.remove()):(this.$PremiumSwitchPageRow.addClass("without-memberships"),f.$ExpandMembershipBtn.hide())},fnGetPrimaryBtnsWidth:function(){var e=$(".primary-premium-buttons"),t=0;return e.children().each(function(){$(this).hasClass("membership-button")||(t+=parseFloat($(this).outerWidth(!0).toFixed(2)))}),t},expandMembershipsContainer:function(){var e=this.$ExpandMembershipBtn.children(".expand-memberships-label"),t=this.$ExpandMembershipBtn.children(".icon-f");this.bIsMembershipsExpand?(this.bIsMembershipsExpand=!1,e.html(l.__(this.bIsMembershipsExpand?this.oTranslations.collapse_membership:this.oTranslations.expand_membership)),t.removeClass("icf-angle-up"),t.addClass("icf-angle-down"),this.$PremiumSwitchPageRow.removeClass("is-expand")):(this.bIsMembershipsExpand=!0,e.html(l.__(this.bIsMembershipsExpand?this.oTranslations.collapse_membership:this.oTranslations.expand_membership)),t.removeClass("icf-angle-down"),t.addClass("icf-angle-up"),this.$PremiumSwitchPageRow.addClass("is-expand")),this.appendMembershipsBtn(),this.updateSuggestLists()},initUnsubMembershipBtn:function(){$(".unsubscribe-membership").on("click",function(){var e=parseInt($(this).data("id"));if(e){var i=l.__(t.data.memberships[e].subscription_cancel_stop_date?"premium_feed.confirm_cancel_terminated_at_month_end":"premium_feed.confirm_cancel_immediately_terminated",t.data.memberships[e].subscription_cancel_stop_date?{"%date%":t.data.memberships[e].subscription_cancel_stop_date,"%nb_days%":t.data.memberships[e].subscription_cancel_stop_days}:null);f.confirm(i,function(){var i=f.loading(l.__("misc.cancel_in_progress")),n=$("#cancel-reason").val(),s={csrf:t.data.memberships[e].subscription_cancel_csrf};"string"==typeof n&&n.length>3&&(s.reason=n),$.ajax({type:"POST",dataType:"json",url:"/account/premium/channel-memberships/cancel-subscription/"+e,data:s,success:function(e){i.close(),e.result?(f.alert(e.message),setTimeout(function(){window.location.reload()},"1000")):f.alert(e.message?e.message:l.__("misc.error_please_retry"),null,!0)},error:function(){i.close(),f.alert(l.__("misc.error_please_retry"),null,!0)}})},null,!0,{text_ok:l.__("premium.cancel_subscription")})}})},isLibraryFilterBtnActive:function(){return this.bIsLibraryFilterBtnActive},toggleLibraryFilterBtn:function(e){if("boolean"!=typeof e)e=!this.isLibraryFilterBtnActive();else if(e===this.isLibraryFilterBtnActive())return;this.bIsLibraryFilterBtnActive=e,$("#library-button").toggleClass("active",this.isLibraryFilterBtnActive())},initLibraryFilterBtn:function(){var e=$("#library-button"),t=this;e.length&&e.on("click",function(e){e.preventDefault(),t.isLibraryFilterBtnActive()?(t.sFilterType=U.NORMAL,t.loadSaveFilters(),t.showHideResetLibraryBtn()):t.setLibraryFilter()})},setLibraryFilter:function(){var e=this.getFilterSelectLabel(B.reset_library.sKey),t=this;this.isMembershipFilterBtnCurrent()&&(this.toggleMembershipFilterBtn(!1),this.disableAnyMembershipFilterDropdown(),this.showHideResetMembershipBtn()),this.saveFiltersState(),this.sFilterType=U.LIBRARY,this.resetFilters(),this.updateFilterSelect(B.show_free.sKey,8),this.toggleLibraryFilterBtn(!0),this.loadVideos(),this.$ResetLibraryFilters=e.parents(".niv1"),this.showHideResetLibraryBtn(),this.showHideResetBtn(),e.parents(".show-niv2").on("click",function(){t.sFilterType=U.NORMAL,t.loadSaveFilters(),t.showHideResetLibraryBtn()}).addClass("init-ok")},showHideResetLibraryBtn:function(){this.isLibraryFilterBtnActive()?this.$ResetLibraryFilters.show():this.$ResetLibraryFilters.hide()},firstIndexedDbSetup:function(){if(this.oOptions.use_indexed_db){if(!xv.indexedDb||!xv.indexedDb.getDbIsSupported())return void(this.oOptions.use_indexed_db=!1);var e={store_name:this.oOptions.indexed_db_key};this.bIndexedDbInit||xv.indexedDb.getStoreExist(e)||(this.bIndexedDbInit=!0,e.store_index=[{index:"data",unique:!0,multiEntry:!0}],xv.indexedDb.storeCreate(e))}},saveToDb:function(t,i){e.debug_("%c oPremiumFeedPage --- saveToDb","color:yellow;",{key:t,value:i});var n=this;if(this.oOptions.use_indexed_db)try{if(!this.bDbCreated)return e.debug("Delaying saving "+t+" to idb while store is creating."),this.bDbCreated=xv.indexedDb.getStoreExist({store_name:this.oOptions.indexed_db_key}),void setTimeout(function(){n.saveToDb(t,i)},20);if(!this.bDbInit)return;return i.data=t,xv.indexedDb.remove(t,this.oOptions.indexed_db_key),xv.indexedDb.set(i,this.oOptions.indexed_db_key),e.debug("DATA SAVED TO DATABASE !"),void(this.bIsSavingFilters=!1)}catch(s){return console.error(s),this.oOptions.use_indexed_db=!1,this.bIsSavingFilters=!1,-1}else this.bIsSavingFilters=!1,e.debug("DATABASE NOT FOUND !")},loadSaveFilters:function(e){var t=this;this.bDbInit=!1,xv.indexedDb.get("Filters",t.oOptions.indexed_db_key,!0,!0).then(function(i){if(i){if("object"==typeof i&&i.target&&i.target.result){var n=i.target.result;if(t.toggleLibraryFilterBtn(!1),t.toggleMembershipFilterBtn(!1),t.disableAnyMembershipFilterDropdown(),t.showHideResetMembershipBtn(),t.resetFilters(),t.sFilterType=U.MEMBERSHIP,n.forEach(function(e){"add_cat"===e[0]?t.oFilterCategories.cats.push(e[1]):"exclude_cat"===e[0]?t.oFilterCategories.excats.push(e[1]):t.updateFilterSelect(e[0],e[1])}),e){var s=t.explodeShowFreeFilterValue(t.iFilterShowFree);s[B.show_free.aValues.ppv.sKey]&&e===B.show_free.aValues.ppv.iVal||s[B.show_free.aValues.membership.sKey]&&e===B.show_free.aValues.membership.iVal||s[B.show_free.aValues.premium.sKey]&&e===B.show_free.aValues.premium.iVal||s[B.show_free.aValues.free.sKey]&&e===B.show_free.aValues.free.iVal||t.updateFilterSelect(B.show_free.sKey,e)}t.sFilterType=U.NORMAL}else t.resetFilters();t.loadVideos();var o=t.getFilterSelectLabel(B.categories.sKey),a=t.getCategoriesFilterLabelText();o.html(a)}t.bDbInit=!0})["catch"](function(){t.bDbInit=!0})},saveFiltersState:function(){if(this.sFilterType===U.NORMAL&&!1===this.bIsSavingFilters){var e=[];this.oFilterCategories.cats.forEach(function(t){e.push(["add_cat",t])}),this.oFilterCategories.excats.forEach(function(t){e.push(["exclude_cat",t])}),e.push([B.show_free.sKey,this.iFilterShowFree]),e.push([B.free_search.sKey,this.sFilterFreeSearch]),e.push([B.view_mode.sKey,this.iFilterViewMode]),e.push([B.min_length.aValues.premium_min_length.sKey,this.iFilterMinLengthPremium]),e.push([B.min_length.aValues.free_min_length.sKey,this.iFilterMinLengthFree]),e.push([B.sources.sKey,this.iFilterSources]),e.push([B.quality.sKey,this.sFilterQuality]),this.saveToDb("Filters",e)}},openMinLengthFilterSelect:function(e){var t=this;oPopup=d.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-min-length-filter-pop");var n=e===B.min_length.aValues.premium_min_length.sKey?this.iFilterMinLengthPremium:this.iFilterMinLengthFree,s=n>0&&n<=30?n:0,o=e===B.min_length.aValues.premium_min_length.sKey?B.min_length.aValues.premium_min_length.sTitleTradKey:B.min_length.aValues.free_min_length.sTitleTradKey,a=$(i.render(this.oTemplates.min_length_filter,{title:l.__(this.oTranslations[o],{"%site%":this.oTexts.premium_name}),min:0,max:30,min_label:0,max_label:l.__(this.oTranslations.duration_minutes_min,{"%count%":"30"}),value:s,ok:0===s?l.__(this.oTranslations.see_all):l.__(this.oTranslations.duration_minutes_min,{"%count%":s.toString()}),cancel:l.__(this.oTranslations.cancel)})),r=a.find("input"),u=a.find(".ok"),c=a.find(".cancel");r.on("input change",function(){var e=parseInt(this.value);u.text(0===e?l.__(t.oTranslations.see_all):l.__(t.oTranslations.duration_minutes_min,{"%count%":e.toString()}))}),u.on("click",function(i){i.preventDefault(),t.updateFilterSelect(e,parseInt(r.prop("value")))&&t.loadVideos(),oPopup.close()}),c.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent(a),oPopup.show("auto")},getMinLengthFilterLabelText:function(){return'<span class="icon-f icf-clock'+(this.iFilterMinLengthPremium>0&&(this.isShowFreeFilterActive(B.show_free.aValues.premium.sKey)||this.isShowFreeFilterActive(B.show_free.aValues.membership.sKey)||this.isShowFreeFilterActive(B.show_free.aValues.ppv.sKey))||this.iFilterMinLengthFree>0&&this.isShowFreeFilterActive(B.show_free.aValues.free.sKey)?" has-duration-limit":"")+'"></span> '+l.__(this.oTranslations.minimum_duration)},getMinLengthPremiumFilterLabelText:function(){return this.oTexts.premium_name+" : "+(this.iFilterMinLengthPremium>0?l.__(this.oTranslations.nb_mins_long,{"%nb%":"<strong>"+this.iFilterMinLengthPremium.toLocaleString(t.dyn.locale)+"</strong>"}):l.__(this.oTranslations.all))},getMinLengthFreeFilterLabelText:function(){return l.__(this.oTranslations.free)+" : "+(this.iFilterMinLengthFree>0?l.__(this.oTranslations.nb_mins_long,{"%nb%":"<strong>"+this.iFilterMinLengthFree.toLocaleString(t.dyn.locale)+"</strong>"}):l.__(this.oTranslations.all))},explodeSourcesFilterValue:function(e){var t=!1,i=!1,n={};return e>=B.sources.aValues.models.iVal&&(i=!0,e-=B.sources.aValues.models.iVal),e>=B.sources.aValues.channels.iVal&&(t=!0),-1!==this.aSourcesFilters.indexOf(B.sources.aValues.models.sKey)&&(n[B.sources.aValues.models.sKey]=i),-1!==this.aSourcesFilters.indexOf(B.sources.aValues.channels.sKey)&&(n[B.sources.aValues.channels.sKey]=t),n},implodeSourcesFilterValue:function(e){var t=0;return e[B.sources.aValues.models.sKey]&&(t+=B.sources.aValues.models.iVal),e[B.sources.aValues.channels.sKey]&&(t+=B.sources.aValues.channels.iVal),t},toggleSourcesFilter:function(e,t){var i=this.explodeSourcesFilterValue(t);if(e===B.sources.aValues.models.iVal)i[B.sources.aValues.models.sKey]=!i[B.sources.aValues.models.sKey],i[B.sources.aValues.models.sKey]||(!1===this.hasAddedInSource(B.sources.aValues.channels)?(this.alertIfNoAddedInSource(B.sources.aValues.channels),i[B.sources.aValues.models.sKey]=!0):i[B.sources.aValues.channels.sKey]=!0);else if(e===B.sources.aValues.channels.iVal)i[B.sources.aValues.channels.sKey]=!i[B.sources.aValues.channels.sKey],i[B.sources.aValues.channels.sKey]||(!1===this.hasAddedInSource(B.sources.aValues.models)?(this.alertIfNoAddedInSource(B.sources.aValues.models),i[B.sources.aValues.channels.sKey]=!0):i[B.sources.aValues.models.sKey]=!0);else{if(0===e)for(var n in B.sources.aValues)e+=B.sources.aValues[n].iVal;i=this.explodeSourcesFilterValue(e)}return i},hasAddedInSource:function(e){return this.isMainSuggestListLoaded(e.sSuggestListKey)?!!this.countMainSuggestListAdded(e.sSuggestListKey):"undefined"!=typeof t.data[e.sConfHasSubs]?t.data[e.sConfHasSubs]:null},alertIfNoAddedInSource:function(e){this.updateSuggestListsVisibility(!0),f.alert('<div class="premium-feed-source-filter-pop">'+l.__(this.oTranslations[e.sSubscribeAlertTradKey],{"%strong%":"<span class='strong'><span class='icon-f icf-"+e.sIcon+"'></span> ","%strong_end%":"</span>"})+"</div>")},getSourcesFilterLabelText:function(){var e=this.explodeSourcesFilterValue(this.iFilterSources),t=[],i=l.__(this.oTranslations.not_selected);for(var n in e)if(!0===e[n])switch(n){case B.sources.aValues.models.sKey:t.push(l.__(this.oTranslations[B.sources.aValues.models.sNameTradKey])),i=l.__(this.oTranslations[B.sources.aValues.models.sNameTradKey]);break;case B.sources.aValues.channels.sKey:t.push(l.__(this.oTranslations[B.sources.aValues.channels.sNameTradKey])),i=l.__(this.oTranslations[B.sources.aValues.channels.sNameTradKey])}return this.aSourcesFilters.length===t.length?l.__(this.oTranslations[B.sources.aValues.models.sNameTradKey])+" + "+l.__(this.oTranslations[B.sources.aValues.channels.sNameTradKey]):i},explodeShowFreeFilterValue:function(e){var t=!1,i=!1,n=!1,s=!1,o={};return e>=B.show_free.aValues.ppv.iVal&&(t=!0,e-=B.show_free.aValues.ppv.iVal),e>=B.show_free.aValues.membership.iVal&&(i=!0,e-=B.show_free.aValues.membership.iVal),e>=B.show_free.aValues.premium.iVal&&(n=!0,e-=B.show_free.aValues.premium.iVal),e>=B.show_free.aValues.free.iVal&&(s=!0),-1!==this.aShowFreeAvailableFilters.indexOf(B.show_free.aValues.ppv.sKey)&&(o[B.show_free.aValues.ppv.sKey]=t),-1!==this.aShowFreeAvailableFilters.indexOf(B.show_free.aValues.membership.sKey)&&(o[B.show_free.aValues.membership.sKey]=i),
-1!==this.aShowFreeAvailableFilters.indexOf(B.show_free.aValues.premium.sKey)&&(o[B.show_free.aValues.premium.sKey]=n),-1!==this.aShowFreeAvailableFilters.indexOf(B.show_free.aValues.free.sKey)&&(o[B.show_free.aValues.free.sKey]=s),o},implodeShowFreeFilterValue:function(e){var t=0;return e[B.show_free.aValues.ppv.sKey]&&(t+=B.show_free.aValues.ppv.iVal),e[B.show_free.aValues.membership.sKey]&&(t+=B.show_free.aValues.membership.iVal),e[B.show_free.aValues.premium.sKey]&&(t+=B.show_free.aValues.premium.iVal),e[B.show_free.aValues.free.sKey]&&(t+=B.show_free.aValues.free.iVal),t},toggleShowFreeFilter:function(e,t){var i=this.explodeShowFreeFilterValue(t);if(e===B.show_free.aValues.ppv.iVal)i[B.show_free.aValues.ppv.sKey]=!i[B.show_free.aValues.ppv.sKey];else if(e===B.show_free.aValues.membership.iVal)i[B.show_free.aValues.membership.sKey]=!i[B.show_free.aValues.membership.sKey];else if(e===B.show_free.aValues.premium.iVal)i[B.show_free.aValues.premium.sKey]=!i[B.show_free.aValues.premium.sKey];else if(e===B.show_free.aValues.free.iVal)i[B.show_free.aValues.free.sKey]=!i[B.show_free.aValues.free.sKey];else{if(0===e)for(var n in B.show_free.aValues)e+=B.show_free.aValues[n].iVal;i=this.explodeShowFreeFilterValue(e)}return i},isShowFreeFilterActive:function(e){return!0===this.explodeShowFreeFilterValue(this.iFilterShowFree)[e]},getShowFreeFilterLabelText:function(){var e=this.explodeShowFreeFilterValue(this.iFilterShowFree),t=[],i="";for(var n in e)if(!0===e[n])switch(n){case B.show_free.aValues.membership.sKey:t.push(l.__(this.oTranslations.membership_short)),i=l.__(this.oTranslations.membership);break;case B.show_free.aValues.premium.sKey:t.push(l.__(this.oTranslations.premium_videos_short)),i=l.__(this.oTranslations.premium_videos);break;case B.show_free.aValues.ppv.sKey:t.push(l.__(this.oTranslations.direct_purchase_short)),i=l.__(this.oTranslations.direct_purchase);break;case B.show_free.aValues.free.sKey:t.push(l.__(this.oTranslations.free_videos_short)),i=l.__(this.oTranslations.free_videos)}return this.aShowFreeAvailableFilters.length===t.length?l.__(this.oTranslations.all_content):1===t.length?i:t.join(" + ")},openCategoriesFilterSelectNiv1:function(){var e=this;oPopup=d.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-categories-filter-pop"),oPopup.onClose=function(){e.updateCategoriesFilter(!0)},this.initCategoriesFilterSelectNiv1Popup(oPopup),oPopup.show("auto")},initCategoriesFilterSelectNiv1Popup:function(e){var n=this,s=[],o=[];for(var a in t.data[B.categories.sKey]){var r=t.data[B.categories.sKey][a];-1!==this.oFilterCategories.cats.indexOf(r.id)?s.push(r):-1!==this.oFilterCategories.excats.indexOf(r.id)&&o.push(r)}var d=$(i.render(this.oTemplates.categories_filter_resume,{title:l.__(this.oTranslations.categories),reset:l.__(this.oTranslations.reset_selection),add_list:s,exclude_list:o,empty_list_text:0===s.length&&0===o.length&&l.__(this.oTranslations.add_exclude_cats_to_result),ok:l.__(this.oTranslations.ok)}));d.find(".reset").on("click",function(t){t.preventDefault(),n.oFilterCategories.cats=[],n.oFilterCategories.excats=[],n.initCategoriesFilterSelectNiv1Popup(e)}),d.find(".add").on("click",function(t){t.preventDefault(),n.openCategoriesFilterSelectNiv2("add",e)}),d.find(".exclude").on("click",function(t){t.preventDefault(),n.openCategoriesFilterSelectNiv2("exclude",e)}),d.find(".remove").on("click",function(e){e.preventDefault(),n.toggleCatFilterClick($(this)),$(this).parents("[data-id="+$(this).data("id")+"]").remove()}),d.find(".close").on("click",function(t){t.preventDefault(),e.close()}),e.setContent(d)},openCategoriesFilterSelectNiv2:function(e,n){var s=Math.ceil(t.data[B.categories.sKey].length/3),o=Math.ceil(t.data[B.categories.sKey].length/2),a=[{list:[]},{list:[]},{list:[]}],r=[{list:[]},{list:[]}];for(var u in t.data[B.categories.sKey]){var c=t.data[B.categories.sKey][u];c.status=-1!==this.oFilterCategories.cats.indexOf(c.id)?"add":-1!==this.oFilterCategories.excats.indexOf(c.id)?"exclude":"neutral",u<s?a[0].list.push(c):u<2*s?a[1].list.push(c):a[2].list.push(c),u<o?r[0].list.push(c):r[1].list.push(c)}var f=this,h=$(i.render(this.oTemplates.categories_filter_update,{title:l.__("add"===e?this.oTranslations.filter_add_categories:this.oTranslations.filter_exclude_categories),list_id:e,ok:l.__(this.oTranslations.ok),lists_3_cols:a,lists_2_cols:r})),p=d.get($("body"),!0,"close");p.setContent(h),p.setScrollAndResizeReposition("auto"),p.setOverlayClosable(!0),p.setEscapeClosable(!0),p.addClass("auto-width-popup premium-feed-categories-filter-pop"),p.onClose=function(){f.initCategoriesFilterSelectNiv1Popup(n)},p.show("auto"),h.find(".action").on("click",function(t){t.preventDefault();var i=f.toggleCatFilterClick($(this),e);$(this).parents("[data-id="+$(this).data("id")+"]").removeClass().addClass(i)}),h.find(".close").on("click",function(e){e.preventDefault(),p.close()})},hasCategoriesFilterChanged:function(e){if(void 0!==e&&"undefined"!=typeof e.cats&&"undefined"!=typeof e.excats||(e=v.get("premiumFeed_lastCatFilter")),!e&&(this.oFilterCategories.cats.length>1||this.oFilterCategories.excats.length>1)||e.cats.length!==this.oFilterCategories.cats.length||e.excats.length!==this.oFilterCategories.excats.length)return!0;var t;for(t=0;t<e.cats;t++)if(e.cats[t]!==this.oFilterCategories.cats[t])return!0;for(t=0;t<e.excats;t++)if(e.excats[t]!==this.oFilterCategories.excats[t])return!0;return!1},updateCategoriesFilter:function(e){if(this.showHideResetBtn(),this.hasCategoriesFilterChanged()){var t=this.getFilterSelectLabel(B.categories.sKey),i=this.getCategoriesFilterLabelText();t.html(i),this.saveFiltersState(),!0===e&&this.loadVideos()}},getCategoriesFilterLabelText:function(){return 0===this.oFilterCategories.cats.length&&0===this.oFilterCategories.excats.length?'<span class="icon-f icf-plus-square count-0"></span><span class="slash">/</span><span class="icon-f icf-minus-square count-0"></span> '+l.__(this.oTranslations.categories):'<span class="icon-f icf-plus-square'+(0===this.oFilterCategories.cats.length?" count-0":"")+'"></span><span>'+this.oFilterCategories.cats.length.toLocaleString(t.dyn.locale)+'</span> <span class="slash">/</span> <span class="icon-f icf-minus-square'+(0===this.oFilterCategories.excats.length?" count-0":"")+'"></span><span>'+this.oFilterCategories.excats.length.toLocaleString(t.dyn.locale)+"</span>"},toggleCatFilterClick:function(e,t){var i,n=parseInt(e.data("id")),s="";for(i=0;i<this.oFilterCategories.cats.length;i++)if(this.oFilterCategories.cats[i]===n){this.oFilterCategories.cats.splice(i,1),s="neutral","exclude"===t&&(this.oFilterCategories.excats.push(n),s="exclude");break}if(""===s)for(i=0;i<this.oFilterCategories.excats.length;i++)if(this.oFilterCategories.excats[i]===n){this.oFilterCategories.excats.splice(i,1),s="neutral","add"===t&&(this.oFilterCategories.cats.push(n),s="add");break}return""===s&&("add"===t?(this.oFilterCategories.cats.push(n),s="add"):"exclude"===t&&(this.oFilterCategories.excats.push(n),s="exclude")),""===s&&(s="neutral"),s},openFreeSearchFilter:function(){var e=this;oPopup=d.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-free-search-filter-pop"),$Content=$(i.render(this.oTemplates.free_search_filter,{title:l.__(this.oTranslations.search),ok:l.__(this.oTranslations.ok),value:"string"==typeof this.sFilterFreeSearch&&s.escape(s.unescape(this.sFilterFreeSearch).replace(/\ +/g," ").trim(),!0),placeholder:l.__(this.oTranslations.search_for),clear:l.__(this.oTranslations.clear),cancel:l.__(this.oTranslations.cancel)}));var t=$Content.find("input"),n=$Content.find(".ok"),o=$Content.find(".clear"),a=$Content.find(".cancel");t.on("keydown",function(i){27===i.keyCode&&(i.preventDefault(),i.stopPropagation(),oPopup.close()),13===i.keyCode&&(i.preventDefault(),i.stopPropagation(),e.updateFilterSelect(B.free_search.sKey,t.prop("value"))&&e.loadVideos(),oPopup.close())}),n.on("click",function(i){i.preventDefault(),e.updateFilterSelect(B.free_search.sKey,t.prop("value"))&&e.loadVideos(),oPopup.close()}),o.on("click",function(t){t.preventDefault(),e.updateFilterSelect(B.free_search.sKey,!1)&&e.loadVideos(),oPopup.close()}),a.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent($Content),oPopup.show("auto"),t.focus()},getFreeSearchFilterLabelText:function(){if("string"==typeof this.sFilterFreeSearch&&this.sFilterFreeSearch.length>0){var e=s.unescape(this.sFilterFreeSearch).replace(/\ +/g," ").trim();return'<span class="icon-f icf-search has-search"></span> '+s.escape(e.length>26?e.substring(0,26)+"...":e,!0)}return'<span class="icon-f icf-search"></span> '+l.__(this.oTranslations.search)},resizeWindowEvt:function(e){!1!==this.tWindowResize&&(clearTimeout(this.tWindowResize),this.tWindowResize=!1);var t=this;if(!0===this.bResizingWindow)return void(this.tWindowResize=setTimeout(function(){t.resizeWindowEvt(e)},1e3));var i=o.getViewportWidth();if("increase-rows-1"!==e&&"increase-rows-2"!==e&&i===this.iLastViewportWidth)return void("string"==typeof e&&-1!==e.indexOf("same-width")||(this.tWindowResize=setTimeout(function(){t.resizeWindowEvt("same-width"+("string"==typeof e?e:""))},1e3)));"string"==typeof e&&0===e.indexOf("same-width")&&(e=e.replace("same-width","")),!1!==this.tWindowEndResize&&(clearTimeout(this.tWindowEndResize),this.tWindowEndResize=!1),this.bResizingWindow=!0,this.iLastViewportWidth=i;var n=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows()),s=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2());if(n===this.iLastResizeChannelThumbsSpace&&s===this.iLastResizeChannelThumbsSpace2)return void(this.bResizingWindow=!1);this.iLastResizeChannelThumbsSpace=n,this.iLastResizeChannelThumbsSpace2=s;var a=this.getFirstCatSuggest();if(a&&(this.countChannelsLeftToLoad()>0||this.countVisibleUnreviewedChannels()>0)){var r=this.getSuggestsContainer(),l=this.getSuggestsContainer2(),d=this.countChannelsLeftToLoad()<1;"increase-rows-1"!==e&&"increase-rows-2"!==e||!a.bAdded||d?this.appendOCatSuggest(a,r,l):"increase-rows-2"===e&&this.appendOCatSuggest(a,null,l)}this.tWindowEndResize=setTimeout(function(){t.bResizingWindow=!1},500)},openWelcomePopup:function(){a.get("welcome-popup")||f.alert('<div class="premium-welcome-popup-opened"><H3>'+l.__(this.oTranslations.welcome,{"%site_name%":"default"===t.sitename?'<img src="'+t.domains["static"]+'/v3/img/skins/default/logo/xvideosred.white.png" alt="Xvideos RED"/></H3>':"xnxx"===t.sitename?'<img class="no-blur" src="'+t.domains["static"]+'/v3/img/skins/xnxx/gold/xnxx.gold.logo.png" alt="XNXX Gold" /><span class="gold-plate big-plate">GOLD</span></H3>':t.sitename.toUpperCase()})+"</H3>"+l.__(this.oTranslations.welcome_content)+"</div>",function(){a.set("welcome-popup",!0)})}},X}),define("skins/default/help_wizard/wizard_info",["lib/i18n!front"],function(e){return{"premium-feed":{sFeatureId:"4",fnBeforeEnd:function(e){e()},aInstructions:[{zone:".suggest-list .thumb-block:first-child .thumb",desc:!1,options:{$showCursorAnimOn:".suggest-list .thumb-block:first-child .thumb a",iAutoNextAfterCursorAnim:!0,fnEnd:function(e){$(".suggest-list .thumb-block:first-child .thumb a").click(),setTimeout(function(){e.showNextWizard()},150)}}},{zone:".suggest-account-preview-pop .x-body .account-preview-header",desc:e.__("premium_feed.preview_channel_tuto"),options:{fnEnd:function(e){$(".suggest-account-preview-pop").click(),setTimeout(function(){$(".suggest-list-toggle").click(),e.showNextWizard()},150)}}},{zone:".suggest-list-toggle",desc:e.__("premium_feed.switch_suggests_tuto"),options:{bSkipInstructionIfNoZone:!0,$showCursorAnimOn:".suggest-list-toggle",fnEnd:function(e){$(".suggest-list-toggle").click(),e.showNextWizard()}}}]}}}),define("skins/default/premium_feed",["skins/common/premium_feed","lib/tools","skins/default/mozaique/thumb_block_common_init","skins/default/pagination","skins/default/mozaique/thumb_block_menu","lib/helpers/suggest_tracker","./header/header"],function(e,t,i,n,s){new e({functions:{add_pagination:function(e){n.add_all_in(e)},append_channel_videos:function(e,t){$Mozaique=t.find(".mozaique"),e.appendTo($Mozaique)},get_channel_top_title:function(e){return e.find(".header")},init_desktop_channel_videos:function(e){i.init_listing(e,{tb_menu:!1})},init_videos_list:function(e){i.init_listing(e)},suggest_launch_wizard:function(){require(["skins/common/help_wizard/help_wizard","skins/default/help_wizard/wizard_info"],function(e,t){new e(t,"premium-feed")})},page_init_end:function(e){s.disableSubscribeTooltip(),s.addSubscribeEndFunction(function(t,i){e.scrollToVideos(),e.loadVideos(),e.loadChannels(null,!0),t&&e.reloadChannel(t)})},fnMakePremiumPageUrl:function(e){var i=t.parseUrl(e);return i.body+(i.query?"?"+i.query:"")+"#_tabRed"},fnMakeMembershipPageUrl:function(e){var i=t.parseUrl(e);return i.body+(i.query?"?"+i.query:"")+"#_tabRed,membership,best"},fnGetChannelPicto:function(){return $('<span class="icon-f icf-device-tv-v2"></span>')},fnGetModelPicto:function(){return $('<span class="icon-f icf-star-o"></span>')}}}),s.addEntryToDefaultOrder("report"),s.addEntryToDefaultOrder("not_interested")}),define("skins/common/video/playlist_random_order",["static/tracker"],function(e){var t,i=function(i){return"string"!=typeof i&&(i="default"),t||(t=new e("playlist_random_manage_"+i,5e3)),t},n=function(){};return n.prototype={canTrack:function(e){return i(e).canTrack()},isTracking:function(e){return i(e).isTracking()},addId:function(e,t){i(e).addId(t)},addIds:function(e,t){i(e).addIds(t)},saveFullOrder:function(e,t){this.clear(e);for(var i in t)this.addId(e,t[i])},clear:function(e){return i(e).clear()},getIds:function(e){return i(e).getIdsList().reverse()}},new n}),define("text!skins/default/profile/desc_page_thumb.html",[],function(){return'<div>\n\t<div class="prev" title="{{{ prev }}}">&lt;&lt;</div>\n\t<div class="next" title="{{{ next }}}">&gt;&gt;</div>\n\t<p>{{{ title }}}</p>\n\t<img class="img-responsive" src="{{ src }}" />\n</div>\n'}),define("skins/default/profile/desc_page",["lib/helpers/overlay/box","lib/helpers/inline_loader","mustache","text!./desc_page_thumb.html","lib/i18n!front"],function(e,t,i,n,s){var o={};return o.setup=function(){var a=$(".tab-description");if(a.length>0){var r,l,d,u,c,f=null;a.find(".thumbs").each(function(){var t=$(this),o=[];t.find("img").each(function(t){var a=$(this),h=t,p={node:a,src:a.prop("src").replace("-thumb",""),title:a.prop("title")};o.push(p),a.on("click",function(t){t.stopPropagation(),c=h,f?(r.prop("src",p.src),l.html(p.title)):(f=e.get("#main",!0,"hide").setClosable(!0,!0).setContent(i.render(n,{src:p.src,title:p.title,prev:s.__("misc.previous"),next:s.__("misc.next")})),r=f.container.find("img"),l=f.container.find("p"),d=f.container.find(".prev").on("click",function(){var e=c>0?c-1:o.length-1;o[e].node.trigger("click")}),u=f.container.find(".next").on("click",function(){var e=c<o.length-1?c+1:0;o[e].node.trigger("click")})),d.toggle(o.length>1),u.toggle(o.length>1),f.show(!1)})})})}var h=$("#login-link,#login-link-limit");h.length>0&&require(["skins/default/form/login"],function(e){e.setupLinks(h)});var p=!1,_=$();o.add_suball_btn=function(e){_=_.add(e),e.on("click",function(){if(!p&&confirm("Are you sure you want to subscribe to all uploaders of videos you like?")){p=!0;var e=t.get("after","Subscribing...").getNode().insertAfter(_);_.hide(),$.post("/videos-i-like/subscribe-all",function(e){e.result?(_.remove(),alert(e.message),window.location.reload()):(_.show(),p=!1,alert(e.message))},"json").fail(function(){_.show(),p=!1,alert("An error occured. Please retry.")}).always(function(){e.remove()})}})},o.add_suball_btn($(".subscribe-all-upvidsilike"))},o}),define("skins/default/prof_videos_i_like",["config/main","static/utils","lib/helpers/inline_loader","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/video/playlist_random_order","skins/common/history/one_info_tracker","skins/common/video/vote_manager","skins/common/tracker/videos_i_like","skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_common_init","skins/default/pagination","./profile/desc_page","./header/header"],function(e,t,i,n,s,o,a,r,l,d,u,c,f){var h=$("#page-videos-content"),p=!1,_=function(g){var m=function(e){var i={ids:e};a.canTrack("profVidsILike_lastPage")&&(g!==a.get("profVidsILike_lastPage")&&a.unset("profVidsILike_scrollPos"),a.set("profVidsILike_lastPage",g)),p=g,$.post("/videos-i-like/"+g,i,function(e){h.html(e),u.init_listing(h),f.setup(),h.find(".pagination a").on("click",function(e){if(e.preventDefault(),0!==$(this).attr("href").length){var t=parseInt($(this).attr("href").substring(1));window.location.hash=t,_(t)}});var i=$("#toggle-tracking");if(i.length>0){var p=function(e){i.html(n.__(e?"profile.tracking.stop_liked_and_del":"profile.tracking.store_liked"))},g=function(){var e=l.isTracking();if(e)window.confirm(t.unescape(n.__("misc.are_you_sure")))&&(l.stopTracking(),window.location.reload());else{if(!l.canTrack())return void window.alert(t.unescape(n.__("misc.device_not_compatible")));l.startTracking()}p(!e)};p(l.isTracking()),i.on("click",g)}var m=$(".mozaique .thumb-block");if(0===m.length&&!l.canTrack())return void s.alert(n.__("misc.device_not_compatible"));if(m.length&&xv.messages.xmmHTMLDelById("hvl3"),m.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e).toString(),i=e.find(".btn-action.remove"),n=d.getById(t);if(n){var s=function(t){t.target&&$(t.target).closest("a").length&&(t.stopPropagation(),t.preventDefault()),e.stop().fadeIn(10),e.off("click",s).find("a").off("click",s)},o=function(){e.fadeOut(7e3,function(){e.remove()}),setTimeout(function(){e.on("click",s).find("a").on("click",s)},10)};n.setVoteBadEndFunc(o),n.setUnvoteEndFunc(o),n.setOnOpenFunc(function(){e.stop().fadeIn(10),e.off("click",s).find("a").off("click",s)})}new r(null,i,"","/profiles/likes/likedvideo-remove/"+t,{pop_class:"no-arrow",disable_confirm_pop:!0,success_func:function(e){if(n){var t=n.getVote();"GOOD"!==t&&void 0!==t||n.setVote(!1)}return""},notlogged_func:function(i){if(l.removeVideo(t,l.sTrackerName+".ids",function(){e.fadeOut(function(){e.remove(),0===$(".mozaique .thumb-block").length&&window.location.reload()})}),n){var s=n.getVote();"GOOD"!==s&&void 0!==s||n.setVote(!1)}}})}),$(".play-all-rand").on("click",function(e){e.preventDefault(),o.clear("videosilike"),window.location.href=$(this).prop("href")}),c.add_all_in("#page-videos-content"),a.canTrack("profVidsILike_lastPage")){var b=parseInt(a.get("profVidsILike_scrollPos"));b>0&&$(window).scrollTop(b)}})};h.html('<p class="text-center"><strong>'+i.getSafe("after",n.__("loading.loading")).getHtml()+"</strong></p>"),e.dyn.login_info.is_logged&&e.dyn.login_info.profile?m(l.getIds()):l.isTracking()&&(xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){l.getIds().then(function(e){m(e)})}):m(l.getIds()))},g=0;window.location.hash&&window.location.hash.length>0&&parseInt(window.location.hash.substring(1))>=0?g=parseInt(window.location.hash.substring(1)):a.canTrack("profVidsILike_lastPage")&&(a.unset("profVidsILike_scrollPos"),a.unset("profVidsILike_lastPage")),_(g);var m=!1;$(window).on("scroll",function(){!1!==m&&(clearTimeout(m),m=!1),m=setTimeout(function(){!1!==p&&(window.location.hash=p,a.canTrack("profVidsILike_lastPage")&&a.set("profVidsILike_scrollPos",$(window).scrollTop()))},200)}),e.data.action_need_verified_email&&require(["skins/common/access/need_verified_email"])}),define("skins/default/prof_videos_history",["config/main","static/utils","lib/helpers/popup","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","lib/i18n!front","skins/default/mozaique/thumb_block_common_init","skins/common/history/page_view_history","./profile/desc_page","skins/default/pagination","./header/header"],function(e,t,i,n,s,o,a,r,l,d,u){var c=$("#page-videos-content"),f=$(".global-history-actions"),h=!1,p=function(t){var i=function(i){var n={ids:i};e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&l.clearOlderThan(2),xv.storage&&(t!==xv.storage.get("last_page_scroll_pos","xv_prof_videos_history")&&xv.storage.remove("last_scroll_pos","xv_prof_videos_history"),xv.storage.set("last_page_scroll_pos",t,"xv_prof_videos_history")),h=t,$.post("/history/"+t,n,function(e){c.html(e),r.init_listing(c),d.setup();var t=$(".mozaique .thumb-block"),i=c.find(".pagination a");if(f.html(""),l.isTracking()){var n=$('<button class="btn btn-default"><span class="icon-f icf-ban"></span> '+a.__("history.disable")+"</button>");n.on("click",function(){l.stopTracking(function(){window.location.reload()})}),f.append(n)}else enable_btn=$('<button class="btn btn-default">'+a.__("history.enable")+"</button>"),enable_btn.on("click",function(){l.startTracking(function(){window.location.reload()})}),f.append(enable_btn);if(i.on("click",function(e){if(e.preventDefault(),0!==$(this).attr("href").length){var t=parseInt($(this).attr("href").substring(1));window.location.hash=t,p(t)}}),0===t.length)0===i.length&&(l.canTrack()||(f.hide(),o.alert(a.__("misc.device_not_compatible"))),$("#content").prepend($("<p class='big-message'>"+a.__("history.is_empty")+"</p>")));else{var s=$('<button class="btn btn-default"><span class="icon-f icf-trash"></span> '+a.__("history.clear_this_page")+"</button>");s.on("click",function(){var e=[];$(".mozaique .thumb-block").each(function(){var t=xv.thumbs.getVideoId($(this));e.push(t)}),l.removeIds(e,function(){window.location.reload()},"page_view_history.ids")}),f.append(s),t.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e);e.find(".btn-action.remove-video").on("click",function(i){l.removeId("video",t,function(){e.fadeOut(function(){e.remove(),0===$(".mozaique .thumb-block").length&&window.location.reload()})}),i.stopPropagation()})})}if(t.length>0||i.length>0){var h=$('<button class="btn btn-default"><span class="icon-f icf-trash"></span> '+a.__("history.clear")+"</button>");h.on("click",function(){l.clear(function(){window.location.reload()})}),f.append(h)}!l.isTracking()&&l.canTrack()&&$("#content").prepend($("<p class='big-message'>"+a.__("history.is_disabled")+"</p>")),u.add_all_in("#page-videos-content");var _=xv.storage?parseInt(xv.storage.get("last_scroll_pos","xv_prof_videos_history")):0;_>0&&$(window).scrollTop(_)})};c.html('<p class="text-center"><strong>'+n.getSafe("after",a.__("loading.loading")).getHtml()+"</strong></p>"),xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){l.getVideosIdsTimestamps().then(function(e){i(e)})}):i(l.getVideosIdsTimestamps())},_=0;window.location.hash&&window.location.hash.length>0&&parseInt(window.location.hash.substring(1))>=0?_=parseInt(window.location.hash.substring(1)):xv.storage&&(xv.storage.remove("last_scroll_pos","xv_prof_videos_history"),xv.storage.remove("last_page_scroll_pos","xv_prof_videos_history")),p(_);var g=new i($(".icon-history-actions"),"",{popup_class:"history-config-popup",autoclose:!0,mouseout_autoclose:5e3});g.setPosition({v:"below",h:"left"}),g.onOpen=function(){g.setContent(f.clone(!0))};var m=!1;$(window).on("scroll",function(){!1!==m&&(clearTimeout(m),m=!1),m=setTimeout(function(){!1!==h&&(window.location.hash=h,xv.storage&&xv.storage.set("last_scroll_pos",$(window).scrollTop(),"xv_prof_videos_history"))},200)}),e.data.action_need_verified_email&&require(["skins/common/access/need_verified_email"])}),define("lib/tab",["config/main","static/dom","./history"],function(e,t,i){var n=function(n,s,o,a,r,l){this.node=$(n),this.bClosable=!!o,this.use_class="class"===r,this.use_func="function"==typeof r,this.open_func=this.use_func?r:null,this.bNoFirstTabHash=!!a,this.bNoTabHash="no_tab_hash"===a,this.bFirstLoad=!0,l="object"==typeof l?l:{},this.sTabContainerSelector="string"==typeof l.sTabContainerSelector?l.sTabContainerSelector:".tab-buttons",this.iSideScrollableTabBtns=this.node.find(".side-scrollable-tab-buttons "+this.sTabContainerSelector).length>0&&this.node.find(".side-scrollable-tab-buttons"),"object"==typeof l.oHistory?this.oHistory=l.oHistory:this.oHistory=i,this.bFirstHashUpdate="boolean"!=typeof l.bFirstHashUpdate||l.bFirstHashUpdate;var d=this.node.find(this.sTabContainerSelector+" a, .tab-button").not(".notab"),u=this.node.find(".tabs .tab"),c=this;if(!(0===u.length||d.length<u.length)){var f=t.getViewportWidth()<=768;this.oActions=s||{},this.first_tab_id,this.active=!1,this.oTabs={},this.aOnOpenCallbacks=[];for(var h in this.oActions)this.oActions[h].active&&(this.active=h);u.each(function(e){var t=d.first(),i=t.data("target");d=i?d.filter(function(e){return 0!==e&&($(this).data("target")!==i||(t=t.add(this),!1))}):d.slice(1);var n=$(this),s=n.data("tab-id")||n.prop("id"),o={};if(c.first_tab_id||(c.first_tab_id=s),o.first=0===e,o.id=s,o.tab=n,o.btn=t,o.target=i,o.active=c.active===s,!c.active||o.active){o.btn.hasClass("active")||f&&o.btn.hasClass("mobile-active")||!f&&o.btn.hasClass("desktop-active")?(o.active=!0,c.active=s,c.use_class?n.addClass("active"):c.use_func?c.open_func(c,n,!0):n.show()):c.use_class?n.removeClass("active"):c.use_func?c.open_func(c,n,!1):n.hide()}else c.use_class?n.removeClass("active"):c.use_func?c.open_func(c,n,!1):n.hide(),o.btn.removeClass("active");n.removeClass("mobile-active desktop-active"),o.btn.removeClass("mobile-active desktop-active"),o.action=!1;var a=[];"function"==typeof c.oActions[s]?o.action=c.oActions[s]:"object"==typeof c.oActions[s]&&("function"==typeof c.oActions[s].action&&(o.action=c.oActions[s].action),"function"==typeof c.oActions[s].action_already_open&&(o.action_already_open=c.oActions[s].action_already_open),"object"==typeof c.oActions[s].subhashes&&(a=c.oActions[s].subhashes));var r="_"+s;(c.bNoTabHash||c.bNoFirstTabHash&&0===e)&&(r=!1),c.oHistory.registerHash(r,function(e,t){c._onhashchange(e,t)}),o.btn.on("click",function(e){e.preventDefault(),c.bClosable&&c.active===s?c.close():(!1!==r&&c.oHistory.setUrlHash(r,null),c.open(s))}),c.oTabs[s.toLowerCase()]=o;for(var l in a)c.setSubHash(s,a[l])});var p=this.oHistory.getHash();if(p&&(p=p.substring(1),"undefined"!=typeof this.oTabs[p.toLowerCase()]&&(this._close(),this.active=p)),o||this.active||(this.active=this.first_tab_id),!o||this.bNoFirstTabHash||this.bNoTabHash||c.oHistory.registerHash(!1,function(e,t){c._onhashchange(e,t)}),this.active&&this.open(this.active,!0,null,!0,!this.bFirstHashUpdate),!1!==this.iSideScrollableTabBtns){e.dyn.is_desktop||this.iSideScrollableTabBtns.addClass("is_mobile"),this.$sideScrollableTabBtnsLeft=this.node.find(".left-scroll"),this.$sideScrollableTabBtnsRight=this.node.find(".right-scroll"),c.side_scroll_window_resize();this.$sideScrollableTabBtnsLeft.hover(function(){var e=c.iSideScrollableTabBtnsFullWidth-c.iSideScrollableTabBtnsWidth,t=c.iSideScrollableTabBtns.scrollLeft();t<1?(c.iSideScrollableTabBtns.scrollLeft(0),c.side_scroll_arrows_update()):c.iSideScrollableTabBtns.stop(!0,!1).animate({scrollLeft:0},{duration:1e3-1e3*(e-t)/e,complete:function(){c.side_scroll_arrows_update()}})},function(){c.iSideScrollableTabBtns.stop(!0,!1)}),this.$sideScrollableTabBtnsRight.hover(function(){var e=c.iSideScrollableTabBtnsFullWidth-c.iSideScrollableTabBtnsWidth,t=c.iSideScrollableTabBtns.scrollLeft();t>e-1?(c.iSideScrollableTabBtns.scrollLeft(e),c.side_scroll_arrows_update()):c.iSideScrollableTabBtns.stop(!0,!1).animate({scrollLeft:e},{duration:1e3-1e3*t/e,complete:function(){c.side_scroll_arrows_update()}})},function(){c.iSideScrollableTabBtns.stop(!0,!1)}),this.iSideScrollableTabBtns.scroll(function(){c.side_scroll_arrows_update()}),$(window).resize(function(){c.side_scroll_window_resize()})}}};return n.prototype={open:function(e,t,i,n,s){var o,a=e.toLowerCase(),r=!!this.active&&this.active.toLowerCase(),l=this.oTabs[a];if(a!==this.active&&(this.prev=this.active),o=void 0===i||null===i||!1===i?e===this.oHistory.getHash().substring(1)&&this.oHistory.getPaginHash()-1>0?this.oHistory.getPaginHash()-1:null:i,!t&&r===a||void 0===l)return void(l&&l.action_already_open&&!1!==t&&l.action_already_open(e));t&&r===a||this._close(),l.active=!0,this.use_class?l.tab.addClass("active"):this.use_func?this.open_func(this,l.tab,!0):l.tab.show(),!1!==this.iSideScrollableTabBtns&&this.side_scroll_to_button(l),l.btn.addClass("active"),l.action&&l.action(e,o,l.tab);for(var d=Object.keys(this.oActions),u=0;u<d.length;u++)if(l.id!==d[u]){var c=this.oActions[d[u]];c.onUnfocus&&"function"==typeof c.onUnfocus&&c.onUnfocus()}var f="_"+e;(this.bNoTabHash||this.bNoFirstTabHash&&l.first&&-1===f.indexOf(","))&&(f=""),this.active=e,s||this.oHistory.setUrlHash(f,o>0?o+1:null,"boolean"==typeof n&&n),this.node.addClass("disp-"+e.replace(",","-"));for(u in this.aOnOpenCallbacks)this.aOnOpenCallbacks[u](e)},close:function(){this.bClosable&&this._close()},_close:function(){if(this.active){this.node.removeClass("disp-"+this.active.replace(",","-"));var e=this.oTabs[this.active.toLowerCase()];e.active=!1,this.use_class?e.tab.removeClass("active"):this.use_func?this.open_func(this,e.tab,!1):e.tab.hide(),e.btn.removeClass("active"),this.active=!1}},_onhashchange:function(e,t){if((this.bNoTabHash||this.bNoFirstTabHash)&&e===i.getNoHashValue()&&(e="_"+this.first_tab_id),e!==i.getNoHashValue()){var n=-1!==e.indexOf(this.active)?this.active.split(",")[0]:e.split(",")[0].substring(1),s=this.oActions[n],o=void 0!==s&&s.oListings&&"undefined"!=typeof s.oListings&&"object"==typeof s.oListings;if(o){t=null===t?0:t-1;var a,r,l=e.split("-");if(l.length>2)for(var d=1;d<l.length;d++)1===d?a=l[d]:a+="-"+l[d];else a=l[1];1===l.length?(a=this.oActions[e.substring(1)].oListings.sort_opts[0],r=o?this.oActions[e.substring(1)].oListings.loaders[a]:null):r=o?s.oListings.loaders[a]:null,void 0!==r&&null!==r&&t!==parseInt(r._get_url_pagin().substring(1))&&r.loadPage(t),-1!==this.active.indexOf(n)&&a===s.oListings.ups_sort||this.open(e.substring(1),!1,t)}else this.open(e.substring(1),!1)}else this.close()},addOnOpenCallback:function(e){"function"==typeof e&&this.aOnOpenCallbacks.push(e)},side_scroll_to_button:function(e){var t=e.btn,i=!1,n=Math.ceil(t.position().left),s=Math.ceil(t.outerWidth()),o=this.iSideScrollableTabBtns.width(),a=this.iSideScrollableTabBtns.scrollLeft();if(n+s+20>o?i=a+n+s+20-o:n<20&&(i=a+n-20)<0&&(i=0),!1!==i){var r=this;this.iSideScrollableTabBtns.animate({scrollLeft:i+"px"},{complete:function(){r.side_scroll_window_resize()}})}},side_scroll_arrows_update:function(){var e=this.iSideScrollableTabBtns.scrollLeft(),t=e>0,i=this.iSideScrollableTabBtnsWidth+e<this.iSideScrollableTabBtnsFullWidth;t?this.$sideScrollableTabBtnsLeft.fadeIn("fast"):this.$sideScrollableTabBtnsLeft.fadeOut("fast"),i?this.$sideScrollableTabBtnsRight.fadeIn("fast"):this.$sideScrollableTabBtnsRight.fadeOut("fast")},side_scroll_window_resize:function(){this.iSideScrollableTabBtnsWidth=this.iSideScrollableTabBtns.width(),this.iSideScrollableTabBtnsFullWidth=this.iSideScrollableTabBtns[0].scrollWidth,this.side_scroll_arrows_update()},getFirstLoad:function(){return this.bFirstLoad},setFirstLoad:function(e){this.bFirstLoad=e},getPrev:function(){var e=this.prev;return void 0===e&&(e=this.first_tab_id),e},setSubHash:function(e,t){var i=this.oTabs[e.toLowerCase()];if(void 0!==i){var n={},s=this;for(var o in i)n[o]=i[o];n.id=!1,n.active=!1,this.oTabs[e.toLowerCase()+","+t]=n,this.oHistory.registerHash("_"+e+","+t,function(e,t){s._onhashchange(e,t)})}}},n}),define("text!skins/default/profile/vote/votes_box.mustache",[],function(){
return'<div class="rating-box">\n\t{{# closed_first }}\n\t<div class="show-more">+</div>\n\t<div class="rating-box-content">\n\t{{/ closed_first }}\n\t\t<span class="vote-actions">\n\t\t\t<a class="btn btn-default vote-action-good"><span class="icon-f icf-thumb-up">&nbsp;</span></a><a class="btn btn-default vote-action-bad"><span class="icon-f icf-thumb-down">&nbsp;</span></a>\n\t\t</span>\n\t\t<div class="rating-bar-block">\n\t\t\t{{# disp_good_bad }}\n\t\t\t<span class="icon-f icf-thumb-up"></span> <span class="good">{{ vgood }}</span>\n\t\t\t<span class="icon-f icf-thumb-down"></span> <span class="bad">{{ vbad }}</span>\n\t\t\t{{/ disp_good_bad }}\n\t\t\t{{^ disp_good_bad }}\n\t\t\t<span class="total">{{ vtotal }}</span>\n\t\t\t{{/ disp_good_bad }}\n\t\t\t<div class="rating-bar"><div style="width:{{ vrating }}%;"></div></div>\n\t\t</div>\n\t\t<span class="rating">{{ rating }}</span>\n\t{{# closed_first }}\n\t</div>\n\t{{/ closed_first }}\n</div>'}),define("skins/default/profile/vote/total",["config/main","mustache","lib/tools","text!./votes_box.mustache","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/overlay/box","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(e,i,s,o,a,r,l,d,u){if(void 0!==e){this.vtotal=o,this.vrating=i,this.rating=s,this.visitor_vote=!1,this.is_owner=!1,this.closed_first="boolean"==typeof d&&d,this.related_users={},void 0===a||"GOOD"!==a&&"BAD"!==a||(this.visitor_vote=a),"boolean"==typeof u&&(this.is_owner=u),this.login_required="boolean"==typeof r&&r,this.login_container=l,this.node=$(t.render(n,this._get_tpl_vars())),e.replaceWith(this.node),this.closed_first&&(this.show_more=this.node.children(".show-more"),this.show_more_content=this.node.children(".rating-box-content"),this.show_more_open=!1,this.show_more.on("click",function(){c._toggle_show_more(!c.show_more_open)})),this.actions=this.node.find(".vote-actions"),this.yes_btn=this.actions.children(".vote-action-good"),this.no_btn=this.actions.children(".vote-action-bad"),!0===this.is_owner?(this.yes_btn.addClass("disabled"),this.no_btn.remove()):("GOOD"===this.visitor_vote&&this.yes_btn.addClass("is-voted"),"BAD"===this.visitor_vote&&this.no_btn.addClass("is-voted")),this.bar_good=this.node.find(".rating-bar div"),this.bar_rating=this.node.find(".rating"),this.total=this.node.find(".total"),this._init_counts();var c=this;this.voting=!1,this.popup=null,this.popup_pos={v:"below",h:"left"},this.yes_btn.on("click",function(){c._vote("GOOD")}),this.no_btn.on("click",function(){c._vote("BAD")})}};return l.prototype={initPostData:function(e,t,i,n){this.url_good=e,this.url_bad=t,this.post_data=i||{},this.url_remove=n},setPopupPosition:function(e,t){this.popup_pos.v=e,this.popup_pos.h=t},_init_counts:function(){this.counts_total=this.node.find(".total")},_get_tpl_vars:function(){return{vtotal:this.vtotal,rating:this.rating,vrating:this.vrating,closed_first:this.closed_first}},_update_counts:function(e){this.bar_rating.text(e.vrating),this.total.text(e.total),this.bar_good.css("width",e.rating+"%")},_get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new o(e,t,{position:this.popup_pos,trigger:!1,popup_class:"profile-vote-popup"}),this.popup},_open_login:function(){require(["skins/default/form/login"],function(e){e.open()})},_vote:function(t){if("GOOD"!==t&&"BAD"!==t)return!1;if(this.voting)return!1;if(this.login_required&&!e.dyn.login_info.is_logged)return this._open_login(),!1;var i=this,n="GOOD"===t?this.yes_btn:this.no_btn,o=n.html(),a="GOOD"===t?this.url_good:this.url_bad;t===this.visitor_vote&&n.hasClass("is-voted")&&(a=this.url_remove),this.yes_btn.addClass("disabled"),this.no_btn.addClass("disabled"),n.html(s.getImg()),$.post(a,this.post_data,function(s){require(["mustache","static/utils","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(o,l,d,u){var c,f=[];if(s.result)if(i._update_counts(s),i.visitor_vote=t,"GOOD"===t&&$.isArray(s.related)){var h="",p=e.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg";for(var _ in s.related)"undefined"==typeof i.related_users[s.related[_].id]&&(i.related_users[s.related[_].id]=s.related[_],s.related[_].img='<img title="'+s.related[_].username_display+'" src="'+(s.related[_].thumb?s.related[_].thumb:p)+'" onerror="this.src=\''+p+"'; this.onerror=null;\" />",s.related[_].div_id="profile-related-"+s.related[_].id+"-"+Math.ceil(1e4*Math.random()),f.push({user_id:s.related[_].id,user_name:s.related[_].username,nb_subs:s.related[_].nb_subs,append_btn_to:"#"+s.related[_].div_id,btn_class:"sub-strip"}),h+=o.render(u,s.related[_]));c=o.render(d,{subscribed:a!==i.url_remove?l.unescape(r.__("video.votes.thanks")):l.unescape(r.__("video.votes.remove")),view_activities:!1,also_like:l.unescape(r.__("user.you_may_also_like")),hide_view_activities:!0,has_related:f.length>0,related_html:h})}else c=a!==i.url_remove?"<strong>"+r.__("video.votes.thanks")+"</strong>":"<strong>"+r.__("video.votes.remove")+"</strong>";else c='<strong class="text-danger">'+s.message+"</strong>";i._get_popup(n,c).open(),f.length>0&&require(["skins/default/profile/subscribe/btns"],function(e){e(f,{sub_options:{add_relateds_to:i,tooltip_hide_after:1e3}})})})},"json").fail(function(){i._get_popup(n,'<strong class="text-danger">'+r.__("error.err_please_reload")+"</strong>").open()}).complete(function(){n.html(o),i.voting=!1,i.yes_btn.toggleClass("disabled",!e.dyn.login_info.is_logged),i.no_btn.toggleClass("disabled",!e.dyn.login_info.is_logged),i.yes_btn.toggleClass("is-voted",a===i.url_good),i.no_btn.toggleClass("is-voted",a===i.url_bad)})},_toggle_show_more:function(e){e=!!e,this.show_more_open!==e&&(this.show_more_open=e,this.show_more.html(e?"-":"+"),e?this.show_more_content.fadeIn():this.show_more_content.fadeOut())}},l}),define("skins/default/profile/action/aboutme_desc",["config/main","mustache","lib/helpers/overlay","lib/helpers/inline_loader","lib/i18n!front"],function(e,t,i,n,s){var o=$("#pinfo-aboutme");if(o.hasClass("editable")){var a=!1;o.on("click",function(){a||(o.addClass("editing").find("textarea").focus(),a=!0)});var r=o.find("button").on("click",function(){var l=r.prevAll("textarea"),d=o.find(".value"),u=$.trim(l.val());r.prev("p").remove();var c=i.get(o,!1).setContent(n.getSafe("after",s.__("misc.updating")).getHtml()).show();$.post("/profiles/"+e.data.user.username+"/update",{"profile[aboutme]":u,csrf:e.data.user.csrf.uupdate},function(e){if(e.result){a=!1,o.removeClass("missing editing"),0===u.length?(o.addClass("missing"),o.find(".tip span").html(s.__("profile.aboutme.click_write_desc"))):o.find(".tip span").html(s.__("profile.aboutme.click_edit_desc"));var i=t.render("{{ text }}",{text:u}).split("\n").join("\n<br>");d.html(i),$("#header-about-me").html(i)}else{var n;n=e.message?s.__("misc.update_failed_error")+" "+e.message:s.__("misc.update_failed_please_retry"),r.before('<p class="text-center"><strong class="text-danger">'+n+"</strong></p>")}},"json").fail(function(){c.close(),r.before('<p class="text-center"><strong class="text-danger">'+s.__("misc.error_please_retry")+"</strong></p>")}).always(function(){c.close()})})}}),define("text!skins/default/profile/action/popup_form.html",[],function(){return'<form class="form-horizontal">\n\t{{# title }}\n\t<div class="form-group title">\n\t\t<div class="col-sm-12">\n\t\t\t<p class="form-control-static">{{{ title }}}</p>\n\t\t</div>\n\t</div>\n\t{{/ title }}\n\t{{# inputs }}\n\t<div class="form-group">\n\t\t<label for="{{ base_id }}_{{ name }}" class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<input type="text" class="form-control" id="{{ id }}" name="{{ name }}" />\n\t\t</div>\n\t</div>\n\t{{/ inputs }}\n\t{{# settings }}\n\t<div class="form-group">\n\t\t<label for="{{ base_id }}_{{ name }}" class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<select class="form-control" id="{{ id }}" name="{{ name }}">\n\t\t\t\t{{# options }}<option value="{{ opt_value }}"{{# opt_cheked }} selected="selected"{{/ opt_cheked }}>{{{ opt_label }}}</option>{{/ options }}\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t{{/ settings }}\n\t{{# static_fields }}\n\t<div class="form-group">\n\t\t<label class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<p class="form-control-static">{{{ content }}}</p>\n\t\t</div>\n\t</div>\n\t{{/ static_fields }}\n\t<div class="form-group actions">\n\t\t<div class="col-sm-12 text-right">\n\t\t\t<div>\n\t\t\t\t{{# csrf_token }}\n\t\t\t\t<input type="hidden" name="csrf" value="{{ csrf_token }}" />\n\t\t\t\t{{/ csrf_token }}\n\t\t\t\t<button type="button" class="btn btn-default btn-xs">{{{ btn_label }}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>'}),define("skins/default/profile/action/popup_form",["config/main","mustache","lib/helpers/inline_loader","lib/helpers/popup","text!./popup_form.html","lib/i18n!front"],function(e,t,i,n,s,o){var a=function(e,t,i){this.btn=e,this.title=t,this.btn_label=i||o.__("misc.save"),this.msg_success,this.msg_updating,this.url=!1,this.validator=!1,this.csrf_token=!1,this.inputs=[],this.settings=[],this.static_fieds=[],this.popup=null;var n=this,s=this.btn.on("click",function(e){e.preventDefault(),n.btn.off("click",s),n._get_popup().open()});this.saving=!1};return a.prototype={setMessages:function(e,t){this.msg_success=e,this.msg_updating=t},setRequestParams:function(e,t,i){this.url=e,this.validator=t,this.csrf_token=i},addInput:function(e,t){this.inputs.push({label:e,name:t,id:this.btn.prop("id")+"-"+t.replace("[","-").replace("]","-")})},addSetting:function(e,t,i,n){for(var s in i)i[s].opt_cheked=i[s].opt_value===n;this.settings.push({label:e,name:t,id:this.btn.prop("id")+"-"+t.replace("[","-").replace("]","-"),options:i})},addStaticField:function(e,t){this.static_fieds.push({label:e,content:t})},_get_popup:function(){if(!this.popup){this.form=$(t.render(s,{title:this.title,inputs:this.inputs,settings:this.settings,static_fields:this.static_fieds,btn_label:this.btn_label,csrf_token:this.csrf_token||e.data.user.csrf.uupdate})),this.popup=new n(this.btn,this.form,{popup_class:"x-popup-white profile-privacy-popup"});var i=this;this.form.find(".actions button").on("click",function(){i._save_form()})}return this.popup},_save_form:function(){if(!this.saving&&(!this.validator||this.validator())){this.saving=!0,this.form.prevAll().remove();var t=this,n=this.form.serializeArray(),s=i.getSafe("after",this.msg_updating||o.__("profile.privacy.saving")).insertAfter(this.form.hide());$.post(this.url||"/profiles/"+e.data.user.username+"/update",n,function(e){if(e.result)t.form.before('<p class="text-success"><strong>'+(t.msg_success||o.__("profile.privacy.saved"))+"</strong></p>");else{var i;i=e.message?o.__("misc.update_failed_error")+" "+e.message:o.__("misc.update_failed_please_retry"),t.form.before('<p class="text-danger"><strong>'+i+"</strong></p>")}},"json").fail(function(){t.form.before('<p class="text-danger"><strong>'+o.__("misc.error_please_retry")+"</strong></p>")}).always(function(){t.saving=!1,s.remove(),t.form.show()})}}},a}),define("text!skins/default/profile/tabs/ranks.mustache",[],function(){return'<div class="ranks">\n\t{{#rankings}}\n\t\t<div class="ranking">\n\t\t\t<p class="psinfo-ranks"><strong>{{{label}}}:</strong></p>\n\t\t\t{{#ranks}}\n\t\t\t\t<p class="psinfo-ranks">\n\t\t\t\t\t<em>{{{label}}}:</em>\n\t\t\t\t\t{{#ranks}}\n\t\t\t\t\t\t<br><span>{{{geo}}} #<strong class="text-danger">{{#link}}\n\t\t\t\t\t\t<a href="{{{link}}}" title="{{{label}}}"\n\t\t\t\t\t\t   class="text-danger">{{{rank}}}</a>{{/link}}{{^link}}{{{rank}}}{{/link}}</strong></span>\n\t\t\t\t\t{{/ranks}}\n\t\t\t\t</p>\n\t\t\t{{/ranks}}\n\t\t</div>\n\t{{/rankings}}\n</div>'}),define("skins/default/profile/tabs/aboutme",["config/main","lib/tools","lib/helpers/popup","skins/default/profile/vote/total","lib/i18n!front","../action/aboutme_desc"],function(e,t,i,n,s){function o(e){var t=e.get(0).scrollWidth,i=e.get(0).clientWidth,n=e.get(0).scrollHeight,s=e.get(0).clientHeight;return t>i||n>s}function a(){if(p.length>0){var e=o(p);p.find(".show-more").toggle(e),e?p.data("initialized")||(p.on("click",function(e){_?$(e.target).hasClass("show-more")&&(p.removeClass("expanded").find(".show-more").html("+"),_=!1):(p.addClass("expanded").find(".show-more").html("-"),_=!0)}),p.data("initialized",!0)):(p.off("click"),p.data("initialized",!1))}}var r="/profiles/"+e.data.user.username+"/",l=function(e){var t=$("#pinfo-"+e+"-info-switch");if(0!==t.length){var i=t.parents(".pinfo-switch"),n=i.nextAll(".pinfo-"+e);t.on("click",function(e){e.preventDefault(),n.removeClass("pinfo-hidden"),i.remove()})}};l("personal"),l("physical");var d=e.data.user.pvote;if(void 0!==d){var u=e.dyn.login_info.is_logged&&e.dyn.login_info.id===e.data.user.id_user;new n($("#profile-vote"),d.vrating,d.rating,d.total,e.data.visitor.pvote.res,!e.data.visitor.pvote.allowed,$("#page"),null,u).initPostData(r+"vote/good",r+"vote/bad",{csrf:e.data.user.csrf.uvote},r+"vote/remove")}var c=$("#vote-info");if(c.length>0){var f=s.__("profile.vote.tip_good_vote_save_user",{"%start_link%":e.dyn.login_info.is_logged?'<a href="/account/people/ilike">':"","%end_link%":e.dyn.login_info.is_logged?"</a>":""});new i(c,"<div><strong>"+s.__("misc.tip")+": </strong>"+f+"</div>",{trigger:"click mouseenter"})}var h=$("#privacy-edit-aboutme");h.length>0&&require(["skins/default/profile/action/popup_form"],function(t){var i=new t(h),n=[];n.push({opt_value:"ANYONE",opt_label:s.__("misc.everybody")}),n.push({opt_value:"REGISTER",opt_label:s.__("profile.allow.only_registered")}),n.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),n.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.nobody")}),i.addSetting(s.__("profile.privacy.who_can_view_contact"),"profile[contact_access]",n,e.data.user.access.contact);var o=s.__("profile.privacy.no_country_blocked")+", ";if(e.data.user.blocked_countries.length>0){o="";for(var a in e.data.user.blocked_countries){var r=e.data.user.blocked_countries[a];o+='<span class="text-nowrap"><span class="flag-small flag-'+r.c.toLowerCase()+'"></span> '+r.n+"</span>, "}}o+='<a href="/account/profile/edit">'+s.__("misc.change")+"</a>",i.addStaticField(s.__("profile.privacy.blocked_countries"),o)});var p=$("#header-about-me"),_=!1;a(),$(window).on("resize",a),$(window).on("load",a);var g=$("#pinfo-workedfor");if(g.length>0){var m=g.find("a");if(m.length>20){var b=g.find("span");b.html(""),m.each(function(e){var t=$(this);e<20?t.appendTo(b):(20===e&&$('<span class="see-more pinfo-hidden"></span> <div class="show-more">+</div>').appendTo(b),t.appendTo(b.children(".see-more"))),e!==m.length-1&&t.after(", ")}),g.find(".show-more").on("click",function(){var e=$(this),t=g.find(".see-more");t.hasClass("pinfo-hidden")?(e.html("-"),t.removeClass("pinfo-hidden")):(e.html("+"),t.addClass("pinfo-hidden"),xv.dom.isElementInView(g)||xv.dom.scrollToTop($("#profile-tabs").offset().top-5))})}}var v=$("#pinfo-ranks");v.length>0&&$.getJSON(r+"ranks/"+(e.data.main_cat||e.dyn.pagefilter),function(e){e.result&&require(["mustache","text!skins/default/profile/tabs/ranks.mustache"],function(t,i){v.replaceWith(t.render(i,{rankings:e.rankings}))})});var y=$("#profile-aboutme-tab-chat-link");y.length&&(e.dyn.login_info&&e.dyn.login_info.is_logged?xv.chat&&xv.chat.actions&&"function"==typeof xv.chat.actions.set_chat_toggle?xv.chat.actions.set_chat_toggle(y):(xv.chat||(xv.chat={}),xv.chat.infos||(xv.chat.infos={}),xv.chat.infos.to_set_chat_toggle_link_outside_done||(xv.chat.infos.to_set_chat_toggle_link_outside_done=[]),xv.chat.infos.to_set_chat_toggle_link_outside_done.push({elem:y})):require(["skins/default/form/login"],function(t){y.on("click",function(i){i.preventDefault(),t.setOpenCloseModes("signup"),t.open(null,{sThisOpenOnlyTracker:"profchatbtn",sThisOpenOnlyOrigin:e.dyn.is_premium?"profile_page_chat_tab_aboutme":null})})}));var D=$("#pinfo-aboutme");if(D.length>0){var C,w=!1,S=!1,k=function(){S||(w||(w=D.find(".show-more").on("click",function(){S=!0,D.css("max-height","none"),$(this).remove(),$(window).off("resize",C),w.off("click")})),w.css("display",D.outerHeight()>142?"block":""))};return C=$(window).on("resize",k),k}return function(){}}),define("text!skins/default/profile/action/action_menu/link.mustache",[],function(){return'<a href="{{{url}}}" class="menu-link btn">\n\t{{#icon}}<span class="icon-f {{icon}}"></span>{{/icon}}\n\t{{{label}}}\n</a>\n'}),define("text!skins/default/profile/action/action_menu/action.mustache",[],function(){return'<a class="menu-action btn">\n    {{#icon}}<span class="icon-f {{icon}}"></span>{{/icon}}\n    <span class="btn-text">{{{label}}}</span>\n</a>\n'}),define("text!skins/default/profile/action/action_menu/double_action.mustache",[],function(){return'<div class="menu-double-action">\n\t<a class="menu-action action-1 btn">\n\t\t{{#icon}}<span class="icon-f {{icon}}"></span>{{/icon}}\n\t\t<span class="btn-text">{{{label}}}</span>\n\t</a>\n\t<a class="menu-action action-2 btn">\n\t\t{{#icon2}}<span class="icon-f {{icon2}}"></span>{{/icon2}}\n\t\t<span class="btn-text">{{{label2}}}</span>\n\t</a>\n</div>'}),define("text!skins/default/profile/action/action_menu/label.mustache",[],function(){return'<span class="menu-label non-clickable">\n    {{#icon}}<span class="icon-f {{icon}}"></span>{{/icon}}\n    {{{label}}}\n</span>\n'}),define("text!skins/default/profile/action/action_menu/separator.mustache",[],function(){return'<hr class="menu-separator" />'}),define("text!skins/default/profile/action/action_menu/custom.mustache",[],function(){return'<div class="menu-custom"></div>'}),define("text!skins/default/profile/action/action_menu/sub_menu.mustache",[],function(){return'<a class="menu-action btn">\n    {{#icon}}<span class="icon-f {{icon}}"></span>{{/icon}}\n    <span class="btn-text">{{{label}}}</span>\n</a>'}),define("text!skins/default/profile/action/report.mustache",[],function(){return'<div class="tab-form">\n\t<h2 class="text-center">{{{ title }}}</h2>\n\t<div class="row">\n\t\t<div class="col-sm-6">\n\t\t\t{{{ report_form }}}\n\t\t</div>\n\t\t<div class="col-sm-6 content-infrigment">\n\t\t\t<p><strong class="text-danger">{{{ content_removal.links }}}</strong></p>\n\t\t\t<p>{{{ content_removal.link_copyright }}}</p>\n\t\t\t<p>{{{ content_removal.link_privacy }}}</p>\n\t\t</div>\n\t</div>\n</div>'}),define("skins/default/profile/action/report",["config/main","mustache","static/utils","lib/tools","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","skins/form/validator","lib/i18n!front","text!./report.mustache"],function(e,t,i,n,s,o,a,r,l,d){var u=function(e,t,i){this.type=e,this.btn=t,this.container=i,this.overlay=null,this.validator=null,this.title=null,this.pictures=[];var s=this;t.on("click",function(e){e.preventDefault(),s._handle($(this))});var o=n.parseUrl(window.location.href,"query",!0);"profile"===this.type&&o.reportuser?s._handle():"gallery"===this.type&&o.reportuser&&s._handle()};return u.prototype={fnOnOpen:null,onReported:null,setPictures:function(e){this.pictures=e,this.title&&this.title.text(this.getTitle())},getTitle:function(){if("gallery"===this.type){var t="";return t=0===this.pictures.length?i.unescape(l.__("report_form.report_album",{},'Report the photo album "%title%" of %user%')):1===this.pictures.length?i.unescape(l.__("report_form.report_album_pic",{},'Report one picture of the photo album "%title%" of %user%')):i.unescape(l.__("report_form.report_album_pics",{},'Report %nb% pictures of the photo album "%title%" of %user%')).replace("%nb%",this.pictures.length.toString()),t.replace("%user%",e.data.user.display).replace("%title%",i.escape(e.data.gal.title))}return l.__("report_form.report_user",{"%user%":e.data.user.display},"Report user %user%")},_handle:function(t){if("gallery"===this.type&&0===this.pictures.length&&e.data.max_report_nb_pics&&e.data.gal&&e.data.gal.nb_pictures&&e.data.gal.nb_pictures>e.data.max_report_nb_pics){this.overlay&&this.overlay.hide();var i="<p>"+l.__("report_form.max_pics_report_warn",{"%nb_pictures%":parseInt(e.data.max_report_nb_pics).toLocaleString(e.dyn.locale)})+"</p> <p>"+l.__("report_form.report_pics_individually")+"</p>";return void o.alert(i)}if(this.overlay)return this.overlay.show(),this.validator.resetSubmit(),this.validator.refresh(),void("function"==typeof this.fnOnOpen&&this.fnOnOpen());this._load_form()},_load_form:function(){var i=this.getTitle(),n={title:i,report_form:"gallery"===this.type?e.data.gal.report_form:e.dyn.report_form,content_removal:l.__("content_removal.*",{"%start_copy_link%":'<a href="'+e.domains.info+'/takedown/" target="_blank">',"%start_privacy_link%":'<a href="'+e.domains.info+'/takedown-amateur" target="_blank">',"%end_link%":"</a>"})},u=$(t.render(d,n));this.title=u.find("h2");var c=u.find("form");this.overlay=s.get(this.container,!0,"hide").append(u).show();var f=this,h="gallery"===this.type?e.data.gal.report_form_rules:e.dyn.report_form_rules,p=function(){var t=null;f.validator=new r(c,h),c.find(".btn-cancel").on("click",function(e){e.preventDefault(),f.overlay.hide(),t&&t.hide()}),c.on("submit",function(i){i.preventDefault(),f.overlay.hide(),t||(t=s.get(f.container,!1).setContent(a.get("after",l.__("report_form.sending",{},"Sending report...")).getHtml()).show());var n=c.serializeArray();"gallery"===f.type&&f.pictures.length>0&&n.push({name:"pics",value:f.pictures.join(",")}),$.post("/profiles/"+e.data.user.username+"/report"+("gallery"===f.type?"/gallery/"+e.data.gal.id_gal:""),n,function(e){if(!e.result){if(12===e.code){var t=$(e.form);c.replaceWith(t),c=t,f.overlay.show(),h=e.js_rules,p();var i=$("div.g-recaptcha");return void(i.length>0&&grecaptcha.render(i[0]))}return void o.alert(e.message,function(){f.overlay.show(),f.validator.resetSubmit(),f.validator.refresh()},!0)}"gallery"!==f.type||0===f.pictures.length?(f.btn.remove(),u.replaceWith('<p class="text-center"><strong class="text-success">'+(e.message||l.__("report_form.thanks",{},"Thanks for your report!"))+"</strong></p>"),f.overlay.show(),f.overlay.autoclose(1e4)):o.alert(e.message||l.__("report_form.thanks",{},"Thanks for your report!"),null,!0),f.onReported&&f.onReported()},"json").fail(function(){o.alert(l.__("misc.error_please_retry"),function(){f.overlay.show(),f.validator.resetSubmit(),f.validator.refresh()},!0)}).done(function(){t.close()})})};p(),"function"==typeof this.fnOnOpen&&this.fnOnOpen()}},u}),define("skins/default/profile/action/action_menu",["static/log","config/main","mustache","lib/helpers/popup","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","skins/default/profile/action/link","skins/common/profile/sub_actions","skins/common/video/share","skins/common/profile/subscribe/btns_controler","text!./action_menu/link.mustache","text!./action_menu/action.mustache","text!./action_menu/double_action.mustache","text!./action_menu/label.mustache","text!./action_menu/separator.mustache","text!./action_menu/custom.mustache","text!./action_menu/sub_menu.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m){var b="/profiles/"+t.data.user.username+"/",v={unfriend:"profile.unfriend",block_user:"profile.block_user",unblock_user:"profile.unblock_user",report_user:"profile.report_user",add_friend_request:"profile.friends.add_to_friends",cancel_friend_request:"profile.cancel_friend_request",subscribe:"subscriptions.subscribe",unsubscribe:"subscriptions.unsubscribe",share:"misc.share"},y={unfriend:"icf-user-times",block_user:"icf-user-lock",unblock_user:"icf-unlock",report_user:"icf-flag",add_friend_request:"icf-user-plus",cancel_friend_request:"icf-close",subscribe:"icf-feed",unsubscribe:"icf-feed",share:"icf-share"},D={confirm_ignore_friend_request:{label:"confirm",icon:"icf-check",label2:"misc.ignore",icon2:"icf-close"},subscribe_reject:{label:"subscriptions.subscribe",icon:"icf-feed",label2:"misc.not_interested",icon2:"icf-close"},subscribe_cancel_reject:{label:"subscriptions.subscribe",icon:"icf-feed",label2:"misc.cancel_not_interested",icon2:"icf-close"}},C={link:c,action:f,double_action:h,label:p,separator:_,custom:g,sub_menu:f},w={subscribe:{sSuccessMessage:"Subscribe action complete",sErrorMessage:"Error while subscribing",actionMethod:l&&l.follow},unsubscribe:{sSuccessMessage:"Unsubscribe action complete",sErrorMessage:"Error while unsubscribing",actionMethod:l&&l.unfollow},reject:{sSuccessMessage:"Reject action complete",sErrorMessage:"Error while rejecting",actionMethod:l&&l.reject},cancel_reject:{sSuccessMessage:"Cancel reject action complete",sErrorMessage:"Error while canceling reject",actionMethod:l&&l.cancelReject}},S=function(){if(this.btnsControler=new u,this.oMenuConfig=t.data.contextualMenu,this.oPopup=null,this.aCallbacks={},"object"!=typeof this.oMenuConfig||"object"!=typeof this.oMenuConfig.items){e.error("Invalid menu configuration.");var i=$("#profile-action");return void(i.length&&i.remove())}this.init()};return S.prototype={init:function(){var e=$("#profile-action");if(0!==e.length&&(this.getMenuIcon(e),this.initializePopup(e),e.addClass("init-ok"),t.data.friends.askedByOwner)){var i=this;setTimeout(function(){i.oPopup.open()},300)}},getMenuIcon:function(e){var t=e.find(".menu-icon");"string"==typeof this.oMenuConfig.icon&&""!==this.oMenuConfig.icon.trim()&&(t.addClass(this.oMenuConfig.icon).removeClass("hidden"),this.oMenuConfig.iconAlert&&t.addClass("alert").removeClass("hidden"))},initializePopup:function(e){var t=this;this.oPopup=new n(e,"",{trigger:"click mouseclick",popup_class:"profile-action-popup",autoclose:!0,mouseout_autoclose:5e3,offset:{below:0,above:0,left:10,right:1}}),this.oPopup.iAllMenuId=xv.menus.addClose(function(){t.oPopup.close()}),this.setupPopupEvents(e)},setupPopupEvents:function(e){var t=this;this.oPopup.onOpen=function(){xv.menus.closeAll(t.oPopup.iAllMenuId),e.addClass("active"),t.oPopup.setContent(""),t.refreshMenuContent(),t.oPopup.position()},this.oPopup.onClose=function(){e.removeClass("active")}},getIconAndLabelForAction:function(e){var t={url:e.u||"",label:e.l||s.__(v[e.a]||""),icon:e.i||y[e.a]||"",icon2:e.i2||""};if(D[e.a]){var i=D[e.a];t.label=s.__(i.label||t.label),t.icon=i.icon||t.icon,t.label2=s.__(i.label2||""),t.icon2=i.icon2||t.icon2}return t},getTemplateForItem:function(e){return C[e.t]||""},buildMenuContent:function(t,n){e.debug("buildMenuContent called with items:",t);var s=this,o=n||$('<ul class="dropdown"></ul>');return(t||this.oMenuConfig.items).forEach(function(e){var t=s.getIconAndLabelForAction(e),n=s.getTemplateForItem(e);if(n){var a=$('<li class="'+e.t+'"></li>'),r=$(i.render(n,t));"custom"===e.t?s.handleCustom(r,e):"sub_menu"===e.t?s.handleSubMenu(r,e):e.a&&s.handleAction(r,e.a),a.append(r),o.append(a)}}),o},refreshMenuContent:function(e,t){this.oPopup.setContent(this.buildMenuContent(e,t))},startLoading:function(e){e.find(".btn-text").each(function(){var e=$(this);e.data("original-text",e.html()),e.html(o.getSafe().getHtml())})},stopLoading:function(e){e.find(".btn-text").each(function(){var e=$(this);e.data("original-text")&&(e.html(e.data("original-text")),e.removeData("original-text"))})},handleAction:function(e,t){var i={unfriend:this.handleUnfriendAction,cancel_friend_request:this.handleCancelFriendRequestAction,add_friend_request:this.handleAddFriendRequestAction,block_user:this.handleBlockUserAction,unblock_user:this.handleUnblockUserAction,report_user:this.handleReportUserAction,confirm_ignore_friend_request:this.handleConfirmIgnoreFriendRequestAction,subscribe:function(e){this.processSubscriptionElement(e,"subscribe")}.bind(this),unsubscribe:function(e){this.processSubscriptionElement(e,"unsubscribe")}.bind(this),subscribe_reject:function(e){this.executeDoubleSubscriptionAction(e,"subscribe","reject")}.bind(this),subscribe_cancel_reject:function(e){this.executeDoubleSubscriptionAction(e,"subscribe","cancel_reject")}.bind(this)};i[t]&&i[t].call(this,e)},handleCustom:function(e,t){var i={subscribe:this.initSubscribeButtons};i[t.a]&&i[t.a].call(this,e)},handleSubMenu:function(e,t){var i={share:this.initShareButtons};i[t.a]&&i[t.a].call(this,e)},createLinkAction:function(t,i,n,s,o,a){var l=new r(t,i,n,s,o);return l.addCustomPopClass("popup-darker"),l.onSuccess=function(){e.debug("%c "+a,"color: lightblue;"),window.setTimeout(function(){window.location.reload()},200)},l},handleUnfriendAction:function(e){var i=b+"friends/remove",n=s.__("profile.friends.confirm_unfriend",{"%user%":t.data.user.display});this.createLinkAction(e,i,n,!1,t.data.friends.csrf.unfriend,"Unfriend action complete")},handleCancelFriendRequestAction:function(e){var i=b+"friends/requests/cancel",n=s.__("profile.confirm_cancel_one",{"%username%":t.data.user.display});this.createLinkAction(e,i,n,!1,t.data.friends.csrf.cancelFriendRequest,"Cancel friend request action complete")},handleAddFriendRequestAction:function(e){var i=b+"friends/requests/ask";this.createLinkAction(e,i,!1,!0,t.data.friends.csrf.addFriendRequest,"Add friend request action complete")},handleBlockUserAction:function(e){var i=b+"block/add",n=s.__("profile.confirm_block",{"%user%":t.data.user.display});this.createLinkAction(e,i,n,!1,t.data.visitor.csrf.blockAdd,"Block user action complete")},handleUnblockUserAction:function(e){var i=b+"block/remove";this.createLinkAction(e,i,!1,!1,t.data.visitor.csrf.blockRemove,"Unblock user action complete")},handleReportUserAction:function(e){require(["skins/default/profile/action/report"],function(t){new t("profile",e,$("#page"))})},handleConfirmIgnoreFriendRequestAction:function(e){var i=e.find(".action-1"),n=e.find(".action-2"),s=b+"friends/requests/confirm",o=b+"friends/requests/ignore";this.createLinkAction(i,s,!1,!1,t.data.friends.csrf.confirmFriendRequest,"Confirm friend request action complete"),this.createLinkAction(n,o,!1,!1,t.data.friends.csrf.ignoreFriendRequest,"Ignore friend request action complete")},executeActionCallback:function(t,i,n,s,o,a){if("function"!=typeof t)return void e.error("Provided actionMethod is not a function");var r=this;t.bind(l)(i,n,function(t){e.debug("%c "+s,"color: lightblue;"),a&&a.length&&r.stopLoading(a),r.refreshMenuContent(),a&&"subscribe"===a.data("action")&&r.oPopup.close()}.bind(this),function(t){e.error(o,t),a&&a.length&&r.stopLoading(a),r.refreshMenuContent()}.bind(this))},executeSimpleSubscriptionAction:function(i,n){if(t.dyn.login_info.is_logged||this.checkSubscribeCsrfToken()){var o=this,r=this.getActionDetails(n);if(!r)return void e.error("Invalid action type: "+n);var l=t.data.user.username;if(!l)return void e.error("Username is not available.");i.on("click",function(){var e=function(){o.startLoading(i);var e=t.dyn.login_info.is_logged&&t.data.subscribers&&t.data.subscribers.csrf&&t.data.subscribers.csrf.subscribe?t.data.subscribers.csrf.subscribe:"";o.executeActionCallback(r.actionMethod,l,e,r.sSuccessMessage,r.sErrorMessage,i)}.bind(this);if("unsubscribe"===n){var d=s.__("subscriptions.confirm_subscribed");d?a.confirm(d,e,function(){}):e()}else if("cancel_reject"===n){var d=s.__("misc.confirm_cancel_not_interested");d?a.confirm(d,e,function(){}):e()}else e()}.bind(this))}},processSubscriptionElement:function(t,i){if(!t.length)return void e.error(i+" action element not found");t.hasClass("processed")?e.debug(i+" action already processed"):(t.addClass("processed").data("action",i),this.executeSimpleSubscriptionAction(t,i))},executeDoubleSubscriptionAction:function(t,i,n){var s=t.find(".action-1"),o=t.find(".action-2");if(!s.length||!o.length)return void e.error("Double action elements not found for actions: "+i+", "+n);this.processSubscriptionElement(s,i),this.processSubscriptionElement(o,n)},checkSubscribeCsrfToken:function(){return t.dyn.login_info.is_logged?t.data.subscribers&&t.data.subscribers.csrf&&t.data.subscribers.csrf.subscribe?(e.debug("%c Valid CSRF token","color: lightblue;"),
!0):(e.error("CSRF token is missing or invalid"),!1):(e.debug("User not logged in: bypassing CSRF token check for local subscription"),!0)},getActionDetails:function(e){return w[e]||null},getDisplayBtnNotInterested:function(){return t.dyn.premium&&t.dyn.login_info.is_logged&&t.dyn.login_info.has_member_area&&("object"==typeof t.data.user&&(t.data.user.model||t.data.user.channel)||"profiles_index"===t.data.action||"xnxx_channels_premium_regular"===t.data.action)},createSubscriptionMenu:function(i){if(!i)return void e.error("User information is missing");var n=i.is_follower,o=i.is_rejected,a=t.data.user.display,r=[];return n?r.unshift({t:"label",l:s.__("profile.you_subscribe_to",{"%username%":a})},{t:"action",a:"unsubscribe"}):this.getDisplayBtnNotInterested()?r.unshift({t:"double_action",a:o?"subscribe_cancel_reject":"subscribe_reject"}):r.unshift({t:"action",a:"subscribe"}),r},initSubscribeButtons:function(i){var n=this,s=t.data.user.id_user,o=t.data.user.username;if(this.aCallbacks[s]||(this.aCallbacks[s]={isCallbackAdded:!1,isUpdating:!1}),!this.aCallbacks[s].isCallbackAdded){var a=function(e){n.aCallbacks[s].isUpdating||(n.aCallbacks[s].isUpdating=!0,n.handleSubscribeUpdate(i,e),n.aCallbacks[s].isUpdating=!1)};l.addUserUpdateCallback(s,a),this.aCallbacks[s].isCallbackAdded=!0}l.loadSubInfoOneUser(o,function(t){e.debug("%c Success to load subscription info","color: lightblue;"),n.oData=t,n.handleSubscribeUpdate(i,t)},function(){e.error("Failed to load subscription info")})},handleSubscribeUpdate:function(t,i){var n=this.createSubscriptionMenu(i);e.debug("createSubscriptionMenu generated:",n),this.refreshMenuContent(n,t)},initShareButtons:function(e){var t=this;e.on("click",function(){var e=t.getPopupDropdown(),i=t.createShareContainer(e);e.find("ul.dropdown").hide(),i.show()})},getPopupDropdown:function(){return $(".profile-action-popup").find(".x-popup-content")},createShareContainer:function(e){if($(".share-buttons-container").length)return $(".share-buttons-container");var t=$('<div class="share-buttons-container" style="display:none;"></div>'),i=$('<button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>');i.on("click",function(){t.hide(),e.find("ul.dropdown").show()}),t.append(i);var n=window.location.href,s=document.title,o=d.getShareElem(n,s,"full");return t.append(o),this.oPopup.appendContent(t),t}},new S}),define("skins/default/profile/title_actions",["config/main","skins/default/profile/subscribe/btns_controler","./action/action_menu"],function(e,t){new t({uploader:{user_id:e.data.user.id_user,user_name:e.data.user.username,btn_class:"sub-strip"}})}),define("skins/common/video/lastviews",["static/log","config/main","static/cookies","skins/common/basic_feature"],function(e,t,i,n){var s=function(){};return s.prototype={storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},getLastViews:function(){var e=[],t=i.get("last_views");if(t){var n=JSON.parse(t);"object"==typeof n&&t.length&&(e=n)}return e},declareVideoView:function(e){if(!xv.disclaimer.bIsOpen&&n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)){var s=this.getLastViews(),o=[];for(var a in s)if(s.hasOwnProperty(a)&&s[a])if(s[a]!==e){if("string"==typeof s[a]&&"function"==typeof s[a].split){var r=s[a].split("-");if(r.length>1&&r[0]==e){console.log("Video "+e+" already registered ("+s[a]+"), removing");continue}}o.push(s[a])}else console.log("Video "+e+" already registered, removing");for(;o.length>70;)o.shift();o.push(e+"-"+t.dyn.gentime),i.setLocal("last_views",JSON.stringify(o),7776e6,"/",!0,"None"),console.log("Video "+e+" processed")}},mergeVideoViews:function(e){if(!xv.disclaimer.bIsOpen&&n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)){if("string"==typeof e)try{e=JSON.parse(e)}catch(o){return}if("object"==typeof e&&e.length){var t=this.mergeViews([],this.getLastViews());for(t=this.mergeViews(t,e),t.sort(function(e,t){return e.time-t.time});t.length>70;)t.shift();for(var s=0;s<t.length;s++)t[s]=t[s].id+(t[s].time>0?"-"+t[s].time:"");i.setLocal("last_views",JSON.stringify(t),7776e6,"/")}}},mergeViews:function(e,t){e:for(var i=0;i<t.length;i++)if(t.hasOwnProperty(i)&&t[i]){var n=null,s=0;if("number"==typeof t[i])n=t[i];else{if("string"!=typeof t[i]||"function"!=typeof t[i].split)return;var o=t[i].split("-");if(o.length<2)continue;n=parseInt(o[0]),s=parseInt(o[1])}if(!(n<=0||s<0)){for(var a=0;a<e.length;a++)if(e[a].id===n){e[a].time=Math.max(e[a].time,s);continue e}e.push({id:n,time:s})}}return e},getHistory:function(){var e=i.get("last_views");if(!e)return[];var t=JSON.parse(e);return t||[]},resetRelated:function(){},increaseNumberVideoView:function(){if(!xv.disclaimer.bIsOpen&&n.IS_ENABLED(n.S_F_COOKIES_FUNCTIONALITY)){var e=i.get("ucchecknb");e||(e=0),e++,i.setLocal("ucchecknb",e,432e5,"/")}}},new s}),define("skins/common/profile/last_channels_visited",["static/cookies"],function(e){var t=function(){};return t.prototype={set:function(t){if(t=parseInt(t),isNaN(t)||t<1)return!1;for(var i=e.get("freechvws")||"",n=i.split(","),s=[t],o=0;o<n.length&&5!==s.length;o++)iSavedIdChannel=parseInt(n[o]),iSavedIdChannel===t||isNaN(iSavedIdChannel)||iSavedIdChannel<1||s.push(iSavedIdChannel);e.setLocal("freechvws",s.join(","),2592e6,"/",!0,"None")},setFullCookie:function(t){e.setLocal("freechvws",t,2592e6,"/",!0,"None")}},new t}),define("skins/common/form/cross_site_login",["config/main","static/cookies","skins/common/video/lastviews","skins/common/profile/last_channels_visited"],function(e,t,i,n){e.dyn.is_premium&&!e.dyn.login_info.is_logged&&$.ajax({type:"POST",url:e.domains.slave+"/cross_site_cookies",dataType:"json",data:{l:t.get(e.dyn.dev?"session_token_dev":"session_token")},xhrFields:{withCredentials:!0},success:function(e){if(e.result){"string"==typeof e.last_views&&e.last_views.length>0&&i.mergeVideoViews(e.last_views);var s=e.session_token||e.session_token_dev;"string"==typeof s&&s.length>10&&(t.setLocal(e.session_token?"session_token":"session_token_dev",s,2592e6,"/",!0,"None"),$.post("/account/checklogin",function(e){if(e.result&&e.is_logged){if("straight"!==e.main_cat&&"/"===window.location.pathname&&(!window.location.search||-1===window.location.search.indexOf("k=")))return void(window.location.href="/"+e.main_cat+window.location.search);window.location.reload()}},"json")),"string"==typeof e.freechvws&&e.freechvws.length>0&&n.setFullCookie(e.freechvws)}}})}),define("lib/helpers/viewer/lightgallery-onepic",["libs/lightgallery.min"],function(){return"object"!=typeof xv&&(xv={}),"object"!=typeof xv.oLG&&(xv.oLG={}),"number"!=typeof xv.oLG.iGalIdCount&&(xv.oLG.iGalIdCount=0),function(e,t,i){require(["config/main","static/utils","lib/i18n!front","lib/helpers/viewer/lightgallery_css_loader","libs/lg-zoom.min","libs/lg-fullscreen.min","libs/lg-hash.min"],function(n,s,o,a){i=i||{},i.bBodyNoScroll===undefined&&(i.bBodyNoScroll=!1),i.bBodyNoScrollSticky===undefined&&(i.bBodyNoScrollSticky=!0),xv.oLG.iGalIdCount++;var r=$("body"),l=!1,d={selector:e,closeOnClick:!1,download:!1,fullScreen:!0,exThumbImage:"data-src",hash:"boolean"==typeof i.hash&&i.hash,galleryId:xv.oLG.iGalIdCount},u=i.$element===undefined?$(e):e===undefined?i.$element:i.$element.find(e);u.attr("data-src",t).addClass("lg-pic-opener"),u.parent().lightGallery(d).on("onBeforeOpen.lg",function(){a.loadCssLightgallery()}).on("onAfterOpen.lg",function(){a.loadCssLightgallery(),l=!0,i.bBodyNoScroll&&!i.bBodyNoScrollSticky?(r.addClass("no-scroll"),r.removeClass("no-scroll-sticky")):i.bBodyNoScrollSticky&&(r.addClass("no-scroll-sticky"),r.removeClass("no-scroll")),"string"==typeof i.title&&$("#lg-counter").prepend("<div>"+i.title+"</div>"),$("#lg-zoom-in").attr("title",s.unescape(o.__("misc.image_larger"))).append('<span class="icon-f icf-search-plus"></span>'),$("#lg-zoom-out").attr("title",s.unescape(o.__("misc.image_reduce"))).append('<span class="icon-f icf-search-minus"></span>'),$("#lg-actual-size").attr("title",s.unescape(o.__("misc.image_normal_size"))).append('<span class="icon-f icf-resolution"></span>'),$(".lg-close").attr("title",s.unescape(o.__("misc.close"))).append('<span class="icon-f icf-close"></span>'),$(".lg-fullscreen").attr("title",s.unescape(o.__("misc.fullscreen"))).append('<span class="icon-f icf-fullscreen"></span>'),$(".lg-prev").attr("title",s.unescape(o.__("misc.previous"))).append('<span class="icon-f icf-chevron-left"></span>'),$(".lg-next").attr("title",s.unescape(o.__("misc.next"))).append('<span class="icon-f icf-chevron-right"></span>'),$(".lg-item").each(function(){$(this).append('<span class="loader icon-f icf-spinner icf-anim-pulse"></span>')})}).on("onCloseAfter.lg",function(){l=!1,r.removeClass("no-scroll no-scroll-sticky")}).length>0&&document.addEventListener("fullscreenchange",function(){var e=$(".lg-fullscreen").find(".icon-f");e.hasClass("icf-fullscreen")?e.addClass("icf-fullscreen-back").removeClass("icf-fullscreen"):e.addClass("icf-fullscreen").removeClass("icf-fullscreen-back")})})}}),define("text!skins/default/profile/main_cats_switch.mustache",[],function(){return'<div class="profile-maincat-switch-cont">\n\t<button type="button" class="profile-maincat-switch btn btn-clear">\n\t\t<span class="profile-maincat-switch-label">{{#bMobileSmaller}}<span class="mobile-show-inline-block">{{{ sTxtSmaller}}}</span> <span class="mobile-hide">{{/bMobileSmaller}}{{{ sTxt }}}{{#bMobileSmaller}}</span>{{/bMobileSmaller}}</span> <span class="icon-f icf-caret-down"></span>\n\t</button>\n</div>'}),define("skins/default/profile/main_cats_switch",["config/main","mustache","static/utils","lib/i18n!front","lib/helpers/popup","text!skins/default/profile/main_cats_switch.mustache"],function(e,t,i,n,s,o){var a=function(e,t,i,n){this._init(e,t,i,n)};return a.S_POP_CLASS="profile-maincat-switch-pop",a.prototype={_init:function(i,n,r,l){if(this.$container=!(!i||!i.length)&&i,this.$switch=null,this.updateNbVideos(n),this.updateHash(r),this.bMobileSmaller=l,this.sConfig="",(!1!==e.data.main_cats||e.data.main_cats.length>=2)&&(this.sConfig="main_cat"),""!==this.sConfig){this.$switch=$(t.render(o,{sTxt:this.getSwitchLabel(),sTxtSmaller:this.getSwitchPicto(),bMobileSmaller:!!this.bMobileSmaller})),"string"!=typeof this.sUrlHash&&(this.sUrlHash="");var d="rtl"===$("html").prop("dir"),u=this;this.oPop=new s(!1,"",{relative_to:$("#page"),popup_class:a.S_POP_CLASS,trigger:!1,autoclose:!0,mouseout_autoclose:3e3,autoclose_on_same_level:"any_level",mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"],position:{v:"below",h:d?"left":"right"}}),this.oPop.onOpen=function(){u.oPop.setContent(u.getPopupContent())},this.initSwitch(),this.$container&&this.$container.prepend(this.$switch)}},updateNbVideos:function(e){this.oNbVideos=e},updateHash:function(e){this.sUrlHash=e},setSwitch:function(e){this.$switch=e,this.initSwitch()},initSwitch:function(){var e=this;this.$switch.off("click").on("click",function(){e.oPop.toggle()}).addClass("init-ok"),this.oPop.setButton("BUTTON"===this.$switch.prop("tagName")?this.$switch:this.$switch.children("button"))},getSwitch:function(){return this.$switch},getPopupContent:function(){var t="";if("main_cat"===this.sConfig)for(var i in e.data.main_cats_url){var n=e.data.main_cats_url[i],s="undefined"!=typeof e.dyn.main_cats[i]?e.dyn.main_cats[i]:{};t+='<a href="'+n+this.sUrlHash+'"'+(i===e.data.main_cat?' class="current"':"")+"><span>"+s.picto+"</span> "+s.name+("object"==typeof this.oNbVideos&&null!==this.oNbVideos&&"undefined"!=typeof this.oNbVideos[i]?" <small>("+parseInt(this.oNbVideos[i]).toLocaleString(e.dyn.locale)+")</small>":"")+"</a>"}return t},getSwitchLabel:function(){return n.__("profile.content_"+e.data.main_cat)},getSwitchPicto:function(){return"undefined"==typeof e.dyn.main_cats||"undefined"==typeof e.data.main_cat||"undefined"==typeof e.dyn.main_cats[e.data.main_cat]?"":e.dyn.main_cats[e.data.main_cat].picto}},a}),define("text!skins/default/profile/listing/video_tab.mustache",[],function(){return'<div{{#sContentBlockClass}} class="{{{ sContentBlockClass }}}"{{/sContentBlockClass}}></div>\n'}),define("text!skins/default/profile/listing/video_filters.mustache",[],function(){return'\n<div class="filters">\n\t{{#sTitle}}\n\t\t<span class="content-title mobile-hide">{{{ sTitle }}}</span>\n\t{{/sTitle}}\n\t{{#iContentFiltersLength}}\n\t\t<span class="content-filters">\n\t\t\t{{#aContentFilters}}\n\t\t\t\t{{^bIsHidden}}\n\t\t\t\t\t<span class="{{#bMobileInSelect}}{{#oActiveSortFilter}}mobile-hide{{/oActiveSortFilter}}{{/bMobileInSelect}} content-filter-k-{{{ sKey }}}">\n\t\t\t\t\t\t<button type="button" class="with-checkbox-toggle content-filter{{#bIsDisabled}} is-disabled{{/bIsDisabled}}" data-filter="{{{ sKey }}}"{{#bIsLockUnlock}} data-type="lock-unlock"{{/bIsLockUnlock}}>\n\t\t\t\t\t\t\t{{^bIsLockUnlock}}<span class="checkbox toggle no-label w-28"><input type="checkbox"{{#bIsChecked}} checked="checked"{{/bIsChecked}}{{#bIsDisabled}} disabled="disabled"{{/bIsDisabled}}/><label></label></span>{{/bIsLockUnlock}}\n\t\t\t\t\t\t\t{{#sIcf}}\n\t\t\t\t\t\t\t\t<span class="icon-f icf-{{#sUncheckIcf}}{{#bIsChecked}}{{{ sIcf }}}{{/bIsChecked}}{{^bIsChecked}}{{{ sUncheckIcf }}}{{/bIsChecked}}{{/sUncheckIcf}}{{^sUncheckIcf}}{{{ sIcf }}}{{/sUncheckIcf}}"></span>\n\t\t\t\t\t\t\t{{/sIcf}}\n\t\t\t\t\t\t\t<span class="label">{{#sUncheckDisplay}}{{#bIsChecked}}{{{ sDisplay }}}{{/bIsChecked}}{{^bIsChecked}}{{{ sUncheckDisplay }}}{{/bIsChecked}}{{/sUncheckDisplay}}{{^sUncheckDisplay}}{{{ sDisplay }}}{{/sUncheckDisplay}}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t{{/bIsHidden}}\n\t\t\t{{/aContentFilters}}\n\t\t</span>\n\t{{/iContentFiltersLength}}\n\n\t<div class="main-cat-filter"></div>\n\n\t{{#oActiveSortFilter}}\n\t\t<span class="sort-filter mobile-hide">\n\t\t\t({{#aSortFilters}}{{#fnSortFiltersIndex}} / {{/fnSortFiltersIndex}}<button type="button" data-sort="{{{ sKey }}}"{{#bIsSelected}} class="is-selected"{{/bIsSelected}}>{{{ sDisplay }}}</button>{{/aSortFilters}})\n\t\t</span>\n\t{{/oActiveSortFilter}}\n\n\t{{#oActiveSortFilter}}\n\t\t<div class="dropdown-filters-list content-filters">\n\t\t\t{{#aContentFilters}}\n\t\t\t\t{{^bIsHidden}}\n\t\t\t\t\t{{#bMobileInSelect}}\n\t\t\t\t\t\t<button type="button" class="with-checkbox-toggle content-filter" data-filter="{{{ sKey }}}">\n\t\t\t\t\t\t\t<span class="checkbox toggle no-label w-28"><input type="checkbox"{{#bIsChecked}} checked="checked"{{/bIsChecked}}/><label></label></span>\n\t\t\t\t\t\t\t{{#sIcf}}\n\t\t\t\t\t\t\t\t<span class="icon-f icf-{{{ sIcf }}}"></span>\n\t\t\t\t\t\t\t{{/sIcf}}\n\t\t\t\t\t\t\t<span class="label">{{{ sDisplay }}}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{{/bMobileInSelect}}\n\t\t\t\t{{/bIsHidden}}\n\t\t\t{{/aContentFilters}}\n\t\t</div>\n\t{{/oActiveSortFilter}}\n\n\t{{#bModelChannelFilter}}\n\t\t<div class="select-filter-list-desktop"></div>\n\t\t<div class="select-filter-list-mobile"></div>\n\t{{/bModelChannelFilter}}\n</div>'}),define("skins/default/profile/listing/videos_fjs",["static/log","config/main","mustache","static/thumbs","static/dom","static/storage","lib/tools","lib/i18n!front","lib/history","lib/helpers/inline_loader","lib/helpers/popup","skins/default/pagination","skins/common/dropdown/dropdown","text!./video_tab.mustache","text!./video_filters.mustache"],function(e,t,n,s,o,a,r,l,d,u,c,f,h,p,_){var g=null,m=null,b={bSavePremiumTabFiltersInLocalStorage:!0,sPremiumTabFiltersStorageKey:"premium_tab_filters",iExpirationTime:288e5,iModelChannelFilterSearchMin:5};t.dyn.login_info.is_logged||require(["skins/default/form/login"],function(e){g=e}),require(["skins/"+t.sitename+"/mozaique/thumb_block_common_init"],function(e){m=e});var v=function(e,i,s){if(e&&e.length){if(s="object"==typeof s?s:{},this.bAppendContentOnLoaded="boolean"==typeof s.bAppendContentOnLoaded&&s.bAppendContentOnLoaded,this.$container=e,this.$videosContainer=$(n.render(p,{sContentBlockClass:"string"==typeof s.sListingClass?s.sListingClass:"mozaique cust-nb-cols"})),this.bAppendContentOnLoaded||this.appendVideoContainer(),this.sContentUrlBase=i,this.aVideos=[],this.oVideos={},this.sCurrentSetPageId=null,this.sFirstStateLock=null,this.aLoadedVideosIds=[],this.oLoadedPages={},this.oOptions=b,this.oOptions.bSavePremiumTabFiltersInLocalStorage)try{if("object"==typeof window.localStorage){var o=window.localStorage,a="__storage_test__";o.setItem(a,a),o.removeItem(a)}else this.oOptions.bSavePremiumTabFiltersInLocalStorage=!1}catch(c){this.oOptions.bSavePremiumTabFiltersInLocalStorage=!1}this.iTotalVideos=0,this.iCurrentPage=null,this.oHistory="object"==typeof s.oHistory?s.oHistory:d,this.sHashBase="string"==typeof s.sHashBase?s.sHashBase:"_"+this.$container.attr("id"),this.oLoadUrlParams="object"==typeof s.oLoadUrlParams?s.oLoadUrlParams:null,this.fnCountTitle="function"==typeof s.fnCountTitle?s.fnCountTitle:null,this.sIsUploaderId="undefined"!=typeof s.sIsUploaderId?s.sIsUploaderId:null,this.oMainCatsNbVideos="object"==typeof s.oMainCatsNbVideos?s.oMainCatsNbVideos:null,this.bEmptyIfNoContentFilter="boolean"==typeof s.bEmptyIfNoContentFilter&&s.bEmptyIfNoContentFilter,this.bErrorIfNoContentFilter="boolean"==typeof s.bErrorIfNoContentFilter&&s.bErrorIfNoContentFilter,this.bEnableNoContentFilter="boolean"==typeof s.bEnableNoContentFilter&&s.bEnableNoContentFilter,this.bSaveContentFilter="boolean"==typeof s.bSaveContentFilter&&s.bSaveContentFilter,this.bGuestHideContentFilters="boolean"!=typeof s.bGuestHideContentFilters||s.bGuestHideContentFilters,this.aContentFilters="object"==typeof s.aContentFilters&&s.aContentFilters.length?s.aContentFilters:[],this.aSortFilters="object"==typeof s.aSortFilters&&s.aSortFilters.length?s.aSortFilters:[],this.bIsGuest=!t.dyn.login_info.is_logged,this.bHideContentFilters=this.bGuestHideContentFilters&&this.bIsGuest,this.fnOnLoaded="function"==typeof s.onLoaded?s.onLoaded:null,this.bCounterInMobileDropdown="boolean"!=typeof s.bCounterInMobileDropdown||s.bCounterInMobileDropdown,"string"==typeof s.sTplVideoFilters&&(_=s.sTplVideoFilters),this.bMainCatsSwitchInPopMobileFiltersOnly="boolean"==typeof s.bMainCatsSwitchInPopMobileFiltersOnly&&s.bMainCatsSwitchInPopMobileFiltersOnly,this.iCurrentModelChannelId=undefined,this.sCurrentSortDisplay="",this.initModelChannelFilterType();var r=this;if(this.savePage("no-content",[],!1,function(e,t,i){var n=$('<p class="no-content">'+l.__("misc.no_content_found")+"</p>");e.append(n)},null,null,!0),this.savePage("error-loading",[],!1,function(e,t,i){var n=$("<p class=\"no-content\"><span class='icon-f icf-warning'></span><span>"+l.__("misc.loading_failed")+"</span></p>"),s=$("<button class='btn btn-default'>"+l.__("misc.please_retry")+"</button>");s.on("click",function(e){e.preventDefault(),r.load(r.iCurrentPage,t)}),n.append(s),e.append(n)},null,null,!0),this.oEmptyIfNoContentLevels={},"object"==typeof s.oEmptyIfNoContent)for(var u in s.oEmptyIfNoContent)this.oEmptyIfNoContentLevels[u]=!1,function(){var e=s.oEmptyIfNoContent[u].sMessage||l.__("video.no_found"),t=s.oEmptyIfNoContent[u].sResetBtnTxt||l.__("search.reset_filters"),i=!!s.oEmptyIfNoContent[u].bResetFilersBtn;r.savePage("no-content-"+u,[],!1,function(n,s,o){var a=$('<p class="no-content"><span>'+e+"</span>"+(i?" ":"")+"</p>");if(i){var l=$("<button class='btn btn-default'>"+t+"</button>");l.on("click",function(e){e.preventDefault(),r.resetModelChannelFilter(!0),r.loadFilters(r.sHashBase)}),a.append(l)}n.append(a)},null,null,!0)}();this.fnCustomAppendNoVideoNoFiltersContent=null,"function"==typeof s.fnCustomAppendNoVideoNoFiltersContent&&(this.fnCustomAppendNoVideoNoFiltersContent=s.fnCustomAppendNoVideoNoFiltersContent)}};return v.S_HASH_SEP_FILTERS=",",v.S_HASH_SEP_CONTENT_FILTER="+",v.S_HASH_NO_CONTENT_FILTER="o",v.S_URL_SEP_FILTER="/",v.S_URL_SEP_CONTENT_FILTER="-",v.S_SEP_CONTENT_FILTERS="_",v.S_SET_PAGE_INEXISTING="i",v.S_SET_PAGE_ALREADY_SET="as",v.S_SET_PAGE_SUCCESS="s",v.MODEL_CHANNEL_FILTER={CHANNEL:"idUserModel",MODEL:"idUserChannel"},v.prototype={init:function(){this.initAvailableContentFilters(),this.initFilters(),this.loadFilters(),this.bEnableNoContentFilter||this.disableLastActiveContentFilter()},getVideoById:function(e){if(this.oVideos[e])return this.oVideos[e];for(var t=0;t<this.aVideos.length;t++){var i=this.aVideos[t];if(i.id===e||i.sId===e)return this.oVideos[e]=i,i}return!1},getVideosByIdList:function(t){for(var i=[],n=0;n<t.length;n++){var s=this.getVideoById(t[n]);s&&i.push(s)}return e.debug("%c getVideosByIdList","color: deeppink;",i),i},load:function(t,i){if(e.debug("%c\n\n load","color: deeppink;",t,i),!this.$container)return void e.warn("No container to load videos into.");var n=this.getLoadedPageId(t),s=this.$container.children(":visible").first();if(s&&s.length&&(o.isElementInView(s,!1)||r.scrollTo(s,40)),"undefined"!=typeof this.oLoadedPages[n]&&this.oLoadedPages[n].bKeepCache)return this.iCurrentPage=t,void this.setPage(n,i);this.setVideosContainerToLoading(!0);var a=this,l=this.getLoadUrl(t),d=this.getLoadData(),u=function(n){e.debug("%c fnErrorLoading loading data ("+l+")","color: deeppink;",n),a.iCurrentPage=t,a.setPage("error-loading",i)};$.post({url:l,data:d,dataType:"json",success:function(s){e.debug("%c loaded data ("+l+")","color: deeppink;",s),s.result?(a.iCurrentPage=t,s.posts&&"function"==typeof a.loadedPosts?a.loadedPosts(n,s,i):a.loaded(n,s,i)):u(s)},error:function(e,t,i){u(i)}})},setVideosContainerToLoading:function(e){"boolean"!=typeof e&&(e=!0),e?(this.$loader&&this.$loader.length||(this.$loader=$('<div class="load">'+u.getIcf()+"</div>")),this.$videosContainer.append(this.$loader)):"undefined"!=typeof this.$loader&&this.$loader.detach()},loaded:function(e,t,i){var n=[],s=this.makePagination(t.current_page,t.nb_per_page,t.nb_videos);if(t.nb_videos>0)for(var o in t.videos){var a=t.videos[o],r=a.id;if(n.push(r),this.oVideos[a.id]=a,-1===this.aLoadedVideosIds.indexOf(r))this.aVideos.push(a),this.aLoadedVideosIds.push(r);else for(var l in this.aVideos)this.aVideos[l].id===r&&(this.aVideos[l]=a)}this.savePage(e,n,s,null,t.nb_videos,t.current_page),this.setPage(e,i)},makePagination:function(e,t,i){var n=this;return f.createElementsBased(e,t,i,"",{pagin_click:function(e){""!==e&&n.load(e,!0)}})},getLoadData:function(){var e={};return"undefined"!=typeof t.data.main_cats&&t.data.main_cats.length>1&&"string"==typeof t.data.main_cat&&(e.main_cats=t.data.main_cats),this.sCurrentModelChannelFilterType&&this.iCurrentModelChannelId!==undefined&&(e[this.sCurrentModelChannelFilterType]=this.iCurrentModelChannelId),e},getActiveFiltersInUrlOrder:function(e,t){var n,s=!0,o=JSON.parse(JSON.stringify(this.aContentFilters)),a=[],r=[];e="string"==typeof e?e:"",t="string"==typeof t?t:"";var l=""===e&&""===t;if(l)for(i in this.oEmptyIfNoContentLevels)this.oEmptyIfNoContentLevels[i]=!0;o.sort(function(e,t){return"number"==typeof e.iUrlOrder?"number"==typeof t.iUrlOrder?e.iUrlOrder-t.iUrlOrder:-1:"number"==typeof t.iUrlOrder?1:0});for(i in o)n=o[i],n.bIsDisplayOnly||("lock-unlock"===n.sType?n.sChoice&&n.sChoice!==n.sDefaultChoice&&(s=!1,a.push(n.sChoice)):n.bIsChecked||this.bHideContentFilters&&n.bDefaultChecked?("string"==typeof n.sUncheckKey&&e===n.sUncheckKey?(a.push(n.sUncheckKey),n.bAlwaysInUrl&&r.push(n.sUncheckKey),n.bDefaultChecked&&(s=!1)):t!==n.sKey&&(a.push(n.sKey),n.bAlwaysInUrl&&r.push(n.sKey),n.bDefaultChecked||(s=!1)),l&&"number"==typeof n.iEmptyIfNoContentLevel&&(this.oEmptyIfNoContentLevels||(this.oEmptyIfNoContentLevels={}),this.oEmptyIfNoContentLevels[n.iEmptyIfNoContentLevel]=!1)):"string"==typeof e&&e===n.sKey?(a.push(n.sKey),n.bAlwaysInUrl&&r.push(n.sKey),n.bDefaultChecked||(s=!1)):"string"==typeof n.sUncheckKey?t!==n.sUncheckKey&&(a.push(n.sUncheckKey),n.bAlwaysInUrl&&r.push(n.sUncheckKey),n.bDefaultChecked&&(s=!1)):n.bDefaultChecked&&(s=!1));return{bAllDefaultContent:s,aFilters:a,aFiltersAlwaysInUrl:r}},getLoadUrl:function(i){var n,s=this.sContentUrlBase;if(this.sSortFilter&&this.aSortFilters.length)for(n in this.aSortFilters)this.aSortFilters[n].sKey!==this.sSortFilter||this.aSortFilters[n].bNotInLoadUrl||(s+=this.sSortFilter+v.S_URL_SEP_FILTER);if("undefined"!=typeof t.data.main_cats&&t.data.main_cats.length>1&&"string"==typeof t.data.main_cat&&(s+=t.data.main_cat+v.S_URL_SEP_FILTER),this.aContentFilters.length){var o=this.getActiveFiltersInUrlOrder();if(o.bAllDefaultContent)o.aFiltersAlwaysInUrl.length&&(s+=o.aFiltersAlwaysInUrl.join(v.S_URL_SEP_CONTENT_FILTER)+v.S_URL_SEP_FILTER);else{var a=!1;for(n in this.oEmptyIfNoContentLevels)if(this.oEmptyIfNoContentLevels[n]){s+="no-content-"+n+v.S_URL_SEP_FILTER,a=!0;break}a||(o.aFilters.length?s+=o.aFilters.join(v.S_URL_SEP_CONTENT_FILTER)+v.S_URL_SEP_FILTER:this.bEmptyIfNoContentFilter&&(s+="no-content"+v.S_URL_SEP_FILTER))}}if(s+=i||0,null!==this.oLoadUrlParams){var r=[];for(var l in this.oLoadUrlParams)r.push(l+"="+this.oLoadUrlParams[l]);r.length&&(s+="?"+r.join("&"))}return e.debug("%c getLoadUrl("+i+")","color: deeppink;",s),s},getLoadedPageId:function(t){var i=this.getLoadUrl(t);if(!i)return 0;for(var n in this.oEmptyIfNoContentLevels)if(-1!==i.indexOf(v.S_URL_SEP_FILTER+"no-content-"+n+v.S_URL_SEP_FILTER))return"no-content-"+n;return-1!==i.indexOf(v.S_URL_SEP_FILTER+"no-content"+v.S_URL_SEP_FILTER)?"no-content":(this.sCurrentModelChannelFilterType&&this.iCurrentModelChannelId!==undefined&&(i+=this.sCurrentModelChannelFilterType+"-"+this.iCurrentModelChannelId+"-"),e.debug("%c getLoadedPageId","color: deeppink;",i),i.substring(i.indexOf(this.sContentUrlBase)+this.sContentUrlBase.length))},savePage:function(t,i,n,s,o,a,r){e.debug("%c savePage","color: deeppink;",t,{aIds:i,pagination:n,fnCustomCallback:s,iTotalVideos:o,iCurrentPage:a,bKeepCache:r}),this.oLoadedPages[t]={sPageId:t,aIds:i,$pagination:n,iTotalVideos:"number"==typeof o?o:0,iCurrentPage:"number"==typeof a?a:null,fnCustomCallback:"function"==typeof s?s:null,bKeepCache:!!r}},getPage:function(e){return"undefined"==typeof this.oLoadedPages[e]?null:this.oLoadedPages[e]},setPage:function(e,t){this.setVideosContainerToLoading(!1);var i=this.getPage(e);return null===i?v.S_SET_PAGE_INEXISTING:this.sCurrentSetPageId===e?v.S_SET_PAGE_ALREADY_SET:(this.iTotalVideos=i.iTotalVideos,this.appendVideoContainer(),this.emptyPage(),this.updateFiltersHtml(),this.appendPageContent(i,t),t&&this.setCurrentHash(),this.sCurrentSetPageId=e,v.S_SET_PAGE_SUCCESS)},emptyPage:function(){this.$videosContainer.children().detach()},appendVideoContainer:function(){this.bVideoContainerAdded||(this.$container.append(this.$videosContainer),this.bVideoContainerAdded=!0)},appendPageContent:function(t,i,n){e.debug("%c appendPageContent","color: deeppink;",t,i),n="boolean"!=typeof n||n;var s=this.$videosContainer;if(null!==t.fnCustomCallback)t.fnCustomCallback(s,i,t);else{var o=this.getVideosByIdList(t.aIds);if(o.length){!this.$container.find(".content-filters").length&&this.aAvailableContentFilters.length&&this.$container.prepend($('<div class="content-filters"></div>')),this.appendPagination(t.$pagination,"top");for(var a=0;a<o.length;a++){var r=o[a];this.appendVideoToList(r,t.sPageId)}this.appendPagination(t.$pagination,"bottom"),f.add_all_in(this.$container),null!==m&&m.init_listing(s)}else if(this.aAvailableContentFilters.length){var d=$('<p class="no-content"><span>'+l.__("premium.no_match_current_filters")+"</span></p>"),u=$("<button class='btn btn-default'>"+l.__("search.reset_filters")+"</button>"),c=this;u.on("click",function(e){e.preventDefault(),c.loadFilters(c.sHashBase)}),d.append(u),s.append(d)}else this.appendNoVideoNoFiltersContent(s,i,t)}n&&this.fnOnLoaded&&"function"==typeof this.fnOnLoaded&&this.fnOnLoaded()},appendNoVideoNoFiltersContent:function(e,t,i){if("function"==typeof this.fnCustomAppendNoVideoNoFiltersContent)return void this.fnCustomAppendNoVideoNoFiltersContent(e,t,i);var n=$('<p class="no-content">'+l.__("video.no_found")+" </p>");e.append(n)},setAppendNoVideoNoFiltersContent:function(e){this.fnCustomAppendNoVideoNoFiltersContent=e},appendPagination:function(t,i){e.debug("%c appendPagination","color: deeppink;",t,i),t&&("top"===i?this.$videosContainer.prepend(t.clone(!0)):this.$videosContainer.append(t.clone(!0)))},appendVideoToList:function(e,t){this.$videosContainer.append(s.get_thumb_block_html(e,"video",{show_upload_diff:"new"===this.getCurrentSortFilter()}).html)},loadFilters:function(t){e.debug("%c loadFilters --- getHashFilters","color: deeppink;",t);var i=this.getHashFilters(t);this.setFiltersByHash(t),this.load(i.iPage)},setFiltersByHash:function(i){e.debug("%c setFiltersByHash getHashFilters","color: deeppink;",i);var n,s,o=this.getHashFilters(i),a=t.data.user.id_user;if("string"==typeof o.sSort&&-1!==this.aAvailableSortFilters.indexOf(o.sSort)){this.sSortFilter=o.sSort;for(s in this.aSortFilters)if(this.aSortFilters[s].sKey===this.sSortFilter){this.sCurrentSortDisplay=this.aSortFilters[s].sDisplay;break}}if(!o.bFiltersFromHash){var r=this.loadContentFiltersFromLocalStorage(a);r&&(o.oContentFilters=r.content_filters)}for(s in this.aContentFilters)n=this.aContentFilters[s],"lock-unlock"!==n.sType&&(n.bIsChecked=!1);for(var l in o.oContentFilters)for(s in this.aContentFilters)if(n=this.aContentFilters[s],"lock-unlock"===n.sType)for(var d in n.aChoices)n.aChoices[d].sKey===o.oContentFilters[l]&&(n.sChoice=n.aChoices[d].sKey,n.sIcf=n.aChoices[d].sIcf,n.sDisplay=n.aChoices[d].sDisplay,n.fnDisplay=n.aChoices[d].fnDisplay);else n.sKey===l&&(n.bIsChecked=o.oContentFilters[l])},loadWithNewFilters:function(){e.debug("%c loadWithNewFilters","color: deeppink;"),this.load(0,!0)},setHash:function(t,i,n){e.debug("%c setHash","color: deeppink;",t,i,n);var s=this.makeHash(t,i);this.oHistory.setUrlHash(s,!!n&&n+1)},setCurrentHash:function(){e.debug("%c setCurrentHash","color: deeppink;");var t=[];for(var i in this.aContentFilters){var n=this.aContentFilters[i];"lock-unlock"===n.sType?!n.sChoice||n.sDefaultChoice&&n.sChoice===n.sDefaultChoice||t.push(n.sChoice):n.bIsChecked?t.push(n.sKey):n.sUncheckKey&&t.push(n.sUncheckKey)}this.setHash(this.sSortFilter,t,this.iCurrentPage)},makeHash:function(t,n){e.debug("%c\t makeHash","color: lightpink;font-size:0.9em;",t,n);var s=this.sHashBase,o=!0;for(i in this.aContentFilters){var a=this.aContentFilters[i];"lock-unlock"===a.sType?a.sDefaultChoice?a.sDefaultChoice&&a.sChoice&&a.sChoice!==a.sDefaultChoice&&-1!==n.indexOf(a.sChoice)&&(o=!1):a.sChoice&&-1!==n.indexOf(a.sChoice)&&(o=!1):(a.bDefaultChecked&&-1===n.indexOf(a.sKey)||!a.bDefaultChecked&&-1!==n.indexOf(a.sKey))&&(o=!1)}return o&&this.aSortFilters.length&&t===this.aSortFilters[0].sKey?s:s+=v.S_HASH_SEP_FILTERS+this.makeSubTabHashFilters(t,n)},makeSubTabHashFilters:function(t,n){e.debug("%c\t  makeSubTabHashFilters","color: lightpink;font-size:0.9em;",t,n);var s=!0;if(n)for(i in this.aContentFilters){var o=this.aContentFilters[i];if("lock-unlock"===o.sType&&o.sDefaultChoice){var a=n.indexOf(o.sDefaultChoice);-1!==a?n.splice(a,1):s=!1}else(o.bDefaultChecked&&-1===n.indexOf(o.sKey)||!o.bDefaultChecked&&-1!==n.indexOf(o.sKey))&&(s=!1)}else n=[];return sSubTabHash=n.length||s?n.join(v.S_HASH_SEP_CONTENT_FILTER):v.S_HASH_NO_CONTENT_FILTER,t&&t.length&&(sSubTabHash.length&&(sSubTabHash+=v.S_HASH_SEP_FILTERS),sSubTabHash+=t),sSubTabHash},getHashFilters:function(t){var i={iPage:this.oHistory?(this.oHistory.getPaginHash(t)||1)-1:0,oContentFilters:{},sSort:this.aSortFilters&&this.aSortFilters.length?this.aSortFilters[0].sKey:null};i.iPage="number"!=typeof i.iPage||i.iPage<1?0:i.iPage,t=this.oHistory?this.oHistory.getHash(t):"";var n=[],s="",o=!t||t===this.sHashBase;if(!o){var a=new RegExp(this.sHashBase+v.S_HASH_SEP_FILTERS+"([^"+v.S_HASH_SEP_FILTERS+"]+)"+v.S_HASH_SEP_FILTERS+"([^"+v.S_HASH_SEP_FILTERS+"]+)"),r=t.match(a);if(r&&3===r.length)n=r[1].split(v.S_HASH_SEP_CONTENT_FILTER),s=r[2];else{var l=new RegExp(this.sHashBase+v.S_HASH_SEP_FILTERS+"([^"+v.S_HASH_SEP_FILTERS+"]+)"),d=t.match(l);d&&2===d.length&&(this.aAvailableSortFilters.length?s=d[1]:n=d[1].split(v.S_HASH_SEP_CONTENT_FILTER))}}
i.bFiltersFromHash=n.length>0;for(var u in this.aContentFilters){var c=this.aContentFilters[u],f=c.sKey;if("lock-unlock"===c.sType){if(c.sDefaultChoice&&(i.oContentFilters[f]=c.sDefaultChoice),!o)for(var h in c.aChoices){var p=c.aChoices[h];-1!==n.indexOf(p.sKey)&&(i.oContentFilters[f]=p.sKey)}}else i.oContentFilters[f]=o||c.bIsDisabled?c.bDefaultChecked:-1!==n.indexOf(f)}if(o&&this.aAvailableSortFilters&&this.aAvailableSortFilters.length){var _="string"==typeof this.sSavedSortFilter&&-1!==this.aAvailableSortFilters.indexOf(this.sSavedSortFilter)?this.aAvailableSortFilters.indexOf(this.sSavedSortFilter):0;i.sSort=this.aAvailableSortFilters[_]}else s.length&&this.aAvailableSortFilters&&-1!==this.aAvailableSortFilters.indexOf(s)&&(i.sSort=s);return e.debug("%c getHashFilters","color: deeppink;",t," => ",i),i},resetHash:function(){e.debug("%c resetHash","color: deeppink;");var t=this.aSortFilters&&this.aSortFilters.length?this.aSortFilters[0].sKey:null,i=[];for(var n in this.aContentFilters){var s=this.aContentFilters[n];"lock-unlock"===s.sType?s.sDefaultChoice&&i.push(s.sDefaultChoice):s.bDefaultChecked&&i.push(s.sKey)}this.iCurrentPage=0,this.setHash(t,i,this.iCurrentPage)},initAvailableContentFilters:function(){this.aAvailableContentFilters=[];for(var t in this.aContentFilters){var i=this.aContentFilters[t];if("lock-unlock"===i.sType)for(var n in i.aChoices){var s=i.aChoices[n];i.sDefaultChoice&&s.sKey===i.sDefaultChoice||this.aAvailableContentFilters.push(s.sKey)}else this.aAvailableContentFilters.push(i.sKey)}e.debug("%c initAvailableContentFilters","color: deeppink;",this.aAvailableContentFilters)},initFilters:function(){var e,t,i,s=this,o=0,r={sContentFiltersLabel:l.__("fav.filter_lists")+" :",sTitle:"function"==typeof this.fnCountTitle?this.fnCountTitle():"",fnSortFiltersIndex:function(){return o++}},d=null;for(e in this.aContentFilters)if(i=this.aContentFilters[e],"lock-unlock"===i.sType){i.bIsLockUnlock=!0;for(t in i.aChoices){var u=i.aChoices[t];u.bIsSelected=i.sChoice===u.sKey}}else"undefined"==typeof i.bIsChecked&&(i.bIsChecked=!!i.bDefaultChecked),"boolean"!=typeof i.bMobileInSelect&&(i.bMobileInSelect=!1);var c=JSON.parse(JSON.stringify(this.aContentFilters));c.sort(function(e,t){return"number"==typeof e.iDisplayOrder?"number"==typeof t.iDisplayOrder?e.iDisplayOrder-t.iDisplayOrder:-1:"number"==typeof t.iDisplayOrder?1:0});for(e in c)"function"==typeof c.fnDisplay&&(c.sDisplay=c.fnDisplay());if(r.aContentFilters=c,r.iContentFiltersLength=this.bHideContentFilters?0:c.length,this.aSortFilters&&this.aSortFilters.length){this.sSortFilter=null,this.aAvailableSortFilters=[];for(e in this.aSortFilters)this.aAvailableSortFilters.push(this.aSortFilters[e].sKey);this.sSavedSortFilter=a.get(this.aAvailableSortFilters.join("-"),"list_sort_filter");var f="string"==typeof this.sSavedSortFilter&&-1!==this.aAvailableSortFilters.indexOf(this.sSavedSortFilter)?this.aAvailableSortFilters.indexOf(this.sSavedSortFilter):0;d=this.aSortFilters[f],this.sSortFilter=this.aSortFilters[f].sKey,this.sCurrentSortDisplay=this.aSortFilters[f].sDisplay,this.aSortFilters[f].bIsSelected=!0}r.aSortFilters=this.aSortFilters,r.oActiveSortFilter=d,r.bCounterInMobileDropdown=this.bCounterInMobileDropdown,r.bModelChannelFilter=!!this.sCurrentModelChannelFilterType,this.$filters=$(n.render(_,r)),this.appendFilters(),this.$contentTitle=this.$filters.find(".content-title"),this.$contentFilters=this.$filters.find("[data-filter]"),this.$contentFilterDropdowns=this.$filters.find("[data-dropdown-filter]"),this.$sortFilters=this.$filters.find("[data-sort]"),this.$mobileDropDownFilters=this.$filters.children(".dropdown-filters-list"),this.$mobileDropDownFilters.length||(this.$mobileDropDownFilters=this.$filters.filter(".dropdown-filters-list")),this.$contentFilters.on("click",function(e){e.preventDefault(),s.toggleContentFilter($(this).data("filter"))}),this.$sortFilters.on("click",function(e){e.preventDefault(),s.filterSort($(this).data("sort"))}),this.oHistory&&this.oHistory.registerAllHashesExcept("%allHash-videos-fjs%"+this.sHashBase,function(e,t){e!==s.sHashBase&&e.substring(0,s.sHashBase.length+v.S_HASH_SEP_FILTERS.length)!==s.sHashBase+v.S_HASH_SEP_FILTERS||s.loadFilters()});var h=0;for(sMainCat in this.oMainCatsNbVideos)this.oMainCatsNbVideos[sMainCat]>0&&h++;h>1&&require(["skins/default/profile/main_cats_switch"],function(e){s.oMainCatsSwitch=new e(!s.bMainCatsSwitchInPopMobileFiltersOnly&&this.$filters.find(".main-cat-filter"),s.oMainCatsNbVideos,"#"+s.sHashBase,!0,null),s.updateFiltersHtml()}),this.initFilterSelectors(),this.updateFiltersHtml()},mixArrayValuesCombinations:function(e,t){"string"!=typeof t&&(t=v.S_HASH_SEP_CONTENT_FILTER);var i=function(e,n,s){return e||n&&n.length?(n&&n.length?(i(e+(e.length?t:"")+n[0],n.slice(1),s),i(e,n.slice(1),s)):s.push(e),s):s};return i("",e,[])},appendFilters:function(){this.$container.prepend(this.$filters)},updateFiltersHtml:function(){e.debug("%c updateFiltersHtml","color: deeppink;",this.aContentFilters,this.sSortFilter);var t,i,n=[],s=[];if(this.$contentTitle&&this.$contentTitle.length){var o="function"==typeof this.fnCountTitle&&this.fnCountTitle();"string"==typeof o&&o.length?this.$contentTitle.html(o).addClass("has-title"):this.$contentTitle.empty().removeClass("has-title")}for(i in this.aContentFilters){t=this.aContentFilters[i];var a=t.sKey;if("lock-unlock"===t.sType){var r=null,l=null,d=this.$contentFilters.filter('[data-filter="'+a+'"]'),u=[],c=[];for(var f in t.aChoices){var h=t.aChoices[f];h.sKey===t.sChoice?(r="function"==typeof h.fnDisplay?h.fnDisplay():h.sDisplay,l=h.sIcf,"string"==typeof h.sChoiceClass&&c.push(h.sChoiceClass),"string"==typeof h.sChoiceMozClass&&s.push(h.sChoiceMozClass)):("string"==typeof h.sChoiceClass&&u.push(h.sChoiceClass),"string"==typeof h.sChoiceMozClass&&n.push(h.sChoiceMozClass))}d.removeClass(u.join(" ")).addClass(c.join(" ")),d.find(".icon-f").removeClass().addClass("icon-f icf-"+l),d.find(".label").html(r)}else{var p=this.$contentFilters.filter('[data-filter="'+a+'"]');p.find("input").prop("checked",t.bIsChecked),"function"==typeof t.fnDisplay?p.find(".label").html(t.fnDisplay()):t.sUncheckDisplay&&p.find(".label").html(t.bIsChecked?t.sDisplay:t.sUncheckDisplay),t.sUncheckIcf&&p.find(".icon-f").removeClass().addClass("icon-f icf-"+(t.bIsChecked?t.sIcf:t.sUncheckIcf))}}if(this.$videosContainer&&this.$videosContainer.removeClass(n.join(" ")).addClass(s.join(" ")),this.oMainCatsSwitch){var _=[];for(i in this.aContentFilters)t=this.aContentFilters[i],"lock-unlock"===t.sType?!t.sChoice||t.sDefaultChoice&&t.sChoice===t.sDefaultChoice||_.push(t.sChoice):t.bIsChecked&&_.push(t.sKey);if(this.oMainCatsSwitch.updateHash("#"+this.makeHash(this.sSortFilter,_)),this.bMainCatsSwitchInPopMobileFiltersOnly&&this.$mobileDropDownFilters.length){this.$mobileDropDownFilters.find(".main-cat-switch-link").detach();var g=$(this.oMainCatsSwitch.getPopupContent());g=g.filter("a").length?g.filter("a"):g.find("a"),g.length&&(g.addClass("main-cat-switch-link"),g.first().addClass("main-cat-switch-link-first"),this.$mobileDropDownFilters.append(g))}}this.$sortFilters.removeClass("is-selected").filter('[data-sort="'+this.sSortFilter+'"]').addClass("is-selected")},displayContentFilterAlert:function(e,t,i){var n=this.$contentFilters.filter('[data-filter="'+e+'"]').first();if(n&&n.length){if(n.hasClass("with-checkbox-toggle")){var s=n.find(".checkbox label:visible").first();s.length&&(n=s)}var o=$(window).outerWidth()/2-(n.offset().left+n.outerWidth())>0,a=new c(n,$("<div>"+t+"</div>"),{relative_to:$("body"),autoclose:"boolean"==typeof i&&!i||2e3,closebtn:"boolean"==typeof i&&!i,position:{v:"below",h:o?"left":"right"},mouseout_autoclose_openevents:["click","mouseover_btn_timer","no_event"],trigger_prevent_default:!1});if(a.onClose=function(){a.delete_pop()},a.open(),null!==g){var r=a.getPopup();if(r&&r.length){var l=a.getPopup().find('.login-link[data-mode="signin"]');l.length&&g.setupLinks(l)}}return a}},disableLastActiveContentFilter:function(){var e=0,t=null;for(var i in this.aContentFilters)this.aContentFilters[i].bIsChecked&&(e++,t=this.aContentFilters[i].sKey);var n=this.$container.find(".filter-lock");if(n.length&&(n.removeClass("filter-lock"),n.find("button input").prop("disabled",!1)),1===e){var s=this.$container.find(".content-filter-k-"+t);s.length&&(s.addClass("filter-lock"),s.find("button input").prop("disabled",!0))}},toggleContentFiltersToMaxContentAvailable:function(){for(var e in this.aContentFilters){var t=this.aContentFilters[e];"lock-unlock"===t.sKey?t.sChoice=t.sDefaultChoice:"uploadsonly"===t.sKey?t.bIsChecked=!1:t.bIsChecked=!0}this.bEnableNoContentFilter||this.disableLastActiveContentFilter()},toggleContentFilter:function(i,n,s,o){e.debug("%c toggleContentFilter","color: deeppink;",i,n);var a,r=null,d=t.data.user.id_user,u={};o=void 0!==o;for(a in this.aContentFilters)this.aContentFilters[a].sKey===i?r=this.aContentFilters[a]:o&&(this.aContentFilters[a].bIsChecked=!1);if(null!==r){if(r.bIsDisabled)return void("string"==typeof r.sDisabledAlert&&this.displayContentFilterAlert(i,r.sDisabledAlert,"boolean"==typeof r.bDisabledAlertAutoCloseTimer?r.bDisabledAlertAutoCloseTimer:null));if("lock-unlock"===r.sType){var c;for(a=0;a<r.aChoices.length;a++)r.aChoices[a].sKey===r.sChoice&&(c="undefined"!=typeof r.aChoices[a+1]?r.aChoices[a+1]:r.aChoices[0]);r.sChoice=c.sKey,r.sIcf=c.sIcf,r.sDisplay=c.sDisplay,this.displayContentFilterAlert(i,c.sChoiceAlert,"boolean"==typeof r.bChoiceAlertAutoCloseTimer?r.bChoiceAlertAutoCloseTimer:null)}else r.bIsChecked="boolean"==typeof n?n:!r.bIsChecked,r.bIsChecked&&"string"==typeof r.sCheckAlert?this.displayContentFilterAlert(i,r.sCheckAlert,"boolean"==typeof r.bCheckAlertAutoCloseTimer?r.bCheckAlertAutoCloseTimer:null):r.bIsChecked||"string"!=typeof r.sUncheckAlert||this.displayContentFilterAlert(i,r.sUncheckAlert,"boolean"==typeof r.bUncheckAlertAutoCloseTimer?r.bUncheckAlertAutoCloseTimer:null);this.bEnableNoContentFilter||this.disableLastActiveContentFilter(),this.bErrorIfNoContentFilter&&(this.hasEnabledContentFilter()?this.oCurrentFilterAlert&&this.oCurrentFilterAlert.close():(this.oCurrentFilterAlert=this.displayContentFilterAlert(i,l.__("global_feed.no_content_filter"),!0),s=!0,this.updateFiltersHtml())),s||this.loadWithNewFilters();for(a in this.aContentFilters)"lock-unlock"===this.aContentFilters[a].sKey?u[this.aContentFilters[a].sKey]=this.aContentFilters[a].sChoice:u[this.aContentFilters[a].sKey]=this.aContentFilters[a].bIsChecked;this.saveContentFiltersToLocalStorage(u,d)}},hasEnabledContentFilter:function(){for(i in this.aContentFilters)if(!0===this.aContentFilters[i].bIsChecked)return!0;return!1},saveContentFiltersToLocalStorage:function(t,i){if(this.oOptions.bSavePremiumTabFiltersInLocalStorage)try{var n=JSON.parse(localStorage.getItem(this.oOptions.sPremiumTabFiltersStorageKey))||{},s=Date.now(),o={last_save:s.toString(),content_filters:t};n[i]=o,localStorage.setItem(this.oOptions.sPremiumTabFiltersStorageKey,JSON.stringify(n))}catch(a){e.debug(a)}},loadContentFiltersFromLocalStorage:function(e){try{var t=JSON.parse(localStorage.getItem(this.oOptions.sPremiumTabFiltersStorageKey)),i=this.oOptions.iExpirationTime,n=Date.now();if("object"==typeof t&&null!==t){var s=!1;for(var o in t)if(t.hasOwnProperty(o)){var a=t[o].last_save;n-a>i&&(delete t[o],s=!0)}if(s&&localStorage.setItem(this.oOptions.sPremiumTabFiltersStorageKey,JSON.stringify(t)),t[e]!==undefined)return t[e]}}catch(r){}return null},filterSort:function(t){if(e.debug("%c filterSort","color: deeppink;",t),this.sSortFilter!==t){this.sSortFilter=t;for(i in this.aSortFilters)if(this.aSortFilters[i].sKey===this.sSortFilter){this.sCurrentSortDisplay=this.aSortFilters[i].sDisplay;break}this.sSavedSortFilter=t,a.set(this.aAvailableSortFilters.join("-"),t,"list_sort_filter"),this.loadWithNewFilters()}},getCurrentSortFilter:function(){return this.sSortFilter},getCombinedContentFilters:function(t){e.debug("%c getCombinedContentFilters ","color: deeppink;",t);var i,n;for(i in this.aContentFilters){var s=this.aContentFilters[i];s.bUnwantedForUploadsOnly&&-1!==(n=t.indexOf(s.sKey))&&t.splice(n,1),"string"==typeof s.sKeyForUploadsOnly&&-1!==(n=t.indexOf(s.sKey))&&t.splice(n,1,s.sKeyForUploadsOnly)}var o="";for(i in t)o+=(o.length?v.S_SEP_CONTENT_FILTERS:"")+t[i];return o=o.replace("sub_membership_ppv","premium")},getSortFiltersKeysMap:function(){return this.aSortFilters.reduce(function(e,t){return e[t.sKey]=t,e},{})},initFilterSelectors:function(){e.info_("%c initFilterSelectors ","color: hotpink;"),this.initDesktopFilterSelector({bSort:!1,bModelChannel:!0}),this.initMobileFilterSelector({bSort:!0,bModelChannel:!0}),this.updateModelChannelResetOption(),this.updateFilterSelectorsLabel()},initDesktopFilterSelector:function(t){e.info_("%c initDesktopFilterSelector ","color: hotpink;",t),t.$container=this.getDesktopFilterSelectorContainer(),this.oDesktopFilterSelector=this.makeOneFilterSelector(t)},initMobileFilterSelector:function(t){e.info_("%c initMobileFilterSelector ","color: hotpink;",t),t.$container=this.getMobileFilterSelectorContainer(),this.oMobileFilterSelector=this.makeOneFilterSelector(t)},makeOneFilterSelector:function(t){if(!t)return e.info_("%c makeOneFilterSelector --- RETURN","color: hotpink;","!oOptions"),undefined;if(!t.$container)return e.info_("%c makeOneFilterSelector --- RETURN","color: hotpink;","!oOptions.$container",t.$container),undefined;e.info_("%c makeOneFilterSelector ","color: hotpink;",t);var i=t.bSort,n=!1,s=!1;if(t.bModelChannel){var o=this.getModelChannelFiltersOptions();o.length&&(n=!0,o.length>=this.oOptions.iModelChannelFilterSearchMin&&(s=!0))}if(!i&&!n)return undefined;var a={iSort:undefined,iModelChannel:undefined},r=[],l=10;if(i&&(a.iSort=r.length,r.push(this.getSortKeyValues())),n){var d=!!r.length;a.iModelChannel=r.length,r.push(this.getModelChannelKeyValues(d)),d&&l--}return{oDropdown:this.makeFilterSelectorDropDown({$container:t.$container,aKeyValuesLists:r,bHasSearch:s,iNbMaxDisplayedOptions:l}),oKeyValuesListsIndex:a}},makeFilterSelectorDropDown:function(t){var i=this;return e.info_("%c makeFilterSelectorDropDown ","color: hotpink;",t),new h({oOptions:{$container:t.$container,sSkin:h.SKIN.DEFAULT,bStyleLeft:!0,aKeyValuesLists:t.aKeyValuesLists,iNbMaxDisplayedOptions:t.iNbMaxDisplayedOptions,oDefaultOption:{key:"fake",value:"---"},bEnableSearch:t.bHasSearch,bAutoToggleSearch:t.bHasSearch,sSearchPlaceholder:t.bHasSearch?this.getModelChannelSearchLabel():null,sAlwaysIcon:!1},oListeners:{fnOnSelectItem:function(t,n){if(e.info_("%c makeFilterSelectorDropDown --- fnOnSelectItem","color: hotpink;",n),"all"===n)return i.setFilterSelectorsModelChannelOption(n),void i.resetModelChannelFilter();i.getSortFiltersKeysMap()[n]?(i.filterSort(n),i.setFilterSelectorsSortOption(n)):(i.setFiltersByHash(i.sHashBase),i.toggleModelChannelSelector(n),i.setFilterSelectorsModelChannelOption(n),i.updateModelChannelResetOption()),i.updateFilterSelectorsLabel()}}})},getDesktopFilterSelectorContainer:function(){e.error("getDesktopFilterSelectorContainer: Not implemented")},getMobileFilterSelectorContainer:function(){e.error("getMobileFilterSelectorContainer: Not implemented")},getModelChannelKeyValues:function(e){var t=this.getModelChannelFiltersOptions();return h.buildKeyValuesInfo(t,e?"modelchannel":undefined,e?this.getModelChannelSepLabel():undefined,undefined,t.length>0)},getSortKeyValues:function(){return h.buildKeyValuesInfo(this.getSortFiltersOptions(),undefined,undefined,undefined,!1)},getModelChannelFiltersOptions:function(){var e=this,t=this.getModelChannelInfos(),i=t.map(function(t){return h.buildOption(t.idUser,e.getModelChannelDisplay(t),e.getModelSexIcon(t))});if(i.length>0){i=[h.buildOption("all",l.__("profile.show_all_videos"),"icf-rotate-left",!0,undefined,undefined,undefined,"x-dropdown-reset-modelchannel-filter-option",undefined,!0)].concat(i)}return i},getSortFiltersOptions:function(){var e=this,t=Object.values(this.aSortFilters).map(function(t){return h.buildOption(t.sKey,t.sDisplay,"icf-swap",undefined,undefined,undefined,undefined,undefined,e.getCurrentSortFilter()===t.sKey)});return t=t.sort(function(e,t){return t.selected?1:-1})},getModelChannelDisplay:function(e){var t=e.fNbVideos>1?l.__("misc.videos"):l.__("misc.video"),i="("+e.fNbVideos+" "+t+")";return e.displayName+" "+i},getModelSexIcon:function(e){if(e)return this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.MODEL?"icf-device-tv-v2":"Man"===e.gender?"icf-sexe-man-v2":"icf-sexe-woman-v2"},getModelChannelInfos:function(){if(this.aModelChannelInfos)return this.aModelChannelInfos;var i=[],n=$("#tab-videos").hasClass("active"),s=$("#tab-posts,#tab-videos-red").hasClass("active");return!0===n&&t.data.workedForFree?(e.debug("%c ModelChannelInfos","color: hotpink;","workedForFree"),i=t.data.workedForFree):!0===s&&t.data.workedForPaid?(e.debug("%c ModelChannelInfos","color: hotpink;","workedForPaid"),i=t.data.workedForPaid):e.error("%c ModelChannelInfos","color: red;","No known tab selected"),this.aModelChannelInfos=i,this.oModelChannelInfos=this.aModelChannelInfos.reduce(function(e,t){return e[t.idUser]=t,e},{}),this.aModelChannelInfos},getModelChannelInfosOrder:function(){if(this.aModelChannelInfosOrder)return this.aModelChannelInfosOrder;this.aModelChannelInfosOrder=[];var e=this;return this.getModelChannelInfos().map(function(t){e.aModelChannelInfosOrder.push(t.idUser)}),this.aModelChannelInfosOrder},initModelChannelFilterType:function(){this.sCurrentModelChannelFilterType=t.data.user.model?v.MODEL_CHANNEL_FILTER.MODEL:v.MODEL_CHANNEL_FILTER.CHANNEL},getFilterSelectorLabel:function(t){if(!t)return"";if("number"!=typeof t.oKeyValuesListsIndex.iModelChannel)return"number"!=typeof t.oKeyValuesListsIndex.iSort?"":this.sCurrentSortDisplay;if("number"!=typeof t.oKeyValuesListsIndex.iSort)return this.iCurrentModelChannelId!==undefined&&"undefined"!=typeof this.oModelChannelInfos[this.iCurrentModelChannelId]?this.oModelChannelInfos[this.iCurrentModelChannelId].displayName:this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.MODEL?l.__("profile.channel_videos_filter"):this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.CHANNEL?l.__("profile.model_videos_filter"):(e.error("getFilterSelectorLabel: Missing label for selector type",this.sCurrentModelChannelFilterType),"");var i;return i=this.iCurrentModelChannelId!==undefined&&"undefined"!=typeof this.oModelChannelInfos[this.iCurrentModelChannelId]?this.oModelChannelInfos[this.iCurrentModelChannelId].displayName:this.getModelChannelSepLabel(!0),this.sCurrentSortDisplay+" / "+i},getModelChannelSepLabel:function(t){return this.sCurrentModelChannelFilterType?this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.MODEL?l.__("profile.filter_by_channel")+(t?"":" :"):this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.CHANNEL?l.__("profile.filter_by_model")+(t?"":" :"):(e.error("getModelChannelSepLabel: Missing label for selector dropdown sep",this.sCurrentModelChannelFilterType),""):""},getModelChannelSearchLabel:function(){return this.sCurrentModelChannelFilterType?this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.MODEL?l.__("search.channel"):this.sCurrentModelChannelFilterType===v.MODEL_CHANNEL_FILTER.CHANNEL?l.__("search.model"):(e.error("getModelChannelSearchLabel: Missing label for search dropdown placeholder",this.sCurrentModelChannelFilterType),""):""},toggleModelChannelSelector:function(t){e.info_("%c toggleModelChannelSelector","color: hotpink;",t);var i=this.$container.find(".content-filters");i&&i.length&&(i.addClass("hidden"),this.toggleContentFiltersToMaxContentAvailable()),this.iCurrentModelChannelId=t,this.updateModelChannelResetOption(),this.load(0,!0)},getModelChannelResetOption:function(t){if(!t)return undefined;var i=this.getFilterSelectorLists(t,"iModelChannel"),n=i.aKeyValues.find(function(e){return"all"===e.key});return n||e.debug("getModelChannelResetOption: Reset option not found",t),n},updateModelChannelResetOption:function(){var e=this.iCurrentModelChannelId===undefined,t=this.getModelChannelResetOption(this.oMobileFilterSelector);t&&(t.hidden=e);var i=this.getModelChannelResetOption(this.oDesktopFilterSelector);i&&(i.hidden=e),this.$container.find(".x-dropdown-reset-modelchannel-filter-option").toggleClass("hidden",e)},resetModelChannelFilter:function(t){e.info_("%c resetModelChannelFilter","color: hotpink;");var i=this.$container.find(".content-filters");i&&i.length&&i.removeClass("hidden"),this.iCurrentModelChannelId=undefined,this.updateModelChannelResetOption(),this.resetModelChannelFilterSelector(),t||this.load(0,!0)},resetModelChannelFilterSelector:function(){this.oDesktopFilterSelector&&this.oDesktopFilterSelector.oDropdown&&(this.setDesktopFilterSelectorModelChannelLists(this.getModelChannelKeyValues(!1)),this.oDesktopFilterSelector.oDropdown.redraw()),this.oMobileFilterSelector&&this.oMobileFilterSelector.oDropdown&&(this.setMobileFilterSelectorModelChannelLists(this.getModelChannelKeyValues(!0)),this.oMobileFilterSelector.oDropdown.redraw()),this.updateFilterSelectorsLabel()},setFilterSelectorsSortOption:function(t){e.info_("%c setFilterSelectorsSortOption","color: hotpink;",t);var i=this.getDesktopFilterSelectorSortLists();i&&i.aKeyValues&&i.aKeyValues.length&&(e.info_("%c setFilterSelectorsSortOption","color: hotpink;","desktop"),i.aKeyValues.forEach(function(e){e.selected=e.key.toString()===t.toString()}),i.aKeyValues.sort(function(e,i){return i.key===t?1:-1}),this.oDesktopFilterSelector.oDropdown.redrawOptions());var n=this.getMobileFilterSelectorSortLists();n&&n.aKeyValues&&n.aKeyValues.length&&(e.info_("%c setFilterSelectorsSortOption","color: hotpink;","mobile"),n.aKeyValues.forEach(function(e){e.selected=e.key.toString()===t.toString()}),n.aKeyValues.sort(function(e,i){return i.key===t?1:-1}),this.oMobileFilterSelector.oDropdown.redrawOptions())},setFilterSelectorsModelChannelOption:function(t){t=t.toString(),e.info_("%c setFilterSelectorsModelChannelOption","color: hotpink;",t);var i=function(e){e.selected=e.key.toString()===t},n=this.getModelChannelInfosOrder(),s=function(e,i){return"all"===e.key?-1:"all"===i.key?1:e.key.toString()===t?-1:i.key.toString()===t?1:n.indexOf(e.key)<n.indexOf(i.key)?-1:1},o=this.getDesktopFilterSelectorModelChannelLists();o&&o.aKeyValues&&o.aKeyValues.length&&(e.info_("%c setFilterSelectorsModelChannelOption","color: hotpink;","desktop"),o.aKeyValues.forEach(i),o.aKeyValues.sort(s),this.oDesktopFilterSelector.oDropdown.redrawOptions());var a=this.getMobileFilterSelectorModelChannelLists();a&&a.aKeyValues&&a.aKeyValues.length&&(e.info_("%c setFilterSelectorsModelChannelOption","color: hotpink;","mobile"),a.aKeyValues.forEach(i),a.aKeyValues.sort(s),this.oMobileFilterSelector.oDropdown.redrawOptions())},updateFilterSelectorsLabel:function(){this.oDesktopFilterSelector&&this.oDesktopFilterSelector.oDropdown&&this.oDesktopFilterSelector.oDropdown.setDropdownLabel(this.getFilterSelectorLabel(this.oDesktopFilterSelector)),this.oMobileFilterSelector&&this.oMobileFilterSelector.oDropdown&&this.oMobileFilterSelector.oDropdown.setDropdownLabel(this.getFilterSelectorLabel(this.oMobileFilterSelector))},getFilterSelectorLists:function(t,i){return e.info_("%c getFilterSelectorLists","color: hotpink;","sFilter",i,t?t.oKeyValuesListsIndex[i]:"no oFilterSelector"),t&&t.oKeyValuesListsIndex&&"number"==typeof t.oKeyValuesListsIndex[i]?t.oDropdown.oOptions.aKeyValuesLists[t.oKeyValuesListsIndex[i]]:{aKeyValues:[],bShowEmptySearchResult:!1,oKeyValues:{}}},getDesktopFilterSelectorModelChannelLists:function(){return this.getFilterSelectorLists(this.oDesktopFilterSelector,"iModelChannel")},getMobileFilterSelectorModelChannelLists:function(){return this.getFilterSelectorLists(this.oMobileFilterSelector,"iModelChannel")},getDesktopFilterSelectorSortLists:function(){return this.getFilterSelectorLists(this.oDesktopFilterSelector,"iSort")},getMobileFilterSelectorSortLists:function(){return this.getFilterSelectorLists(this.oMobileFilterSelector,"iSort")},setFilterSelectorModelChannelLists:function(t,i,n){e.info_("%c setFilterSelectorModelChannelLists","color: hotpink;","sFilter",i,t?t.oKeyValuesListsIndex[i]:"no oFilterSelector",n),t&&t.oKeyValuesListsIndex&&"number"==typeof t.oKeyValuesListsIndex[i]&&(t.oDropdown.oOptions.aKeyValuesLists[t.oKeyValuesListsIndex[i]]=n)},setDesktopFilterSelectorModelChannelLists:function(e){this.setFilterSelectorModelChannelLists(this.oDesktopFilterSelector,"oModelChannel",e)},setMobileFilterSelectorModelChannelLists:function(e){this.setFilterSelectorModelChannelLists(this.oMobileFilterSelector,"oModelChannel",e)}},v}),define("skins/default/profile/listing/videos_fjs/videos_tab",["config/main","static/dom","lib/tools","lib/i18n!front","skins/default/profile/listing/videos_fjs","skins/common/player/quickies/latList"],function(e,t,i,n,s,o){var a=function(t,i){var o=e.data.user.url+"/videos/";this.oFirstAddedPost=!1,this.oLastAddedPost=!1,this.oOpenedPost=!1,this.oQuickies={};var a=this;if(i="object"==typeof i?i:{},i.bEmptyIfNoContentFilter=!0,i.sListingClass="mozaique cust-nb-cols post-blocks",i.fnCountTitle=function(){var t,i=!1;for(t in a.aContentFilters)oFilter=a.aContentFilters[t],"uploadsonly"===oFilter.sKey&&oFilter.bIsChecked&&(i=!0);var s=i&&"number"==typeof a.oNbVideosUploadsOnly.free?a.oNbVideosUploadsOnly.free:a.oNbVideos.free;return"number"!=typeof s||s<1?"":n.__(1===s?"listing.user_free_video":"listing.user_count_free_videos",{"%user_name%":e.data.user.display,"%count%":s.toLocaleString(e.dyn.locale)})},this.bHasNoRegularVideos=!1,this.bHasQuickies="undefined"!=typeof i.oQuickiesInfos&&"boolean"==typeof i.oQuickiesInfos.bHasQuickies&&i.oQuickiesInfos.bHasQuickies,this.bShowQuickiesHorizontal="undefined"!=typeof i.oQuickiesInfos&&"boolean"==typeof i.oQuickiesInfos.bShowQuickiesHorizontal&&i.oQuickiesInfos.bShowQuickiesHorizontal,this.iCountQuickiesHorizontal=this.bShowQuickiesHorizontal&&"number"==typeof i.oQuickiesInfos.iCountQuickiesHorizontal&&i.oQuickiesInfos.iCountQuickiesHorizontal>0?i.oQuickiesInfos.iCountQuickiesHorizontal:0,this.bShowQuickiesVertical="undefined"!=typeof i.oQuickiesInfos&&"boolean"==typeof i.oQuickiesInfos.bShowQuickiesVertical&&i.oQuickiesInfos.bShowQuickiesVertical,this.iCountQuickiesVertical=this.bShowQuickiesVertical&&"number"==typeof i.oQuickiesInfos.iCountQuickiesVertical&&i.oQuickiesInfos.iCountQuickiesVertical>0?i.oQuickiesInfos.iCountQuickiesVertical:0,this.bShowQuickiesAll="undefined"!=typeof i.oQuickiesInfos&&"boolean"==typeof i.oQuickiesInfos.bShowQuickiesAll&&i.oQuickiesInfos.bShowQuickiesAll,this.iCountQuickiesAll=this.bShowQuickiesAll&&"number"==typeof i.oQuickiesInfos.iCountQuickiesAll&&i.oQuickiesInfos.iCountQuickiesAll>0?i.oQuickiesInfos.iCountQuickiesAll:0,this.bAreQuickiesInExpandedView=null,this.oNbVideos={free:0},e.data.nb_videos)if(e.data.main_cat)e.data.nb_videos.free&&e.data.nb_videos.free[e.data.main_cat]&&(this.oNbVideos.free=e.data.nb_videos.free[e.data.main_cat]);else if(e.data.nb_videos.free)for(var r in e.data.nb_videos.free)this.oNbVideos.free+=e.data.nb_videos.free[r];this.oNbVideosUploadsOnly={free:this.getShowUploaderOnlyCount(["free"])},i.aContentFilters=[],e.data.show_up_only.free&&i.aContentFilters.push({sKey:"uploadsonly",sDisplay:n.__("videos.uploaded_by",{"%uploader%":e.data.user.display}),bUnwantedForUploadsOnly:!0,bDefaultChecked:!1,bIsChecked:!1}),i.bCounterInMobileDropdown=!1,i.aSortFilters=[{sKey:"best",sDisplay:n.__("videos.watch_recently")},{sKey:"new",sDisplay:n.__("misc.new")},{sKey:"rating",sDisplay:n.__("videos.most_viewed")}],(e.data.user.model||e.data.user.channel)&&i.aSortFilters.push({sKey:"comments",sDisplay:n.__("videos.most_commented")}),s.apply(this,[t,o,i]),this.bHasQuickies&&(this.savePage("no-content",[],!1,function(e,t,i){a.bHasNoRegularVideos=!0,null===a.bAreQuickiesInExpandedView&&(a.bAreQuickiesInExpandedView=!0)},null,null,!0),this.setAppendNoVideoNoFiltersContent(function(e,t,i){a.bHasNoRegularVideos=!0,null===a.bAreQuickiesInExpandedView&&(a.bAreQuickiesInExpandedView=!0)}))};return a.prototype=new s,a.prototype.getShowUploaderOnlyCount=function(t){var i=this.getCombinedContentFilters(t);return"undefined"!=typeof e.data.show_up_only[i]&&e.data.show_up_only[i]},a.prototype.setPage=function(e,t){if(s.prototype.setPage.apply(this,[e,t])===s.S_SET_PAGE_ALREADY_SET&&this.bHasQuickies){var i=this.getPage(e);if("undefined"!=typeof this.oQuickies[i.sPageId]){this.oQuickies[i.sPageId].updateView()}}},a.prototype.appendPageContent=function(n,a){if(s.prototype.appendPageContent.apply(this,[n,a,!1]),0===n.iCurrentPage&&(this.$quickiesDiv&&this.$quickiesDiv.length||(this.$quickiesDiv=$("<div></div>"),this.$quickiesDiv.insertBefore(this.$videosContainer)),this.bHasQuickies)){for(var r in this.oQuickies)if(r!==n.sPageId){var l=this.oQuickies[r];l.removeContainer()}if("undefined"==typeof this.oQuickies[n.sPageId]){null===this.bAreQuickiesInExpandedView&&(this.bAreQuickiesInExpandedView=!!this.bHasNoRegularVideos);var d=new o(this.$quickiesDiv,{bIsExpandedListing:this.bAreQuickiesInExpandedView,iFullNavProfileId:e.data.user.id_user,aSortFilters:[this.getCurrentSortFilter()],oAvailableOrientations:{bHorizontal:this.bShowQuickiesHorizontal,bVertical:this.bShowQuickiesVertical,bAll:this.bShowQuickiesAll},oCountByOrientations:{iHorizontal:this.iCountQuickiesHorizontal,iVertical:this.iCountQuickiesVertical,iAll:this.iCountQuickiesAll}}),u=this;d.setOnExpandedViewChangeCallback(function(e){u.updateQuickiesListExpandedView(e,n.sPageId);var s=d.getContainer();e||t.isElementInView(s)||i.scrollTo(s,100)}),this.oQuickies[n.sPageId]=d,d.loadAndInit()}else{var l=this.oQuickies[n.sPageId];l.setMainContainer(this.$quickiesDiv),l.updateView()}}this.fnOnLoaded&&"function"==typeof this.fnOnLoaded&&this.fnOnLoaded()},a.prototype.updateQuickiesListExpandedView=function(e,t){if(this.bAreQuickiesInExpandedView!==e){this.bAreQuickiesInExpandedView=e;for(var i in this.oQuickies)if(i!==t){var n=this.oQuickies[i];n.setToExpandedView(e,!1)}}},a.prototype.getDesktopFilterSelectorContainer=function(){return document.querySelector("#tabVideos .select-filter-list-desktop")},a.prototype.getMobileFilterSelectorContainer=function(){return document.querySelector("#tabVideos .select-filter-list-mobile")},a}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pics.mustache",[],function(){return'{{#iPicturesCount}}\n\t<div class="p-pics p-pics-{{{ iConfStructurePicsRows }}}-rows p-pics-{{{ iConfStructurePicsCols }}}-cols">\n\t\t{{#aPictures}}\n\t\t\t{{#bInThumbBlock}}\n\t\t\t\t<div class="pic{{#bHidden}} hidden{{/bHidden}}">\n\t\t\t\t\t<div class="thumb">\n\t\t\t\t\t\t<a href="#" style="background-image:url({{{ sSrc }}});"></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/bInThumbBlock}}\n\t\t{{/aPictures}}\n\t\t<span class="icon-f icf-camera-o"></span>\n\t</div>\n{{/iPicturesCount}}'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_comment.mustache",[],function(){return'<div class="p-comment">\n\t<div class="p-comment-centered">\n\t\t<div class="p-comment-content">\n\t\t\t{{{ sCommentShort }}}{{#bLongComment}}...{{/bLongComment}}\n\t\t</div>\n\t</div>\n</div>'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop.mustache",[],function(){return'<div class="post-content">{{{ content }}}</div>\n<button class="goto-prev" type="button"><span class="icon-f icf-chevron-left"></span></button>\n<button class="goto-next" type="button"><span class="icon-f icf-chevron-right"></span></button>\n'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop_top.mustache",[],function(){return'<div class="p-date">{{#aPostPictos}}<span class="icon-f icf-{{ icf }}"></span>{{/aPostPictos}} <span>{{{ sDate }}}</span></div>'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop_video.mustache",[],function(){
return'<div class="p-video">\n\t<iframe src="{{{ url }}}" frameborder="0" width="650" height="370" scrolling="no" allowfullscreen="allowfullscreen"></iframe>\n</div>'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop_video_purchase_btn.mustache",[],function(){return'<div class="p-get-access-btn-container">\n\t<button type="button" class="p-get-access-btn btn btn-primary purchase-content"{{#sDataUrl}} data-url="{{{ sDataUrl }}}"{{/sDataUrl}}{{#sVideoId}} data-video-id="{{{ sVideoId }}}"{{/sVideoId}}{{#sUserId}} data-user-id="{{{ sUserId }}}"{{/sUserId}}>\n\t\t{{{ sText }}}\n\t</button>\n</div>'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop_pics.mustache",[],function(){return'{{#iPicturesCount}}\n\t<div class="p-pics p-pics-{{{ iConfStructurePicsRows }}}-rows p-pics-{{{ iConfStructurePicsCols }}}-cols">\n\t\t{{#aPictures}}\n\t\t\t<div class="pic{{#bHidden}} hidden{{/bHidden}}">\n\t\t\t\t<div class="thumb">\n\t\t\t\t\t<a href="{{{ full }}}" style="background-image:url({{{ sSrc }}});" data-src="{{{ sSrc }}}">\n\t\t\t\t\t\t{{^iSeeMoreBtn}}\n\t\t\t\t\t\t\x3c!--{ {#bFirst}}--\x3e\n\t\t\t\t\t\t\t<span class="first">\n\t\t\t\t\t\t\t\t<span class="icon-f icf-camera-o"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\x3c!--{ {/bFirst}}--\x3e\n\t\t\t\t\t\t{{/iSeeMoreBtn}}\n\t\t\t\t\t\t{{#iSeeMoreBtn}}\n\t\t\t\t\t\t\t<span class="more">\n\t\t\t\t\t\t\t\t+<strong>{{{ iSeeMoreBtn }}}</strong>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{/iSeeMoreBtn}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{/aPictures}}\n\t</div>\n{{/iPicturesCount}}'}),define("text!skins/default/profile/listing/videos_fjs/fanclub/tpls/post_pop_comment.mustache",[],function(){return'<div class="p-pop-comment">\n\t{{{ comment }}}\n\t<p>{{{ placeholder }}}</p>\n</div>'}),define("skins/default/profile/listing/videos_fjs/fanclub/post",["config/main","mustache","static/thumbs","static/utils","lib/i18n!front","lib/tools","lib/helpers/viewer/lightgallery-generic-manager","skins/common/purchase_form/purchase_form_init","skins/default/mozaique/thumb_block_common_init","text!./tpls/post_pics.mustache","text!./tpls/post_comment.mustache","text!./tpls/post_pop.mustache","text!./tpls/post_pop_top.mustache","text!./tpls/post_pop_video.mustache","text!./tpls/post_pop_video_purchase_btn.mustache","text!./tpls/post_pop_pics.mustache","text!./tpls/post_pop_comment.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g){var m=function(t){this.sId=t.id.toString(),this.sPreviousId=!1,this.sNextId=!1,this.bIsFirst=!1,this.bIsLast=!1,this.iTimestamp=t.timestamp,this.sDate=o.formatDuration(Date.now()/1e3-this.iTimestamp,o.formatDurationMethods.diff),this.iPage=t.page,this.oManager=t.manager,this.sDisplayName=t.profile_name,this.sPlaceHolder=s.__("membership.update_number",{"%user_name%":this.sDisplayName,"%number%":this.sId}),this.sComment=t.content?t.content.toString():null,this.bLongComment=null!==this.sComment&&this.sComment.length>100,this.sCommentShort=!1===this.bLongComment?this.sComment:n.escape(n.unescape(this.sComment).substring(0,100)),this.oVideos=t.videos?t.videos:null,this.aPictures=t.pictures,this.iPicturesCount=this.aPictures.length,this.bConfStructureVideoWithComment=!1,this.bConfStructurePicsWithComment=!1,this.bConfStructureVideoWithPlaceHolder=!1,this.bConfStructurePicsWithPlaceHolder=!1,this.bConfStructureCommentWithPlaceHolder=!1,this.iConfStructureBlock=0,this.sConfStructureFirst=!1,this.aPostPictos=[],this.bConfStructureCommentBlock=!1;var i=!1;this.oVideos&&(this.iConfStructureBlock++,this.sConfStructureFirst="video",this.aPostPictos.push({icf:"player-play-circle-o",id:"video"}),this.oVideos[0]&&(this.oVideos[0].tf||this.oVideos[0].t)||(this.sComment?(this.bConfStructureVideoWithComment=!0,i=!0):this.bConfStructureVideoWithPlaceHolder=!0)),this.iPicturesCount>0&&(this.iConfStructureBlock++,this.sConfStructureFirst||(this.sConfStructureFirst="pictures"),this.aPostPictos.push({icf:"images",id:"pictures"}),this.sComment&&!i&&(this.bConfStructurePicsWithComment=!0,i=!0),this.bConfStructurePicsWithComment||(this.bConfStructurePicsWithPlaceHolder=!0)),this.sSvgHref=e.domains["static"]+"/v3/img/skins/default/posts/photo_icon.svg",this.sComment&&(i||(this.iConfStructureBlock++,this.bConfStructureCommentBlock=!0,this.bConfStructureCommentWithPlaceHolder=!0),this.sConfStructureFirst||(this.sConfStructureFirst="comment")),this.iConfStructurePicsRows=this.iPicturesCount>5?2:1,this.iConfStructurePicsCols=this.iPicturesCount<4?this.iPicturesCount:3,this.bManyPictures=1===this.iConfStructurePicsRows&&this.iPicturesCount>3||2===this.iConfStructurePicsRows&&this.iPicturesCount>6,this.sComment&&this.bConfStructurePicsWithComment;for(var a=0;a<this.iPicturesCount;a++)if(this.aPictures[a].sId=this.sId,this.aPictures[a].bHidden=!1,this.aPictures[a].bFirst=0===a,this.aPictures[a].bInThumbBlock=this.iPicturesCount>5&&a<6||this.iPicturesCount<6&&a<3,this.aPictures[a].iSeeMoreBtn=!1,this.iPicturesCount<3)this.aPictures[a].sSrc=this.aPictures[a].thumbl;else{this.aPictures[a].sSrc=0===a?this.aPictures[a].thumbl:this.aPictures[a].thumb;var r=this.iConfStructurePicsRows*this.iConfStructurePicsCols;this.bManyPictures&&(a>=r?this.aPictures[a].bHidden=!0:a===r-1&&(this.aPictures[a].iSeeMoreBtn=(this.iPicturesCount-r+1).toLocaleString(e.dyn.locale)))}};return m.prototype={getId:function(){return this.sId},setPreviousId:function(e){this.sPreviousId=e},getPreviousId:function(){return this.sPreviousId},setNextId:function(e){this.sNextId=e},getNextId:function(){return this.sNextId},setToFirst:function(e){this.bIsFirst="boolean"!=typeof e||e},setToLast:function(e){this.bIsLast="boolean"!=typeof e||e},getThumbBlocks:function(){if("undefined"==typeof this.$ThumbBlock){var e="";e+=this.getVideoThumbBlock(),e+=""===e?this.getPicsThumbBlock():"",e+=""===e?this.getCommentThumbBlock():"",this.$ThumbBlock=$(e)}return this.$ThumbBlock},getVideoThumbBlock:function(){if(!this.oVideos||!this.oVideos.length)return"";var e="";for(var t in this.oVideos){var n=this.oVideos[t],s={};"new"===this.oManager.getCurrentSortFilter()&&(s.post_date_diff=this.sDate),this.bConfStructureVideoWithComment?s.post_comment=this.sComment:this.bConfStructureVideoWithPlaceHolder&&(s.post_comment=this.sPlaceHolder),n.show_uploader&&(s.show_uploader=!0),e+=i.get_thumb_block_html(n,"post-video",s).html}return e},getPicsThumbBlock:function(){if(this.iPicturesCount<1)return"";if("undefined"==typeof this.sPicsHtml){var e={post_date_diff:this.sDate,tb_t_inside_start:t.render(d,this)};this.bConfStructurePicsWithComment?e.post_comment=this.sComment:this.bConfStructurePicsWithPlaceHolder&&(e.post_comment=this.sPlaceHolder),this.sPicsHtml=i.get_thumb_block_html(this,"post-empty",e).html}return this.sPicsHtml},getCommentThumbBlock:function(){if(!this.sComment||!this.bConfStructureCommentBlock)return"";if("undefined"==typeof this.sCommentHtml){var e={is_comment:!0,post_date_diff:this.sDate,tb_t_inside_start:t.render(u,this)};this.bConfStructureCommentWithPlaceHolder&&(e.post_comment=this.sPlaceHolder),this.sCommentHtml=i.get_thumb_block_html(this,"post-empty",e).html}return this.sCommentHtml},getPopHtml:function(){if("undefined"==typeof this.sPopHtml){var e="";e+=t.render(f,this),e+=this.getPopVideo(),e+=this.getPopComment(),e+=this.getPopPicsThumbBlock(),this.sPopHtml=t.render(c,{content:e})}return this.sPopHtml},getPopVideo:function(){if(!this.oVideos||!this.oVideos.length)return"";var e="";for(var n in this.oVideos){var o=this.oVideos[n];"undefined"==typeof o.sPopHtml&&(o.sPopHtml=i.get_thumb_block_html(o,"video").html,this.isVideoPurchased(o)||(o.sPopHtml+=t.render(p,{sText:s.__("video.get_access"),sVideoId:o.id,sDataUrl:o.u}))),e+=o.sPopHtml}return e},getPopComment:function(){return this.sComment?("undefined"==typeof this.sPopCommentHtml&&(this.sPopCommentHtml=t.render(g,{comment:t.render(u,this),placeholder:this.sPlaceHolder})),this.sPopCommentHtml):""},getPopPicsThumbBlock:function(){if(this.iPicturesCount<1)return"";if("undefined"==typeof this.sPopPicsHtml){var e={tb_t_inside_start:t.render(_,this)};this.sPopPicsHtml=i.get_thumb_block_html(this,"post-empty",e).html}return this.sPopPicsHtml},onThumbClick:function(){if(this.oVideos&&this.oVideos.length){var e=this.oVideos[0];if(!this.isVideoPurchased(e))return void function(){var t=e.id;require(["skins/common/purchase_form/purchase_pop"],function(n){var s=new n;s.setVideoId(t),i.is_thumb_block_ppv(e)?s.setOrigin("profile_videos_ppv"):i.is_thumb_block_membership(e)&&s.setOrigin("profile_videos_membership"),s.open()})}();window.location.href=e.u}},closePostPop:function(){var e=this.oManager.getPostPop();e&&e.hide()},openPostPop:function(e){oViewerPop=this.oManager.getPostPop(),oViewerPop.body.removeClass("in-from-right in-from-left out-to-right out-to-left"),oViewerPop.setContent(this.getPopHtml()),"string"==typeof e&&oViewerPop.body.addClass("leftToRight"===e?"in-from-left":"in-from-right"),oViewerPop.show(),this.oManager.oOpenedPost=this,r.initBtns(oViewerPop.container),l.init_listing(oViewerPop.container,{tb_menu:!1,tb_viewed:!1,next_too_much:!1});var t=this,i=oViewerPop.container.find(".goto-prev"),n=oViewerPop.container.find(".goto-next");this.bIsFirst?i.hide():i.show().on("click",function(e){e.preventDefault(),t.openPreviousPostPop()}),this.bIsLast?n.hide():n.show().on("click",function(e){e.preventDefault(),t.openNextPostPop()});var s=oViewerPop.container.find(".p-pics");this.oViewerManager=a(s,s.find(".pic a"),{fnOnOpen:function(){t.oManager.bPicsViewerPopOpened=!0},fnOnClose:function(){t.oManager.bPicsViewerPopOpened=!1}})},openPreviousPostPop:function(){this.slideToPostPop(this.getPreviousId(),"leftToRight")},openNextPostPop:function(){this.slideToPostPop(this.getNextId(),"rightToLeft")},slideToPostPop:function(e,t){var i=!(this.bIsFirst&&"leftToRight"===t||this.bIsLast&&"rightToLeft"===t)&&this.oManager.getVideoById(e),n=this.oManager.getPostPop();i&&(n&&(n.body.removeClass("in-from-right in-from-left out-to-right out-to-left"),n.container.find(".goto-prev").off("click"),n.container.find(".goto-next").off("click")),n.body.addClass("leftToRight"===t?"out-to-right":"out-to-left"),setTimeout(function(){i.openPostPop(t)},250))},isVideoPurchased:function(e){return e&&e.pun}},m}),define("skins/default/profile/listing/videos_fjs/fanclub/post_list",["static/log","config/main","lib/i18n!front","lib/helpers/overlay/box","skins/default/profile/listing/videos_fjs","skins/default/profile/listing/videos_fjs/fanclub/post","skins/common/purchase_form/purchase_form_init","skins/default/pagination"],function(e,t,n,s,o,a,r,l){var d=function(i,a){e.debug("%c\n\n new oFanClubPosts","color: mediumpurple;",i,a);var r=t.data.user.url+"/fan-club/";this.oFirstAddedPost=!1,this.oLastAddedPost=!1,this.oOpenedPost=!1;var l=this,u=function(e){l.keyDownEvent(e)};this.bPostPopOpened=!1,this.bPicsViewerPopOpened=!1,this.oPostPop=new s("body",!0,"hide",!0),this.oPostPop.addClass("tabFanClub-post-overlay"),this.oPostPop.setOverlayClosable(!0),this.oPostPop.onShow=function(){$("body").addClass("tabFanClub-post-overlay-opened"),l.bPostPopOpened=!0,$(document).on("keydown",u)},this.oPostPop.onHide=function(){$("body").removeClass("tabFanClub-post-overlay-opened"),l.bPostPopOpened=!1,$(document).off("keydown",u),l.oOpenedPost=!1},a="object"==typeof a?a:{},a.bEmptyIfNoContentFilter=!0,a.sListingClass="mozaique cust-nb-cols post-blocks",a.oEmptyIfNoContent={1:{bResetFilersBtn:!0,sMessage:n.__("premium.select_type_content")}};var c,f=this.mixArrayValuesCombinations(["sub","membership","ppv","locked","unlocked"],o.S_SEP_CONTENT_FILTERS);this.oNbVideos={},this.oNbVideosUploadsOnly={};for(c in f){var h=f[c];if(-1===h.indexOf("locked"+d.S_SEP_CONTENT_FILTERS+"unlocked")){if(h=h.replace("sub_membership_ppv","premium"),this.oNbVideos[h]=0,t.data.nb_videos)if(t.data.main_cat)t.data.nb_videos[h]&&t.data.nb_videos[h][t.data.main_cat]&&(this.oNbVideos[h]=t.data.nb_videos[h][t.data.main_cat]);else if(t.data.nb_videos[h])for(var p in t.data.nb_videos[h])this.oNbVideos[h]+=t.data.nb_videos[h][p];this.oNbVideosUploadsOnly[h]=this.getShowUploaderOnlyCount(h.split(d.S_SEP_CONTENT_FILTERS))}}e.debug("%c new oFanClubPosts --- ","color: mediumpurple;","\n   - oConfig.data.nb_videos",t.data.nb_videos,"\n   - this.oNbVideos",this.oNbVideos,"\n   - this.oNbVideosUploadsOnly",this.oNbVideosUploadsOnly),a.aContentFilters=[],this.oNbVideos.sub>0&&a.aContentFilters.push({sKey:"premium",sDisplay:n.__("premium.premium")+' <span class="count">'+this.oNbVideos.sub.toLocaleString(t.dyn.locale)+"</span>",fnDisplay:function(){return n.__("premium.premium")+' <span class="count">'+l.getContentFilterTotal("sub").toLocaleString(t.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:2,iUrlOrder:1,iNbVideos:this.oNbVideos.sub,iEmptyIfNoContentLevel:1,sKeyForUploadsOnly:"sub",bIsDisabled:0===this.oNbVideos.membership&&0===this.oNbVideos.ppv,sDisabledAlert:n.__("profile.this_only_content_available")}),this.oNbVideos.membership>0&&a.aContentFilters.push({sKey:"membership",sDisplay:n.__("profile.membership")+' <span class="count">'+this.oNbVideos.membership.toLocaleString(t.dyn.locale)+"</span>",fnDisplay:function(){return n.__("profile.membership")+' <span class="count">'+l.getContentFilterTotal("membership").toLocaleString(t.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:3,iUrlOrder:3,iNbVideos:this.oNbVideos.membership,iEmptyIfNoContentLevel:1,bIsDisabled:0===this.oNbVideos.sub&&0===this.oNbVideos.ppv,sDisabledAlert:n.__("profile.this_only_content_available")}),this.oNbVideos.ppv>0&&a.aContentFilters.push({sKey:"ppv",sDisplay:n.__("premium.direct_purchase_short")+' <span class="count">'+this.oNbVideos.ppv.toLocaleString(t.dyn.locale)+"</span>",fnDisplay:function(){return n.__("premium.direct_purchase_short")+' <span class="count">'+l.getContentFilterTotal("ppv").toLocaleString(t.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:4,iUrlOrder:4,iNbVideos:this.oNbVideos.ppv,iEmptyIfNoContentLevel:1,bIsDisabled:0===this.oNbVideos.membership&&0===this.oNbVideos.sub,sDisabledAlert:n.__("profile.this_only_content_available")}),0===this.oNbVideos.premium_locked&&0===this.oNbVideos.premium_unlocked&&(this.oNbVideos.premium_locked=this.iNbVideosRed);var _={sType:"lock-unlock",sKey:"lock-unlock",aChoices:[],fnDisplay:function(){return""},bMobileInSelect:!1,iDisplayOrder:1,iUrlOrder:5};this.oNbVideos.premium_locked>0&&this.oNbVideos.premium_unlocked>0?(e.debug("%c new oFanClubPosts --- setting toggle for mixed content","color: mediumpurple;",'\n   - this.oNbVideos["premium_locked"] : ',this.oNbVideos.premium_locked,'\n   - this.oNbVideos["premium_unlocked"] : ',this.oNbVideos.premium_unlocked),_.sChoice="all",_.sDefaultChoice="all",_.sIcf="unlock",_.aChoices.push({sKey:"all",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+l.getContentFilterTotal("sub_membership_ppv","unlocked").toLocaleString(t.dyn.locale)+"/"+l.getContentFilterTotal("sub_membership_ppv","all").toLocaleString(t.dyn.locale)+"</span>"},sChoiceAlert:n.__("misc.all_content"),sChoiceClass:"is-default-all",sChoiceMozClass:"is-lock-unlock-mixed"}),_.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+l.getContentFilterTotal("sub_membership_ppv","unlocked").toLocaleString(t.dyn.locale)+"/"+l.getContentFilterTotal("sub_membership_ppv","all").toLocaleString(t.dyn.locale)+"</span>"},sChoiceAlert:n.__("premium.owned_content_only")}),_.aChoices.push({sKey:"locked",sIcf:"lock",fnDisplay:function(){return'<span class="count">'+l.getContentFilterTotal("sub_membership_ppv","locked").toLocaleString(t.dyn.locale)+"/"+l.getContentFilterTotal("sub_membership_ppv","all").toLocaleString(t.dyn.locale)+"</span>"},sChoiceAlert:n.__("premium.not_owned_content_only")})):this.oNbVideos.premium_unlocked>0?(e.debug("%c new oFanClubPosts --- setting disabled unlocked display","color: mediumpurple;",'\n   - this.oNbVideos["premium_unlocked"] : ',this.oNbVideos.premium_unlocked),_.sChoice="unlocked",_.sDefaultChoice="unlocked",_.sIcf="unlock",_.bIsDisabled=!0,_.sDisabledAlert=n.__("premium.all_content_is_owned"),_.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){var e=l.getContentFilterTotal("sub_membership_ppv","all"),i=e.toLocaleString(t.dyn.locale);return'<span class="count">'+i+"/"+i+"</span>"}})):(e.debug("%c new oFanClubPosts --- setting disabled locked display","color: mediumpurple;",'\n   - this.oNbVideos["premium_locked"] : ',this.oNbVideos.premium_locked),_.sChoice="unlocked",_.sDefaultChoice="unlocked",_.sIcf="unlock",_.bIsDisabled=!0,_.sDisabledAlert=n.__("premium.no_content_is_owned")+(t.dyn.login_info.is_logged?"":"<br/><br/>"+n.__("premium.if_content_purchased_log_in",{"%link%":'<a href="/account/" class="login-link" data-mode="signin">',"%link_end%":"</a>"})),_.bDisabledAlertAutoCloseTimer=t.dyn.login_info.is_logged,_.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+(0).toLocaleString(t.dyn.locale)+"/"+l.getContentFilterTotal("sub_membership_ppv","all").toLocaleString(t.dyn.locale)+"</span>"}})),a.aContentFilters.push(_),a.bCounterInMobileDropdown=!1,a.aSortFilters=[{sKey:"best",sDisplay:n.__("videos.watch_recently")},{sKey:"new",sDisplay:n.__("misc.new")},{sKey:"add-date",sDisplay:n.__("videos.add_date")},{sKey:"rating",sDisplay:n.__("videos.most_viewed")}],o.apply(this,[i,r,a])};return d.prototype=new o,d.prototype.initAvailableContentFilters=function(){e.debug("%c initAvailableContentFilters","color: mediumpurple;"),o.prototype.initAvailableContentFilters.apply(this),this.hasShowUploaderOnly()&&(e.debug("%c initAvailableContentFilters --- ADDING uploadsonly","color: mediumpurple;"),this.aContentFilters.push({sKey:"uploadsonly",sDisplay:n.__("videos.uploaded_by",{"%uploader%":t.data.user.display}),bUnwantedForUploadsOnly:!0,bDefaultChecked:!1,bIsChecked:!1,iDisplayOrder:4,iUrlOrder:2})),o.prototype.initAvailableContentFilters.apply(this)},d.prototype.getVideoById=function(e){if(this.oVideos[e])return this.oVideos[e];for(var t=0;t<this.aVideos.length;t++){var i=this.aVideos[t];if(i.getId()===e)return i}return!1},d.prototype.loaded=function(e,i,n){var s=[],o=this,r=l.createElementsBased(i.current_page,i.nb_per_page,i.nb_posts,"",{pagin_click:function(e){""!==e&&o.load(e,!0)}});if(i.nb_posts>0)for(var d in i.posts){var u=i.posts[d];u.profile_name=t.data.user.display,u.manager=this;var c=new a(u),f=c.getId();if(s.push(f),this.oVideos[f]=c,-1===this.aLoadedVideosIds.indexOf(f))this.aVideos.push(c),this.aLoadedVideosIds.push(f);else for(var h in this.aVideos)this.aVideos[h].getId()===f&&(this.aVideos[h]=c)}this.savePage(e,s,r,null,i.nb_posts),this.setPage(e,n),this.updateFiltersHtml(),this.preventEmptyContentFilter()},d.prototype.appendPageContent=function(e,i){o.prototype.appendPageContent.apply(this,[e,i,!1]);var s=this.getVideosByIdList(e.aIds);if(s.length){var a,l=!1;for(a=0;a<s.length;a++){var d=s[a];!1===this.oFirstAddedPost&&(this.oFirstAddedPost=d,this.oFirstAddedPost.setToFirst()),!1===l&&!1!==this.oLastAddedPost&&(l=this.oLastAddedPost,this.oLastAddedPost.setToLast(!1)),this.oLastAddedPost=d,!1!==l&&(d.setPreviousId(l.getId()),l.setNextId(d.getId())),l=d}this.oFirstAddedPost.setPreviousId(this.oLastAddedPost.getId()),this.oLastAddedPost.setNextId(this.oFirstAddedPost.getId()),this.oLastAddedPost.setToLast();var u=!!t.data.user.membership_price,c=!1,f=null,h=null,p=null,_=null,g=null;for(a in this.aContentFilters){var m=this.aContentFilters[a];"membership"===m.sKey?m.bIsChecked&&null===f&&(f=!0):!m.bIsChecked||"ppv"!==m.sKey&&"premium"!==m.sKey||(f=!1),"premium"===m.sKey?(c=!0,null===h&&m.bIsChecked&&(h=!0)):!m.bIsChecked||"ppv"!==m.sKey&&"membership"!==m.sKey||(h=!1),"ppv"===m.sKey?m.bIsChecked&&null===p&&(p=!0):!m.bIsChecked||"premium"!==m.sKey&&"membership"!==m.sKey||(p=!1),"uploadsonly"===m.sKey&&(g=m,_=m.bIsChecked)}var b=c&&(!t.dyn.login_info.is_logged||!t.dyn.login_info.is_premium),v=u,y=v&&!h&&(t.data.user.is_membership_cheaper_premium||f)?"membership":b?"sub":null;if("membership"===y){var D=$('<button type="button" class="btn btn-primary purchase-content floating-purchase-btn mobile-show" data-user-id="'+t.data.user.id_user+'"><span class="icon-f icf-lock"></span> '+n.__("profile.sub_for",{"%price%":t.data.user.membership_price})+"</button>");this.$videosContainer.append(D)}else if("sub"===y){var C=$('<a href="'+t.domains.premium+'" class="btn btn-primary purchase-content floating-purchase-btn mobile-show" data-user-id="'+t.data.user.id_user+'">'+n.__("premium.join_site",{"%website%":"default"===t.sitename?"XVIDEOS":"XNXX"})+"</a>");this.$videosContainer.append(C)}if(this.$videosContainer.toggleClass("is-ppv-only",p),f&&!1===_&&!g.bIsDisabled){this.$videosContainer.prepend("<p class='top-message'>"+n.__("premium.membership_mixed_offers_can_be_filtered",{"%channel%":t.data.user.display})+"</p>");var w=this.$contentFilters.filter('[data-filter="uploadsonly"]').first();w.removeClass("is-highlighted"),setTimeout(function(){w.addClass("is-highlighted")},50),setTimeout(function(){w.removeClass("is-highlighted")},1100)}r.initBtns(this.$videosContainer)}this.fnOnLoaded&&"function"==typeof this.fnOnLoaded&&this.fnOnLoaded()},d.prototype.appendVideoToList=function(e){this.$videosContainer.append(e.getThumbBlocks().clone(!0))},d.prototype.getContentFilterTotal=function(t,i){e.debug("%c getContentFilterTotal ---","color: mediumpurple;","sFilter",t,"sForcedLockUnlock",i);var n,s=[t],o=!1;for(n in this.aContentFilters)oFilter=this.aContentFilters[n],"uploadsonly"===oFilter.sKey&&oFilter.bIsChecked&&(o=!0),"lock-unlock"===oFilter.sKey&&"string"!=typeof i&&(oFilter.bIsDisabled||"locked"!==oFilter.sChoice&&"unlocked"!==oFilter.sChoice||s.push(oFilter.sChoice));"locked"!==i&&"unlocked"!==i||s.push(i);var a=this.getCombinedContentFilters(s);return o&&"number"==typeof this.oNbVideosUploadsOnly[a]?(e.debug("%c getContentFilterTotal --- RETURN UploadsOnly","color: mediumpurple;",this.oNbVideosUploadsOnly[a]),this.oNbVideosUploadsOnly[a]):(e.debug("%c getContentFilterTotal --- RETURN oNbVideos","color: mediumpurple;","number"==typeof this.oNbVideos[a]?this.oNbVideos[a]:0),"number"==typeof this.oNbVideos[a]?this.oNbVideos[a]:0)},d.prototype.setPage=function(e,t){var i=o.prototype.setPage.apply(this,[e,t]);return this.preventEmptyContentFilter(),i},d.prototype.preventEmptyContentFilter=function(){var e,t,s=this.$container.find(".content-filters"),o=null,a="",r=0,l=0;for(i in this.aContentFilters)if("lock-unlock"===this.aContentFilters[i].sKey)null!==this.sFirstStateLock?o=this.aContentFilters[i].sChoice:this.sFirstStateLock=this.aContentFilters[i].sChoice;else{var d=this.getContentFilterTotal(this.aContentFilters[i].sKey);d>0&&(this.aContentFilters[i].bIsChecked?(r++,t=s.find(".content-filter-k-"+this.aContentFilters[i].sKey)):(l++,e=s.find(".content-filter-k-"+this.aContentFilters[i].sKey),a=this.aContentFilters[i].sKey))}0===r&&0===l?null!==o&&o!==this.sFirstStateLock?this.toggleContentFilter("lock-unlock",!0,!0,!1):o===this.sFirstStateLock&&this.displayContentFilterAlert("lock-unlock",n.__("premium.no_video_matching_criteria"),!0):0===r&&l>0?(e.find($("button input")).prop("disabled",!0),e.addClass("filter-lock"),this.toggleContentFilter(a,!0,!0,!1)):r<2?(t.find($("button input")).prop("disabled",!0),t.addClass("filter-lock")):$(".filter-lock")&&($(".filter-lock").find($("button input")).prop("disabled",!1),$(".filter-lock").removeClass("filter-lock"))},d.prototype.updateFiltersHtml=function(){var e,t,i=null;for(t in this.aContentFilters)e=this.aContentFilters[t],"uploadsonly"===e.sKey?i=e:"premium"===e.sKey?e.bIsChecked||!1:"ppv"!==e.sKey&&"membership"!==e.sKey||!e.bIsChecked||!1;if(null!==i){var n=this.$contentFilters.filter('[data-filter="uploadsonly"]'),s=this.getActiveFiltersInUrlOrder(),a=!this.hasShowUploaderOnly(s.aFilters);i.bIsDisabled=a,n.toggleClass("is-disabled",a)}o.prototype.updateFiltersHtml.apply(this,[])},d.prototype.getShowUploaderOnlyCount=function(e){var i=this.getCombinedContentFilters(e);return"undefined"!=typeof t.data.show_up_only[i]&&t.data.show_up_only[i]},d.prototype.hasShowUploaderOnly=function(e){var i;if(void 0!==e){return!!this.getShowUploaderOnlyCount(e)}var n=this.mixArrayValuesCombinations(this.aAvailableContentFilters,o.S_SEP_CONTENT_FILTERS);for(i in n)if(t.data.show_up_only[n[i].replace("sub_membership_ppv","premium")])return!0;return!1},d.prototype.toggleContentFilter=function(t,i){var n,s,a,r=!1,l=!1;for(n in this.aContentFilters)s=this.aContentFilters[n],s.sKey===t&&(a=s),"uploadsonly"===s.sKey&&(r=!0,s.bIsChecked&&(l=!0));if(null===a)return void e.debug("%c oFanClubPosts.toggleContentFilter --- 01 --- RETURN no filter","color: mediumpurple;",t,i);var d=null,u=null;!0===i||"boolean"!=typeof i&&!a.bIsChecked?d=a.sKey:(u=a.sKey,"string"==typeof a.sUncheckKey&&(d=a.sUncheckKey));var c=this.getActiveFiltersInUrlOrder(d,u),f=c.aFilters,h=this.hasShowUploaderOnly(f);return!r||"uploadsonly"!==t&&!l||"uploadsonly"===t&&(h||!1===i||"boolean"!=typeof i&&a.bIsChecked)?void o.prototype.toggleContentFilter.apply(this,[t,i]):"uploadsonly"!==t||h?l&&!h&&"uploadsonly"!==t?(o.prototype.toggleContentFilter.apply(this,["uploadsonly",!1,!0]),void o.prototype.toggleContentFilter.apply(this,[t,i])):void o.prototype.toggleContentFilter.apply(this,[t,i]):void 0},d.prototype.keyDownEvent=function(e){this.bPostPopOpened&&!this.bPicsViewerPopOpened&&!1!==this.oOpenedPost&&(39===e.keyCode?(e.preventDefault(),this.oOpenedPost.openNextPostPop()):37===e.keyCode?(e.preventDefault(),this.oOpenedPost.openPreviousPostPop()):27===e.keyCode&&(e.preventDefault(),this.oOpenedPost.closePostPop()))},d.prototype.getPostPop=function(){return this.oPostPop},d.prototype.getDesktopFilterSelectorContainer=function(){return document.querySelector("#tabRed .select-filter-list-desktop")},d.prototype.getMobileFilterSelectorContainer=function(){return document.querySelector("#tabRed .select-filter-list-mobile")},d}),define("skins/default/profile/listing/videos_fjs/red_tab",["config/main","lib/i18n!front","skins/default/profile/listing/videos_fjs","skins/common/purchase_form/purchase_form_init"],function(e,t,i,n){var s=function(n,s){var o=e.data.user.url+"/videos-premium/",a=this;s="object"==typeof s?s:{},s.bEmptyIfNoContentFilter=!0,s.sListingClass="mozaique cust-nb-cols post-blocks",s.oEmptyIfNoContent={1:{bResetFilersBtn:!0,sMessage:t.__("premium.select_type_content")}};var r,l=this.mixArrayValuesCombinations(["sub","membership","ppv","locked","unlocked"],i.S_SEP_CONTENT_FILTERS);if(this.oNbVideos={},this.oNbVideosUploadsOnly={},this.bIsSubOnly=!0,e.data.nb_videos)for(r in e.data.nb_videos)"premium"!==r&&"free"!==r&&(this.bIsSubOnly=!1);for(r in l){var d=l[r];if(-1===d.indexOf("locked"+i.S_SEP_CONTENT_FILTERS+"unlocked")){var u=d.replace("sub_membership_ppv","premium");if(d=this.bIsSubOnly&&"sub"===d?"premium":d.replace("sub_membership_ppv","premium"),this.oNbVideos[u]=0,e.data.nb_videos)if(e.data.main_cat)e.data.nb_videos[d]&&e.data.nb_videos[d][e.data.main_cat]&&(this.oNbVideos[u]=e.data.nb_videos[d][e.data.main_cat]);else if(e.data.nb_videos[d])for(var c in e.data.nb_videos[d])this.oNbVideos[u]+=e.data.nb_videos[d][c];this.oNbVideosUploadsOnly[d]=this.getShowUploaderOnlyCount(d.split(i.S_SEP_CONTENT_FILTERS))}}s.aContentFilters=[],this.oNbVideos.sub>0&&s.aContentFilters.push({sKey:"premium",sDisplay:t.__("premium.premium")+' <span class="count">'+this.oNbVideos.sub.toLocaleString(e.dyn.locale)+"</span>",fnDisplay:function(){return t.__("premium.premium")+' <span class="count">'+a.getContentFilterTotal("sub").toLocaleString(e.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:2,iUrlOrder:1,iNbVideos:this.oNbVideos.sub,iEmptyIfNoContentLevel:1,sKeyForUploadsOnly:"sub",bIsDisabled:0===this.oNbVideos.membership&&0===this.oNbVideos.ppv,sDisabledAlert:t.__("profile.this_only_content_available")}),this.oNbVideos.membership>0&&s.aContentFilters.push({sKey:"membership",sDisplay:t.__("profile.membership")+' <span class="count">'+this.oNbVideos.membership.toLocaleString(e.dyn.locale)+"</span>",fnDisplay:function(){return t.__("profile.membership")+' <span class="count">'+a.getContentFilterTotal("membership").toLocaleString(e.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:3,iUrlOrder:3,iNbVideos:this.oNbVideos.membership,iEmptyIfNoContentLevel:1,bIsDisabled:0===this.oNbVideos.sub&&0===this.oNbVideos.ppv,sDisabledAlert:t.__("profile.this_only_content_available")}),this.oNbVideos.ppv>0&&s.aContentFilters.push({sKey:"ppv",sDisplay:t.__("premium.direct_purchase_short")+' <span class="count">'+this.oNbVideos.ppv.toLocaleString(e.dyn.locale)+"</span>",fnDisplay:function(){return t.__("premium.direct_purchase_short")+' <span class="count">'+a.getContentFilterTotal("ppv").toLocaleString(e.dyn.locale)+"</span>"},sIcf:!1,bDefaultChecked:!0,bIsChecked:!0,bMobileInSelect:!1,iDisplayOrder:4,iUrlOrder:4,iNbVideos:this.oNbVideos.ppv,iEmptyIfNoContentLevel:1,bIsDisabled:0===this.oNbVideos.membership&&0===this.oNbVideos.sub,sDisabledAlert:t.__("profile.this_only_content_available")}),0===this.oNbVideos.premium_locked&&0===this.oNbVideos.premium_unlocked&&(this.oNbVideos.premium_locked=this.iNbVideosRed);var f={sType:"lock-unlock",sKey:"lock-unlock",aChoices:[],fnDisplay:function(){return""},bMobileInSelect:!1,iDisplayOrder:1,iUrlOrder:5};this.oNbVideos.premium_locked>0&&this.oNbVideos.premium_unlocked>0?(f.sChoice="all",f.sDefaultChoice="all",f.sIcf="unlock",f.aChoices.push({sKey:"all",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","unlocked").toLocaleString(e.dyn.locale)+"/"+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","all").toLocaleString(e.dyn.locale)+"</span>"},sChoiceAlert:t.__("misc.all_content"),sChoiceClass:"is-default-all",sChoiceMozClass:"is-lock-unlock-mixed"}),f.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","unlocked").toLocaleString(e.dyn.locale)+"/"+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","all").toLocaleString(e.dyn.locale)+"</span>"},sChoiceAlert:t.__("premium.owned_content_only")}),f.aChoices.push({sKey:"locked",sIcf:"lock",fnDisplay:function(){return'<span class="count">'+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","locked").toLocaleString(e.dyn.locale)+"/"+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","all").toLocaleString(e.dyn.locale)+"</span>"},sChoiceAlert:t.__("premium.not_owned_content_only")})):this.oNbVideos.premium_unlocked>0?(f.sChoice="unlocked",f.sDefaultChoice="unlocked",f.sIcf="unlock",f.bIsDisabled=!0,f.sDisabledAlert=t.__("premium.all_content_is_owned"),f.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){var t=a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","all"),i=t.toLocaleString(e.dyn.locale);return'<span class="count">'+i+"/"+i+"</span>"}})):(f.sChoice="unlocked",f.sDefaultChoice="unlocked",f.sIcf="unlock",f.bIsDisabled=!0,f.sDisabledAlert=t.__("premium.no_content_is_owned")+(e.dyn.login_info.is_logged?"":"<br/><br/>"+t.__("premium.if_content_purchased_log_in",{"%link%":'<a href="/account/" class="login-link" data-mode="signin">',"%link_end%":"</a>"})),f.bDisabledAlertAutoCloseTimer=e.dyn.login_info.is_logged,f.aChoices.push({sKey:"unlocked",sIcf:"unlock",fnDisplay:function(){return'<span class="count">'+(0).toLocaleString(e.dyn.locale)+"/"+a.getContentFilterTotal(a.bIsSubOnly?"premium":"sub_membership_ppv","all").toLocaleString(e.dyn.locale)+"</span>"}})),s.aContentFilters.push(f),s.bCounterInMobileDropdown=!1,s.aSortFilters=[{sKey:"best",
sDisplay:t.__("videos.watch_recently")},{sKey:"new",sDisplay:t.__("misc.new")},{sKey:"add-date",sDisplay:t.__("videos.add_date")},{sKey:"rating",sDisplay:t.__("videos.most_viewed")}],i.apply(this,[n,o,s])};return s.prototype=new i,s.prototype.initAvailableContentFilters=function(){i.prototype.initAvailableContentFilters.apply(this),this.hasShowUploaderOnly()&&this.aContentFilters.push({sKey:"uploadsonly",sDisplay:t.__("videos.uploaded_by",{"%uploader%":e.data.user.display}),bUnwantedForUploadsOnly:!0,bDefaultChecked:!1,bIsChecked:!1,iDisplayOrder:4,iUrlOrder:2}),i.prototype.initAvailableContentFilters.apply(this)},s.prototype.appendPageContent=function(s,o){if(i.prototype.appendPageContent.apply(this,[s,o,!1]),this.getVideosByIdList(s.aIds).length){var a=!1,r=null,l=null,d=null,u=null,c=null;for(var f in this.aContentFilters){var h=this.aContentFilters[f];"membership"===h.sKey?h.bIsChecked&&null===r&&(r=!0):!h.bIsChecked||"ppv"!==h.sKey&&"premium"!==h.sKey||(r=!1),"premium"===h.sKey?(a=!0,null===l&&h.bIsChecked&&(l=!0)):!h.bIsChecked||"ppv"!==h.sKey&&"membership"!==h.sKey||(l=!1),"ppv"===h.sKey?h.bIsChecked&&null===d&&(d=!0):!h.bIsChecked||"premium"!==h.sKey&&"membership"!==h.sKey||(d=!1),"uploadsonly"===h.sKey&&(c=h,u=h.bIsChecked)}if(a&&(!e.dyn.login_info.is_logged||!e.dyn.login_info.is_premium)){var p=$('<a href="'+e.domains.premium+'" class="btn btn-primary purchase-content floating-purchase-btn mobile-show" data-user-id="'+e.data.user.id_user+'">'+t.__("premium.join_site",{"%website%":"XVIDEOS"})+"</a>");this.$videosContainer.append(p)}if(this.$videosContainer.toggleClass("is-ppv-only",d),r&&!1===u&&!c.bIsDisabled){this.$videosContainer.prepend("<p class='top-message'>"+t.__("premium.membership_mixed_offers_can_be_filtered",{"%channel%":e.data.user.display})+"</p>");var _=this.$contentFilters.filter('[data-filter="uploadsonly"]').first();_.removeClass("is-highlighted"),setTimeout(function(){_.addClass("is-highlighted")},50),setTimeout(function(){_.removeClass("is-highlighted")},1e3)}n.initBtns(this.$videosContainer)}this.fnOnLoaded&&"function"==typeof this.fnOnLoaded&&this.fnOnLoaded()},s.prototype.getContentFilterTotal=function(e,t){var i,n,s=[e],o=!1;for(i in this.aContentFilters)n=this.aContentFilters[i],"uploadsonly"===n.sKey&&n.bIsChecked&&(o=!0),"lock-unlock"===n.sKey&&"string"!=typeof t&&(n.bIsDisabled||"locked"!==n.sChoice&&"unlocked"!==n.sChoice||s.push(n.sChoice));"locked"!==t&&"unlocked"!==t||s.push(t);var a=this.getCombinedContentFilters(s);return o&&"number"==typeof this.oNbVideosUploadsOnly[a]?this.oNbVideosUploadsOnly[a]:"number"==typeof this.oNbVideos[a]?this.oNbVideos[a]:0},s.prototype.updateFiltersHtml=function(){var e,t,n=null;for(t in this.aContentFilters)e=this.aContentFilters[t],"uploadsonly"===e.sKey?n=e:"premium"===e.sKey?e.bIsChecked||!1:"ppv"!==e.sKey&&"membership"!==e.sKey||!e.bIsChecked||!1;if(null!==n){var s=this.$contentFilters.filter('[data-filter="uploadsonly"]'),o=this.getActiveFiltersInUrlOrder(),a=!this.hasShowUploaderOnly(o.aFilters);n.bIsDisabled=a,s.toggleClass("is-disabled",a)}i.prototype.updateFiltersHtml.apply(this,[])},s.prototype.getShowUploaderOnlyCount=function(t){var i=this.getCombinedContentFilters(t);return"undefined"!=typeof e.data.show_up_only[i]&&e.data.show_up_only[i]},s.prototype.hasShowUploaderOnly=function(t){var n;if(void 0!==t){return!!this.getShowUploaderOnlyCount(t)}var s=this.mixArrayValuesCombinations(this.aAvailableContentFilters,i.S_SEP_CONTENT_FILTERS);for(n in s)if(e.data.show_up_only[s[n].replace(this.bIsSubOnly?"sub":"sub_membership_ppv","premium")])return!0;return!1},s.prototype.toggleContentFilter=function(e,t){var n,s,o,a=!1,r=!1;for(n in this.aContentFilters)s=this.aContentFilters[n],s.sKey===e&&(o=s),"uploadsonly"===s.sKey&&(a=!0,s.bIsChecked&&(r=!0));if(null!==o){var l=null,d=null;!0===t||"boolean"!=typeof t&&!o.bIsChecked?l=o.sKey:(d=o.sKey,"string"==typeof o.sUncheckKey&&(l=o.sUncheckKey));var u=this.getActiveFiltersInUrlOrder(l,d),c=u.aFilters,f=this.hasShowUploaderOnly(c);if(!a||"uploadsonly"!==e&&!r||"uploadsonly"===e&&(f||!1===t||"boolean"!=typeof t&&o.bIsChecked))return void i.prototype.toggleContentFilter.apply(this,[e,t]);if("uploadsonly"!==e||f)return r&&!f&&"uploadsonly"!==e?(i.prototype.toggleContentFilter.apply(this,["uploadsonly",!1,!0]),void i.prototype.toggleContentFilter.apply(this,[e,t])):void i.prototype.toggleContentFilter.apply(this,[e,t])}},s.prototype.getDesktopFilterSelectorContainer=function(){return document.querySelector("#tabRed .select-filter-list-desktop")},s.prototype.getMobileFilterSelectorContainer=function(){return document.querySelector("#tabRed .select-filter-list-mobile")},s}),define("skins/common/global_feed/profile_feed/profile_feed_filters",["static/log","config/main","skins/common/global_feed/feed_filters/feed_filters"],function(e,t,i){var n=function(){i.apply(this),this.isTextFilterRemoved()&&this.removeEnumFilter("contentType","displayTextOnly"),!1!==t.data.feedShowPremiumVideos&&!1!==t.data.feedDisplayPremium||this.oFilters.showFreePremium&&(this.oFilters.showFreePremium["default"]=1)};return n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.isTextFilterRemoved=function(){return t.data.user?t.data.user.channel===undefined&&t.data.user.model===undefined:(e.warn("ProfileFeedFeedFilters: missing user data, still displaying Text filter"),!1)},n.prototype.canResetFeedSettings=function(){return!1},n}),define("skins/common/global_feed/profile_feed/profile_feed_data/profile_feed_data_content",["static/log","config/main","skins/common/global_feed/feed_data/feed_data_content"],function(e,t,i){var n=function(){i.apply(this)};return n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.buildFromJSON=function(e){return(new n).setFeedSettings(e.metadata.feedSettings).setHasMoreEvents(e.metadata.hasMoreEvents).setDisplayPremium(e.metadata.displayPremium).setLastEventTime(e.metadata.lastEventTime).setContent(e.data.content).setUsers(e.data.users).setShowPremiumVideos(e.metadata.showPremiumVideos)},n.buildFromIndexedDb=function(e){return(new n).setFeedSettings(e.Metadata.feedSettings).setHasMoreEvents(e.Metadata.hasMoreEvents).setDisplayPremium(e.Metadata.displayPremium).setLastEventTime(e.Metadata.lastEventTime).setContent(e.Content).setUsers(e.Users).setShowPremiumVideos(e.Metadata.showPremiumVideos)},n.concatFeedDataContent=function(e,t){var i=(new n).setFeedSettings(t.feedSettings).setHasMoreEvents(t.hasMoreEvents).setLastEventTime(t.lastEventTime).setDisplayPremium(t.displayPremium).setContent(JSON.parse(JSON.stringify(e.getContent()))).setUsers(JSON.parse(JSON.stringify(e.getUsers()))).setShowPremiumVideos(t.getShowPremiumVideos());return i.setContent(i.getContent().concat(JSON.parse(JSON.stringify(t.getContent())))).setUsers(Object.assign(i.getUsers(),JSON.parse(JSON.stringify(t.getUsers())))),i},n.prototype.setShowPremiumVideos=function(e){return this.showPremiumVideos=e,this},n.prototype.getShowPremiumVideos=function(){return this.showPremiumVideos},n.prototype.getSessionSettingsKey=function(){return t.data.user&&t.data.user.id_user?"SessionSettings_"+t.data.user.id_user:void e.error("ProfileFeedDataContent: missing user id")},n.prototype.getDataForIndexedDb=function(){var e=i.prototype.getDataForIndexedDb.call(this);return e.push({key:this.getSessionSettingsKey(),value:{feedSettings:this.getFeedSettings()}}),e},n}),define("skins/common/global_feed/profile_feed/profile_feed_data/profile_feed_data_service",["static/log","lib/tools","skins/common/global_feed/feed_data/feed_data_service","skins/common/global_feed/profile_feed/profile_feed_data/profile_feed_data_content"],function(e,t,i,n){var s=function(n){var o={};if(t.initParams(o,n,s.GET_DEFAULT_OPTIONS()),i.apply(this,[o]),!this.oOptions.sProfile)return void e.error("ProfileFeedDataService: missing profile")};return s.DEFAULT_OPTIONS={oOptions:{FeedDataContent:n,sProfile:undefined,sMainCategory:undefined,aMainCategories:undefined}},s.GET_DEFAULT_OPTIONS=function(){var e={};return t.initParams(e,s.DEFAULT_OPTIONS,i.GET_DEFAULT_OPTIONS()),e},s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.getUrl=function(e){var t="/profiles/"+this.oOptions.sProfile+"/feed";return this.oOptions.sMainCategory&&(t+="/"+this.oOptions.sMainCategory),"number"==typeof e.iTimestamp&&(t+="/"+e.iTimestamp),t},s.prototype.getPostData=function(e){var t=i.prototype.getPostData.apply(this,[e]);return this.oOptions.aMainCategories&&(t.mainCats=this.oOptions.aMainCategories),t},s}),define("skins/common/global_feed/profile_feed/profile_feed",["static/log","config/main","mustache","lib/tools","lib/i18n!front","skins/common/global_feed/feed_controller/feed_controller","skins/common/global_feed/feed_content/feed_content","skins/common/global_feed/profile_feed/profile_feed_filters","skins/common/global_feed/profile_feed/profile_feed_data/profile_feed_data_content","skins/common/global_feed/profile_feed/profile_feed_data/profile_feed_data_service"],function(e,t,i,n,s,o,a,r,l,d){var u={oTemplates:{},oClasses:{id_global_feed:"tabActivity"},oTempState:{},oFunctions:{onVideoAdd:function(e){},init_desktop_channel_videos:undefined}},c=function(e){n.initParams(this,e,u);var i,s=!1;t.data.main_cat?(i=t.data.main_cat,s=t.data.main_cats):!t.data.user.model&&!t.data.user.channel||t.data.no_force_activity||(i=t.dyn.pagefilter,s=[t.dyn.pagefilter]),this.oController=new o({oOptions:{$container:$("#"+this.oClasses.id_global_feed),indexed_db_key:"profile-feed",use_session_settings:!0,oFeedFilters:new r,oFeedContent:new a({oOptions:{posts_fadeout_on_unsub:!1},oClasses:{show_scroll_to_top:"show-scroll-to-top profile-feed-scroll-to-top"}}),oFeedDataContent:new l,oFeedDataService:new d({oOptions:{sProfile:t.data.user.username,sMainCategory:i,aMainCategories:s}})},oFunctions:this.oFunctions,oListeners:{onPostSuccess:function(e,t,i,n){return window.xv.conf.is_dev,!1}}}),this.oController.tryRemoveGalleryHash(),this.init()};return c.prototype={init:function(){$("body").addClass("with-global-feed"),this.oController.init()},onUnfocus:function(){this.oController.handleHideFeed()},onRefocus:function(){this.oController.handleShowFeed()}},c}),define("skins/default/global_feed/profile_feed",["config/main","skins/common/global_feed/profile_feed/profile_feed","skins/default/mozaique/thumb_block_common_init","skins/default/mozaique/thumb_block_menu","skins/default/header/header"],function(e,t,i,n){var s=new t({oFunctions:{onVideoAdd:function(e){i.init_listing(e,{rotator:!1,oBtnOptions:{oOptions:{bPreventScrollToTop:!0}}})},init_desktop_channel_videos:function(e){i.init_listing(e,{tb_menu:!1,purchase_form:!1})}},oTrackers:{tracker_ppv:"profile_feed_ppv",tracker_membership:"profile_feed_membership"}});return n.addEntryToDefaultOrder("report"),e.data.action_need_verified_email&&require(["skins/common/access/need_verified_email"]),s}),define("lib/helpers/viewer/lightgallery-manager",["libs/lightgallery.min"],function(){"object"!=typeof xv&&(xv={}),"object"!=typeof xv.oLG&&(xv.oLG={}),"number"!=typeof xv.oLG.iGalIdCount&&(xv.oLG.iGalIdCount=0);var e=function(){this.is_loaded=!1,this.onLoad=!1,this.bBodyNoScroll=!1,this.bBodyNoScrollSticky=!0},t=new e;return require(["config/main","static/utils","lib/i18n!front","skins/common/history/page_view_history","skins/default/profile/vote/total","lib/helpers/viewer/lightgallery_css_loader","libs/lg-zoom.min","libs/lg-fullscreen.min","libs/lg-hash.min"],function(e,i,n,s,o,a){function r(e,t,i){if(e&&"string"==typeof i.vrating){var n=new o($("<div></div>").appendTo($(".lg")),i.rating,i.vrating,i.total,i.visitor_vote);n.initPostData("/profiles/"+i.owner+"/galleries/"+t+"/vote/good","/profiles/"+i.owner+"/galleries/"+t+"/vote/bad",{csrf:i.csrf}),n.setPopupPosition("above","left")}}xv.oLG.iGalIdCount++;var l=$("body"),d=$(".mozaique.profileslist"),u=d.find(".thumb-block.img-block"),c="undefined"==typeof e.data.galleries,f=!1,h=null,p=null,_={selector:".lightgallery-item",closeOnClick:!1,download:!1,fullScreen:!0,hash:c,galleryId:xv.oLG.iGalIdCount};c&&d.addClass("lightgallery"),u.each(function(){var t=$(this),i=t.find("a").attr("href");i.match(/^(http|https)/g)&&(t.attr("data-src",i).addClass("lightgallery-item"),c||t.wrap('<div class="lightgallery"></div>').on("click",function(){if(h=$(this).data("galid"),p=e.data.galleries[h],1===p.nb_pics){if(p.is_post){try{h=parseInt(h.replace("f-",""))}catch(t){log.error("Invalid gallery ID",h)}return s.addId("photo_gallery_post",h),void(p.view_data&&$.post("/fanclub-post/view",{data:p.view_data}))}p.is_post||(0===h?s.addId("verified_picture",e.data.user.id_user):h>0&&(s.addId("photo_gallery",h),$.post("/profiles/"+p.owner+"/photos-view/"+h+"/")))}}))});var g=$(".lightgallery").lightGallery(_).on("onBeforeOpen.lg",function(){a.loadCssLightgallery()}).on("onAfterOpen.lg",function(){a.loadCssLightgallery(),t.bBodyNoScroll&&!t.bBodyNoScrollSticky?(l.addClass("no-scroll"),l.removeClass("no-scroll-sticky")):t.bBodyNoScrollSticky&&(l.addClass("no-scroll-sticky"),l.removeClass("no-scroll")),f=!0,"undefined"!=typeof e.data.gal&&$("#lg-counter").prepend("<span>"+i.escape(e.data.gal.title)+" : </span>"),$("#lg-zoom-in").attr("title",i.unescape(n.__("misc.image_larger"))).append('<span class="icon-f icf-search-plus"></span>'),$("#lg-zoom-out").attr("title",i.unescape(n.__("misc.image_reduce"))).append('<span class="icon-f icf-search-minus"></span>'),$("#lg-actual-size").attr("title",i.unescape(n.__("misc.image_normal_size"))).append('<span class="icon-f icf-resolution"></span>'),$(".lg-close").attr("title",i.unescape(n.__("misc.close"))).append('<span class="icon-f icf-close"></span>'),$(".lg-fullscreen").attr("title",i.unescape(n.__("misc.fullscreen"))).append('<span class="icon-f icf-fullscreen"></span>'),$(".lg-item").each(function(){$(this).append('<span class="loader icon-f icf-spinner icf-anim-pulse"></span>')}),$(".lg-prev").attr("title",i.unescape(n.__("misc.previous"))).append('<span class="icon-f icf-chevron-left"></span>'),$(".lg-next").attr("title",i.unescape(n.__("misc.next"))).append('<span class="icon-f icf-chevron-right"></span>'),"undefined"==typeof e.data.galleries||null===h||null===p||p.is_post||r(f,h,p)}).on("onCloseAfter.lg",function(){f=!1,l.removeClass("no-scroll no-scroll-sticky")});g.length>0&&(document.addEventListener("fullscreenchange",function(){var e=$(".lg-fullscreen").find(".icon-f");e.hasClass("icf-fullscreen")?e.addClass("icf-fullscreen-back").removeClass("icf-fullscreen"):e.addClass("icf-fullscreen").removeClass("icf-fullscreen-back")}),t.is_loaded=!0,"function"==typeof t.onLoad&&t.onLoad(g))}),t}),define("skins/default/profile/images",[],function(){var e=$(".img-block .gif-tag"),t=function(e){e.each(function(){var e=$(this),t=e.prev(),i=t.position();e.css({left:i.left+3,top:i.top+3})})},i=function(i){if(i){if(0===i.length)return;return i.prev().one("load",function(){t($(this).next())}),t(i),void(e=e.add(i))}t(e)};return e.prev().one("load",function(){t($(this).next())}),i(),$(window).resize(function(){i()}),i}),define("skins/common/listing/loader",["lib/tools","lib/helpers/inline_loader","lib/helpers/thumbs_rotator","static/console","lib/i18n!front","skins/common/history/one_info_tracker"],function(e,t,i,n,s,o){var a=function(e,t,i,n,s,o){this.type=e,this.container=t,this.url=i,this.is_video=!!n,this.is_pic=!!s,this.loading=!1,this.loaded=!1,this.error,this.storeLastPage=!(!o||"string"!=typeof o.storeLastPage)&&o.storeLastPage,this.storeScrollPos=!(!o||"string"!=typeof o.storeScrollPos)&&o.storeScrollPos,this.postParams=o&&"object"==typeof o.postParams?o.postParams:{}};return a.prototype={onLoaded:null,load:function(){if(!this.loading&&!this.loaded){this.loading=!0,this.error&&this.error.remove(),this._display_loader();var e=this,t=this._get_url(!0);n.print('POST "'+t+'"',"Listing loader "+this.type),$.post(t,this.postParams,function(t){n.print("Loaded!","Listing loader "+e.type),e._on_loaded(t)},"html").fail(function(t,i,s){e.storeScrollPos&&o.unset(e.storeScrollPos);var a=0;if(e.storeLastPage&&(a=parseInt(o.get(e.storeLastPage)),o.unset(e.storeLastPage)),n.print("ERROR: "+i+' - "'+s+'"',"Listing loader "+e.type,t),e._on_error(),a>0)return e.loading=!1,e.load(),!1}).always(function(){e.loading=!1})}},get_loader_containers:function(){return this.container},_display_loader:function(){this.get_loader_containers().html('<p class="text-center">'+t.getSafe("after",s.__("profile.loading_"+this.type)).getHtml()+"</p>")},_get_url:function(e){return e?this.url+this._get_url_pagin():this.url},_get_url_pagin:function(){if(this.storeLastPage){var e=o.get(this.storeLastPage);if(e)return"/"+e}return""},_on_error:function(){var e=this;this.container.html('<div class="text-center"><strong><a href="#" class="text-danger">'+s.__("loading.failed_retry")+"</a></strong></div>").find("a").on("click",function(t){return t.preventDefault(),e.load(),!1})},_windowOnScroll:function(){!1!==this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=!1);var e=this;this.scrollTimeout=setTimeout(function(){e.container.is(":visible")&&o.set(e.storeScrollPos,$(window).scrollTop())},250)},_removableOnScroll:!1,removeOnScroll:function(){$(window).off("scroll",this._removableOnScroll)},reinitOnScroll:function(){$(window).off("scroll",this._removableOnScroll),$(window).on("scroll",this._removableOnScroll)},scrollToStoredPos:function(){if(this.storeScrollPos&&o.canTrack(this.storeScrollPos)){var e=parseInt(o.get(this.storeScrollPos));return e>0&&$(window).scrollTop(e),this.reinitOnScroll(),e>0}return!1},_on_loaded:function(t){"string"==typeof t&&(t=e.stripStartScript(t),(this.is_video||this.is_pic)&&(t=e.replaceThumbcast(t)),this.container.html(t),e.executePendingPrepare(this.container.find(".thumb-block")),this.is_video&&i(this.container));var n=this;this._removableOnScroll=function(){n._windowOnScroll()},this.loaded=!0,"function"==typeof this.onLoaded&&this.onLoaded()}},a}),define("skins/common/listing/loader/paginated",["./../loader","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front","skins/common/history/one_info_tracker"],function(e,t,i,n,s){var o=function(t,i,n,o,a,r){if(e.apply(this,arguments),this.storeLastPage=!(!r||"string"!=typeof r.storeLastPage)&&r.storeLastPage,this.storeScrollPos=!(!r||"string"!=typeof r.storeScrollPos)&&r.storeScrollPos,this.page=0,this.storeLastPage){var l=s.get(this.storeLastPage);l&&(this.page=l)}this.loaded_once=!1,this.loading_overlay,this.error_overlay};return o.prototype=new e,o.prototype._get_url=function(){return this._get_url_without_pagin()+this._get_url_pagin()},o.prototype._get_url_without_pagin=function(){return this.url},o.prototype._get_url_pagin=function(){return"/"+this.page},o.prototype.loadPage=function(e){this.page=parseInt(e),this.loaded=!1,this.storeLastPage&&s.set(this.storeLastPage,this.page),this.load()},o.prototype._display_loader=function(){if(!this.loaded_once)return void e.prototype._display_loader.call(this);this.loading_overlay||(this.loading_overlay=i.get(this.container,!1).setContent('<p class="text-center">'+t.getSafe("after",n.__("profile.loading_"+this.type)).getHtml()+"</p>"));var s=this;window.setTimeout(function(){s.loading&&s.loading_overlay&&s.loading_overlay.show()},500),this.error_overlay&&this.error_overlay.hide()},o.prototype._show_overlay=function(){},o.prototype._on_error=function(){if(!this.loaded_once)return void e.prototype._on_error.call(this);if(!this.error_overlay){var t=this;this.error_overlay=i.get(this.container,!0).setContent($('<div class="text-center"><strong><a href="#" class="text-danger">'+n.__("loading.failed_retry")+"</a></strong></div>").find("a").on("click",function(e){return e.preventDefault(),t.load(),t.loading&&t.loading_overlay&&t.loading_overlay.show(),!1}))}this.error_overlay.show(),this.loading_overlay&&this.loading_overlay.hide()},o.prototype.scrollToStoredPos=function(){var e=0;if(this.storeScrollPos&&s.canTrack(this.storeScrollPos)&&(e=parseInt(s.get(this.storeScrollPos)))>0)return $(window).scrollTop(e),e;var t=this.container.find(".pagination").first();if(t.length>0){var i=Math.max(t.offset().top-50,0);$(window).scrollTop()>i&&$(window).scrollTop(i)}},o.prototype._on_loaded=function(t){this.loaded_once=!0,e.prototype._on_loaded.call(this,t);var i=this;this.container.find(".pagination li a:not(.no-pagin), .thumb-block-pagin-next .pagin-next").on("click",function(e){if("function"==typeof i.fnCustomPaginClick)return void i.fnCustomPaginClick(e,$(this),i);if(e.preventDefault(),!$(this).hasClass("active")){var t=$(this).attr("href");t&&(i.storeScrollPos&&s.unset(i.storeScrollPos),i.loadPage(t.substring(1)))}}),this.scrollToStoredPos(),this.loading_overlay&&this.loading_overlay.hide(),this.error_overlay&&this.error_overlay.hide()},o.prototype.setCustomPaginClick=function(e){this.fnCustomPaginClick=e},o}),define("skins/default/profile/vote/good_bad",["./total"],function(e){var t=function(t,i,n,s,o,a,r,l,d,u){this.vgood=i,this.vbad=n,e.apply(this,[t,s,o,a,r,l,d,u])};return t.prototype=new e,t.prototype._init_counts=function(){e.prototype._init_counts.call(this),this.counts_vgood=this.node.find(".rating-bar-block .good"),this.counts_vbad=this.node.find(".rating-bar-block .bad")},t.prototype._get_tpl_vars=function(){var t=e.prototype._get_tpl_vars.call(this);return t.vgood=this.vgood,t.vbad=this.vbad,t.disp_good_bad=!0,t},t.prototype._update_counts=function(t){e.prototype._update_counts.call(this,t),this.counts_vgood.text(t.vgood),this.counts_vbad.text(t.vbad)},t}),define("skins/default/profile/comments/ui_node",["skins/common/thread/ui/node"],function(e){var t=function(t,i){void 0!==t&&e.apply(this,[t,i])};return t.prototype=new e,t.prototype.createChild=function(e,i){return new t(e,i)},t.prototype.getMessageKey=function(t){switch(t){case"node_loading":return"video.loading_comment";case"children_loading":return"video.loading_replies";case"children_error":return"video.failed_loading_replies";case"children_error_retry":return"video.failed_loading_replies_retry"}return e.prototype.getMessageKey.apply(this,[t])},t}),define("skins/default/profile/comments/ui_root",["config/main","skins/common/thread/ui/root","./ui_node","lib/i18n!front"],function(e,t,i,n){var s=function(e,i){this.bNbChildrenMoved=!1,void 0!==e&&t.apply(this,["profile-wall-posts",n.__("video.comments",{},"Comments"),e,i])};return s.prototype=new t,s.prototype.createChild=function(e,t){return new i(e,t)},s.prototype.getMessageKey=function(e){switch(e){case"sort_by":return"profile.comments.sort_top_new_author";case"children_loading":return"video.loading_comments";case"children_error":return"video.failed_loading_comments";case"children_error_retry":return"video.failed_loading_comments_retry";case"load_next_nb_replies":return"video.load_next_nb_comments";case"load_last_reply":return"video.load_last_comment";case"load_last_nb_replies":return"video.load_last_nb_comments";case"load_all_replies":return"misc.load_all_comments";case"reply":case"post_reply":return"video.post_a_comment";case"one_reply_before":return"misc.one_comment_before";case"nb_replies_before":return"misc.nb_comments_before";case"one_reply_between":return"misc.one_comment_between";case"nb_replies_between":return"misc.nb_comments_between";case"one_reply_after":return"misc.one_comment_after";case"nb_replies_after":return"misc.nb_comments_after"}return t.prototype.getMessageKey.apply(this,[e])},s.prototype.getTemplateVars=function(){var i=t.prototype.getTemplateVars.apply(this,[]);return i.lbl_sort_by=i.lbl_sort_by.replace("%author%","object"==typeof e.data.user&&e.data.user.display?e.data.user.display:n.__("misc.author",{},"Author")),i},s.prototype.getNodes=function(){t.prototype.getNodes.apply(this);var e=this.node.find(".thread-header");this.bg_title=$('<h4 class="bg-title grey"></h4>').append(this.node.find(".thread-title")).prependTo(e)},s.prototype.getChildrenNodes=function(){t.prototype.getChildrenNodes.apply(this,[]),this.children_count&&this.children_count.length&&!this.children_count.parent().is(this.bg_title)&&this.children_count.remove()},s.prototype.setNbChildren=function(e,i){t.prototype.setNbChildren.apply(this,[e,i]),e&&!this.bNbChildrenMoved&&(this.bNbChildrenMoved=!0,this.bg_title.append(" (").append(this.children_count.removeClass("thread-node-children-count")).append(")"))},s.prototype.createPopup=function(){t.prototype.createPopup.apply(this,[]),this.sort_author.text(n.__("profile.comments.from_author",{"%author%":"object"==typeof e.data.user&&e.data.user.display?e.data.user.display:n.__("misc.author",{},"Author")},"From %author%"))},s}),define("skins/default/profile",["config/main","./header/header"],function(e){"undefined"!=typeof e.data.user&&require(["static/log","static/dom","lib/tools","lib/i18n!front","lib/tab","lib/history","lib/helpers/popup","skins/common/history/page_view_history","skins/common/history/one_info_tracker","skins/default/profile/tabs/aboutme","skins/common/player/quickies/hashManager","lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","skins/default/profile/title_actions","skins/common/form/cross_site_login"],function(t,i,n,s,o,a,r,l,d,u,c){l.addId("profile",e.data.user.id_user);var f,h=e.dyn.login_info.is_logged&&e.dyn.login_info.profile===e.data.user.username,p=$("#tabRed"),_=e.data.user&&e.data.user.quickies&&e.data.user.quickies.has_quickies,g=!!_&&e.data.user.quickies.horizontal.show,m=g?e.data.user.quickies.horizontal.nb_videos:0,b=!!_&&e.data.user.quickies.vertical.show,v=b?e.data.user.quickies.vertical.nb_videos:0,y=!!_&&e.data.user.quickies.all.show,D=y?e.data.user.quickies.all.nb_videos:0,C=$("#profile-title .profile-pic");if(e.data.user.profile_picture&&C&&C.length){$("#profile-title .profile-pic > img").length&&require(["lib/helpers/viewer/lightgallery-onepic"],function(t){new t("#profile-title .profile-pic > img",e.data.user.profile_picture,{title:s.__("profile.user_profile_picture",{"%name%":e.data.user.display})})})}var w=a.getHash(),S="_tabRed,"===w.substring(0,"_tabRed".length+",".length),k=null,T=$("h2 .profile-maincat-switch").first();T.length&&require(["skins/default/profile/main_cats_switch"],function(e){k=new e(!1,null,"#"+a.getHash(),!0,null),k.setSwitch(T)});var E={},P={last_profile:"profPage_lastProf",last_tab:"profPage_lastTab",last_page:"profPage_lastPage",last_scroll:"profPage_scrollPos",last_video_page:"profPage_v_lastPage",last_video_scroll:"profPage_v_scrollPos"},I=$("#tabVideos");if(I.length){var F,x="_tabVideos,"===w.substring(0,"_tabVideos".length+1);E.tabVideos={},E.tabVideos.action=function(){if(a.unregisterAllHashesExcept("unopenedTabVideos"),F)return void F.loadFilters();require(["skins/default/profile/listing/videos_fjs/videos_tab"],function(e){var t={sHashBase:"_tabVideos",oHistory:a,oQuickiesInfos:{bHasQuickies:_,bShowQuickiesHorizontal:g,iCountQuickiesHorizontal:m,bShowQuickiesVertical:b,iCountQuickiesVertical:v,bShowQuickiesAll:y,iCountQuickiesAll:D},onLoaded:function(){xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds()}};"string"==typeof document.referrer&&-1!==document.referrer.indexOf("/red/videos")&&(t.oLoadUrlParams={from:"redtab"}),F=new e(I,t),F.init()})},x&&(E.tabVideos.subhashes=[w.substring("_tabVideos".length+1)])}if(p.length){var L;E.tabRed={},E.tabRed.action=function(){if(a.unregisterAllHashesExcept("unopenedTabRed"),L)return void L.loadFilters();var e={sHashBase:"_tabRed",oHistory:a,onLoaded:function(){xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds()}};"string"==typeof document.referrer&&-1!==document.referrer.indexOf("/red/videos")&&(e.oLoadUrlParams={from:"redtab"}),"yes"===p.data("is-fanclub")?require(["skins/default/profile/listing/videos_fjs/fanclub/post_list"],function(t){L=new t(p,e),L.init()}):require(["skins/default/profile/listing/videos_fjs/red_tab"],function(t){L=new t(p,e),L.init()})},S&&(E.tabRed.subhashes=[w.substring("_tabRed".length+1)])}$("#tabActivity").length&&(E.tabActivity={},E.tabActivity.action=function(){if(E.tabActivity.profile_feed&&E.tabActivity.profile_feed&&E.tabActivity.profile_feed.onRefocus&&"function"==typeof E.tabActivity.profile_feed.onRefocus)return void E.tabActivity.profile_feed.onRefocus();require(["skins/default/global_feed/profile_feed"],function(e){E.tabActivity.active=!0,E.tabActivity.profile_feed=e})},E.tabActivity.onUnfocus=function(){E.tabActivity.profile_feed&&E.tabActivity.profile_feed.onUnfocus&&"function"==typeof E.tabActivity.profile_feed.onUnfocus&&E.tabActivity.profile_feed.onUnfocus()}),E.tabAboutMe={},E.tabAboutMe.action=function(){u(),$("#goto-activity").on("click",function(e){e.preventDefault(),$("#tab-activity").click()}),xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds()},h&&(E.tabAboutMe.active=!0);var O=$("#tabPhotos");if(O.length){var M=!1;E.tabPhotos=function(){if(!M){M=!0;0!==O.find(".img-block").length&&require(["skins/default/profile/action/link","lib/helpers/viewer/lightgallery-manager","skins/default/profile/images"],function(t,i){var n=$("#delete-verified-picture");if(n.length){n.on("click",function(e){e.stopPropagation()});new t(n,"/profiles/"+e.data.user.username+"/unverify",s.__("profile.unverify.confirm"),!1,e.data.user.csrf.uunverify).onSuccess=function(){n.parents(".img-block").remove(),window.location.reload()}}xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds()})}}}var A=$("#favs-container");if(A.length){var V;E.tabFavorites=function(){if(!V){require(["skins/common/listing/loader/paginated","skins/default/profile/vote/good_bad","skins/default/mozaique/thumb_block_common_init"],function(t,n,s){V=new t("favorites",A,e.data.user.url+"/favorites",!0);var o=!0;V.get_loader_containers=function(){return o?(o=!0,this.container.find(".favorites")):this.container};var a=!1;V.onLoaded=function(){s.init_listing(A,{rotator:!1}),d.set(P.last_page,V.page);var t=0;if("string"==typeof a){var o=$(ie).find("#"+a).first();o.length&&(t=o.offset().top-se)}var r=e.data.user.id_user;$(".fav-list-votes").each(function(){var e=$(this),t=e.data("vote"),i=e.data("id");new n(e,t.vgood,t.vbad,t.rating,t.vrating,t.total,t.visitor_vote,null,null,!0).initPostData("/api/playlists/list/"+i+"/vote/GOOD","/api/playlists/list/"+i+"/vote/BAD",{csrf:t.csrf,id_user:r})}),i.scrollToTop(t)};var r=0;if("tabFavorites"===d.get(P.last_tab)){a=d.get(P.last_scroll);var l=d.get(P.last_page);"number"==typeof l&&(r=l)}V.loadPage(r),xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds()});var t=$("#profile-favs-add"),n=$("#profile-favs-manage");(t&&t.length||n&&n.length)&&require(["skins/default/video/playlists/manager"],function(e){t.on("click",function(t){t.preventDefault(),e.loadCreateList()}),n.on("click",function(t){t.preventDefault(),e.loadEditList()})})}},require(["skins/default/video/playlists/manager"],function(e){e.autoOpenByHash()})}var N=$("#tabComments");if(N.length){var R;E.tabComments=function(){xv.sda&&"function"==typeof xv.sda.enableFooterAds&&xv.sda.enableFooterAds();var t=$("#profile-comments-tab-chat-btn");if(t.length&&(e.dyn.login_info&&e.dyn.login_info.is_logged?xv.chat&&xv.chat.actions&&"function"==typeof xv.chat.actions.set_chat_toggle?xv.chat.actions.set_chat_toggle(t):(xv.chat||(xv.chat={}),xv.chat.infos||(xv.chat.infos={}),xv.chat.infos.to_set_chat_toggle_link_outside_done||(xv.chat.infos.to_set_chat_toggle_link_outside_done=[]),xv.chat.infos.to_set_chat_toggle_link_outside_done.push({elem:t})):require(["skins/default/form/login"],function(i){t.on("click",function(t){t.preventDefault(),i.setOpenCloseModes("signup"),i.open(null,{sThisOpenOnlyTracker:"profchatbtn",sThisOpenOnlyOrigin:e.dyn.is_premium?"profile_page_chat_tab_comments":null})})})),!R){require(["skins/common/thread/root","skins/default/profile/comments/ui_root"],function(t,i){var n=$("<div></div>").appendTo(N),s=new i(e.data.user.id_user,n);R=new t("profile-wall-posts",e.data.user.id_user,s,"skins/default/form/login"),R.onFirstLoaded=function(e){
t.prototype.onFirstLoaded.apply(this,[e])},R.setSort(t.SORT_NEW),R.load()});var i=$("#privacy-edit-comments");i.length&&require(["skins/default/profile/action/popup_form"],function(t){var n=new t(i),o=[];o.push({opt_value:"REGISTER",opt_label:s.__("profile.allow.only_registered")}),o.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),o.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.nobody")}),n.addSetting(s.__("profile.privacy.who_can_comment"),"profile[wall_access]",o,e.data.user.access.wall)})}}}var B=$("#btn-share");B.length&&require(["mustache","static/utils","lib/helpers/popup","skins/common/video/share"],function(e,t,i,n){var s=new i(B,"",{popup_class:"share-toolbox",autoclose:!0,mouseout_autoclose:5e3});s.onOpen=function(){s.setContent(n.getShareElem(window.location.href,document.title,"full")),s.position()}});var U=$(".banner-slider");if(U&&U.length){var H,j=function(){H=U.find(".banner-slide")};if(j(),H.length>1){var q,z=function(e){clearTimeout(q),q=setTimeout(function(){G()},e)},W=function(e){e?(e.preventDefault(),e.stopPropagation(),z(15e3)):z(5e3),j(),H.last().prependTo(Q).on("animationend animationcancel",function(){$(this).off("animationend animationcancel"),U.removeClass("to-prev")}),U.removeClass("to-next").addClass("to-prev")},G=function(e){e?(e.preventDefault(),e.stopPropagation(),z(15e3)):z(5e3),j(),H.first().on("animationend animationcancel",function(){$(this).off("animationend animationcancel"),H.first().appendTo(Q),U.removeClass("to-next")}),U.removeClass("to-prev").addClass("to-next")},Y=Date.now(),K=function(e){clearTimeout(q),Y=Date.now()},X=function(e){clearTimeout(q)},J=function(){Date.now()-Y>250&&z(3500)},Q=$('<div class="banner-slider-container"></div>'),Z=$('<button type="button" class="banner-slider-left"><span class="icon-f icf-chevron-left"></span></button>'),ee=$('<button type="button" class="banner-slider-right"><span class="icon-f icf-chevron-right"></span></button>');U.append(Q,Z,ee),Q.append(H);for(var te=0;H.index(H.filter(".banner-first-forced"))>0&&te<10;)H.first().appendTo(Q),j(),te++;H.removeClass("banner-first-forced"),U.on("click",K),U.on("mouseover",X),U.on("mouseout",J),Z.on("click",W),ee.on("click",G),z(3500)}H.length&&H.on("click",function(){var e=$(this).prop("href");if("string"==typeof e&&-1!==e.indexOf("#_tabRed")){var t=$("#tab-videos-red, #tab-posts");t.length&&n.scrollTo(t,xv.header.is_mobile()?48:8)}})}var ie=!1,ne=!1,se=Math.min(150,$(window).height()/4),oe=function(){if(d.canTrack(P.last_tab)&&!1!==ie){var e=!1,t=!1,i=$(window).scrollTop()+se;$(ie).find(".activity-event").each(function(){t||($(this).offset().top-i>0?t=!0:e=this)}),$(e).length&&d.set(P.last_scroll,$(e).prop("id"))}},ae=function(){!1!==ne&&(clearTimeout(ne),ne=!1),ne=setTimeout(oe,250)},re=new c,le=re.isHashOpened(),de=function(e,t,i){if($(t).toggleClass("active",!!i),i)for(var n in e.tabs)if(e.tabs[n].active){var s=e.tabs[n].id;"tabActivity"===s||"tabFavorites"===s?(ie="#"+n,$(window).on("scroll",ae)):(ie=!1,$(window).off("scroll",ae)),d.canTrack(P.last_tab)&&("tabVideos"!==s&&(d.unset(P.last_video_scroll),d.unset(P.last_video_page)),d.get(P.last_tab)!==s&&(d.set(P.last_tab,s),d.unset(P.last_scroll),d.unset(P.last_page)))}};if(d.canTrack(P.last_profile)){d.get(P.last_profile)!==e.data.user.id_user&&(!function(){for(var e in P)d.unset(P[e])}(),d.set(P.last_profile,e.data.user.id_user))}f=new o("#profile-tabs",E,!1,!0,de,{oHistory:a,bFirstHashUpdate:!le,sTabContainerSelector:$("#profile-tabs .xv-slim-tabs").length?".xv-slim-tabs":null}),I.length&&a.registerAllHashesExcept("unopenedTabVideos",function(e,t){"_tabVideos,"===e.substring(0,"_tabVideos".length+",".length)&&(f.setSubHash("tabVideos",e.substring("_tabVideos".length+1)),f._onhashchange(e,t))}),p.length&&a.registerAllHashesExcept("unopenedTabRed",function(e,t){"_tabRed,"===e.substring(0,"_tabRed".length+",".length)&&(f.setSubHash("tabRed",e.substring("_tabRed".length+1)),f._onhashchange(e,t))}),f.addOnOpenCallback(function(e){null!==k&&k.updateHash("#_"+e)}),le&&require(["skins/common/player/quickies/manager"],function(t){var i=new t(!0,"profile",{aSortFilters:["best"],oAvailableOrientations:{bHorizontal:g,bVertical:b,bAll:y},oHashManager:re});i.setFullNavigationToProfile(e.data.user.id_user),re.saveHash("_tabVideos"),i.setOnLoaded(function(){"object"==typeof xv.disclaimer&&xv.disclaimer.bIsOpen?document.addEventListener(xv.disclaimer.EVENT.CLOSE_POP,function(){i.openWithHash()}):i.openWithHash()})});var ue=$("#profile-tabs .sticky-tabs");if(ue.length){var ce,fe,he,pe=null,_e=null,ge=null,me=$("#profile-tabs"),be=parseInt(me.css("padding-top")),ve=function(){var e=(he?he.top:0)-$(window).scrollTop()-5;ue.toggleClass("is-sticky",e<ce),me.css("padding-top",be+(e<ce?fe:0)+"px")},ye=function(){var e=i.getViewportWidth(),t=i.getViewportHeight(),n=e<t?"vertical":"horizontal",s=e<768;n===pe&&e===ge&&s===_e||(pe=n,_e=s,ge=e,ce=_e&&"vertical"===pe?40:0,fe=ue.outerHeight(),ue.removeClass("is-sticky"),me.css("padding-top",be+"px"),setTimeout(function(){he=ue.offset(),ve()},100))};isNaN(be)&&(be=0),$(window).on("resize",ye),$(window).on("scroll",ve),setTimeout(ye,1e3),setTimeout(ye,2e3),setTimeout(ye,5e3),ye()}})}),define("text!skins/default/profile/action/gallery_report_bar.mustache",[],function(){return'<div id="gallery-report-bar" class="hidden">\n\t<div>\n\t\t<div class="text-danger"></div>\n\t\t<button type="button" class="btn btn-default btn-danger btn-lg btn-report"><span class="icon-f icf-flag"></span> <span class="label"></span></button>\n\t\t<button type="button" class="btn btn-default btn-lg btn-reset" title="{{{ lbl_cancel }}}"><span class="icon-f icf-rotate-left"></span><span class="mobile-only-hide"> {{{ lbl_cancel }}}</span></button>\n\t</div>\n</div>'}),define("skins/default/profile/gallery/gallery",["config/main","lib/tools"],function(e,t){var i=function(e){t.initParams(this,e,i.GET_DEFAULT_OPTIONS())};return i.DEFAULT_OPTIONS={oOptions:{sHistoryId:"photo_gallery",bVoteGoodBad:!0},oFunctions:{fnTransformId:function(e){return e}}},i.GET_DEFAULT_OPTIONS=function(){return i.DEFAULT_OPTIONS},i.prototype={init:function(){"undefined"!=typeof e.data.user&&(this.initProfilePic(),"undefined"!=typeof e.data.gal&&"undefined"!=typeof e.data.gal.id_gal&&this.initGallery())},initProfilePic:function(){var t=$("#profile-title .profile-pic");if(e.data.user.profile_picture&&t&&t.length){$("#profile-title .profile-pic > img").length&&require(["lib/i18n!front","lib/helpers/viewer/lightgallery-onepic"],function(t,i){new i("#profile-title .profile-pic > img",e.data.user.profile_picture,{title:t.__("profile.user_profile_picture",{"%name%":e.data.user.display})})})}},initVoteGoodBad:function(){require(["skins/default/profile/vote/good_bad"],function(t){var i=e.data.gal;new t($("#gal-list-votes"),i.vgood,i.vbad,i.vrating,i.rating,i.total,i.visitor_vote).initPostData("/profiles/"+i.owner+"/galleries/"+i.id_gal+"/vote/good","/profiles/"+i.owner+"/galleries/"+i.id_gal+"/vote/bad",{csrf:i.csrf})})},initGallery:function(){var e=this;require(["config/main","lib/tools","skins/common/history/page_view_history","lib/helpers/viewer/lightgallery-manager","skins/default/profile/title_actions","skins/default/profile/tabs/aboutme","skins/default/profile/images"],function(t,i,n,s){n.addId(e.oOptions.sHistoryId,e.oFunctions.fnTransformId(t.data.gal.id_gal));var o=i.getUrlHash(),a=$("#report-gallery");if(e.oOptions.bVoteGoodBad&&e.initVoteGoodBad(),o.length>0&&o.match(/^_galpic-\d+$/g)){var r=$("#"+o.substring(1));1===r.length&&(s.is_loaded?r.hasClass("lightgallery-item")&&r.trigger("click"):s.onLoad=function(){r.hasClass("lightgallery-item")&&r.trigger("click")})}a.length>0&&require(["mustache","skins/default/profile/action/report","lib/i18n!front","text!skins/default/profile/action/gallery_report_bar.mustache"],function(e,i,n,s){var o=null,r=[],l=t.data.max_report_nb_pics,d=null,u=$("#tabPhotos .thumb-mozaique .report-gallery-pic").on("click",function(e){e.preventDefault(),e.stopPropagation();var i=$(this),s=!i.hasClass("selected");if(s)r.push(i.data("pic"));else{var a=r.indexOf(i.data("pic"));a>-1&&r.splice(a,1)}i.toggleClass("selected",s).parents(".thumb-block").toggleClass("selected",s);var u=r.length,c=d.toggleClass("hidden",0===u).find(".btn-report"),f=d.find(".text-danger");c.find(".label").html(n.__(u>1?"report_form.report_pics":"report_form.report_one_pic",{"%nb%":u.toString()})),c.prop("disabled",r.length>l),r.length>l?f.html("<p>"+n.__("report_form.max_pics_report_warn",{"%nb_pictures%":l.toLocaleString(t.dyn.locale)})+"</p>"):f.html(""),o.setPictures(r)});if(u.length>0){d=$(e.render(s,{lbl_cancel:n.__("misc.cancel")})).appendTo($("body")),a=a.add(d.find("button.btn-report"));var c=function(){u.filter(".selected").removeClass("selected").parents(".thumb-block").removeClass("selected"),r=[],d.addClass("hidden"),o.setPictures([])};d.find("button.btn-reset").on("click",c)}o=new i("gallery",a,$("#page")),u.length>0&&(o.onReported=function(){if(r.length>0){var e=u.filter(".selected");u=u.not(e),e.parents(".thumb-block").removeClass("selected"),e.remove(),c(),u=u.not(e),0===u.length&&a.remove()}else u.remove()})})})}},i}),define("skins/default/profile_gallery",["config/main","skins/default/profile/gallery/gallery","./header/header"],function(e,t){(new t).init()}),define("skins/default/profile_gallery_post",["static/log","config/main","skins/default/profile/gallery/gallery","./header/header"],function(e,t,i){new i({oOptions:{sHistoryId:"photo_gallery_post",bVoteGoodBad:!1},oFunctions:{fnTransformId:function(t){try{return parseInt(t.replace("f-",""))}catch(i){e.error("Invalid gallery ID",t)}}}}).init()}),define("skins/default/profiles_videos",["./header/header","lib/helpers/thumbs_rotator"],function(){}),define("skins/default/search",["config/main","static/thumbs","lib/i18n!front","static/utils","./mozaique/premium_result_on_free","./mozaique/search_base"],function(e,t,i,n,s){var o=$("#search-associates");o.find(".show-more a").on("click",function(){o.toggleClass("mobile-expanded")}),$(".report-search").on("click",function(t){t.preventDefault(),require(["skins/common/search/report"],function(t){var i=new t;i.setMain(e.data.search,e.data.search),$("#search-associates .search-associated").each(function(){var e=n.escape($(this).text());i.setRelated(e,e)}),i.openForm()})}),new s(e.data.search);var a="";if("straight"!==e.dyn.user_main_cat&&(a="/"+e.dyn.user_main_cat),e.data.premium_search&&e.data.premium_search.active&&(!e.dyn.login_info.is_logged||!e.dyn.login_info.is_premium)){var r="string"==typeof e.data.premium_search.floatingCtaTourUrl?e.data.premium_search.floatingCtaTourUrl:e.domains.premium+"/account/create"+a,l=$('<a href="'+r+'" class="btn btn-primary purchase-content floating-purchase-btn mobile-show">'+i.__("premium.join_site",{"%website%":"XVIDEOS"})+"</a>");$("#content").append(l)}}),define("skins/common/video/download",["static/log","lib/helpers/inline_loader","lib/i18n!front"],function(e,t,i){var n=function(e,t,i){this.container=e,this.encoded_video_id=t,this.displayed=!1,this.key_hd_for_premium=i,this.node_type="<p>",this.bLoggedRequired=!0};return n.prototype={check:function(){this.displayed||(this.displayed=!0,this.messages=i.__("video.download.*"),this.messages.uhd="4K",this.check_download())},on_not_logged:function(){e.error("download.on_not_logged not implemented")},fnEmailNotVerified:function(t){e.error("download.fnEmailNotVerified not implemented")},setLoggedRequirement:function(t){"boolean"==typeof t&&(this.bLoggedRequired=t),e.info("download.setLoggedRequirement",t,this.bLoggedRequired)},on_checked:function(t){if(e.info("download.on_checked",t,"bLoggedRequired:",this.bLoggedRequired),this.bLoggedRequired){if(!t.LOGGED)return void this.on_not_logged();if(!t.EMAIL_VERIFIED)return void this.fnEmailNotVerified(t.data.action_need_verified_email)}var i=$(this.node_type).addClass("text-center");if("string"==typeof t.ERROR)i.addClass("text-danger").html(t.ERROR);else if("string"!=typeof t.URL){var n=this;i.addClass("text-danger").html(this.messages.error_occured_retry.replace("%here%",'<a href="#"><strong>'+this.messages.here+"</strong></a>")).find("a").on("click",function(e){n.check_download(e)})}else{var s=[];t.MP4_4K_AVAILABLE&&t.URL_MP4_4K&&s.push('<a href="'+t.URL_MP4_4K+'" target="_blank"><strong class="label label-danger">'+this.messages.uhd+"</strong></a>"),t.MP4HD_AVAILABLE&&!t.MP4HD_ERROR&&t.URL_MP4HD&&s.push('<a href="'+t.URL_MP4HD+'" target="_blank"><strong>'+this.messages.high_qual.replace("%mp4hd_res%",t.MP4HD_RESOLUTION||"720p")+"</strong></a>"),s.push('<a href="'+t.URL+'" target="_blank"><strong>'+this.messages.medium_qual+"</strong></a>"),t.URL_LOW&&s.push('<a href="'+t.URL_LOW+'" target="_blank"><strong>'+this.messages.low_qual+"</strong></a>");var o=this.messages.dl_high_medium_low.replace("%high_medium_low%",s.join(" / "));t.MP4HD_AVAILABLE&&(t.IS_PREMIUM?!t.MP4HD_ERROR&&t.URL_MP4HD||(o+="<br>"+this.messages.hd_available_soon.replace("%link_start%",'<a href="#" class="retry"><strong>').replace("%link_end%","</strong></a>")):o+="<br>"+this.messages[this.key_hd_for_premium]);var n=this;i.addClass("download-ready").html(o).find("a.retry").on("click",function(e){n.check_download(e)})}this.container.empty().append(i)},check_download:function(e){void 0!==e&&e.preventDefault(),this.container.append($("<p>").addClass("text-danger text-center").append(t.getSafe("after",this.messages.checking).getNode()));var i=this;$.post("/video-download/"+this.encoded_video_id+"/",{},function(e){i.on_checked(e)},"json").fail(function(){i.container.empty().append($("<p>").addClass("text-danger text-center").html(i.messages.error_occured_retry.replace("%here%",'<a href="#">'+i.messages.here+"</a>"))).find("a").on("click",function(e){i.check_download(e)})})}},n}),define("skins/default/video/download",["config/main","skins/common/video/download","lib/i18n!front"],function(e,t,i){var n=e.data.id_video;e.data.encoded_id_video&&(n=e.data.encoded_id_video);var s=new t($("#tabDownload"),n,"hd_for_red");return s.on_not_logged=function(){var e=this;require(["skins/default/form/login"],function(t){"function"==typeof t.setOriginFromAction&&t.setOriginFromAction(),t.setupLinks($('<h4 class="text-center text-danger">'+i.__("video.must_have_account_to_download",{},"You must have an account to download a video.")+' <a class="text-danger">'+i.__("misc.click_here_login_create_account")+"</a></h4>").appendTo(e.container.empty()).children("a"))})},s.fnEmailNotVerified=function(e){require(["skins/common/email_verification/email_verification_modal"],function(t){new t(e).show()})},function(){s.displayed||(s.check(),s.node_type="<div>",s.messages.dl_high_medium_low='<h4 class="clear-infobar"><span class="icon-f icf-download"></span> '+i.__("misc.download")+"</h4> <p>%high_medium_low%</p>",s.messages.uhd='<span class="video-hd-mark">4K</span>',s.messages.high_qual='<span class="video-hd-mark">%mp4hd_res%</span>',s.messages.medium_qual='<span class="video-sd-mark">360p</span>',s.messages.low_qual='<span class="video-sd-mark">240p</span>')}}),define("skins/common/video/auto_tr_title",["config/main","lib/i18n!front","static/utils"],function(e,t,i){var n=!0,s=$("#title-auto-tr-switch").on("click",function(){$("#title-auto-tr").html(n?e.dyn.video_title_ori:e.dyn.video_title),s.prop("title",i.unescape(n?t.__("video.original_title_click_switch_auto_translated",{},"This is the original title. Click to switch to the automatically translated title."):t.__("video.auto_translated_title_click_for_original",{},"This title has been automatically translated. Click to switch to the original title."))),n=!n});s&&s.length&&require(["lib/helpers/popup","skins/common/basic_feature"],function(e,i){var n="rtl"===$("html").prop("dir"),o=new e(s,$("<p>"+t.__("video.auto_translated_title_disable_in_settings",{"%link%":'<a class="disable-auto-translate" href="#">',"%link_end%":"</a>"})+"</p>"),{popup_class:"auto-translate-pop-info",trigger:!1,autoclose:50,max_width:350,trigger_open:"mouseenter",position:{v:"below",h:n?"right":"left"}}),a=new i(i.S_F_AUTO_TITLE_TRANSLATE);o.onOpen=function(){o.popup.find(".disable-auto-translate").off("click").on("click",function(e){e.preventDefault(),o.close(),a.disable(function(){window.location.reload()})})}})}),define("skins/common/video/tracking",["config/main"],function(e){var t=function(){if(this.allow_tracking=!1,this.declare_sent=!1,this.last_view=!1,this.storageAvailable()&&e.dyn.ref&&e.dyn.id){var t=localStorage.getItem("last_view");if(t){var i=JSON.parse(t);i&&i.id&&i.ref&&i.id!=e.dyn.id&&(this.last_view=i,this.allow_tracking=!0)}var n={};n.id=e.dyn.id,n.ref=e.dyn.ref,localStorage.setItem("last_view",JSON.stringify(n))}};return t.prototype={storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},declareLink:function(){if(console.log("Try to declare link"),!this.declare_sent&&this.last_view&&this.allow_tracking){this.declare_sent=!0;var t={};t.gentime=e.dyn.gentime,t.source_id=this.last_view.id,t.source_ref=this.last_view.ref,t.current_id=e.dyn.id,t.current_ref=e.dyn.ref,$.post("/video-hit",t)}}},new t}),define("skins/common/video/related",["config/main","static/dom","lib/helpers/thumbs_rotator","lib/tools"],function(e,t,i,n){var s,o=$("#related-videos"),a=o.children(".show-more"),r=!1,l=o.children(".mozaique"),d=l.children(".thumb-block"),u=!1;0===a.length&&(a=o.children(".row").find(".show-more"));var c=function(e){if(!0===e||u){u=!1,s=null;var n=!1,o=!1,a=$();if(!r){var l=t.getViewportWidth();n=l<=480?"after-8":l<=768?"after-9":l<=992?"after-8":"after-10"}d=d.filter(function(){var e=$(this),t=e.find(".thumb a"),i=t.data("src");if(!i)return!1;if(o)return!0;if(n&&e.hasClass(n))return o=!0,!0;var s=t.data("vid");return t.append('<img src="'+i+'" id="pic_'+s+'" style="display:none;" onload="this.style.display=\'\';" />'),a=a.add(e),!1}),a.length>0&&i(a,!0)}},f=function(){"function"==typeof window.display_related_native&&window.display_related_native(),a.off("click"),r=!0,c(!0),o.addClass("expanded")};c(!0);var h=function(){for(var e=$("#tabComments"),t=$("#related-videos"),i=t.find(".thumb-block[id]"),n=i.first().innerHeight(),s=t.innerHeight(),l=e.innerHeight(),d=l-s>=0?Math.round(l/n):Math.round(s/n),u=Math.round(t.width()/i.first().width())*d,f=0;f<u;f++)i.eq(f).show();"function"==typeof window.display_related_native&&window.display_related_native(),u>i.length&&(a.off("click"),r=!0,c(!0),o.addClass("expanded"))};window.xv.videopage||(window.xv.videopage={}),window.xv.videopage.displayRelatedVideos=function(){var e=$("#related-videos");$("#tabComments_bottom_page").length>0||!e.is(":visible")||e.width()===$(".tabs").width()||o.hasClass("expanded")||h()},a.on("click",function(e){e.preventDefault(),f(),n.setUrlHash("show-related",!0)}),$(window).on("resize",function(){u=!0,s||(s=setTimeout(c,500))}),$(document).ready(function(){c(!0)})}),define("skins/default/video/subscribe",["skins/default/profile/subscribe/btn"],function(e){$(".video-tags-list .user-subscribe").each(function(){new e($(this),$(this).data("user-profile"),$(this).data("user-id"),null,null,null,{bRemoveButtonIfLoadingError:!0})}),$(".premium-page .video-tags-list .model-star-sub").each(function(){$(this).click(function(){event.preventDefault(),$(this).closest(".model").find(".user-subscribe").trigger("click")})})}),define("skins/default/video/tags",["static/dom"],function(e){var t=$("#main .video-tags-list.video-metadata.cropped"),i=t.find(".is-pornstar, .is-keyword").parent();if(0!==i.length){var n=t.find("li.view-more-li"),s=!1,o=!1,a=function(){i=t.find(".is-pornstar, .is-keyword").parent();var e=$("#metadata_suggestion_popup_opener").parent();if(o="undefined"==typeof xv.header||"function"!=typeof xv.header.is_mobile||!xv.header.is_mobile(),!s||o){n.css("display","inline-block");var a=0,r=0;return i.not(":hidden").each(function(){if(!(r>2||"none"===$(this).css("display"))){var t=$(this).offset().top;if(t>a&&(a=t,r++),r>2)return!1;n.insertAfter($(this)),e.insertAfter($(this)),2===r&&n.offset().top>a&&(n.insertBefore($(this)),e.insertBefore$($(this)),r++)}}),r<=2||0===n.next().length?void n.hide():void 0}},r=function(i){if(s="boolean"==typeof i?i:!s,n.find("a").html(s?"-":"+"),s){if(t.addClass("opened"),o)t.find("ul").first().append(n);else if(t.find("li.view-more-li").length<2){var l=$('<li class="view-more-li"><a href="#" class="view-more btn btn-default" title="more tags">-</a></li>');l.css("display","inline-block").on("click",r),t.find("ul").first().append(l)}}else t.removeClass("opened"),o||e.isElementInView(t)||e.scrollToTop(t.offset().top-6),a()};$(window).on("resize",a),n.on("click",r),$(document).on("tags_line_limiter",function(e){a()}),a()}}),define("text!skins/default/video/playlists/related_tabs.mustache",[],function(){return'<div class="related-content">\n\t<ul class="related-content__btns">\n\t\t<li><a role="button" data-href="related-videos" class="link active"><span class="btn__text">{{{ label_videos }}}</span></a></li>\n\t\t<li><a role="button" data-href="related-playlists" class="link btn--playlists"><span class="btn__text">{{{ label_playlists }}} <span class="btn__nb-playlists">{{ nb_playlists }}</span></span></a></li>\n\t</ul>\n\t<div class="related-content__tabs">\n\t\t<div id="related-playlists">\n\t\t\t<div class="favlists">\n\t\t\t\t<div class="mozaique"></div>\n\t\t\t</div>\n\t\t</div>\n    </div>\n</div>'}),define("skins/default/video/playlists/related",["config/main","mustache","lib/tools","static/thumbs","lib/helpers/inline_loader","skins/default/video/playlists/one_list","text!skins/default/video/playlists/related_tabs.mustache","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(){this.$relatedVids=$("#related-videos"),0!==this.$relatedVids.length&&(this.$relatedPlaylists=null,this.$relatedContent=null,this.$activePane=null,this.$activeTab=null,this.bRelatedLoaded=!1,this.init())};return l.prototype={init:function(){"object"==typeof e.dyn.vmdata&&"number"==typeof e.dyn.vmdata.nb_playlists&&e.dyn.vmdata.nb_playlists>5&&(this.initTabs(),this.$relatedVids.removeClass("is-loading-related-content"))},initTabs:function(){this.$relatedContent=$(t.render(a,{label_videos:r.__("related_videos",{},"Related videos"),label_playlists:r.__("related_playlists",{},"Related playlists"),nb_playlists:e.dyn.vmdata.nb_playlists_f})),this.$relatedVids.before(this.$relatedContent),this.$relatedContent.find(".related-content__tabs").prepend(this.$relatedVids.addClass("active")),this.$relatedPlaylists=$("#related-playlists"),this.$activePane=this.$relatedVids,this.$activeTab=this.$relatedContent.find(".related-content__btns a");var i=this;this.$activeTab.on("click",function(e){e.preventDefault(),i.changeTab($(e.currentTarget))}).filter(".active"),window.location.hash==="#_"+this.$relatedPlaylists.attr("id")&&this.changeTab(this.$relatedContent.find('.related-content__btns  a[data-href="'+this.$relatedPlaylists.attr("id")+'"]'));var n=null;$(window).on("resize",function(){null!==n&&clearTimeout(n),n=setTimeout(function(){n=null,$('.related-content__btns  a[data-href="'+i.$activePane.attr("id")+'"]').addClass("active")},100)})},changeTab:function(e){if(!e.hasClass("active")){this.$activeTab.removeClass("active"),this.$activeTab=e,this.$activeTab.addClass("active");var t=this.$activePane.height();this.$activePane.removeClass("active"),this.$activePane=$("#"+e.data("href")),this.$activePane.addClass("active").height(t),window.location.hash="_"+e.data("href"),i.scrollTo(".related-content",30,0),!this.bRelatedLoaded&&this.$activePane.is(this.$relatedPlaylists)?this.loadPlaylists():this.$activePane.css("height","auto")}},loadPlaylists:function(t){"object"==typeof t&&"function"==typeof t.preventDefault&&t.preventDefault(),0===this.$relatedPlaylists.find(".text-center").length&&this.$relatedPlaylists.append($('<p class="text-center">'+s.get("after",r.__("loading.loading")).getHtml()+"</p>"));var i=this;$.getJSON("/video-playlists/"+e.data.id_video,function(e){return e.result?0===e.playlists.length?(i.$relatedContent.find(".badge-nb-playlists").remove(),void i.$relatedPlaylists.append($('<p class="text-center"><strong>'+r.__("related_playlists.none_found",{},"No playlist found with this video")+"</strong></p>"))):void i.createPlaylists(e.playlists):void i.loadPlaylistsFailed()}).fail(i.loadPlaylistsFailed)},loadPlaylistsFailed:function(){var e=this;this.$relatedPlaylists.append($('<p class="text-center"><a href="#" class="text-danger"><strong>'+r.__("loading.failed_retry")+"</strong></a></p>")).find("a").on("click",function(t){e.loadPlaylists(t)})},createPlaylists:function(e){var t=this.$relatedPlaylists.find(".mozaique");this.$relatedContent.find(".badge-nb-playlists").text(e.length.toFixed(0)),this.$relatedPlaylists.find(".text-center").remove(),t.empty();for(var i in e){var s=e[i];"Default"===s.name&&(s.name=r.__("playlist.porn")),t.append(n.get_thumb_block_html(new o({id:s.id,name:s.name+(s.profile_url?' <span class="creator">'+r.__("misc.by",{},"by")+" "+s.profile_name+"</span>":""),url:s.url,cover:s.cover,status:s.status,nb_videos:s.nb_videos,nb_videos_f:s.nb_videos_f,type:"related"}),"related_favlist",{tb_t_inside_start:'<a href="'+s.url+'" title="'+s.name+(s.profile_url?" "+r.__("misc.by",{},"by")+" "+s.profile_name:"")+'">',tb_t_inside_end:"</a>"}).html)}this.bRelatedLoaded=!0,this.$activePane.css("height","auto")}},new l}),define("skins/common/video/fake_loader",[],function(){return function(e){var t=$("#html5video .video-loader");if(t.length>0){t.find(".buffer").animate({height:"100%"},2e3);var i=t.find(".label"),n=0;setInterval(function(){n+=5,n>100&&(n=100),i.text(n+"%")},97),"function"==typeof e&&setTimeout(e,2e3)}else"function"==typeof e&&e()}}),define("text!skins/default/video/premium_block_popup.mustache",[],function(){return'<div id="video-premium-alert">\n\t<p>{{{ text_above }}}</p>\n\t<div class="video-premium-alert-row">\n\t\t<div class="video">\n\t\t\t<img src="{{{ video_thumb_src }}}" alt="" class="wall-autoplay"/>\n\t\t\t{{#cover}}\n\t\t\t\t<svg class="cover-thumb" height="100%" width="100%">\n\t\t\t\t\t<image xlink:href="{{{ static_dom }}}/v3/img/skins/default/ticket-red.svg"\n\t\t\t\t\t       src="{{{ static_dom }}}/v3/img/skins/default/ticket-red.png"\n\t\t\t\t\t       title="RED"\n\t\t\t\t\t       height="100%" width="100%"\n\t\t\t\t\t       class="no-blur"/>\n\t\t\t\t</svg>\n\t\t\t{{/cover}}\n\t\t\t<span class="premium-log-overlay"><span class="icon-f icf-play"></span></span>\n\t\t</div>\n\t\t<p>{{{ text_side }}}</p>\n\t</div>\n\t<p>{{{ text_under }}}</p>\n</div>'}),define("skins/default/video/premium_block_popup",["config/main"],function(e){0!==$(".premium-log-overlay").length&&(require(["skins/common/purchase_form/purchase_form_init"],function(e){e.hasFormAutoOpened()}),e.dyn.is_premium&&e.dyn.video_premium&&(e.dyn.video_premium.membership||e.dyn.video_premium.ppv)||e.dyn.login_info&&e.dyn.login_info.is_premium&&e.dyn.login_info.is_logged||require(["config/main","mustache","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/thumbs_rotator","lib/helpers/thumbs/wall","skins/default/form/login","skins/common/video/fake_loader","text!skins/default/video/premium_block_popup.mustache"],function(e,t,i,n,s,o,a,r,l){a.setOpenCloseModes("signup",!1,!1);var d=!1,u=function(){var t=null;if("video"===e.data.action)if(-1!==window.location.search.indexOf("xsc=qp"))t="quickies_profile";else if(-1!==window.location.search.indexOf("xsc=qs"))t="quickies_search";else if(-1!==window.location.search.indexOf("xsc=fvtp"))t="full_video_on_trailer_player";else if(-1!==window.location.search.indexOf("xsc=fvtecp"))t="full_video_on_trailer_player_end_cta";else if(-1!==window.location.search.indexOf("xsc=gfps"))t="global_feed_premium_sub";else if(-1!==window.location.search.indexOf("xsc=pfps"))t="profile_feed_premium_sub";else{var i=window.location.search.indexOf("xsc=fvt");if(-1!==i){var n=window.location.search.substring(i+7,i+8),s="m"===n;s&&(n=window.location.search.substring(i+8,i+9)),t="full_video_on_trailer"+(s?"_mobile":"")+n}else{var o=-1!==window.location.search.indexOf("xsc=pofs");t=e.data.is_ppv?o?"premium_on_free_search_ppv":"video_page_ppv":e.data.is_membership?o?"premium_on_free_search_membership":"video_page_membership":o?"premium_on_free_search_premium":"video_page_premium"}}a.open(null,{sThisOpenOnlyOrigin:t}),d=!1},c=function(){if(!0!==d){if(e.dyn.login_info&&e.dyn.login_info.is_logged)return void u();d=!0;var a=n.get($("body"),!1,null,!0),r=$(t.render(l,{video_thumb_src:e.dyn.video_thumb,text_above:i.__("player.premium_alert_hold_on",{"%strong%":"<strong><span class='icon-f icf-warning'></span> ","%end_strong%":" <span class='icon-f icf-warning'></span></strong>"}),text_side:i.__("player.premium_alert",{"%site%":"<span class='icon-f icf-ticket-red icf-white-fill' title='RED'></span> "}),text_under:i.__("player.premium_alert_create_account",{"%link%":"<span class='link'>","%end_link%":"</span>","%site%":"<span class='icon-f icf-ticket-red icf-white-fill' title='RED'></span>"}),static_dom:e.domains["static"],cover:2===e.dyn.preview_mode}));a.setOverlayClosable(!0),a.setEscapeClosable(!1),a.addClass("auto-width-popup"),a.setContent(r),a.onShow=function(){0===e.dyn.preview_mode&&s.video_preview&&new o(a.node.find(".video")),a.node.find(".x-body").on("click",function(e){e.preventDefault(),a.close()})},a.onClose=u,a.show("auto")}};$("#html5video,#video-tabs").find("a, span, button, input, textarea, select, .btn").each(function(){var e=$(this);e.closest("#disclaimer_message").length||e.closest(".over-overlay").length||e.prop("disabled",!0).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),c()})}),r(c)}))}),define("text!skins/default/video/ended_video_links_in_player.mustache",[],function(){return'<div>\n\t{{#bLike}}<button class="clip-like"><span class="icon-f icf-thumb-up-o"></span> {{{ sLike }}}</button>{{/bLike}}\n\t{{#bComments}}<button class="clip-comment"><span class="icon-f icf-comment-o"></span> {{{ sComments }}}</button>{{/bComments}}\n\t{{#bSub}}<button class="clip-subscribe"></button>{{/bSub}}\n</div>'}),define("skins/default/video/ended_video_links_in_player",["config/main"],function(e){"object"==typeof html5player&&"function"==typeof html5player.setVideoEndedDesktopMore&&"undefined"!=typeof e.data&&"video"===e.data.action&&"undefined"!=typeof e.data.id_video&&"undefined"!=typeof e.data.uploader_id&&html5player.setVideoEndedDesktopMore("",function(t){require(["lib/i18n!front","lib/tools","skins/common/profile/sub_actions","skins/common/video/vote_manager","skins/common/tracker/videos_i_like","skins/default/profile/subscribe/btns_controler","mustache","text!skins/default/video/ended_video_links_in_player.mustache"],function(i,n,s,o,a,r,l,d){var u="string"==typeof e.dyn.vmdata.vote_good,c=$("#v-actions .comments"),f=!(1!==c.length||!window.xv||!window.xvideos.player||"function"!=typeof window.xvideos.player.canComment)&&window.xvideos.player.canComment(),h=s.getLoadedUser(e.data.uploader_id),p=!!h,_=$(l.render(d,{bLike:u,sLike:i.__("profile.like"),bComments:f,sComments:i.__("video.comments"),bSub:p}));if(u){var g=_.children(".clip-like");new o(g,null,e.dyn.vmdata.vote_good,null).set_success_func(function(t){return a.isTracking()&&(g.toggleClass("active",t),t?a.addVideo(e.data.id_video):a.removeVideo(e.data.id_video)),i.__("video.votes.thanks")});var m=function(e){e&&g.addClass("active")};xv.indexedDb&&xv.indexedDb.getDbIsSupported()?xv.indexedDb.manageTempStackAdd(function(){a.hasVideo(e.data.id_video).then(function(e){m(e)})}):m(a.hasVideo(e.data.id_video))}f&&_.children(".clip-comment").on("click",function(e){e.preventDefault();var t=$("#tabComments");if(t.is(":visible"))n.scrollTo(t);else{var i=$("#v-actions .comments");n.scrollTo(i),i.click()}}),p&&new r({uploader:{user_id:e.data.uploader_id,user_name:e.data.uploader},elts:{sub_btn:_.children(".clip-subscribe"),btn_display:"inline-block"},elts_order:{
sub_icon:4,sub_text:5,is_sub_icon:4,is_sub_text:5},icons:{is_sub:"feed",sub:"feed"},texts:{is_sub:i.__("profile.subscribed"),sub:i.__("subscriptions.subscribe")}}),$(t).append(_)})})}),define("skins/common/video/report",["config/main","static/utils","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","skins/form/validator","lib/i18n!front"],function(e,t,i,n,s,o,a){var r=function(){this.oMessages=a.__("report_form.*"),this.$Node=$('<div class="tab-form"></div>'),this.loadForm()};return r.prototype={getNode:function(){return this.$Node},loadForm:function(){this.$Node.html('<p class="text-center">'+i.get("after",a.__("loading.loading")).getHtml()+"</p>");var t=this,n=function(){t.$Node.html('<p class="text-center"><a><strong class="text-danger">'+a.__("loading.failed_retry")+"</strong></a></p>").find("a").on("click",function(){t.loadForm()})};$.getJSON("/video-report/"+e.data.id_video+"/0",function(e){if(e.result)return void t.onLoaded(e);n()},"json").fail(n)},onLoaded:function(e){this.$Node.html(e.form),this.aJsRules=e.js_rules,this.setupForm()},setupForm:function(){var t=this,r=null,l=this.$Node.find("form");t.oValidator=new o(l,this.aJsRules),l.on("submit",function(o){o.preventDefault(),r||(r=n.get(t.getNode(),!1,"hide").setContent(i.get("after",t.oMessages.sending).getHtml())),r.show();var d=l.serializeArray();$.post("/video-report/"+e.data.id_video+"/0",d,function(e){if(!e.result){if(12===e.code){var i=$(e.form);return l.replaceWith(i),l=i,t.aJsRules=e.js_rules,void t.setupForm()}return void s.alert(e.message,function(){t.oValidator.resetSubmit(),t.oValidator.refresh()},!0)}t.$Node.html('<p class="text-center"><strong class="text-success">'+e.message+"</strong></p>")},"json").fail(function(){s.alert(a.__("misc.error_please_retry"),function(){t.oValidator.resetSubmit(),t.oValidator.refresh()},!0)}).done(function(){r.close()})})}},r}),define("skins/default/sfw_content",["config/main","./header/header"],function(e){null!==e.data.id_video&&(require(["mustache","static/utils","static/storage","lib/tab","lib/i18n!front","lib/helpers/popup","skins/common/video/copy_link","skins/common/video/share","skins/common/video/lastviews","skins/common/tracker/videos_i_like","skins/common/history/page_view_history","skins/default/video/download","skins/default/video/watch_later","lib/helpers/thumbs_rotator","skins/common/video/auto_tr_title","skins/common/video/tracking","skins/common/video/related","skins/default/video/subscribe","skins/default/video/tags","skins/default/video/playlists/related","skins/default/video/premium_block_popup","skins/default/video/ended_video_links_in_player","skins/common/form/cross_site_login"],function(t,i,n,s,o,a,r,l,d,u,c,f,h){var p=function(){};p.prototype={init:function(){var t={};t.tabDownload=f;var i=!1,o=function(){if(!i){i=!0;var e=$("#tabShareAndEmbed");if(e.length>0){var t=e.find(".share-toolbox"),n=l.getShareElem(window.location.href,document.title);t&&t.length?t.replaceWith(n):e.append(n),new r}}};$("#tabShareAndEmbed").length>0?t.tabShareAndEmbed=o:t.tabShare=o;var u=!1;t.tabReport=function(){require(["skins/common/video/report"],function(e){u||(u=!0,$("#tabReport").append((new e).getNode()))})};var p=new s("#video-tabs",t,!0,"no_tab_hash"),_=$("#v-actions .tabs .save");if(!e.dyn.login_info.is_logged){var g=parseInt(n.get("video_login_alert_btn_last_shown","watch_later"));Date.now()-g<6048e5&&(h.init_btn(_,e.data.id_video),!0)}var m=$("#v-actions-overflow-menu"),b=new a(m,"",{relative_to:$("#content"),popup_class:"v-actions-pop-menu",position:{v:"above",h:"right"}}),v=0,y=function(){var e=$(window).outerWidth();if(v!==e){v=e;var t=$("#v-actions-container"),i=t.find("#v-actions");i.find(".tabs button:not(.in-menu)").show(),setTimeout(function(){var e=i.outerWidth(),n="undefined"!=typeof i[0]?i[0].scrollWidth:e;if(n>e){t.removeClass("without-overflow-menu"),m.show();var s=function(){i.find(".tabs button:visible").last().hide(),setTimeout(function(){e=i.outerWidth(),(n="undefined"!=typeof i[0]?i[0].scrollWidth:e)>e&&setTimeout(s,0)},0)};setTimeout(s,0)}else $("#v-actions .tabs button:not(:visible)").length?(t.removeClass("without-overflow-menu"),m.show()):(t.addClass("without-overflow-menu"),m.hide())},0)}};b.onOpen=function(){b.setContent($("#v-actions .tabs button:not(:visible)").clone(!0).show().on("click",function(){b.close()}))},$(window).on("resize",y),y(),d.declareVideoView(e.data.id_video),c.addId("video",e.data.id_video),window.xvideos.player.openDownload=function(){p.open("tabDownload");var e=$("#v-actions .tabs");e&&e.length&&$("html, body").animate({scrollTop:Math.round(e.offset().top)-12},250)}}},(new p).init()}),require(["config/main","lib/tools","lib/helpers/viewer/lightgallery-manager"],function(e,t,i){var n=(e.data.gal,t.getUrlHash());if(n.length>0&&n.match(/^_galpic-\d+$/g)){var s=$("#"+n.substring(1));1===s.length&&(i.is_loaded?s.hasClass("lightgallery-item")&&s.trigger("click"):i.onLoad=function(){s.hasClass("lightgallery-item")&&s.trigger("click")})}}))}),define("skins/default/suggestion",["static/cookies","./header/header"],function(e){var t=function(){this.thumb_list=!1,this.view_list={},this.cookie_name="suggest_view","suggestion"==xv.conf.data.action&&this.init_tracking()};return t.prototype={init_tracking:function(){this.thumb_list=$(document).find(".thumb-block");var t=e.get(this.cookie_name);if(t){var i=JSON.parse(t);if(i){for(var n in i){var s=i[n];s=Math.round(s/3),0==s?delete i[n]:i[n]=s}this.view_list=i}}var o=this;window.addEventListener("scroll",function(e){o.checkViewed()}),o.checkViewed()},checkViewed:function(){if(!this.thumb_list)return void console.error("Suggest : No video detected");var e=!1,t=this;this.thumb_list=jQuery.grep(this.thumb_list,function(i){if(!i.getBoundingClientRect)return console.error("Failed for ",i),!1;var n=i.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(n.top<0)return!0;if(n.left<0)return!0;if(n.top>s-n.height)return!0;i.style.border="1px #F00 solid";var o=i.id.substring(6);return o?(t.view_list[o]||(t.view_list[o]=0),t.view_list[o]=t.view_list[o]+9,e=!0,!1):(console.error("Bad thumb id",i.id),!1)}),e&&this.saveCookie()},saveCookie:function(){console.log("Suggestion: Saving cookie with",this.view_list),e.setLocal(this.cookie_name,JSON.stringify(this.view_list),108e5,"/")}},new t}),define("skins/default/tag",["config/main","./mozaique/premium_result_on_free","./mozaique/search_base"],function(e,t){$(".report-search").on("click",function(t){t.preventDefault(),require(["skins/common/search/report"],function(t){var i=new t;i.setMain(e.data.search,e.data.search),i.openForm()})}),new t(e.data.search)}),define("skins/default/tags",["lib/tools","./header/header"],function(e){var t,i=!1,n="",s=$("#filter-tags-input");0!==s.val().length||"#gay"!==window.location.hash&&"#shemale"!==window.location.hash||s.val(window.location.hash.substring(1));var o=function(){i||(i=!0,t=$("#tags li").each(function(){$(this).data("tag",$.trim(e.translit($(this).find("b").text())))}))},a=function(){o();var i=$.trim(e.translit(s.val()));if(i!==n){if(n=i,0===i.length)return void t.removeClass("hidden");t.each(function(){$(this).toggleClass("hidden",-1===$(this).data("tag").indexOf(i))})}};s.on("keyup",a),s.val().length>0&&a()}),define("text!skins/common/video/playlist.mustache",[],function(){return'<div id="video-playlist">\n\t<div id="playlist-header" class="hidden">\n\t\t<button class="btn btn-default pull-right next" title="{{{ labels.next }}}"><span class="icon-f icf-chevron-right"></span></button>\n\t\t<button class="btn btn-default pull-right toggle" title="{{{ labels.hide }}}"><span class="icon-f icf-caret-up"></span></button>\n\n\t\t<div class="pull-right checkbox toggle">\n\t\t\t<input type="checkbox" name="autoplayInput01" id="autoplayInput01">\n\t\t\t<label for="autoplayInput01">{{{ labels.autoplay }}}</label>\n\t\t</div>\n\n\t\t<button class="btn btn-default pull-left prev" title="{{{ labels.prev }}}"><span class="icon-f icf-chevron-left"></span></button>\n\t\t<div class="playlist-vote"></div>\n\t\t<h4></h4>\n\t</div>\n\t<div id="playlist-content">\n\t\t<div class="mozaique thumbs-5-cols"></div>\n\t\t<div class="checkbox toggle">\n\t\t\t<input type="checkbox" name="autoplayInput02" id="autoplayInput02">\n\t\t\t<label for="autoplayInput02">{{{ labels.autoplay }}}</label>\n\t\t</div>\n\t</div>\n</div>'}),define("skins/common/video/playlist",["config/main","static/utils","static/log","lib/i18n!front","lib/tools","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/thumbs_rotator","skins/common/tracker/videos_i_like","./playlist_random_order","mustache","text!./playlist.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=xv.indexedDb&&xv.indexedDb.getDbIsSupported(),h=s.parseUrl(window.location.href,"query",!0),p=0;if(("undefined"!=typeof h.pl||"undefined"!=typeof h.pltype)&&e.data.id_video){var _="favorite",g=e.data.id_video;if("string"==typeof h.pl)if(0===h.pl.search(/^\d+$/)){if((p=parseInt(h.pl))<0)return}else 0===h.pl.search(/^-[\da-z]+$/)&&(p=h.pl);if(0===p){if("string"!=typeof h.pltype||"videosilike"!==h.pltype)return;_=h.pltype}else if("string"==typeof h.pltype){if("related"!==h.pltype&&"videosilike"!==h.pltype&&"random"!==h.pltype)return;_=h.pltype}var m,b,v,y,D,C,w,S,k,T,E,P,I,F,x,L=n.__("playlist.*"),O=!1,M=!1,A=!1,V=0,N=null,R=!1,B=!1,U=!1,H=!1,j=0,q=!1,z=!1,W=!1,G=!1,Y=!0,K=$(window).width(),X=$(window).height(),J=K<767&&K<X,Q=null,Z=null,ee=null,te=null,ie=function(e,t){var i;return i="related"===_?"/video"+p+"/related/playlist/"+e:"videosilike"===_?"/video"+e+"/videosilike/playlist/"+e:"random"===_?"/favorite/"+p+"/playlist-random/"+e:"/favorite/"+p+"/playlist/"+e,t&&(i+="/"+t),i},ne=function(e){return d.getIds(e)},se=[],oe=function(e,t){var i=ne(e),n=[];if(t.ordered_ids)for(var s in t.ordered_ids){var o=t.ordered_ids[s];-1===i.indexOf(o)&&n.push(o),-1===se.indexOf(o)&&se.push(o)}else if(t.videos)for(var s in t.videos){var o=t.videos[s].id;-1===i.indexOf(o)&&n.push(o),-1===se.indexOf(o)&&se.push(o)}n.length>0&&d.addIds(e,n)},ae=function(){return new Promise(function(t,i){var n,s={};if("videosilike"===_){if(n=ne("videosilike").join(","),s={ids:"",excluded_ids:se.join(","),ordered_ids:n.length>0?n:g},(!e.dyn.login_info.is_logged||!e.dyn.login_info.profile)&&l.isTracking()){if(f)return void l.getIds().then(function(e){s.ids=e.join(","),t(s)})["catch"](function(e){i(e)});s.ids=l.getIds().join(",")}}else"random"===_&&(n=ne("fav_"+p).join(","),s={ordered_ids:n.length>0?n:g});t(s)})},re=function(e,t){var i="";t&&(i=' class="text-danger"'),H?H.setContent("<strong"+i+">"+e+"</strong>"):H=new a(C,"<strong"+i+">"+e+"</strong>",{trigger:!1,position:{v:"below",h:"right"},relative_to:$("#video-playlist")}),H.open()},le=function(e,t){var i="";t&&(i=' class="text-danger"'),B?B.setContent("<strong"+i+">"+e+"</strong>"):B=new a(w,"<strong"+i+">"+e+"</strong>",{trigger:!1,position:{v:"below",h:"left"},relative_to:$("#video-playlist")}),B.open()},de=function(e,t,i){"after"===e?re(t,i):le(t,i)},ue=function(){H&&H.close(),B&&B.close()},ce=function(){var e=v.width();T=k.outerWidth(),E=Math.round(e/T),P=2,E<=2?P=0:E<=4&&(P=1)},fe=function(e,i){if(!x){var n,s=J?Math.ceil(j/2):j;if("next"===e){if(n=N+E,n+2*E>=s&&me(),n>s-E){if(!U)return;if((n=s-E)===N)return}}else if("prev"===e){if(n=N-E,n-2*E<=0&&be(),n<0){if(!R)return;if(n=0,0===N)return}}else n=e;"string"==typeof e&&(A=!0),O=n===s-E&&G&&U,C.toggleClass("invisible",O),M=0===n&&G&&R,w.toggleClass("invisible",M),N=n,S.addClass("disabled").css("cursor","wait"),N+E>s-E&&!U&&q&&C.html(o.getImg()).prop("title",t.unescape(L.loading_next)),N-E<0&&!R&&z&&w.html(o.getImg()).prop("title",t.unescape(L.loading_prev));var a=function(){(N+E<=s-E||U||!q)&&(O=N+E===s&&U,C.html('<span class="icon-f icf-chevron-right"></span>').toggleClass("disabled",O).css("cursor","").toggleClass("invisible",O)),(N-E>=0||R||!z)&&(M=0===N&&R,w.html('<span class="icon-f icf-chevron-left"></span>').toggleClass("disabled",M).css("cursor","").toggleClass("invisible",M)),x=!1,W&&W()};J?k.css("margin-left",""):y.css("margin-left",""),i?(J?y.css("margin-left","-"+N*T+"px"):k.css("margin-left","-"+N*T+"px"),a()):(x=!0,J?y.animate({"margin-left":"-"+N*T+"px"},"false",a):k.animate({"margin-left":"-"+N*T+"px"},"false",a))}},he=function(){return!A&&(nb_per_row=J?Math.ceil(j/2):j,fe(Math.max(0,Math.min(V-P,nb_per_row-E)),!0),!0)},pe=function(){y.html('<p class="text-center"><strong><a href="#" class="text-danger">'+L.failed_loading_retry+"</a></strong></p>").find("a").on("click",function(e){return e.preventDefault(),_e(),!1})},_e=function(){m=$(u.render(c,{labels:L})),b=m.find("#playlist-header"),v=m.find("#playlist-content"),y=v.children(".mozaique"),D=b.children("button.toggle"),C=b.children("button.next"),w=b.children("button.prev"),S=C.add(w),Z=m.find("#autoplayInput01"),ee=m.find("#autoplayInput02"),te=[Z,ee],y.html('<p class="text-center">'+o.getSafe("after",L.loading).getHtml()+"</p>");var a;try{a=ae()}catch(l){return void i.debug(l)}return function(e){return new Promise(function(t,i){$.post(ie(g),e,function(e){e.result?t(e):(e.message?y.html('<p class="text-center"><strong>'+e.message+"</strong></p>"):pe(),i(new Error("Data retrieval failed")))},"json").fail(function(){pe(),i(new Error("AJAX request failed"))})})}(a).then(function(i){"object"==typeof html5player&&"function"==typeof html5player.setPlaylist&&html5player.setPlaylist(i.title,i.url,i.videos,i.nb_videos,i.position),html5player.initAutoPlaylistNextState(),Ce();var o=i.title;"default"===i.title.toLowerCase()&&(o=L.playlist);var a='<span class="icon playlist" '+L.playlist+'></span> <a href="'+i.url+'">'+o+"</a>";i.user&&!i.is_owner&&(a+=" <small>"+n.__("misc.by_user",{"%user%":'<a href="/profiles/'+i.user+'">'+i.username+"</a>"})+"</small>"),a+=' <span class="badge">'+i.nb_videos_str+"</span>",b.removeClass("hidden").children("h4").html(a);var l=$(s.replaceThumbcast(i.html));y.html(l),s.executePendingPrepare(y.find(".thumb-block")),xv.thumb_block_initiator?xv.thumb_block_initiator.init_listing(l,{is_thumb_list:!0}):r(l,!0),"videosilike"===_?oe("videosilike",i):"random"===_&&oe("fav_"+p,i);var d="xnxx"===e.sitename?L.playing_video_x.replace("%video_idx%",(i.position+1).toFixed(0)).replace("%nb_videos%",i.nb_videos.toFixed(0)):L.now_playing;y.children(":eq("+i.posinlist+")").addClass("selected").find(".thumb-inside").append('<div class="thumb-overlay"><p>'+d+"</p></div>"),R=i.start_reached,U=i.end_reached,j=i.videos.length,k=y.children().first(),I=i.videos[0].id,F=i.videos[j-1].id,N=i.posinlist,V=N,ce(),he(),D.on("click",function(){v.stop(!0).slideToggle("fast"),Y=!Y,D.html('<span class="icon-f icf-caret-'+(Y?"up":"down")+'"></span>').prop("title",t.unescape(Y?L.hide:L.display)),w.toggleClass("invisible",!Y||M),C.toggleClass("invisible",!Y||O)}),C.on("click",function(){ue(),fe("next")}),w.on("click",function(){ue(),fe("prev")}),G=!0,j>0&&De(),$(window).resize(function(){j>0&&(De(),x&&(k.stop(!0,!0),x=!1),ce(),he()||fe(N,!0))})})["catch"](function(e){i.debug(e)}),m},ge=function(t,i,n,s){var o;e.dyn.login_info.is_logged&&e.dyn.login_info.profile||!f?o=ae():ae().then(function(e){o=e}),console.log(o),$.post(ie(t,i),o,function(e){return e.result?(n(e),void s()):(s(),e.message?void de(i,e.message,!0):(de(i,L.failed_loading_vids,!0),void fe(N,!0)))},"json").fail(function(){s(),de(i,L.failed_loading_vids,!0)})},me=function(){if(!q&&!U)return q=!0,ge(F,"after",function(e){var t=$(s.replaceThumbcast(e.html));y.append(t),s.executePendingPrepare(y.find(".thumb-block")),xv.thumb_block_initiator?xv.thumb_block_initiator.init_listing(t,{is_thumb_list:!0}):r(t,!0),e.end_reached&&(U=!0),j+=e.videos.length,F=e.videos[e.videos.length-1],fe(N,!0)},function(){q=!1})},be=function(){if(!z&&!R)return z=!0,ge(I,"before",function(e){var t=function(){var t=$(s.replaceThumbcast(e.html));y.prepend(t),s.executePendingPrepare(y.find(".thumb-block")),xv.thumb_block_initiator?xv.thumb_block_initiator.init_listing(t,{is_thumb_list:!0}):r(t,!0),e.start_reached&&(R=!0),j+=e.videos.length,k.css("margin-left",""),y.css("margin-left",""),k=y.children().first(),I=e.videos[0],N+=e.videos.length,W=!1,fe(N,!0)};x?W=t:t()},function(){z=!1})},ve=function(){var e=2*k.outerHeight()+2;y.addClass("mozaique-grid").height(e)},ye=function(){y.removeClass("mozaique-grid").height("")},De=function(){K=$(window).width(),X=$(window).height(),J=K<767&&K<X,J?ve():ye(),null!==Q&&clearTimeout(Q),Q=setTimeout(function(){Q=null,ce(),fe(N||0,!1)},10)},Ce=function(){for(var e=0;e<te.length;e++)te[e].prop("checked",html5player.hasPlaylistAutoNext()),te[e].on("change",we)},we=function(){html5player.togglePlaylistAutoNext();for(var e=0;e<te.length;e++)te[e].prop("checked",html5player.hasPlaylistAutoNext())};return e.dyn.login_info.is_logged&&e.dyn.login_info.profile||!f?_e:new Promise(function(e,t){e(_e)})}}),define("text!skins/default/video/sponsor_link_sheer.mustache",[],function(){return'<div id="video-sponsor-links" class="sheer-sponsor-link">\n\t<div class="sponsor-text">{{{ get_full_video_on }}}</div>\n</div>\n'}),define("skins/common/video/sponsor",["mustache","static/utils","lib/i18n!front","skins/common/design/text","text!skins/default/video/sponsor_link_sheer.mustache"],function(e,t,i,n,s){var o={oTrailer:{fullT:"video.get_full_on"},oFreeVideo:{joinT:"video.get_exclusive_content_on"}},a=function(){};return a.prototype={getSheerSponsorLink:function(a,r){if(!a.p)return this.getLegacySponsorLink(a);var l=t.randomFromArray(Object.entries(this.isTrailer(a)?o.oTrailer:o.oFreeVideo)),d=l[1],u="https://www.sheer.com/"+a.p+(a.i?"/post/"+a.i:"")+"#join-us-fan";return $(e.render(s,{get_full_video_on:i.__(d,{"%strong%":"<strong>","%strong_end%":"</strong>","%site%":'<div class="sheer-bg"><a href="'+u+'" target="_blank" rel="noopener">'+n.capitalizeWord(a.n)+"</a></div>"})}))},isTrailer:function(e){return e.t===undefined?e.i!==undefined:e.t&&e.i},getLegacySponsorLink:function(t){return $(e.render(s,{get_full_video_on:i.__("video.get_full_on",{"%strong%":"<strong>","%strong_end%":"</strong>","%site%":'<div class="sheer-bg"><a href="'+t.u+'" target="_blank" rel="noopener">'+n.capitalizeWord(t.n)+"</a></div>"})}))}},new a}),define("skins/default/video/comments/ui_root",["skins/common/thread/video_comments/ui/root","lib/i18n!front"],function(e,t){var i=function(t,i,n){e.apply(this,[t,i,n])};return i.prototype=new e,i.prototype.setNbChildren=function(t){e.prototype.setNbChildren.apply(this,[t]),$("#tabComments_btn .nb-video-comments").html(t)},i}),define("text!skins/default/video/tab_comments_bottom_page.mustache",[],function(){return'<div id="tabComments_bottom_page">\r\n\t<div id="tabComments_loader">{{{ loader }}}</div>\r\n</div>'}),define("skins/default/video/comments",["config/main","mustache","lib/tools","lib/helpers/inline_loader","skins/common/thread/root","./comments/ui_root","text!./tab_comments_bottom_page.mustache","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(){if(this.bCanComment=!1,e.data.is_premium&&(!e.dyn.login_info||!e.dyn.login_info.has_member_area||"boolean"==typeof e.dyn.video_premium_user_allowed&&!1===e.dyn.video_premium_user_allowed||!e.dyn.login_info.is_logged))return $("#tabComments_bottom_page").remove(),this.comments_initialized=!0,!1;if(e.dyn.vmdata.has_comments&&e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&$.post("/threads/video-comments/get-nb-posts/"+e.data.id_video,function(e){e.result&&($("#v-actions .tabs .comments .badge").html(e.nb_posts),$("#tabCommentsBottom .thread-node-children-count").html(e.nb_posts))}),0===$("#v-actions .tabs .comments").length)return this.comments_initialized=!0,!1;this.comments_initialized=!1,this.bCanComment=!0,this.$commentsLimitBottomTarget=null,this.$commentsTabTarget=$("#tabDownload"),this.iBottomLimit=9999,this.bIsBottomReached=!1,this.bIsWindowResizing=!1,this.oWindowResizeTimer=null,$(window).on("scroll",this,this.onWindowScroll).on("resize",this,this.onWindowResize);var t=this;setInterval(function(){t.window_resize_timeout_func()},2e3),$("#related-videos .show-more").on("click",this,this.onShowMoreRelatedClick),this.window_resize_timeout_func(!0),this.video_bottom_reach_test()};return l.prototype={init:function(){if(!this.comments_initialized){var t=$("#tabComments");0===t.closest("#tabComments_bottom_page").length&&($("#tabComments_bottom_page").remove(),e.dyn.is_mobile&&i.scrollTo($("#v-actions"))),this.comments_initialized=!0;var n=new o(e.data.id_video,t,'<span class="icon-f icf-comment-o"></span> '+r.__("video.comments",{},"Comments"));new s("video-comments",e.data.id_video,n,"skins/default/form/login").load()}},get_bottom_limit:function(){this.$commentsLimitBottomTarget=$("#footer");var e=(this.$commentsLimitBottomTarget.length?this.$commentsLimitBottomTarget.offset().top:0)+20,t=$("body").innerHeight()-20;return Math.floor(Math.min(e,t))},window_resize_timeout_func:function(e){if(!0===this.bIsBottomReached)return!1;if(this.bIsWindowResizing=!0,this.iBottomLimit===this.get_bottom_limit())return this.bIsWindowResizing=!1,!1;if(!0===e)return this.iBottomLimit=this.get_bottom_limit(),this.bIsWindowResizing=!1,!1;!1!==this.oWindowResizeTimer&&(clearTimeout(this.oWindowResizeTimer),this.oWindowResizeTimer=!1);var t=this;this.oWindowResizeTimer=setTimeout(function(){t.iBottomLimit=t.get_bottom_limit(),t.bIsWindowResizing=!1,t.video_bottom_reach_test()},1e3)},put_comments_back_in_tab:function(){this.bIsBottomReached=!1,$("#v-actions .tabs .comments").off("click",this.onBtnClick),$(window).on("scroll",this,this.onWindowScroll).on("resize",this,this.onWindowResize),$("#tabComments").insertBefore(this.$commentsTabTarget),$("#tabComments_bottom_page").remove()},video_bottom_reach_test:function(){if(!0===this.bIsWindowResizing||!0===this.bIsBottomReached)return!1;if(this.iBottomLimit<Math.ceil($(window).scrollTop()+window.innerHeight)&&"none"===$("#tabComments").css("display")){this.bIsBottomReached=!0,$("#v-actions .tabs .comments").on("click",this,this.onBtnClick);$("#tabComments_bottom_page").length>0?($("#tabCommentsBottom").removeClass("hidden").replaceWith($("#tabComments").show()),this.init()):($(t.render(a,{loader:n.getSafe("after",r.__("video.loading_comments")).getHtml()})).insertBefore(this.$commentsLimitBottomTarget),oSelf=this,setTimeout(function(){$("#tabComments_loader").replaceWith($("#tabComments").fadeIn()),oSelf.init()},500)),$(window).off("scroll",this.onWindowScroll).off("resize",this.onWindowResize)}},onBtnClick:function(e){e.data.put_comments_back_in_tab()},onWindowScroll:function(e){e.data.video_bottom_reach_test()},onWindowResize:function(e){e.data.window_resize_timeout_func()},onShowMoreRelatedClick:function(e){oSelf=e.data,setTimeout(function(){oSelf.window_resize_timeout_func()},200),setTimeout(function(){oSelf.video_bottom_reach_test()},250)},canComment:function(){return this.bCanComment}},l}),define("skins/common/video/user_metadata_suggest/model_field",["static/log","config/main","lib/i18n!front","lib/tools"],function(e,t,i,n){var s=function(t){if("object"!=typeof t)return void e.error("Invalid field data provided");Object.assign(this,t),this.id_file||(this.id_file=null),this.type||(this.type="string"),this.updateStatus(),this.checkProperties()};return s.STATUS={NOT_REQUIRED:"NOT_REQUIRED",OPTIONAL:"OPTIONAL",MISSING:"MISSING",PENDING:"PENDING",TO_REVIEW:"TO_REVIEW",REJECTED:"REJECTED",VALIDATED:"VALIDATED"},s.prototype={checkProperties:function(){"boolean"!=typeof this.is_file&&e.warn("ModelField.is_file is not set to boolean",this),"string"!=typeof this.id_file&&null!==this.id_file&&e.warn("ModelField.id_file is not set to string|null",this),"string"!=typeof this.name&&e.warn("ModelField.name is not set to string",this),"string"!=typeof this.value&&null!==this.value&&"undefined"!=typeof this.value&&e.warn("ModelField.value is not set to string|null|undefined",this),"string"==typeof this.status&&Object.values(s.STATUS).includes(this.status)||e.warn("ModelField.status is not set to ModelField.STATUS",this),"string"!=typeof this.type&&e.warn("ModelField.type is not set to string",this),"object"!=typeof this.exemptions&&"undefined"!=typeof this.exemptions?e.warn("ModelField.exemptions is not set to object",this):"object"==typeof this.exemptions&&("object"==typeof this.exemptions.list&&"function"==typeof this.exemptions.list.includes||e.warn("ModelField.exemptions.list is not set to array",this))},set:function(e,t,i,n){switch(i||this.type){case"string":if("string"!=typeof e)return!1;break;case"number":if("string"==typeof e&&(e=parseInt(e)),"number"!=typeof e||isNaN(e))return!1}if(n&&!n[e])return!1;var o=!1;t?(this[t]!==e&&(o=!0),this[t]=e):(this.value!==e&&(o=!0),this.value=e),o&&(this.status=s.STATUS.PENDING)},get:function(){return this.value},has:function(){return this.isFile()?this.hasFile():typeof this.value===this.type&&!("string"===this.type&&!this.value.length)},isShown:function(){return this.status!==s.STATUS.NOT_REQUIRED||this.isRequired()||this.isMissing()||this.hasFile()||this.has()},isRequired:function(e,t){return!this.isExemptedHidden(e)&&((t=t===undefined?this.status:t)===s.STATUS.MISSING||t===s.STATUS.REJECTED)},isMissing:function(e,t){return!this.isExemptedOptional(e)&&(t=t===undefined?this.status:t,this.isRequired(e,t))},isExemptedHidden:function(e){return this.exemptions&&this.exemptions.list&&this.exemptions.list.includes(e)},isExemptedOptional:function(e){return this.exemptions&&this.exemptions.optional&&this.exemptions.optional.includes(e)},isShown:function(e,t){return e=e===undefined?this.status:e,t=t===undefined?this.value!==undefined&&null!==this.value:t,e===s.STATUS.NOT_REQUIRED?!!t:!!s.STATUS[e]},isHiddenUnchanged:function(){if(this.isFile())switch(this.name){case"id_document":case"consent_form":return!0;default:return!1}return"string"==typeof this.value&&this.value.match(/^\*{6,}$/)},isEditable:function(e){return(e=e===undefined?this.status:e)!==s.STATUS.VALIDATED},setStatus:function(e){this.set(e,"status","string",s.STATUS)},getStatus:function(){return this.status},updateStatus:function(){this.status===s.STATUS.MISSING&&this.has()&&(this.status=s.STATUS.PENDING)},getRejectReasons:function(){return this.rejectReasons},setRejectReasons:function(e){this.rejectReasons=e},isFile:function(){return this.is_file!==undefined&&!!this.is_file},hasFile:function(){return this.isFile()&&!!this.id_file},setFileId:function(e){this.set(e,"id_file","number")},getDocumentStatusPicto:function(e){switch(e=e===undefined?this.status:e){case s.STATUS.NOT_REQUIRED:case s.STATUS.OPTIONAL:return!1;case s.STATUS.MISSING:return"close";case s.STATUS.PENDING:case s.STATUS.TO_REVIEW:return"hour-glass";case s.STATUS.VALIDATED:return"check";case s.STATUS.REJECTED:return"close";default:return!1}},getDocumentStatusPictoTitle:function(e){switch(e=e===undefined?this.status:e){case s.STATUS.NOT_REQUIRED:case s.STATUS.OPTIONAL:return"";case s.STATUS.MISSING:return i.__("misc.missing_file");case s.STATUS.PENDING:case s.STATUS.TO_REVIEW:return i.__("misc.pending_review");case s.STATUS.VALIDATED:return i.__("misc.validated_file");case s.STATUS.REJECTED:return i.__("misc.rejected_file");default:return""}},getDocumentStatusColorLevel:function(e){switch(e=e===undefined?this.status:e){case s.STATUS.NOT_REQUIRED:case s.STATUS.OPTIONAL:return"default";case s.STATUS.MISSING:return"danger";case s.STATUS.PENDING:case s.STATUS.TO_REVIEW:return"info";case s.STATUS.VALIDATED:return"success";case s.STATUS.REJECTED:return"danger";default:return"default"}}},s}),define("skins/common/video/user_metadata_suggest/model",["static/log","config/main","lib/i18n!front","skins/common/design/text","./model_field"],function(e,t,i,n,s){var o=function(t){this.setProperties(t),e.debug("set properties",this.getWarningLevel(),t)};return o.S_MODEL_TYPE_MODEL="model",o.S_MODEL_TYPE_SUGGESTED="suggested",o.S_MODEL_TYPE_UNIDENTIFIED="unidentified",o.EXEMPTIONS={NONE:"NONE",ERROR:"ERROR"},o.S_STATUS={NOT_REQUIRED:"NOT_REQUIRED",OPTIONAL:"OPTIONAL",MISSING:"MISSING",PENDING:"PENDING",REJECTED:"REJECTED",VALIDATED:"VALIDATED"},o.S_STATUS_MODEL={REJECTED:"REJECTED",VALIDATED:"VALIDATED",TO_REVIEW:"TO_REVIEW",NOT_REQUIRED:"NOT_REQUIRED",INCOMPLETE:"INCOMPLETE"},o.WARNING_LEVEL={OK:1,NOTIF:2,WARNING:3,ALERT:4},o.IS_MODEL_OBJECT=function(e){return e&&"object"==typeof e&&"ofCourseIAm"===e.sIsAModelObj},o.prototype={setProperties:function(e){this.id=null,this.ide=null,this.ids=null,this.idps=null,this.fields={},this.exemption="NONE";var t=this;Object.assign(this,e),Object.entries(e.fields?e.fields:e).forEach(function(e){var i=e[0],n=e[1];n&&"object"==typeof n&&"undefined"!=typeof n.is_file&&i&&(n.name=i,t.fields[i]=new s(n))}),Object.keys(this.fields).length||this.initDefaultFields(e),this.setReviewStatus(e.review_status),this.sIsAModelObj="ofCourseIAm"},initDefaultFields:function(e){var t=["name","real_name","birth_date","sex","country","who_are_they","profile_pic","id_document","consent_form"];this.fields=t.reduce(function(e,t){return e[t]=new s({name:t,status:s.STATUS.NOT_REQUIRED,is_file:"profile_pic"===t||"id_document"===t||"consent_form"===t}),e},{}),this.fields.name.set(e.name)},getField:function(e){return this.fields[e]},getRegularFields:function(){return Object.values(this.fields).filter(function(e){return!e.isFile()})},getFileFields:function(){return Object.values(this.fields).filter(function(e){return e.isFile()})},setId:function(e){this.setInt("id",e)},getId:function(){return this.id},hasId:function(){return"number"==typeof this.id&&this.id>0},setIdSuggestedElement:function(e){this.setInt("ide",e)},getIdSuggestedElement:function(){return this.ide},hasIdSuggestedElement:function(){return"number"==typeof this.ide&&this.ide>0},setIdSuggestion:function(e){this.setInt("ids",e)},getIdSuggestion:function(){return this.ids},hasIdSuggestion:function(){return"number"==typeof this.ids&&this.ids>0},setIdPornstar:function(e){this.setInt("idps",e)},getIdPornstar:function(){return this.idps},hasIdPornstar:function(){return"number"==typeof this.idps&&this.idps>0},getProfileName:function(){return this.fields.profile_name},urlEncodeName:function(e){return e.replace(" ","-").toLowerCase()},setThumb:function(e){this.setStr("thumb",e)},getThumb:function(){return this.thumb},setUri:function(e){this.setStr("uri",e)},getUri:function(){return this.uri},getMetaDataWarningLevel:function(){return this.fields.name.isMissing(this.exemption)||this.fields.real_name.isMissing(this.exemption)||this.fields.sex.isMissing(this.exemption)||(this.fields.country.isMissing(this.exemption)||this.fields.birth_date.isMissing(this.exemption))&&this.exemption===o.EXEMPTIONS.NONE||this.fields.who_are_they.isMissing(this.exemption)||!this.hasExemption()?o.WARNING_LEVEL.ALERT:this.hasOptionalField()?o.WARNING_LEVEL.NOTIF:o.WARNING_LEVEL.OK},hasOptionalField:function(){return Object.values(this.fields).find(function(e){return e.status===o.S_STATUS.OPTIONAL})!==undefined},setName:function(e){this.fields.name.set(e),this.value=e,this.profile_name=this.urlEncodeName(e)},setRealName:function(e){this.fields.real_name.set(e)},setSex:function(e){this.fields.sex.set(e)},setCountry:function(e){this.fields.country.set(e)},setBirthDate:function(e){this.fields.birth_date.set(e)},getName:function(){return this.fields.name.get()},getRealName:function(){return this.fields.real_name.get()},getSex:function(){return this.fields.sex.get()},getCountry:function(){return this.fields.country.get()},getBirthDate:function(){return this.fields.birth_date.get()},hasName:function(){return this.fields.name.has()},hasRealName:function(){return this.fields.real_name.has()},hasSex:function(){return this.fields.sex.has()},hasSexToShow:function(){return typeof this.hasSex()||"string"==typeof this.sSexDisplay&&!!this.sSexDisplay.length},hasCountry:function(){return this.fields.country.has()},hasCountryToShow:function(){return typeof this.hasCountry()||"string"==typeof this.sCountryDisplay&&!!this.sCountryDisplay.length},hasBirthDate:function(){
return this.fields.birth_date.has()},hasWhoAreThey:function(){return this.fields.who_are_they.has()},setNameRequirement:function(e){this.fields.name.setStatus(e)},setRealNameRequirement:function(e){this.fields.real_name.setStatus(e)},setSexRequirement:function(e){this.fields.sex.setStatus(e)},setCountryRequirement:function(e){this.fields.country.setStatus(e)},setBirthDateRequirement:function(e){this.fields.birth_date.setStatus(e)},setWhoAreTheyRequirement:function(e){this.fields.who_are_they.setStatus(e)},isExemptionShown:function(){return this.fields.real_name.isShown()||this.fields.country.isShown()||this.fields.birth_date.isShown()||this.fields.id_document.isShown()||this.fields.consent_form.isShown()},isNameEditable:function(){return this.fields.name.isEditable()},isRealNameEditable:function(){return this.fields.real_name.isEditable()},isSexEditable:function(){return this.fields.sex.isEditable()&&!(this.fields.sex.status===o.S_STATUS.NOT_REQUIRED&&!this.hasSex())},isCountryEditable:function(){return this.fields.country.isEditable()&&!(this.fields.country.status===o.S_STATUS.NOT_REQUIRED&&!this.hasCountry())},isBirthDateEditable:function(){return this.fields.birth_date.isEditable()},isWhoAreTheyEditable:function(){return this.fields.who_are_they.isEditable()},setExemption:function(e){this.setStr("exemption",e,t.dyn.modelSuggest.exemptionsList)},getExemption:function(){return this.exemption},hasExemption:function(){return"string"==typeof this.exemption&&this.exemption.length},setWhoAreThey:function(e){this.fields.who_are_they.set(e)},getWhoAreThey:function(){return this.fields.who_are_they.get()},getMetadataUploadUri:function(){return"/account/models/update-suggested-metadata/0"},getTypePicto:function(){throw"Not implemented"},setIdentificationDocId:function(e){this.fields.id_document.setFileId(e)},setUploadedIdentificationDocId:function(e){this.setUploadedFileId(this.fields.id_document,e)},getIdentificationDocUri:function(){throw"Not implemented"},getIdentificationDocUploadUri:function(){throw"Not implemented"},setIdentificationDocStatus:function(e){this.fields.id_document.setStatus(e)},getIdentificationDocStatusPicto:function(){return this.fields.id_document.getDocumentStatusPicto(this.fields.id_document.status)},getIdentificationDocStatusPictoTitle:function(){return this.fields.id_document.getDocumentStatusPictoTitle(this.fields.id_document.status)},getIdentificationDocStatusColorLevel:function(){return this.fields.id_document.getDocumentStatusColorLevel(this.fields.id_document.status)},hasIdentificationDoc:function(){return!!this.fields.id_document.id_file},isIdentificationDocRequired:function(e){return this.fields.id_document.status===o.S_STATUS.MISSING&&(!e||this.exemption===o.EXEMPTIONS.NONE)},isIdentificationDocShown:function(){return this.isIdentificationDocRequired()||this.hasIdentificationDoc()},canUploadIdentificationDoc:function(){return this.fields.profile_pic.status!==o.S_STATUS.VALIDATED},getIdentificationDocWarningLevel:function(){return this.fields.id_document.isMissing(this.exemption)?o.WARNING_LEVEL.ALERT:this.isIdentificationDocRequired(!0)&&!this.hasIdentificationDoc()?o.WARNING_LEVEL.ALERT:o.WARNING_LEVEL.OK},setConsentFormId:function(e){this.fields.consent_form.setFileId(e)},setUploadedConsentFormId:function(e){this.setUploadedFileId(this.fields.consent_form,e)},getConsentFormUri:function(){throw"Not implemented"},getConsentFormUploadUri:function(){throw"Not implemented"},setConsentFormStatus:function(e){this.fields.consent_form.setStatus(e)},getConsentFormStatusPicto:function(){return this.fields.consent_form.getDocumentStatusPicto(this.fields.consent_form.status)},getConsentFormStatusPictoTitle:function(){return this.fields.consent_form.getDocumentStatusPictoTitle(this.fields.consent_form.status)},getConsentFormStatusColorLevel:function(){return this.fields.consent_form.getDocumentStatusColorLevel(this.fields.consent_form.status)},canUploadConsentForm:function(){return this.fields.profile_pic.status!==o.S_STATUS.VALIDATED},setUploadedFileId:function(e,t){e.setFileId(t),e.setStatus(o.S_STATUS.PENDING),e.setRejectReasons([])},setUploadedProfilePicId:function(e){this.setUploadedFileId(this.fields.profile_pic,e)},getProfilePicUri:function(){throw"Not implemented"},getProfilePicUploadUri:function(){throw"Not implemented"},getProfilePicStatusPicto:function(){return this.fields.profile_pic.getDocumentStatusPicto(this.fields.profile_pic.status)},getProfilePicStatusPictoTitle:function(){return this.fields.profile_pic.getDocumentStatusPictoTitle(this.fields.profile_pic.status)},getProfilePicStatusColorLevel:function(){return this.fields.profile_pic.getDocumentStatusColorLevel(this.fields.profile_pic.status)},hasProfilePic:function(){return!!this.fields.profile_pic.id_file},canUploadProfilePic:function(){return this.fields.profile_pic.status!==o.S_STATUS.VALIDATED},getProfilePicWarningLevel:function(){return this.fields.profile_pic.isMissing(this.exemption)?o.WARNING_LEVEL.ALERT:this.fields.profile_pic.isRequired()&&!this.hasProfilePic()?o.WARNING_LEVEL.ALERT:o.WARNING_LEVEL.OK},geInputModelType:function(){return this.hasId()?o.S_MODEL_TYPE_MODEL:this.hasIdSuggestedElement()?o.S_MODEL_TYPE_SUGGESTED:o.S_MODEL_TYPE_UNIDENTIFIED},getFieldWarningLevel:function(e){return e.isMissing(this.exemption)?o.WARNING_LEVEL.ALERT:e.isRequired(this.exemption)&&!e.has()?o.WARNING_LEVEL.ALERT:o.WARNING_LEVEL.OK},getWarningLevel:function(){var t={profile_pic:this.getFieldWarningLevel(this.fields.profile_pic),id_document:this.getFieldWarningLevel(this.fields.id_document),consent_form:this.getFieldWarningLevel(this.fields.consent_form),metadata:this.getMetaDataWarningLevel()};return e.debug("Warning levels",t),Object.values(t).reduce(function(e,t){return Math.max(e,t)},o.WARNING_LEVEL.OK)},canEdit:function(){return this.getWarningLevel()>o.WARNING_LEVEL.OK||!this.isValidatedModel()&&(!(null===this.fields.profile_pic.id_file||!this.fields.profile_pic.id_file)||(!(null===this.fields.id_document.id_file||!this.fields.id_document.id_file)||(!(null===this.fields.consent_form.id_file||!this.fields.consent_form.id_file)||!!(this.fields.who_are_they.isRequired()||this.fields.name.isRequired()||this.fields.real_name.isRequired()||this.fields.sex.isRequired()||this.fields.country.isRequired()||this.fields.birth_date.isRequired()))))},isValidatedModel:function(){return Object.values(this.fields).every(function(e){return e.status===o.S_STATUS.VALIDATED||e.status===o.S_STATUS.NOT_REQUIRED})},setInt:function(e,t){return"string"==typeof t&&(t=parseInt(t)),"number"==typeof t&&!isNaN(t)&&(this[e]=t,!0)},setStr:function(e,t,i){return"string"==typeof t&&(!("object"==typeof i&&!i[t])&&(this[e]=t,!0))},clone:function(){return new o(JSON.parse(JSON.stringify(this)))},getFormattedData:function(e){var t=JSON.parse(JSON.stringify(this));return t.value=t.fields.name.value,t.can_edit=this.canEdit(),t.warning_level=this.getWarningLevel(),t.validated=!t.can_edit&&this.isValidatedModel(),t.type_icon=this.getTypePicto(),"string"==typeof e&&"string"==typeof t.value&&(t.highlightedName=n.highlightStringParts(t.value,e)),t.exemption||(t.exemption="NONE"),sType=this.geInputModelType(),sType===o.S_MODEL_TYPE_MODEL?(t.has_id=!0,t.idps=this.iIdps):t.has_id=!1,t},getHighlightedName:function(e){return this.display_name?n.highlightStringParts(this.display_name,e):null},getModelsListDisplay:function(e){var t=JSON.parse(JSON.stringify(this));return"string"==typeof e&&"string"==typeof t.display_name&&(t.highlightedName=n.highlightStringParts(t.display_name,e)),t},getFieldInfoFormFormat:function(e){var t=undefined;return"sex"===e.name&&(t=this.sex_display),"country"===e.name&&(t=this.country_display),{sValue:e.get(),sRequirement:e.getStatus(),bRequired:e.isRequired(this.exemption),bShown:e.isShown(),bEditable:e.isEditable(),sDisplay:t,aRejectReasons:e.getRejectReasons()}},getInfoFormFormat:function(){var t=this;if(this.bIsLightForm){var n={fields:this.fields,inputs:["name","birth_date","who_are_they"].reduce(function(e,i){return e[i]=t.getFieldInfoFormFormat(t.fields[i]),e},{}),bHasId:this.hasId(),metadata_upload_uri:this.getMetadataUploadUri()};return e.debug("%c oModel --- getInfoFormFormat --- return light","color: springgreen",n),n}var s={fields:this.fields,inputs:this.getRegularFields().reduce(function(e,i){return e[i.name]=t.getFieldInfoFormFormat(i),e},{exemption:{sValue:t.exemption,bShown:t.isExemptionShown(),bEditable:!0}}),bHasId:this.hasId(),metadata_upload_uri:this.getMetadataUploadUri(),files:[{sInputName:"profile_pic",sDisplay:i.__("profile.profile_picture"),sLegend:i.__("video.user_suggest.no_id_document_here"),bCropWidget:!0,bDataUrl:!0,bShowBlock:this.fields.profile_pic.isShown(),sBlockPicto:"user-o",bHasFile:this.hasProfilePic(),bHasFileLink:this.hasProfilePic()&&!this.fields.profile_pic.isHiddenUnchanged(),bCanUpload:this.canUploadProfilePic(),sFileUri:this.getProfilePicUri(),sFileUploadUri:this.getProfilePicUploadUri(),sSetIdFuncName:"setUploadedProfilePicId",bRequired:this.fields.profile_pic.isRequired(this.exemption),bMissing:this.fields.profile_pic.isMissing(this.exemption),sFilePicto:this.getProfilePicStatusPicto(),sFilePictoTitle:this.getProfilePicStatusPictoTitle(),sFileColor:this.getProfilePicStatusColorLevel(),aRejectReasons:this.fields.profile_pic.getRejectReasons()},{sInputName:"id_document",sDisplay:i.__("video.user_suggest.new_model_identification"),oRules:{input_not:{exemption:o.EXEMPTIONS.NONE}},sLegend:i.__("video.user_suggest.model_must_be_at_least_18",{"%strong%":"<strong>","%strong_end%":"</strong>"})+"<br/>"+i.__("video.user_suggest.id_document_must_show_age"),bShowBlock:this.fields.id_document.isShown(),sBlockPicto:"id-card-o",bHasFile:this.hasIdentificationDoc(),bHasFileLink:this.hasIdentificationDoc()&&!this.fields.id_document.isHiddenUnchanged(),bCanUpload:this.canUploadIdentificationDoc(),sFileUri:this.getIdentificationDocUri(),sFileUploadUri:this.getIdentificationDocUploadUri(),sSetIdFuncName:"setUploadedIdentificationDocId",bRequired:this.fields.id_document.isRequired(this.exemption),bMissing:this.fields.id_document.isMissing(this.exemption),sFilePicto:this.getIdentificationDocStatusPicto(),sFilePictoTitle:this.getIdentificationDocStatusPictoTitle(),sFileColor:this.getIdentificationDocStatusColorLevel(),aRejectReasons:this.fields.id_document.getRejectReasons()},{sInputName:"consent_form",sDisplay:i.__("video.user_suggest.new_model_consent_form"),oRules:{input_not:{exemption:o.EXEMPTIONS.NONE}},sLegend:i.__("video.user_suggest.consent_form_must_be_signed",{"%strong%":"<strong>","%strong_end%":"</strong>"}),bShowBlock:this.fields.consent_form.isShown(),sBlockPicto:"contract-o",bHasFile:this.fields.consent_form.hasFile(),bHasFileLink:this.fields.consent_form.hasFile()&&!this.fields.consent_form.isHiddenUnchanged(),bCanUpload:this.canUploadConsentForm(),sFileUri:this.getConsentFormUri(),sFileUploadUri:this.getConsentFormUploadUri(),sSetIdFuncName:"setUploadedConsentFormId",bRequired:this.fields.consent_form.isRequired(this.exemption),bMissing:this.fields.consent_form.isMissing(this.exemption),sFilePicto:this.fields.consent_form.getDocumentStatusPicto(),sFilePictoTitle:this.fields.consent_form.getDocumentStatusPictoTitle(),sFileColor:this.fields.consent_form.getDocumentStatusColorLevel(),aRejectReasons:this.fields.consent_form.getRejectReasons()}]};return e.debug("%c oModel --- getInfoFormFormat","color: springgreen",s),s},getDisplayName:function(){return this.display_name},getDisplaySex:function(){return this.sex_display},getDisplayAge:function(){return this.age_display},getDisplayCountry:function(){return this.country_display},getUri:function(){return this.uri},getPic:function(){return this.pic},getPicBig:function(){return this.pic_big},getThumb:function(){return this.thumb},getThumbs:function(){return this.thumbs},getCountryCode:function(){return this.country_code},getNbVideos:function(){return this.nb_videos},getRank:function(){return this.rank},setReviewStatus:function(t){o.S_STATUS_MODEL[t]||t===undefined||e.error("Invalid review_status",t),this.review_status=t},getReviewStatus:function(){return this.review_status},getCanDoVerifiedVideo:function(){return this.canDoVerifiedVideo}},o}),define("skins/common/video/user_metadata_suggest/model_existing",["./model"],function(e){function t(t){e.call(this,t)}return t.prototype=Object.create(e.prototype),t.constructor=t,t.prototype.clone=function(){return new t(JSON.parse(JSON.stringify(this)))},t.prototype.getMetadataUploadUri=function(){return"/account/models/update-model-metadata/"+this.getId()},t.prototype.getIdentificationDocUri=function(){return!!this.fields.id_document.hasFile()&&"/account/models/model-file/id-document/"+this.fields.id_document.id_file},t.prototype.getIdentificationDocUploadUri=function(){return"/account/models/upload-model-file/id-document/"+this.getId()},t.prototype.getConsentFormUri=function(){return!!this.fields.consent_form.hasFile()&&"/account/models/model-file/consent-form/"+this.fields.consent_form.id_file},t.prototype.getConsentFormUploadUri=function(){return"/account/models/upload-model-file/consent-form/"+this.getId()},t.prototype.getProfilePicUri=function(){return!!this.fields.profile_pic.hasFile()&&"/account/models/model-file/profile-pic/"+this.fields.profile_pic.id_file},t.prototype.getProfilePicUploadUri=function(){return"/account/models/upload-model-file/profile-pic/"+this.getId()},t.prototype.getTypePicto=function(){return"user-check"},t}),define("skins/common/video/user_metadata_suggest/model_suggest",["config/main","./model"],function(e,t){function i(i){i=i||JSON.parse(JSON.stringify(e.dyn.modelSuggest.newSuggestedModel)),t.call(this,i),this.exemption||this.setExemption("NONE")}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i(JSON.parse(JSON.stringify(this)))},i.prototype.getMetadataUploadUri=function(){return"/account/models/update-suggested-metadata/"+(this.getIdSuggestedElement()?this.getIdSuggestedElement():0)},i.prototype.getIdentificationDocUri=function(){return!!this.fields.id_document.hasFile()&&"/account/models/suggested-file/id-document/"+this.id_document.id_file},i.prototype.getIdentificationDocUploadUri=function(){return!!this.getIdSuggestedElement()&&"/account/models/upload-suggested-file/id-document/"+this.getIdSuggestedElement()},i.prototype.getConsentFormUri=function(){return!!this.fields.consent_form.hasFile()&&"/account/models/suggested-file/consent-form/"+this.consent_form.id_file},i.prototype.getConsentFormUploadUri=function(){return!!this.getIdSuggestedElement()&&"/account/models/upload-suggested-file/consent-form/"+this.getIdSuggestedElement()},i.prototype.getProfilePicUri=function(){return!!this.fields.profile_pic.hasFile()&&"/account/models/suggested-file/profile-pic/"+this.profile_pic.id_file},i.prototype.getProfilePicUploadUri=function(){return!!this.getIdSuggestedElement()&&"/account/models/upload-suggested-file/profile-pic/"+this.getIdSuggestedElement()},i.prototype.getTypePicto=function(){return"user-plus"},i}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/thumb_block/model_video.mustache",[],function(){return'<div id="profile_{{ sUserName }}" class="thumb-block thumb-block-premium-feed-account is-model-video">\n\t<div class="thumb-inside">\n\t\t<div class="thumb">\n\t\t\t<a href="{{ sUrl }}" target="_blank">\n\t\t\t\t<img src="{{ sThumb }}" id="pic_{{ sUserName }}"{{#bIsPicListingTypeProfile}} class="profile-pic"{{/bIsPicListingTypeProfile}} onerror="this.src=\'{{ sDefaultThumbPic }}\'; this.onerror=null;"/>\n\t\t\t\t<div class="profile-name">\n\t\t\t\t\t{{#sRank}}\n\t\t\t\t\t\t<div class="rank-part">{{{ sRank }}}</div>\n\t\t\t\t\t{{/sRank}}\n\t\t\t\t\t<div class="name-part">{{{ sHighlightedName }}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="top-tags">\n\t\t\t\t\t{{#bHasTagsLeft}}\n\t\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t\t{{#aLeftTags}}\n\t\t\t\t\t\t\t\t<div class="tag-part">{{{ . }}}</div>\n\t\t\t\t\t\t\t{{/aLeftTags}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/bHasTagsLeft}}\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t{{#bHasTagsRight}}\n\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t{{#aRightTags}}\n\t\t\t\t\t\t\t\t<div class="tag-part">{{{ . }}}</div>\n\t\t\t\t\t\t\t{{/aRightTags}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/bHasTagsRight}}\n\t\t\t\t</div>\n\t\t\t\t<div class="profile-hover">\n                    <div class="label">\n\t\t\t\t\t\t{{#bReplaceThumbLink}}\n\t\t\t\t\t\t\t{{#sUrl}}\n\t\t\t\t\t\t\t\t<div class="icon-f icf-external-link"></div>\n\t\t\t\t\t\t\t\t<div class="label-text">{{{ sClickOpen }}}</div>\n\t\t\t\t\t\t\t{{/sUrl}}\n\t\t\t\t\t\t{{/bReplaceThumbLink}}\n\t\t\t\t\t\t{{^bReplaceThumbLink}}\n\t\t\t\t\t\t\t<div class="icon-f icf-eye"></div>\n\t\t\t\t\t\t\t<div class="label-text">{{{ sClickPreview }}}</div>\n\t\t\t\t\t\t{{/bReplaceThumbLink}}\n                    </div>\n                </div>\n\t\t\t</a>\n\t\t</div>\n\t\t{{#sUserPic}}\n\t\t\t<img class="profile-pic-big" src="{{ sUserPicBig }}" onerror="this.src=\'{{ sDefaultProfilPic }}\'; this.onerror=null;"/>\n\t\t{{/sUserPic}}\n\t</div>\n\t<div class="thumb-under">\n\t\t{{#sUserPic}}\n\t\t\t<img class="profile-pic" src="{{ sUserPic }}" onerror="this.src=\'{{ sDefaultProfilPic }}\'; this.onerror=null;"/>\n\t\t{{/sUserPic}}\n\t\t<p class="account-actions">\n\t\t\t<button class="btn btn-primary assign add-model" type="button">\n\t\t\t\t<span class="icon-f icf-plus-circle"></span>\n\t\t\t\t<span class="label">{{{ sAssignToVideo }}}</span>\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</div>'}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/account_preview/model_video_pop.mustache",[],function(){return'<div class="account-preview">\n\t<div class="account-preview-header{{#bHasModelInfo}} with-model-info{{/bHasModelInfo}}{{#sProfilePic}} with-pic{{/sProfilePic}}">\n\t\t<div class="prof-pic-n-page-link{{#sProfilePic}} with-pic{{/sProfilePic}}">\n\t\t\t{{#sProfilePic}}\n\t\t\t\t<div class="profile-pic">\n\t\t\t\t\t{{#sHref}}<a href="{{{ sHref }}}" title="{{{ sModelPageTitle }}}" target="_blank">{{/sHref}}\n\t\t\t\t\t\t<img src="{{{ sProfilePic }}}" onerror="this.src=\'{{ sProfilePicDefault }}\'; this.onerror=null;" alt="" />\n\t\t\t\t\t{{#sHref}}</a>{{/sHref}}\n\t\t\t\t</div>\n\t\t\t{{/sProfilePic}}\n\t\t\t{{#sHref}}\n\t\t\t\t<a href="{{{ sHref }}}" title="{{{ sModelPageTitle }}}" class="btn btn-default page-link" target="_blank">{{{ sModelPage }}}</a>\n\t\t\t{{/sHref}}\n\t\t</div>\n\n\t\t<h2>\n\t\t\t<span class="label">{{{ sChannelTitle }}}</span>\n\t\t</h2>\n\n\t\t{{#bHasModelInfo}}\n\t\t\t<div class="model-info">\n\t\t\t\t{{#aModelInfo}}\n\t\t\t\t\t<p>{{#sLabel}}<span>{{{ sLabel }}}: </span> {{/sLabel}}<strong>{{{ sValue }}}</strong></p>\n\t\t\t\t{{/aModelInfo}}\n\t\t\t</div>\n\t\t{{/bHasModelInfo}}\n\n\t\t<p class="account-actions">\n\t\t\t<button class="btn btn-primary assign" type="button"><span class="icon-f icf-plus-circle"></span> {{{ sAssign }}}</button>\n\t\t</p>\n\t</div>\n\n\t<div class="mozaique-container{{#bHasModelInfo}} with-model-info{{/bHasModelInfo}}{{#sProfilePic}} with-pic{{/sProfilePic}}">\n\t\t<div class="mozaique thumbs-2-cols">\n\t\t\t{{{ sMozaique }}}\n\t\t</div>\n\t</div>\n</div>'}),define("text!skins/common/sub_suggestions/suggestBlock/tpls/account_preview/thumb_img_list.mustache",[],function(){return'{{#img_list}}\n\t<img src="{{{ . }}}"/>\n{{/img_list}}'}),define("text!skins/common/design/flag_small.mustache",[],function(){return'<span class="flag-small flag-{{{ . }}}"></span>'}),define("text!skins/common/design/nb_videos.mustache",[],function(){return'<div class="video-nb-icon">\n\t<div class="video-nb">{{{ . }}}</div>\n\t<span class="icon-f icf-video-camera"></span>\n</div>'}),define("skins/common/sub_suggestions/suggestBlock/suggestModelVideo",["../suggestBlock","config/main","mustache","lib/tools","lib/i18n!front","text!./tpls/thumb_block/model_video.mustache","text!./tpls/account_preview/model_video_pop.mustache","text!./tpls/account_preview/thumb_img_list.mustache","text!skins/common/design/flag_small.mustache","text!skins/common/design/nb_videos.mustache","lib/helpers/overlay/box","lib/helpers/scrollbar"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=function(t){var i={};n.initParams(i,t,f.GET_DEFAULT_OPTIONS()),e.apply(this,[i])};return f.DEFAULT_OPTIONS={sHighlightedText:null,oTemplates:{sTplFlagSmall:l,sTplNbVideos:d,sTplThumbBlock:o,sTplPopPreview:a,sTplPopPreviewThumb:r},oUrls:{fnPopPreviewVideos:function(e,t){return"/feed/channels/"+e.iId+"/videos/"+t}},oTranslations:{assign:"video.users_suggest.assign_to_video",no_content_found:"misc.no_content_found",profile:{model_page:"profile.model_page"}},oListeners:{onAssign:undefined}},f.GET_DEFAULT_OPTIONS=function(){var t={};return n.initParams(t,f.DEFAULT_OPTIONS,e.GET_DEFAULT_OPTIONS()),t},f.prototype=Object.create(e.prototype),f.prototype.constructor=f,f.buildFromModel=function(e,t){return new f(t).setPropertiesFromModel(e)},f.prototype.setPropertiesFromModel=function(e){return this.setId(e.getId()).setIde(e.getIdSuggestedElement()).setAgeDisplay(e.getDisplayAge()).setSexDisplay(e.getDisplaySex()).setUserName(e.getDisplayName()).setDisplayName(e.getDisplayName()).setRank(e.getRank()).setUrl(e.getUri()).setCountryCode(e.getCountryCode()).setThumb(e.getThumb()).setThumbs(e.getThumbs()).setCsrf().setIsPicListingTypeProfile(!0).setNbVideos(e.getNbVideos()).setNbVideosFree(e.getNbVideos()).setNbVideosPremium(e.getNbVideos()).setVideos([]).setUserPic(e.getThumb()?e.getPic():null).setUserPicBig(e.getThumb()?e.getPicBig():null).setThumb(e.getThumb()?e.getThumb():e.getPic()).setModel(e)},f.prototype.buildFromJSON=function(){throw console.error("Cannot use JSON to build SuggestModelVideo !"),"Invalid call to SuggestModelVideo.buildFromJSON"},f.prototype.hasPreviewContent=function(){return!!this.sThumbs&&this.sThumbs.length>0},f.prototype.getTplData=function(){var t=e.prototype.getTplData.apply(this),n=[],o=[];return this.iNbVideos&&n.push(i.render(this.oOptions.oTemplates.sTplNbVideos,this.iNbVideos)),this.sCountryCodeLower&&o.push(i.render(this.oOptions.oTemplates.sTplFlagSmall,this.sCountryCodeLower)),this.sAgeDisplay&&o.push(this.sAgeDisplay),this.sSexDisplay&&o.push(this.sSexDisplay),t.sAssignToVideo=s.__(this.oOptions.oTranslations.assign),t.sThumb=this.sThumb,t.sUserPicBig=this.sUserPicBig,t.aLeftTags=n,t.bHasTagsLeft=n.length>0,t.aRightTags=o,t.bHasTagsRight=o.length>0,t.bReplaceThumbLink=!this.hasPreviewContent(),t.sModelUrl=this.sUrl?this.sUrl:null,t.sClickOpen=s.__("misc.click_open_profile"),t.sHighlightedName=this.oOptions.sHighlightedText?this.oModel.getHighlightedName(this.oOptions.sHighlightedText):this.sDisplayName,t.sRank=this.sRank?"#"+this.sRank:null,t},f.prototype.initThumbEvents=function(){var e=this,t=this.$render.find(".profile-pic-big");this.$render.find(".thumb-under .profile-pic").hover(function(){t.addClass("is-visible"),t.removeClass("is-hidden")},function(){t.addClass("is-hidden"),t.removeClass("is-visible")}),this.$assignBtn=this.$render.find(".assign"),this.$assignBtn.on("click",function(){"function"==typeof e.oOptions.oListeners.onAssign&&e.oOptions.oListeners.onAssign(e.oModel)}),this.initThumbMainLink()},f.prototype.getPopPreviewData=function(){var e=this.sThumbs&&this.sThumbs.length>0?i.render(this.getTplPopPreviewThumb(),{img_list:this.sThumbs}):s.__(this.oOptions.oTranslations.no_content_found),n={sChannelPicSrc:this.sUserPic,sChannelTitle:this.sDisplayName,sMozaique:e,sHref:this.sUrl,sAssign:s.__(this.oOptions.oTranslations.assign),sProfilePic:this.sUserPic,sProfilePicDefault:t.domains["static"]+"/v3/img/skins/default/profile_default_big.jpg",sModelPageTitle:s.__(this.oOptions.oTranslations.profile.model_page),sModelPage:s.__(this.oOptions.oTranslations.profile.model_page)};return(this.sAgeDisplay||this.sSexDisplay||this.iNbVideos||this.sCountryCodeLower)&&(n.bHasModelInfo=!0,n.aModelInfo=[],this.sAgeDisplay&&n.aModelInfo.push({sLabel:s.__("profile.age"),sValue:this.sAgeDisplay}),this.sSexDisplay&&n.aModelInfo.push({sLabel:s.__("profile.gender"),sValue:this.sSexDisplay}),this.iNbVideos&&n.aModelInfo.push({sLabel:s.__("misc.videos"),sValue:this.iNbVideos.toLocaleString(t.dyn.locale)}),this.sCountryCodeLower&&n.aModelInfo.push({sLabel:s.__("country"),sValue:i.render(this.oOptions.oTemplates.sTplFlagSmall,this.sCountryCodeLower)})),n},f.prototype.onThumbLinkClick=function(e){!this.hasPreviewContent()&&this.sUrl||e.preventDefault(),this.hasPreviewContent()&&this.openPopPreview()},f.prototype.openPopPreview=function(){var e=$(i.render(this.getTplPopPreview(),this.getPopPreviewData())),t=u.get($("body"),!0,"close");t.setContent(e),t.setOverlayClosable(!0),t.setEscapeClosable(!0),t.addClass("auto-width-popup suggest-account-preview-pop model-video-preview is-model"),t.show("auto"),this.initPopPreviewActions(t,e);var n=e.find(".mozaique");new c({oOptions:{$Container:n,sMode:c.S_MODE_VERTICAL}})},f.prototype.initPopPreviewActions=function(e,t){var i=this;t.find(".account-actions").find(".assign").on("click",function(){e.close(),i.$assignBtn.click()})},f.prototype.setIde=function(e){return this.iIde=e,this},f.prototype.setThumb=function(e){return this.sThumb=e,this},f.prototype.setThumbs=function(e){return this.sThumbs=e,this},f.prototype.setAgeDisplay=function(e){return this.sAgeDisplay=e,this},f.prototype.setSexDisplay=function(e){return this.sSexDisplay=e,this},f.prototype.setRank=function(e){return this.sRank=e,this},f.prototype.setModel=function(e){return this.oModel=e,this},f.prototype.setUserPicBig=function(e){return this.sUserPicBig=e,this},f}),define("text!skins/common/video/user_metadata_suggest/templates/models_list.mustache",[],function(){return'{{#models}}\n    <div class="model-submitted card col-md-2 col-sm-3 col-xs-6{{#deleted}} line-through{{/deleted}}"\n         data-id="{{id}}"\n\t    {{#ids}} data-ids=\'{{ids}}\'{{/ids}}\n\t    {{#ide}} data-ide=\'{{ide}}\'{{/ide}}>\n\n        <div class="card-img">\n            <div class="overlay-container" >\n                <img src="{{{thumb}}}" onerror="this.src=\'/profiles-picture/xvideos\'; this.onerror=null" />\n                <div class="overlay2">\n                    <span class="icon-f icf-ban {{^deleted}}hidden{{/deleted}}"></span>\n                </div>\n            </div>\n        </div>\n        <div class="card-footer">\n            <p class="name"><a target="_blank">{{{highlightedName}}}</a></p>\n        </div>\n    </div>\n{{/models}}\n'}),define("text!skins/common/video/user_metadata_suggest/templates/find_models.mustache",[],function(){return'<div id="models_list" class="absolute">\n    <div class="super-container">\n        <div class="container-list-models-suggestion with-to-scroll">\n\t        <div class="to-scroll">\n\t            <div class="small-padding pull-left">\n\t                <button type="button" id="add_new_form_access" class="btn btn-xs btn-default">\n\t\t                <span class="icon-f icf-plus"></span> {{{cant_find_right_model_add_a_new_one}}}\n\t                </button>\n\t            </div>\n\t            <div class="clearfix"></div>\n\n\t            <div class="add_model_error_global hidden alert alert-danger pull-left"></div>\n\n\t            <div class="mozaique"></div>\n\t        </div>\n        </div>\n    </div>\n</div>\n'}),define("skins/form/validator/base",["static/utils"],function(e){var t={},i=function(e,t){"object"==typeof t&&(this.parent=e,this.options=t.options,this.messages=t.messages,this.messages_vars=t.messages_vars||{})};return i.prototype={errorChanged:null,refresh:null,isValid:null,focus:null,getRegexp:function(e){if(t[e])return t[e];if("/"!==e.substring(0,1))return t[e]=new RegExp(e,"g"),t[e];var i=e.lastIndexOf("/");if(i<=0)return t[e]=new RegExp(e,"g"),t[e];var n=e.substring(i+1).toLowerCase().replace(/[^gimuy]/g,"");return 0===n.length&&(n="g"),t[e]=new RegExp(e.substring(1,i),n),t[e]},getMessage:function(t,i,n){var s=i;if(this.messages[t]&&(s=e.unescape(this.messages[t])),"object"==typeof this.messages_vars[t]){n||(n={});for(var o in this.messages_vars[t])this.messages_vars[t].hasOwnProperty(o)&&(n[o]=this.messages_vars[t][o])}if(n)for(var a in n)n.hasOwnProperty(a)&&(s=s.replace(a,n[a]));return s},strimwidth:function(t,i){return"string"!=typeof t&&(t=t.toString()),t.length+3>i?e.escape(t.substring(0,i-3))+"...":e.escape(t)}},i}),define("skins/form/validator/focus",["lib/tools","static/dom"],function(e,t){return validator_focus=function(){this.list={}},validator_focus.prototype={focus:function(i,n){if(i=t.element(i)){void 0===n&&(n=this.getId(i)),this.list[n]||(this.list[n]={timeout:!1,elem:i});var s=this.list[n],o=this;t.isElementInView(s.elem,!0)||e.scrollTo(s.elem,100,0),s.elem.focus&&s.elem.focus(),s.timeout&&clearTimeout(s.timeout),$(s.elem).removeClass("hl-focus"),setTimeout(function(){$(s.elem).addClass("hl-focus")},10),s.timeout=setTimeout(function(){$(s.elem).removeClass("hl-focus"),delete o.list[n]},2e3)}},getId:function(e){if(e.id)return e.id;var t=e.tagName.toLowerCase();return e.getAttribute("name")&&(t+=e.getAttribute("name")),t}},new validator_focus}),define("skins/form/validator/xhr",[],function(){var e=function(e,t,i,n,s){this.cache={},this.result_cache={},this.url=e,this.params="object"==typeof t?t:[t],this.other_params={},this.min_chars=i||3,this.intervall=n||1e3,this.is_post=!!s,this.last_check=0,this.last_checked=null,this.pending_check=null,this.timer=null,this.xhr=null};return e.prototype={checkStart:null,checkEnd:null,checkError:null,setOtherParam:function(e,t){this.other_params[e]=t},check:function(){var t=arguments;if(t.length!==this.params.length)return console.error("validator/xhr.check: You passed "+t.length+" arguments when "+this.params.length+" are required",t,t.length,this.params,this.params.length),void this.checkEnd(!0,{});for(var i in t)if(t[i].length<this.min_chars)return void this.checkEnd(!0,{});var n="";for(var s in t)n+="+"+t[s];for(var o in this.other_params)n+="+"+o+"+"+this.other_params[o];if("undefined"!=typeof this.cache[n])return void this.checkEnd(this.cache[n],this.result_cache[n]);if(this.last_checked!==n){this.checkStart(),this.pending_check=t;var a=(new Date).getTime(),r=this;if(a-this.last_check<=this.intervall){if(this.timer)return;return void(this.timer=window.setTimeout(function(){r.timer=null,e.prototype.check.apply(r,r.pending_check)},this.intervall-(a-this.last_check)))}this.last_checked=n,this.last_check=a,this.xhr&&this.xhr.abort();var l={};for(var d in this.params)l[this.params[d]]=t[d];for(var u in this.other_params)l[u]=this.other_params[u];this.xhr=$.ajax({url:this.url,data:l,type:this.is_post?"POST":"GET",dataType:"json",success:function(e){r.result_cache[n]=e,e.result?r.cache[n]=!0:r.cache[n]=e.message,r.checkEnd(r.cache[n],e)}}).fail(function(){r.checkError()})}}},e}),define("skins/form/validator/input_base",["lib/tools","static/dom","static/utils","lib/converter","lib/helpers/popup","./base","./focus","./xhr"],function(e,t,i,n,s,o,a,r){var l=[],d="rtl"===$("html").prop("dir"),u=function(e,t){if("object"==typeof t){o.apply(this,[e,t]),this.id=t.elt_id,this.input=this.getInput(),this.input_agent=this.getInputAgent(),this.type=t.elt_type,this.input_type=t.input_type,this.focused=this.input.is(":focus"),this.has_error=!1,this.error_txt=!1,this.warning=!1,this.icon=null,this.popup=null,this.popup_timer=null;var i=this;this.input.on("focus",function(){i.focused=!0,i.showError(),i.showWarning()}),this.input.on("blur",function(){i.focused=!1,i.startTimer(!0)}),this.input.data("validator",this),this.input.trigger("validator-init")}};u.prototype=new o,u.prototype.doValidate=null,u.prototype.validate=function(){return!(this.doValidate&&!this.doValidate(this.getValue()))&&this.validateXhr()},u.prototype.refresh=function(){this.positionIcon()},u.prototype.getInputAgent=function(){return this.input},u.prototype.focus=function(){a.focus(this.input_agent),this.showError(),this.showWarning()},u.prototype.isValid=function(){
return!(this.has_error||this.options.required&&this.isEmpty())},u.prototype.getInput=function(){return $("#"+this.id)},u.prototype.getValue=function(){return $.trim(this.input.val())},u.prototype.isEmpty=function(){return 0===this.getValue().length},u.prototype.showIcon=function(e,t){if(this.icon)this.icon.removeClass().show();else{this.icon=$("<i></i>").css("position","absolute").css("z-index","100");var i=this.input.parent().css("position","relative");i.hasClass("input-group")?this.icon.appendTo(i):this.icon.insertAfter(this.input),l.push(this)}this.icon.addClass("icon-f icf-"+e+" text-"+t),this.positionIcon();var n=this;this.icon.on("mouseover",function(){n.showError(),n.showWarning()})},u.prototype.hideIcon=function(e,t){this.icon&&this.icon.hide()},u.prototype.positionIcon=function(){if(this.icon){var e=this.getIconPositionReference();if(e&&e.length){var t=e.position();t&&this.icon.css({top:this.options.tooltip_position_top?Math.round(t.top+n.trimPx(e.css("borderTopWidth"))+2)+"px":Math.round(t.top+e.outerHeight()-this.icon.outerHeight()-2)+"px",left:d?Math.round(t.left+n.trimPx(e.css("borderLeftWidth"))+2)+"px":Math.round(t.left+e.innerWidth()-this.icon.outerWidth()-2-n.trimPx(e.css("borderLeftWidth")))+"px"})}}},u.prototype.getIconPositionReference=function(){return this.input},u.prototype.showTooltip=function(e){this.popup?(this.popup.open(),e&&this.popup.setContent(e)):(this.popup=new s(this.icon,e,{relative_to:this.getTooltipParent(),trigger:!1,autoclose:!1,position:{v:this.options.tooltip_position_top?"above":"below",h:d?"left":"right"},popup_class:"form-popup-error",offset:{below:0,above:0,left:d?-4:0,right:d?0:-4},max_width:500}),this.input.is(":focus")&&this.popup.open()),this.startTimer(!0)},u.prototype.getTooltipParent=function(){return this.input.parent()},u.prototype.setLoading=function(){this.unsetError(),this.errorChanged&&this.errorChanged(!1,this),this.showIcon("spinner icf-anim-pulse","primary")},u.prototype.setSuccess=function(){this.unsetError(),this.errorChanged&&this.errorChanged(!1,this),this.warning?this.showWarning():(this.hideIcon(),this.popup&&this.popup.close())},u.prototype.setWarning=function(e){this.warning=e,this.has_error||this.showWarning()},u.prototype.showWarning=function(){if(this.has_error||!this.warning)return!1;this.showIcon("warning","warning"),this.showTooltip("<span>"+this.warning+"</span>")},u.prototype.clearWarning=function(){this.warning=!1,this.hideTooltip()},u.prototype.getLabel=function(){var e=function(e){return e=e.trim(),e.lastIndexOf(":")+1===e.length&&(e=e.substring(0,e.length-1)),e};if(this.input){if(this.input.prop("id")){var t=$("label[for="+this.input.prop("id")+"]");if(t.length>0&&t.text()&&(t=e(t.text()),t.length>0))return t}if(this.input.prop("placeholder")&&(t=e(this.input.prop("placeholder")),t.length>0))return t;var i=this.input,n=$();do{i=i.parents("fieldset"),n=i.find("legend").first()}while(i.length>0&&0===n.length);if(n.length>0&&n.text()){var s=!1,o=!0;if(i.find("input, textarea, select").each(function(){s?s!==$(this).prop("name")&&(o=!1):s=$(this).prop("name")}),o&&(t=e(n.text()),t.length>0))return t}}return!1},u.prototype.getError=function(){return this.error_txt},u.prototype.unsetError=function(){this.has_error=!1,this.error_txt=!1,this.input_agent.removeClass("validator-error")},u.prototype.emptyVxhrErrors=function(){this.vxhr_nbchecked=0,this.vxhr_errors=[]},u.prototype.setError=function(e,t){this.has_error=!0,this.error_txt=e,this.errorChanged&&this.errorChanged(!0,this),this.showIcon("close","danger"),this.input_agent.addClass("validator-error"),e=$("<span>"+e+"</span>"),"function"==typeof t&&e.addClass("click-func").on("mousedown",t),this.showTooltip(e)},u.prototype.showError=function(){if(!this.has_error)return!1;this.showTooltip()},u.prototype.hideTooltip=function(e){if(!e&&(!this.has_error&&!this.warning||this.focused))return!1;this.popup&&this.popup.close()},u.prototype.startTimer=function(e){if(this.popup_timer){if(!e)return;window.clearTimeout(this.popup_timer)}var t=this;this.popup_timer=window.setTimeout(function(){t.hideTooltip()},3e3)},u.prototype.stopTimer=function(){this.popup_timer&&(window.clearTimeout(this.popup_timer),this.popup_timer=null)},u.prototype.hasXhr=function(e){return!!this.vxhr&&"object"==typeof this.vxhr[e]},u.prototype.setupXhr=function(e,t,i,n,s,o){if(this.vxhr||(this.vxhr={},this.vxhr_other_values={},this.vxhr_callbacks={},this.nb_xhr=0),"undefined"==typeof this.vxhr[e]){var a=this;this.vxhr[e]=new r(t,i,n,s,o),this.vxhr[e].checkStart=function(){a.setLoading()},this.vxhr[e].checkError=function(){a.vxhr_nbchecked++;for(var t in a.vxhr_callbacks[e].error)a.vxhr_callbacks[e].error[t]();a.checkXhrs()},this.vxhr[e].checkEnd=function(t,i){!0!==t&&a.vxhr_errors.push(t);for(var n in a.vxhr_callbacks[e].success)a.vxhr_callbacks[e].success[n](t,i);a.vxhr_nbchecked++,a.checkXhrs()},this.nb_xhr++,this.vxhr_other_values[e]=[],this.vxhr_callbacks[e]={success:[],error:[]}}},u.prototype.setXhrOtherParam=function(e,t,i){this.vxhr[e].setOtherParam(t,i)},u.prototype.setXhrOtherValues=function(e,t){this.vxhr_other_values[e]=t},u.prototype.addXhrSuccessCallback=function(e,t){this.vxhr_callbacks[e].success.push(t)},u.prototype.addXhrErrorCallback=function(e,t){this.vxhr_callbacks[e].error.push(t)},u.prototype.validateXhr=function(){if(!this.vxhr)return this.setSuccess(),!0;this.emptyVxhrErrors();var e=this.getValue();for(var t in this.vxhr)this.vxhr.hasOwnProperty(t)&&r.prototype.check.apply(this.vxhr[t],[e].concat(this.vxhr_other_values[t]));return!1},u.prototype.checkXhrs=function(){if(this.nb_xhr===this.vxhr_nbchecked)return 0===this.vxhr_errors.length?void this.setSuccess():void this.setError(this.vxhr_errors.join("<br>"))};var c,f=function(){c&&(c=null);for(var e in l)l[e].positionIcon()};return $(window).on("resize",function(){c||(c=window.setTimeout(f,250))}),u}),function(e,t){"function"==typeof define&&define.amd?define("libs/croppie",t):"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=t():e.Croppie=t()}("undefined"!=typeof self?self:this,function(){function e(e){if(e in Y)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=G.length;i--;)if((e=G[i]+t)in Y)return e}function t(e,t){var i=K.indexOf(e)>-1?K:X,n=i.indexOf(e),s=t/90%i.length;return i[(i.length+n+s%i.length)%i.length]}function i(e,t){e=e||{};for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},i(e[n],t[n])):e[n]=t[n];return e}function n(e){return i({},e)}function s(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function o(e,t,i){if("string"==typeof t){var n=t;t={},t[n]=i}for(var s in t)e.style[s]=t[s]}function a(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function r(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function l(e,t){for(var i in t)e.setAttribute(i,t[i])}function d(e){return parseInt(e,10)}function u(e,t){if(!e)throw"Source image missing";var i=new Image;return i.style.opacity="0",new Promise(function(n,s){function o(){i.style.opacity="1",setTimeout(function(){n(i)},1)}i.removeAttribute("crossOrigin"),e.match(/^https?:\/\/|^\/\//)&&i.setAttribute("crossOrigin","anonymous"),i.onload=function(){t?EXIF.getData(i,function(){o()}):o()},i.onerror=function(e){i.style.opacity=1,setTimeout(function(){s(e)},1)},i.src=e})}function c(e,t){var i=e.naturalWidth,n=e.naturalHeight,s=t||f(e);if(s&&s>=5){var o=i;i=n,n=o}return{width:i,height:n}}function f(e){return e.exifdata&&e.exifdata.Orientation?d(e.exifdata.Orientation):1}function h(e,t,i){var n=t.width,s=t.height,o=e.getContext("2d");switch(e.width=t.width,e.height=t.height,o.save(),i){case 2:o.translate(n,0),o.scale(-1,1);break;case 3:o.translate(n,s),o.rotate(180*Math.PI/180);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.scale(1,-1);break;case 6:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.translate(0,-s);break;case 7:e.width=s,e.height=n,o.rotate(-90*Math.PI/180),o.translate(-n,s),o.scale(1,-1);break;case 8:e.width=s,e.height=n,o.translate(0,n),o.rotate(-90*Math.PI/180)}o.drawImage(t,0,0,n,s),o.restore()}function p(){var e,t,i,n,s,r,d=this,u=d.options.viewport.type?"cr-vp-"+d.options.viewport.type:null;d.options.useCanvas=d.options.enableOrientation||_.call(d),d.data={},d.elements={},e=d.elements.boundary=document.createElement("div"),i=d.elements.viewport=document.createElement("div"),t=d.elements.img=document.createElement("img"),n=d.elements.overlay=document.createElement("div"),d.options.useCanvas?(d.elements.canvas=document.createElement("canvas"),d.elements.preview=d.elements.canvas):d.elements.preview=t,a(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),s=d.options.boundary.width,r=d.options.boundary.height,o(e,{width:s+(isNaN(s)?"":"px"),height:r+(isNaN(r)?"":"px")}),a(i,"cr-viewport"),u&&a(i,u),o(i,{width:d.options.viewport.width+"px",height:d.options.viewport.height+"px"}),i.setAttribute("tabindex",0),a(d.elements.preview,"cr-image"),l(d.elements.preview,{alt:"preview","aria-grabbed":"false"}),a(n,"cr-overlay"),d.element.appendChild(e),e.appendChild(d.elements.preview),e.appendChild(i),e.appendChild(n),a(d.element,"croppie-container"),d.options.customClass&&a(d.element,d.options.customClass),C.call(this),d.options.enableZoom&&b.call(d),d.options.enableResize&&g.call(d)}function _(){return this.options.enableExif&&window.EXIF}function g(){function e(e){if((e.button===undefined||0===e.button)&&(e.preventDefault(),!p)){var o=f.elements.overlay.getBoundingClientRect();if(p=!0,s=e.pageX,r=e.pageY,n=-1!==e.currentTarget.className.indexOf("vertical")?"v":"h",l=o.width,d=o.height,e.touches){var a=e.touches[0];s=a.pageX,r=a.pageY}window.addEventListener("mousemove",t),window.addEventListener("touchmove",t),window.addEventListener("mouseup",i),window.addEventListener("touchend",i),document.body.style[W]="none"}}function t(e){var t=e.pageX,i=e.pageY;if(e.preventDefault(),e.touches){var a=e.touches[0];t=a.pageX,i=a.pageY}var u=t-s,c=i-r,p=f.options.viewport.height+c,g=f.options.viewport.width+u;"v"===n&&p>=_&&p<=d?(o(h,{height:p+"px"}),f.options.boundary.height+=c,o(f.elements.boundary,{height:f.options.boundary.height+"px"}),f.options.viewport.height+=c,o(f.elements.viewport,{height:f.options.viewport.height+"px"})):"h"===n&&g>=_&&g<=l&&(o(h,{width:g+"px"}),f.options.boundary.width+=u,o(f.elements.boundary,{width:f.options.boundary.width+"px"}),f.options.viewport.width+=u,o(f.elements.viewport,{width:f.options.viewport.width+"px"})),w.call(f),E.call(f),D.call(f),S.call(f),r=i,s=t}function i(){p=!1,window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),document.body.style[W]=""}var n,s,r,l,d,u,c,f=this,h=document.createElement("div"),p=!1,_=50;a(h,"cr-resizer"),o(h,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(u=document.createElement("div"),a(u,"cr-resizer-vertical"),h.appendChild(u)),this.options.resizeControls.width&&(c=document.createElement("div"),a(c,"cr-resizer-horisontal"),h.appendChild(c)),u&&(u.addEventListener("mousedown",e),u.addEventListener("touchstart",e)),c&&(c.addEventListener("mousedown",e),c.addEventListener("touchstart",e)),this.elements.boundary.appendChild(h)}function m(e){if(this.options.enableZoom){var t=this.elements.zoomer,i=V(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),i)).toString()}}function b(){function e(){v.call(i,{value:parseFloat(s.value),origin:new Z(i.elements.preview),viewportRect:i.elements.viewport.getBoundingClientRect(),transform:Q.parse(i.elements.preview)})}function t(t){var n,s;if("ctrl"===i.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,s=i._currentZoom+n*i._currentZoom,t.preventDefault(),m.call(i,s),e.call(i)}var i=this,n=i.elements.zoomerWrap=document.createElement("div"),s=i.elements.zoomer=document.createElement("input");a(n,"cr-slider-wrap"),a(s,"cr-slider"),s.type="range",s.step="0.0001",s.value="1",s.style.display=i.options.showZoomer?"":"none",s.setAttribute("aria-label","zoom"),i.element.appendChild(n),n.appendChild(s),i._currentZoom=1,i.elements.zoomer.addEventListener("input",e),i.elements.zoomer.addEventListener("change",e),i.options.mouseWheelZoom&&(i.elements.boundary.addEventListener("mousewheel",t),i.elements.boundary.addEventListener("DOMMouseScroll",t))}function v(e){function t(){var e={};e[z]=n.toString(),e[q]=a.toString(),o(i.elements.preview,e)}var i=this,n=e?e.transform:Q.parse(i.elements.preview),s=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),a=e?e.origin:new Z(i.elements.preview);if(i._currentZoom=e?e.value:i._currentZoom,n.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),t(),i.options.enforceBoundary){var r=y.call(i,s),l=r.translate,d=r.origin;n.x>=l.maxX&&(a.x=d.minX,n.x=l.maxX),n.x<=l.minX&&(a.x=d.maxX,n.x=l.minX),n.y>=l.maxY&&(a.y=d.minY,n.y=l.maxY),n.y<=l.minY&&(a.y=d.maxY,n.y=l.minY)}t(),ee.call(i),S.call(i)}function y(e){var t=this,i=t._currentZoom,n=e.width,s=e.height,o=t.elements.boundary.clientWidth/2,a=t.elements.boundary.clientHeight/2,r=t.elements.preview.getBoundingClientRect(),l=r.width,d=r.height,u=n/2,c=s/2,f=-1*(u/i-o),h=f-(l*(1/i)-n*(1/i)),p=-1*(c/i-a),_=p-(d*(1/i)-s*(1/i)),g=1/i*u,m=l*(1/i)-g,b=1/i*c;return{translate:{maxX:f,minX:h,maxY:p,minY:_},origin:{maxX:m,minX:g,maxY:d*(1/i)-b,minY:b}}}function D(e){var t=this,i=t._currentZoom,n=t.elements.preview.getBoundingClientRect(),s=t.elements.viewport.getBoundingClientRect(),a=Q.parse(t.elements.preview.style[z]),r=new Z(t.elements.preview),l=s.top-n.top+s.height/2,d=s.left-n.left+s.width/2,u={},c={};if(e){var f=r.x,h=r.y,p=a.x,_=a.y;u.y=f,u.x=h,a.y=p,a.x=_}else u.y=l/i,u.x=d/i,c.y=(u.y-r.y)*(1-i),c.x=(u.x-r.x)*(1-i),a.x-=c.x,a.y-=c.y;var g={};g[q]=u.x+"px "+u.y+"px",g[z]=a.toString(),o(t.elements.preview,g)}function C(){function e(e,t){var i=p.elements.preview.getBoundingClientRect(),n=h.y+t,s=h.x+e;p.options.enforceBoundary?(f.top>i.top+t&&f.bottom<i.bottom+t&&(h.y=n),f.left>i.left+e&&f.right<i.right+e&&(h.x=s)):(h.y=n,h.x=s)}function t(e){p.elements.preview.setAttribute("aria-grabbed",e),p.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function i(e){var t=37,i=38,s=39,o=40;if(!e.shiftKey||e.keyCode!==i&&e.keyCode!==o){if(p.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var a=function(e){switch(e){case t:return[1,0];case i:return[0,1];case s:return[-1,0];case o:return[0,-1]}}(e.keyCode);h=Q.parse(p.elements.preview),document.body.style[W]="none",f=p.elements.viewport.getBoundingClientRect(),n(a)}}else{var r;r=e.keyCode===i?parseFloat(p.elements.zoomer.value)+parseFloat(p.elements.zoomer.step):parseFloat(p.elements.zoomer.value)-parseFloat(p.elements.zoomer.step),p.setZoom(r)}}function n(t){var i=t[0],n=t[1],s={};e(i,n),s[z]=h.toString(),o(p.elements.preview,s),w.call(p),document.body.style[W]="",D.call(p),S.call(p),c=0}function a(e){if((e.button===undefined||0===e.button)&&(e.preventDefault(),!_)){if(_=!0,d=e.pageX,u=e.pageY,e.touches){var i=e.touches[0];d=i.pageX,u=i.pageY}t(_),h=Q.parse(p.elements.preview),window.addEventListener("mousemove",r),window.addEventListener("touchmove",r),window.addEventListener("mouseup",l),window.addEventListener("touchend",l),document.body.style[W]="none",f=p.elements.viewport.getBoundingClientRect()}}function r(t){t.preventDefault();var i=t.pageX,n=t.pageY;if(t.touches){var a=t.touches[0];i=a.pageX,n=a.pageY}var r=i-d,l=n-u,f={};if("touchmove"===t.type&&t.touches.length>1){var _=t.touches[0],g=t.touches[1],b=Math.sqrt((_.pageX-g.pageX)*(_.pageX-g.pageX)+(_.pageY-g.pageY)*(_.pageY-g.pageY));c||(c=b/p._currentZoom);var v=b/c;return m.call(p,v),void s(p.elements.zoomer)}e(r,l),f[z]=h.toString(),o(p.elements.preview,f),w.call(p),u=n,d=i}function l(){_=!1,t(_),window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l),document.body.style[W]="",D.call(p),S.call(p),c=0}var d,u,c,f,h,p=this,_=!1;p.elements.overlay.addEventListener("mousedown",a),p.elements.viewport.addEventListener("keydown",i),p.elements.overlay.addEventListener("touchstart",a)}function w(){if(this.elements){var e=this,t=e.elements.boundary.getBoundingClientRect(),i=e.elements.preview.getBoundingClientRect();o(e.elements.overlay,{width:i.width+"px",height:i.height+"px",top:i.top-t.top+"px",left:i.left-t.left+"px"})}}function S(){var e=this,t=e.get();if(k.call(e))if(e.options.update.call(e,t),e.$&&"undefined"==typeof Prototype)e.$(e.element).trigger("update.croppie",t);else{var i;window.CustomEvent?i=new CustomEvent("update",{detail:t}):(i=document.createEvent("CustomEvent"),i.initCustomEvent("update",!0,!0,t)),e.element.dispatchEvent(i)}}function k(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function T(){var e,t=this,i={},n=t.elements.preview,s=new Q(0,0,1),a=new Z;k.call(t)&&!t.data.bound&&(t.data.bound=!0,i[z]=s.toString(),i[q]=a.toString(),i.opacity=1,o(n,i),e=t.elements.preview.getBoundingClientRect(),t._originalImageWidth=e.width,t._originalImageHeight=e.height,t.data.orientation=_.call(t)?f(t.elements.img):t.data.orientation,t.options.enableZoom?E.call(t,!0):t._currentZoom=1,s.scale=t._currentZoom,i[z]=s.toString(),o(n,i),t.data.points.length?P.call(t,t.data.points):I.call(t),D.call(t),w.call(t))}function E(e){var t,i,n,o,a=this,r=Math.max(a.options.minZoom,0)||0,l=a.options.maxZoom||1.5,d=a.elements.zoomer,u=parseFloat(d.value),f=a.elements.boundary.getBoundingClientRect(),h=c(a.elements.img,a.data.orientation),p=a.elements.viewport.getBoundingClientRect();a.options.enforceBoundary&&(n=p.width/h.width,o=p.height/h.height,r=Math.max(n,o)),r>=l&&(l=r+1),d.min=V(r,4),d.max=V(l,4),!e&&(u<d.min||u>d.max)?m.call(a,u<d.min?d.min:d.max):e&&(i=Math.max(f.width/h.width,f.height/h.height),t=null!==a.data.boundZoom?a.data.boundZoom:i,m.call(a,t)),s(d)}function P(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,i=e[2]-e[0],n=t.elements.viewport.getBoundingClientRect(),s=t.elements.boundary.getBoundingClientRect(),a={left:n.left-s.left,top:n.top-s.top},r=n.width/i,l=e[1],d=e[0],u=-1*e[1]+a.top,c=-1*e[0]+a.left,f={};f[q]=d+"px "+l+"px",f[z]=new Q(c,u,r).toString(),o(t.elements.preview,f),m.call(t,r),t._currentZoom=r}function I(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),n=e.elements.boundary.getBoundingClientRect(),s=i.left-n.left,a=i.top-n.top,r=s-(t.width-i.width)/2,l=a-(t.height-i.height)/2,d=new Q(r,l,e._currentZoom);o(e.elements.preview,z,d.toString())}function F(e){var t=this,i=t.elements.canvas,n=t.elements.img;i.getContext("2d").clearRect(0,0,i.width,i.height),i.width=n.width,i.height=n.height,h(i,n,t.options.enableOrientation&&e||f(n))}function x(e){var t=this,i=e.points,n=d(i[0]),s=d(i[1]),o=d(i[2]),a=d(i[3]),r=o-n,l=a-s,u=e.circle,c=document.createElement("canvas"),f=c.getContext("2d"),h=e.outputWidth||r,p=e.outputHeight||l;c.width=h,c.height=p,e.backgroundColor&&(f.fillStyle=e.backgroundColor,f.fillRect(0,0,h,p));var _=n,g=s,m=r,b=l,v=0,y=0,D=h,C=p;return n<0&&(_=0,v=Math.abs(n)/r*h),m+_>t._originalImageWidth&&(m=t._originalImageWidth-_,D=m/r*h),s<0&&(g=0,y=Math.abs(s)/l*p),b+g>t._originalImageHeight&&(b=t._originalImageHeight-g,C=b/l*p),f.drawImage(this.elements.preview,_,g,m,b,v,y,D,C),u&&(f.fillStyle="#fff",f.globalCompositeOperation="destination-in",f.beginPath(),f.arc(c.width/2,c.height/2,c.width/2,0,2*Math.PI,!0),f.closePath(),f.fill()),c}function L(e){var t=e.points,i=document.createElement("div"),n=document.createElement("img"),s=t[2]-t[0],r=t[3]-t[1];return a(i,"croppie-result"),i.appendChild(n),o(n,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),n.src=e.url,o(i,{width:s+"px",height:r+"px"}),i}function O(e){return x.call(this,e).toDataURL(e.format,e.quality)}function $(e){var t=this;return new Promise(function(i){x.call(t,e).toBlob(function(e){i(e)},e.format,e.quality)})}function M(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){e.classList.add(t)}),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}function A(e,t){var i,n=this,s=[],o=null,a=_.call(n);if("string"==typeof e)i=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&n.data.url)return T.call(n),S.call(n),null;i=e.url,s=e.points||[],o="undefined"==typeof e.zoom?null:e.zoom}return n.data.bound=!1,n.data.url=i||n.data.url,n.data.boundZoom=o,u(i,a).then(function(i){if(M.call(n,i),s.length)n.options.relative&&(s=[s[0]*i.naturalWidth/100,s[1]*i.naturalHeight/100,s[2]*i.naturalWidth/100,s[3]*i.naturalHeight/100]);else{var o,a,r=c(i),l=n.elements.viewport.getBoundingClientRect(),d=l.width/l.height,u=r.width/r.height;u>d?(a=r.height,o=a*d):(o=r.width,a=r.height/d);var f=(r.width-o)/2,h=(r.height-a)/2,p=f+o,_=h+a;n.data.points=[f,h,p,_]}n.data.orientation=e.orientation||1,n.data.points=s.map(function(e){return parseFloat(e)}),n.options.useCanvas&&F.call(n,n.data.orientation),T.call(n),S.call(n),t&&t()})}function V(e,t){return parseFloat(e).toFixed(t||0)}function N(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),n=i.left-t.left,s=i.top-t.top,o=(i.width-e.elements.viewport.offsetWidth)/2,a=(i.height-e.elements.viewport.offsetHeight)/2,r=n+e.elements.viewport.offsetWidth+o,l=s+e.elements.viewport.offsetHeight+a,d=e._currentZoom;(d===Infinity||isNaN(d))&&(d=1);var u=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return n=Math.max(u,n/d),s=Math.max(u,s/d),r=Math.max(u,r/d),l=Math.max(u,l/d),{points:[V(n),V(s),V(r),V(l)],zoom:d,orientation:e.data.orientation}}function R(e){var t=this,s=N.call(t),o=i(n(te),n(e)),a="string"==typeof e?e:o.type||"base64",r=o.size||"viewport",l=o.format,d=o.quality,u=o.backgroundColor,c="boolean"==typeof o.circle?o.circle:"circle"===t.options.viewport.type,f=t.elements.viewport.getBoundingClientRect(),h=f.width/f.height;return"viewport"===r?(s.outputWidth=f.width,s.outputHeight=f.height):"object"==typeof r&&(r.width&&r.height?(s.outputWidth=r.width,s.outputHeight=r.height):r.width?(s.outputWidth=r.width,s.outputHeight=r.width/h):r.height&&(s.outputWidth=r.height*h,s.outputHeight=r.height)),ie.indexOf(l)>-1&&(s.format="image/"+l,s.quality=d),s.circle=c,s.url=t.data.url,s.backgroundColor=u,new Promise(function(e){switch(a.toLowerCase()){case"rawcanvas":e(x.call(t,s));break;case"canvas":case"base64":e(O.call(t,s));break;case"blob":$.call(t,s).then(e);break;default:e(L.call(t,s))}})}function B(){T.call(this)}function U(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var i=this,n=i.elements.canvas;if(i.data.orientation=t(i.data.orientation,e),h(n,i.elements.img,i.data.orientation),D.call(i,!0),E.call(i),Math.abs(e)/90%2==1){var s=i._originalImageHeight,o=i._originalImageWidth;i._originalImageWidth=s,i._originalImageHeight=o}}function H(){var e=this;e.element.removeChild(e.elements.boundary),r(e.element,"croppie-container"),e.options.enableZoom&&e.element.removeChild(e.elements.zoomerWrap),delete e.elements}function j(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=i(n(j.defaults),t),"img"===this.element.tagName.toLowerCase()){var s=this.element;a(s,"cr-original-image"),l(s,{"aria-hidden":"true",alt:""});var o=document.createElement("div");this.element.parentNode.appendChild(o),o.appendChild(s),this.element=o,this.options.url=this.options.url||s.src}if(p.call(this),this.options.url){var r={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,A.call(this,r)}}"function"!=typeof Promise&&function(e){function t(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(s,this),t(o,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void u(function(){var i=t._state?e.onFulfilled:e.onRejected;if(null===i)return void(t._state?e.resolve:e.reject)(t._value);var n;try{n=i(t._value)}catch(s){return void e.reject(s)}e.resolve(n)})}function s(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void l(t(i,e),t(s,this),t(o,this))}this._state=!0,this._value=e,a.call(this)}catch(n){o.call(this,n)}}function o(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function r(e,t,i,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n}function l(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(s){if(n)return;n=!0,i(s)}}var d=setTimeout,u="function"==typeof setImmediate&&setImmediate||function(e){d(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var s=this;return new i(function(i,o){n.call(s,new r(e,t,i,o))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new i(function(t,i){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var r=a.then;if("function"==typeof r)return void r.call(a,function(e){n(o,e)},i)}e[o]=a,0==--s&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var s=e.length,o=0;o<e.length;o++)n(o,e[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var n=0,s=e.length;s>n;n++)e[n].then(t,i)})},i._setImmediateFn=function(e){u=e},"undefined"!=typeof module&&module.exports?module.exports=i:e.Promise||(e.Promise=i)}(this),"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),"undefined"==typeof HTMLCanvasElement||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var n=atob(this.toDataURL(t,i).split(",")[1]),s=n.length,o=new Uint8Array(s),a=0;a<s;a++)o[a]=n.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}});var q,z,W,G=["Webkit","Moz","ms"],Y="undefined"!=typeof document?document.createElement("div").style:{},K=[1,8,3,6],X=[2,7,4,5];z=e("transform"),q=e("transformOrigin"),W=e("userSelect");var J={translate3d:{suffix:", 0px"},translate:{suffix:""}},Q=function(e,t,i){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(i)};Q.parse=function(e){return e.style?Q.parse(e.style[z]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?Q.fromMatrix(e):Q.fromString(e)},Q.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new Q(d(t[4]),d(t[5]),parseFloat(t[0]))},Q.fromString=function(e){var t=e.split(") "),i=t[0].substring(j.globals.translate.length+1).split(","),n=t.length>1?t[1].substring(6):1,s=i.length>1?i[0]:0,o=i.length>1?i[1]:0;return new Q(s,o,n)},Q.prototype.toString=function(){var e=J[j.globals.translate].suffix||"";return j.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var Z=function(e){if(!e||!e.style[q])return this.x=0,void(this.y=0);var t=e.style[q].split(" ");this.x=parseFloat(t[0]),this.y=parseFloat(t[1])};Z.prototype.toString=function(){return this.x+"px "+this.y+"px"};var ee=function(e,t,i){var n;return function(){var s=this,o=arguments,a=function(){n=null,i||e.apply(s,o)},r=i&&!n;clearTimeout(n),n=setTimeout(a,t),r&&e.apply(s,o)}}(w,500),te={type:"canvas",format:"png",quality:1},ie=["jpeg","webp","png"];if("undefined"!=typeof window&&window.jQuery){var ne=window.jQuery;ne.fn.croppie=function(e){if("string"==typeof e){var t=Array.prototype.slice.call(arguments,1),i=ne(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,t):"bind"===e?i.bind.apply(i,t):this.each(function(){var i=ne(this).data("croppie");if(i){var n=i[e];if(!ne.isFunction(n))throw"Croppie "+e+" method not found";n.apply(i,t),"destroy"===e&&ne(this).removeData("croppie")}})}return this.each(function(){var t=new j(this,e);t.$=ne,ne(this).data("croppie",t)})}}return j.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},j.globals={translate:"translate3d"},i(j.prototype,{bind:function(e,t){return A.call(this,e,t)},get:function(){var e=N.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return R.call(this,e)},refresh:function(){return B.call(this)},setZoom:function(e){m.call(this,e),s(this.elements.zoomer)},rotate:function(e){U.call(this,e)},destroy:function(){return H.call(this)}}),j}),function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(e),n=i.length,s=new ArrayBuffer(n),o=new Uint8Array(s),a=0;a<n;a++)o[a]=i.charCodeAt(a);return s}function i(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},i.send()}function s(e,n){function s(t){var i=o(t);e.exifdata=i||{};var s=a(t);if(e.iptcdata=s||{},v.isXmpEnabled){var r=p(t);e.xmpdata=r||{}}n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var r=t(e.src);s(r)}else if(/^blob\:/i.test(e.src)){var l=new FileReader;l.onload=function(e){s(e.target.result)},i(e.src,function(e){l.readAsArrayBuffer(e)})}else{var d=new XMLHttpRequest;d.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";s(d.response),d=null},d.open("GET",e.src,!0),d.responseType="arraybuffer",d.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var l=new FileReader;l.onload=function(e){m&&console.log("Got file of length "+e.target.result.byteLength),s(e.target.result)},l.readAsArrayBuffer(e)}}function o(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i,n=2,s=e.byteLength;n<s;){if(255!=t.getUint8(n))return m&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(i=t.getUint8(n+1),m&&console.log(i),225==i)return m&&console.log("Found 0xFFE1 marker"),h(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}function a(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i=2,n=e.byteLength;i<n;){if(function(e,t){
return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,i)){var s=t.getUint8(i+7);s%2!=0&&(s+=1),0===s&&(s=4);return r(e,i+8+s,t.getUint16(i+6+s))}i++}}function r(e,t,i){for(var n,s,o,a,r=new DataView(e),l={},d=t;d<t+i;)28===r.getUint8(d)&&2===r.getUint8(d+1)&&(a=r.getUint8(d+2))in k&&(o=r.getInt16(d+3),o+5,s=k[a],n=f(r,d+5,o),l.hasOwnProperty(s)?l[s]instanceof Array?l[s].push(n):l[s]=[l[s],n]:l[s]=n),d++;return l}function l(e,t,i,n,s){var o,a,r,l=e.getUint16(i,!s),u={};for(r=0;r<l;r++)o=i+12*r+2,a=n[e.getUint16(o,!s)],!a&&m&&console.log("Unknown tag: "+e.getUint16(o,!s)),u[a]=d(e,o,t,i,s);return u}function d(e,t,i,n,s){var o,a,r,l,d,u,c=e.getUint16(t+2,!s),h=e.getUint32(t+4,!s),p=e.getUint32(t+8,!s)+i;switch(c){case 1:case 7:if(1==h)return e.getUint8(t+8,!s);for(o=h>4?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint8(o+l);return a;case 2:return o=h>4?p:t+8,f(e,o,h-1);case 3:if(1==h)return e.getUint16(t+8,!s);for(o=h>2?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint16(o+2*l,!s);return a;case 4:if(1==h)return e.getUint32(t+8,!s);for(a=[],l=0;l<h;l++)a[l]=e.getUint32(p+4*l,!s);return a;case 5:if(1==h)return d=e.getUint32(p,!s),u=e.getUint32(p+4,!s),r=new Number(d/u),r.numerator=d,r.denominator=u,r;for(a=[],l=0;l<h;l++)d=e.getUint32(p+8*l,!s),u=e.getUint32(p+4+8*l,!s),a[l]=new Number(d/u),a[l].numerator=d,a[l].denominator=u;return a;case 9:if(1==h)return e.getInt32(t+8,!s);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+4*l,!s);return a;case 10:if(1==h)return e.getInt32(p,!s)/e.getInt32(p+4,!s);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+8*l,!s)/e.getInt32(p+4+8*l,!s);return a}}function u(e,t,i){var n=e.getUint16(t,!i);return e.getUint32(t+2+12*n,!i)}function c(e,t,i,n){var s=u(e,t+i,n);if(!s)return{};if(s>e.byteLength)return{};var o=l(e,t,t+s,w,n);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,r=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,a,r)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function f(e,t,i){var s="";for(n=t;n<t+i;n++)s+=String.fromCharCode(e.getUint8(n));return s}function h(e,t){if("Exif"!=f(e,t,4))return m&&console.log("Not valid EXIF data! "+f(e,t,4)),!1;var i,n,s,o,a,r=t+6;if(18761==e.getUint16(r))i=!1;else{if(19789!=e.getUint16(r))return m&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;i=!0}if(42!=e.getUint16(r+2,!i))return m&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var d=e.getUint32(r+4,!i);if(d<8)return m&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!i)),!1;if(n=l(e,r,r+d,D,i),n.ExifIFDPointer){o=l(e,r,r+n.ExifIFDPointer,y,i);for(s in o){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[s]=S[s][o[s]];break;case"ExifVersion":case"FlashpixVersion":o[s]=String.fromCharCode(o[s][0],o[s][1],o[s][2],o[s][3]);break;case"ComponentsConfiguration":o[s]=S.Components[o[s][0]]+S.Components[o[s][1]]+S.Components[o[s][2]]+S.Components[o[s][3]]}n[s]=o[s]}}if(n.GPSInfoIFDPointer){a=l(e,r,r+n.GPSInfoIFDPointer,C,i);for(s in a){switch(s){case"GPSVersionID":a[s]=a[s][0]+"."+a[s][1]+"."+a[s][2]+"."+a[s][3]}n[s]=a[s]}}return n.thumbnail=c(e,r,d,i),n}function p(e){if("DOMParser"in self){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i=2,n=e.byteLength,s=new DOMParser;i<n-4;){if("http"==f(t,i,4)){var o=i-1,a=t.getUint16(i-2)-1,r=f(t,o,a),l=r.indexOf("xmpmeta>")+8;r=r.substring(r.indexOf("<x:xmpmeta"),l);var d=r.indexOf("x:xmpmeta")+10;r=r.slice(0,d)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+r.slice(d);return g(s.parseFromString(r,"text/xml"))}i++}}}function _(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var i=0;i<e.attributes.length;i++){var n=e.attributes.item(i);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var s=0;s<e.childNodes.length;s++){var o=e.childNodes.item(s),a=o.nodeName;if(null==t[a])t[a]=_(o);else{if(null==t[a].push){var r=t[a];t[a]=[],t[a].push(r)}t[a].push(_(o))}}return t}function g(e){try{var t={};if(e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children.item(i),s=n.attributes;for(var o in s){var a=s[o],r=a.nodeName,l=a.nodeValue;r!==undefined&&(t[r]=l)}var d=n.nodeName;if("undefined"==typeof t[d])t[d]=_(n);else{if("undefined"==typeof t[d].push){var u=t[d];t[d]=[],t[d].push(u)}t[d].push(_(n))}}else t=e.textContent;return t}catch(c){console.log(c.message)}}var m=!1,b=this,v=function(e){return e instanceof v?e:this instanceof v?void(this.EXIFwrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports.EXIF=v):b.EXIF=v;var y=v.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},D=v.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},C=v.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},w=v.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},S=v.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},k={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};v.enableXmp=function(){v.isXmpEnabled=!0},v.disableXmp=function(){v.isXmpEnabled=!1},v.getData=function(t,i){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(e(t)?i&&i.call(t):s(t,i),!0)},v.getTag=function(t,i){if(e(t))return t.exifdata[i]},v.getIptcTag=function(t,i){if(e(t))return t.iptcdata[i]},v.getAllTags=function(t){if(!e(t))return{};var i,n=t.exifdata,s={};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s},v.getAllIptcTags=function(t){if(!e(t))return{};var i,n=t.iptcdata,s={};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s},v.pretty=function(t){if(!e(t))return"";var i,n=t.exifdata,s="";for(i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?n[i]instanceof Number?s+=i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":s+=i+" : ["+n[i].length+" values]\r\n":s+=i+" : "+n[i]+"\r\n");return s},v.readFromBinaryFile=function(e){return o(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return v})}.call(this),define("libs/exif",function(){}),define("skins/form/validator/crop_image",["static/utils","./input_base","lib/helpers/overlay/contextual_popup","lib/i18n!front","libs/croppie","jquery-scrollLock","libs/exif"],function(e,t,i,n){var s=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return s.prototype=new t,s.prototype._init=function(){var e=this;if(this.label=$("#"+this.id+"-label"),0===this.label.length)return void console.error("Unable to find the label");if(this.displayError=$("#"+this.id+"-display-error"),0===this.displayError.length)return void console.error("Unable to find display error crop validator");if(this.displayCrop=$("#"+this.id+"-display"),0===this.displayCrop.length)return void console.error("Unable to find display crop validator");if(this.sourceCrop=$("#"+this.id+"-source"),0===this.sourceCrop.length)return void console.error("Unable to find source crop validator");if(this.actionsCrop=$("#"+this.id+"-actions"),0===this.sourceCrop.length)return void console.error("Unable to find actions crop validator");this.input_agent=this.getInputAgent(),this.adBlockEnabled=!1;var t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",document.body.appendChild(t),window.setTimeout(function(){0===t.offsetHeight&&(e.adBlockEnabled=!0,$("#message_adblock").removeClass("hidden")),t.remove()},100),this.is_ios=/iPod/.test(navigator.userAgent)&&!window.MSStream,this.uploadCrop=!1,this.lastParentWidth=0,this.lastCropWidth=0,this.width=this.options.width,this.height=this.options.height,this.fit_container=this.options.fit_container,this.$container=this.options.$container,this.imageUploaded=!1,this.resizeTimer=!1,this.crop_to_window_size(),this.sourceCrop.on("change",function(){e.hide_crop(),e.imageUploaded=!1,e.validate()}).prop("disabled",!1),$("."+this.id+"-rotate").on("click",function(){return e.rotate_image(this.dataset.action),!1}),$(window).on("resize",function(){e.on_resize()}),this.options.no_init_validate||this.validate()},s.prototype.showIcon=function(e,t){this.icon?this.icon.removeClass():this.icon=this.displayError.find(".icon-error-content"),this.displayError.removeClass("hidden"),this.icon.addClass("icon-f icf-"+e+" text-"+t);var i=this;i.showError(),i.showWarning(),this.icon.on("mouseover",function(){i.showError(),i.showWarning()})},s.prototype.hideIcon=function(){this.icon&&this.displayError.addClass("hidden")},s.prototype.getInputAgent=function(){return this.label},s.prototype.doValidate=function(){if(this.is_ios)return i.alert(n.__("misc.device_not_compatible"),null,!0),!1;if(this.adBlockEnabled)return i.alert(n.__("misc.please_disabled_adblock"),null,!0),!1;if(0===this.sourceCrop[0].files.length)return!this.options.required||(this.setError(this.getMessage("required","Required")),!1);var t=this.sourceCrop[0].files[0].name;if(!t)return!this.options.required||(this.setError(this.getMessage("required","Required")),!1);if("object"==typeof this.options.extensions&&this.options.extensions.length>0){var s="",o=t.lastIndexOf(".");if(-1===o)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1;if(s=t.substring(o+1).toLowerCase(),!/^[a-z0-1]{2,20}$/.test(s))return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1;var a=!1;for(var r in this.options.extensions)if(this.options.extensions.hasOwnProperty(r)&&this.options.extensions[r].toLowerCase()===s){a=!0;break}if(!a)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1}return!!this.imageUploaded||(this.read_file(),this.getOrientation(),!1)},s.prototype.getOrientation=function(e){var t=this,i={1:0,6:90,3:180,8:-90,2:0,5:90,4:180,7:-90};(new FileReader).onload=function(e){var n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return!1;for(var s=n.byteLength,o=2;o<s;){if(n.getUint16(o+2,!1)<=8)return callback(-1);var a=n.getUint16(o,!1);if(o+=2,65505==a){if(1165519206!=n.getUint32(o+=2,!1))return!1;var r=18761==n.getUint16(o+=6,!1);o+=n.getUint32(o+4,r);var l=n.getUint16(o,r);o+=2;for(var d,u=0;u<l;u++)if(274==n.getUint16(o+12*u,r)){d=n.getUint16(o+12*u+8,r);break}d&&(t.rotate_image(i[d]),[2,5,4,7].indexOf(d)&&t.flip_image("NORMAL"))}else{if(65280!=(65280&a))break;o+=n.getUint16(o,!1)}}return!1}},s.prototype.read_file=function(){var e=this,t=new FileReader;t.onload=function(i){var n=new Image;n.onload=function(){e.imageUploaded=i.target.result,e.update_crop_image(),e.validate()},n.src=t.result},t.readAsDataURL(this.sourceCrop[0].files[0])},s.prototype.set_image_url=function(e){this.imageUploaded=e,this.update_crop_image()},s.prototype.show_crop=function(){this.displayCrop.removeClass("hidden"),this.actionsCrop.removeClass("hidden")},s.prototype.hide_crop=function(){this.displayCrop.addClass("hidden"),this.actionsCrop.addClass("hidden")},s.prototype.get_container_width=function(){if(!this.$container)return this.sourceCrop.parents("form").innerWidth();var e=window.getComputedStyle(this.$container[0],null);return this.$container[0].clientWidth-(parseFloat(e.paddingLeft)+parseFloat(e.paddingRight))},s.prototype.crop_to_window_size=function(){var e,t,i=this,n=i.get_container_width();if(i.lastParentWidth===n)return!1;if(i.lastParentWidth=n,e=i.width,t=i.height,(i.fit_container||n<300)&&(e=n,t=100*i.height/(100*i.width/n)),i.lastCropWidth===e)return!1;try{i.hide_crop(),i.displayCrop.croppie("destroy"),i.uploadCrop=i.displayCrop.croppie({viewport:{width:e,height:t,type:"square"},enableExif:!0,enableOrientation:!0,boundary:{width:e,height:t},update:function(){i.set_crop_value()}}),i.lastCropWidth=e}catch(s){return console.info(s),!1}return i.displayCrop.children(".cr-boundary .cr-overlay").scrollLock(),!0},s.prototype.update_crop_image=function(){var e=this;this.show_crop(),this.displayCrop.css({visibility:"hidden !important"}),this.uploadCrop.croppie("bind",{url:this.imageUploaded}).then(function(){e.uploadCrop.croppie("setZoom",0),e.displayCrop.css({visibility:"visible"}),e.set_crop_value()})},s.prototype.on_resize=function(){var e=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.crop_to_window_size()&&e.imageUploaded&&e.update_crop_image()},10)},s.prototype.set_crop_value=function(){var e=this;this.uploadCrop.croppie("result",{type:"canvas",size:"original"}).then(function(t){e.input.val(t),e.validate()})},s.prototype.getIconPositionReference=function(){return this.sourceCrop},s.prototype.rotate_image=function(e){this.uploadCrop.croppie("rotate",parseInt(e))},s.prototype.flip_image=function(e){var t=this;t.uploadCrop.croppie("bind",{url:t.imageUploaded,orientation:e})},s}),define("text!skins/common/video/user_metadata_suggest/templates/model_info_form.mustache",[],function(){return'<div class="container-model-info-form">\n    <div class="overlay smooth-hidden"></div>\n\n\t<div class="small-padding pull-left">\n\t\t<button type="button" class="btn btn-xs btn-default cancel-model-info-form">\n\t\t\t<span class="icon-f icf-arrow-left"></span> {{{back_to_list}}}\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n\n\t<h2>{{{ sTitle }}}</h2>\n\n    <form action="#" method="post" class="model-info-form">\n        <div class="row">\n\t        {{#name.bShown}}\n\t\t        <div class="col-sm-6 col-xs-12 model-info-input-block" data-name="name">\n\t\t\t        <label>{{{ name.sDisplay }}}</label>\n\t\t\t        <span class="input-group-btn{{#name.bIsError}} is-error{{/name.bIsError}}">\n\t                    <input type="text" name="name" class="form-control" autocomplete="off"{{#name.bEditable}} placeholder="{{{name.sDisplay}}}"{{/name.bEditable}}{{^name.bEditable}} disabled="disabled"{{/name.bEditable}}/>\n\t                </span>\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t{{#name.aRejectReasons}}\n\t\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t\t{{/name.aRejectReasons}}\n\t\t\t\t\t</ul>\n\t\t        </div>\n\t        {{/name.bShown}}\n\t        {{#real_name.bShown}}\n\t\t        <div class="col-sm-6 col-xs-12 model-info-input-block" data-name="real_name">\n\t\t\t        <label>{{{ real_name.sDisplay }}}</label>\n\t\t\t        <span class="input-group-btn{{#real_name.bHasExemptionToggle}} with-exemption-toggle{{/real_name.bHasExemptionToggle}}{{#real_name.bIsError}} is-error{{/real_name.bIsError}}">\n\t\t\t\t        {{#real_name.bHasExemptionToggle}}\n\t\t\t\t\t        <button type="button" class="model-info-exemption-toggle" data-field="real_name">\n\t\t\t\t\t\t        <span class="icon-f icf-info-slash-circle-o"></span>\n\t\t\t\t\t        </button>\n\t\t\t\t        {{/real_name.bHasExemptionToggle}}\n\t\t\t\t\t\t{{#real_name.bHiddenUnchanged}}\n\t\t\t\t\t\t\t<span class="model-info-hidden-unchanged">\n\t\t\t\t\t\t\t\t<span class="icon-f icf-info-circle"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{/real_name.bHiddenUnchanged}}\n\t                    <input type="text" name="real_name" class="form-control" autocomplete="off"{{#real_name.bEditable}} placeholder="{{{real_name.sDisplay}}}"{{/real_name.bEditable}}{{^real_name.bEditable}} disabled="disabled"{{/real_name.bEditable}}/>\n\t                </span>\n\t\t\t        {{#sRealNameLegend}}<p class="legend">({{{ sRealNameLegend }}})</p>{{/sRealNameLegend}}\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t{{#real_name.aRejectReasons}}\n\t\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t\t{{/real_name.aRejectReasons}}\n\t\t\t\t\t</ul>\n\t\t        </div>\n\t        {{/real_name.bShown}}\n\t        {{#sex.bShown}}\n\t\t        <div class="col-sm-6 col-xs-12 model-info-input-block" data-name="sex">\n\t\t\t        <label>{{{ sex.sDisplay }}}</label>\n\t\t\t        <span class="input-group-btn{{#sex.bHasExemptionToggle}} with-exemption-toggle{{/sex.bHasExemptionToggle}}{{#sex.bIsError}} is-error{{/sex.bIsError}}">\n\t\t\t\t        {{#sex.bHasExemptionToggle}}\n\t\t\t\t\t        <button type="button" class="model-info-exemption-toggle" data-field="sex">\n\t\t\t\t\t\t        <span class="icon-f icf-info-slash-circle-o"></span>\n\t\t\t\t\t        </button>\n\t\t\t\t        {{/sex.bHasExemptionToggle}}\n\t                    <select name="sex" class="form-control" autocomplete="off"{{^sex.bEditable}} disabled="disabled"{{/sex.bEditable}}>\n\t\t                    {{#sex.bEditable}}\n\t\t\t                    {{#aSexList}}<option value="{{{ sValue }}}"{{#bSelected}} selected="selected"{{/bSelected}}>{{{ sDisplay }}}</option>{{/aSexList}}\n\t\t                    {{/sex.bEditable}}\n\t\t                    {{^sex.bEditable}}\n\t\t\t                    {{#aSexList}}{{#bSelected}}<option value="{{{ sValue }}}" selected="selected">{{{ sDisplay }}}</option>{{/bSelected}}{{/aSexList}}\n\t\t                    {{/sex.bEditable}}\n\t\t\t\t        </select>\n\t                </span>\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t{{#sex.aRejectReasons}}\n\t\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t\t{{/sex.aRejectReasons}}\n\t\t\t\t\t</ul>\n\t\t        </div>\n\t        {{/sex.bShown}}\n\t\t\t{{#birth_date.bShown}}\n\t            <div class="col-sm-6 col-xs-12 model-info-input-block" data-name="birth_date">\n\t                <label>{{{ birth_date.sDisplay }}}</label>\n\t                <span class="input-group-btn{{#birth_date.bHasExemptionToggle}} with-exemption-toggle{{/birth_date.bHasExemptionToggle}}{{#birth_date.bIsError}} is-error{{/birth_date.bIsError}}">\n\t\t\t\t        {{#birth_date.bHasExemptionToggle}}\n\t\t\t\t\t        <button type="button" class="model-info-exemption-toggle" data-field="birth_date">\n\t\t\t\t\t\t        <span class="icon-f icf-info-slash-circle-o"></span>\n\t\t\t\t\t        </button>\n\t\t\t\t        {{/birth_date.bHasExemptionToggle}}\n\t                    <input type="date" name="birth_date" class="form-control" max="{{sBirthDateMax}}" {{#birth_date.bEditable}} placeholder="{{{sBirthDatePlaceHolder}}}"{{/birth_date.bEditable}}{{^birth_date.bEditable}} disabled="disabled"{{/birth_date.bEditable}}"/>\n\t                </span>\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t{{#birth_date.aRejectReasons}}\n\t\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t\t{{/birth_date.aRejectReasons}}\n\t\t\t\t\t</ul>\n\t            </div>\n\t\t\t{{/birth_date.bShown}}\n\t\t\t{{#country.bShown}}\n\t\t        <div class="col-sm-6 col-xs-12 model-info-input-block" data-name="country">\n\t\t\t        <label>{{{ country.sDisplay }}}</label>\n\t\t\t        <span class="input-group-btn{{#country.bHasExemptionToggle}} with-exemption-toggle{{/country.bHasExemptionToggle}}{{#country.bIsError}} is-error{{/country.bIsError}}">\n\t\t\t\t        {{#country.bHasExemptionToggle}}\n\t\t\t\t\t        <button type="button" class="model-info-exemption-toggle" data-field="country">\n\t\t\t\t\t\t        <span class="icon-f icf-info-slash-circle-o"></span>\n\t\t\t\t\t        </button>\n\t\t\t\t        {{/country.bHasExemptionToggle}}\n\t\t\t\t        <select name="country" class="form-control" autocomplete="off"{{^country.bEditable}} disabled="disabled"{{/country.bEditable}}>\n\t\t                    {{#country.bEditable}}\n\t\t\t                    {{#aCountries}}<option value="{{{ sValue }}}"{{#bSelected}} selected="selected"{{/bSelected}}>{{{ sDisplay }}}</option>{{/aCountries}}\n\t\t                    {{/country.bEditable}}\n\t\t\t\t\t        {{^country.bEditable}}\n\t\t\t\t\t\t        {{#aCountries}}{{#bSelected}}<option value="{{{ sValue }}}" selected="selected">{{{ sDisplay }}}</option>{{/bSelected}}{{/aCountries}}\n\t\t\t\t\t        {{/country.bEditable}}\n\t\t\t\t        </select>\n\t                </span>\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t{{#country.aRejectReasons}}\n\t\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t\t{{/country.aRejectReasons}}\n\t\t\t\t\t</ul>\n\t\t        </div>\n\t\t\t{{/country.bShown}}\n\t\t\t{{#bExemptionShown}}\n\t\t\t<div class="col-sm-6 col-xs-12 model-info-input-block" data-name="exemption">\n\t\t\t\t<label>{{{ sExemption }}}</label>\n\t\t\t\t<span class="input-group-btn{{#bExemptionError}} is-error{{/bExemptionError}}">\n\t\t\t\t\t<select name="exemption" class="form-control" autocomplete="off"{{^bIsExemptionEditable}} disabled="disabled"{{/bIsExemptionEditable}}>\n\t\t\t\t\t\t{{#bExemptionError}}<option hidden selected disabled value="ERROR">{{{sExemptionLabel}}}</option>{{/bExemptionError}}\n\t\t\t\t\t\t{{#aExemptions}}<option value="{{{ sValue }}}"{{#bSelected}} selected="selected"{{/bSelected}}>{{{ sDisplay }}}</option>{{/aExemptions}}\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t\t{{#bExemptionError}}\n\t\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t\t\t<li>{{{sExemptionError}}}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t{{/bExemptionError}}\n\t\t\t</div>\n\t\t\t{{/bExemptionShown}}\n        </div>\n\t\t{{#who_are_they.bShown}}\n\t        <div class="model-info-input-block" data-name="who_are_they">\n\t\t        <label>{{{ who_are_they.sDisplay }}}</label>\n\t\t        <span class="input-group-btn{{#who_are_they.bHasExemptionToggle}} with-exemption-toggle{{/who_are_they.bHasExemptionToggle}}{{#who_are_they.bIsError}} is-error{{/who_are_they.bIsError}}">\n\t\t\t        {{#who_are_they.bHasExemptionToggle}}\n\t\t\t\t        <button type="button" class="model-info-exemption-toggle" data-field="who_are_they">\n\t\t\t\t\t        <span class="icon-f icf-info-slash-circle-o"></span>\n\t\t\t\t        </button>\n\t\t\t        {{/who_are_they.bHasExemptionToggle}}\n\t\t            <textarea name="who_are_they" class="form-control" {{^who_are_they.bEditable}} disabled="disabled"{{/who_are_they.bEditable}}></textarea>\n\t\t        </span>\n\t\t\t\t{{#sWhoAreTheyLegend}}<p class="legend">({{{ sWhoAreTheyLegend }}})</p>{{/sWhoAreTheyLegend}}\n\t\t\t\t<ul class="reject-reasons">\n\t\t\t\t{{#who_are_they.aRejectReasons}}\n\t\t\t\t\t<li>{{{.}}}</li>\n\t\t\t\t{{/who_are_they.aRejectReasons}}\n\t\t\t\t</ul>\n\t        </div>\n\t\t{{/who_are_they.bShown}}\n\n\n\t    {{#bFilesShowBlock}}\n\t\t    <div class="row">\n\t\t\t    <div class="col-xs-12 model-info-files has-{{iFileBlocksCount}}-blocks">\n\t\t\t\t    {{{ sFilesHtml }}}\n\t\t\t    </div>\n\t\t    </div>\n\t    {{/bFilesShowBlock}}\n\n\t    <div class="pull-right">\n\t\t    <div class="model-info-form-error"></div>\n\t    </div>\n\t    <div class="clearfix"></div>\n\t    <div class="pull-right">\n\t\t    <button type="button" class="cancel-model-info-form btn btn-default">{{{ sCancel }}}</button>\n\t\t    <button type="submit" class="submit-model-info-form btn btn-primary">{{{ sSubmit }}}</button>\n\t    </div>\n    </form>\n    <div class="clearfix"></div>\n</div>\n'}),define("text!skins/common/video/user_metadata_suggest/templates/model_info_form_file_block.mustache",[],function(){
return'{{#oFile}}\n\t<div class="model-info-file-block{{#bCanUseFileDrop}} file-drop{{/bCanUseFileDrop}}{{#bHasFileErrors}} has-file-error{{/bHasFileErrors}}"{{#bCanUpload}} data-name="{{sInputName}}"{{/bCanUpload}}>\n\t    <h4{{#bHasExemptionToggle}} class="with-exemption-toggle"{{/bHasExemptionToggle}}>{{#bHasExemptionToggle}}\n\t\t\t    <button type="button" class="model-info-exemption-toggle" data-field="{{sInputName}}">\n\t\t\t\t    <span class="icon-f icf-file-slash-o"></span>\n\t\t\t    </button>\n\t\t    {{/bHasExemptionToggle}}{{{sDisplay}}}</h4>\n\n\t\t<ul class="reject-reasons">\n\t\t{{#aRejectReasons}}\n\t\t\t<li>{{{.}}}</li>\n\t\t{{/aRejectReasons}}\n\t\t</ul>\n\n\t    <div{{#sBlockPicto}} class="model-info-file-block-with-bg"{{/sBlockPicto}}>\n\t\t    {{#sBlockPicto}}<span class="model-info-file-block-bg icon-f icf-{{sBlockPicto}}"></span>{{/sBlockPicto}}\n\n\t\t    <p class="legend">{{{ sLegend }}}</p>\n\n\t\t    <p class="model-info-file">\n\t\t\t    {{#bRequired}}{{{sFile}}} :{{/bRequired}}\n\t\t\t    {{^bRequired}}{{#bHasFile}}{{{sFile}}} :{{/bHasFile}}{{/bRequired}}\n\n\t\t\t    {{#bHasFileLink}}<a href="{{{sFileUri}}}" target="_blank" class="alert-{{sFileColor}}">{{/bHasFileLink}}\n\t\t\t\t{{^bHasFileLink}}<span class="alert-{{sFileColor}}">{{/bHasFileLink}}\n\t\t\t\t\t{{#sFilePicto}}<span class="icon-f icf-{{sFilePicto}}" title="{{{sFilePictoTitle}}}"></span>{{/sFilePicto}}\n\t\t\t\t\t{{#bHasFileLink}}\n\t\t\t\t\t\t<span class="txt">{{{ sDisplay }}}</span><span class="icon-f icf-download"></span>{{/bHasFileLink}}\n\t\t\t\t\t{{^bHasFileLink}}\n\t\t\t\t\t\t{{#bHasFile}}\n\t\t\t\t\t\t\t{{{ sDisplay }}}\n\t\t\t\t\t\t{{/bHasFile}}\n\t\t\t\t\t\t{{^bHasFile}}\n\t\t\t\t\t\t\t{{#bRequired}}<span class="txt file-required">{{{sFileRequired}}}</span>{{/bRequired}}\n\t\t\t\t\t\t{{/bHasFile}}\n\t\t\t\t\t{{/bHasFileLink}}\n\t\t\t\t{{^bHasFileLink}}</span>{{/bHasFileLink}}\n\t\t\t    {{#bHasFileLink}}</a>{{/bHasFileLink}}\n\t\t    </p>\n\t    </div>\n\n\t    {{#bCanUpload}}\n\t\t\t{{#bHasFile}}\n\t\t\t\t{{^bRequired}}\n\t\t\t\t\t<button type="button" class="btn btn-default show-model-info-file-upload" data-name="{{sInputName}}">\n\t\t\t\t\t\t<span class="icon-f icf-refresh"></span> {{{ sChangeFile }}}\n\t\t\t\t\t</button>\n\t\t\t\t{{/bRequired}}\n\t\t\t{{/bHasFile}}\n\n\t\t\t<div class="model-info-file-upload">\n\t\t\t\t<span class="input-group-btn{{#bHasExemptionToggle}} with-exemption-toggle{{/bHasExemptionToggle}}">\n\t\t\t\t\t{{#bHasExemptionToggle}}\n\t\t\t\t\t\t<button type="button" class="model-info-exemption-toggle" data-field="{{sInputName}}">\n\t\t\t\t\t\t\t<span class="icon-f icf-file-slash-o"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{{/bHasExemptionToggle}}\n\t\t\t\t\t{{#bCropWidget}}\n\t\t\t\t\t\t<div class="crop-widget-container">\n\t\t\t\t\t\t\t{{{sCropWidgetHtml}}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/bCropWidget}}\n\t\t\t\t\t{{^bCropWidget}}\n\t\t\t\t\t\t<input type="file" name="{{sInputName}}" class="form-control"/>\n\t\t\t\t\t{{/bCropWidget}}\n\t\t\t\t</span>\n\t\t\t\t{{#bCanUseFileDrop}}<span class="file-drop-here"><span class="icon-f icf-upload"></span> {{{ sDropHere }}}</span>{{/bCanUseFileDrop}}\n\t\t\t\t{{^bRequired}}\n\t\t\t\t\t<button class="btn btn-default file-block-empty" type="button"><span class="icon-f icf-trash"></span> {{{ sEmptyField }}}</button>\n\t\t\t\t{{/bRequired}}\n\n\t\t\t\t<span class="file-block-overlay uploading-overlay"><span>{{{ sIsUploading }}}</span></span>\n\t\t\t</div>\n\t\t\t{{#bCanUseFileDrop}}<span class="file-block-overlay file-drop-overlay"><span><span class="icon-f icf-upload"></span> {{{ sDropHere }}}</span></span>{{/bCanUseFileDrop}}\n\t\t{{/bCanUpload}}\n\t</div>\n{{/oFile}}\n'}),define("text!skins/common/video/user_metadata_suggest/templates/model_info_form_exemption_pop.mustache",[],function(){return'<div>\n\t<h3>{{{sTitle}}} :</h3>\n\n\t<ul>\n\t\t{{#aOptions}}\n\t\t\t{{^bIsSelected}}\n\t\t\t\t<li class="model-exemption-choice">\n\t\t\t\t\t<button type="button" data-name="{{sName}}">{{{sDisplay}}}</button>\n\t\t\t\t</li>\n\t\t\t{{/bIsSelected}}\n\t\t{{/aOptions}}\n\t\t{{#bShowAlternativeVerification}}\n\t\t\t<div class="alternative-verification">\n\t\t\t\t<div class="alternative-header">{{{sAlternative}}}</div>\n\t\t\t\t<a class="alternative-link" href="/account/verify-profile" target="_blank">{{{sAlternativeLink}}} <span class="icon-f icf-external-link"></span></div>\n\t\t\t</div>\n\t\t{{/bShowAlternativeVerification}}\n\t</ul>\n</div>\n'}),define("text!skins/common/video/user_metadata_suggest/templates/or_chose_from_video.mustache",[],function(){return'<div class="pic-choose-thumb">\n\t<label class="btn btn-lg btn-danger"><span>{{{sChoseFromVideo}}}</span></label>\n</div>'}),define("text!skins/common/video/user_metadata_suggest/templates/chose_thumb.mustache",[],function(){return'<div class="model-info-thumb-select_profile_pic-overlay">\n\t<div class="container">\n\t\t<div class="close"><span class="icon-f icf-close-thin"></span></div>\n\t\t<h4>{{{sPickFromVideo}}}</h4>\n\t\t<div class="pictures"></div>\n\t</div>\n</div>'}),define("text!skins/common/video/user_metadata_suggest/templates/thumb_selection.mustache",[],function(){return'<div class="thumb-selection">\n\t<img loading="lazy" src="{{ sThumbUrl }}">\n</div>'}),define("skins/common/video/user_metadata_suggest/model_info_form",["static/log","config/main","static/utils","mustache","lib/i18n!front","lib/helpers/popup","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","lib/helpers/scrollbar","skins/form/validator/crop_image","./model","./model_field","./model_suggest","text!./templates/model_info_form.mustache","text!./templates/model_info_form_file_block.mustache","text!./templates/model_info_form_exemption_pop.mustache","text!./templates/or_chose_from_video.mustache","text!./templates/chose_thumb.mustache","text!./templates/thumb_selection.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v){var y=".model-info-file-block",D=new Date;D.setFullYear(D.getFullYear()-18),D.setHours(0,0,0,0);var C={name:{bRequired:!0,oRules:{string_min_length:1},sDisplay:s.__("profile.stage_name"),sValueSetFunc:"setName",bEscapeOnCreate:!0},real_name:{bRequired:!0,oRules:{string_min_length:1},sDisplay:s.__("profile.real_name"),sValueSetFunc:"setRealName"},sex:{bRequired:!0,oRules:{options:t.dyn.modelSuggest.sexList},sDisplay:s.__("profile.gender"),sValueSetFunc:"setSex"},country:{bRequired:!0,oRules:{options:t.dyn.modelSuggest.countries,input_not:{exemption:c.EXEMPTIONS.NONE}},sDisplay:s.__("country"),sValueSetFunc:"setCountry"},birth_date:{bRequired:!0,oRules:{date_max:D,input_not:{exemption:c.EXEMPTIONS.NONE}},sDisplay:s.__("profile.birthdate"),sValueSetFunc:"setBirthDate"},exemption:{oRules:{options:{}},sDisplay:s.__("video.user_suggest.exemption"),sValueSetFunc:"setExemption"},who_are_they:{bRequired:!0,oRules:{string_min_length:10},sDisplay:s.__("video.user_suggest.how_know_is_model"),sValueSetFunc:"setWhoAreThey"},files:[]},w=C,S={alternative:s.__("video.user_suggest.alternative"),alternative_link:s.__("video.user_suggest.alternative_link")};C.exemption.oRules.options=Object.entries(t.dyn.modelSuggest.exemptionsList).reduce(function(e,t){var i=t[0],n=t[1];return e[i]={label:n,hide:i===c.EXEMPTIONS.NONE?["exemption"]:[],optional:[]},e},{}),w.exemption=C.exemption;var k=function(){e.debug("__constructor"),this.fnOnSavedModel=null,this.oOverlay=null,this.$overlayContent=null,this.$errorContainer=null,this.$form=null,this.$inputs=null,this.iUploadingCount=0,this.iUploadAwaitCount=0,this.initUploadErrorsReceived(),this.bSubmitLock=!1,this.bShouldValidateFormOnInputChange=!1,this.bCanUseFileDrop=!0,this.oInputsInfo=null,this.oVisibilityToggledInputsValues={},this.oExemptionToggles={},this.iLastWindowScrollPos=0,this.bIsCreateForm=!1,this.oModel=new h,this.initVideoSuggestFileUpload()};return k.prototype={setOnSavedCallback:function(e){this.fnOnSavedModel=e},getModel:function(){return e.debug("getModel",this.oModel),this.oModel},setModel:function(t){if(!c.IS_MODEL_OBJECT(t))return!1;e.debug("setModel",t),this.oModel=t},open:function(){if(e.debug("open"),null===this.oOverlay){this.oOverlay=new a.get("body",!1,"close"),this.oOverlay.addClass("auto-width-popup x-overlay-body-bg models-suggestion-model-create-pop models-suggestion-model-pop");var t=this;this.oOverlay.onShow=function(){t.initCropper(),t.bHadNoScrollClassOnOpen=$("body").hasClass("no-scroll"),t.bHadNoScrollClassOnOpen||$("body").addClass("no-scroll")},this.oOverlay.onClose=function(){$("body").hasClass("no-scroll")&&!$(".models-suggestion-model-pop").length&&$("body").removeClass("no-scroll")},this.initPopContent()}this.oOverlay.show()},close:function(){e.debug("close"),null!==this.oOverlay&&(this.oOverlay.close(),this.oOverlay=null,this.$overlayContent=null)},getModelFormData:function(){return"object"==typeof this.oModelFormData&&null!==this.oModelFormData||(this.oModelFormData=this.oModel.getInfoFormFormat()),this.oModelFormData},initPopContent:function(){if(null!==this.oOverlay){e.debug("initPopContent");var i=this.getModelFormData();this.initInputsInfo();var o=this,a=this.getPopupInputData();e.debug("Render model info form",a),this.$overlayContent=$(n.render(p,a)),this.$overlayContent.find(".cancel-model-info-form").on("click",function(e){o.bCloseLock||(e.preventDefault(),r.confirm(s.__("misc.confirm_cancel"),function(){o.close()}))}),this.$overlayContent.find(".show-model-info-file-upload").on("click",function(e){e.preventDefault(),o.showFileUpload($(this).data("name")),"profile_pic"===$(this).parents(y).attr("data-name")&&o.initCropper()}),this.$overlayContent.find(".input-group-btn.is-error").on("change",function(){e.debug("Errored input updated"),$(this).removeClass("is-error"),$(this).parent().find(".reject-reasons").remove()}),this.$form=this.$overlayContent.find("form"),this.$inputs=this.$overlayContent.find("input, textarea, select"),this.$errorContainer=this.$overlayContent.find(".model-info-form-error"),e.debug("initPopContent : Model Data",i),this.bHasNotValidated=!1,this.oModel.hasOptionalField()&&(this.bHasNotValidated=!0);for(var l in i.inputs){e.debug("initPopContent : setting data",l,i.inputs[l]||"");var d=this.$inputs.filter("[name="+l+"]");d.length&&d.val(i.inputs[l].sValue||"")}for(var u in i.fields){var c=i.fields[u].getStatus();c&&c!==f.STATUS.VALIDATED&&c!==f.STATUS.NOT_REQUIRED&&(this.bHasNotValidated=!0)}this.bHasNotValidated||this.$overlayContent.find(".submit-model-info-form").toggle(!1),this.initSubmit(),this.initFileUpload(),this.initInputsChange(),this.initExemptionToggles(),this.initHiddenUnchangedPopups(),this.updateFieldsVisibility(),t.dyn.modelSuggest.imageCropperValidationRules&&(t.dyn.modelSuggest.imageCropperValidationRules.elt_id="document"),this.aUploadErrorsReceived.length&&this.setFormErrors(this.aUploadErrorsReceived),this.oOverlay.setContent(this.$overlayContent),this.initCropper()}},getCountriesList:function(){var e=this.getModelFormData(),t=[];if(this.oInputsInfo.country){var i=!1;for(var n in this.oInputsInfo.country.oRules.options)t.push({sDisplay:this.oInputsInfo.country.oRules.options[n],sValue:n,bSelected:n===e.inputs.country.sValue}),n===e.inputs.country.sValue&&(i=!0);!i&&e.inputs.country.sDisplay&&e.inputs.country.sRequirement===f.STATUS.NOT_REQUIRED?t=[{sDisplay:e.inputs.country.sDisplay,sValue:"",bSelected:!0}]:t.unshift({sDisplay:"---",sValue:"",bSelected:!i})}return t},getSexList:function(){var e=this.getModelFormData(),t=[];if(this.oInputsInfo.sex){var i=!1;for(var n in this.oInputsInfo.sex.oRules.options)t.push({sDisplay:this.oInputsInfo.sex.oRules.options[n],sValue:n,bSelected:n===e.inputs.sex.sValue}),n===e.inputs.sex.sValue&&(i=!0);!i&&e.inputs.sex.sDisplay&&e.inputs.sex.sRequirement===c.S_STATUS.NOT_REQUIRED?t=[{sDisplay:e.inputs.sex.sDisplay,sValue:"",bSelected:!0}]:t.unshift({sDisplay:"---",sValue:"",bSelected:!i})}return t},getExemptions:function(){var e=this.getModelFormData(),t=[];return this.oInputsInfo.exemption&&Object.entries(this.oInputsInfo.exemption.oRules.options).forEach(function(i){var n=i[0],s=i[1];n!==c.EXEMPTIONS.ERROR&&t.push({sDisplay:s.label,sValue:n,bSelected:n===e.inputs.exemption.sValue})}),t},getMaxBirthDate:function(){var e="";return this.oInputsInfo.birth_date&&(this.oInputsInfo.birth_date.oRules.date_max=new Date(this.oInputsInfo.birth_date.oRules.date_max),e=this.oInputsInfo.birth_date.oRules.date_max.getFullYear()+"-"+("0"+(this.oInputsInfo.birth_date.oRules.date_max.getMonth()+1)).slice(-2)+"-"+("0"+this.oInputsInfo.birth_date.oRules.date_max.getDate()).slice(-2)),e},getPopupInputData:function(){var e=this,t=this.getModelFormData(),i=this.getUpdatedFileInfos(),n=this.getPopUpFileBlocks(i),o=0;for(var a in i)i[a].bShowBlock&&o++;var r={back_to_list:s.__("video.user_suggest.back_to_list"),sTitle:s.__("video.user_suggest.model_info"),sRealNameLegend:s.__("video.user_suggest.entered_info_not_public"),aSexList:this.getSexList(),aCountries:this.getCountriesList(),sBirthDateMax:this.getMaxBirthDate(),sBirthDatePlaceHolder:s.__("form.date_format_sql"),sWhoAreThey:s.__("video.user_suggest.is_this_professional_model_how_verify"),sWhoAreTheyLegend:s.__("video.user_suggest.entered_info_not_public"),sExemption:this.oInputsInfo.exemption?this.oInputsInfo.exemption.sDisplay:"",aExemptions:this.getExemptions(),bExemptionError:!0===t.inputs.exemption.bError,sExemptionError:s.__("video.user_suggest.exemption_error"),sExemptionLabel:this.oModel.exemptionLabel,sExemptionErrorValue:this.oModel.exemption,bExemptionShown:!!this.oInputsInfo.exemption&&t.inputs.exemption.bShown,bIsExemptionEditable:!!this.oInputsInfo.exemption&&t.inputs.exemption.bEditable,bFilesShowBlock:o>0,iFileBlocksCount:o,sFilesHtml:n,sSubmit:this.bIsCreateForm?s.__("video.user_suggest.add_model"):s.__("video.user_suggest.save_model"),sCancel:s.__("misc.cancel")};return["name","real_name","sex","country","birth_date","who_are_they"].forEach(function(i){var n=t.inputs[i],s=e.oInputsInfo[i],o=!1;n.sRequirement===f.STATUS.MISSING&&(o=!0),n.sRequirement===f.STATUS.REJECTED&&(o=!0),o||(n.aRejectReasons=[]),r[i]={sDisplay:s?s.sDisplay:"",bRequired:!!s&&s.bRequired,bShown:n.bShown,bEditable:n.bEditable,bIsError:o,aRejectReasons:n.aRejectReasons,bHasExemptionToggle:e.oExemptionToggles[i],bHiddenUnchanged:t.fields[i].isHiddenUnchanged()}}),r},getUpdatedFileInfos:function(){var e=this.getModelFormData();this.oInputsInfo.files=[];var t=[];if("undefined"!=typeof this.oInputsInfo.files)for(var i in e.files){var n=e.files[i];n.bHasExemptionToggle=this.oExemptionToggles[n.sInputName],t.push(n),this.oInputsInfo.files.push(n)}return t},getPopUpFileBlocks:function(e,i){"object"==typeof e&&null!==e||(e=this.getUpdatedFileInfos());var o="";for(var a in e){var r=e[a];!r.bShowBlock||"string"==typeof i&&i!==r.sInputName||(o+=n.render(_,{oFile:r,bCropWidget:r.bCropWidget,sChangeFile:s.__("form.update_file"),bCanUseFileDrop:this.canUseFileDrop(),sDropHere:s.__("form.drop_file_here"),sEmptyField:s.__("video.user_suggest.to_empty_field"),sFileRequired:s.__("form.file_required"),sSaveToUpload:s.__("form.save_to_upload"),sFile:s.__("chat.uploaded_file"),sIsUploading:l.getIcf()+" "+s.__("chat.file_uploading"),sCropWidgetHtml:t.dyn.modelSuggest.imageCropperHtml,bHasFileErrors:r.aRejectReasons&&r.aRejectReasons.length}))}return o},initExemptionToggles:function(){if(null!==this.$overlayContent&&this.oInputsInfo.exemption&&this.oInputsInfo.exemption.oRules.options&&!$.isEmptyObject(this.oInputsInfo.exemption.oRules.options)){e.debug("initExemptionToggles");var i=this.$inputs.filter("[name=exemption]"),s=this.$overlayContent.find(".model-info-exemption-toggle"),a=this;s.on("click",function(i){if(i.preventDefault(),a.oExemptionPopup){a.oExemptionPopup.close();var n=$(this).attr("data-field"),s=null;n?(s=t.dyn.modelSuggest.newSuggestedModel[n],s.sInputName=n):e.error("Could not find field name : Showing all exemptions"),a.oExemptionPopup.oField=s,a.oExemptionPopup.setButton($(this)),a.oExemptionPopup.open()}}),this.oExemptionPopup=new o(null,null,{trigger:!1,popup_class:"model-info-exemption-toggle__popup",relative_to:this.$overlayContent,position:{v:"below",h:"right"},autoclose:!0,mouseout_autoclose:3e3,mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"]}),this.oExemptionPopup.onOpen=function(){var s=[],o=i.val();a.oHiddenUnchangedPopup&&a.oHiddenUnchangedPopup.close(),this.oField?(this.oField.exemptions.list&&(s=this.oField.exemptions.list),this.oField.exemptions.optional&&s.concat(this.oField.exemptions.optional),s=s.map(function(e){return{sName:e,sDisplay:t.dyn.modelSuggest.exemptionsList[e],bIsSelected:e===o}})):Object.entries(a.oInputsInfo.exemption.oRules.options).forEach(function(e){var t=e[0],i=e[1];s.push({sName:t,sDisplay:i.label,bIsSelected:t===o})});var r="consent_form"===this.oField.sInputName&&a.oModel.canDoVerifiedVideo,l=$(n.render(g,{sTitle:a.oInputsInfo.exemption.sDisplay,aOptions:s,bShowAlternativeVerification:r,sAlternative:S.alternative,sAlternativeLink:S.alternative_link}));a.oExemptionPopup.setContent(l),l.find("button:not(.is-selected)").on("click",function(t){t.preventDefault(),e.debug("initExemptionToggles --- oExemptionPopup button click",$(this).data("name")),i.val($(this).data("name")),a.oExemptionPopup&&a.oExemptionPopup.close(),i.trigger("change")})}}},initHiddenUnchangedPopups:function(){if(null!==this.$overlayContent){var e=this,t=this.$overlayContent.find(".model-info-hidden-unchanged");t&&(e.oHiddenUnchangedPopup=new o(null,null,{position:{v:"below",h:"right"},autoclose:!0,mouseout_autoclose:1e3,mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"]}),e.oHiddenUnchangedPopup.onOpen=function(){e.oExemptionPopup&&e.oExemptionPopup.close(),e.oHiddenUnchangedPopup.setContent("<span>"+s.__("video.user_suggest.hidden_unchanged_info")+"</span>")},e.oHiddenUnchangedPopup.setButton(t),t.on("click",function(t){t.preventDefault(),console.log(e.oHiddenUnchangedPopup),e.oHiddenUnchangedPopup.opened?e.oHiddenUnchangedPopup.close():e.oHiddenUnchangedPopup.open()}),t.on("mouseenter",function(t){t.preventDefault(),console.log(e.oHiddenUnchangedPopup),e.oHiddenUnchangedPopup.open()}))}},initInputsInfo:function(){var e=this,t=this.getModelFormData();this.oInputsInfo=JSON.parse(JSON.stringify(this.bIsLightForm?w:C)),this.filterExemptions(),this.initExemptionFields(),t.bHasId&&this.oInputsInfo.name&&(this.oInputsInfo.name.bRequired=!1,this.oInputsInfo.name.sValueSetFunc=!1),Object.keys(t.inputs).forEach(function(i){!t.inputs[i].bRequired&&e.oInputsInfo[i]&&(e.oInputsInfo[i].bRequired=!1,t.inputs[i].bEditable||(e.oInputsInfo[i].sValueSetFunc=!1))}),t.files.forEach(function(t){e.oInputsInfo["file["+t.sInputName+"]"]={}})},initInputsChange:function(){null!==this.$overlayContent&&(this.bShouldValidateFormOnInputChange=!1,this.$inputs.on("change",this,this.onInputChange))},filterExemptions:function(){var t=this,i={};i[c.EXEMPTIONS.NONE]=!0,Object.entries(this.getModelFormData().fields).forEach(function(t){var n=t[0],s=t[1];s||e.error("Unknown field with key",n),s.exemptions&&(s.exemptions.list&&s.exemptions.list.forEach(function(e){i[e]=!0}),s.exemptions.optional&&s.exemptions.optional.forEach(function(e){i[e]=!0}))}),i[this.oModel.exemption]||(i[c.EXEMPTIONS.ERROR]=!0,this.oInputsInfo.exemption.oRules.options[c.EXEMPTIONS.ERROR]={hide:[],optional:[],label:this.oModel.exemptionLabel,error:!0},this.oModelFormData.inputs.exemption={bEditable:!0,bShown:!0,bError:!0,sValue:c.EXEMPTIONS.ERROR}),this.oInputsInfo.exemption.oRules.options=Object.keys(this.oInputsInfo.exemption.oRules.options).reduce(function(e,n){return!0===i[n]&&(e[n]=t.oInputsInfo.exemption.oRules.options[n]),e},{})},initExemptionFields:function(){var t=this;e.debug("Model fields:",this.getModelFormData().fields),Object.entries(this.getModelFormData().fields).forEach(function(i){var n=i[0],s=i[1];s||e.error("Unknown field with key",n);var o=!1,a=n;s.is_file&&(a="file["+n+"]"),s.exemptions&&(s.exemptions.list&&s.exemptions.list.forEach(function(e){t.oInputsInfo.exemption.oRules.options[e].hide.push(a),o=!0}),s.exemptions.optional&&s.exemptions.optional.forEach(function(e){t.oInputsInfo.exemption.oRules.options[e].optional.push(a),o=!0})),t.oExemptionToggles[n]=o}),e.debug("Exemptions:",t.oInputsInfo.exemption.oRules.options)},onInputChange:function(t){var i=t.data;e.debug("onInputChange",$(this).prop("name"),$(this).val()),i.updateFieldsVisibility(),i.bShouldValidateFormOnInputChange&&i.isFormValid()},updateFieldsVisibility:function(){var t=this,i=t.getFormInputsValues();if(e.debug("updateFieldsVisibility",{oInputsInfo:t.oInputsInfo,oResults:i}),t.oInputsInfo.who_are_they){var n=i.who_are_they;t.oInputsInfo.who_are_they.bRequired||void 0!==n&&""!==n?t.$overlayContent.find(".model-info-input-block[data-name=who_are_they]").show():t.$overlayContent.find(".model-info-input-block[data-name=who_are_they]").hide()}if(t.oInputsInfo.exemption){var s=i.exemption,o=!this.oInputsInfo.exemption.oRules.options[s];s&&!o||(s=c.EXEMPTIONS.NONE);var a=t.oInputsInfo.exemption.oRules.options[s];Object.keys(t.oInputsInfo).forEach(function(e){var i=a.hide.includes(e),n=a.optional.includes(e),s="exemption"===e;!i||n||s&&o?t.showField(e,n):t.hideField(e)})}},isFieldNameFile:function(e){return"file["===e.slice(0,5)&&"]"===e.slice(-1)},getFieldFileName:function(e){return e.slice(5,-1)},hideField:function(t){if(e.debug("HIDE",t),this.isFieldNameFile(t)){var i=this.getFieldFileName(t);this.$overlayContent.find(y+'[data-name="'+i+'"]').hide()}else{var n=this.$overlayContent.find('.model-info-input-block[data-name="'+t+'"]');this.hideFieldValue(),n.hide()}},showField:function(t,i){if(e.debug("SHOW",t,i?"":"REQUIRED"),this.isFieldNameFile(t)){var n=this.getFieldFileName(t);this.$overlayContent.find(y+'[data-name="'+n+'"]').show()}else{this.showFieldValue(t);var s=this.oInputsInfo[t],o=this.$overlayContent.find('.model-info-input-block[data-name="'+t+'"]');o.show();var a=!!o.find("input").val()||!!o.find("select").val()||!!o.find("textarea").val();i||a||!s.bRequired?(o.find(".input-group-btn").removeClass("missing-required"),o.find(".input-group-btn").removeClass("is-error")):o.find(".input-group-btn").addClass("missing-required")}},hideFieldValue:function(e){var t=this.$inputs.filter("[name="+e+"]");"exemption"!==e&&t.val()&&(this.oVisibilityToggledInputsValues[e]=t.val(),t.val(""))},showFieldValue:function(e){"exemption"!==e&&"undefined"!=typeof this.oVisibilityToggledInputsValues[e]&&(this.$inputs.filter("[name="+e+"]").val(this.oVisibilityToggledInputsValues[e]),delete this.oVisibilityToggledInputsValues[e])},initSubmit:function(){null!==this.$overlayContent&&(e.debug("initSubmit",this.$overlayContent.find("form").length),this.$overlayContent.find("form").on("submit",this,this.onFormSubmit))},onFormSubmit:function(t){t.preventDefault();var i=t.data;return i.isSubmitLock()?void e.debug("submit form --- RETURN isSubmitLock"):(e.debug("submit form"),i.addSubmitLock(),i.bShouldValidateFormOnInputChange=!0,i.isFormValid()?void i.uploadFormData():void i.removeSubmitLock())},uploadFormData:function(i){if(null!==this.$overlayContent){e.debug("uploadFormData"),this.iUploadingCount=0,this.iUploadAwaitCount=0,this.initUploadErrorsReceived(),this.oFormDataTemp=new FormData(this.$form[0]);var n=this,o=this.oModel.geInputModelType();if(this.bIsLightForm)return void this.onFormDataUploaded();if(e.debug("uploadFormData",o),"boolean"==typeof i&&o!==c.S_MODEL_TYPE_UNIDENTIFIED||(i=!1),!i){var a=Object.entries(t.dyn.modelSuggest.newSuggestedModel).reduce(function(e,t){var i=t[0],n=t[1];return(n&&!n.is_file||"exemption"===i)&&e.push(i),e},[]),r=new FormData,l=[],d="",u=!1;for(var f in a){var h=a[f],p=this.$inputs.filter("[name="+h+"]"),_=p&&p.length,g=_?p.val():"exemption"===h?c.EXEMPTIONS.NONE:"";"exemption"===h&&(u=!0,p[0]&&(g="ERROR"===p[0].value?this.oModel.exemption:p[0].value)),_&&g&&g.length&&this.oInputsInfo[h]&&this.oInputsInfo[h].sDisplay&&l.push(this.oInputsInfo[h].sDisplay),r.append(h,g)}u||r.append("exemption",c.EXEMPTIONS.NONE),this.iUploadingCount++,this.iUploadAwaitCount++,d=l.length?"<br/> - "+l.join("<br/> - "):"<br/> - ("+s.__("video.user_suggest.no_data_sent")+")",Object.entries(this.oModel.fields).forEach(function(e){var t=e[0],i=e[1];if(!i.is_file){var s=n.$inputs.filter('[name="'+t+'"]');s&&s.length&&i.set(s.val())}}),e.debug("uploadFormData --- AJAX MetaData Sending",this.oModel.getMetadataUploadUri(),r),this.bCloseLock=!0,$.ajax({url:this.oModel.getMetadataUploadUri(),type:"POST",data:r,contentType:!1,processData:!1,success:function(t){e.debug("uploadFormData --- AJAX MetaData SUCCESS",t);var i=!0;if(t.result){var a=!1;n.iUploadAwaitCount--,t.data&&(o!==c.S_MODEL_TYPE_UNIDENTIFIED&&o!==c.S_MODEL_TYPE_SUGGESTED||(t.data.modelId?(n.setModelIdSuggestion(t.data.modelId),n.uploadFormData(!0),i=!1):(a=!0,console.error("no suggest id received"),n.formDataUploadError(s.__("misc.internal_error_retry")+d)))),a||n.uploadFiles(n.oFormDataTemp)}else{var r=n.getUploadErrorMessage(t);Array.isArray(r)?n.formDataUploadError(r):n.formDataUploadError(r+d)}i&&n.formDataUploadEnd()},error:function(t,i,o){e.debug("uploadFormData --- AJAX MetaData FAIL",{xhr:t,status:i,error:o}),"string"==typeof o&&o.length||(o=s.__("form.smtg_went_wrong_sending",{"%fields%":d+(t.status?"<br/>("+t.status+")":"")})),n.formDataUploadError(o),n.formDataUploadEnd()},complete:function(){e.debug("uploadFormData --- finally remove close lock"),n.bCloseLock=!1}})}}},uploadFiles:function(e,t){for(var i in this.oInputsInfo.files){var n=this.oInputsInfo.files[i],s=this.$inputs.filter("[name="+n.sInputName+"]"),o=s.val();void 0!==o&&""!==o&&(s.parents(y).is(":visible")&&this.attemptToUploadFileInput(e,n,s,t))}0!==this.iUploadingCount||t||this.onFormDataUploaded()},formDataUploadEnd:function(){e.debug("uploadFormData --- oSelf.formDataUploadEnd"),0===--this.iUploadingCount&&this.onFormDataUploaded()},formDataUploadError:function(e){Array.isArray(e)?this.addUploadErrorsReceived(e):"string"==typeof e&&e.length?this.addUploadErrorsReceived(e.split("\n")):this.addUploadErrorsReceived(s.__("misc.internal_error_retry"))},setModelIdSuggestion:function(e){if(this.oModel.setIdSuggestedElement(e),"undefined"!=typeof this.oInputsInfo.files){var t=this.oModel.getInfoFormFormat();if(this.oModel.geInputModelType()!==c.S_MODEL_TYPE_UNIDENTIFIED)for(var i in t.files){var n=t.files[i];for(var s in this.oInputsInfo.files)this.oInputsInfo.files[s]&&this.oInputsInfo.files[s].sInputName===n.sInputName&&(this.oInputsInfo.files[s].sFileUploadUri=n.sFileUploadUri)}}},attemptToUploadFileInput:function(e,t,i,n){var s=this;e.forEach(function(e,o){if(o===t.sInputName){var a="string"==typeof e&&"data:image/png;base64"===e.slice(0,21);if("object"==typeof e||a){s.iUploadingCount++,s.iUploadAwaitCount++;var r=new FormData;a?r.append("file[document]",e):r.append("file[document]",e,e.name);var l=i.parents(y);l.addClass("is-uploading"),"string"==typeof t.sFileUploadUri?s.uploadFile(t,r,i,l,n):console.error("no upload uri for <strong>"+t.sDisplay+"</strong> file")}}})},getUploadErrorMessage:function(e){var t=e.data&&e.data.errors&&e.data.errors.length,i=e.data&&!!e.data.message,n=!!e.message,o=s.__("misc.internal_error_retry");return t?o=e.data.errors:i?o=e.data.message:n&&(o=e.message),o},uploadFile:function(t,i,n,o,a){var r=this;e.debug("uploadFormData --- AJAX FILE Sending",t.sFileUploadUri,i);var l=t.sSetIdFuncName;this.bCloseLock=!0,$.ajax({url:t.sFileUploadUri,type:"POST",data:i,contentType:!1,processData:!1,success:function(i){if(e.debug("uploadFormData --- AJAX FILE SUCCESS",i),i.result)r.iUploadAwaitCount--,i.data&&i.data.documentFileId&&"function"==typeof r.oModel[l]&&r.oModel[l](i.data.documentFileId);else{var s=r.getUploadErrorMessage(i);Array.isArray(s)?r.fileUploadError(i.data.errors,n):r.fileUploadError("<strong>"+t.sDisplay+"</strong> : "+s,n),a=!0}a||r.fileUploadEnd(t,o)},error:function(i,l,d){e.debug("uploadFormData --- AJAX FILE FAIL",{xhr:i,status:l,error:d}),"string"==typeof d&&d.length||(d=s.__("misc.internal_error_retry")+(i.status?" ("+i.status+")":"")),r.fileUploadError("<strong>"+t.sDisplay+"</strong> : "+d,n),a||r.fileUploadEnd(t,o)},complete:function(){e.debug("uploadFormData --- finally remove close lock"),r.bCloseLock=!1}})},fileUploadEnd:function(t,i){e.debug("uploadFormData --- fileUploadEnd"),i.replaceWith($(this.getPopUpFileBlocks(null,t.sInputName))),this.formDataUploadEnd()},fileUploadError:function(e,t){this.formDataUploadError(e);var i=t.parents(y);i.addClass("has-file-error"),i.removeClass("is-uploading")},initUploadErrorsReceived:function(){this.aUploadErrorsReceived=[]},addUploadErrorsReceived:function(e){this.aUploadErrorsReceived=this.aUploadErrorsReceived.concat(e),this.setFormErrors(this.aUploadErrorsReceived)},onFormDataUploaded:function(){this.removeSubmitLock(),0===this.iUploadAwaitCount?(e.debug("onFormDataUploaded --- No awaiting upload"),"function"==typeof this.fnOnSavedModel&&this.fnOnSavedModel(this.oModel),this.close()):(e.debug("onFormDataUploaded --- Uploads not OK"),this.initPopContent())},isFormValid:function(){if(null===this.$overlayContent)return!1;var n=this.getFormInputsValues(),o=!0,a=[],r=this,l=function(t,i,n){e.debug("isFormValid --- fnSetError",{sKey:t,sDisplay:i,sError:n},undefined,"color: crimson"),r.$inputs.filter("[name="+t+"]").parents(".input-group-btn").addClass("is-error"),a.push('"<strong>'+i+'</strong>" : '+n)};e.debug("isFormValid ",{oResults:n,oInputsInfo:this.oInputsInfo},undefined,"color: green"),this.$inputs.parents(".input-group-btn").removeClass("is-error");for(var d in this.oInputsInfo)if("files"!==d){var u=this.oInputsInfo[d],c=n[d],f=!1;if(u.oRules&&u.oRules.input_not){for(var h in u.oRules.input_not){var p=u.oRules.input_not[h],_=this.$inputs.filter("[name="+h+"]").val();if(p!==_){e.debug("isFormValid --- VALIDATED condition input not value",{sKey:d,sInpCondValueBanned:p,sInpCondName:h,sInpCondValue:_},undefined,"color: green"),f=!0;break}}if(f)continue}if(e.debug("isFormValid ",{sKey:d,sValue:c,oValidation:u},undefined,"color: green"),void 0!==c&&""!==c){if(u.oRules)for(var g in u.oRules)if("string_min_length"===g){var m=s.__("form.input_too_short",{"%value%":c,"%nb_chars%":u.oRules[g].toLocaleString(t.dyn.locale)});if("string"!=typeof c){if(l(d,u.sDisplay,m),e.debug("isFormValid --- ERROR","!string",{sRule:g,sKey:d,sValue:c,oValidation:u},"color: crimson"),u.bRequired){o=!1;continue}c=""}else if(c=c.trim().replaceAll("  "," "),c.length<u.oRules[g]){if(l(d,u.sDisplay,m),e.debug("isFormValid --- ERROR","string toot short",{sRule:g,sKey:d,sValue:c,oValidation:u},"color: crimson"),u.bRequired){o=!1;continue}c=""}n[d]=c,u.sValueSetFunc&&this.oModel[u.sValueSetFunc](c)}else if("date_max"===g){var b=new Date,v=c.split("-");if(3!==v.length){if(l(d,u.sDisplay,s.__("form.date_is_invalid",{"%date%":i.escape(c)})),u.bRequired){o=!1;continue}c=""}else if(b.setFullYear(parseInt(v[0])),b.setMonth(parseInt(v[1])-1),b.setDate(parseInt(v[2])),b.setHours(0,0,0,0),b>u.oRules[g]){if(l(d,u.sDisplay,s.__("form.the_date_must_be_before_max",{"%max%":u.oRules[g].toLocaleDateString()})),e.debug("isFormValid --- ERROR","string toot short",{sRule:g,sKey:d,sValue:c,oValidation:u},"color: crimson"),u.bRequired){o=!1;continue}c=""}n[d]=c,u.sValueSetFunc&&this.oModel[u.sValueSetFunc](c)}else n[d]=c,u.sValueSetFunc&&this.oModel[u.sValueSetFunc](c,!!u.bEscapeOnCreate)}else u.bRequired&&(o=!1,l(d,u.sDisplay,s.__("video.user_suggest.empty_field")),e.debug("isFormValid --- ERROR","empty",{sKey:d,sValue:c,oValidation:u},"color: crimson"))}else for(var y in this.oInputsInfo.files){var D=this.oInputsInfo.files[y],f=!1;if(D.oRules)for(var g in D.oRules)if("input_not"===g){for(var h in D.oRules.input_not){var p=D.oRules.input_not[h],_=this.$inputs.filter("[name="+h+"]").val();if(p!==_){e.debug("isFormValid --- VALIDATED condition input not value",{sKey:d,sInpCondValue:_,sInpCondName:h,sInpCondValueBanned:p},undefined,"color: green"),
f=!0;break}}if(f)break}if(!f&&D.bRequired){var c=this.$inputs.filter("[name="+D.sInputName+"]").val();void 0!==c&&""!==c||(o=!1,l(D.sInputName,D.sDisplay,s.__("video.user_suggest.empty_field")),e.debug("isFormValid --- ERROR","empty",{sKey:d,sValue:c,oFileInfo:D},"color: crimson"))}}return this.setFormErrors(a),e.debug("isFormValid",o?"FORM IS VALID":"Form has ERRORS",a,n),o},setFormErrors:function(t){if(null===this.$overlayContent)return!1;if(e.debug("setFormErrors",t),this.$errorContainer.empty(),t.length){var i=$("<ul></ul>");for(var n in t){var s=$("<li></li>");s.html(t[n]),i.append(s)}this.$errorContainer.append(i)}},canUseFileDrop:function(){return this.bCanUseFileDrop},initFileUpload:function(){if(null!==this.$overlayContent){var t=this.$overlayContent.find(y),i=this;t.each(function(){var t=$(this);i.canUseFileDrop()&&(t.on("click touch",function(t){e.debug("$fileBlock --- click",t.type),$(this).removeClass("is-drag-over")}),t[0].addEventListener("drop",function(t){if(t.preventDefault(),t.stopPropagation(),e.debug("$fileBlock --- native drop",t),!t.dataTransfer)return void e.debug("$fileBlock --- drop RETURN","!event.dataTransfer");if(!t.dataTransfer.files.length)return void e.debug("$fileBlock --- drop RETURN","!event.dataTransfer.files.length");var n=$(this).data("name"),s=$(t.currentTarget).find("input[name="+n+"]");if(!s.length||!s[0])return void e.debug("$fileBlock --- drop RETURN","!$input.length || !!$input[0]");var o=$(t.currentTarget).find('input[id$="-source"]');o.length&&(s=o),i.showFileUpload(n),s[0].files=t.dataTransfer.files,s.trigger("change")}),t.on("dragenter dragover",function(t){t.preventDefault(),t.stopPropagation(),e.debug("$fileBlock --- dragover",t.type),$(this).addClass("is-drag-over")}),t.on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),e.debug("$fileBlock --- leave",t.type),$(this).removeClass("is-drag-over")})),t.find(".file-block-empty").on("click",function(){var e=$(this).parents(y),i=e.find("input");i.val(""),i.trigger("change");var n=t.find(".x-popup.below");n.length&&n.css("display","none")}),t.find("input").on("change",function(t){var i=$(this).parents(y),n=!!($(this)[0]&&$(this)[0].files&&$(this)[0].files.length);e.debug("$fileBlock --- input change",{bHasFile:n,files:$(this)[0].files}),i.toggleClass("has-file",n),i.removeClass("has-file-error is-drag-over");var s=i.find(".model-info-file span.alert-danger, .model-info-file span.alert-warning");s.length&&(n?s.find(".file-required").parent().parent().toggle(!1):s.find(".file-required").parent().parent().toggle(!0))})})}},showFileUpload:function(e){if(null!==this.$overlayContent){var t=this.$overlayContent.find('.show-model-info-file-upload[data-name="'+e+'"]');t&&t.length&&(t.hide(),t.parents(y).find(".model-info-file-upload").fadeIn())}},getFormInputsValues:function(){var e={};if(null===this.$overlayContent)return e;var t=this.$inputs.serializeArray();return"object"!=typeof t?e:(t.forEach(function(t){e[t.name]=t.value}),e)},setIsCreateForm:function(e){this.bIsCreateForm=e},setIsLightForm:function(t){e.debug("setIsLightForm",t),this.bIsLightForm=t},addSubmitLock:function(){e.debug("addSubmitLock"),this.bSubmitLock=!0},isSubmitLock:function(){return this.bSubmitLock},removeSubmitLock:function(){e.debug("removeSubmitLock"),this.bSubmitLock=!1},displayModelInputSuccessMessage:function(){null!==this.$overlayContent&&(this.$overlayContent.find(".container-model-info-form .overlay").html('<span class="icon-f icf-check-circle-thin"></span> '+s.__("video.user_suggest.thanks_for_your_suggestion")).html('<span class="icon-f icf-check-circle-thin"></span> '+i.unescape(s.__("video.user_suggest.thanks_for_your_suggestion"))),this.$overlayContent.find('.container-model-info-form input[name="name"], .container-model-info-form input[name="real_name"], .container-model-info-form input[name="sex"], .container-model-info-form input[name="country"], .container-model-info-form input[name="age"], .container-model-info-form input[name="exemption"], .container-model-info-form textarea[name="who_are_they"]').val(""),this.reinitAnimationModelsOverlayState())},displayModelInputWaitMessage:function(){null!==this.$overlayContent&&this.$overlayContent.find(".container-model-info-form .overlay").html('<span class="icon-f icf-hour-glass"></span> '+i.unescape(s.__("misc.submitting"))).css("display","flex").animate({opacity:1})},displayModelInputErrorMessage:function(e){if(null!==this.$overlayContent){void 0===e&&(e=i.unescape(s.__("error.internal_err_please_reload")));var t=this.$overlayContent.find(".container-model-info-form .overlay");t.html('<span class="icon-f icf-close-circle"></span> '+e),"none"===t.css("display")&&t.css("display","flex").animate({opacity:1}),this.reinitAnimationModelsOverlayState()}},reinitAnimationModelsOverlayState:function(){if(null!==this.$overlayContent){var e=this;setTimeout(function(){null!==e.$overlayContent&&(e.$overlayContent.find(".container-model-info-form .overlay").animate({opacity:0}).css("display","none"),setTimeout(function(){e.close()},200))},3500)}},initCropper:function(){if(t.dyn.modelSuggest.imageCropperValidationRules){var e=this;$(".crop-widget-container").each(function(){if($(this).is(":visible")){var i=$(this).find(".crop-image-block"),n=$(this).find("#document-label");n.detach().appendTo(i),n.addClass("btn"),n.addClass("btn-lg"),n.addClass("btn-danger"),n.find("span").html(s.__("profile.pick_a_file")),$("#document").attr("name","profile_pic"),t.dyn.modelSuggest.imageCropperValidationRules.options.fit_container=!0,t.dyn.modelSuggest.imageCropperValidationRules.options.$container=$(this).find(".crop-image-block"),e.oCrop=new u($(this).find(".form-field-document"),t.dyn.modelSuggest.imageCropperValidationRules),e.$inputs=e.$overlayContent.find("input, textarea, select"),e.initThumbsSelectionToCrop($(this).parent())}})}},initThumbsSelectionToCrop:function(e){if(t.data.video&&t.data.video.thumbs&&t.data.video.thumbs.length){var i=this,o=$(n.render(m,{sChoseFromVideo:s.__("video.user_suggest.choose_from_video")}));e.find(".crop-image-block").append(o),e.addClass("with-thumb-select");var a=o.find("label.btn");e.find(".crop-image-block #document-label").detach().appendTo(o);var r=function(){i.$ChoseThumbOverlay=$(n.render(b,{sPickFromVideo:s.__("video.user_suggest.pick_from_video")}));var o=i.$ChoseThumbOverlay.find(".pictures");t.data.video.thumbs.forEach(function(t){var s=$(n.render(v,{sThumbUrl:t.t}));s.on("click",function(){i.oCrop.set_image_url(t.l),e.parent().parent().addClass("has-file"),l()}),o.append(s)}),$(".models-suggestion-model-create-pop").append(i.$ChoseThumbOverlay),i.xScroll=new d({oOptions:{$Container:o,sMode:d.S_MODE_VERTICAL,bAutoHide:!1}});var a=Array.from(o.find("img")),r=a.length,u=function(){var e=a.filter(function(e){return!e.complete});e!==r&&(i.xScroll.updateView(),r=e),0!==r&&setTimeout(u,100)};u(),i.$ChoseThumbOverlay.on("click",function(e){e.target===this&&l()}),i.$ChoseThumbOverlay.find(".close").on("click",l)},l=function(){i.$ChoseThumbOverlay&&(i.$ChoseThumbOverlay.remove(),delete i.$ChoseThumbOverlay)};a.on("click",r)}},getFileUploadUri:function(e){switch(e){case"profile_pic":return this.oModel.getProfilePicUploadUri();case"consent_form":return this.oModel.getConsentFormUploadUri();case"id_document":return this.oModel.getIdentificationDocUploadUri();default:throw"Not Implemented : Missing file URI upload case"}},initVideoSuggestFileUpload:function(){var e=this;$(window).on("video_suggest_added",function(t,i){e.oModel.ide=i,e.oInputsInfo.files.forEach(function(t){t.sFileUploadUri=e.getFileUploadUri(t.sInputName)}),e.uploadFiles(e.oFormDataTemp,!0)})}},k}),define("skins/common/video/user_metadata_suggest/model_find_dropdown",["static/log","config/main","static/utils","mustache","lib/i18n!front","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","lib/helpers/scrollbar","./model_existing","./model_suggest","skins/common/sub_suggestions/suggestBlock/suggestModelVideo","text!./templates/models_list.mustache","text!./templates/find_models.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c,f){var h=function(){this.iModelMinSearchEntryLength=1,this.iWhoAreTheyEntryLength=10,this.bIsForUpload=!1,this.bDisplayMobile=$(window).width()<1024,this.sLastSearch=null,this.sSearchInputSelector=null,this.bIsLightModelCreation=!1,this.sContainer=null,this.$ModelsList=null,this.xCurrentRequest=null,this.oRequestTimer=null,this.bIsLoading=!1,this.oSearchCache={},this.oModelsCache={id:{},ide:{}},"xnxx"===t.sitename?this.sDefaultProfilePicture="/profiles-picture/xnxx":this.sDefaultProfilePicture="/profiles-picture/xvideos",this.oModelCreator=null};return h.prototype={fnSetIsForUpload:function(){this.bIsForUpload=!0},fnSetSearchInputSelector:function(e){this.sSearchInputSelector=e},fnSetModelCreationToLight:function(e){this.bIsLightModelCreation="boolean"!=typeof e||e},fnSetContainerSelector:function(e){this.sContainer=e},fnManageModelInput:function(){var e=this;$(window).on("click",function(t){return!!e.$ModelsList.is(":hidden")||(void 0!==$(t.target).parents("#models_list").get(0)||void 0!==$(t.target).parents(e.sContainer).get(0)||(void 0!==$(t.target).parents(".model-video-preview").get(0)||void 0!==$(t.target).find(".x-content .account-preview").get(0)||void e.fnClose()))}),this.$ModelsList.find(".mozaique").each(function(){"is-init"!==$(this).data("model-submitted-click")&&($(this).data("model-submitted-click","is-init"),$(this).on("click",".model-submitted",function(t){t.preventDefault(),t.stopPropagation();var i={};if($(this).data("id")&&"undefined"!=typeof e.oModelsCache.id[$(this).data("id")])i=new l(e.oModelsCache.id[$(this).data("id")]);else{if(!$(this).data("ide")||"undefined"==typeof e.oModelsCache.ide[$(this).data("ide")])return;i=new d(e.oModelsCache.ide[$(this).data("ide")])}e.fnTriggerAddModelToList(i),e.fnTriggerCleanUpModelInput()}))}),$(this.sSearchInputSelector).off("click focus").on("click focus",function(t){t.stopPropagation();var i=$(this).val();i.length>=e.iModelMinSearchEntryLength&&e.fnDrawModelsDataList(i)}).off("keyup change").on("keyup change",function(t){var i=$(this).val();if(null===e.sLastSearch||e.sLastSearch!==i){if(e.sLastSearch=i,i.length<e.iModelMinSearchEntryLength)return void e.fnClose();e.fnGetModelsSuggestionsList(i)}}).off("paste").on("paste",function(e){$input=$(this),setTimeout(function(){$input.trigger("keyup")},100)})},fnClose:function(){this.$ModelsList.hide(),this.$ModelsList.find(".mozaique").empty()},fnGetModelsSuggestionsList:function(n){if(null!==this.xCurrentRequest&&("function"==typeof this.xCurrentRequest.abort&&this.xCurrentRequest.abort(),this.xCurrentRequest=null),null!==this.oRequestTimer&&(clearTimeout(this.oRequestTimer),this.oRequestTimer=null),"undefined"!=typeof this.oSearchCache[n]&&Date.now()-this.oSearchCache[n].iTime<12e4)return this.setSuggestionsListLoading(!1),void this.fnDrawModelsDataList(n);this.setSuggestionsListLoading(!0);var s=this;this.oRequestTimer=setTimeout(function(){var o="/video-user-suggest/find-model";s.oRequestTimer=null,s.bIsForUpload&&(o+="/upload");var a={model_name:n,csrf:t.dyn.csrf_find_model};s.xCurrentRequest=$.ajax({method:"POST",url:o,data:a,dataType:"json",success:function(t){if(e.debug_("%c oModelFindDropdown --- fnGetModelsSuggestionsList --- Ajax Success","color: yellow",{sUrl:o,oPostData:a,oReceivedData:t}),s.setSuggestionsListLoading(!1),!t.result||"undefined"==typeof t.models)return void s.fnGenerateFindModelError(!("string"!=typeof t.message||!t.message.length)&&t.message);var i,r=t.models||[],l=t.suggestions||[],d={id:[],ide:[]};for(i in r)s.oModelsCache.id[r[i].id]=r[i],d.id.push(r[i].id);for(i in l){var u=l[i];u.ide&&(s.oModelsCache.ide[u.ide]=u,d.ide.push(u.ide))}s.oSearchCache[n]={iTime:Date.now(),oSearch:d},s.fnDrawModelsDataList(n),null!==s.xCurrentRequest&&(s.xCurrentRequest=null)},error:function(e,t,n){"string"==typeof n&&n.length||(n="ajax error"),n+="<br/>("+i.escape(i.unescape(n))+")",n+=e.status?"<br/>("+i.escape(i.unescape(e.status))+")":"",s.setSuggestionsListLoading(!1),s.fnGenerateFindModelError(n),null!==s.xCurrentRequest&&(s.xCurrentRequest=null)}})},250)},setSuggestionsListLoading:function(e){if("boolean"!=typeof e&&(e=!0),this.bIsLoading!==e)if(this.bIsLoading=e,e){var t=$('<span class="loader"></span>');t.append(a.getIcf()),this.$ModelsList.show().find(".mozaique").empty().append(t),this.$ModelsList.find("#add_new_form_access").prop("disabled",!0)}else this.$ModelsList.find(".mozaique").find(".loader").remove(),this.$ModelsList.find("#add_new_form_access").prop("disabled",!1)},getSearchOrderedModelList:function(e){var t=[];if("undefined"==typeof this.oSearchCache[e])return t;var i={ide:0,id:0},n=["ide","id"];for(var s in n)for(var o=n[s],a=this.oSearchCache[e].oSearch[o]&&this.oSearchCache[e].oSearch[o].length?this.oSearchCache[e].oSearch[o].length:0;i[o]<a;){var r=this.oSearchCache[e].oSearch[o][i[o]];"undefined"!=typeof this.oModelsCache[o][r]&&t.push(this.oModelsCache[o][r]),i[o]++}return t},fnDrawModelsDataList:function(e){if("undefined"==typeof this.oSearchCache[e])return!1;var t=this,i=this.getSearchOrderedModelList(e);t.bShouldCloseAfterError=!1,this.$ModelsList.find(".mozaique").empty();for(var n in i){var s,o=i[n];s=o.id?new l(o):new d(o),oModelBlock=u.buildFromModel(s,{sHighlightedText:e,oListeners:{onAssign:function(e){t.fnTriggerAddModelToList(e),t.fnTriggerCleanUpModelInput()}}}),this.$ModelsList.find(".mozaique").append(oModelBlock.renderThumb())}this.$ModelsList.show()},fnGenerateFindModelError:function(e){this.$ModelsList.find(".mozaique").html('<div class="is-error">'+i.unescape(s.__("video.users_suggest.failed_to_get_suggestions_please_try_later"))+(e?"<br/>"+e:"")+"</div>").show();var t=this;t.bShouldCloseAfterError=!0,setTimeout(function(){t.bShouldCloseAfterError&&t.fnClose()},4e3)},fnFormatModelsList:function(e,t){var i=[];for(var n in e){var s=e[n];s&&(s=s.id?new l(s):new d(s),i.push(s.getModelsListDisplay(t)))}return i},fnGetModelsObject:function(){this.$ModelsList&&(this.$ModelsList.remove(),this.$ModelsList=null),this.$ModelsList=$(n.render(f,{cant_find_right_model_add_a_new_one:i.unescape(s.__("video.user_suggest.cant_find_right_model_add_a_new_one"))}));var e=this,o=this.$ModelsList.find("#add_new_form_access");return new r({oOptions:{$Container:this.$ModelsList.find(".to-scroll"),bAutoHide:!1,sMode:r.S_MODE_VERTICAL}}),t.dyn.login_info&&t.dyn.login_info.is_logged?require(["skins/common/video/user_metadata_suggest/model_info_form"],function(t){o.on("click",function(n){if(n.preventDefault(),!e.bIsLoading){e.oModelCreator=new t,e.oModelCreator.setIsCreateForm(!0),e.bIsLightModelCreation&&e.oModelCreator.setIsLightForm(!0),e.oModelCreator.setOnSavedCallback(function(t){e.fnNewModelSuggestionPushed(t)});var s=new d;s.setName("string"==typeof e.sLastSearch?i.escape(e.sLastSearch,!0):""),e.oModelCreator.setModel(s),e.oModelCreator.open()}})}):require(["skins/"+t.sitename+"/form/login"],function(e){e.setupLinks(o)}),this.$ModelsList},fnTriggerCleanUpModelInput:function(){$(window).trigger("clean_up_model_input")},fnNewModelSuggestionPushed:function(e){$(window).trigger("model_created",e),this.fnTriggerAddModelToList(e)},fnTriggerAddModelToList:function(e){$(window).trigger("model_added",e)},fnDisplayModelInputSuccessMessage:function(){null!==this.oModelCreator&&this.oModelCreator.displayModelInputSuccessMessage()},fnDisplayModelInputWaitMessage:function(){null!==this.oModelCreator&&this.oModelCreator.displayModelInputWaitMessage()},fnRemoveLockUpFromCreateForm:function(){null!==this.oModelCreator&&this.oModelCreator.removeSubmitLock()},fnDisplayModelInputErrorMessage:function(e){o.alert(e),null!==this.oModelCreator&&this.oModelCreator.displayModelInputErrorMessage(e)}},h}),define("text!skins/common/video/user_metadata_suggest/templates/user_metadata_suggest.mustache",[],function(){return'<div>\n\t<div class="row text-center">\n\t    <div class="col-sm-12">\n\t        <div id="suggestions_errors" class="alert alert-danger hidden"></div>\n\t    </div>\n\t</div>\n\t<div class="row">\n\t{{#can_suggest_models}}\n\t    <div id="models_suggestions" class="suggestion-list col-md-12 col-lg-6">\n\t        <h3>{{{models_suggestions}}}</h3>\n\t        <div class="mozaique" id="suggestions_models_list">\n\t            {{#models}}\n\t                {{{model}}}\n\t            {{/models}}\n\t        </div>\n\t    </div>\n\t    <div class="models-details models-details-view-1-col col-md-12 hidden-lg col-xs-12 col-sm-12">\n\t        {{{ metadata_model_suggestion_field }}}\n\t    </div>\n\t{{/can_suggest_models}}\n\t    <div id="tags_suggestions" class="suggestion-list col-md-12 col-lg-{{#can_suggest_models}}6{{/can_suggest_models}}{{^can_suggest_models}}12{{/can_suggest_models}}">\n\t        <h3>{{{tags_suggestions}}}</h3>\n\t        <ul id="suggestions_tags_list">\n\t            {{#keywords}}\n\t                {{{keyword}}}\n\t            {{/keywords}}\n\t        </ul>\n\t        <ul id="suggestions_removed_tags_list">\n\t            {{#deleted_keywords}}\n\t                {{{keyword}}}\n\t            {{/deleted_keywords}}\n\t        </ul>\n\t    </div>\n\t</div>\n\t<div class="row">\n\t\t{{#can_suggest_models}}\n\t\t\t<div class="models-details models-details-view-2-cols hidden-xs hidden-sm hidden-md col-md-6 col-lg-6">\n\t\t\t\t{{{ metadata_model_suggestion_field }}}\n\t\t\t</div>\n\t\t{{/can_suggest_models}}\n\t    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-{{#can_suggest_models}}6{{/can_suggest_models}}{{^can_suggest_models}}12{{/can_suggest_models}}">\n\t        {{{ metadata_tag_suggestion_field }}}\n\t    </div>\n\t</div>\n\t<div class="clearfix"></div>\n\t<div class="mozaique" id="models_suggestion_with_thumb">\n\n\t</div>\n\t<div class="clearfix"></div>\n\t<div class="pull-right">\n\t    <a class="close-suggestions-box btn btn-primary">{{{ close }}}</a>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'}),define("text!skins/common/video/user_metadata_suggest/templates/popup_tag.mustache",[],function(){return'<li data-type="tag" {{#has_id}}data-id="{{id}}" {{/has_id}}data-value="{{value}}" class="{{#added}}added {{/added}}{{#deleted}}line-through {{/deleted}}btn-group">\n    <a class="button-add-suggestion{{#skin_default}} btn btn-default{{/skin_default}}" href="{{uri}}">\n        {{value}}\n    </a>\n    <a class="metadata-remove" title="{{remove_title}}"><span class="icon-f{{#deleted}} icf-plus{{/deleted}}{{^deleted}} icf-close{{/deleted}}"></span></a>\n</li>'}),define("text!skins/common/video/user_metadata_suggest/templates/popup_model.mustache",[],function(){return'<div class="card col-md-2 col-sm-3 col-xs-6{{#added}} added{{/added}}{{#deleted}} line-through{{/deleted}}" data-id="{{id}}" data-type="model" data-value="{{value}}">\n    <div class="card-img">\n        <div class="overlay-container overlay-{{id}}" style="background: url(\'{{#has_thumb}}{{{thumb}}}{{/has_thumb}}{{^has_thumb}}/profiles-picture/xvideos{{/has_thumb}}\')">\n            <div class="overlay">\n                <span class="metadata-remove icon-f{{^deleted}} icf-close{{/deleted}}{{#deleted}} icf-plus{{/deleted}}{{#added}} added{{/added}}" title="{{remove_title}}"></span>\n            </div>\n            <div class="overlay2">\n                <span class="icon-f icf-ban {{^deleted}}hidden{{/deleted}}"></span>\n            </div>\n        </div>\n    </div>\n    <div class="card-footer">\n        <p class="name">{{#display_link}}<a target="_blank" href="{{{uri}}}">{{{value}}}</a>{{/display_link}}{{^display_link}}{{{value}}}{{/display_link}}</p>\n    </div>\n</div>'}),define("text!skins/common/video/user_metadata_suggest/templates/metadata_tag_suggestion_field.mustache",[],function(){return'<div class="panel-models-suggestions row justify-content-center input-group">\n    <span class="input-group-btn metadata-suggest-box">\n        <input type="text" name="metadata_tag_suggestion" class="form-control" maxlength="{{{field_max_size}}}" placeholder="{{{ add_tag }}}" />\n    </span>\n    <a class="validate-suggest-tag btn btn-primary"><span class="hidden-lg hidden-md icon-f icf-plus"></span><span class="hidden-xs hidden-sm">{{{ add }}}</span></a>\n</div>\n<div class="suggestions_errors_tag alert alert-danger hidden"></div>'}),define("text!skins/common/video/user_metadata_suggest/templates/metadata_model_suggestion_field.mustache",[],function(){return'<div class="panel-models-suggestions row input-group">\n    <span class="input-group-btn metadata-suggest-box">\n        <input type="text" name="metadata_model_suggestion" class="model_suggestion form-control" maxlength="{{{field_max_size}}}" placeholder="{{{ add_model }}}" />\n    </span>\n    <div class="model-list-container">\n\n    </div>\n</div>\n<div id="suggestions_errors_model" class="alert alert-danger hidden"></div>'}),define("skins/common/video/user_metadata_suggest",["config/main","static/utils","mustache","lib/helpers/overlay/box","lib/i18n!front","./user_metadata_suggest/model_find_dropdown","./user_metadata_suggest/model","text!./user_metadata_suggest/templates/user_metadata_suggest.mustache","text!./user_metadata_suggest/templates/popup_tag.mustache","text!./user_metadata_suggest/templates/popup_model.mustache","text!./user_metadata_suggest/templates/metadata_tag_suggestion_field.mustache","text!./user_metadata_suggest/templates/metadata_model_suggestion_field.mustache"],function(e,t,i,n,s,o,a,r,l,d,u,c){var f=function(t,i){this.oPopup=null,this.$popupContent=$(),this.sIdVideo=t,this.oModelFindDropDown=new o,this.oModelFindDropDown.fnSetModelCreationToLight(!0),this.iLimitMetadataLength=50,this.iLimitMetadataSize=30,this.iMinMetadataSizeSubmit=3,this.iModelMinSearchEntryLength=2,this.iWhoAreTheyEntryLength=10,this.aKeywords=[],this.aRawKeywords={},this.aKeyWordsDeleted=[],this.aModels=[],this.oRawModels={},this.bSkinDefault=i,this.bDisplayMobile=$(window).width()<1024,this.fnLoadStoredData(),this.sLastSearch=null,this.sDefaultProfilePicture="/profiles-picture/xvideos",this.bCanSuggestModels=e.dyn.can_suggest_models};return f.prototype={fnSetKeywords:function(e){this.aRawKeywords=e},fnSetModels:function(e){this.oRawModels=e},fnLoadTags:function(){for(var e in this.aRawKeywords){var n=this.aRawKeywords[e],o=this.bSkinDefault?"/?k=":"/search/",a=o+encodeURIComponent(n.replace(" ","-"));if("undefined"!=typeof this.oStoredData.removed.tag[n]){var r={remove_title:t.unescape(s.__("video.user_suggest.remove_tag")),has_id:!1,value:t.escape(n),added:!1,deleted:!0,uri:a,skin_default:this.bSkinDefault},d=i.render(l,r);this.aKeyWordsDeleted.push({keyword:d})}else{var u={remove_title:t.unescape(s.__("video.user_suggest.remove_tag")),has_id:!1,value:t.escape(n),added:!1,deleted:!1,uri:a,skin_default:this.bSkinDefault},c=i.render(l,u);this.aKeywords.push({keyword:c})}}for(var e in this.oStoredData.added.tag){var f=this.oStoredData.added.tag[e].value,h=!1,p=f;e!==f&&(h=!0,p=e);var o=this.bSkinDefault?"/?k=":"/search/",a=o+encodeURIComponent(f.replace(" ","-"));u={remove_title:t.unescape(s.__("video.user_suggest.remove_tag")),id:p,has_id:h,value:t.escape(f),added:!0,deleted:!1,uri:a,skin_default:this.bSkinDefault};var _=i.render(l,u);this.aKeywords.push({keyword:_})}},fnLoadModels:function(){var n=this;for(var o in this.oRawModels){var a=this.oRawModels[o],r={remove_title:s.__("video.user_suggest.remove_model"),id:o,has_thumb:!0,can_suggest_models:this.bCanSuggestModels,thumb:e.domains["static"]+"/v3/img/skins/default/profile_default_medium.jpg",has_id:!0,display_link:n.bSkinDefault,value:t.escape(a.name),added:!1,deleted:!1,uri:a.uri,skin_default:this.bSkinDefault};"undefined"!=typeof n.oStoredData.removed.model[o]&&(r.deleted=!0);var l=i.render(d,r);n.aModels.push({model:l}),n.fnCompleteModelsObject(o,this.oRawModels)}for(var o in this.oStoredData.added.model){a=this.oStoredData.added.model[o];var u=this.sDefaultProfilePicture;"undefined"!=typeof a.thumb&&(u=a.thumb);var r={remove_title:t.unescape(s.__("video.user_suggest.remove_model")),id:a.id,thumb:u,value:t.escape(a.value),has_id:a.has_id,display_link:a.has_id&&n.bSkinDefault,added:!0,deleted:!1,uri:a.uri,skin_default:this.bSkinDefault},l=i.render(d,r);this.aModels.push({model:l})}},fnCompleteModelsObject:function(e,t){var i=t[e],n=this;$.ajax({method:"GET",url:"/profiles-picture/"+i.profile+".json",dataType:"json",success:function(t){t.thumb||(t.thumb=n.sDefaultProfilePicture),$(".overlay-"+e).css("background","url('"+t.thumb+"')")}})},fnOpenPopup:function(){if(this.fnRemoveError(),this.fnLoadTags(),this.fnLoadModels(),!this.oPopup){var e=i.render(r,{models:this.aModels,keywords:this.aKeywords,can_suggest_models:this.bCanSuggestModels,deleted_keywords:this.aKeyWordsDeleted,add:t.unescape(s.__("add")),search:t.unescape(s.__("search")),confirm:t.unescape(s.__("confirm")),close:t.unescape(s.__("misc.close")),tags_suggestions:t.unescape(s.__("video.users_suggest.tags_edit")),add_tag:t.unescape(s.__("video.user_suggest.add_new_tag")),models_suggestions:t.unescape(s.__("video.users_suggest.actresses_actors_edit")),field_max_size:this.iLimitMetadataSize,metadata_tag_suggestion_field:i.render(u,{display_mobile:this.bDisplayMobile,add:t.unescape(s.__("add")),add_tag:t.unescape(s.__("video.user_suggest.add_new_tag"))}),metadata_model_suggestion_field:"",display_mobile:this.bDisplayMobile});this.oPopup=n.get($("body"),!0,"hide"),this.oPopup.addClass("metadata-suggest-popup"),this.bCanSuggestModels||this.oPopup.addClass("half-sized"),this.oPopup.setContent(e),this.$popupContent=this.oPopup.getContainer()}var o=this;this.oPopup.show(),this.fnDisplayModelsTemplate(),this.oOnResizeTimer=null,$(window).on("resize",function(){o.oOnResizeTimer?(clearTimeout(o.oOnResizeTimer),o.oOnResizeTimer=setTimeout(function(){o.fnUpdateSearchInputSelector(),o.oOnResizeTimer=null},500)):(o.fnUpdateSearchInputSelector(),o.oOnResizeTimer=setTimeout(function(){o.oOnResizeTimer=null},500))}),this.fnManagePopUp()},fnUpdateSearchInputSelector:function(){var e=this;this.$popupContent.find(".models-details").each(function(){var t=$(this);if("none"!==t.css("display")){var i=t.hasClass("models-details-view-1-col")?".models-details-view-1-col":".models-details-view-2-cols";e.oModelFindDropDown.fnSetSearchInputSelector(i+' input[name="metadata_model_suggestion"]'),t.find(".model-list-container").empty().append(e.oModelFindDropDown.fnGetModelsObject()),e.oModelFindDropDown.fnManageModelInput()}})},fnDisplayModelsTemplate:function(){var e=i.render(c,{field_max_size:this.iLimitMetadataSize,add_model:t.unescape(s.__("video.users_suggest.add_new_model"))}),n=this;this.$popupContent.find(".models-details").each(function(){$(this).html(e),n.$popupContent.find("#models_list").hide()}),this.fnUpdateSearchInputSelector()},fnManagePopUp:function(){var e=this;this.fnManageMetadataListTriggers(),this.fnManageTagInput(),this.$popupContent.find(".close-suggestions-box").on("click",function(t){t.preventDefault(),e.oPopup.hide()})},fnManageMetadataListTriggers:function(){var e=this;this.$popupContent.find("#tags_suggestions").on("click",".icf-close",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.fnSuggestItemDeleteOrRestore("remove",$(this).parents("li").get(0))}).on("click",".icf-plus",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.fnSuggestItemDeleteOrRestore("add",$(this).parents("li").get(0))}),this.$popupContent.find("#models_suggestions").on("click",".icf-close",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.fnSuggestItemDeleteOrRestore("remove",$(this).parents(".card").get(0))}).on("click",".icf-plus",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.fnSuggestItemDeleteOrRestore("add",$(this).parents(".card").get(0))}),$(window).on("model_added",function(t,i){if(!a.IS_MODEL_OBJECT(i))return void console.error("oSuggestPopup --- model_added","info 'oModel' isn't oModelBase object");e.fnAddItemToList("model",i.getFormattedData())}),$(window).on("clean_up_model_input",function(){e.fnCleanUpModelInput()}),$(window).on("model_error",function(){e.fnGenerateError(s.__("video.users_suggest.failed_suggestion_try_later"),"model")})},fnSuggestItemDeleteOrRestore:function(i,n){this.fnRemoveError();var o=$(n).data("type"),a=$(n).data("id"),r=$(n).data("value"),l=this,d="tag"===o?"keyword":"model",u={csrf:e.dyn.csrf_submit_suggestion},c=$(n).hasClass("added");if("add"!==i&&"remove"!==i)return l.fnGenerateError(t.unescape(s.__("video.users_suggest.failed_suggestion_try_later")),o),!1;"number"==typeof a?u.id_element=a:u.element_name=r,$.ajax({method:"POST",url:"/video-user-suggest/"+l.sIdVideo+"/"+i+"/"+d+"/",dataType:"json",data:u,success:function(e){if(!e.result)return void l.fnGenerateError("string"==typeof e.message&&e.message.length?e.message:t.unescape(s.__("video.users_suggest.failed_suggestion_try_later")),o);if("add"===i&&(r=e.name),void 0===a&&(a=r),"remove"===i&&!0===c)n.remove();else{var d="icf-close",u="icf-plus";if("remove"===i&&(d="icf-plus",u="icf-close"),$(n).toggleClass("line-through"),"model"===o&&$(n).find(".icf-ban").toggleClass("hidden"),$(n).find("."+u).removeClass(u).addClass(d),"tag"===o){var f="remove"===i?$("#suggestions_removed_tags_list"):$("#suggestions_tags_list"),h={id:a,value:r};if("add"===i&&!0===c&&l.fnMetadataAlreadyExist(o,h))return void l.fnGenerateError(t.unescape(s.__("video.user_suggest."+o+"_already_exists")),o);!1===c?f.append($(n)):n.remove()}}"remove"===i?l.fnAddToTmpRemoveSuggestionsStored(o,a,r):l.fnRemoveFromTmpRemoveSuggestionsStored(o,a,r)},error:function(e,i,n){"string"==typeof n&&n.length||(n=t.unescape(s.__("internal_error"))),n+="<br/>("+t.escape(t.unescape(n))+")",n+=e.status?"<br/>("+t.escape(t.unescape(e.status))+")":"",l.fnGenerateError(n,o)}})},fnManageTagInput:function(){var e=this;this.$popupContent.find(".validate-suggest-tag").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var i=$(this).parent().find("input[name=metadata_tag_suggestion]");e.fnValidateTagInput(i.val())}),this.$popupContent.find("input[name=metadata_tag_suggestion]").on("keyup",function(t){t.stopImmediatePropagation();var i=$(this).val();"Enter"===t.key&&e.fnValidateTagInput(i)})},fnValidateTagInput:function(e){if(e.length>this.iLimitMetadataSize&&$(this).val(val.substring(0,this.iLimitMetadataSize)),e.length<this.iMinMetadataSizeSubmit)return void this.fnGenerateError(t.unescape(s.__("video.user_suggest.tag_must_be_at_least_3_characters")),"tag");var i=this.bSkinDefault?"/?k=":"/search/",n=i+encodeURIComponent(e.replace(" ","-"));this.fnAddItemToList("tag",{value:e,uri:n})},fnCleanAllFields:function(){this.fnCleanUpModelInput()},fnAddItemToList:function(n,o){var a=this;if(this.fnCountMetadataTypeItems(n)>this.iLimitMetadataLength)return void a.fnGenerateError(t.unescape(s.__("video.users_suggest.max_metadata_length_reached")),n);var r=!1,u="tag"===n?"keyword":"model",c={csrf:e.dyn.csrf_submit_suggestion};if(!("undefined"!=typeof o.id&&null!==o.id||"undefined"!=typeof o.value&&null!==o.value))return void a.fnGenerateError(t.unescape(s.__("video.users_suggest.failed_suggestion_try_later")),n);if(this.fnMetadataAlreadyExist(n,o)){var f=null;return"model"===n&&(f="undefined"!=typeof o.who_are_they.value?".new-model-error-global":".add-model-error-global"),void a.fnGenerateError(t.unescape(s.__("video.user_suggest."+n+"_already_exists")),n,f)}"undefined"!=typeof o.id&&null!==o.id?c.id_element=o.id:"undefined"!=typeof o.value&&null!==o.value&&(c.element_name=o.value),"model"===n&&(Object.entries(o.fields).forEach(function(e){var t=e[0],i=e[1];"undefined"!=typeof i.value&&null!==i.value&&(r=!0,c[t]=i.value)}),!0===r&&this.oModelFindDropDown.fnDisplayModelInputWaitMessage()),$.ajax({method:"POST",url:"/video-user-suggest/"+a.sIdVideo+"/add/"+u,dataType:"json",data:c,success:function(e){if(!1===e.result)return void a.oModelFindDropDown.fnDisplayModelInputErrorMessage("string"==typeof e.message&&e.message.length?e.message:t.unescape(s.__("video.users_suggest.failed_suggestion_try_later")))
;o.value=e.name;var u="model"===n?d:l;o.added=!0,o.skin_default=a.bSkinDefault;var c="model"===n?"video.user_suggest.remove_model":"video.user_suggest.remove_tag";if(o.remove_title=t.unescape(s.__(c)),o.display_link=!1,"undefined"!=typeof e.id&&null!==e.id&&0!==e.id&&"0"!==e.id&&(o.has_id=!0,a.bSkinDefault&&(o.display_link=!0),o.id=e.id),a.fnMetadataAlreadyExist(n,o)){return"model"===n?void a.oModelFindDropDown.fnDisplayModelInputErrorMessage(t.unescape(s.__("video.user_suggest.model_already_exists"))):void a.fnGenerateError(t.unescape(s.__("video.user_suggest."+n+"_already_exists")),n,null)}"model"===n&&(o.has_thumb=!0,"undefined"!=typeof o.thumb&&""!==o.thumb&&null!==o.thumb||(o.has_thumb=!1));var f=i.render(u,o);if(!1===a.fnAddToTmpAddSuggestionsStored(n,o))return"model"===n&&a.oModelFindDropDown.fnDisplayModelInputErrorMessage(t.unescape(s.__("video.users_suggest.model_already_added"))),void a.fnCleanAllFields();("tag"===n?a.$popupContent.find("#suggestions_tags_list"):a.$popupContent.find("#suggestions_models_list")).append(f),!0===r?a.oModelFindDropDown.fnDisplayModelInputSuccessMessage():a.$popupContent.find("input[name=metadata_"+n+"_suggestion]").val(""),$(window).trigger("video_suggest_added",e.ide)},error:function(e,i,o){if("model"===n&&!0===r)return void a.oModelFindDropDown.fnDisplayModelInputErrorMessage(t.unescape(s.__("video.users_suggest.failed_suggestion_try_later")));"string"==typeof o&&o.length||(o=t.unescape(s.__("internal_error"))),o+="<br/>("+t.escape(t.unescape(o))+")",o+=e.status?"<br/>("+t.escape(t.unescape(e.status))+")":"",a.fnGenerateError(o,n)}})},fnCountMetadataTypeItems:function(e){return this.$popupContent.find("#suggestions_"+e+"s_list button").length},fnTransformSerialisedArrayIntoObject:function(e){var t={};return"object"!=typeof e?t:(e.forEach(function(e){t[e.name]=e.value}),t)},fnGenerateError:function(e,t,i){var n="#suggestions_errors";"model"===t?(this.oModelFindDropDown.fnRemoveLockUpFromCreateForm(),n="#suggestions_errors_model"):"tag"===t&&(n=".suggestions_errors_tag"),void 0!==i&&null!==i&&(n=i),this.$popupContent.find(n).html(e).removeClass("hidden");var s=this;setTimeout(function(){s.fnRemoveError(t,i)},4e3)},fnRemoveError:function(e,t){var i="#suggestions_errors";"model"===e?i="#suggestions_errors_model":"tag"===e&&(i=".suggestions_errors_tag"),void 0!==t&&null!==t&&(i=t),this.$popupContent.find(i).html("").addClass("hidden")},fnAddToTmpAddSuggestionsStored:function(e,i){if(i.value=t.escape(i.value),"undefined"!=typeof i.id&&null!==i.id&&0!==i.id&&"0"!==i.id||(i.id=i.value),"undefined"!=typeof this.oStoredData.added[e][i.id])return!1;var n=this.fnGetDomModel(e,i);return this.fnAddItemToDom(e,n),this.oStoredData.added[e][i.id]=i,this.fnStoreData(),!0},fnAddToTmpRemoveSuggestionsStored:function(e,t,i){return void 0!==t&&""!==t||(t=i),this.fnSetItemAsRemovedIntoDom(e,i),"undefined"!=typeof this.oStoredData.removed[e]&&"undefined"!=typeof this.oStoredData.removed[e][t]?(delete this.oStoredData.removed[e][t],void this.fnStoreData()):"undefined"!=typeof this.oStoredData.added[e][t]?(delete this.oStoredData.added[e][t],void this.fnStoreData()):(this.oStoredData.removed[e][t]=i,void this.fnStoreData())},fnRemoveFromTmpRemoveSuggestionsStored:function(e,t,i){if(void 0!==t&&""!==t&&null!==t||(t=i),this.fnSetItemAsRemovedIntoDom(e,t),"undefined"!=typeof this.oStoredData.removed[e]&&"undefined"!=typeof this.oStoredData.removed[e][t])return delete this.oStoredData.removed[e][t],void this.fnStoreData();this.oStoredData.removed[e][t]=i,this.fnStoreData()},fnGetStoredDataStorageKey:function(){return"suggestions_"+this.sIdVideo},fnLoadStoredData:function(){var e=xv.storage.get(this.fnGetStoredDataStorageKey());this.oStoredData=e||{added:{model:{},tag:{}},removed:{model:{},tag:{}}}},fnGetStoredData:function(){return this.oStoredData},fnStoreData:function(){xv.storage.set(this.fnGetStoredDataStorageKey(),this.oStoredData)},fnUrlEncodeName:function(e){return e.replace(" ","-").toLowerCase()},fnMetadataAlreadyExist:function(e,t){if("model"===e&&0===this.aModels.length||"tag"===e&&0===this.aKeywords.length)return!1;var i="undefined"!=typeof t.id&&null!==t.id&&t.id;if("model"===e){if(i=parseInt(i),"model"===e&&"undefined"!=typeof this.oRawModels[parseInt(t.id)])return!0;for(var n in this.oRawModels)if(this.oRawModels[n]===t.value)return!0}for(var n in this.aRawKeywords)if(this.aRawKeywords[n]===t.value)return!0;var s=t.value.toLowerCase();if(!1!==i&&("undefined"!=typeof this.oStoredData.removed[e][i]||"undefined"!=typeof this.oStoredData.added[e][i]))return!0;var o=this.oStoredData.removed[e],a=this.oStoredData.added[e];for(var n in o)if(o[n].value===s)return!0;for(var n in a)if(a[n].value===s)return!0;return!1},fnCleanUpModelInput:function(){this.$popupContent.find('input[name="metadata_model_suggestion"]').val(""),this.$popupContent.find("#models_list .mozaique").empty(),this.$popupContent.find("#models_list").hide()},fnAddItemToDom:function(e,t){},fnSetItemAsRemovedIntoDom:function(e,t){},fnGetDomModel:function(e,t){}},f}),define("text!skins/default/video/metadata_field.mustache",[],function(){return'<li>\n    <a class="added btn btn-default{{#is_model}} is-pornstar label{{/is_model}}{{^is_model}} is-keyword{{/is_model}}"{{#has_id}} href="{{uri}}"{{/has_id}}>\n    {{#is_model}}<span class="name">{{/is_model}}{{tag_value}}{{#is_model}}</span>{{/is_model}}\n    </a>\n</li>'}),define("text!skins/default/video/sponsor_link.mustache",[],function(){return'<div id="video-sponsor-links" class="video-sponsor-links">\n\t{{#sponsor.d}}<a id="show-channel-desc" title="{{{ show_more }}}">...<span>+</span></a>{{/sponsor.d}}\n\t{{{ more_at }}} <a href="{{{sponsor.u}}}" target="_blank" rel="noopener"><strong>{{{sponsor.n}}}</strong></a>\n\t{{#sponsor.d}}<span class="channel-desc">- {{{sponsor.d}}}</span>{{/sponsor.d}}\n</div>\n'}),define("skins/default/video",["config/main","static/log","./header/header"],function(e,t){null!==e.data.id_video&&(require(["skins/common/video/tracking"],function(){}),require(["mustache","static/utils","static/storage","lib/tab","lib/i18n!front","lib/helpers/popup","skins/common/video/vote_manager","skins/common/video/playlist","skins/common/video/copy_link","skins/common/video/share","skins/common/video/lastviews","skins/common/video/sponsor","skins/common/tracker/videos_i_like","skins/common/history/page_view_history","skins/common/xcams/current_live_cams","skins/default/video/comments","skins/default/video/download","skins/default/video/playlists/manager","skins/default/video/watch_later","skins/common/video/user_metadata_suggest","text!skins/default/video/metadata_field.mustache","text!skins/default/video/sponsor_link.mustache","lib/helpers/thumbs_rotator","skins/common/video/auto_tr_title","skins/common/video/related","skins/default/video/subscribe","skins/default/video/tags","skins/default/video/playlists/related","skins/default/video/premium_block_popup","skins/default/video/ended_video_links_in_player","skins/common/form/cross_site_login"],function(i,n,s,o,a,r,l,d,u,c,f,h,p,_,g,m,b,v,y,D,C,w){var S=function(){};S.prototype={init:function(){this.addSponsor();var h=new D(e.data.id_video,!0);h.fnSetKeywords(e.dyn.video_tags),h.fnSetModels(e.data.video_models),h.fnAddItemToDom=function(t,i){var n=$(".video-tags-list li.main-uploader");if(Object.keys(e.data.video_models).length>0){var s=$(".video-tags-list li > .is-pornstar:last").parent();s.length&&(n=s)}if("tag"===t&&"undefined"!=typeof e.dyn.video_tags&&e.dyn.video_tags.length){var o=$("a.is-keyword:last").parent();o.length&&(n=o)}n.after(i)},h.fnSetItemAsRemovedIntoDom=function(e,t){var i;i="model"===e?$(".video-tags-list .is-pornstar"):$(".video-tags-list .is-keyword"),t=t.toString().trim().replace(" ","-"),i.each(function(i,n){var s=$(this),o=$(this).html().trim().replace(" ","-");if("model"===e){var a=s.find("span.name").html();"string"==typeof a&&(o=a.replace(" ","-"))}if(o===t){if(s.hasClass("line-through"))return void s.removeClass("line-through");if(s.hasClass("added"))return void s.remove();s.addClass("line-through")}})},h.fnGetDomModel=function(e,t){if("model"===e)return i.render(C,{tag_key:t.id,tag_value:n.escape(t.value),has_id:t.has_id,uri:t.uri,additional_class:"profile label hover-name",type:"model",is_model:!0});var s=encodeURIComponent(t.value.replace(" ","-").toLowerCase());return i.render(C,{tag_key:t.id,tag_value:n.escape(t.value),additional_class:"keyword",uri:"/?k="+s,type:"tag",has_id:!0,is_tag:!0})};var w=h.fnGetStoredData();if(null!==w){for(var S in w.added.model){var k=h.fnGetDomModel("model",w.added.model[S]);h.fnAddItemToDom("model",k)}for(var S in w.added.tag){var T=h.fnGetDomModel("tag",w.added.tag[S]);h.fnAddItemToDom("tag",T)}for(var S in w.removed)for(var E in w.removed[S])h.fnSetItemAsRemovedIntoDom(S,E)}$(document).trigger("tags_line_limiter"),$("#metadata_suggestion_popup_opener").on("click",function(e){e.preventDefault(),h.fnOpenPopup()});var P=$("#show-all-tags"),I=P.next().children("a:last-child");I.length>0&&I.position().left+I.outerWidth(!0)>=P.position().left-10?P.on("click",function(e){e.preventDefault(),$(this).parent().addClass("expanded")}):P.remove();var F,x=$("#v-actions .vote-actions");F=new l(x.find(".vote-action-good"),x.find(".vote-action-bad"),e.dyn.vmdata.vote_good,e.dyn.vmdata.vote_bad,{pop_relative:$("#page"),rating_good_perc:x.find(".rating-good-perc"),rating_bad_perc:x.find(".rating-bad-perc"),rating_good_nbr:x.find(".rating-good-nbr"),rating_bad_nbr:x.find(".rating-bad-nbr"),rating_total_text:x.find(".rating-total-txt"),rating_pgs_bar:x.find(".rating-bar .pgs-bar div, .rate-infos .perc .good .bar"),rating_pgs_bad_bar:x.find(".rate-infos .perc .bad .bar")}),F.set_success_func(function(t){return p.isTracking()&&($("#v-actions .vote-actions .vote-action-good").toggleClass("active",t),$("#v-actions .vote-actions .vote-action-bad").toggleClass("active",!t),t?p.addVideo(e.data.id_video):p.removeVideo(e.data.id_video)),x.find(".rating-bar").removeClass(t?"is-bad":"is-good").addClass(t?"is-good":"is-bad"),t&&(e.dyn.login_info.is_logged||p.isTracking())?a.__("video.votes.thanks_link",{"%start_link%":'<a href="/videos-i-like">',"%end_link%":"</a>"}):a.__("video.votes.thanks")});var L=function(e){t.info("video page fnVoteActionTracker",e),e&&($("#v-actions .vote-actions .vote-action-good").addClass("active"),$("#v-actions .vote-actions .rating-bar").addClass("is-good"))},O=function(e){t.info("video page fnVoteActionResultHandling",e),"boolean"==typeof e?L(e):e&&"object"==typeof e&&"function"==typeof e.then?e.then(function(e){L(e)}):t.error("oHasVideo return isn't boolean or Promise")};if(xv.indexedDb&&xv.indexedDb.getDbIsSupported()&&p.bIDB?xv.indexedDb.manageTempStackAdd(function(){O(p.hasVideo(e.data.id_video))}):O(p.hasVideo(e.data.id_video)),"function"==typeof d){var M=$("#video-tabs");M&&M.length&&d().insertAfter(M)}else if(xv.indexedDb&&xv.indexedDb.getDbIsSupported()&&"object"==typeof d){var M=$("#video-tabs");M&&M.length&&d.then(function(e){"function"==typeof e?e().insertAfter(M):console.error("Expected result to be a function, but got :",e)})["catch"](function(e){console.error("Error loading playlist :",e)})}var A={},V=null;A.tabComments=function(){V&&"function"==typeof V.init&&V.init()},A.tabDownload=b;var N=!1,R=function(){if(!N){N=!0;var e=$("#tabShareAndEmbed");if(e.length>0){var t=e.find(".share-toolbox"),i=c.getShareElem(window.location.href,document.title);t&&t.length?t.replaceWith(i):e.append(i),new u}}};$("#tabShareAndEmbed").length>0?A.tabShareAndEmbed=R:A.tabShare=R;var B=!1;A.tabReport=function(){require(["skins/common/video/report"],function(e){B||(B=!0,$("#tabReport").append((new e).getNode()))})};var U=new o("#video-tabs",A,!0,"no_tab_hash");V=new m;var H=$("#v-actions .tabs .save"),j=!1;if(!e.dyn.login_info.is_logged){var q=parseInt(s.get("video_login_alert_btn_last_shown","watch_later")),z=Date.now();z-q<6048e5&&(y.init_btn(H,e.data.id_video),j=!0)}j||H.on("click",function(){e.dyn.login_info.is_logged||s.set("video_login_alert_btn_last_shown",z.toString(),"watch_later"),v.loadAddToList(e.data.id_video,{bAddWatchLaterOnLogin:!0,$confirmPos:H})});var W=$("#v-actions-overflow-menu"),G=new r(W,"",{relative_to:$("#content"),popup_class:"v-actions-pop-menu",position:{v:"above",h:"right"}}),Y=0,K=function(){var e=$(window).outerWidth();if(Y!==e){Y=e;var t=$("#v-actions-container"),i=t.find("#v-actions"),n=i.find(".tabs button:not(.report)");n.show(),setTimeout(function(){var e=i.outerWidth(),s="undefined"!=typeof i[0]?i[0].scrollWidth:e;if(s>e){t.addClass("with-overflow-menu");var o=function(){n.filter(":visible").last().hide(),setTimeout(function(){e=i.outerWidth(),(s="undefined"!=typeof i[0]?i[0].scrollWidth:e)>e&&setTimeout(o,0)},0)};setTimeout(o,0)}else $("#v-actions .tabs button:not(:visible)").length?t.addClass("with-overflow-menu"):t.removeClass("with-overflow-menu")},0)}};G.onOpen=function(){G.setContent($("#v-actions .tabs button:not(:visible)").clone(!0).show().on("click",function(){G.close()}))},$(window).on("resize",K),K(),f.declareVideoView(e.data.id_video),_.addId("video",e.data.id_video),window.xvideos.player.canComment=function(){return!(!V||"function"!=typeof V.canComment)&&V.canComment()},window.xvideos.player.openDownload=function(){U.open("tabDownload");var e=$("#v-actions .tabs");e&&e.length&&$("html, body").animate({scrollTop:Math.round(e.offset().top)-12},250)},!e.dyn.is_premium&&e.dyn.slcams&&window.xv.sda.adblocked.called&&(g.getCurrentLiveCamsInfos("ntv"),"undefined"!=typeof e.data.slcamscat&&0===$(".xv-cams-block.footer").length&&g.getCurrentLiveCamsInfos("foot"))},addSponsor:function(){if(e.data.sponsors&&e.data.sponsors.length&&!document.getElementById("full-video-link-btn")){var t=e.data.sponsors.length,i=e.data.sponsors[0],s=i.s;!s&&t>1?i=n.randomFromArray(e.data.sponsors):s&&e.dyn.isPixAllowed&&!e.dyn.premium&&(s=!1,i={u:e.dyn.pixPremiumUrl,n:"XVideos RED"});var o,a=$("#video-tabs").first();o=s?h.getSheerSponsorLink(i,"7f7551123da19186"):this.getRegularSponsorLink(i),o.insertAfter(a),$("#related-videos").removeClass("is-loading-sponsor");var r=function(){var e=$("#video-sponsor-links");if(e.hasClass("expanded"))return!1;var t=e.children(".channel-desc").first();t.length&&(t.offset().top+t.outerHeight()>e.offset().top+e.outerHeight()?e.addClass("too-small"):e.removeClass("too-small"))};$("#show-channel-desc, #video-sponsor-links .channel-desc").on("click",function(e){e.preventDefault(),$(this).parent().addClass("expanded")}),$(window).on("resize",r),r()}},getRegularSponsorLink:function(e){return $(i.render(w,{more_at:a.__("video.sponsors.more_at"),sponsor:e,show_more:a.__("misc.show_more"),show_less:a.__("misc.show_less")}))}},(new S).init()}))}),define("text!skins/default/profile/search_box/search_box_form.mustache",[],function(){return'<div class="search-box">\n\t<p class="search-box__title"><strong>{{{ search }}}</strong></p>\n\t<form class="search-box__form" autocomplete="off">\n\t\t<input class="search-box__input" placeholder="{{ placeholder }}">\n\t\t<button class="search-box__reset is-hidden" type="button">\n\t\t\t<span class="icon-f icf-close-thin"></span>\n\t\t</button>\n\t</form>\n</div>'}),define("skins/default/profile/search_box/search_box",["config/main","lib/tools","static/utils","mustache","lib/i18n!front","text!skins/default/profile/search_box/search_box_form.mustache"],function(e,t,i,n,s,o){var a=function(e,t,i){this.$container=null,this.$elt=null,this.$input=null,this.$reset=null,this.$list=null,this.sType=void 0!==e&&"string"==typeof e&&e.length>0?e:null,this.sKeySearch=void 0!==t&&"string"==typeof t&&t.length>0?t:null,this.sKeyPlaceholder=void 0!==i&&"string"==typeof i&&i.length>0?i:null,this.sClass=null,this.iNbItems=null,this.iHeightListDyn=null,this.iCurrentFocus=null,this.bIsInit=!1};a.prototype={getSearchHeight:function(){var e=this.$elt.attr("data-height");if(void 0!==e)return parseInt(e);var t=Math.round(this.$elt.outerHeight());return this.$elt.attr("data-height",t),t},setSearch:function(t){if(!this.bIsInit){this.$container=t;var i={search:"",placeholder:""};this.sKeySearch&&this.sKeyPlaceholder?(i.search=s.__(this.sKeySearch),i.placeholder=s.__(this.sKeyPlaceholder,{"%nb%":"geo"===this.sType?Object.keys(e.dyn.av_menu_countries).length.toString():""})):this.sKeySearch&&(i.search=s.__(this.sKeySearch)),this.$elt=$(n.render(o,i)),this.$elt.appendTo(this.$container),this.sClass=this.$elt.prop("class"),this.$input=this.$elt.find("input"),e.dyn.is_mobile&&(this.iHeightWindow=$(window).height(),this.$input.on("focus",this,r)),this.$input.on("input",this,l),this.$input.on("keydown",this,d),this.$input.on("keyup",this,u),this.$reset=this.$elt.find("."+this.sClass+"__reset"),this.$reset.on("click",this,c),this.bIsInit=!0}},unsetSearch:function(){this.bIsInit&&(e.dyn.is_mobile&&(this.$input.off("focus"),$(window).off("resize")),this.$input.off("input keydown keyup"),this.$input.val(""),this.$reset.off("click"),this.$list=null,this.$elt.remove(),this.setListState(this.$input.val()),this.bIsInit=!1)},setListState:function(t){var i=this.$container.children(),n=this;""===t&&(t!==this.$input.val()&&this.$input.val(t),this.closeAllLists()),i.each(function(){var i=$(this),s="is-hidden";if(i.prop("class")!==n.sClass)if(""!==t){if(!i.hasClass(s)){i.addClass(s),n.$reset.removeClass(s);var o;o=e.dyn.is_mobile?null!==n.iHeightListDyn?n.iHeightListDyn:Math.round($(window).height()/3-n.getSearchHeight()-10):Math.round($(window).height()-n.$elt.offset().top-n.getSearchHeight()-10),null!==n.$list&&n.$list.css({maxHeight:o,overflowY:"auto"})}}else i.hasClass(s)&&(i.removeClass(s),n.$reset.addClass(s),null!==n.$list&&n.$list.css({maxHeight:"inherit",overflowY:"initial"}))})},closeAllLists:function(){$("."+this.sClass+"__item").remove()},setActiveItem:function(){var e=this.$list.find("."+this.sClass+"__item");e.removeClass("is-active"),this.iCurrentFocus>-1&&e.eq(this.iCurrentFocus).addClass("is-active")},onFocusMobile:function(){var e=this,i=null,n=!1,s=function(){n||t.scrollTo(e.$elt,0,0),n=!0,e.iHeightListDyn=Math.round(e.iHeightWindow-(e.iHeightWindow-$(window).height())-e.getSearchHeight()-20)};this.$reset.removeClass("is-hidden"),$(window).on("resize",function(){null!==i?clearTimeout(i):s(),i=setTimeout(function(){i=null,s()},100)})},onInput:function(e){},onKeyDown:function(e){switch(e.keyCode){case 38:e.preventDefault(),this.iCurrentFocus>=0&&(this.iCurrentFocus--,this.setActiveItem());break;case 40:e.preventDefault(),this.iCurrentFocus<this.iNbItems-1&&(this.iCurrentFocus++,this.setActiveItem());break;case 13:e.preventDefault(),this.iCurrentFocus>-1&&(document.location.href=this.$list.find("."+this.sClass+"__item > a").eq(this.iCurrentFocus).prop("href"))}},onKeyUp:function(e){8!==e.keyCode&&46!==e.keyCode&&27!==e.keyCode||27!==e.keyCode&&(8!==e.keyCode&&46!==e.keyCode||this.$input.val()!==undefined&&0!==this.$input.val().length)||this.setListState("")},onClickReset:function(i){$(i.currentTarget).addClass("is-hidden"),this.setListState(""),e.dyn.is_mobile&&t.scrollTo("body",0,0)}};var r=function(e){e.data.onFocusMobile(e)},l=function(e){e.data.onInput(e)},d=function(e){e.data.onKeyDown(e)},u=function(e){e.data.onKeyUp(e)},c=function(e){e.data.onClickReset(e)};return a}),define("text!skins/default/profile/search_box/geo/search_box_item_geo.mustache",[],function(){return'<li class="{{ class_name }} {{ class_name }}--{{ country_code }}">\n\t<a href="{{ href_country }}">\n\t\t<span class="flag-small flag-{{ country_code }}"></span>\n\t\t<strong>{{ strong_name }}</strong>{{ rest_name }}\n\t</a>\n</li>'}),define("skins/default/profile/search_box/geo/search_box_geo",["config/main","lib/tools","static/utils","mustache","lib/i18n!front","skins/common/geo_switch/geo_switch","skins/default/profile/search_box/search_box","text!skins/default/profile/search_box/geo/search_box_item_geo.mustache"],function(e,t,i,n,s,o,a,r){var l=function(e,t,i){a.apply(this,arguments),this.oCountries=null,this.oCountriesAv={},this.initGeo()};return l.prototype=new a,l.prototype.initGeo=function(){if("undefined"!=typeof e.dyn.av_menu_countries&&"object"==typeof e.dyn.av_menu_countries){var t=this,n=function(){for(var n in e.dyn.av_menu_countries)t.oCountriesAv[n]={name:i.unescape(t.oCountries.countries[n]),href:e.dyn.av_menu_countries[n]}};if(this.oCountries=o.getCountriesStored(),this.oCountries)n();else{var t=this;o.init(function(){t.oCountries=o.getCountriesStored(),n()})}}},l.prototype.onInput=function(o){this.closeAllLists();var a=o.currentTarget.value;if(a){e.dyn.is_mobile&&t.scrollTo(this.$container,0,0),a=i.accentsTidy(a);var l=this,d={US:["usa","theunitedstatesofamerica"]},u=function(t,i){$(n.render(r,{class_name:l.sClass+"__item",country_code:t.toLowerCase(),href_country:e.dyn.index_country_url.replace("%country_token%",l.oCountriesAv[t].href),strong_name:i?l.oCountriesAv[t].name.substring(0,a.length):l.oCountriesAv[t].name,rest_name:i?l.oCountriesAv[t].name.substring(a.length):""})).appendTo(l.$list),l.iNbItems=l.$list.find("."+l.sClass+"__item").length};this.iNbItems=0;var c=[];null===this.$list&&(this.$list=$('<ul class="'+this.sClass+'__list"></ul>'),this.$list.insertAfter(this.$input));for(var f in this.oCountriesAv)a.toUpperCase()===i.accentsTidy(this.oCountriesAv[f].name).substring(0,a.length).toUpperCase()&&(u(f,!0),c.push(f));if(a.length>0&&this.iNbItems<6)for(var h in d)if("object"==typeof d[h]&&d[h].length>0&&-1===c.indexOf(h)){var p=d[h],_=i.accentsTidy(a).toUpperCase().replace(/\s/g,"");for(var g in p)if(-1!==i.accentsTidy(p[g]).toUpperCase().replace(/\s/g,"").indexOf(_)){u(h,!1),c.push(h);break}}c.length||$('<li class="'+this.sClass+"__item "+this.sClass+'__item--not-found"><strong><span class="icon-f icf-warning"></span> '+s.__("not_found")+"</strong></li>").appendTo(this.$list),this.setListState(a)}},l}),define("text!skins/default/profile/search_box/creator/search_box_item_creator.mustache",[],function(){return'<li class="{{ class_name }}">\n\t<a href="/profiles/{{{ href_profile }}}">\n\t\t{{ name_start }}<strong>{{ name_strong }}</strong>{{ name_end }}\n\t</a>\n</li>'}),define("skins/default/profile/search_box/creator/search_box_creator",["config/main","lib/tools","mustache","lib/i18n!front","skins/default/profile/search_box/search_box","text!skins/default/profile/search_box/creator/search_box_item_creator.mustache"],function(e,t,i,n,s,o){var a,r,l=["keywords","pornstar","channel"];-1!==e.data.action.indexOf("models")&&(a=l[1],r="search_profiles"),-1!==e.data.action.indexOf("channels")&&(a=l[2],r="search_channels");var d=function(e,t,i){t=""===t||null===t?r:t,s.apply(this,[e,t,i]),this.aTypes=l,this.sTypeCurrent=a,this.sLastSearch=null,this.oTimeout=null,this.iDelay=250};return d.prototype=new s,d.prototype.onInput=function(s){this.closeAllLists();var a=s.currentTarget.value.trim();if(a){e.dyn.is_mobile&&t.scrollTo(this.$container,0,0);var r="/search-suggest",l=e.dyn.user_main_cat||e.dyn.pagefilter||!1;!l||"gay"!==l&&"shemale"!==l||(r+="/"+l);var d=this,u=function(e){for(var t=0;t<e.length;t++){var n=e[t].N.toUpperCase().indexOf(a.toUpperCase());-1!==n&&($(i.render(o,{class_name:d.sClass+"__item",href_profile:e[t].F,name_start:e[t].N.substring(0,n),name_strong:e[t].N.substring(n,n+a.length),name_end:e[t].N.substring(n+a.length,e[t].N.length)})).appendTo(d.$list),d.iNbItems=d.$list.find("."+d.sClass+"__item").length)}},c=function(t){d.$input.val()!==undefined&&0!==d.$input.val().length&&$.getJSON(r+"/"+encodeURIComponent(t),function(i){if(i=d.updateData(i,t),0===i[d.sTypeCurrent].length)return void $('<li class="'+d.sClass+"__item "+d.sClass+'__item--not-found"><strong><span class="icon-f icf-warning"></span> '+n.__("not_found")+"</strong></li>").appendTo(d.$list);e.dyn.autoCompReg||i.BLACKLISTED||u(i[d.sTypeCurrent]),d.sLastSearch===t&&u(i[d.sTypeCurrent])})};null===this.$list&&(this.$list=$('<ul class="'+this.sClass+'__list"></ul>'),this.$list.insertAfter(this.$input)),null!==this.oTimeout?clearTimeout(this.oTimeout):c(a),this.oTimeout=setTimeout(function(){this.oTimeout=null,c(a)},this.iDelay),this.setListState(a)}},d.prototype.updateData=function(e,t,i){if(e&&e.result){var n=e.data;"object"!=typeof n.keywords&&(n.keywords=[]),"object"!=typeof n.pornstar&&(n.pornstar=[]),"object"!=typeof n.channel&&(n.channel=[]);for(var s in this.aTypes){var o=this.aTypes[s];if("keywords"!==o)for(var a in n[o]){var r=n[o][a];"https:"===window.location.protocol&&(n[o][a].P=r.P.replace("http://","https://")),"number"==typeof r.M?(n[o][a].highlight=!0,n[o][a].t1=r.N.toString().substring(0,r.M),n[o][a].t2=r.N.toString().substring(r.M,r.M+r.L),n[o][a].t3=r.N.toString().substring(r.M+r.L)):n[o][a].highlight=!1}}for(var a=0;a<n.keywords.length;a++)for(;"object"==typeof n.keywords[a]&&"undefined"!=typeof n.keywords[a].R&&parseInt(n.keywords[a].R)<1;)n.keywords.splice(a,1);for(var a in n.keywords){var r=n.keywords[a],l=r.N.toString().toLowerCase().indexOf(t.toLowerCase());if(-1===l)n.keywords[a].highlight=!1;else if(n.keywords[a].highlight=!0,n.keywords[a].t1=r.N.toString().substring(0,l),n.keywords[a].t2=r.N.toString().substring(l,l+t.length),n.keywords[a].t3=r.N.toString().substring(l+t.length),void 0!==i){delete n.keywords[a].R;var d=n.keywords[a].N.toString().toLowerCase().split(" "),u=[];for(var c in i){var f=d.indexOf(i[c]);-1===f&&u.push(i[c])}var h=u.join(" ");n.keywords[a].N=h+" "+n.keywords[a].N,n.keywords[a].t1=h+" "+n.keywords[a].t1}}for(var a=0;a<n.pornstar.length;a++)n.pornstar[a].model=0===n.pornstar[a].R||n.pornstar[a].R>1e3;return n}},d}),define("skins/default/form/region_select",["lib/helpers/inline_loader"],function(e){var t={},i=function(e){var t=[];for(var i in e)t.push({code:i,name:e[i]});return t.sort(function(e,t){return e.name>t.name?1:-1}),t},n=function(e,t){var i=$(e);if(this.region=$(t),0!==i.length&&0!==this.region.length){this.loader=null,this.error=null;var n=this;i.on("change",function(){n.on_change($.trim($(this).val()))}),i.val().length>0&&this.region.children().length<2&&i.trigger("change")}};return n.prototype={on_change:function(e){if(this.region.empty().append('<option value=""></option>'),!e)return void this.set_regions({});if("undefined"!=typeof t[e])return void this.set_regions(t[e]);this.show_loader();var n=this;$.getJSON("/account/getregions/",{country:e},function(s){if(!s.result)return void n.set_error(s.message);var o=i(s.regions);t[e]=o,n.set_regions(o)}).error(function(){n.set_error("An error occured!")}).complete(function(){n.hide_loader()})},show_loader:function(){if(!this.loader)return void(this.loader=e.get().getNode().appendTo(this.region.parent().prev()));this.loader.show()},hide_loader:function(){this.loader.hide()},set_regions:function(e){this.region.nextAll(".help-block.text-danger").remove();for(var t in e)this.region.append('<option value="'+e[t].code+'">'+e[t].name+"</option>");this.region.prop("disabled",0===e.length)},set_error:function(e){this.region.prop("disabled",!0),this.error||(this.error=$('<span class="help-block text-danger"></span>').insertAfter(this.region)),this.error.show().html(e)},hide_error:function(){this.error&&this.error.hide()}},n}),define("skins/default/form/range_select",[],function(){var e=function(e){if(this.min=$("#"+e+"_min"),this.max=$("#"+e+"_max"),0!==this.min.length&&0!==this.max.length){this.error=null;var t=this;this.min.on("change",function(){t.on_change()}),this.max.on("change",function(){t.on_change()}),this.min.trigger("change")}};return e.prototype={on_change:function(){this.hide_error();var e=parseInt(this.min.val()),t=parseInt(this.max.val());0!==e&&0!==t&&(e<=t||this.set_error("Right side must be greater than left side"))},set_error:function(e){this.error||(this.error=$('<span class="help-block text-danger"></span>').insertAfter(this.max)),this.error.show().html(e)},hide_error:function(){this.error&&this.error.hide()}},e}),define("skins/default/profile/listing_common",["config/main","lib/tools","static/utils","mustache","lib/i18n!front","lib/helpers/popup","skins/default/profile/search_box/geo/search_box_geo","skins/default/profile/search_box/creator/search_box_creator","skins/default/header/header","lib/helpers/thumbs_rotator"],function(e,t,i,n,s,o,a,r){if($(".btn-geo-links").length&&"undefined"!=typeof e.dyn.av_menu_countries&&"object"==typeof e.dyn.av_menu_countries)var l=new a("geo","search_country","nb_countries");if($(".btn-profile-links").length)var d=new r("creator",null,"search");$(".btn-profiles-date-links").each(function(){var e=$(this),t=e.offset().left<$(window).outerWidth()/2,i=e.nextAll(".profiles-date-links"),n=new o(e,i,{popup_class:"x-profiles-date-links-popup",autoclose_on_same_level:"profile_listing_dropdowns",position:{v:"below",h:t?"left":"right"}});n.onOpen=function(){if(i.removeClass("hidden"),e.hasClass("btn-profile-links")&&void 0!==d){var t=$(".profiles-date-links.profile-links");d.setSearch(t.closest(".x-popup-content")),t.css({maxHeight:Math.round($(window).height()-t.offset().top-d.getSearchHeight()-10),overflowY:"auto"})}if(e.hasClass("btn-geo-links")&&void 0!==l){var n=$(".profiles-date-links.geo-links");l.setSearch(n.closest(".x-popup-content")),n.css({maxHeight:Math.round($(window).height()-n.offset().top-l.getSearchHeight()-10),overflowY:"auto"})}},n.onClose=function(){e.hasClass("btn-profile-links")&&void 0!==d&&(d.unsetSearch(),$(".profiles-date-links.profile-links").css({maxHeight:"inherit",overflowY:"initial"})),e.hasClass("btn-geo-links")&&void 0!==l&&(l.unsetSearch(),$(".profiles-date-links.geo-links").css({maxHeight:"inherit",overflowY:"initial"}))}}),document.getElementById("profile-search-form")&&require(["skins/default/form/region_select","skins/default/form/range_select"],function(e,t){new e("#country_select","#region_select"),new t("age_range-select"),$("#profile-search-filters-summary").find(".btn,.value").on("click",function(){$("#profile-search-form").toggleClass("expanded contracted")})}),"object"==typeof e.dyn.subs_users&&require(["skins/default/profile/subscribe/btns_controler"],function(t){var i=[];for(var n in e.dyn.subs_users)e.dyn.subs_users.hasOwnProperty(n)&&i.push({user_id:e.dyn.subs_users[n].id,user_name:n,nb_subs:e.dyn.subs_users[n].subs_s});i.length>0&&new t({uploaders:i,elts_order:{sub_icon:4,sub_text:5},texts:{is_sub:s.__("profile.subscribed"),sub:s.__("subscriptions.subs_short")}})})}),define("skins/default/xvideos_channels",["./profile/listing_common"],function(){}),define("skins/default/xvideos_channels_premium",["./profile/listing_common"],function(){}),define("skins/default/xvideos_models",["./profile/listing_common"],function(){}),define("skins/default/xvideos_profiles",["./profile/listing_common"],function(){function e(){$(".thumb-block-profile").each(function(){var e=$(this),t=e.find(".profile-aboutme"),i=t.find("p"),n=t.height(),s=i.height();i.length&&(s<n/2?t.addClass("is-oneline"):n<s&&t.addClass("is-close"))})}function t(){new Date-i<s?setTimeout(t,s):(n=!1,o=$("body").width(),e())}var i,n=!1,s=500,o=$("body").width();e(),$(".thumb-block-profile").find(".show-more").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".profile-aboutme"),n=i.find(".profile-aboutme-content"),s=$(".profile-aboutme.is-open");i.hasClass("is-close")?(s.length&&s.each(function(){$(this).addClass("is-close").removeClass("is-open").find("p").scrollTop(0),$(this).find(".show-more").html("+")}),i.addClass("is-open").removeClass("is-close"),n.css({maxHeight:i.parents(".thumb-block-profile").height()}),t.html("-")):(i.addClass("is-close").removeClass("is-open").find("p").scrollTop(0),t.html("+"))}),$(window).resize(function(){i=new Date,!1===n&&Math.abs(o-$("body").width())>50&&(n=!0,setTimeout(t,s),$(".thumb-block-profile").find(".profile-aboutme").removeClass("is-oneline is-close is-open"))})}),define("skins/default/form/unit_select",["lib/converter"],function(e){var t=function(e,t){this.options=$(e).children(),this.val_unit=t};return t.prototype={convert:function(t,i){var n=this;this.options.each(function(){var s=$(this),o=parseFloat(s.val())
;0!==o&&(t!==n.val_unit&&(o=e.convert(o,n.val_unit,t,0,i)),s.text(o+" "+t))})}},t}),define("skins/default/xvideos_profiles_search",["config/main","./profile/listing_common"],function(e){$("#profile-search-advanced").on("click",function(e){e.preventDefault(),$("#profile-search-form").removeClass("display-compact display-create-account display-create-profile").addClass("display-advanced"),$(this).hide()});var t=$("#switch-search-body-unit");t.length>0&&require(["skins/default/form/unit_select"],function(i){var n=e.data.body_unit,s=new i("#height_range-select_min,#height_range-select_max","cm"),o=new i("#weight_range-select_min,#weight_range-select_max","kg");t.on("click",function(i){i.preventDefault();var a="EU"===n?"US":"EU";t.html(e.data.body_unit_switch[a]),$("#search-body-unit").val(a),s.convert("US"===a?"in":"cm",1),o.convert("US"===a?"lbs":"kg",0),n=a})})}),define("text!skins/form/show_pass/input_contener.mustache",[],function(){return'<div class="form-control visible-password">\n\t<button class="btn btn-clear" type="button">\n\t\t<span class="icon-f icf-eye" title="{{see_password}}"></span>\n\t\t<span class="icon-f icf-eye-blocked" title="{{hide_password}}"></span>\n\t</button>\n</div>'}),define("skins/form/show_pass",["mustache","lib/i18n!front","text!skins/form/show_pass/input_contener.mustache"],function(e,t,i){var n=function(n){this.inp=$(n),this.cont=$(e.render(i,{see_password:t.__("form.see_password"),hide_password:t.__("form.hide_password")})),this.cont.insertAfter(this.inp),this.cont.append(this.inp);var s=this;this.toggle_btn=this.cont.children("button"),this.toggle_btn.on("click",function(e){e.preventDefault(),s.toggle_visible()})};n.prototype={inp:!1,cont:!1,visible:!1,toggle_btn:!1,is_visible:function(){return"password"!==this.inp.prop("type")},update_visible:function(){this.inp.prop("type",this.visible?"text":"password"),this.cont.toggleClass("visible",this.visible)},toggle_visible:function(e){this.visible="boolean"==typeof e?e:!this.is_visible(),this.update_visible();var t=this.inp.val();this.inp.focus().val("").val(t)}};var s=function(){};return s.prototype={passwords:[],"new":function(e){this.is_initiated(e)||"password"!==$(e).prop("type")||this.passwords.push(new n(e))},is_initiated:function(e){for(var t in this.passwords)if(this.passwords[t].inp[0]==$(e)[0])return!0;return!1}},new s}),define("skins/form/validator/agreement",["lib/tools","static/dom","lib/converter","./base","./focus","lib/helpers/popup"],function(e,t,i,n,s,o){var a=[],r="rtl"===$("html").prop("dir"),l=function(e,t){n.apply(this,[e,t]),this.id=t.elt_id,this.checkbox=$("#"+this.id),this.checkbox_err,this.bIsInToggle=this.checkbox.length&&this.checkbox.parent().hasClass("checkbox toggle"),this.popup,this.popup_timer;var i=this;this.checkbox.on("change click",function(){i.validate()})};l.prototype=new n,l.prototype.refresh=function(){this.positionError()},l.prototype.focus=function(){s.focus(this.checkbox),this.showError()},l.prototype.isValid=function(){return this.checkbox.is(":checked")},l.prototype.validate=function(){if(!this.isValid())return this.showError(),void(this.errorChanged&&this.errorChanged(!0,this));this.hideTooltip(),this.errorChanged&&this.errorChanged(!1,this)},l.prototype.getError=function(){return this.error_txt=!this.isValid()&&this.getMessage("invalid","Required"),this.error_txt},l.prototype.showTooltip=function(e){if(this.popup)e&&this.popup.setContent(e);else{var t=this.bIsInToggle&&this.checkbox.parent().length&&this.checkbox.parent().children("label").length,i=t?this.checkbox.parent().children("label"):this.checkbox_err;this.popup=new o(i,e,{relative_to:this.checkbox.parent(),trigger:!1,autoclose:!1,popup_class:"form-popup-error"+(t?" no-arrow":""),position:{v:t?"above":"below",h:r?"right":"left"},offset:{below:0,above:0,left:r?0:-3,right:r?-3:0},max_width:500})}this.popup.open(),this.startTimer(!0)},l.prototype.showError=function(){this.checkbox_err?this.bIsInToggle||this.checkbox_err.show():(this.checkbox.parent().css("position","relative"),this.checkbox_err=$('<div class="checkbox-error-box"></div>').insertAfter(this.checkbox),a.push(this)),this.checkbox.addClass("validator-error"),this.positionError(),this.error_txt=this.getMessage("invalid","Required"),this.showTooltip("<span>"+this.error_txt+"</span>")},l.prototype.hideTooltip=function(){this.checkbox.removeClass("validator-error"),this.checkbox_err&&this.checkbox_err.hide(),this.popup&&this.popup.close()},l.prototype.positionError=function(){if(this.checkbox_err){var e=this.checkbox.position();this.bIsInToggle||this.checkbox_err.css({width:this.checkbox.outerWidth(),height:this.checkbox.outerHeight(),top:e.top+i.trimPx(this.checkbox.css("marginTop"))+"px",left:e.left+i.trimPx(this.checkbox.css("marginLeft"))+"px"})}},l.prototype.startTimer=function(e){if(this.popup_timer){if(!e)return;window.clearTimeout(this.popup_timer)}var t=this;this.popup_timer=window.setTimeout(function(){t.popup.close()},3e3)},l.prototype.stopTimer=function(){this.popup_timer&&(window.clearTimeout(this.popup_timer),this.popup_timer=null)};var d,u=function(){d&&(d=null);for(var e in a)a[e].positionError()};return $(window).on("resize",function(){d||(d=window.setTimeout(u,250))}),l}),window="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},document=window.document||{},function(e,t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define("libs/emojionearea.min",["jquery"],e):e(t.jQuery)}(function(e){"use strict";function t(e){L?e():O.push(e)}function i(t,i,n){var s=!0,o=1;if(i){i=i.toLowerCase();do{var a=1==o?"@"+i:i;F[t.id][a]&&F[t.id][a].length&&e.each(F[t.id][a],function(e,i){return s=!1!==i.apply(t,n||[])})}while(s&&o--)}return s}function n(t,i,n,s){s=s||function(t,i){return e(i.currentTarget)},e.each(n,function(o,a){o=e.isArray(n)?a:o,(x[t.id][a]||(x[t.id][a]=[])).push([i,o,s])})}function s(e,t,i){var n,s=L.imageType;n="svg"==s?L.imagePathSVG:L.imagePathPNG;var o="";i&&(o=i.substr(1,i.length-2).replace(/_/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));var a="";return t.uc_base&&V>4?(a=t.uc_base,t=t.uc_output.toUpperCase()):a=t,e.replace("{name}",i||"").replace("{friendlyName}",o).replace("{img}",n+(2>V?a.toUpperCase():a)+"."+s).replace("{uni}",t).replace("{alt}",L.convert(t))}function o(e,t,i){return e.replace(/:?\+?[\w_\-]+:?/g,function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var n=L.emojioneList[e];return n?V>4?s(t,n,e):(V>3&&(n=n.unicode),s(t,n[n.length-1],e)):i?"":e})}function a(e){var t,i;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){i=t.getRangeAt(0),i.deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var s,o,a=document.createDocumentFragment();s=n.firstChild;)o=a.appendChild(s);i.insertNode(a),o&&(i=i.cloneRange(),i.setStartAfter(o),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function r(){return window.emojioneVersion||"3.1.2"}function l(e){return"object"==typeof e}function d(e){var t;return e.cacheBustParam?(t=e.cacheBustParam,l(e.jsEscapeMap)?"?v=1.2.4"===t?"2.0.0":"?v=2.0.1"===t?"2.1.0":"?v=2.1.1"===t?"2.1.1":"?v=2.1.2"===t?"2.1.2":"?v=2.1.3"===t?"2.1.3":"?v=2.1.4"===t?"2.1.4":"2.2.7":"1.5.2"):e.emojiVersion}function u(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;case"3.1.0":case"3.1.1":case"3.1.2":case"3.1":default:return 6}}function c(){if(e.fn.emojioneArea&&e.fn.emojioneArea.defaults)return e.fn.emojioneArea.defaults;var t={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!0,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:"SEARCH",container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:"Use the TAB key to insert emoji faster",tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},i=u(L?d(L):r());return t.filters=i>4?{tones:{title:"Diversity",emoji:"open_hands raised_hands clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear nose baby boy girl man woman blond-haired_woman blond_haired_person blond-haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban person_wearing_turban man_wearing_turban woman_police_officer police_officer man_police_officer woman_construction_worker construction_worker man_construction_worker woman_guard guard man_guard woman_detective detective man_detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman woman_bowing person_bowing man_bowing person_tipping_hand man_tipping_hand woman_tipping_hand person_gesturing_no man_gesturing_no woman_gesturing_no person_gesturing_ok man_gesturing_ok woman_gesturing_ok person_raising_hand man_raising_hand woman_raising_hand woman_facepalming man_facepalming person_facepalming woman_shrugging man_shrugging person_shrugging person_pouting man_pouting woman_pouting person_frowning man_frowning woman_frowning person_getting_haircut man_getting_haircut woman_getting_haircut person_getting_massage man_getting_face_massage woman_getting_face_massage levitate dancer man_dancing woman_walking person_walking man_walking woman_running person_running man_running adult child older_adult bearded_person woman_with_headscarf mage fairy vampire merperson elf love_you_gesture palms_up_together woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf snowboarder woman_lifting_weights person_lifting_weights man_lifting_weights woman_cartwheeling man_cartwheeling person_doing_cartwheel woman_bouncing_ball person_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball person_playing_handball woman_golfing person_golfing man_golfing woman_surfing person_surfing man_surfing woman_swimming person_swimming man_swimming woman_playing_water_polo man_playing_water_polo person_playing_water_polo woman_rowing_boat person_rowing_boat man_rowing_boat horse_racing woman_biking person_biking man_biking woman_mountain_biking person_mountain_biking man_mountain_biking woman_juggling man_juggling person_juggling breast_feeding person_in_steamy_room person_climbing person_in_lotus_position woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position bath sleeping_accommodation"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses clown cowboy smirk unamused disappointed pensive worried confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking lying_face grimacing zipper_mouth nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_person older_man older_woman man_with_chinese_cap woman_wearing_turban person_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman woman_bowing person_bowing person_tipping_hand man_tipping_hand person_gesturing_no man_gesturing_no person_gesturing_ok man_gesturing_ok person_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging person_pouting man_pouting person_frowning man_frowning person_getting_haircut man_getting_haircut person_getting_massage man_getting_face_massage levitate dancer man_dancing people_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking person_walking woman_running person_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses closed_umbrella umbrella2 face_with_raised_eyebrow star_struck crazy_face shushing_face face_with_symbols_over_mouth face_with_hand_over_mouth face_vomiting exploding_head face_with_monocle adult child older_adult bearded_person woman_with_headscarf brain billed_cap scarf gloves coat socks love_you_gesture palms_up_together woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella giraffe zebra hedgehog sauropod t_rex cricket"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder woman_lifting_weights person_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling man_cartwheeling woman_bouncing_ball person_bouncing_ball woman_playing_handball man_playing_handball woman_golfing person_golfing woman_surfing person_surfing woman_swimming person_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat person_rowing_boat horse_racing woman_biking person_biking woman_mountain_biking person_mountain_biking running_shirt_with_sash medal military_medal first_place second_place third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling video_game slot_machine sled breast_feeding curling_stone woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock orange_heart"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond white_square_button black_square_button black_small_square white_small_square black_medium_small_square white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:"Flags",emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf united_nations england scotland wales"}}:{tones:{title:"Diversity",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},animals_nature:{icon:"hamster",title:"Animals & Nature",
emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne sake tea coffee baby_bottle fork_and_knife fork_knife_plate"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin clapper video_game space_invader dart game_die slot_machine bowling"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain black_nib pencil pencil2 crayon paintbrush mag mag_right"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble"},flags:{icon:"flag_gb",title:"Flags",emoji:"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc "}},t}function f(t){var i=c();if(t&&t.filters){var n=i.filters;e.each(t.filters,function(t,i){return!l(i)||e.isEmptyObject(i)?void delete n[t]:void e.each(i,function(e,i){n[t][e]=i})}),t.filters=n}return e.extend({},i,t)}function h(e,t){return e.replace(R,function(e){var i=L[0===V?"jsecapeMap":"jsEscapeMap"];return void 0!==e&&e in i?s(t,i[e]):e})}function p(e,t){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>"),t.shortnames&&(e=L.shortnameToUnicode(e)),h(e,t.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function _(e,t){switch(e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(N,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),t.saveEmojisAs){case"image":e=h(e,t.emojiTemplate);break;case"shortname":e=L.toShort(e)}return e}function g(){var e=this,t=e.editor[0].offsetWidth-e.editor[0].clientWidth,i=parseInt(e.button.css("marginRight"));i!==t&&(e.button.css({marginRight:t}),e.floatingPicker&&e.picker.css({right:parseInt(e.picker.css("right"))-i+t}))}function m(){var t=this;if(!t.sprite&&t.lasyEmoji[0]){var i=t.picker.offset().top,n=i+t.picker.height()+20;t.lasyEmoji.each(function(){var t=e(this),s=t.offset().top;s>i&&n>s&&t.attr("src",t.data("src")).removeClass("lazy-emoji")}),t.lasyEmoji=t.lasyEmoji.filter(".lazy-emoji")}}function b(e,t){return(t?"":".")+A+(e?"-"+e:"")}function v(t){var i=e("<div/>",l(t)?t:{"class":b(t,!0)});return e.each(M.call(arguments).slice(1),function(t,n){e.isFunction(n)&&(n=n.call(i)),n&&e(n).appendTo(i)}),i}function y(){return localStorage.getItem("recent_emojis")||""}function D(t,i){var n=y();if(!t.recent||t.recent!==n||i){if(n.length){var s,a,r=t.scrollArea.is(".skinnable");r||(s=t.scrollArea.scrollTop(),i&&t.recentCategory.show(),a=t.recentCategory.is(":visible")?t.recentCategory.height():0);var l=o(n,t.emojiBtnTemplate,!0).split("|").join("");if(t.recentCategory.children(".emojibtn").remove(),e(l).insertAfter(t.recentCategory.children(".emojionearea-category-title")),t.recentCategory.children(".emojibtn").on("click",function(){t.trigger("emojibtn.click",e(this))}),t.recentFilter.show(),!r){t.recentCategory.show();var d=t.recentCategory.height();a!==d&&t.scrollArea.scrollTop(s+d-a)}}else t.recentFilter.hasClass("active")&&t.recentFilter.removeClass("active").next().addClass("active"),t.recentCategory.hide(),t.recentFilter.hide();t.recent=n}}function C(e,t){var i=y(),n=i.split("|"),s=n.indexOf(t);-1!==s&&n.splice(s,1),n.unshift(t),n.length>9&&n.pop(),localStorage.setItem("recent_emojis",n.join("|")),D(e)}function w(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(I){return!1}}function S(t,s,r){t.options=r=f(r),t.sprite=r.sprite&&3>V,t.inline=null===r.inline?s.is("INPUT"):r.inline,t.shortnames=r.shortnames,t.saveEmojisAs=r.saveEmojisAs,t.standalone=r.standalone,t.emojiTemplate='<img alt="{alt}" class="emojione'+(t.sprite?'-{uni}" src="'+$+'"/>':'emoji" src="{img}"/>'),t.emojiTemplateAlt=t.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',t.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+t.emojiTemplateAlt+"</i>",t.recentEmojis=r.recentEmojis&&w();var d=r.pickerPosition;t.floatingPicker="top"===d||"bottom"===d,t.source=s,(s.is(":disabled")||s.is(".disabled"))&&t.disable();var u,c,h,S,k,T,I,F,x,O,M=s.is("TEXTAREA")||s.is("INPUT")?"val":"text",R=v("tones",r.tones?function(){this.addClass(b("tones-"+r.tonesStyle,!0));for(var t=0;5>=t;t++)this.append(e("<i/>",{"class":"btn-tone btn-tone-"+t+(t?"":" active"),"data-skin":t,role:"button"}))}:null),B=v({"class":A+(t.standalone?" "+A+"-standalone ":" ")+(s.attr("class")||""),role:"application"},u=t.editor=v("editor").attr({contenteditable:!t.standalone,placeholder:r.placeholder||s.data("placeholder")||s.attr("placeholder")||"",tabindex:0}),c=t.button=v("button",v("button-open"),v("button-close")).attr("title",r.buttonTitle),h=t.picker=v("picker",v("wrapper",S=v("filters"),r.search?T=v("search-panel",v("search",r.search?function(){t.search=e("<input/>",{placeholder:r.searchPlaceholder||"",type:"text","class":"search"}),this.append(t.search)}:null),R):null,O=v("scroll-area",r.tones&&!r.search?v("tones-panel",R):null,I=v("emojis-list")))).addClass(b("picker-position-"+r.pickerPosition,!0)).addClass(b("filters-position-"+r.filtersPosition,!0)).addClass(b("search-position-"+r.searchPosition,!0)).addClass("hidden"));r.search&&T.addClass(b("with-search",!0)),t.searchSel=null,u.data(s.data()),e.each(r.attributes,function(e,t){u.attr(e,t)});var U=v("category-block").attr({"data-tone":0}).prependTo(I);if(e.each(r.filters,function(i,n){var s=0;if("recent"!==i||t.recentEmojis){if("tones"!==i)e("<i/>",{"class":b("filter",!0)+" "+b("filter-"+i,!0),"data-filter":i,title:n.title}).wrapInner(o(n.icon,t.emojiTemplateAlt)).appendTo(S);else{if(!r.tones)return;s=5}do{var a,l=n.emoji.replace(/[\s,;]+/g,"|");a=0===s?v("category").attr({name:i,"data-tone":s}).appendTo(U):v("category-block").attr({name:i,"data-tone":s}).appendTo(I),s>0&&(a.hide(),l=l.split("|").join("_tone"+s+"|")+"_tone"+s),"recent"===i&&(l=y()),l=o(l,t.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),a.html(l),e('<div class="emojionearea-category-title"/>').text(n.title).prependTo(a)}while(--s>0)}}),r.filters=null,t.sprite||(t.lasyEmoji=I.find(".lazy-emoji")),k=S.find(b("filter")),k.eq(0).addClass("active"),x=I.find(b("category-block")),F=I.find(b("category")),t.recentFilter=k.filter('[data-filter="recent"]'),t.recentCategory=F.filter("[name=recent]"),t.scrollArea=O,r.container?e(r.container).wrapInner(B):B.insertAfter(s),r.hideSource&&s.hide(),t.setText(s[M]()),s[M](t.getText()),g.apply(t),t.standalone&&!t.getText().length){var H=e(s).data("emoji-placeholder")||r.emojiPlaceholder;t.setText(H),u.addClass("has-placeholder")}n(t,I.find(".emojibtn"),{click:"emojibtn.click"}),n(t,window,{resize:"!resize"}),n(t,R.children(),{click:"tone.click"}),n(t,[h,c],{mousedown:"!mousedown"},u),n(t,c,{click:"button.click"}),n(t,u,{paste:"!paste"},u),n(t,u,["focus","blur"],function(){return!t.stayFocused&&u}),n(t,h,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),n(t,u,["mousedown","mouseup","click","keyup","keydown","keypress"]),n(t,h.find(".emojionearea-filter"),{click:"filter.click"}),n(t,s,{change:"source.change"}),r.search&&n(t,t.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"});var j=!1;if(O.on("scroll",function(){if(!j&&(m.call(t),O.is(":not(.skinnable)"))){var i=F.eq(0),n=O.offset().top;F.each(function(t,s){return!(e(s).offset().top-n>=10)&&void(i=e(s))});var s=k.filter('[data-filter="'+i.attr("name")+'"]');s[0]&&!s.is(".active")&&(k.removeClass("active"),s.addClass("active"))}}),t.on("@filter.click",function(e){var i=e.is(".active");if(O.is(".skinnable")){if(i)return;R.children().eq(0).click()}j=!0,i||(k.filter(".active").removeClass("active"),e.addClass("active"));var n=F.filter('[name="'+e.data("filter")+'"]').offset().top,s=O.scrollTop(),o=O.offset().top;O.stop().animate({scrollTop:n+s-o-2},200,"swing",function(){m.call(t),j=!1})}).on("@picker.show",function(){t.recentEmojis&&D(t),m.call(t)}).on("@tone.click",function(e){R.children().removeClass("active");var i=e.addClass("active").data("skin");i?(O.addClass("skinnable"),x.hide().filter("[data-tone="+i+"]").show(),k.removeClass("active")):(O.removeClass("skinnable"),x.hide().filter("[data-tone=0]").show(),k.eq(0).click()),m.call(t),r.search&&t.trigger("search.keypress")}).on("@button.click",function(e){e.is(".active")?t.hidePicker():(t.showPicker(),t.searchSel=null)}).on("@!paste",function(n,s){var o=function(s){var o="caret-"+(new Date).getTime(),r=p(s,t);a(r),a('<i id="'+o+'"></i>'),n.scrollTop(d);var l=e("#"+o),u=l.offset().top-n.offset().top,c=n.height();(d+u>=c||d>u)&&n.scrollTop(d+u-2*c/3),l.remove(),t.stayFocused=!1,g.apply(t),i(t,"paste",[n,s,r])};if(s.originalEvent.clipboardData){var r=s.originalEvent.clipboardData.getData("text/plain");return o(r),s.preventDefault?s.preventDefault():s.stop(),s.returnValue=!1,s.stopPropagation(),!1}t.stayFocused=!0,a("<span>"+N+"</span>");var l=E(n[0]),d=n.scrollTop(),u=e("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(e("BODY")).focus();window.setTimeout(function(){n.focus(),P(n[0],l);var e=_(u.html().replace(/\r\n|\n|\r/g,"<br>"),t);u.remove(),o(e)},200)}).on("@emojibtn.click",function(e){u.removeClass("has-placeholder"),null!==t.searchSel&&(u.focus(),P(u[0],t.searchSel),t.searchSel=null),t.standalone?(u.html(o(e.data("name"),t.emojiTemplate)),t.trigger("blur")):(E(u[0]),a(o(e.data("name"),t.emojiTemplate))),t.recentEmojis&&C(t,e.data("name")),t.trigger("search.keypress")}).on("@!resize @keyup @emojibtn.click",g).on("@!mousedown",function(i,n){return e(n.target).hasClass("search")?(t.stayFocused=!0,null===t.searchSel&&(t.searchSel=E(i[0]))):(B.is(".focused")||i.focus(),n.preventDefault()),!1}).on("@change",function(){var e=t.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");e.length&&!/^<br[^>]*>$/i.test(e)||t.editor.html(t.content=""),s[M](t.getText())}).on("@source.change",function(){t.setText(s[M]()),i("change")}).on("@focus",function(){B.addClass("focused")}).on("@blur",function(){B.removeClass("focused"),r.hidePickerOnBlur&&t.hidePicker();var e=t.editor.html();t.content!==e?(t.content=e,i(t,"change",[t.editor]),s.blur().trigger("change")):s.blur(),r.search&&(t.search.val(""),t.trigger("search.keypress",!0))}),r.search&&t.on("@search.focus",function(){t.stayFocused=!0,t.search.addClass("focused")}).on("@search.keypress",function(i){var n=h.find(".emojionearea-filter"),s=r.tones?R.find("i.active").data("skin"):0,o=t.search.val().replace(/ /g,"_").replace(/"/g,'\\"');o&&o.length?(t.recentFilter.hasClass("active")&&t.recentFilter.removeClass("active").next().addClass("active"),t.recentCategory.hide(),t.recentFilter.hide(),x.each(function(){var t=function(e,t){var i=e.find('.emojibtn[data-name*="'+o+'"]');if(0===i.length)e.data("tone")===t&&e.hide(),n.filter('[data-filter="'+e.attr("name")+'"]').hide();else{e.find('.emojibtn:not([data-name*="'+o+'"])').hide(),i.show(),e.data("tone")===t&&e.show(),n.filter('[data-filter="'+e.attr("name")+'"]').show()}},i=e(this);0===i.data("tone")?F.filter(':not([name="recent"])').each(function(){t(e(this),0)}):t(i,s)}),j?m.call(t):O.trigger("scroll")):(D(t,!0),x.filter('[data-tone="'+R.find("i.active").data("skin")+'"]:not([name="recent"])').show(),e(".emojibtn",x).show(),n.show(),i||m.call(t))}).on("@search.blur",function(){t.stayFocused=!1,t.search.removeClass("focused"),t.trigger("blur")}),r.shortcuts&&t.on("@keydown",function(e,i){i.ctrlKey||(9==i.which?(i.preventDefault(),c.click()):27==i.which&&(i.preventDefault(),c.is(".active")&&t.hidePicker()))}),l(r.events)&&!e.isEmptyObject(r.events)&&e.each(r.events,function(e,i){t.on(e.replace(/_/g,"."),i)}),r.autocomplete){var q=function(){var i={maxCount:r.textcomplete.maxCount,placement:r.textcomplete.placement};r.shortcuts&&(i.onKeydown=function(e,t){return e.ctrlKey||13!=e.which?void 0:t.KEY_ENTER});var n=e.map(L.emojioneList,function(e,t){return r.autocompleteTones?t:/_tone[12345]/.test(t)?null:t});n.sort(),u.textcomplete([{id:A,match:/\B(:[\-+\w]*)$/,search:function(t,i){i(e.map(n,function(e){return 0===e.indexOf(t)?e:null}))},template:function(e){return o(e,t.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return o(e,t.emojiTemplate)},cache:!0,index:1}],i),r.textcomplete.placement&&"static"==e(u.data("textComplete").option.appendTo).css("position")&&e(u.data("textComplete").option.appendTo).css("position","relative")},z=function(){if(t.disabled){var e=function(){t.off("enabled",e),q()};t.on("enabled",e)}else q()};e.fn.textcomplete?z():e.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:z})}t.inline&&(B.addClass(b("inline",!0)),t.on("@keydown",function(e,t){13==t.which&&t.preventDefault()})),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),t.isReady=!0,t.trigger("onLoad",u),t.trigger("ready",u)}function k(i){var n=r();if(i=f(i),!B.isLoading)if(!L||u(d(L))<2){B.isLoading=!0;var s;s=u(n)>5?B.defaultBase3+"npm/emojione@"+n:u(n)>4?B.defaultBase3+"emojione/"+n:B.defaultBase+"/"+n,e.ajax({url:s+"/lib/js/emojione.min.js",dataType:"script",cache:!0,success:function(){L=window.emojione,n=d(L),V=u(n);var t;for(V>4?(B.base=B.defaultBase3+"emojione/assets/"+n,t=B.base+"/sprites/emojione-sprite-"+L.emojiSize+".css"):(B.base=B.defaultBase+n+"/assets",t=B.base+"/sprites/emojione.sprites.css"),i.sprite&&(document.createStyleSheet?document.createStyleSheet(t):e("<link/>",{rel:"stylesheet",href:t}).appendTo("head"));O.length;)O.shift().call();B.isLoading=!1}})}else n=d(L),V=u(n),B.base=V>4?B.defaultBase3+"emojione/assets/"+n:B.defaultBase+n+"/assets";t(function(){var e="";i.useInternalCDN&&(V>4&&(e=L.emojiSize+"/"),L.imagePathPNG=B.base+"/png/"+e,L.imagePathSVG=B.base+"/svg/"+e,L.imagePathSVGSprites=B.base+"/sprites/emojione.sprites.svg",L.imageType=i.imageType),u(n)>4?(R=L.regUnicode,L.imageType=i.imageType||"png"):R=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+L.unicodeRegexp+")","gi")})}function T(t,n){n=n.replace(/^@/,"");var s=t.id;x[s][n]&&(e.each(x[s][n],function(s,o){e.each(e.isArray(o[0])?o[0]:[o[0]],function(s,a){e(a).on(o[1],function(){var s=M.call(arguments),a=e.isFunction(o[2])?o[2].apply(t,[n].concat(s)):o[2];a&&i(t,n,[a].concat(s))})})}),x[s][n]=null)}var E,P,I=0,F={},x={},L=window.emojione,O=[],$="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",M=[].slice,A="emojionearea",V=0,N="&#8203;";window.getSelection&&document.createRange?(E=function(e){var t=window.getSelection&&window.getSelection();return t&&t.rangeCount>0?t.getRangeAt(0):void 0},P=function(e,t){var i=document.createRange();i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),t=window.getSelection(),t.removeAllRanges(),t.addRange(i)}):document.selection&&document.body.createTextRange&&(E=function(e){return document.selection.createRange()},P=function(e,t){var i=document.body.createTextRange();i.moveToElementText(e),i.setStart(t.startContanier,t.startOffset),i.setEnd(t.endContainer,t.endOffset),i.select()});var R,B={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:!1},U=function(e,i){var n=this;k(i),F[n.id=++I]={},x[n.id]={},t(function(){S(n,e,i)})};U.prototype.on=function(t,i){if(t&&e.isFunction(i)){var n=this;e.each(t.toLowerCase().split(" "),function(e,t){T(n,t),(F[n.id][t]||(F[n.id][t]=[])).push(i)})}return this},U.prototype.off=function(t,i){if(t){var n=this.id;e.each(t.toLowerCase().replace(/_/g,".").split(" "),function(t,s){F[n][s]&&!/^@/.test(s)&&(i?e.each(F[n][s],function(e,t){t===i&&(F[n][s]=F[n][s].splice(e,1))}):F[n][s]=[])})}return this},U.prototype.trigger=function(){var e=M.call(arguments),t=[this].concat(e.slice(0,1));return t.push(e.slice(1)),i.apply(this,t)},U.prototype.setFocus=function(){var e=this;return t(function(){e.editor.focus()}),e},U.prototype.setText=function(e){var n=this;return t(function(){n.editor.html(p(e,n)),n.content=n.editor.html(),i(n,"change",[n.editor]),g.apply(n)}),n},U.prototype.getText=function(){return _(this.editor.html(),this)},U.prototype.showPicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.picker.removeClass("hidden"),e._sh_timer=window.setTimeout(function(){e.button.addClass("active")},50),i(e,"picker.show",[e.picker]),e},U.prototype.hidePicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.button.removeClass("active"),e._sh_timer=window.setTimeout(function(){e.picker.addClass("hidden")},500),i(e,"picker.hide",[e.picker]),e},U.prototype.enable=function(){var e=this,t=function(){e.disabled=!1,e.editor.prop("contenteditable",!0),e.button.show();var t=e[e.standalone?"button":"editor"];t.parent().removeClass("emojionearea-disable"),i(e,"enabled",[t])};return e.isReady?t():e.on("ready",t),e},U.prototype.disable=function(){var e=this;e.disabled=!0;var t=function(){e.editor.prop("contenteditable",!1),e.hidePicker(),e.button.hide();var t=e[e.standalone?"button":"editor"];t.parent().addClass("emojionearea-disable"),i(e,"disabled",[t])};return e.isReady?t():e.on("ready",t),e},e.fn.emojioneArea=function(t){return this.each(function(){return this.emojioneArea?this.emojioneArea:(e.data(this,"emojioneArea",this.emojioneArea=new U(e(this),t)),this.emojioneArea)})},e.fn.emojioneArea.defaults=c(),e.fn.emojioneAreaText=function(i){i=f(i);var n=this,s={shortnames:!i||"undefined"==typeof i.shortnames||i.shortnames,emojiTemplate:'<img alt="{alt}" class="emojione'+(i&&i.sprite&&3>V?'-{uni}" src="'+$:'emoji" src="{img}')+'"/>'};return k(i),t(function(){n.each(function(){var t=e(this);return t.hasClass("emojionearea-text")||t.addClass("emojionearea-text").html(p(t.is("TEXTAREA")||t.is("INPUT")?t.val():t.text(),s)),t})}),this}},window),define("skins/form/validator/string",["static/console","./input_base","skins/form/show_pass"],function(e,t,i){var n=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return n.prototype=new t,n.prototype._init=function(){var e=this;this.options.show_emojis&&this.show_emojis(),this.input.on("blur keyup input",function(){e.validate()}),this.options.show_char_count&&this.initCounter(),this.options.password_viewable&&i["new"](this.input),this.options.no_init_validate||this.validate()},n.prototype.doValidate=function(e){return this.counter&&(this.counter.removeClass("text-danger").children(".count").html(e.length),0===e.length?this.counter.addClass("empty"):this.counter.removeClass("empty")),this.options.required&&0===e.length?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("required","Required")),!1):this.options.min_length>0&&e.length<this.options.min_length&&(this.options.required||e.length>0)?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("min_length","Too short (%nb_chars% min)",{"%value%":'"'+this.strimwidth(e,20)+'"',"%nb_chars%":this.options.min_length})),!1):this.options.max_length>0&&e.length>this.options.max_length?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_length","Too long (%nb_chars% max)",{"%value%":'"'+this.strimwidth(e,20)+'"',"%nb_chars%":this.options.max_length})),!1):!(this.options.max_lines>0&&e.split("\n").length>this.options.max_lines)||(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_lines","Too many lines (max %nb_lines%).",{"%nb_lines%":this.options.max_lines})),!1)},n.prototype.counter=!1,n.prototype.initCounter=function(){var e=this.options.max_length>0&&this.options.max_length;this.counter=$("<span class='floating-count'><span class='count'></span>"+(e?"<span class='max'>/"+e+"</span>":"")+"</span>"),this.counter.insertAfter(this.input);var t=this.input.parent();t.hasClass("input-group")&&(t=t.parent()),t.addClass("has-floating-count")},n.prototype.show_emojis=function(){var t=this,i=$(t.input).is(":focus");require(["libs/emojione.min"],function(){require(["libs/emojionearea.min"],function(){var n=$('<div id="'+t.id+'_emoji"></div>');n.insertAfter(t.input);try{emojione.sprites=!0,emojione.ascii=!0,$(t.input).emojioneArea({container:n,hideSource:!0,useInternalCDN:!0,sprite:!0,autocomplete:!0,shortnames:!0,saveEmojisAs:"shortname",textcomplete:{maxCount:12},attributes:{spellcheck:!0,autocorrect:"on",autocomplete:"on"},events:{keyup:function(e,i){this.trigger("change",[e]),t.validate()},blur:function(e,i){this.trigger("change",[e]),t.validate()}}}),i&&$(t.input)[0].emojioneArea.setFocus()}catch(s){e.log("emojionearea textarea init failed : "+s.message,"Validator",null,s)}},function(t){e.log("failed to load and init emojionearea","Validator",t)})},function(t){e.log("failed to load and init emojionearea","Validator",t)})},n.prototype.getIconPositionReference=function(){return this.options.show_emojis&&$("#"+this.id+"_emoji .emojionearea-editor").length>0?$($("#"+this.id+"_emoji .emojionearea.form-control")[0]):t.prototype.getIconPositionReference.apply(this)},n}),define("skins/form/validator/email",["static/utils","./string"],function(e,t){var i=function(e,i){t.apply(this,[e,i])};return i.prototype=new t,i.prototype.doValidate=function(i){return!!t.prototype.doValidate.apply(this,[i])&&(!!i.match(this.getRegexp(this.options.regex))||(this.setError(this.getMessage("invalid","Invalid email address",{"%email%":e.escape(i)})),!1))},i}),define("skins/form/validator/authority_email",["config/main","static/utils","./email"],function(e,t,i){var n=function(e,t){this.setupXhr("email","/account/authority-checkemail","email"),i.apply(this,[e,t])}
;return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])},n}),define("skins/form/validator/body_measurement",["lib/tools","static/dom","lib/converter","./base"],function(e,t,i,n){var s=function(e,t){n.apply(this,[e,t]);var s=e.getRoot(),o=$("#"+s.form.prop("id")+"_"+t.options.body_unit_field.replace(/\|/g,"_")),a=null,r=null,l=null,d=null;if(0!==o.length){t.options.weight_field&&(a=$("#"+s.form.prop("id")+"_"+t.options.weight_field.replace(/\|/g,"_")),0===a.length?a=null:(r=a.prev(".input-group-addon"),0===r.length&&(r=null))),t.options.height_field&&(l=$("#"+s.form.prop("id")+"_"+t.options.height_field.replace(/\|/g,"_")),0===l.length?l=null:(d=l.prev(".input-group-addon"),0===d.length&&(d=null)));var u=o.val(),c=function(){var e=o.val();if(l){var t="US"===e?"cm":"in",n="US"===e?"in":"cm";if(d&&d.text(n),u!==e){var s=parseFloat(l.val());!isNaN(s)&&s>0&&l.val(i.convert(s,t,n,"US"===e?1:0))}}if(a){var c="US"===e?"kg":"lbs",f="US"===e?"lbs":"kg";if(r&&r.text(f),u!==e){var h=parseFloat(a.val());!isNaN(h)&&h>0&&a.val(i.convert(h,c,f,0))}}u=e};c(),o.on("change",c)}};return s.prototype=new n,s.prototype.isValid=function(){return!0},s}),define("skins/form/validator/choice",["lib/tools","static/utils","static/dom","lib/converter","./base","./focus","lib/helpers/popup"],function(e,t,i,n,s,o,a){var r="rtl"===$("html").prop("dir"),l=function(e,t){if(void 0!==e){s.apply(this,[e,t]),this.id=t.elt_id,this.is_select=!1;var i=$("select#"+t.elt_id),n=this;if(i.length>0)this.is_select=!0,this.select=i,this.focus_elt=i,this.select.on("change",function(){n.validate()}),this.select.data("validator",this);else{var o=[];for(var a in t.options.choices){var r=t.options.choices[a];"string"!=typeof r&&(r="function"===r.toString?r.toString():""+r),"string"==typeof r&&o.push("#"+t.elt_id+"_"+r.replace(" ","__"))}this.choices=$(o.join(",")),this.focus_elt=this.choices.last(),this.choices.on("change click",function(){n.validate()}),this.choices.data("validator",this)}this.input_agent=this.getInputAgent(),this.popup=null,this.popup_timer=null,this.has_error=!1,this.error_txt=!1,this.check_label_unique_legend=!0,this.options.no_init_validate||this.validate()}};return l.prototype=new s,l.prototype.focus=function(){o.focus(this.input_agent,this.id),this.showError()},l.prototype.getValue=function(){return this.is_select?this.select.val():this.options.is_multiple?this.choices.filter(":checked").map(function(){return $(this).val()}).toArray():this.choices.filter(":checked").val()},l.prototype.isValid=function(){return!(this.has_error||this.options.required&&e.isEmpty(this.getValue()))},l.prototype.doValidate=function(){if(this.options.required&&e.isEmpty(this.getValue()))return this.setError(this.getMessage("required","Required")),!1;if(null!==this.options.disabled_values&&"object"==typeof this.options.disabled_values&&this.options.disabled_values.length>0){var i=this.getValue();this.options.is_multiple||(i=[i]);for(var n in i)if(-1!==$.inArray(i[n],this.options.disabled_values))return this.setError(this.getMessage("disabled_value","Invalid value: '%value%'",{"%value%":t.escape(i[n])})),!1}return!0},l.prototype.validate=function(){return!!this.doValidate(this.getValue())&&(this.setSuccess(),!0)},l.prototype.showTooltip=function(e){if(this.popup)e&&this.popup.setContent(e);else{var t=this.focus_elt,i=this.focus_elt.parents(".btn-group,.checkbox-list"),s={below:0,above:0,left:0,right:0};if(i.length>0){t=i;var o=this.focus_elt.parents(".btn");o.length>0&&(s.below=-1*n.trimPx(o.css("marginBottom")),r?s.right=n.trimPx(o.css("marginRight"))+n.trimPx(i.css("paddingRight"))+n.trimPx(i.css("marginRight")):s.left=n.trimPx(o.css("marginLeft"))+n.trimPx(i.css("paddingLeft"))+n.trimPx(i.css("marginLeft")))}var l=t.parent().css("position","relative");this.popup=new a(t,e,{relative_to:l,trigger:!1,autoclose:!1,popup_class:"form-popup-error",position:{v:"below",h:r?"right":"left"},offset:s,max_width:500})}this.popup.open()},l.prototype.setSuccess=function(){this.has_error=!1,this.error_txt=!1,this.input_agent.removeClass("validator-error"),this.errorChanged&&this.errorChanged(!1,this),this.popup&&this.popup.close()},l.prototype.setError=function(e){this.has_error=!0,this.error_txt=e,this.input_agent.addClass("validator-error"),this.errorChanged&&this.errorChanged(!0,this),this.showTooltip($("<span>"+e+"</span>"))},l.prototype.getInputAgent=function(){return this.focus_elt.parents(".form-group")},l.prototype.showError=function(){if(!this.has_error)return!1;this.showTooltip()},l.prototype.hideTooltip=function(){this.popup&&this.popup.close()},l.prototype.getError=function(){return this.error_txt},l.prototype.startTimer=function(e){if(this.popup_timer){if(!e)return;window.clearTimeout(this.popup_timer)}var t=this;this.popup_timer=window.setTimeout(function(){t.hideTooltip()},3e3)},l.prototype.stopTimer=function(){this.popup_timer&&(window.clearTimeout(this.popup_timer),this.popup_timer=null)},l.prototype.getLabel=function(){if(!this.focus_elt)return!1;if(this.is_select){var e=!1;if(this.select.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return e=$(this).text().trim(),!1}),e)return e}var t=this.focus_elt,i=$(),n=0;do{n++,t=t.parents("fieldset"),i=t.find("legend").first()}while(t.length>0&&0===i.length);if(i.length>0&&i.text()){var s=!1,o=!0;if(this.check_label_unique_legend&&t.find("input, textarea, select").each(function(){s?s!==$(this).prop("name")&&(o=!1):s=$(this).prop("name")}),o&&(e=function(e){return e=e.trim(),e.lastIndexOf(":")+1===e.length&&(e=e.substring(0,e.length-1)),e}(i.text()),e.length>0))return e}return!1},l}),define("skins/form/validator/choice_schema",["static/utils","./base"],function(e,t){var i=function(i,n){t.apply(this,[i,n]);var s=i.getRoot();if(this.constrained=$("#"+s.form.prop("id")+"_"+n.options.constrained_field.replace(/\|/g,"_")),this.validator=this.constrained.data("validator"),this.validator){this.checked=$("#"+s.form.prop("id")+"_"+n.options.checked_field.replace(/\|/g,"_"));var o=this,a=this.validator.doValidate;this.validator.doValidate=function(t){if(!a.apply(this,[t]))return!1;var i=$.trim(o.checked.val());if(0===i.length)return!0;if(o.options.constrains.hasOwnProperty(i)&&"object"==typeof o.options.constrains[i]){var n=o.options.constrains[i];for(var s in n)if(n.hasOwnProperty(s)&&n[s]===t)return!0}else if(o.options.allow_by_default)return!0;return this.setError(o.getMessage("invalid",'Invalid with this value of "%checked_label%"',{"%checked%":'"'+e.escape(i)+'"',"%checked_label%":o.options.checked_field_label,"%constrained%":'"'+e.escape(t)+'"'})),!1},this.checked.on("change",function(){o.validator.validate()}),this.validator.validate()}};return i.prototype=new t,i.prototype.isValid=function(){return!0},i.prototype.focus=function(){this.validator.focus&&this.validator.focus()},i}),define("skins/form/validator/compare",["static/utils","./base"],function(e,t){var i=function(e,i){t.apply(this,[e,i]);var n=e.getRoot();if(this.linput=$("#"+n.form.prop("id")+"_"+i.options.left_field.replace(/\|/g,"_")),this.validator=this.linput.data("validator"),this.validator){this.rinput=$("#"+n.form.prop("id")+"_"+i.options.right_field.replace(/\|/g,"_")),this.validation_timer=null,"%!="===i.options.operator&&(this.validator.setupXhr("compare_pc_diff","/account/checkdiff",["val1","val2"],2),this.validator.setXhrOtherParam("compare_pc_diff","pc_min_diff",i.options.pc_min_diff),this.validator.setXhrOtherParam("compare_pc_diff","message",i.messages.pc_diff));var s=this,o=this.validator.doValidate;this.validator.doValidate=function(e){var t=null;if("%!="===s.options.operator&&(t=$.trim(s.rinput.val()),s.validator.setXhrOtherValues("compare_pc_diff",[t])),!o.apply(this,[e]))return!1;if(null===t&&(t=$.trim(s.rinput.val())),s.options.allow_empty){var n=null===e||""===e,a=""===t;if(n&&a)return!0}return"=="===s.options.operator&&t.length>=2&&e!==t?(this.setError(s.getMessage("equal","%left_field% and %right_field% must match",{"%left_field%":'"'+s.getFieldLabel(i,"left")+'"',"%right_field%":'"'+s.getFieldLabel(i,"right")+'"'})),!1):("!="===s.options.operator||"~!="===s.options.operator&&e)&&t.length>=2&&e===t?(this.setError(s.getMessage("not_equal","%left_field% and %right_field% be different",{"%left_field%":'"'+s.getFieldLabel(i,"left")+'"',"%right_field%":'"'+s.getFieldLabel(i,"right")+'"'})),!1):!("<"===s.options.operator&&parseFloat(e)>=parseFloat(t))||(this.setError(s.getMessage("less","%left_field% must be less than %right_field%",{"%left_field%":'"'+s.getFieldLabel(i,"left")+'"',"%right_field%":'"'+s.getFieldLabel(i,"right")+'"'})),!1)},this.rinput.on("focus",function(){s.validator.focused=!0,s.validator.showError()}),this.rinput.on("blur",function(){s.validation_timer&&(window.clearTimeout(s.validation_timer),s.validation_timer=null),s.validator.validate(),s.validator.focused=!1,s.validator.startTimer(!0)}),this.rinput.is("select")?this.rinput.on("change",function(){s.validation_timer&&(window.clearTimeout(s.validation_timer),s.validation_timer=null),s.validator.validate(),s.validator.startTimer(!0)}):this.rinput.on("keyup",function(){s.validator.hideTooltip(!0),s.validation_timer&&(window.clearTimeout(s.validation_timer),s.validation_timer=null),s.validation_timer=window.setTimeout(function(){s.validator.validate()},1e3)}),this.validator.validate()}};return i.prototype=new t,i.prototype.isValid=function(){return!0},i.prototype.focus=function(){this.validator.focus&&this.validator.focus()},i.prototype.getFieldLabel=function(t,i){if("string"==typeof t.options[i+"_field_label"])return t.options[i+"_field_label"];e.escape(t.options[i+"_field"].replace(/\|/g," "))},i}),define("skins/form/validator/conditional_require",["lib/tools","./base"],function(e,t){var i=function(e,t,i){var n="#"+e.form.prop("id")+"_"+i.replace(/\|/g,"_"),s=$(n);if(0===s.length&&("left="===t.options.operator||"left!="===t.options.operator))if("object"==typeof t.options.left_field_val){for(var o in t.options.left_field_val)if(s=$(n+"_"+t.options.left_field_val[o]),0===s.length)return s}else if(s=$(n+"_"+t.options.left_field_val),0===s.length)return s;return s},n=function(e,t){return"object"==typeof t?-1!==t.indexOf(e):e===t},s=function(t,i,s){var o=t.doValidate;t.doValidate=function(t){if(!(i.stop_validation_loop>0&&0===--i.stop_validation_loop)){if(!o.apply(this,[t]))return!1;switch(0===i.stop_validation_loop&&(i.stop_validation_loop=2),s?(i.last_lval=t,i.rvalidator.validate()):(i.last_rval=t,i.lvalidator.validate()),i.options.operator){case"left!=0":if(!s&&!e.isEmpty(i.last_lval)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_not_empty","%right_field% is required when %left_field% is provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"left=":if(!s&&n(i.last_lval,i.options.left_field_val)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_is","%right_field% is required when %left_field% has this value.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"left!=":if(!s&&!n(i.last_lval,i.options.left_field_val)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_is_not","%right_field% is required when %left_field% has this value.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"=1":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)!=1)return this.setError(i.getMessage("one_of_them","One (and only one) of %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case">=0":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)==0)return this.setError(i.getMessage("at_least_one","At least one of the fields %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"<=1":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)==2)return this.setError(i.getMessage("at_most_one","At most one of the fields %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1}return!0}}},o=function(e,n){t.apply(this,[e,n]);var o=e.getRoot();if(this.linput=i(o,n,n.options.left_field),0===this.linput.length)return void console.error('conditional_require validator is not able to locate left field "'+n.options.left_field+"'");if(this.lvalidator=this.linput.data("validator"),!this.lvalidator)return void console.error('Using conditional_require validator currently requires that the left field "'+n.options.left_field+'" has a validator');if("function"!=typeof this.lvalidator.doValidate)return void console.error('Using conditional_require validator currently requires that the left field "'+n.options.left_field+'" validator to have a doValidate');var a="#"+o.form.prop("id")+"_"+n.options.right_field.replace(/\|/g,"_");return null!==n.options.right_field_values&&"object"==typeof n.options.right_field_values&&(a+="_"+n.options.right_field_values[0]),this.rinput=$(a),0===this.rinput.length?void console.error('conditional_require validator is not able to locate right field "'+n.options.right_field+"'"):(this.rvalidator=this.rinput.data("validator"),this.rvalidator?"function"!=typeof this.rvalidator.doValidate?void console.error('Using conditional_require validator currently requires that the left field "'+n.options.left_field+'" validator to have a doValidate'):(this.stop_validation_loop=0,this.last_lval=null,this.last_rval=null,s(this.lvalidator,this,!0),s(this.rvalidator,this,!1),void this.lvalidator.validate()):void console.error('Using conditional_require validator currently requires that the right "'+n.options.right_field+'" field has a validator'))};return o.prototype=new t,o.prototype.isValid=function(){return!0},o.prototype.focus=function(){},o}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("skins/min/default.creditcards.bwfy",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).creditcards=e()}(function(){return function e(t,i,n){function s(a,r){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);throw(r=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",r}l=i[a]={exports:{}},t[a][0].call(l.exports,function(e){return s(t[a][1][e]||e)},l,l.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){"use strict";t.exports=function(e,t,i){if("function"==typeof Array.prototype.find)return e.find(t,i);i=i||this;var n,s=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(n=0;n<s;n++)if(t.call(i,e[n],n,e))return e[n]}},{}],2:[function(e,t,i){"use strict";t.exports=e("./types")},{"./types":10}],3:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);s(this,e)}var s=e("xtend/mutable");(t.exports=n).prototype.digits=16,n.prototype.cvcLength=3,n.prototype.luhn=!0,n.prototype.groupPattern=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/,n.prototype.group=function(e){return(e.match(this.groupPattern)||[]).slice(1).filter(Boolean)},n.prototype.test=function(e,t){return this[t?"eagerPattern":"pattern"].test(e)}},{"xtend/mutable":29}],4:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"American Express",digits:15,pattern:/^3[47]\d{13}$/,eagerPattern:/^3[47]/,groupPattern:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,cvcLength:4})},{"../type":3}],5:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Dankort",pattern:/^5019\d{12}$/,eagerPattern:/^5019/})},{"../type":3}],6:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Diners Club",digits:14,pattern:/^3(0[0-5]|[68]\d)\d{11}$/,eagerPattern:/^3(0|[68])/,groupPattern:/(\d{1,4})?(\d{1,6})?(\d{1,4})?/})},{"../type":3}],7:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Discover",pattern:/^6(011(0[0-9]|[2-4]\d|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]\d{3}|5\d{4})\d{10}$/,eagerPattern:/^6(011(0[0-9]|[2-4]|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]|5)/})},{"../type":3}],8:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Elo",pattern:/^(4[035]|5[0]|6[235])(6[7263]|9[90]|1[2416]|7[736]|8[9]|0[04579]|5[0])([0-9])([0-9])\d{10}$/,eagerPattern:/^(4[035]|5[0]|6[235])(6[7263]|9[90]|1[2416]|7[736]|8[9]|0[04579]|5[0])([0-9])([0-9])/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],9:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Forbrugsforeningen",pattern:/^600722\d{10}$/,eagerPattern:/^600/})},{"../type":3}],10:[function(e,t,i){"use strict";t.exports=[e("./visa"),e("./maestro"),e("./forbrugsforeningen"),e("./dankort"),e("./mastercard"),e("./american-express"),e("./diners-club"),e("./discover"),e("./jcb"),e("./unionpay"),e("./troy"),e("./elo"),e("./uatp")]},{"./american-express":4,"./dankort":5,"./diners-club":6,"./discover":7,"./elo":8,"./forbrugsforeningen":9,"./jcb":11,"./maestro":12,"./mastercard":13,"./troy":14,"./uatp":15,"./unionpay":16,"./visa":17}],11:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"JCB",pattern:/^35\d{14}$/,eagerPattern:/^35/})},{"../type":3}],12:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Maestro",digits:[12,19],pattern:/^(?:5[06789]\d\d|(?!6011[0234])(?!60117[4789])(?!60118[6789])(?!60119)(?!64[456789])(?!65)6\d{3})\d{8,15}$/,eagerPattern:/^(5(018|0[23]|[68])|6[37]|60111|60115|60117([56]|7[56])|60118[0-5]|64[0-3]|66)/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],13:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Mastercard",pattern:/^(5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)\d{12}$/,eagerPattern:/^(2[3-7]|22[2-9]|5[1-5])/})},{"../type":3}],14:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Troy",pattern:/^9792\d{12}$/,eagerPattern:/^9792/})},{"../type":3}],15:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"UATP",digits:15,pattern:/^1\d{14}$/,eagerPattern:/^1/,groupPattern:/(\d{1,4})(\d{1,5})?(\d{1,6})?/})},{"../type":3}],16:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"UnionPay",pattern:/^62[0-5]\d{13,16}$/,eagerPattern:/^62/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/,luhn:!1})},{"../type":3}],17:[function(e,t,i){"use strict";e=e("../type"),t.exports=e({name:"Visa",digits:[13,19],pattern:/^4\d{12}(\d{3}|\d{6})?$/,eagerPattern:/^4/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],18:[function(e,t,i){"use strict";var n=e("fast-luhn"),s=e("./types");t.exports=function(e){function t(e,t){return i.find(function(i){return i.test(e,t)})}var i=s(e);return{types:e,parse:function(e){return"string"!=typeof e?"":e.replace(/[^\d]/g,"")},format:function(e,i){var n=t(e,!0);return n?n.group(e).join(i||" "):e},type:function(e,i){return e=t(e,i),e?e.name:undefined},luhn:n,isValid:function(e,s){return!!(s=s?i.get(s):t(e))&&(!s.luhn||n(e))&&s.test(e)}}}},{"./types":21,"fast-luhn":23}],19:[function(e,t,i){"use strict";var n=e("./types"),s=/^\d{3,4}$/;t.exports=function(e){var t=n(e);return{isValid:function(e,i){return"string"==typeof e&&!!s.test(e)&&(i?t.get(i).cvcLength===e.length:t.some(function(t){return t.cvcLength===e.length}))}}}},{"./types":21}],20:[function(e,t,i){"use strict";var n=e("is-valid-month"),s=e("parse-int"),e=e("parse-year");t.exports={isPast:function(e,t){return Date.now()>=new Date(t,e)},month:{parse:function(e){return s(e)},isValid:n},year:{parse:e,format:function(e,t){return e=e.toString(),t?e.substr(2,4):e},isValid:function(e){return"number"==typeof e&&0<(e=s(e))},isPast:function(e){return(new Date).getFullYear()>e}}}},{"is-valid-month":26,"parse-int":27,"parse-year":28}],21:[function(e,t,i){"use strict";var n=e("array-find"),e=e("creditcards-types");t.exports=function(e){var t=e.reduce(function(e,t){return e[t.name]=t,e},{});return{find:n.bind(null,e),some:e.some.bind(e),get:function(e){var i=t[e];if(i)return i;throw new Error("No type found for name: "+e)}}},t.exports.defaults=e},{"array-find":1,"creditcards-types":2}],22:[function(e,t,i){"use strict";var n=e("zero-fill"),s=e("parse-int"),o=n(2);t.exports=function(e,t){return t=(t=t||new Date).getFullYear().toString().substr(0,2),e=s(e),s(t+o(e))}},{"parse-int":27,"zero-fill":30}],23:[function(e,t,i){"use strict";var n;t.exports=(n=[0,2,4,6,8,1,3,5,7,9],function(e){if("string"!=typeof e)throw new TypeError("Expected string input");if(!e)return!1;for(var t,i=e.length,s=1,o=0;i;)t=parseInt(e.charAt(--i),10),o+=(s^=1)?n[t]:t;return o%10==0})},{}],24:[function(e,t,i){"use strict";t.exports=Number.isFinite||function(e){return!("number"!=typeof e||e!=e||e===Infinity||e===-Infinity)}},{}],25:[function(e,t,i){var n=e("is-finite");t.exports=Number.isInteger||function(e){return"number"==typeof e&&n(e)&&Math.floor(e)===e}},{"is-finite":24}],26:[function(e,t,i){"use strict";var n=e("is-integer");t.exports=function(e){return!("number"!=typeof e||!n(e))&&1<=e&&e<=12}},{"is-integer":25}],27:[function(e,t,i){"use strict";var n=e("is-integer"),s=/^-?\d+$/;t.exports=function(e){return"number"==typeof e?n(e)?e:undefined:"string"==typeof e?s.test(e)?parseInt(e,10):undefined:void 0}},{"is-integer":25}],28:[function(e,t,i){"use strict";var n=e("parse-int"),s=e("expand-year");t.exports=function(e,t,i){if(null!=(e=n(e)))return t?s(e,i):e}},{"expand-year":22,"parse-int":27}],29:[function(e,t,i){t.exports=function(e){for(var t=1;t<arguments.length;t++){var i,s=arguments[t];for(i in s)n.call(s,i)&&(e[i]=s[i])}return e};var n=Object.prototype.hasOwnProperty},{}],30:[function(e,t,i){t.exports=function n(e,t,i){return t===undefined?function(t,i){return n(e,t,i)}:(i===undefined&&(i="0"),0<(e-=t.toString().length)?new Array(e+(/\./.test(t)?2:1)).join(i)+t:t+"")}},{}],31:[function(e,t,i){t.exports={Card:e("creditcards/card"),Cvc:e("creditcards/cvc"),CcTypes:e("creditcards-types"),Expiration:e("creditcards/expiration")}},{"creditcards-types":2,"creditcards/card":18,"creditcards/cvc":19,"creditcards/expiration":20}]},{},[31])(31)}),define("skins/form/validator/credit_card",["static/utils","./base","./focus","skins/min/default.creditcards.bwfy"],function(e,t,i,n){var s=function(e,i){t.apply(this,[e,i]);var s=this,o=e.getRoot(),a=$("#"+o.form.prop("id")+"_"+i.options.number_field.replace(/\|/g,"_"));if(this.cc_num_error=!1,this.cc_num_validator=a.data("validator"),!this.cc_num_validator)return void console.error("No validator for CC number field");this.cc_num_label=a.prop("placeholder");var r=$("#"+o.form.prop("id")+"_"+i.options.month_field.replace(/\|/g,"_"));if(this.cc_month_error=!1,this.cc_month_validator=r.data("validator"),this.cc_month_label="",!this.cc_month_validator)return void console.error("No validator for CC month field");r.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return s.cc_month_label=$(this).text().trim(),!1});var l=$("#"+o.form.prop("id")+"_"+i.options.year_field.replace(/\|/g,"_"));if(0===l.length)return void console.error("No input for CC year field");l.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return s.cc_month_label+=" "+$(this).text().trim(),!1});var d=$("#"+o.form.prop("id")+"_"+i.options.cvv_field.replace(/\|/g,"_"));if(this.cc_cvv_error=!1,this.cc_cvv_validator=d.data("validator"),!this.cc_cvv_validator)return void console.error("No validator for CVV field");this.cc_cvv_label=d.prop("placeholder");var u=$('<div class="cc-icon"></div>').insertAfter(a),c=n.Card(n.CcTypes),f=n.Cvc(n.CcTypes),h=!1,p=l.val();l.on("change",function(){p=l.val(),s.cc_month_validator.validate()});var _=this.cc_num_validator.doValidate;this.cc_num_validator.doValidate=function(e){if(s.cc_num_error=!0,!_.apply(this,[e]))return!1;var t=c.parse(e);h=c.type(t,!0),s.cc_cvv_validator.validate();var i=h?h.toLowerCase().replace(" ","-"):"";return u.removeClass().addClass("cc-icon "+i),this.input.val(c.format(t)),c.isValid(t)?(s.cc_num_error=!1,!0):(this.setError(s.getMessage("invalid_number")),!1)};var g=this.cc_month_validator.doValidate;this.cc_month_validator.doValidate=function(e){if(s.cc_month_error=!0,!g.apply(this,[e]))return!1;var t=n.Expiration.month.parse(e),i=n.Expiration.month.parse(p);return n.Expiration.month.isValid(t)&&n.Expiration.year.isValid(i)?n.Expiration.isPast(t,i)?(this.setError(s.getMessage("invalid_date")),!1):(s.cc_month_error=!1,!0):(this.setError(s.getMessage("invalid_date")),!1)};var m=this.cc_cvv_validator.doValidate;this.cc_cvv_validator.doValidate=function(e){return s.cc_cvv_error=!0,!!m.apply(this,[e])&&(f.isValid(e,h)?(s.cc_cvv_error=!1,!0):(this.setError(s.getMessage("invalid_cvv")),!1))},this.cc_num_validator.validate()};return s.prototype=new t,s.prototype.isValid=function(){return!this.cc_num_error&&!this.cc_month_error&&!this.cc_cvv_error},s.prototype.focus=function(){i.focus(this.getInputError())},s.prototype.getLabel=function(){return input_err=this.getInputError(),input_err===this.cc_num_validator?this.cc_num_label:input_err===this.cc_month_validator?this.cc_month_label:input_err===this.cc_cvv_validator&&this.cc_cvv_label},s.prototype.getInputError=function(){return this.cc_num_error?this.cc_num_validator:this.cc_month_error?this.cc_month_validator:this.cc_cvv_error?this.cc_cvv_validator:this.cc_num_validator},s}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment/moment",t):e.moment=t()}(this,function(){"use strict";function e(){return Jn.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(n(e,t))return!1;return!0}function o(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var i,n=[],s=e.length;for(i=0;i<s;++i)n.push(t(e[i],i));return n}function d(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,i,n){return wt(e,t,i,n,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=c()),e._pf}function h(e){var t=null,i=!1,n=e._d&&!isNaN(e._d.getTime());return n&&(t=f(e),i=Qn.call(t.parsedDateParts,function(e){return null!=e}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&t.bigHour===undefined)),null!=Object.isFrozen&&Object.isFrozen(e)?n:(e._isValid=n,e._isValid)}function p(e){var t=u(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}function _(e,t){var i,n,s,a=Zn.length;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),a>0)for(i=0;i<a;i++)n=Zn[i],s=t[n],o(s)||(e[n]=s);return e}function g(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===es&&(es=!0,e.updateOffset(this),es=!1)}function m(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function b(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function v(t,i){var s=!0;return d(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),s){var o,a,r,l=[],d=arguments.length;for(a=0;a<d;a++){if(o="","object"==typeof arguments[a]){o+="\n["+a+"] ";for(r in arguments[0])n(arguments[0],r)&&(o+=r+": "+arguments[0][r]+", ");o=o.slice(0,-2)}else o=arguments[a];l.push(o)}b(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),s=!1}return i.apply(this,arguments)},i)}function y(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),ts[t]||(b(i),ts[t]=!0)}function D(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e){var t,i;for(i in e)n(e,i)&&(t=e[i],D(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function w(e,t){var s,o=d({},e);for(s in t)n(t,s)&&(i(e[s])&&i(t[s])?(o[s]={},d(o[s],e[s]),d(o[s],t[s])):null!=t[s]?o[s]=t[s]:delete o[s]);for(s in e)n(e,s)&&!n(t,s)&&i(e[s])&&(o[s]=d({},o[s]));return o}function S(e){null!=e&&this.set(e)}function k(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return D(n)?n.call(t,i):n}function T(e,t,i){var n=""+Math.abs(e),s=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function E(e,t,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),e&&(ls[e]=s),t&&(ls[t[0]]=function(){return T(s.apply(this,arguments),t[1],t[2])}),i&&(ls[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function P(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,i,n=e.match(os);for(t=0,i=n.length;t<i;t++)ls[n[t]]?n[t]=ls[n[t]]:n[t]=P(n[t]);return function(t){var s,o="";for(s=0;s<i;s++)o+=D(n[s])?n[s].call(t,e):n[s];return o}}function F(e,t){return e.isValid()?(t=x(t,e.localeData()),rs[t]=rs[t]||I(t),rs[t](e)):e.localeData().invalidDate()}function x(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(as.lastIndex=0;n>=0&&as.test(e);)e=e.replace(as,i),as.lastIndex=0,n-=1;return e}function L(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(os).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])}function O(){return this._invalidDate}function $(e){return this._ordinal.replace("%d",e)}function M(e,t,i,n){var s=this._relativeTime[i];return D(s)?s(e,t,i,n):s.replace(/%d/i,e)}function A(e,t){var i=this._relativeTime[e>0?"future":"past"];return D(i)?i(t):i.replace(/%s/i,t)}function V(e){return"string"==typeof e?fs[e]||fs[e.toLowerCase()]:undefined}function N(e){var t,i,s={};for(i in e)n(e,i)&&(t=V(i))&&(s[t]=e[i]);return s}function R(e){var t,i=[];for(t in e)n(e,t)&&i.push({unit:t,priority:hs[t]});return i.sort(function(e,t){return e.priority-t.priority}),i}function B(e,t,i){ns[e]=D(t)?t:function(e,n){return e&&i?i:t}}function U(e,t){return n(ns,e)?ns[e](t._strict,t._locale):new RegExp(H(e))}function H(e){return j(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}))}function j(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function z(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=q(t)),i}function W(e,t){var i,n,s=t;for("string"==typeof e&&(e=[e]),a(t)&&(s=function(e,i){i[t]=z(e)}),n=e.length,i=0;i<n;i++)Os[e[i]]=s}function G(e,t){W(e,function(e,i,n,s){n._w=n._w||{},t(e,n._w,n,s)})}function Y(e,t,i){
null!=t&&n(Os,e)&&Os[e](t,i._a,i,e)}function K(e){return e%4==0&&e%100!=0||e%400==0}function X(e){return K(e)?366:365}function J(){return K(this.year())}function Q(t,i){return function(n){return null!=n?(ee(this,t,n),e.updateOffset(this,i),this):Z(this,t)}}function Z(e,t){if(!e.isValid())return NaN;var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function ee(e,t,i){var n,s,o,a,r;if(e.isValid()&&!isNaN(i)){switch(n=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(s?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(s?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(s?n.setUTCHours(i):n.setHours(i));case"Date":return void(s?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}o=i,a=e.month(),r=e.date(),r=29!==r||1!==a||K(o)?r:28,s?n.setUTCFullYear(o,a,r):n.setFullYear(o,a,r)}}function te(e){return e=V(e),D(this[e])?this[e]():this}function ie(e,t){if("object"==typeof e){e=N(e);var i,n=R(e),s=n.length;for(i=0;i<s;i++)this[n[i].unit](e[n[i].unit])}else if(e=V(e),D(this[e]))return this[e](t);return this}function ne(e,t){return(e%t+t)%t}function se(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=ne(t,12);return e+=(t-i)/12,1===i?K(e)?29:28:31-i%7%2}function oe(e,i){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Gs).test(i)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone}function ae(e,i){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Gs.test(i)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function re(e,t,i){var n,s,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=u([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===t?(s=js.call(this._shortMonthsParse,a),-1!==s?s:null):(s=js.call(this._longMonthsParse,a),-1!==s?s:null):"MMM"===t?-1!==(s=js.call(this._shortMonthsParse,a))?s:(s=js.call(this._longMonthsParse,a),-1!==s?s:null):-1!==(s=js.call(this._longMonthsParse,a))?s:(s=js.call(this._shortMonthsParse,a),-1!==s?s:null)}function le(e,t,i){var n,s,o;if(this._monthsParseExact)return re.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=u([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function de(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=z(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;var i=t,n=e.date();return n=n<29?n:Math.min(n,se(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n),e}function ue(t){return null!=t?(de(this,t),e.updateOffset(this,!0),this):Z(this,"Month")}function ce(){return se(this.year(),this.month())}function fe(e){return this._monthsParseExact?(n(this,"_monthsRegex")||pe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(n(this,"_monthsShortRegex")||(this._monthsShortRegex=Ys),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(n(this,"_monthsRegex")||pe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(n(this,"_monthsRegex")||(this._monthsRegex=Ks),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pe(){function e(e,t){return t.length-e.length}var t,i,n,s,o=[],a=[],r=[];for(t=0;t<12;t++)i=u([2e3,t]),n=j(this.monthsShort(i,"")),s=j(this.months(i,"")),o.push(n),a.push(s),r.push(s),r.push(n);o.sort(e),a.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function _e(e,t,i,n,s,o,a){var r;return e<100&&e>=0?(r=new Date(e+400,t,i,n,s,o,a),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,i,n,s,o,a),r}function ge(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function me(e,t,i){var n=7+t-i;return-(7+ge(e,0,n).getUTCDay()-t)%7+n-1}function be(e,t,i,n,s){var o,a,r=(7+i-n)%7,l=me(e,n,s),d=1+7*(t-1)+r+l;return d<=0?(o=e-1,a=X(o)+d):d>X(e)?(o=e+1,a=d-X(e)):(o=e,a=d),{year:o,dayOfYear:a}}function ve(e,t,i){var n,s,o=me(e.year(),t,i),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(s=e.year()-1,n=a+ye(s,t,i)):a>ye(e.year(),t,i)?(n=a-ye(e.year(),t,i),s=e.year()+1):(s=e.year(),n=a),{week:n,year:s}}function ye(e,t,i){var n=me(e,t,i),s=me(e+1,t,i);return(X(e)-n+s)/7}function De(e){return ve(e,this._week.dow,this._week.doy).week}function Ce(){return this._week.dow}function we(){return this._week.doy}function Se(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ke(e){var t=ve(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Te(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ee(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Pe(e,t){return e.slice(t,7).concat(e.slice(0,t))}function Ie(e,i){var n=t(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(i)?"format":"standalone"];return!0===e?Pe(n,this._week.dow):e?n[e.day()]:n}function Fe(e){return!0===e?Pe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function xe(e){return!0===e?Pe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Le(e,t,i){var n,s,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=u([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===t?(s=js.call(this._weekdaysParse,a),-1!==s?s:null):"ddd"===t?(s=js.call(this._shortWeekdaysParse,a),-1!==s?s:null):(s=js.call(this._minWeekdaysParse,a),-1!==s?s:null):"dddd"===t?-1!==(s=js.call(this._weekdaysParse,a))?s:-1!==(s=js.call(this._shortWeekdaysParse,a))?s:(s=js.call(this._minWeekdaysParse,a),-1!==s?s:null):"ddd"===t?-1!==(s=js.call(this._shortWeekdaysParse,a))?s:-1!==(s=js.call(this._weekdaysParse,a))?s:(s=js.call(this._minWeekdaysParse,a),-1!==s?s:null):-1!==(s=js.call(this._minWeekdaysParse,a))?s:-1!==(s=js.call(this._weekdaysParse,a))?s:(s=js.call(this._shortWeekdaysParse,a),-1!==s?s:null)}function Oe(e,t,i){var n,s,o;if(this._weekdaysParseExact)return Le.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=u([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function $e(e){if(!this.isValid())return null!=e?this:NaN;var t=Z(this,"Day");return null!=e?(e=Te(e,this.localeData()),this.add(e-t,"d")):t}function Me(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ae(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ee(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ve(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(n(this,"_weekdaysRegex")||(this._weekdaysRegex=eo),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ne(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(n(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=to),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Re(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(n(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=io),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Be(){function e(e,t){return t.length-e.length}var t,i,n,s,o,a=[],r=[],l=[],d=[];for(t=0;t<7;t++)i=u([2e3,1]).day(t),n=j(this.weekdaysMin(i,"")),s=j(this.weekdaysShort(i,"")),o=j(this.weekdays(i,"")),a.push(n),r.push(s),l.push(o),d.push(n),d.push(s),d.push(o);a.sort(e),r.sort(e),l.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ue(){return this.hours()%12||12}function He(){return this.hours()||24}function je(e,t){E(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qe(e,t){return t._meridiemParse}function ze(e){return"p"===(e+"").toLowerCase().charAt(0)}function We(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Ge(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function Ye(e){return e?e.toLowerCase().replace("_","-"):e}function Ke(e){for(var t,i,n,s,o=0;o<e.length;){for(s=Ye(e[o]).split("-"),t=s.length,i=Ye(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=Je(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&Ge(s,i)>=t-1)break;t--}o++}return no}function Xe(e){return!(!e||!e.match("^[^/\\\\]*$"))}function Je(e){var t,i=null;if(ro[e]===undefined&&"undefined"!=typeof module&&module&&module.exports&&Xe(e))try{i=no._abbr,t=require,t("./locale/"+e),Qe(i)}catch(n){ro[e]=null}return ro[e]}function Qe(e,t){var i;return e&&(i=o(t)?tt(e):Ze(e,t),i?no=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),no._abbr}function Ze(e,t){if(null!==t){var i,n=ao;if(t.abbr=e,null!=ro[e])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ro[e]._config;else if(null!=t.parentLocale)if(null!=ro[t.parentLocale])n=ro[t.parentLocale]._config;else{if(null==(i=Je(t.parentLocale)))return lo[t.parentLocale]||(lo[t.parentLocale]=[]),lo[t.parentLocale].push({name:e,config:t}),null;n=i._config}return ro[e]=new S(w(n,t)),lo[e]&&lo[e].forEach(function(e){Ze(e.name,e.config)}),Qe(e),ro[e]}return delete ro[e],null}function et(e,t){if(null!=t){var i,n,s=ao;null!=ro[e]&&null!=ro[e].parentLocale?ro[e].set(w(ro[e]._config,t)):(n=Je(e),null!=n&&(s=n._config),t=w(s,t),null==n&&(t.abbr=e),i=new S(t),i.parentLocale=ro[e],ro[e]=i),Qe(e)}else null!=ro[e]&&(null!=ro[e].parentLocale?(ro[e]=ro[e].parentLocale,e===Qe()&&Qe(e)):null!=ro[e]&&delete ro[e]);return ro[e]}function tt(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return no;if(!t(e)){if(i=Je(e))return i;e=[e]}return Ke(e)}function it(){return is(ro)}function nt(e){var t,i=e._a;return i&&-2===f(e).overflow&&(t=i[Ms]<0||i[Ms]>11?Ms:i[As]<1||i[As]>se(i[$s],i[Ms])?As:i[Vs]<0||i[Vs]>24||24===i[Vs]&&(0!==i[Ns]||0!==i[Rs]||0!==i[Bs])?Vs:i[Ns]<0||i[Ns]>59?Ns:i[Rs]<0||i[Rs]>59?Rs:i[Bs]<0||i[Bs]>999?Bs:-1,f(e)._overflowDayOfYear&&(t<$s||t>As)&&(t=As),f(e)._overflowWeeks&&-1===t&&(t=Us),f(e)._overflowWeekday&&-1===t&&(t=Hs),f(e).overflow=t),e}function st(e){var t,i,n,s,o,a,r=e._i,l=uo.exec(r)||co.exec(r),d=ho.length,u=po.length;if(l){for(f(e).iso=!0,t=0,i=d;t<i;t++)if(ho[t][1].exec(l[1])){s=ho[t][0],n=!1!==ho[t][2];break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,i=u;t<i;t++)if(po[t][1].exec(l[3])){o=(l[2]||" ")+po[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(l[4]){if(!fo.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=s+(o||"")+(a||""),gt(e)}else e._isValid=!1}function ot(e,t,i,n,s,o){var a=[at(e),Ws.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(s,10)];return o&&a.push(parseInt(o,10)),a}function at(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function rt(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function lt(e,t,i){if(e){if(Qs.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return f(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function dt(e,t,i){if(e)return mo[e];if(t)return 0;var n=parseInt(i,10),s=n%100;return(n-s)/100*60+s}function ut(e){var t,i=go.exec(rt(e._i));if(i){if(t=ot(i[4],i[3],i[2],i[5],i[6],i[7]),!lt(i[1],t,e))return;e._a=t,e._tzm=dt(i[8],i[9],i[10]),e._d=ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function ct(t){var i=_o.exec(t._i);if(null!==i)return void(t._d=new Date(+i[1]));st(t),!1===t._isValid&&(delete t._isValid,ut(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:e.createFromInputFallback(t)))}function ft(e,t,i){return null!=e?e:null!=t?t:i}function ht(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function pt(e){var t,i,n,s,o,a=[];if(!e._d){for(n=ht(e),e._w&&null==e._a[As]&&null==e._a[Ms]&&_t(e),null!=e._dayOfYear&&(o=ft(e._a[$s],n[$s]),(e._dayOfYear>X(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),i=ge(o,0,e._dayOfYear),e._a[Ms]=i.getUTCMonth(),e._a[As]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Vs]&&0===e._a[Ns]&&0===e._a[Rs]&&0===e._a[Bs]&&(e._nextDay=!0,e._a[Vs]=0),e._d=(e._useUTC?ge:_e).apply(null,a),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Vs]=24),e._w&&"undefined"!=typeof e._w.d&&e._w.d!==s&&(f(e).weekdayMismatch=!0)}}function _t(e){var t,i,n,s,o,a,r,l,d;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,i=ft(t.GG,e._a[$s],ve(St(),1,4).year),n=ft(t.W,1),((s=ft(t.E,1))<1||s>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,d=ve(St(),o,a),i=ft(t.gg,e._a[$s],d.year),n=ft(t.w,d.week),null!=t.d?((s=t.d)<0||s>6)&&(l=!0):null!=t.e?(s=t.e+o,(t.e<0||t.e>6)&&(l=!0)):s=o),n<1||n>ye(i,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(r=be(i,n,s,o,a),e._a[$s]=r.year,e._dayOfYear=r.dayOfYear)}function gt(t){if(t._f===e.ISO_8601)return void st(t);if(t._f===e.RFC_2822)return void ut(t);t._a=[],f(t).empty=!0;var i,n,s,o,a,r,l,d=""+t._i,u=d.length,c=0;for(s=x(t._f,t._locale).match(os)||[],l=s.length,i=0;i<l;i++)o=s[i],n=(d.match(U(o,t))||[])[0],n&&(a=d.substr(0,d.indexOf(n)),a.length>0&&f(t).unusedInput.push(a),d=d.slice(d.indexOf(n)+n.length),c+=n.length),ls[o]?(n?f(t).empty=!1:f(t).unusedTokens.push(o),Y(o,n,t)):t._strict&&!n&&f(t).unusedTokens.push(o);f(t).charsLeftOver=u-c,d.length>0&&f(t).unusedInput.push(d),t._a[Vs]<=12&&!0===f(t).bigHour&&t._a[Vs]>0&&(f(t).bigHour=undefined),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[Vs]=mt(t._locale,t._a[Vs],t._meridiem),r=f(t).era,null!==r&&(t._a[$s]=t._locale.erasConvertYear(r,t._a[$s])),pt(t),nt(t)}function mt(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function bt(e){var t,i,n,s,o,a,r=!1,l=e._f.length;if(0===l)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<l;s++)o=0,a=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],gt(t),h(t)&&(a=!0),o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,r?o<n&&(n=o,i=t):(null==n||o<n||a)&&(n=o,i=t,a&&(r=!0));d(e,i||t)}function vt(e){if(!e._d){var t=N(e._i),i=t.day===undefined?t.date:t.day;e._a=l([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),pt(e)}}function yt(e){var t=new g(nt(Dt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function Dt(e){var i=e._i,n=e._f;return e._locale=e._locale||tt(e._l),null===i||n===undefined&&""===i?p({nullInput:!0}):("string"==typeof i&&(e._i=i=e._locale.preparse(i)),m(i)?new g(nt(i)):(r(i)?e._d=i:t(n)?bt(e):n?gt(e):Ct(e),h(e)||(e._d=null),e))}function Ct(n){var s=n._i;o(s)?n._d=new Date(e.now()):r(s)?n._d=new Date(s.valueOf()):"string"==typeof s?ct(n):t(s)?(n._a=l(s.slice(0),function(e){return parseInt(e,10)}),pt(n)):i(s)?vt(n):a(s)?n._d=new Date(s):e.createFromInputFallback(n)}function wt(e,n,o,a,r){var l={};return!0!==n&&!1!==n||(a=n,n=undefined),!0!==o&&!1!==o||(a=o,o=undefined),(i(e)&&s(e)||t(e)&&0===e.length)&&(e=undefined),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=o,l._i=e,l._f=n,l._strict=a,yt(l)}function St(e,t,i,n){return wt(e,t,i,n,!1)}function kt(e,i){var n,s;if(1===i.length&&t(i[0])&&(i=i[0]),!i.length)return St();for(n=i[0],s=1;s<i.length;++s)i[s].isValid()&&!i[s][e](n)||(n=i[s]);return n}function Tt(){return kt("isBefore",[].slice.call(arguments,0))}function Et(){return kt("isAfter",[].slice.call(arguments,0))}function Pt(e){var t,i,s=!1,o=Do.length;for(t in e)if(n(e,t)&&(-1===js.call(Do,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<o;++i)if(e[Do[i]]){if(s)return!1;parseFloat(e[Do[i]])!==z(e[Do[i]])&&(s=!0)}return!0}function It(){return this._isValid}function Ft(){return Xt(NaN)}function xt(e){var t=N(e),i=t.year||0,n=t.quarter||0,s=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,r=t.hour||0,l=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=Pt(t),this._milliseconds=+u+1e3*d+6e4*l+1e3*r*60*60,this._days=+a+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=tt(),this._bubble()}function Lt(e){return e instanceof xt}function Ot(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function $t(e,t,i){var n,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(n=0;n<s;n++)(i&&e[n]!==t[n]||!i&&z(e[n])!==z(t[n]))&&a++;return a+o}function Mt(e,t){E(e,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+T(~~(e/60),2)+t+T(~~e%60,2)})}function At(e,t){var i,n,s,o=(t||"").match(e);return null===o?null:(i=o[o.length-1]||[],n=(i+"").match(Co)||["-",0,0],s=60*n[1]+z(n[2]),0===s?0:"+"===n[0]?s:-s)}function Vt(t,i){var n,s;return i._isUTC?(n=i.clone(),s=(m(t)||r(t)?t.valueOf():St(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),e.updateOffset(n,!1),n):St(t).local()}function Nt(e){return-Math.round(e._d.getTimezoneOffset())}function Rt(t,i,n){var s,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=At(Ps,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&i&&(s=Nt(this)),this._offset=t,this._isUTC=!0,null!=s&&this.add(s,"m"),o!==t&&(!i||this._changeInProgress?ti(this,Xt(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Nt(this)}function Bt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ut(e){return this.utcOffset(0,e)}function Ht(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Nt(this),"m")),this}function jt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=At(Es,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function qt(e){return!!this.isValid()&&(e=e?St(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function zt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),t=Dt(t),t._a?(e=t._isUTC?u(t._a):St(t._a),this._isDSTShifted=this.isValid()&&$t(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Gt(){return!!this.isValid()&&!this._isUTC}function Yt(){return!!this.isValid()&&this._isUTC}function Kt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xt(e,t){var i,s,o,r=e,l=null;return Lt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:a(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(l=wo.exec(e))?(i="-"===l[1]?-1:1,r={y:0,d:z(l[As])*i,h:z(l[Vs])*i,m:z(l[Ns])*i,s:z(l[Rs])*i,ms:z(Ot(1e3*l[Bs]))*i}):(l=So.exec(e))?(i="-"===l[1]?-1:1,r={y:Jt(l[2],i),M:Jt(l[3],i),w:Jt(l[4],i),d:Jt(l[5],i),h:Jt(l[6],i),m:Jt(l[7],i),s:Jt(l[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=Zt(St(r.from),St(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),s=new xt(r),Lt(e)&&n(e,"_locale")&&(s._locale=e._locale),Lt(e)&&n(e,"_isValid")&&(s._isValid=e._isValid),s}function Jt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Qt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Zt(e,t){var i;return e.isValid()&&t.isValid()?(t=Vt(t,e),e.isBefore(t)?i=Qt(e,t):(i=Qt(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ei(e,t){return function(i,n){var s,o;return null===n||isNaN(+n)||(y(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),s=Xt(i,n),ti(this,s,e),this}}function ti(t,i,n,s){var o=i._milliseconds,a=Ot(i._days),r=Ot(i._months);t.isValid()&&(s=null==s||s,r&&de(t,Z(t,"Month")+r*n),a&&ee(t,"Date",Z(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),s&&e.updateOffset(t,a||r))}function ii(e){return"string"==typeof e||e instanceof String}function ni(e){return m(e)||r(e)||ii(e)||a(e)||oi(e)||si(e)||null===e||e===undefined}function si(e){var t,o,a=i(e)&&!s(e),r=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d=l.length;for(t=0;t<d;t+=1)o=l[t],r=r||n(e,o);return a&&r}function oi(e){var i=t(e),n=!1;return i&&(n=0===e.filter(function(t){return!a(t)&&ii(e)}).length),i&&n}function ai(e){var t,o,a=i(e)&&!s(e),r=!1,l=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<l.length;t+=1)o=l[t],r=r||n(e,o);return a&&r}function ri(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function li(t,i){1===arguments.length&&(arguments[0]?ni(arguments[0])?(t=arguments[0],i=undefined):ai(arguments[0])&&(i=arguments[0],t=undefined):(t=undefined,i=undefined));var n=t||St(),s=Vt(n,this).startOf("day"),o=e.calendarFormat(this,s)||"sameElse",a=i&&(D(i[o])?i[o].call(this,n):i[o]);return this.format(a||this.localeData().calendar(o,this,St(n)))}function di(){return new g(this)}function ui(e,t){var i=m(e)?e:St(e);return!(!this.isValid()||!i.isValid())&&(t=V(t)||"millisecond","millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())}function ci(e,t){var i=m(e)?e:St(e);return!(!this.isValid()||!i.isValid())&&(t=V(t)||"millisecond","millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())}function fi(e,t,i,n){var s=m(e)?e:St(e),o=m(t)?t:St(t);return!!(this.isValid()&&s.isValid()&&o.isValid())&&(n=n||"()",("("===n[0]?this.isAfter(s,i):!this.isBefore(s,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i)))}function hi(e,t){var i,n=m(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&(t=V(t)||"millisecond","millisecond"===t?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))}function pi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function _i(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function gi(e,t,i){var n,s,o;if(!this.isValid())return NaN;if(n=Vt(e,this),!n.isValid())return NaN;switch(s=6e4*(n.utcOffset()-this.utcOffset()),t=V(t)){case"year":o=mi(this,n)/12;break;case"month":o=mi(this,n);break;case"quarter":o=mi(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-s)/864e5;break;case"week":o=(this-n-s)/6048e5;break;default:o=this-n}return i?o:q(o)}function mi(e,t){if(e.date()<t.date())return-mi(t,e);var i,n,s=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(s,"months");return t-o<0?(i=e.clone().add(s-1,"months"),n=(t-o)/(o-i)):(i=e.clone().add(s+1,"months"),n=(t-o)/(i-o)),-(s+n)||0}function bi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function vi(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?F(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",F(i,"Z")):F(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function yi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n,s="moment",o="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=o+'[")]',this.format(e+t+i+n)}function Di(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var i=F(this,t);return this.localeData().postformat(i)}function Ci(e,t){return this.isValid()&&(m(e)&&e.isValid()||St(e).isValid())?Xt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function wi(e){return this.from(St(),e)}function Si(e,t){return this.isValid()&&(m(e)&&e.isValid()||St(e).isValid())?Xt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ki(e){return this.to(St(),e)}function Ti(e){var t;return e===undefined?this._locale._abbr:(t=tt(e),null!=t&&(this._locale=t),this)}function Ei(){return this._locale}function Pi(e,t){return(e%t+t)%t}function Ii(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-xo:new Date(e,t,i).valueOf()}function Fi(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-xo:Date.UTC(e,t,i)}function xi(t){var i,n;if((t=V(t))===undefined||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?Fi:Ii,t){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=Pi(i+(this._isUTC?0:this.utcOffset()*Io),Fo);break;case"minute":i=this._d.valueOf(),i-=Pi(i,Io);break;case"second":i=this._d.valueOf(),i-=Pi(i,Po)}return this._d.setTime(i),e.updateOffset(this,!0),this}function Li(t){var i,n;if((t=V(t))===undefined||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?Fi:Ii,t){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=Fo-Pi(i+(this._isUTC?0:this.utcOffset()*Io),Fo)-1;break;case"minute":i=this._d.valueOf(),i+=Io-Pi(i,Io)-1;break;case"second":i=this._d.valueOf(),i+=Po-Pi(i,Po)-1}return this._d.setTime(i),e.updateOffset(this,!0),this}function Oi(){return this._d.valueOf()-6e4*(this._offset||0)}function $i(){return Math.floor(this.valueOf()/1e3)}function Mi(){return new Date(this.valueOf())}function Ai(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Vi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ni(){return this.isValid()?this.toISOString():null}function Ri(){return h(this)}function Bi(){return d({},f(this))}function Ui(){return f(this).overflow}function Hi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function ji(t,i){var n,s,o,a=this._eras||tt("en")._eras;for(n=0,s=a.length;n<s;++n){switch(typeof a[n].since){case"string":o=e(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=+Infinity;break;case"string":o=e(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a}function qi(e,t,i){var n,s,o,a,r,l=this.eras();for(e=e.toUpperCase(),n=0,s=l.length;n<s;++n)if(o=l[n].name.toUpperCase(),a=l[n].abbr.toUpperCase(),r=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[n];break;case"NNNN":if(o===e)return l[n];break;case"NNNNN":if(r===e)return l[n]}else if([o,a,r].indexOf(e)>=0)return l[n]}function zi(t,i){var n=t.since<=t.until?1:-1;return i===undefined?e(t.since).year():e(t.since).year()+(i-t.offset)*n}function Wi(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].name;if(n[e].until<=i&&i<=n[e].since)return n[e].name}return""}function Gi(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].narrow;if(n[e].until<=i&&i<=n[e].since)return n[e].narrow}return""}function Yi(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].abbr;if(n[e].until<=i&&i<=n[e].since)return n[e].abbr}return""}function Ki(){var t,i,n,s,o=this.localeData().eras();for(t=0,i=o.length;t<i;++t)if(n=o[t].since<=o[t].until?1:-1,s=this.clone().startOf("day").valueOf(),o[t].since<=s&&s<=o[t].until||o[t].until<=s&&s<=o[t].since)return(this.year()-e(o[t].since).year())*n+o[t].offset;return this.year()}function Xi(e){
return n(this,"_erasNameRegex")||sn.call(this),e?this._erasNameRegex:this._erasRegex}function Ji(e){return n(this,"_erasAbbrRegex")||sn.call(this),e?this._erasAbbrRegex:this._erasRegex}function Qi(e){return n(this,"_erasNarrowRegex")||sn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Zi(e,t){return t.erasAbbrRegex(e)}function en(e,t){return t.erasNameRegex(e)}function tn(e,t){return t.erasNarrowRegex(e)}function nn(e,t){return t._eraYearOrdinalRegex||ks}function sn(){var e,t,i,n,s,o=[],a=[],r=[],l=[],d=this.eras();for(e=0,t=d.length;e<t;++e)i=j(d[e].name),n=j(d[e].abbr),s=j(d[e].narrow),a.push(i),o.push(n),r.push(s),l.push(i),l.push(n),l.push(s);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function on(e,t){E(0,[e,e.length],0,t)}function an(e){return fn.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function rn(e){return fn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function ln(){return ye(this.year(),1,4)}function dn(){return ye(this.isoWeekYear(),1,4)}function un(){var e=this.localeData()._week;return ye(this.year(),e.dow,e.doy)}function cn(){var e=this.localeData()._week;return ye(this.weekYear(),e.dow,e.doy)}function fn(e,t,i,n,s){var o;return null==e?ve(this,n,s).year:(o=ye(e,n,s),t>o&&(t=o),hn.call(this,e,t,i,n,s))}function hn(e,t,i,n,s){var o=be(e,t,i,n,s),a=ge(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function pn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function _n(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function gn(e,t){t[Bs]=z(1e3*("0."+e))}function mn(){return this._isUTC?"UTC":""}function bn(){return this._isUTC?"Coordinated Universal Time":""}function vn(e){return St(1e3*e)}function yn(){return St.apply(null,arguments).parseZone()}function Dn(e){return e}function Cn(e,t,i,n){var s=tt(),o=u().set(n,t);return s[i](o,e)}function wn(e,t,i){if(a(e)&&(t=e,e=undefined),e=e||"",null!=t)return Cn(e,t,i,"month");var n,s=[];for(n=0;n<12;n++)s[n]=Cn(e,n,i,"month");return s}function Sn(e,t,i,n){"boolean"==typeof e?(a(t)&&(i=t,t=undefined),t=t||""):(t=e,i=t,e=!1,a(t)&&(i=t,t=undefined),t=t||"");var s,o=tt(),r=e?o._week.dow:0,l=[];if(null!=i)return Cn(t,(i+r)%7,n,"day");for(s=0;s<7;s++)l[s]=Cn(t,(s+r)%7,n,"day");return l}function kn(e,t){return wn(e,t,"months")}function Tn(e,t){return wn(e,t,"monthsShort")}function En(e,t,i){return Sn(e,t,i,"weekdays")}function Pn(e,t,i){return Sn(e,t,i,"weekdaysShort")}function In(e,t,i){return Sn(e,t,i,"weekdaysMin")}function Fn(){var e=this._data;return this._milliseconds=Ro(this._milliseconds),this._days=Ro(this._days),this._months=Ro(this._months),e.milliseconds=Ro(e.milliseconds),e.seconds=Ro(e.seconds),e.minutes=Ro(e.minutes),e.hours=Ro(e.hours),e.months=Ro(e.months),e.years=Ro(e.years),this}function xn(e,t,i,n){var s=Xt(t,i);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function Ln(e,t){return xn(this,e,t,1)}function On(e,t){return xn(this,e,t,-1)}function $n(e){return e<0?Math.floor(e):Math.ceil(e)}function Mn(){var e,t,i,n,s,o=this._milliseconds,a=this._days,r=this._months,l=this._data;return o>=0&&a>=0&&r>=0||o<=0&&a<=0&&r<=0||(o+=864e5*$n(Vn(r)+a),a=0,r=0),l.milliseconds=o%1e3,e=q(o/1e3),l.seconds=e%60,t=q(e/60),l.minutes=t%60,i=q(t/60),l.hours=i%24,a+=q(i/24),s=q(An(a)),r+=s,a-=$n(Vn(s)),n=q(r/12),r%=12,l.days=a,l.months=r,l.years=n,this}function An(e){return 4800*e/146097}function Vn(e){return 146097*e/4800}function Nn(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+An(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Vn(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Rn(e){return function(){return this.as(e)}}function Bn(){return Xt(this)}function Un(e){return e=V(e),this.isValid()?this[e+"s"]():NaN}function Hn(e){return function(){return this.isValid()?this._data[e]:NaN}}function jn(){return q(this.days()/7)}function qn(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function zn(e,t,i,n){var s=Xt(e).abs(),o=na(s.as("s")),a=na(s.as("m")),r=na(s.as("h")),l=na(s.as("d")),d=na(s.as("M")),u=na(s.as("w")),c=na(s.as("y")),f=o<=i.ss&&["s",o]||o<i.s&&["ss",o]||a<=1&&["m"]||a<i.m&&["mm",a]||r<=1&&["h"]||r<i.h&&["hh",r]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(f=f||u<=1&&["w"]||u<i.w&&["ww",u]),f=f||d<=1&&["M"]||d<i.M&&["MM",d]||c<=1&&["y"]||["yy",c],f[2]=t,f[3]=+e>0,f[4]=n,qn.apply(null,f)}function Wn(e){return e===undefined?na:"function"==typeof e&&(na=e,!0)}function Gn(e,t){return sa[e]!==undefined&&(t===undefined?sa[e]:(sa[e]=t,"s"===e&&(sa.ss=t-1),!0))}function Yn(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,s=!1,o=sa;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(s=e),"object"==typeof t&&(o=Object.assign({},sa,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=this.localeData(),n=zn(this,!s,o,i),s&&(n=i.pastFuture(+this,n)),i.postformat(n)}function Kn(e){return(e>0)-(e<0)||+e}function Xn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,s,o,a,r,l=oa(this._milliseconds)/1e3,d=oa(this._days),u=oa(this._months),c=this.asSeconds();return c?(e=q(l/60),t=q(e/60),l%=60,e%=60,i=q(u/12),u%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",s=c<0?"-":"",o=Kn(this._months)!==Kn(c)?"-":"",a=Kn(this._days)!==Kn(c)?"-":"",r=Kn(this._milliseconds)!==Kn(c)?"-":"",s+"P"+(i?o+i+"Y":"")+(u?o+u+"M":"")+(d?a+d+"D":"")+(t||e||l?"T":"")+(t?r+t+"H":"")+(e?r+e+"M":"")+(l?r+n+"S":"")):"P0D"}var Jn,Qn;Qn=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),n=i.length>>>0;for(t=0;t<n;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var Zn=e.momentProperties=[],es=!1,ts={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var is;is=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)n(e,t)&&i.push(t);return i};var ns,ss={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},os=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,as=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,rs={},ls={},ds={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},us=/\d{1,2}/,cs={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},fs={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"},hs={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},ps=/\d/,_s=/\d\d/,gs=/\d{3}/,ms=/\d{4}/,bs=/[+-]?\d{6}/,vs=/\d\d?/,ys=/\d\d\d\d?/,Ds=/\d\d\d\d\d\d?/,Cs=/\d{1,3}/,ws=/\d{1,4}/,Ss=/[+-]?\d{1,6}/,ks=/\d+/,Ts=/[+-]?\d+/,Es=/Z|[+-]\d\d:?\d\d/gi,Ps=/Z|[+-]\d\d(?::?\d\d)?/gi,Is=/[+-]?\d+(\.\d{1,3})?/,Fs=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xs=/^[1-9]\d?/,Ls=/^([1-9]\d|\d)/;ns={};var Os={},$s=0,Ms=1,As=2,Vs=3,Ns=4,Rs=5,Bs=6,Us=7,Hs=8;E("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),E(0,["YY",2],0,function(){return this.year()%100}),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),B("Y",Ts),B("YY",vs,_s),B("YYYY",ws,ms),B("YYYYY",Ss,bs),B("YYYYYY",Ss,bs),W(["YYYYY","YYYYYY"],$s),W("YYYY",function(t,i){i[$s]=2===t.length?e.parseTwoDigitYear(t):z(t)}),W("YY",function(t,i){i[$s]=e.parseTwoDigitYear(t)}),W("Y",function(e,t){t[$s]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return z(e)+(z(e)>68?1900:2e3)};var js,qs=Q("FullYear",!0);js=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},E("M",["MM",2],"Mo",function(){return this.month()+1}),E("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),E("MMMM",0,0,function(e){return this.localeData().months(this,e)}),B("M",vs,xs),B("MM",vs,_s),B("MMM",function(e,t){return t.monthsShortRegex(e)}),B("MMMM",function(e,t){return t.monthsRegex(e)}),W(["M","MM"],function(e,t){t[Ms]=z(e)-1}),W(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);null!=s?t[Ms]=s:f(i).invalidMonth=e});var zs="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ws="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Gs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ys=Fs,Ks=Fs;E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),B("w",vs,xs),B("ww",vs,_s),B("W",vs,xs),B("WW",vs,_s),G(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=z(e)});var Xs={dow:0,doy:6};E("d",0,"do","day"),E("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),E("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),E("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),B("d",vs),B("e",vs),B("E",vs),B("dd",function(e,t){return t.weekdaysMinRegex(e)}),B("ddd",function(e,t){return t.weekdaysShortRegex(e)}),B("dddd",function(e,t){return t.weekdaysRegex(e)}),G(["dd","ddd","dddd"],function(e,t,i,n){var s=i._locale.weekdaysParse(e,n,i._strict);null!=s?t.d=s:f(i).invalidWeekday=e}),G(["d","e","E"],function(e,t,i,n){t[n]=z(e)});var Js="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qs="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Zs="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),eo=Fs,to=Fs,io=Fs;E("H",["HH",2],0,"hour"),E("h",["hh",2],0,Ue),E("k",["kk",2],0,He),E("hmm",0,0,function(){return""+Ue.apply(this)+T(this.minutes(),2)}),E("hmmss",0,0,function(){return""+Ue.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),E("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),E("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),je("a",!0),je("A",!1),B("a",qe),B("A",qe),B("H",vs,Ls),B("h",vs,xs),B("k",vs,xs),B("HH",vs,_s),B("hh",vs,_s),B("kk",vs,_s),B("hmm",ys),B("hmmss",Ds),B("Hmm",ys),B("Hmmss",Ds),W(["H","HH"],Vs),W(["k","kk"],function(e,t,i){var n=z(e);t[Vs]=24===n?0:n}),W(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),W(["h","hh"],function(e,t,i){t[Vs]=z(e),f(i).bigHour=!0}),W("hmm",function(e,t,i){var n=e.length-2;t[Vs]=z(e.substr(0,n)),t[Ns]=z(e.substr(n)),f(i).bigHour=!0}),W("hmmss",function(e,t,i){var n=e.length-4,s=e.length-2;t[Vs]=z(e.substr(0,n)),t[Ns]=z(e.substr(n,2)),t[Rs]=z(e.substr(s)),f(i).bigHour=!0}),W("Hmm",function(e,t,i){var n=e.length-2;t[Vs]=z(e.substr(0,n)),t[Ns]=z(e.substr(n))}),W("Hmmss",function(e,t,i){var n=e.length-4,s=e.length-2;t[Vs]=z(e.substr(0,n)),t[Ns]=z(e.substr(n,2)),t[Rs]=z(e.substr(s))});var no,so=/[ap]\.?m?\.?/i,oo=Q("Hours",!0),ao={calendar:ss,longDateFormat:ds,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:us,relativeTime:cs,months:zs,monthsShort:Ws,week:Xs,weekdays:Js,weekdaysMin:Zs,weekdaysShort:Qs,meridiemParse:so},ro={},lo={},uo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,co=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fo=/Z|[+-]\d\d(?::?\d\d)?/,ho=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],po=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_o=/^\/?Date\((-?\d+)/i,go=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=v("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var bo=v("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),vo=v("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()}),yo=function(){return Date.now?Date.now():+new Date},Do=["year","quarter","month","week","day","hour","minute","second","millisecond"];Mt("Z",":"),Mt("ZZ",""),B("Z",Ps),B("ZZ",Ps),W(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=At(Ps,e)});var Co=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var wo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,So=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xt.fn=xt.prototype,Xt.invalid=Ft;var ko=ei(1,"add"),To=ei(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Eo=v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)}),Po=1e3,Io=60*Po,Fo=60*Io,xo=3506328*Fo;E("N",0,0,"eraAbbr"),E("NN",0,0,"eraAbbr"),E("NNN",0,0,"eraAbbr"),E("NNNN",0,0,"eraName"),E("NNNNN",0,0,"eraNarrow"),E("y",["y",1],"yo","eraYear"),E("y",["yy",2],0,"eraYear"),E("y",["yyy",3],0,"eraYear"),E("y",["yyyy",4],0,"eraYear"),B("N",Zi),B("NN",Zi),B("NNN",Zi),B("NNNN",en),B("NNNNN",tn),W(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,n){var s=i._locale.erasParse(e,n,i._strict);s?f(i).era=s:f(i).invalidEra=e}),B("y",ks),B("yy",ks),B("yyy",ks),B("yyyy",ks),B("yo",nn),W(["y","yy","yyy","yyyy"],$s),W(["yo"],function(e,t,i,n){var s;i._locale._eraYearOrdinalRegex&&(s=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[$s]=i._locale.eraYearOrdinalParse(e,s):t[$s]=parseInt(e,10)}),E(0,["gg",2],0,function(){return this.weekYear()%100}),E(0,["GG",2],0,function(){return this.isoWeekYear()%100}),on("gggg","weekYear"),on("ggggg","weekYear"),on("GGGG","isoWeekYear"),on("GGGGG","isoWeekYear"),B("G",Ts),B("g",Ts),B("GG",vs,_s),B("gg",vs,_s),B("GGGG",ws,ms),B("gggg",ws,ms),B("GGGGG",Ss,bs),B("ggggg",Ss,bs),G(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=z(e)}),G(["gg","GG"],function(t,i,n,s){i[s]=e.parseTwoDigitYear(t)}),E("Q",0,"Qo","quarter"),B("Q",ps),W("Q",function(e,t){t[Ms]=3*(z(e)-1)}),E("D",["DD",2],"Do","date"),B("D",vs,xs),B("DD",vs,_s),B("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),W(["D","DD"],As),W("Do",function(e,t){t[As]=z(e.match(vs)[0])});var Lo=Q("Date",!0);E("DDD",["DDDD",3],"DDDo","dayOfYear"),B("DDD",Cs),B("DDDD",gs),W(["DDD","DDDD"],function(e,t,i){i._dayOfYear=z(e)}),E("m",["mm",2],0,"minute"),B("m",vs,Ls),B("mm",vs,_s),W(["m","mm"],Ns);var Oo=Q("Minutes",!1);E("s",["ss",2],0,"second"),B("s",vs,Ls),B("ss",vs,_s),W(["s","ss"],Rs);var $o=Q("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)}),E(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,function(){return 10*this.millisecond()}),E(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),E(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),E(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),E(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),E(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),B("S",Cs,ps),B("SS",Cs,_s),B("SSS",Cs,gs);var Mo,Ao;for(Mo="SSSS";Mo.length<=9;Mo+="S")B(Mo,ks);for(Mo="S";Mo.length<=9;Mo+="S")W(Mo,gn);Ao=Q("Milliseconds",!1),E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var Vo=g.prototype;Vo.add=ko,Vo.calendar=li,Vo.clone=di,Vo.diff=gi,Vo.endOf=Li,Vo.format=Di,Vo.from=Ci,Vo.fromNow=wi,Vo.to=Si,Vo.toNow=ki,Vo.get=te,Vo.invalidAt=Ui,Vo.isAfter=ui,Vo.isBefore=ci,Vo.isBetween=fi,Vo.isSame=hi,Vo.isSameOrAfter=pi,Vo.isSameOrBefore=_i,Vo.isValid=Ri,Vo.lang=Eo,Vo.locale=Ti,Vo.localeData=Ei,Vo.max=vo,Vo.min=bo,Vo.parsingFlags=Bi,Vo.set=ie,Vo.startOf=xi,Vo.subtract=To,Vo.toArray=Ai,Vo.toObject=Vi,Vo.toDate=Mi,Vo.toISOString=vi,Vo.inspect=yi,"undefined"!=typeof Symbol&&null!=Symbol["for"]&&(Vo[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Vo.toJSON=Ni,Vo.toString=bi,Vo.unix=$i,Vo.valueOf=Oi,Vo.creationData=Hi,Vo.eraName=Wi,Vo.eraNarrow=Gi,Vo.eraAbbr=Yi,Vo.eraYear=Ki,Vo.year=qs,Vo.isLeapYear=J,Vo.weekYear=an,Vo.isoWeekYear=rn,Vo.quarter=Vo.quarters=pn,Vo.month=ue,Vo.daysInMonth=ce,Vo.week=Vo.weeks=Se,Vo.isoWeek=Vo.isoWeeks=ke,Vo.weeksInYear=un,Vo.weeksInWeekYear=cn,Vo.isoWeeksInYear=ln,Vo.isoWeeksInISOWeekYear=dn,Vo.date=Lo,Vo.day=Vo.days=$e,Vo.weekday=Me,Vo.isoWeekday=Ae,Vo.dayOfYear=_n,Vo.hour=Vo.hours=oo,Vo.minute=Vo.minutes=Oo,Vo.second=Vo.seconds=$o,Vo.millisecond=Vo.milliseconds=Ao,Vo.utcOffset=Rt,Vo.utc=Ut,Vo.local=Ht,Vo.parseZone=jt,Vo.hasAlignedHourOffset=qt,Vo.isDST=zt,Vo.isLocal=Gt,Vo.isUtcOffset=Yt,Vo.isUtc=Kt,Vo.isUTC=Kt,Vo.zoneAbbr=mn,Vo.zoneName=bn,Vo.dates=v("dates accessor is deprecated. Use date instead.",Lo),Vo.months=v("months accessor is deprecated. Use month instead",ue),Vo.years=v("years accessor is deprecated. Use year instead",qs),Vo.zone=v("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bt),Vo.isDSTShifted=v("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wt);var No=S.prototype;No.calendar=k,No.longDateFormat=L,No.invalidDate=O,No.ordinal=$,No.preparse=Dn,No.postformat=Dn,No.relativeTime=M,No.pastFuture=A,No.set=C,No.eras=ji,No.erasParse=qi,No.erasConvertYear=zi,No.erasAbbrRegex=Ji,No.erasNameRegex=Xi,No.erasNarrowRegex=Qi,No.months=oe,No.monthsShort=ae,No.monthsParse=le,No.monthsRegex=he,No.monthsShortRegex=fe,No.week=De,No.firstDayOfYear=we,No.firstDayOfWeek=Ce,No.weekdays=Ie,No.weekdaysMin=xe,No.weekdaysShort=Fe,No.weekdaysParse=Oe,No.weekdaysRegex=Ve,No.weekdaysShortRegex=Ne,No.weekdaysMinRegex=Re,No.isPM=ze,No.meridiem=We,Qe("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===z(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=v("moment.lang is deprecated. Use moment.locale instead.",Qe),e.langData=v("moment.langData is deprecated. Use moment.localeData instead.",tt);var Ro=Math.abs,Bo=Rn("ms"),Uo=Rn("s"),Ho=Rn("m"),jo=Rn("h"),qo=Rn("d"),zo=Rn("w"),Wo=Rn("M"),Go=Rn("Q"),Yo=Rn("y"),Ko=Bo,Xo=Hn("milliseconds"),Jo=Hn("seconds"),Qo=Hn("minutes"),Zo=Hn("hours"),ea=Hn("days"),ta=Hn("months"),ia=Hn("years"),na=Math.round,sa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},oa=Math.abs,aa=xt.prototype;return aa.isValid=It,aa.abs=Fn,aa.add=Ln,aa.subtract=On,aa.as=Nn,aa.asMilliseconds=Bo,aa.asSeconds=Uo,aa.asMinutes=Ho,aa.asHours=jo,aa.asDays=qo,aa.asWeeks=zo,aa.asMonths=Wo,aa.asQuarters=Go,aa.asYears=Yo,aa.valueOf=Ko,aa._bubble=Mn,aa.clone=Bn,aa.get=Un,aa.milliseconds=Xo,aa.seconds=Jo,aa.minutes=Qo,aa.hours=Zo,aa.days=ea,aa.weeks=jn,aa.months=ta,aa.years=ia,aa.humanize=Yn,aa.toISOString=Xn,aa.toString=Xn,aa.toJSON=Xn,aa.locale=Ti,aa.localeData=Ei,aa.toIsoString=v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xn),aa.lang=Eo,E("X",0,0,"unix"),E("x",0,0,"valueOf"),B("x",Ts),B("X",Is),W("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e))}),W("x",function(e,t,i){i._d=new Date(z(e))}),e.version="2.30.1",function(e){Jn=e}(St),e.fn=Vo,e.min=Tt,e.max=Et,e.now=yo,e.utc=u,e.unix=vn,e.months=kn,e.isDate=r,e.locale=Qe,e.invalid=p,e.duration=Xt,e.isMoment=m,e.weekdays=En,e.parseZone=yn,e.localeData=tt,e.isDuration=Lt,e.monthsShort=Tn,e.weekdaysMin=In,e.defineLocale=Ze,e.updateLocale=et,e.locales=it,e.weekdaysShort=Pn,e.normalizeUnits=V,e.relativeTimeRounding=Wn,e.relativeTimeThreshold=Gn,e.calendarFormat=ri,e.prototype=Vo,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e}),define("moment",["moment/moment"],function(e){return e}),define("skins/form/validator/date",["config/main","static/utils","lib/tools","./input_base","lib/i18n!front"],function(e,t,i,n,s){var o=function(o,a){if("object"==typeof a){n.apply(this,[o,a]),this.hidden_input=this.input.parent().next();var r=this,l=function(){require(["libs/datetimepicker"],function(){var n=s.__("widget.datepicker.*");for(var o in n)if(n.hasOwnProperty(o)){var l=o.split("_");if(l.length<=1)n[o]=t.unescape(n[o]);else{for(var d=1;d<l.length;d++)l[d]=i.ucfirst(l[d]);l=l.join(""),n[l]=t.unescape(n[o]),delete n[o]}}var u={locale:e.dyn.locale,icons:{time:"glyphicon icon-f icf-clock",date:"glyphicon icon-f icf-calendar",up:"glyphicon icon-f icf-angle-up",down:"glyphicon icon-f icf-angle-down",previous:"glyphicon icon-f icf-chevron-left",next:"glyphicon icon-f icf-chevron-right",today:"glyphicon icon-f icf-arrows",clear:"glyphicon icon-f icf-trash",close:"glyphicon icon-f icf-close"},tooltips:n,allowInputToggle:!0,useCurrent:!1};a.options.with_time?u.format="LLL":u.format="LL",a.options.min_date&&(u.minDate=a.options.min_date),a.options.max_date&&a.options.lock_calendar_on_max_date&&(u.maxDate=a.options.max_date);var c=r.input.val(),f=r.input.parent().datetimepicker(u).on("dp.change",function(e){var t="YYYY-MM-DD";a.options.with_time&&(t+=" HH:mm:ss"),r.hidden_input.val(e.date?e.date.clone().locale("en").format(t):"")});if("string"==typeof c&&c.length>0){var h=0,p=0,_=0,g=0,m=0,b=0,v=c.split(/[ :-]+/);v.length>=3&&(h=parseInt(v[0]),p=parseInt(v[1])-1,_=parseInt(v[2]),v.length>=6&&(g=parseInt(v[3]),m=parseInt(v[4]),b=parseInt(v[5]))),c=new Date(h,p,_,g,m,b),isNaN(c.getTime())||f.data("DateTimePicker").date(c)}r.input.on("blur keyup",function(){r.validate()}),r.getValue().length>0&&r.validate()})};if("en"!==e.dyn.locale){var d=e.dyn.locale;"zh"===d&&(d="zh-cn"),require(["moment","moment/locale/"+d],function(e){e.locale(d),l()})}else l()}};return o.prototype=new n,o.prototype.getInput=function(){return $("#"+this.id)},o.prototype.doValidate=function(e){return!this.options.required||0!==e.length||(this.setError(this.getMessage("required","Required")),!1)},o}),define("skins/form/validator/file_validator",["static/utils","./input_base"],function(e,t){var i=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return i.prototype=new t,i.prototype._init=function(){var e=this;this.input.on("change input",function(){e.validate()}),this.options.no_init_validate||this.validate()},i.prototype.doValidate=function(t){if(this.options.required&&0===t.length)return this.setError(this.getMessage("required","Required")),!1;if(t.length>0&&"object"==typeof this.options.extensions&&this.options.extensions.length>0){var i="",n=t.lastIndexOf(".");if(-1===n)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1;if(i=t.substring(n+1).toLowerCase(),!/^[a-z0-1]{2,20}$/.test(i))return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1;var s=!1;for(var o in this.options.extensions)if(this.options.extensions.hasOwnProperty(o)&&this.options.extensions[o].toLowerCase()===i){s=!0;break}if(!s)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1}return!0},i}),define("skins/form/validator/integer",["./input_base"],function(e){var t=function(t,i){if("object"==typeof i){e.apply(this,[t,i]);var n=this;this.input.on("blur keyup input",function(){n.validate()}),this.validate()}};return t.prototype=new e,t.prototype.doValidate=function(e){return 0===e.length?!this.options.required||(this.setError(this.getMessage("required","Required")),!1):e.match(/^\d+$/g)?(e=parseInt(e),null!==this.options.min&&e<this.options.min?(this.setError(this.getMessage("min","Must be greater than %min%",{"%value%":e.toString(),"%min%":this.options.min})),!1):!(this.options.max>0&&e>this.options.max)||(this.setError(this.getMessage("max","Must be less than %max%",{"%value%":e.toString(),"%max%":this.options.max})),!1)):(this.setError(this.getMessage("invalid","Invalid",{"%value%":this.strimwidth(e,20)})),!1)},t}),define("skins/form/validator/language_alphabet",["static/utils","./base","lib/i18n!front"],function(e,t,i){var n=function(e,i){t.apply(this,[e,i]);var n=e.getRoot();if(this.langinput=$("#"+n.form.prop("id")+"_"+i.options.language_field.replace(/\|/g,"_")),0!==this.langinput.length&&(this.textinput=$("#"+n.form.prop("id")+"_"+i.options.text_field.replace(/\|/g,"_")),0!==this.textinput.length&&(this.validator=this.textinput.data("validator"),this.validator))){var s=this;this.validator.setupXhr("check_alphabet","/account/checkalphabet",["text","lang"],1),this.validator.setXhrOtherParam("check_alphabet","min_threshold",i.options.min_threshold),this.validator.setXhrOtherParam("check_alphabet","message",i.messages.wrong_alphabet),i.options.original_text&&this.validator.setXhrOtherParam("check_alphabet","original_text",i.options.original_text),"object"==typeof this.options.blacklist&&(this.validator.setXhrOtherParam("check_alphabet","blacklist",this.options.blacklist.options.blacklist),this.validator.setXhrOtherParam("check_alphabet","step_blacklist",this.options.blacklist.options.step_blacklist)),this.options.mismatch_warning&&this.validator.addXhrSuccessCallback("check_alphabet",function(e,t){if(!e||!t.lang||"unk"===$.trim(s.langinput.val())||"unk"===t.lang)return void s.validator.clearWarning();t.lang!==$.trim(s.langinput.val())&&"pt"===t.lang&&"pt-BR"!==$.trim(s.langinput.val())?s.validator.setWarning("<span>"+s.options.mismatch_warning+"</span>"):s.validator.clearWarning()});var o=this.validator.doValidate;this.validator.doValidate=function(e){return s.validator.setXhrOtherValues("check_alphabet",[$.trim(s.langinput.val())]),o.apply(this,[e])},this.langinput.on("change",function(){s.validator.validate()}),this.validator.validate(),this.textinput.trigger("alphabet-validator-init")}};return n.prototype=new t,n.prototype.isValid=function(){return!0},n.prototype.focus=function(){this.validator.focus&&this.validator.focus()},n}),define("skins/form/validator/number",["./input_base"],function(e){var t=function(t,i){if("object"==typeof i){e.apply(this,[t,i]);var n=this;this.input.on("blur keyup input",function(){n.validate()}),this.validate()}};return t.prototype=new e,t.prototype.doValidate=function(e){return 0===e.length?!this.options.required||(this.setError(this.getMessage("required","Required")),!1):e.match(/^\d+(\.\d+)?$/g)?(e=parseFloat(e),null!==this.options.min&&e<this.options.min?(this.setError(this.getMessage("min","Must be greater than %min%",{"%value%":e.toString(),"%min%":this.options.min})),!1):!(this.options.max>0&&e>this.options.max)||(this.setError(this.getMessage("max","Must be less than %max%",{"%value%":e.toString(),"%max%":this.options.max})),!1)):(this.setError(this.getMessage("invalid","Invalid",{"%value%":this.strimwidth(e,20)})),!1)},t}),define("skins/form/validator/password",["./string"],function(e){var t=function(e,t){if(0===e.length)return 0;for(var i=e.split(""),n={Excess:0,Lower:0,Upper:0,Numbers:0,Symbols:0},s={Excess:4,Lower:2,Upper:4,Numbers:5,Symbols:10,Combo:0,FlatLower:0,FlatNumber:0},o=0;o<i.length;o++)i[o].match(/[A-Z]/g)?n.Upper++:i[o].match(/[a-z]/g)?n.Lower++:i[o].match(/[0-9]/g)?n.Numbers++:i[o].match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/)&&n.Symbols++;return n.Excess=i.length-t,n.Lower&&n.Upper&&n.Numbers&&n.Symbols?s.Combo=25:(n.Upper&&n.Numbers||n.Upper&&n.Symbols||n.Numbers&&n.Symbols)&&(s.Combo=15),e.match(/^[\sa-z]+$/)&&(s.FlatLower=-15),e.match(/^[\s0-9]+$/)&&(s.FlatNumber=-35),n.Excess*s.Excess+n.Lower*s.Lower+n.Upper*s.Upper+n.Numbers*s.Numbers+n.Symbols*s.Symbols+s.Combo+s.FlatLower+s.FlatNumber},i=function(t,i){if(i.options.check_strength){var n=$('<div class="progress progress-pwd-check"><div class="progress-bar progress-bar-danger" style="width:0%"></div></div>');this.progress=n.children()}if(i.options.check_pwned&&"WARN"===i.options.check_pwned){var s=this;this.setupXhr("check_password","/account/checkpassword","password",3,1e3,!0),this.addXhrSuccessCallback("check_password",function(e,t){s.input.toggleClass("warn-pwned",t.is_pwned),t.is_pwned?s.setWarning("<span>"+s.getMessage("warn_pwned")+"</span>"):s.clearWarning()})}e.apply(this,[t,i]),i.options.check_strength&&(this.last_strength=null,n.insertAfter(this.input.addClass("input-pwd-check")))};return i.prototype=new e,i.prototype.doValidate=function(i){if(this.options.check_strength){var n=t(i,this.options.min_length);this.progress.width(Math.max(0,Math.min(100,n))+"%").removeClass().addClass("progress-bar"),n>=90?this.progress.addClass("progress-bar-success"):n<25?this.progress.addClass("progress-bar-danger"):n<50?this.progress.addClass("progress-bar-warning"):n<75&&this.progress.addClass("progress-bar-info"),"function"==typeof this.onStrengthChange&&this.last_strength!==n&&this.onStrengthChange(n),this.last_strength=n}var s=e.prototype.doValidate.apply(this,[i]);return!0===s&&i.length&&this.options.min_score>0&&n<this.options.min_score?(this.setError(this.getMessage("too_weak","Your password is too weak.")),!1):s},
i.prototype.onStrengthChange=null,i}),define("skins/form/validator/profile_name",["config/main","static/utils","./string"],function(e,t,i){var n=function(e,t){this.setupXhr("profile_name","/account/checkprofilename","profile"),t.options.check_exists||this.vxhr.profile_name.setOtherParam("allow_duplicate","1"),i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])&&(!!e.replace(/ /g,"_").match(this.getRegexp(this.options.regex))||(this.setError(this.getMessage("name_invalid","Invalid profile name",{"%name%":t.escape(e)})),!1))},n}),define("skins/form/validator/regex",["static/utils","./string"],function(e,t){var i=function(e,i){t.apply(this,[e,i])};return i.prototype=new t,i.prototype.doValidate=function(i){if(!t.prototype.doValidate.apply(this,[i]))return!1;if(0===i.length&&!this.options.required)return!0;var n=i.match(this.getRegexp(this.options.pattern));return!(this.options.must_match&&!n||!this.options.must_match&&n)||(this.setError(this.getMessage("invalid","Invalid",{"%value%":e.escape(i)})),!1)},i}),define("skins/form/validator/profile_website",["config/main","static/utils","./regex"],function(e,t,i){var n=function(e,t){i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){if(!i.prototype.doValidate.apply(this,[e]))return!1;e=e.toLowerCase(),"http://"===e.substring(0,7)?e=e.substring(7):"https://"===e.substring(0,8)&&(e=e.substring(8));var t=e.indexOf("/");t>-1&&(e=e.substring(0,t));for(var n in this.options.blacklisted_domains)if(e.indexOf(this.options.blacklisted_domains[n].toLocaleLowerCase())>-1)return this.setError(this.getMessage("blacklisted","This domain is not allowed")),!1;return!0},n}),define("skins/form/validator/region",["lib/tools","static/dom","lib/converter","./input_base"],function(e,t,i,n){var s={},o=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push({code:i,name:e[i]});return t.sort(function(e,t){return e.name>t.name?1:-1}),t},a=function(e,t){var i=e.getRoot();if(this.country_select=$("#"+i.form.prop("id")+"_"+t.options.country_field.replace(/\|/g,"_")),0===this.country_select.length)return void console.error("Cannot find country validator");this.cur_country=this.country_select.val(),this.cur_xhr=null,this.help=null,n.apply(this,[e,t]);var s=this;this.country_select.on("change",function(){s.validate()}),this.input.on("change",function(){s.validate()}),this.validate()};return a.prototype=new n,a.prototype.getInput=function(){var e=this.parent.getRoot();return $("#"+e.form.prop("id")+"_"+this.options.region_field.replace(/\|/g,"_"))},a.prototype.doValidate=function(t){if(console.info(t),e.isEmpty(t))return console.info("empty",this.options.required,!this.input.prop("disabled")),!(this.options.required&&!this.input.prop("disabled"))||(this.setError(this.getMessage("required","Required")),!1);var i=this.country_select.val();if(this.cur_country===i)return!0;if(this.input.val("").empty().append('<option value=""></option>'),e.isEmpty(i))return this.setRegions({}),!0;if(this.help&&this.help.hide(),"undefined"!=typeof s[i])return this.setRegions(s[i]),!0;this.cur_xhr&&this.cur_xhr.abort();var n=this;return this.setLoading(),this.cur_xhr=$.getJSON("/account/getregions",{country:i},function(e){if(!e.result){if(1!==e.code)return void n.setError(e.message);e.regions={}}var t=o(e.regions);s[i]=t,n.cur_country=i,n.cur_xhr=null,n.setRegions(t),n.validate()}).fail(function(){n.setError(i18n.__("loading.error"))}),!0},a.prototype.setRegions=function(e){for(var t in e)this.input.append('<option value="'+e[t].code+'">'+e[t].name+"</option>");if(this.input.prop("disabled",0===e.length),0===e.length)if(this.help)this.help.show();else{var i=this.input,n=this.input.parent();n.hasClass("input-group")&&(i=n);var s=this.country_select.children('option[value="'+this.cur_country+'"]').text();i.after('<span class="help-block">'+this.getMessage("no_region_for_country"," No known region for country %country%.",{"%country%":s})+"</span>")}},a}),define("skins/form/validator/remote_file",["./string"],function(e){var t=function(t,i){e.apply(this,[t,i])};return t.prototype=new e,t.prototype.doValidate=function(t){if(!e.prototype.doValidate.apply(this,[t]))return!1;if(!this.options.required&&0===t.length)return!0;var i=t.indexOf("://");return-1===i?(this.setError(this.getProtocolErrorMessage()),!1):-1!==$.inArray(t.substring(0,i),this.options.protocols)||(this.setError(this.getProtocolErrorMessage()),!1)},t.prototype.getProtocolErrorMessage=function(){var e=[];for(var t in this.options.protocols)e.push("'"+this.options.protocols[t]+"://'");return this.getMessage("invalid_protocol","Invalid URL. It must start with one of the following protocols: %protocols%.",{"%protocols%":e.join(", ")})},t}),define("text!skins/form/widget/tag_adder/tag.mustache",[],function(){return'<div class="tag" data-elem="tag" data-value="{{ value }}">\n\t<span class="del" data-role="remove">\n\t\t<span class="icon-f icf-close"></span>\n\t</span>\n\t<span class="txt">{{ displayed }}</span>\n</div>'}),define("skins/form/widget/tag_adder",["static/log","mustache","config/main","static/utils","lib/tools","lib/helpers/popup","lib/i18n!front","text!./tag_adder/tag.mustache"],function(e,t,i,n,s,o,a,r){var l=function(e){if(this.$container=$(e).first(),!(this.$container.length<1)){this.$inputTxt=this.$container.find("input[type='text']"),this.$inputHdn=this.$container.find("input[type='hidden']"),this.$btnAdd=this.$container.find("button[data-role='add']"),this.$legend=this.$container.find(".tag-adder-legend");var t=this.$inputHdn.data("options");this.oOptions="object"==typeof t&&Object.keys(t).length>0?t:{},this.sSuggestsOrigin="",this.oSuggestsPop=!1,this.aSuggestsLines=[],this.iSuggestsCurLine=!1,this.iSuggestsMaxQtt=10,this.aTags=[],this.$focusedTag=!1,this.init_suggests_list();var i=this;this.$inputTxt.on("keyup",function(e){i.input_text_manage(e)}),this.$inputTxt.on("keydown",function(e){9!==e.which&&13!==e.which||e.preventDefault()}),this.$inputTxt.on("focus",function(){i.focus_input(!1),i.set_suggests_pop()}),this.$inputTxt.on("blur",function(){i.blured_input_txt()}),this.$inputTxt.prop("autocomplete","off"),this.$btnAdd.on("click",function(){i.clicked_add_btn()}),this.import_from_hidden_inp(),this.$container.addClass("init-ok"),l.addInstance(this)}};return l.prototype={add_tag:function(i,n){if(e.info_("TagAdder --- add_tag",i),this.unset_input_text_error(),this.unset_legend_error(),(n=!!n)&&!this.bInputTxtFocused)return!1;var s=i.split(",");if("string"==typeof i&&s.length>1){for(var o,a=[];s.length>0;){var l=s.shift();o=this.add_tag(l),o||a.push(l)}return n&&a.length>0?(this.$inputTxt.val(a.join(",")),this.set_input_text_error(),!1):o}var d=this.has_tag(i);if(d)return this.focus_tag(i,!0),d;var u=this.format_displayed_tag_value(i);if(i=this.format_saved_tag_value(i,n),!u||!i)return n&&this.set_input_text_error(),!1;var c={value:i,displayed:u};if(this.oOptions.choices_only){var f=this.is_in_suggests_list(i);if(!f)return n&&(this.set_input_text_error(),this.set_legend_error()),!1;if(d=this.has_tag(f.value))return this.focus_tag(i,!0),d;c.value=f.value,c.displayed=f.disp}var h=$(t.render(r,c));h.insertBefore(this.$inputTxt),c.html=h,this.aTags.push(c),this.unfocus_tag();var p=this;return h.on("click",function(){p.focus_tag(c.value)}),h.find('[data-role="remove"]').on("click",function(){p.del_tag(c.value)}),this.write_hidden_inp(),c},has_tag:function(t){e.info_("TagAdder --- has_tag",t),t=this.format_saved_tag_value(t);for(var i in this.aTags)if(this.aTags[i].value===t)return this.aTags[i];return!1},del_tag:function(t){e.info_("TagAdder --- del_tag",t);var i=this.has_tag(t);if(!i)return!1;i.html.fadeOut(function(){$(this).remove()}),this.aTags.splice(this.aTags.indexOf(i),1),this.focus_input(),this.write_hidden_inp()},set_on_focus:function(e){this.oOptions.on_focus="function"==typeof e&&e},focus_tag:function(t,i){e.info_("TagAdder --- focus_tag",t,"partial",i);var n=this.has_tag(t);if(!n)return!1;this.unfocus_tag(),n.html.addClass((i?"partial-":"")+"focused"),"function"==typeof this.oOptions.on_focus&&this.oOptions.on_focus($(n.html).first()),this.$focusedTag=n},unfocus_tag:function(){e.info_("TagAdder --- unfocus_tag"),this.$focusedTag&&$(this.$focusedTag.html).length>0&&($(this.$focusedTag.html).removeClass("focused").removeClass("partial-focused"),this.$focusedTag=!1)},set_input_text_error:function(){e.info_("TagAdder --- set_input_text_error"),this.unset_input_text_error();var t=this;this.set_input_text_error_timer=setTimeout(function(){t.$inputTxt.addClass("inp-error"),t.set_input_text_error_timer=null},10)},unset_input_text_error:function(){e.info_("TagAdder --- unset_input_text_error"),this.set_input_text_error_timer&&(clearTimeout(this.set_input_text_error_timer),this.set_input_text_error_timer=null),this.$inputTxt.removeClass("inp-error")},set_legend_error:function(){if(0!==this.$legend.length){e.info_("TagAdder --- set_legend_error"),this.unset_legend_error();var t=this;this.set_legend_error_timer=setTimeout(function(){t.$legend.addClass("legend-error"),t.set_legend_error_timer=null},10)}},unset_legend_error:function(){e.info_("TagAdder --- unset_legend_error"),this.set_legend_error_timer&&(clearTimeout(this.set_legend_error_timer),this.set_legend_error_timer=null),this.$legend.removeClass("legend-error")},write_hidden_inp:function(){var t=[];for(var i in this.aTags)t.push(this.aTags[i].value);var n=JSON.stringify(t);return e.info_("TagAdder --- write_hidden_inp",n),this.$inputHdn.val(n).change(),n},import_from_hidden_inp:function(){var e=this.$inputHdn.val();if(e.length<1)return!1;var t=JSON.parse(e);if("object"!=typeof t||t.length<1)return!1;for(var i in t)if(this.oOptions.choices_only){for(var n in this.oOptions.choices)if(this.oOptions.choices[n].value===t[i]){this.add_tag(this.oOptions.choices[n].value);break}}else this.add_tag(t[i])},input_text_manage:function(e){if(13===e.which){e.preventDefault();var t="boolean"!=typeof this.iSuggestsCurLine&&$(this.aSuggestsLines[this.iSuggestsCurLine]).length>0?this.add_tag($(this.aSuggestsLines[this.iSuggestsCurLine]).data("value")):this.add_tag(this.$inputTxt.val(),!0);if($(t).length>0)return this.close_suggests_pop(),this.$inputTxt.val("").removeClass("not-empty-val"),void this.focus_input()}if(this.aSuggestsLines.length>0){switch(e.which){case 40:case 9:if("boolean"==typeof this.iSuggestsCurLine?this.iSuggestsCurLine=0:($(this.aSuggestsLines[this.iSuggestsCurLine]).removeClass("focused"),++this.iSuggestsCurLine>this.aSuggestsLines.length-1&&(this.iSuggestsCurLine=!1)),"boolean"!=typeof this.iSuggestsCurLine){var i=this.format_displayed_tag_value(String($(this.aSuggestsLines[this.iSuggestsCurLine]).data("displayed")));this.$inputTxt.val(i)}else this.$inputTxt.val(this.sSuggestsOrigin);break;case 38:if("boolean"==typeof this.iSuggestsCurLine?this.iSuggestsCurLine=this.aSuggestsLines.length-1:($(this.aSuggestsLines[this.iSuggestsCurLine]).removeClass("focused"),--this.iSuggestsCurLine<0&&(this.iSuggestsCurLine=!1)),"boolean"!=typeof this.iSuggestsCurLine){var i=this.format_displayed_tag_value(String($(this.aSuggestsLines[this.iSuggestsCurLine]).data("displayed")));this.$inputTxt.val(i)}else this.$inputTxt.val(this.sSuggestsOrigin);break;case 27:this.close_suggests_pop();break;default:this.iSuggestsCurLine=!1,this.set_suggests_pop()}"boolean"!=typeof this.iSuggestsCurLine&&$(this.aSuggestsLines[this.iSuggestsCurLine]).addClass("focused")}else this.iSuggestsCurLine=!1,this.set_suggests_pop()},focus_input:function(e){this.iBluredLast=!1,this.bInputTxtFocused=!0,this.$inputTxt.addClass("focus"),!1!==e&&this.$inputTxt.focus()},blured_input_txt:function(){this.iBluredLast=$.now();var e=this;this.oBluredTimer&&(console.log("clearTimeout oBluredTimer"),clearTimeout(this.oBluredTimer),this.oBluredTimer=!1),this.oBluredTimer=setTimeout(function(){e.close_if_blured_long_ago()},1e3),this.clean_tag_value(this.$inputTxt.val()).length>0?this.$inputTxt.addClass("not-empty-val"):this.$inputTxt.removeClass("not-empty-val")},close_if_blured_long_ago:function(){if(this.oBluredTimer=!1,!1===this.iBluredLast)return!1;this.bInputTxtFocused=!1,this.$inputTxt.removeClass("focus"),this.close_suggests_pop()},clicked_add_btn:function(){if(this.add_tag(this.$inputTxt.val(),!0))return this.close_suggests_pop(),void this.$inputTxt.val("");this.focus_input()},get_suggests_pop:function(){return this.oSuggestsPop||(this.oSuggestsPop=new o(this.$inputTxt,!1,{relative_to:this.$inputTxt.parents("#page").length?$("#page"):$("body"),position:{v:"below",h:"left"},popup_class:"tag-adder-pop",trigger:!1,autoclose:!0,closebtn:!1})),this.oSuggestsPop},set_suggests_pop:function(){var e=this.get_suggests_pop(),t=this.$inputTxt.val();if(!t)return this.close_suggests_pop(),!1;var i=this.get_suggests(t);if($(i).length<1)return this.close_suggests_pop(),!1;e.open(),e.setContent($(i))},init_suggests_list:function(){if(this.oOptions.choices){this.suggests_list=[];for(var e in this.oOptions.choices)this.suggests_list.push({value:this.oOptions.choices[e].value,comp:this.format_comparing_value(this.oOptions.choices[e].name),disp:this.format_displayed_tag_value(this.oOptions.choices[e].name)})}else if(i.data&&i.data.best_keywords&&i.data.best_keywords.length>0){this.suggests_list=[];for(var e in i.data.best_keywords)this.suggests_list.push({value:i.data.best_keywords[e].NOM,comp:this.format_comparing_value(i.data.best_keywords[e].NOM),disp:this.format_displayed_tag_value(i.data.best_keywords[e].NOM)})}},get_suggests:function(e){if(!this.suggests_list)return!1;query_comp=this.format_comparing_value(e),this.sSuggestsOrigin="";var t=[],i=[],n=[];for(r in this.suggests_list){var s=this.suggests_list[r];0===s.comp.indexOf(query_comp)?t.push(this.format_suggest_display(s.value,s.disp,query_comp)):-1!==(s.comp+"-").indexOf("-"+query_comp+"-")?i.push(this.format_suggest_display(s.value,s.disp,query_comp)):-1!==s.comp.indexOf(query_comp)&&n.push(this.format_suggest_display(s.value,s.disp,query_comp))}if(t=t.concat(i.concat(n)),t.length<1)return!1;t.length>this.iSuggestsMaxQtt&&(t=t.slice(0,this.iSuggestsMaxQtt)),this.sSuggestsOrigin=e,this.aSuggestsLines=[],this.iSuggestsCurLine=!1;var o=$("<ul></ul>"),a=this;for(var r in t){var l=$("<li>"+t[r].html+"</li>"),d=t[r].value,u=t[r].displayed;l.data("value",d),l.data("displayed",u),l.on("click",function(){a.add_tag($(this).data("value")),a.$inputTxt.val(""),a.focus_input()}),this.aSuggestsLines.push(l),o.append(l)}return o},format_suggest_display:function(e,t,i){var n=this.format_displayed_tag_value(t),s=this.format_comparing_value(t),o=i,a=s.indexOf(o);if(-1===a)return!1;var r=a+o.length;return{value:e,displayed:n,html:n.substring(0,a)+"<strong>"+n.substring(a,a+o.length)+"</strong>"+n.substring(r)}},close_suggests_pop:function(){this.oSuggestsPop&&(this.aSuggestsLines=[],this.iSuggestsCurLine=!1,this.oSuggestsPop.isOpened()&&this.oSuggestsPop.close())},is_in_suggests_list:function(e,t){if(!this.suggests_list)return!1;for(var i in this.suggests_list)if(t){if(this.suggests_list[i].comp===this.format_comparing_value(e))return this.suggests_list[i]}else if(this.suggests_list[i].value===e)return this.suggests_list[i];return!1},clean_tag_value:function(e){var t=n.escape(n.unescape(e.toString()).replace(/\ +/g," ").trim().toLowerCase(),!0);return!(t.length<1)&&t},format_displayed_tag_value:function(e){if("string"!=typeof e)return!1;if("string"!=typeof(e=this.clean_tag_value(e)))return!1;if(str=e.replace(/-/g," "),!str)return!1;str=str.split(" ");for(var t=0;t<str.length;t++)str[t]=str[t].split(""),str[t].length>0&&"string"==typeof str[t][0]?(str[t][0]=str[t][0].toUpperCase(),str[t]=str[t].join("")):str[t]="";return str.join(" ").trim()},format_saved_tag_value:function(e,t){if("number"!=typeof e&&(e=e.toString()),"string"!=typeof e)return!1;var i=this.is_in_suggests_list(e,t);return i?i.value:(str=this.clean_tag_value(e),!!str&&str.trim().replace(/\ /g,"-"))},format_comparing_value:function(e){return e=this.format_saved_tag_value(e),"string"!=typeof e?"":s.translit(e)},block_tag:function(){this.$container.removeClass("init-ok")}},l.S_DATA_INSTANCE="tag-adder-instance",l.A_INSTANCE=[],l.getInstance=function(e){e=$(e);var t;if(e.attr("data-"+l.S_DATA_INSTANCE)?t=e:e.parents().each(function(){$(this).attr("data-"+l.S_DATA_INSTANCE)&&(t=$(this))}),!t||!t.length)return!1;var i=parseInt(t.attr("data-"+l.S_DATA_INSTANCE));if(!i)return!1;for(var n in l.A_INSTANCE)if(l.A_INSTANCE[n].iInstance===i)return l.A_INSTANCE[n];return!1},l.addInstance=function(e){e.iInstance=l.A_INSTANCE.length+1,$(e.$container).attr("data-"+l.S_DATA_INSTANCE,e.iInstance),e.$container.addClass(l.S_DATA_INSTANCE+e.iInstance),l.A_INSTANCE.push(e)},l}),function(){function e(t,n){function o(e,t){try{e()}catch(i){t&&t()}}function a(e){if(null!=a[e])return a[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=a("json-stringify")&&a("date-serialization")&&a("json-parse");else if("date-serialization"==e){if(t=a("json-stringify")&&y){var i=n.stringify;o(function(){t='"-271821-04-20T00:00:00.000Z"'==i(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new c(-1))})}}else{var s,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=n.stringify,u="function"==typeof i;u&&((s=function(){return 1}).toJSON=s,o(function(){u="0"===i(0)&&"0"===i(new l)&&'""'==i(new d)&&i(b)===g&&i(g)===g&&i()===g&&"1"===i(s)&&"[1]"==i([s])&&"[null]"==i([g])&&"null"==i(null)&&"[null,null,null]"==i([g,b,null])&&i({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===i(null,s)&&"[\n 1,\n 2\n]"==i([1,2],null,1)},function(){u=!1})),t=u}if("json-parse"==e){var f,h=n.parse;"function"==typeof h&&o(function(){0!==h("0")||h(!1)||(s=h(r),(f=5==s.a.length&&1===s.a[0])&&(o(function(){f=!h('"\t"')}),f&&o(function(){f=1!==h("01")}),f&&o(function(){f=1!==h("1.")})))},function(){f=!1}),t=f}}return a[e]=!!t}function r(e){return k(this)}t||(t=s.Object()),n||(n=s.Object());var l=t.Number||s.Number,d=t.String||s.String,u=t.Object||s.Object,c=t.Date||s.Date,f=t.SyntaxError||s.SyntaxError,h=t.TypeError||s.TypeError,p=t.Math||s.Math,_=t.JSON||s.JSON;"object"==typeof _&&_&&(n.stringify=_.stringify,n.parse=_.parse);var g,m=u.prototype,b=m.toString,v=m.hasOwnProperty,y=new c(-0xc782b5b800cec);if(o(function(){y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}),a["bug-string-char-index"]=a["date-serialization"]=a.json=a["json-stringify"]=a["json-parse"]=null,!a("json")){var D=a("bug-string-char-index"),C=function(e,t){var n,s,o,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n;for(o in s)v.call(s,o)&&a++;return n=s=null,a?C=function(e,t){var i,n,s="[object Function]"==b.call(e);for(i in e)s&&"prototype"==i||!v.call(e,i)||(n="constructor"===i)||t(i);(n||v.call(e,i="constructor"))&&t(i)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],C=function(e,t){var n,o,a="[object Function]"==b.call(e),r=!a&&"function"!=typeof e.constructor&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||v;for(n in e)a&&"prototype"==n||!r.call(e,n)||t(n);for(o=s.length;n=s[--o];)r.call(e,n)&&t(n)}),C(e,t)};if(!a("json-stringify")&&!a("date-serialization")){var w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S=function(e,t){return("000000"+(t||0)).slice(-e)},k=function(e){var t,i,n,s,o,a,r,l,d;if(y)t=function(e){i=e.getUTCFullYear(),n=e.getUTCMonth(),s=e.getUTCDate(),a=e.getUTCHours(),r=e.getUTCMinutes(),l=e.getUTCSeconds(),d=e.getUTCMilliseconds()};else{var u=p.floor,c=[0,31,59,90,120,151,181,212,243,273,304,334],f=function(e,t){return c[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};t=function(e){for(s=u(e/864e5),i=u(s/365.2425)+1970-1;f(i+1,0)<=s;i++);for(n=u((s-f(i,0))/30.42);f(i,n+1)<=s;n++);s=1+s-f(i,n),o=(e%864e5+864e5)%864e5,a=u(o/36e5)%24,r=u(o/6e4)%60,l=u(o/1e3)%60,d=o%1e3}}return(k=function(e){return e>-1/0&&e<1/0?(t(e),e=(i<=0||i>=1e4?(i<0?"-":"+")+S(6,i<0?-i:i):S(4,i))+"-"+S(2,n+1)+"-"+S(2,s)+"T"+S(2,a)+":"+S(2,r)+":"+S(2,l)+"."+S(3,d)+"Z",i=n=s=a=r=l=d=null):e=null,e})(e)};if(a("json-stringify")&&!a("date-serialization")){var T=n.stringify;n.stringify=function(e,t,i){var n=c.prototype.toJSON;c.prototype.toJSON=r;var s=T(e,t,i);return c.prototype.toJSON=n,s}}else{var E=function(e){var t=e.charCodeAt(0),i=w[t];return i||"\\u00"+S(2,t.toString(16))},P=/[\x00-\x1f\x22\x5c]/g,I=function(e){return P.lastIndex=0,'"'+(P.test(e)?e.replace(P,E):e)+'"'},F=function(e,t,i,n,s,a,r){var l,d,u,f,p,_,m,v,y;if(o(function(){l=t[e]}),"object"==typeof l&&l&&(l.getUTCFullYear&&"[object Date]"==b.call(l)&&l.toJSON===c.prototype.toJSON?l=k(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),i&&(l=i.call(t,e,l)),l==g)return l===g?l:"null";switch(d=typeof l,"object"==d&&(u=b.call(l)),u||d){case"boolean":case"[object Boolean]":return""+l;case"number":case"[object Number]":return l>-1/0&&l<1/0?""+l:"null";case"string":case"[object String]":return I(""+l)}if("object"==typeof l){for(m=r.length;m--;)if(r[m]===l)throw h();if(r.push(l),f=[],v=a,a+=s,"[object Array]"==u){for(_=0,m=l.length;_<m;_++)p=F(_,l,i,n,s,a,r),f.push(p===g?"null":p);y=f.length?s?"[\n"+a+f.join(",\n"+a)+"\n"+v+"]":"["+f.join(",")+"]":"[]"}else C(n||l,function(e){var t=F(e,l,i,n,s,a,r);t!==g&&f.push(I(e)+":"+(s?" ":"")+t)}),y=f.length?s?"{\n"+a+f.join(",\n"+a)+"\n"+v+"}":"{"+f.join(",")+"}":"{}";return r.pop(),y}};n.stringify=function(e,t,n){var s,o,a,r;if(i[typeof t]&&t)if("[object Function]"==(r=b.call(t)))o=t;else if("[object Array]"==r){a={};for(var l,d=0,u=t.length;d<u;)l=t[d++],"[object String]"!=(r=b.call(l))&&"[object Number]"!=r||(a[l]=1)}if(n)if("[object Number]"==(r=b.call(n))){if((n-=n%1)>0)for(n>10&&(n=10),s="";s.length<n;)s+=" "}else"[object String]"==r&&(s=n.length<=10?n:n.slice(0,10));return F("",(l={},l[""]=e,l),o,a,s,"",[])}}}if(!a("json-parse")){var x,L,O=d.fromCharCode,$={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw x=L=null,f()},A=function(){for(var e,t,i,n,s,o=L,a=o.length;x<a;)switch(s=o.charCodeAt(x)){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=D?o.charAt(x):o[x],x++,e;case 34:for(e="@",x++;x<a;)if((s=o.charCodeAt(x))<32)M();else if(92==s)switch(s=o.charCodeAt(++x)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=$[s],x++;break;case 117:for(t=++x,i=x+4;x<i;x++)(s=o.charCodeAt(x))>=48&&s<=57||s>=97&&s<=102||s>=65&&s<=70||M();e+=O("0x"+o.slice(t,x));break;default:M()}else{if(34==s)break;for(s=o.charCodeAt(x),t=x;s>=32&&92!=s&&34!=s;)s=o.charCodeAt(++x);e+=o.slice(t,x)}if(34==o.charCodeAt(x))return x++,e;M();default:if(t=x,45==s&&(n=!0,s=o.charCodeAt(++x)),s>=48&&s<=57){for(48==s&&(s=o.charCodeAt(x+1))>=48&&s<=57&&M(),n=!1;x<a&&(s=o.charCodeAt(x))>=48&&s<=57;x++);if(46==o.charCodeAt(x)){for(i=++x;i<a&&!((s=o.charCodeAt(i))<48||s>57);i++);i==x&&M(),x=i}if(101==(s=o.charCodeAt(x))||69==s){for(s=o.charCodeAt(++x),43!=s&&45!=s||x++,i=x;i<a&&!((s=o.charCodeAt(i))<48||s>57);i++);i==x&&M(),x=i}return+o.slice(t,x)}n&&M();var r=o.slice(x,x+4);if("true"==r)return x+=4,!0;if("fals"==r&&101==o.charCodeAt(x+4))return x+=5,!1;if("null"==r)return x+=4,null;M()}return"$"},V=function(e){var t,i;if("$"==e&&M(),"string"==typeof e){if("@"==(D?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=A());)i?","==e?"]"==(e=A())&&M():M():i=!0,","==e&&M(),t.push(V(e));return t}if("{"==e){for(t={};"}"!=(e=A());)i?","==e?"}"==(e=A())&&M():M():i=!0,","!=e&&"string"==typeof e&&"@"==(D?e.charAt(0):e[0])&&":"==A()||M(),t[e.slice(1)]=V(A());return t}M()}return e},N=function(e,t,i){var n=R(e,t,i);n===g?delete e[t]:e[t]=n},R=function(e,t,i){var n,s=e[t];if("object"==typeof s&&s)if("[object Array]"==b.call(s))for(n=s.length;n--;)N(b,C,s);else C(s,function(e){N(s,e,i)});return i.call(e,t,s)};n.parse=function(e,t){var i,n;return x=0,L=""+e,i=V(A()),"$"!=A()&&M(),x=L=null,t&&"[object Function]"==b.call(t)?R((n={},n[""]=i,n),"",t):i}}}return n.runInContext=e,n}var t="function"==typeof define&&define.amd,i={"function":!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,s=i[typeof window]&&window||this,o=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!o||o.global!==o&&o.window!==o&&o.self!==o||(s=o),n&&!t)e(s,n);else{var a=s.JSON,r=s.JSON3,l=!1,d=e(s,s.JSON3={noConflict:function(){return l||(l=!0,s.JSON=a,s.JSON3=r,a=r=null),d}});s.JSON={parse:d.parse,stringify:d.stringify}}t&&define("json3",[],function(){return d})}.call(this),define("lib/json",[],function(){"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse||require(["json3"])}),define("skins/form/validator/tag_adder",["lib/converter","lib/tools","static/utils","./input_base","skins/form/widget/tag_adder","lib/json"],function(e,t,i,n,s){var o=function(e,t){"object"==typeof t&&(this.setupXhr("title_blacklist","/account/checkblacklist","title"),this.setupXhr("step_blacklist","/account/checkstep","string"),n.apply(this,[e,t]),this._init())};return o.prototype=new n,o.prototype._init=function(){new s(this.input.parents(".tag-adder"));var e=this;this.input.on("change input",function(){e.validate()}),this.input.parent().children("input[type=text]").on("blur",function(){e.validate()}),this.options.show_char_count&&this.initCounter(),this.options.no_init_validate||this.validate()},o.prototype.options_choices=!1,o.prototype.cleanTags=function(e){var n=[],o=this;if("object"==typeof this.options.choices&&!1===this.options_choices){this.options_choices=[];for(var a in this.options.choices){var r=this.options.choices[a];"number"==typeof r&&(r=r.toString()),this.options_choices.push(t.translit(r))}}for(var l in e){var d=e[l];"number"==typeof d&&(d=d.toString());var u=i.escape(i.unescape(d.toString()).replace(/\ +/g," ").trim().toLowerCase(),!0),c=function(){var e=s.getInstance(o.input);if(!e)return!1;e.del_tag(d)},f=this.input.parents(".tag-list").find('[data-elem="tag"][data-value="'+d+'"]');if("undefined"!=typeof this.options.choices&&$.isArray(this.options.choices)&&this.options.choices.length>0){if(-1===this.options_choices.indexOf(t.translit(d)))return this.setError(this.getMessage("not_in_list","'%value%'",{"%value%":d}),c),!1;n.push(d)}else{if(!(u.length>=this.options.min_tag_length))return f.addClass("error"),this.setError(this.getMessage("input_too_short","%value% is too short (%nb_chars% characters min)",{"%value%":'"'+d+'"',"%nb_chars%":this.options.min_tag_length}),c),!1;if(!(u.length<=this.options.max_tag_length))return f.addClass("error"),this.setError(this.getMessage("input_too_long","%value% is too long (%nb_chars% characters max)",{"%value%":'"'+d+'"',"%nb_chars%":this.options.max_tag_length}),c),!1;f.removeClass("error"),n.push(d)}}return n},o.prototype.doValidate=function(e){""===e&&(e="[]");var t=JSON.parse(e),i=this.cleanTags(t,this.options);return!1!==i&&(this.counter&&(this.counter.removeClass("text-danger").children(".count").html(i.length),0===i.length?this.counter.addClass("empty"):this.counter.removeClass("empty")),this.options.min_tags>0&&("object"!=typeof t||i.length<this.options.min_tags)?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("min_tags","%nb% tags minimum",{"%nb%":this.options.min_tags})),!1):!(this.options.max_tags>0&&i.length>this.options.max_tags)||(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_tags","%nb% tags maximum",{"%nb%":this.options.max_tags})),!1))},o.prototype.getTooltipParent=function(){return this.input.parents(".content")},o.prototype.getIconPositionReference=function(){return this.input.parents(".tag-list").children("label")},o.prototype.getInputAgent=function(){return this.input.parents(".tag-list")},o.prototype.counter=!1,o.prototype.initCounter=function(){var e=this.options.max_tags>0&&this.options.max_tags;this.counter=$("<span class='floating-count'><span class='count'></span>"+(e?"<span class='max'>/"+e+"</span>":"")+"</span>"),this.counter.insertAfter(this.input.parent())},o}),define("skins/form/validator/title_blacklist",["./string"],function(e){var t=function(t,i){i.options.blacklist&&this.setupXhr("title_blacklist","/account/checkblacklist","title"),i.options.step_blacklist&&this.setupXhr("step_blacklist","/account/checkstep","string"),e.apply(this,[t,i])};return t.prototype=new e,t.prototype.doValidate=function(t){return!!e.prototype.doValidate.apply(this,[t])},t}),define("skins/form/validator/translations_langs",["static/utils","./base"],function(e,t){var i=function(e,t,n){return!!e&&("string"==typeof t&&0!==t.length&&"empty"!==t&&("unk"===t?i(!0,n,!1):t))},n=function(e,i){t.apply(this,[e,i]);var n=e.getRoot();this.fields=[],this.langs=[];for(var s in i.options.fields)this.setupField(n,i.options.fields[s],i.options.lang_suffix)};return n.prototype=new t,n.prototype.setupField=function(e,t,n){var s="#"+e.form.prop("id")+"_"+t.replace(/\|/g,"_"),o=$(s);if(0===o.length)return console.error('Unable to find lang field "'+s+'" in translations_langs'),!1;var a=s.lastIndexOf(n);if(-1===a)return console.error('Unable to find suffix "'+n+'" in "'+s+"' in translations_langs"),!1;var r=s.substring(0,a),l=$(r);if(0===l.length)return console.error('Unable to find title field "'+r+'" in translations_langs'),!1;var d=l.data("validator");if(!d)return console.error('Unable to find validator for field "'+r+'" in translations_langs'),!1;var u={input:l,validator:d,has_value:$.trim(l.val()).length>0,lang:i(o.val(),o.data("detected"))};this.fields.push(u);var c=this.fields.length-1,f=this,h=d.doValidate;d.doValidate=function(e){if(u.lang)for(var t=0;t<c;t++)if(f.fields[t].lang===u.lang)return this.setError(this.getMessage("invalid","The same lang cannot be used twice")),!1;return h.apply(this,[e])};var p=function(){var e=u.lang;u.lang=i(u.has_value,o.val(),o.data("detected")),e!==u.lang&&f.validate()};o.on("change",p),l.on("keyup",function(){var e=u.has_value;u.has_value=$.trim(l.val()).length>0,e!==u.has_value&&p()})},n.prototype.validate=function(){for(var e in this.fields)this.fields[e].validator.validate();return!0},n.prototype.isValid=function(){return!0},n.prototype.focus=function(){},n}),define("skins/form/validator/user_email",["config/main","static/utils","./email"],function(e,t,i){var n=function(e,t){this.setupXhr("email","/account/checkemail","email"),"boolean"==typeof t.options.allow_variant&&t.options.allow_variant&&this.setXhrOtherParam("email","allow_variant","1"),"number"==typeof t.options.exclude_id_user&&t.options.exclude_id_user>0&&this.setXhrOtherParam("email","exclude",t.options.exclude_id_user),i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])},n});